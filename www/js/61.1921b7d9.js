"use strict";(self["webpackChunktezkel"]=self["webpackChunktezkel"]||[]).push([[61],{2061:function(t,e,i){i.r(e),i.d(e,{default:function(){return h}});var a=i(6252),n=i(3577);const s=(0,a.Uk)("Добавить тариф");function r(t,e,i,r,o,f){const l=(0,a.up)("ion-icon"),u=(0,a.up)("ion-label"),c=(0,a.up)("ion-item"),d=(0,a.up)("ion-list"),m=(0,a.up)("base-layout");return(0,a.wg)(),(0,a.j4)(m,{pageDefaultBackLink:"/user","page-title":"Список тарифов"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.tariffList,(e=>((0,a.wg)(),(0,a.j4)(c,{key:e.tariff_id,detail:"",button:"",onClick:i=>t.$go(`/user/admin-tariff-edit-${e.tariff_id}`)},{default:(0,a.w5)((()=>[(0,a.Wm)(l,{icon:r.briefcaseOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.tariff_name),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128)),(0,a.Wm)(c,{detail:"",button:"",onClick:e[0]||(e[0]=t=>f.itemCreate())},{default:(0,a.w5)((()=>[(0,a.Wm)(l,{icon:r.addOutline,slot:"start"},null,8,["icon"]),(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[s])),_:1})])),_:1})])),_:1})])),_:1})}var o=i(8903),f=i(5618),l=i(9755),u=i.n(l),c={components:{IonItem:f.Ie,IonLabel:f.Q$,IonList:f.q_,IonIcon:f.gu},setup(){return{briefcaseOutline:o.SVL,addOutline:o.s6O}},data(){return{tariffList:[]}},computed:{},methods:{async listLoad(){try{this.tariffList=await u().post(`${this.$heap.state.hostname}Admin/Tariff/listGet`)}catch{}},async itemCreate(){let t={tariff_name:"new tariff"};try{let e=await u().post(`${this.$heap.state.hostname}Admin/Tariff/itemCreate`,JSON.stringify(t));this.$go(`/user/admin-tariff-edit-${e}`)}catch(e){const t=e.responseJSON,i=t.messages.error;switch(i){case"forbidden":this.$flash("Не достаточно прав");break}return!1}},async itemDelete(t){if(!confirm("Вы уверенны"))return;let e={tariff_id:t};try{await u().post(`${this.$heap.state.hostname}Admin/Tariff/itemDelete`,JSON.stringify(e)),this.listLoad()}catch(i){const t=i.responseJSON,e=t.messages.error;switch(e){case"forbidden":this.$flash("Не достаточно прав");break}}}},mounted(){this.listLoad()},ionViewDidEnter(){this.tariffList.length||this.listLoad()},ionViewDidLeave(){this.tariffList=[]}},d=i(3744);const m=(0,d.Z)(c,[["render",r]]);var h=m}}]);
//# sourceMappingURL=61.1921b7d9.js.map