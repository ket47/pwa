"use strict";(self["webpackChunkTezkel"]=self["webpackChunkTezkel"]||[]).push([[655],{7655:function(e,s,t){t.r(s),t.d(s,{default:function(){return h}});var o=t(6252);const r={novalidate:""},n=(0,o.Uk)("Код"),a=(0,o.Uk)("Подтвердить");function i(e,s,t,i,u,d){const l=(0,o.up)("ion-label"),p=(0,o.up)("ion-input"),c=(0,o.up)("ion-col"),f=(0,o.up)("ion-row"),m=(0,o.up)("ion-item"),h=(0,o.up)("ion-list"),_=(0,o.up)("ion-button"),k=(0,o.up)("base-layout");return(0,o.wg)(),(0,o.j4)(k,{"page-title":"Подтверждение телефона","page-default-back-link":"/home",errorMessage:u.error},{default:(0,o.w5)((()=>[(0,o._)("form",r,[(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Wm)(f,null,{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(l,{position:"stacked",color:"primary"},{default:(0,o.w5)((()=>[n])),_:1}),(0,o.Wm)(p,{modelValue:u.fields.code,"onUpdate:modelValue":s[0]||(s[0]=e=>u.fields.code=e),name:"code",type:"numeric",inputmode:"tel",value:u.fields.code,onInput:s[1]||(s[1]=e=>u.fields.code=e.target.value),placeholder:"- - - -",required:""},null,8,["modelValue","value"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,o.Wm)(f,{"responsive-sm":""},{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(_,{onClick:d.onSubmit,expand:"block"},{default:(0,o.w5)((()=>[a])),_:1},8,["onClick"])])),_:1})])),_:1})])])),_:1},8,["errorMessage"])}var u=t(9755),d=t.n(u),l=t(1933),p=t(2008),c={name:"UserVerifyPhone",props:["phone","password"],data(){return{error:"",submitted:!1,fields:{code:""}}},computed:{},methods:{onSubmit(){var e=this;this.submitted=!0,d().post("https://api.tezkel.com/User/phoneVerificationCheck",{user_phone:this.phone,verification_code:this.fields.code}).done((function(){e.signIn()})).fail((function(s){e.error=s.responseJSON.messages.error}))},signIn(){var e=this;let s={user_phone:this.phone,user_pass:this.password,user_pass_confirm:this.password};d().post(p.Z.state.hostname+"User/signIn",s).done((function(){e.getUserData()}))},getUserData(){var e=this;d().post(p.Z.state.hostname+"User/itemGet").done((function(e,s,t){var o=t.getResponseHeader("x-sid");p.Z.commit("setSessionId",o),p.Z.commit("setUser",e),d().ajaxSetup({beforeSend:function(e){e.setRequestHeader("x-sid",o)}}),l.Z.push({path:"/user-dashboard"})})).fail((function(s){e.error=s.responseJSON.messages.error}))}},created(){if(p.Z.state.user.user_phone_verified&&"0"!==p.Z.state.user.user_phone_verified)return l.Z.push("/user-dashboard")}},f=t(3744);const m=(0,f.Z)(c,[["render",i]]);var h=m}}]);
//# sourceMappingURL=655.b4788918.js.map