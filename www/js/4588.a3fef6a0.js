"use strict";(self["webpackChunkTezkel"]=self["webpackChunkTezkel"]||[]).push([[4588],{4588:function(e,t,a){a.r(t),a.d(t,{default:function(){return I}});var s=a(641),l=a(33);const o={key:0},i=["href"],n={key:1};function d(e,t,a,d,m,u){var p,r;const _=(0,s.g2)("ion-text"),h=(0,s.g2)("ion-card-content"),c=(0,s.g2)("ion-card"),g=(0,s.g2)("ion-icon"),I=(0,s.g2)("ion-toggle"),b=(0,s.g2)("ion-item"),f=(0,s.g2)("ion-list"),k=(0,s.g2)("ion-label"),y=(0,s.g2)("ion-item-divider"),F=(0,s.g2)("ion-input"),v=(0,s.g2)("ion-textarea"),P=(0,s.g2)("ion-item-group"),V=(0,s.g2)("ion-radio"),C=(0,s.g2)("ion-radio-group"),$=(0,s.g2)("image-tile-comp"),O=(0,s.g2)("ion-button"),w=(0,s.g2)("base-layout");return(0,s.uX)(),(0,s.Wv)(w,{"page-title":null!==(p=null===(r=m.postItem)||void 0===r?void 0:r.post_title)&&void 0!==p?p:"–ü–æ—Å—Ç"},{default:(0,s.k6)((()=>[m.postItem?((0,s.uX)(),(0,s.CE)("div",o,[(0,s.bF)(c,null,{default:(0,s.k6)((()=>[(0,s.bF)(h,{class:(0,l.C4)(u.messageClass)},{default:(0,s.k6)((()=>[(0,s.bF)(_,{color:"dark"},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(u.message),1)])),_:1})])),_:1},8,["class"])])),_:1}),(0,s.bF)(f,null,{default:(0,s.k6)((()=>[(0,s.bF)(b,null,{default:(0,s.k6)((()=>[(0,s.bF)(g,{src:d.trashOutline,color:"primary",slot:"start"},null,8,["src"]),(0,s.bF)(I,{modelValue:m.is_deleted,"onUpdate:modelValue":t[0]||(t[0]=e=>m.is_deleted=e),color:"danger",onIonChange:t[1]||(t[1]=e=>u.itemDelete(e.target.checked?1:0))},{default:(0,s.k6)((()=>[(0,s.eW)("–£–¥–∞–ª–µ–Ω")])),_:1},8,["modelValue"])])),_:1}),(0,s.bF)(b,null,{default:(0,s.k6)((()=>[(0,s.bF)(g,{src:d.ribbonOutline,color:"primary",slot:"start"},null,8,["src"]),(0,s.bF)(I,{modelValue:m.is_disabled,"onUpdate:modelValue":t[2]||(t[2]=e=>m.is_disabled=e),onIonChange:t[3]||(t[3]=e=>u.itemDisable(e.target.checked?1:0))},{default:(0,s.k6)((()=>[(0,s.eW)("–ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏")])),_:1},8,["modelValue"])])),_:1})])),_:1}),(0,s.Lk)("form",{onChange:t[11]||(t[11]=(...e)=>u.saveForm&&u.saveForm(...e))},[(0,s.bF)(f,{lines:"full"},{default:(0,s.k6)((()=>[(0,s.bF)(P,null,{default:(0,s.k6)((()=>[(0,s.bF)(y,null,{default:(0,s.k6)((()=>[(0,s.bF)(k,null,{default:(0,s.k6)((()=>[(0,s.eW)("–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏")])),_:1})])),_:1}),(0,s.bF)(b,null,{default:(0,s.k6)((()=>[(0,s.bF)(F,{modelValue:m.postItem.post_title,"onUpdate:modelValue":t[4]||(t[4]=e=>m.postItem.post_title=e),label:"–ó–∞–≥–æ–ª–æ–≤–æ–∫*",labelPlacement:"stacked",name:"post_title",placeholder:"–∑–∞–≥–æ–ª–æ–≤–æ–∫",clearInput:"true"},null,8,["modelValue"])])),_:1}),(0,s.bF)(b,null,{default:(0,s.k6)((()=>[(0,s.bF)(v,{modelValue:m.postItem.post_content,"onUpdate:modelValue":t[5]||(t[5]=e=>m.postItem.post_content=e),label:"–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ*",labelPlacement:"stacked",name:"post_content",rows:"6",placeholder:"—Ç–µ–∫—Å—Ç"},null,8,["modelValue"])])),_:1}),(0,s.bF)(b,null,{default:(0,s.k6)((()=>[(0,s.bF)(F,{modelValue:m.postItem.post_route,"onUpdate:modelValue":t[6]||(t[6]=e=>m.postItem.post_route=e),label:"–°—Å—ã–ª–∫–∞*",labelPlacement:"stacked",name:"post_route",placeholder:"—Å—Å—ã–ª–∫–∞",clearInput:"true"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,s.bF)(f,{lines:"full"},{default:(0,s.k6)((()=>[(0,s.bF)(P,null,{default:(0,s.k6)((()=>[(0,s.bF)(y,null,{default:(0,s.k6)((()=>[(0,s.bF)(k,null,{default:(0,s.k6)((()=>[(0,s.eW)("–í—Ä–µ–º—è –¥–µ–π—Å—Ç–≤–∏—è")])),_:1})])),_:1})])),_:1}),(0,s.bF)(b,null,{default:(0,s.k6)((()=>[(0,s.bF)(F,{type:"date",modelValue:m.postItem.started_at,"onUpdate:modelValue":t[7]||(t[7]=e=>m.postItem.started_at=e),label:"–ù–∞—á–∞–ª–æ –ø–æ–∫–∞–∑–∞",labelPlacement:"stacked",name:"started_at"},null,8,["modelValue"])])),_:1}),(0,s.bF)(b,null,{default:(0,s.k6)((()=>[(0,s.bF)(F,{type:"date",modelValue:m.postItem.finished_at,"onUpdate:modelValue":t[8]||(t[8]=e=>m.postItem.finished_at=e),label:"–ö–æ–Ω–µ—Ü –ø–æ–∫–∞–∑–∞",labelPlacement:"stacked",name:"finished_at"},null,8,["modelValue"])])),_:1})])),_:1}),(0,s.bF)(y,null,{default:(0,s.k6)((()=>[(0,s.bF)(k,null,{default:(0,s.k6)((()=>[(0,s.eW)("–¢–∏–ø –ø–æ—Å—Ç–∞")])),_:1})])),_:1}),(0,s.bF)(f,null,{default:(0,s.k6)((()=>[(0,s.bF)(C,{modelValue:m.postItem.post_type,"onUpdate:modelValue":t[10]||(t[10]=e=>m.postItem.post_type=e),onIonChange:u.saveForm,name:"post_type"},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(m.postTypes,(e=>((0,s.uX)(),(0,s.Wv)(b,{key:e.post_type,onClick:t[9]||(t[9]=e=>u.itemImageParamsSet())},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.post_type_name)+" ",1),(0,s.bF)(V,{color:"primary",slot:"end",value:e.post_type},null,8,["value"])])),_:2},1024)))),128))])),_:1},8,["modelValue","onIonChange"])])),_:1})],32),m.imageParams?((0,s.uX)(),(0,s.Wv)(f,{key:0},{default:(0,s.k6)((()=>[(0,s.bF)(y,null,{default:(0,s.k6)((()=>[(0,s.bF)(k,null,{default:(0,s.k6)((()=>[(0,s.eW)("–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è*")])),_:1})])),_:1}),(0,s.bF)($,{images:m.postItem.images,image_holder_id:m.postItem.post_id,params:m.imageParams,title:"–§–æ—Ç–æ –ø–æ—Å—Ç–∞",controller:"Post",ref:"postImgs"},null,8,["images","image_holder_id","params"]),(0,s.bF)(O,{onClick:t[12]||(t[12]=t=>e.$refs.postImgs.take_photo()),color:"light",expand:"block"},{default:(0,s.k6)((()=>[(0,s.bF)(g,{src:d.cameraOutline,slot:"start"},null,8,["src"]),(0,s.eW)(" –î–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ –≤ –ø–æ—Å—Ç ")])),_:1})])),_:1})):(0,s.Q3)("",!0),m.postItem&&m.postItem.updated_user?((0,s.uX)(),(0,s.Wv)(f,{key:1},{default:(0,s.k6)((()=>[(0,s.bF)(y,null,{default:(0,s.k6)((()=>[(0,s.bF)(k)])),_:1}),(0,s.bF)(b,{lines:"none"},{default:(0,s.k6)((()=>[(0,s.eW)(" –ò–∑–º–µ–Ω–µ–Ω "+(0,l.v_)(m.postItem.updated_at)+" ",1),(0,s.Lk)("a",{slot:"end",href:`tel:+${m.postItem.updated_user.user_phone}`},(0,l.v_)(m.postItem.updated_user.user_name),9,i)])),_:1})])),_:1})):(0,s.Q3)("",!0)])):((0,s.uX)(),(0,s.CE)("div",n," loading "))])),_:1},8,["page-title"])}a(4114);var m=a(5654),u=a(5480),p=a(9144),r=a(2311),_=a.n(r),h={components:{IonInput:m.$w,IonTextarea:m.nc,IonCard:m.b_,IonCardContent:m.I9,IonToggle:m.BY,IonIcon:m.iq,IonItem:m.uz,IonList:m.nf,IonLabel:m.he,IonItemDivider:m.Dg,IonItemGroup:m.jh,IonButton:m.Jm,IonText:m.IO,imageTileComp:p.A,IonRadio:m.KO,IonRadioGroup:m.f0},setup(){return{cameraOutline:u.GOB,trashOutline:u.P1A,banOutline:u.Av6,personOutline:u.wAZ,addOutline:u.EKF,calculatorOutline:u.N0h,compassOutline:u.Hy9,chevronBack:u.fcl,layersOutline:u.z8i,ribbonOutline:u.rp8,eyeOffOutline:u.f_X}},data(){return{postId:this.$route.params.id,postItem:null,imageParams:null,postTypes:[{post_type:"homeslide",post_type_name:"–ì–ª–∞–≤–Ω–∞—è-—Å–ª–∞–π–¥ 1920x700",image_height:700,image_width:1920},{post_type:"wellcomeslide",post_type_name:"–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ-—Å–ª–∞–π–¥ 1500x3200",image_height:3200,image_width:1500}],is_deleted:0,is_disabled:0}},computed:{messageCardSeverity(){var e,t;return(null===(e=this.postItem)||void 0===e?void 0:e.validity)<50?"danger":(null===(t=this.postItem)||void 0===t?void 0:t.validity)<this.validity_min?"warning":"primary"},message(){return this.postItem?this.postItem.deleted_at?"–ü–æ—Å—Ç –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω –∏ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω. –í—ã –µ—â–µ –º–æ–∂–µ—Ç–µ –æ—Ç–º–µ–Ω–∏—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ":1==this.postItem.is_disabled?"–ü–æ—Å—Ç –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω –∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏ —É –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞":1==this.postItem.is_hidden?"–ü–æ—Å—Ç —Å–∫—Ä—ã—Ç —Å–æ —Å—Ç–µ–Ω—ã.":"–ü–æ—Å—Ç –∞–∫—Ç–∏–≤–µ–Ω":""},messageClass(){var e,t;return this.postItem?null!==(e=this.postItem)&&void 0!==e&&e.deleted_at?"pdeleted":1==(null===(t=this.postItem)||void 0===t?void 0:t.is_disabled)?"pdisabled":"pactive":""},categoryList(){let e=[];try{let t=this.postItem.member_of_groups.group_ids.split(","),a=this.postItem.member_of_groups.group_names.split(",");for(let s in t)e.push({group_id:t[s],group_name:a[s]})}catch{}return e}},created(){this.itemGet()},methods:{async itemGet(){try{if(0==this.postId)return void await this.itemCreate();let e=await _().post(`${this.$heap.state.hostname}Post/itemGet`,{post_id:this.postId});this.postItem=this.itemPrepare(e),this.itemParseFlags(),this.itemImageParamsSet()}catch(e){}},itemImageParamsSet(){if(this.postItem.post_type)for(let e of this.postTypes)e.post_type==this.postItem.post_type&&(this.imageParams={image_width:e.image_width,image_height:e.image_height})},itemPrepare(e){return e.started_at&&(e.started_at=e.started_at.split(" ")[0]),e.finished_at&&(e.finished_at=e.finished_at.split(" ")[0]),e},itemParseFlags(){this.is_deleted=null==this.postItem.deleted_at?0:1,this.is_disabled=0==this.postItem.is_disabled?0:1},async itemCreate(){const e={post_title:"–ß–µ—Ä–Ω–æ–≤–∏–∫"};try{const t=await _().post(`${this.$heap.state.hostname}Post/itemCreate`,e);t&&this.$router.replace(`/wall/post-edit-${t}`)}catch{}},async itemDelete(e){const t=e?"itemDelete":"itemUnDelete";try{await _().post(`${this.$heap.state.hostname}Post/${t}`,{post_id:this.postId}),this.postItem.deleted_at=e?1:null}catch{this.itemGet()}},async itemDisable(e){if(this.postItem.is_disabled!=e)try{await _().post(`${this.$heap.state.hostname}Post/itemDisable`,{post_id:this.postId,is_disabled:e}),this.postItem.is_disabled=e}catch{this.$flash("–ò–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ"),this.itemGet()}},async itemUpdate(e){try{return await _().post(`${this.$heap.state.hostname}Post/itemUpdate`,JSON.stringify(e)),this.$flash("üíæ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ"),!0}catch(t){const e=t.responseJSON.messages.error;return null!==e&&void 0!==e&&e.includes("post_content")?this.$flash("–û–ø–∏—Å–∞–Ω–∏–µ —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–æ–µ"):null!==e&&void 0!==e&&e.includes("post_title")?this.$flash("–ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–π"):this.$flash("–ò–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ"),this.itemGet(),!1}},saveForm(e){const t=e.target.name,a=this.postItem[t]=e.target.value;this.save(t,a)},async save(e,t){if(!this.postItem.post_id)return;let a={post_id:this.postItem.post_id,[e]:t};this.itemUpdate(a)&&(this.postItem[e]=t,this.itemParseFlags())},categoryDelete(e,t){if(confirm("–ò—Å–∫–ª—é—á–∏—Ç—å —Ç–æ–≤–∞—Ä –∏–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "+t+"?"))try{this.itemUpdateGroup(0,e)}catch{}}}},c=a(6262);const g=(0,c.A)(h,[["render",d],["__scopeId","data-v-e9b979b8"]]);var I=g}}]);
//# sourceMappingURL=4588.a3fef6a0.js.map