"use strict";(self["webpackChunktezkel"]=self["webpackChunktezkel"]||[]).push([[40],{7259:function(t,e,o){o.d(e,{Z:function(){return h}});var n=o(6252),r=o(3577);const i={key:0},l=["src"],u=["src"];function a(t,e,o,a,c,d){const s=(0,n.up)("swiper-slide"),p=(0,n.up)("swiper"),m=(0,n.up)("ion-icon"),g=(0,n.up)("ion-fab-button"),_=(0,n.up)("ion-fab");return(0,n.wg)(),(0,n.iD)(n.HY,null,[c.expanded?((0,n.wg)(),(0,n.iD)("div",i,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.imageList,(e=>((0,n.wg)(),(0,n.iD)("div",{key:e.image_hash,style:{border:"2px solid var(--ion-color-primary)"}},[(0,n._)("img",{src:`${t.$heap.state.hostname}image/get.php/${e.image_hash}.1000.1000.webp`},null,8,l)])))),128))])):((0,n.wg)(),(0,n.j4)(p,{key:1,modules:a.modules,autoplay:{delay:3e3,disableOnInteraction:!1},loop:!0,effect:"fade",style:(0,r.j5)(`height: ${o.imgHeight||"100%"};`)},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.imageList,(e=>((0,n.wg)(),(0,n.j4)(s,{key:e.image_hash},{default:(0,n.w5)((()=>[(0,n._)("div",{class:(0,r.C_)(`${o.mode} cropper`),style:(0,r.j5)(`height: ${o.imgHeight+"px"||0};`)},[(0,n._)("img",{style:(0,r.j5)(`min-height: ${o.imgHeight+"px;"||0}`),src:`${t.$heap.state.hostname}image/get.php/${e.image_hash}.${4*o.imgHeight||1200}.${4*o.imgHeight||1200}.webp`},null,12,u)],6)])),_:2},1024)))),128))])),_:1},8,["modules","style"])),(0,n.Wm)(_,{horizontal:"end",vertical:"top",slot:"fixed"},{default:(0,n.w5)((()=>[(0,n.Wm)(g,{color:"light"},{default:(0,n.w5)((()=>[c.expanded?((0,n.wg)(),(0,n.j4)(m,{key:0,src:a.contract,size:"large",onClick:e[0]||(e[0]=t=>d.minimize())},null,8,["src"])):((0,n.wg)(),(0,n.j4)(m,{key:1,src:a.expand,size:"large",onClick:e[1]||(e[1]=t=>d.maximize())},null,8,["src"]))])),_:1})])),_:1})],64)}var c=o(8903),d=o(3741),s=o(702),p=o(3181),m={components:{Swiper:p.t,SwiperSlide:p.o,IonFab:d.IJ,IonFabButton:d.W4,IonIcon:d.gu},props:["imageList","imgHeight","mode"],setup(){return{modules:[s.pt,s.xW],expand:c.jnR,contract:c.LJB}},data(){return{expanded:!1,vh:0,vw:0}},methods:{maximize(){this.expanded=!0,this.vh=document.getElementsByTagName("ion-content")[0].clientHeight,this.vw=document.getElementsByTagName("ion-content")[0].clientWidth},minimize(){this.expanded=!1,this.vh=document.getElementsByTagName("ion-content")[0].clientHeight,this.vw=document.getElementsByTagName("ion-content")[0].clientWidth}}},g=o(3744);const _=(0,g.Z)(m,[["render",a],["__scopeId","data-v-3fa7f4fe"]]);var h=_},40:function(t,e,o){o.r(e),o.d(e,{default:function(){return j}});var n=o(6252),r=o(3577);const i={class:"product-images"},l=(0,n.Uk)("Редактировать"),u={style:{"font-size":"1.2em"}},a=(0,n.Uk)(),c={key:0},d={key:0,style:{color:"var(--ion-color-danger)","font-size":"0.75em"}},s=(0,n.Uk)("   "),p=(0,n.Uk)("Не заказан"),m=(0,n.Uk)("Итог");function g(t,e,o,g,_,h){var w;const f=(0,n.up)("image-slider"),y=(0,n.up)("ion-icon"),I=(0,n.up)("ion-text"),k=(0,n.up)("ion-chip"),v=(0,n.up)("ion-item"),W=(0,n.up)("ion-list"),z=(0,n.up)("ion-list-header"),C=(0,n.up)("ion-accordion"),b=(0,n.up)("ion-accordion-group"),j=(0,n.up)("ion-label"),x=(0,n.up)("cart-add-buttons"),$=(0,n.up)("ion-textarea"),U=(0,n.up)("base-layout");return(0,n.wg)(),(0,n.j4)(U,{"page-title":null===(w=_.productItem)||void 0===w?void 0:w.product_name,pageDefaultBackLink:"/catalog",cartComponent:g.CartHeader},{default:(0,n.w5)((()=>[(0,n._)("div",i,[_.productItem?((0,n.wg)(),(0,n.j4)(f,{key:0,imageList:_.productItem.images},null,8,["imageList"])):(0,n.kq)("",!0),(0,n.Wm)(W,{class:"product-subactions"},{default:(0,n.w5)((()=>{var o;return[null!==(o=_.productItem)&&void 0!==o&&o.is_writable?((0,n.wg)(),(0,n.j4)(v,{key:0,lines:"none"},{default:(0,n.w5)((()=>[(0,n.Wm)(k,{color:"dark",onClick:e[0]||(e[0]=e=>t.$router.push("/catalog/product-edit-"+_.productId))},{default:(0,n.w5)((()=>[(0,n.Wm)(y,{color:"primary",src:g.settingsOutline},null,8,["src"]),(0,n.Wm)(I,null,{default:(0,n.w5)((()=>[l])),_:1})])),_:1})])),_:1})):(0,n.kq)("",!0)]})),_:1})]),_.productItem?((0,n.wg)(),(0,n.j4)(W,{key:0},{default:(0,n.w5)((()=>[(0,n.Wm)(z,{style:{"font-size":"1.2em"}},{default:(0,n.w5)((()=>[(0,n._)("h3",u,[(0,n._)("b",null,(0,r.zw)(_.productItem.product_name),1),a,h.isAvailable?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("span",c,"(Нет в наличии)"))])])),_:1}),(0,n.Wm)(b,{style:{width:"100%"}},{default:(0,n.w5)((()=>[(0,n.Wm)(C,null,{default:(0,n.w5)((()=>[(0,n.Wm)(v,{slot:"header",lines:"none"},{default:(0,n.w5)((()=>[(0,n.Wm)(I,{class:"product-description",color:"medium"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,r.zw)(_.productItem.product_description),1)])),_:1})])),_:1}),(0,n.Wm)(W,{slot:"content"},{default:(0,n.w5)((()=>[(0,n.Wm)(v,{lines:"none"})])),_:1})])),_:1})])),_:1}),(0,n.Wm)(v,{lines:"none"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(h.categories,(t=>((0,n.wg)(),(0,n.j4)(k,{outline:!0,color:"primary",key:t.group_id},{default:(0,n.w5)((()=>[(0,n.Uk)((0,r.zw)(t.group_name),1)])),_:2},1024)))),128))])),_:1}),_.productItem.product_price!=_.productItem.product_final_price?((0,n.wg)(),(0,n.j4)(v,{key:0,lines:"none"},{default:(0,n.w5)((()=>[(0,n.Wm)(y,{slot:"start",color:"primary",src:g.giftOutline},null,8,["src"]),(0,n.Wm)(j,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Акция до "+(0,r.zw)(h.promoFinish),1)])),_:1}),(0,n.Wm)(j,{slot:"end",color:"success",style:{"font-size":"1.2em"}},{default:(0,n.w5)((()=>[(0,n.Uk)("-"+(0,r.zw)(h.promoPercent)+"%",1)])),_:1})])),_:1})):(0,n.kq)("",!0),(0,n.Wm)(v,{lines:"none"},{default:(0,n.w5)((()=>[(0,n.Wm)(y,{slot:"start",color:"primary",src:g.pricetagOutline},null,8,["src"]),"порция"==_.productItem.product_unit?((0,n.wg)(),(0,n.j4)(j,{key:0},{default:(0,n.w5)((()=>[(0,n.Uk)("Цена за "+(0,r.zw)(h.weight_in_gramms)+"г",1)])),_:1})):((0,n.wg)(),(0,n.j4)(j,{key:1},{default:(0,n.w5)((()=>[(0,n.Uk)("Цена за "+(0,r.zw)(_.productItem.product_unit),1)])),_:1})),(0,n.Wm)(j,{slot:"end",color:"primary",style:{"font-size":"1.2em"}},{default:(0,n.w5)((()=>[_.productItem.product_price!=_.productItem.product_final_price?((0,n.wg)(),(0,n.iD)("span",d,[(0,n._)("s",null,(0,r.zw)(_.productItem.product_price)+(0,r.zw)(t.$heap.state.currencySign),1),s])):(0,n.kq)("",!0),(0,n.Uk)(" "+(0,r.zw)(_.productItem.product_final_price)+(0,r.zw)(t.$heap.state.currencySign),1)])),_:1})])),_:1}),(0,n.Wm)(v,{lines:"none"},{default:(0,n.w5)((()=>[(0,n.Wm)(y,{slot:"start",color:"primary",src:g.cartOutline},null,8,["src"]),h.inCart?((0,n.wg)(),(0,n.j4)(j,{key:0},{default:(0,n.w5)((()=>[(0,n.Uk)("В корзине ("+(0,r.zw)(_.productItem.product_unit)+")",1)])),_:1})):((0,n.wg)(),(0,n.j4)(j,{key:1},{default:(0,n.w5)((()=>[p])),_:1})),(0,n.Wm)(x,{slot:"end",buttonLayout:"horizontal",display:"inline",productItem:_.productItem},null,8,["productItem"])])),_:1}),h.inCart?((0,n.wg)(),(0,n.j4)(v,{key:1,lines:"none"},{default:(0,n.w5)((()=>[(0,n.Wm)(y,{slot:"start",color:"primary",src:g.walletOutline},null,8,["src"]),(0,n.Wm)(j,null,{default:(0,n.w5)((()=>[m])),_:1}),(0,n.Wm)(j,{slot:"end",color:"primary",style:{"font-size":"1.2em"}},{default:(0,n.w5)((()=>[(0,n.Uk)((0,r.zw)(h.inCart)+(0,r.zw)(t.$heap.state.currencySign),1)])),_:1})])),_:1})):(0,n.kq)("",!0),null!=h.inCartComment?((0,n.wg)(),(0,n.j4)(v,{key:2,lines:"none"},{default:(0,n.w5)((()=>[(0,n.Wm)(y,{slot:"start",color:"primary",src:g.chatboxEllipsesOutline},null,8,["src"]),(0,n.Wm)($,{modelValue:h.inCartComment,"onUpdate:modelValue":e[1]||(e[1]=t=>h.inCartComment=t),onIonChange:e[2]||(e[2]=t=>h.cartCommentUpdate(t.target.value)),placeholder:"заметка для продавца"},null,8,["modelValue"])])),_:1})):(0,n.kq)("",!0)])),_:1})):(0,n.kq)("",!0)])),_:1},8,["page-title","cartComponent"])}o(4916);var _=o(9755),h=o.n(_),w=o(2008),f=o(8903),y=o(3741),I=o(7259),k=o(1720),v=o(2559),W=o(7782),z={components:{ImageSlider:I.Z,CartAddButtons:k.Z,IonTextarea:y.g2,IonListHeader:y.yh,IonText:y.yW,IonIcon:y.gu,IonItem:y.Ie,IonChip:y.hM,IonLabel:y.Q$,IonList:y.q_,IonAccordion:y.We,IonAccordionGroup:y.eh},setup(){return{CartHeader:v.Z,compassOutline:f.gmD,cartOutline:f.Ox0,pricetagOutline:f.TuG,giftOutline:f._$o,walletOutline:f.S5P,chatboxEllipsesOutline:f._Pt,settingsOutline:f.C$N}},data(){return{productId:this.$route.params.id,productItem:null}},mounted(){},ionViewDidEnter(){this.getProduct()},computed:{categories(){var t,e,o,n,r,i;if(null===(t=this.productItem)||void 0===t||null===(e=t.member_of_groups)||void 0===e||!e.group_ids)return[];const l=null===(o=this.productItem)||void 0===o||null===(n=o.member_of_groups)||void 0===n?void 0:n.group_ids.split(","),u=null===(r=this.productItem)||void 0===r||null===(i=r.member_of_groups)||void 0===i?void 0:i.group_names.split(",");let a=[];for(let c in l)a.push({group_id:l[c],group_name:u[c]});return a},promoFinish(){try{return this.productItem.product_promo_finish.split(" ")[0].split("-").reverse().join(".")}catch(t){return null}},promoPercent(){return Math.round(100-this.productItem.product_final_price/this.productItem.product_price*100)},inCart(){const t=W.Z.cart.entryGet(this.productId);return t?t.data.entry_quantity*t.data.entry_price:0},inCartComment(){var t;const e=W.Z.cart.entryGet(this.productId);return e?null!==(t=e.data.entry_comment)&&void 0!==t?t:"":null},isAvailable(){return 1!=this.productItem.is_counted||this.productItem.product_quantity-this.productItem.product_quantity_reserved>0},weight_in_gramms(){return 1e3*this.productItem.product_weight}},methods:{async getProduct(){try{this.productItem=await h().post(w.Z.state.hostname+"Product/itemGet",{product_id:this.productId})}catch(t){}},cartCommentUpdate(t){const e={product_id:this.productId,entry_comment:t};W.Z.cart.entryUpdate(e)}}},C=o(3744);const b=(0,C.Z)(z,[["render",g]]);var j=b}}]);
//# sourceMappingURL=40.757a6e12.js.map