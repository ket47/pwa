{"version":3,"file":"js/479.a1f42ca2.js","mappings":"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","sources":["webpack://tezkel-delivery/./src/views/UserPromoList.vue","webpack://tezkel-delivery/./src/views/UserPromoList.vue?73b6"],"sourcesContent":["<template>\r\n    <base-layout pageTitle=\"Ваши скидки\"  pageDefaultBackLink=\"user-promo\">\r\n        <ion-card>\r\n            <ion-card-header>\r\n                <ion-card-title>\r\n                    Получите скидку\r\n                </ion-card-title>\r\n            </ion-card-header>\r\n            <ion-card-content>\r\n                <p>Новый пользователь, зарегистриванный по вашему приглашению, получит 5 скидок по 200руб.</p>\r\n                <p>В качестве благодарности, мы начислим вам 5 скидок по 100руб.</p>\r\n                <ion-accordion-group>\r\n                    <ion-accordion>\r\n                        <ion-item slot=\"header\">\r\n                            <ion-text slot=\"end\" color=\"medium\">подробнее</ion-text>\r\n                        </ion-item>\r\n                        <ion-text slot=\"content\">\r\n                            После регистрации нового клиента по вашему приглашению, мы начислим вам 5 скидок по 100руб. Эти скидки будут активироваться по мере того, как приглашённый вами друг, будет использовать свои скидки.\r\n                        </ion-text>\r\n                    </ion-accordion>\r\n                </ion-accordion-group>\r\n                <p>\r\n                    <ion-button @click=\"shareInvitation()\" expand=\"full\">Пригласить друга</ion-button>\r\n                </p>\r\n            </ion-card-content>\r\n        </ion-card>\r\n        <ion-title></ion-title>\r\n        <ion-text></ion-text>\r\n\r\n\r\n\r\n\r\n\r\n        <ion-segment swipe-gesture=\"true\" v-model=\"promoType\" @ionChange=\"listTypeChanged($event)\">\r\n            <ion-segment-button value=\"active\">\r\n                Доступные\r\n            </ion-segment-button>\r\n            <ion-segment-button value=\"inactive\">\r\n                Не активные\r\n            </ion-segment-button>\r\n        </ion-segment>\r\n\r\n        <ion-list v-if=\"promoType=='active'\">\r\n            <div v-for=\"promo in compPromoList\" :key=\"promo.promo_id\">\r\n                <ion-item lines=\"none\">\r\n                    <ion-icon slot=\"start\" :icon=\"giftOutline\" color=\"primary\"/>\r\n                    <ion-text>{{promo.promo_name}}</ion-text>\r\n                    <ion-text slot=\"end\" color=\"success\"><b>{{promo.promo_value}}{{$heap.state.currencySign}}</b></ion-text>\r\n                </ion-item>\r\n                <ion-item>\r\n                    <ion-text>действительна до: {{promo.exp_date_time}}</ion-text>\r\n                </ion-item>\r\n            </div>\r\n        </ion-list>\r\n\r\n        <ion-list v-if=\"promoType=='inactive'\">\r\n            <div v-for=\"promo in compPromoList\" :key=\"promo.promo_id\">\r\n                <ion-item lines=\"none\">\r\n                    <ion-icon slot=\"start\" :icon=\"giftOutline\" color=\"medium\"/>\r\n                    <ion-text>{{promo.promo_name}}</ion-text>\r\n                    <ion-text slot=\"end\"><b>{{promo.promo_value}}{{$heap.state.currencySign}}</b></ion-text>\r\n                </ion-item>\r\n                <ion-item>\r\n                    <ion-text v-if=\"promo.is_disabled\" color=\"warning\" style=\"cursor:pointer\" @click=\"helpNotActive()\">не активирована</ion-text>\r\n                    <ion-icon v-if=\"promo.is_disabled\" color=\"warning\" :icon=\"helpCircle\" @click=\"helpNotActive()\" style=\"cursor:pointer\"/>\r\n                    <ion-text v-if=\"promo.promo_order_id\">использована в заказе #{{promo.promo_order_id}}</ion-text>\r\n                </ion-item>\r\n            </div>\r\n        </ion-list>\r\n\r\n        <ion-list v-if=\"promoList==null\">\r\n            <div v-for=\"skeleton in [1,2,3]\" :key=\"skeleton\">\r\n            <ion-item lines=\"none\">\r\n                <ion-icon slot=\"start\" :icon=\"giftOutline\" color=\"medium\"/>\r\n                <ion-skeleton-text style=\"width:70%\"></ion-skeleton-text>\r\n                <ion-skeleton-text slot=\"end\" style=\"width:50px\"></ion-skeleton-text>\r\n            </ion-item>\r\n            <ion-item>\r\n                <ion-skeleton-text style=\"width:70%\"></ion-skeleton-text>\r\n            </ion-item>\r\n            </div>\r\n        </ion-list>\r\n\r\n    </base-layout>\r\n</template>\r\n<script>\r\nimport {\r\n  IonIcon,\r\n  IonToolbar,\r\n  IonHeader,\r\n  IonContent,\r\n  IonTitle,\r\n  IonList,\r\n  IonItem,\r\n  IonText,\r\n  IonSegment,\r\n  IonSegmentButton,\r\n  IonCard,\r\n  IonCardHeader,\r\n  IonCardTitle,\r\n  IonCardContent,\r\n  IonButton,\r\n  IonSkeletonText,\r\n  IonAccordion,\r\n  IonAccordionGroup,\r\n}                       from '@ionic/vue'\r\nimport {\r\n    giftOutline,\r\n    closeOutline,\r\n    banOutline,\r\n    helpCircle,\r\n}                       from 'ionicons/icons'\r\nimport jQuery           from 'jquery'\r\nexport default {\r\n    components:{\r\n  IonIcon,\r\n  IonToolbar,\r\n  IonHeader,\r\n  IonContent,\r\n  IonTitle,\r\n  IonList,\r\n  IonItem,\r\n  IonText,\r\n  IonSegment,\r\n  IonSegmentButton,\r\n  IonCard,\r\n  IonCardHeader,\r\n  IonCardTitle,\r\n  IonCardContent,\r\n  IonButton,\r\n  IonSkeletonText,\r\n  IonAccordion,\r\n  IonAccordionGroup,\r\n    },\r\n    setup(){\r\n        return {\r\n    giftOutline,\r\n    closeOutline,\r\n    banOutline,\r\n    helpCircle,\r\n        }\r\n    },\r\n    data(){\r\n        return {\r\n            promoType:'active',\r\n            promoList:null\r\n        }\r\n    },\r\n    mounted(){\r\n        this.listGet()\r\n    },\r\n    computed:{\r\n        compPromoList(){\r\n            let promos=[]\r\n            if( this.promoList ){\r\n                for(let promo of this.promoList){\r\n                    promo.exp_date_time=this.toLocDate(promo.expired_at)\r\n                    promo.date_time=this.toLocDate(promo.created_at)\r\n                    promos.push(promo)\r\n                }\r\n            }\r\n            return promos;\r\n        },\r\n    },\r\n    methods:{\r\n        async listGet(){\r\n            try{\r\n                this.promoList=[]\r\n                const request={\r\n                    type:this.promoType\r\n                }\r\n                this.promoList=await jQuery.post(`${this.$heap.state.hostname}Promo/listGet`,request)\r\n            }catch{/** */}\r\n        },\r\n        listTypeChanged(e){\r\n            const listType=e.target.value;\r\n            this.listGet(listType);\r\n        },\r\n        toLocDate( iso ){\r\n            const event = new Date(Date.parse(iso));\r\n            const options = { month: 'short', day: 'numeric', year: 'numeric' };\r\n            return event.toLocaleDateString(undefined, options);\r\n        },\r\n        async shareInvitation(){\r\n            if(!this.$heap.state.user?.user_id){\r\n                this.$flash('Вы не авторизированы');\r\n                return\r\n            }\r\n            try{\r\n                const link=`${this.$heap.state.settings.app.frontendUrl}invitation.html?inviter_user_id=${this.$heap.state.user.user_id}`;\r\n                if(navigator.share){\r\n                    const shareData = {\r\n                        title: this.$heap.state.settings.app_title,\r\n                        text: 'Присоединяйтесь и получите 5 сертификатов по 200руб',\r\n                        url:link\r\n                    }\r\n                    await navigator.share(shareData);\r\n                } else {\r\n                    await navigator.clipboard.writeText(link);\r\n                    this.$alert(\"Ссылка с приглашением скопирована. Теперь вы можете поделиться ей с друзьями в социальных сетях или мессенджерах.\",\"Готово\");\r\n                }\r\n            }catch(err){\r\n                console.log(err)\r\n            }\r\n        },\r\n        helpNotActive(){\r\n            this.$alert(\"Эта скидка будет активирована, когда приглашённый вами друг воспользуется начисленной ему скидкой. Не забудьте напомнить😉\")\r\n        }\r\n    }\r\n}\r\n</script>","import { render } from \"./UserPromoList.vue?vue&type=template&id=36e8469d\"\nimport script from \"./UserPromoList.vue?vue&type=script&lang=js\"\nexport * from \"./UserPromoList.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"W:\\\\Ionic\\\\Tezkel\\\\blank\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementVNode","_createBlock","_component_base_layout","pageTitle","pageDefaultBackLink","_createVNode","_component_ion_card","_component_ion_card_header","_component_ion_card_title","_component_ion_card_content","_hoisted_2","_hoisted_3","_component_ion_accordion_group","_component_ion_accordion","_component_ion_item","slot","_component_ion_text","color","_component_ion_button","onClick","$options","expand","_component_ion_title","_component_ion_segment","$data","$event","onIonChange","_component_ion_segment_button","value","_component_ion_list","key","_createElementBlock","_Fragment","_renderList","promo","promo_id","lines","_component_ion_icon","icon","$setup","promo_name","_toDisplayString","promo_value","_ctx","state","currencySign","exp_date_time","is_disabled","style","promo_order_id","skeleton","_component_ion_skeleton_text","components","IonIcon","IonToolbar","IonHeader","IonContent","IonTitle","IonList","IonItem","IonText","IonSegment","IonSegmentButton","IonCard","IonCardHeader","IonCardTitle","IonCardContent","IonButton","IonSkeletonText","IonAccordion","IonAccordionGroup","setup","giftOutline","closeOutline","banOutline","helpCircle","data","promoType","promoList","mounted","this","listGet","computed","compPromoList","promos","toLocDate","expired_at","date_time","created_at","push","methods","async","request","type","jQuery","$heap","hostname","listTypeChanged","e","listType","target","iso","event","Date","parse","options","month","day","year","toLocaleDateString","undefined","user","user_id","link","settings","app","frontendUrl","navigator","share","shareData","title","app_title","text","url","clipboard","writeText","$alert","err","console","log","$flash","helpNotActive","__exports__","render"],"sourceRoot":""}