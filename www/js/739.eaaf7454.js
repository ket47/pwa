"use strict";(self["webpackChunkTezkel"]=self["webpackChunkTezkel"]||[]).push([[739],{1739:function(e,t,a){a.r(t),a.d(t,{default:function(){return v}});var o=a(6252),i=a(3577);const r=e=>((0,o.dD)("data-v-3c71528e"),e=e(),(0,o.Cn)(),e),l={key:0},s=(0,o.Uk)("Пока вы не курьер"),n=(0,o.Uk)(" Подавая заявку вы даете согласие на условия "),u=r((()=>(0,o._)("a",{href:"#/page-courier_contract"},"Договор о предоставлении услуг",-1))),d=(0,o.Uk)("Стать курьером"),c={key:1},m=(0,o.Uk)(" Анкета активна "),_=(0,o.Uk)("Загрузить фото"),p=(0,o.Uk)("Транспорт"),h=(0,o.Uk)("ИНН"),w=(0,o.Uk)("Коментарий"),f=(0,o.Uk)("Восстановить"),g=(0,o.Uk)("Удалить анкету"),k=(0,o.Uk)("Заблокировать анкету"),b=(0,o.Uk)("Утвердить анкету");function C(e,t,a,r,C,y){const W=(0,o.up)("ion-label"),U=(0,o.up)("ion-item"),I=(0,o.up)("ion-text"),D=(0,o.up)("ion-checkbox"),Z=(0,o.up)("ion-button"),x=(0,o.up)("ion-card"),V=(0,o.up)("ion-card-content"),v=(0,o.up)("ion-img"),j=(0,o.up)("ion-thumbnail"),N=(0,o.up)("ion-input"),T=(0,o.up)("ion-textarea"),A=(0,o.up)("ion-list"),O=(0,o.up)("base-layout");return(0,o.wg)(),(0,o.j4)(O,{"page-title":"Анкета курьера","page-default-back-link":"/user-dashboard"},{default:(0,o.w5)((()=>[C.courier?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",l,[(0,o.Wm)(x,null,{default:(0,o.w5)((()=>[(0,o.Wm)(U,null,{default:(0,o.w5)((()=>[(0,o.Wm)(W,null,{default:(0,o.w5)((()=>[s])),_:1})])),_:1}),(0,o.Wm)(U,null,{default:(0,o.w5)((()=>[(0,o.Wm)(I,null,{default:(0,o.w5)((()=>[n,u])),_:1}),(0,o.Wm)(D,{modelValue:C.contractAccepted,"onUpdate:modelValue":t[0]||(t[0]=e=>C.contractAccepted=e),slot:"end"},null,8,["modelValue"])])),_:1}),(0,o.Wm)(Z,{expand:"full",onClick:t[1]||(t[1]=e=>y.itemCreate()),disabled:!C.contractAccepted},{default:(0,o.w5)((()=>[d])),_:1},8,["disabled"])])),_:1})])),C.courier?((0,o.wg)(),(0,o.iD)("div",c,[y.message?((0,o.wg)(),(0,o.j4)(x,{key:0,lines:"none"},{default:(0,o.w5)((()=>[(0,o.Wm)(V,{class:(0,i.C_)(y.messageClass)},{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(y.message),1)])),_:1},8,["class"])])),_:1})):((0,o.wg)(),(0,o.j4)(x,{key:1,lines:"none"},{default:(0,o.w5)((()=>[(0,o.Wm)(V,{style:{"background-color":"var(--ion-color-success-tint)"}},{default:(0,o.w5)((()=>[m])),_:1})])),_:1})),(0,o._)("form",{onChange:t[12]||(t[12]=e=>y.updateCourier())},[(0,o.Wm)(A,null,{default:(0,o.w5)((()=>[(0,o.Wm)(U,{lines:"full"},{default:(0,o.w5)((()=>[C.courier?.images[0]?((0,o.wg)(),(0,o.j4)(j,{key:0,slot:"start"},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{style:{"border-radius":"10px"},class:(0,i.C_)(y.imageClass),src:e.$heap.state.hostname+"image/get.php/"+C.courier.images[0].image_hash+".100.100.webp"},null,8,["class","src"])])),_:1})):(0,o.kq)("",!0),(0,o.Wm)(Z,{slot:"end",onClick:t[2]||(t[2]=e=>y.uploadImageTrigger())},{default:(0,o.w5)((()=>[_])),_:1}),(0,o._)("input",{type:"file",id:"courier_foto_upload",accept:"image/*",onChange:t[3]||(t[3]=e=>y.uploadImage(e)),style:{display:"none"}},null,32)])),_:1}),(0,o.Wm)(U,{lines:"full"},{default:(0,o.w5)((()=>[(0,o.Wm)(W,{position:"stacked",color:"primary"},{default:(0,o.w5)((()=>[p])),_:1}),(0,o.Wm)(N,{modelValue:C.courier.courier_vehicle,"onUpdate:modelValue":t[4]||(t[4]=e=>C.courier.courier_vehicle=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(U,{lines:"full"},{default:(0,o.w5)((()=>[(0,o.Wm)(W,{position:"stacked",color:"primary"},{default:(0,o.w5)((()=>[h])),_:1}),(0,o.Wm)(N,{modelValue:C.courier.courier_tax_num,"onUpdate:modelValue":t[5]||(t[5]=e=>C.courier.courier_tax_num=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(U,{lines:"full"},{default:(0,o.w5)((()=>[(0,o.Wm)(W,{position:"stacked",color:"primary"},{default:(0,o.w5)((()=>[w])),_:1}),(0,o.Wm)(T,{modelValue:C.courier.courier_comment,"onUpdate:modelValue":t[6]||(t[6]=e=>C.courier.courier_comment=e)},null,8,["modelValue"])])),_:1}),C.courier.deleted_at?((0,o.wg)(),(0,o.j4)(U,{key:0,lines:"none"},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{slot:"end",onClick:t[7]||(t[7]=e=>y.itemUnDelete()),color:"success"},{default:(0,o.w5)((()=>[f])),_:1})])),_:1})):((0,o.wg)(),(0,o.j4)(U,{key:1,lines:"none"},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{slot:"end",color:"danger",onClick:t[8]||(t[8]=e=>y.itemDelete())},{default:(0,o.w5)((()=>[g])),_:1})])),_:1})),y.showDisable?((0,o.wg)(),(0,o.j4)(U,{key:2,lines:"none"},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{slot:"end",onClick:t[9]||(t[9]=e=>y.itemDisable()),color:"dark"},{default:(0,o.w5)((()=>[k])),_:1})])),_:1})):(0,o.kq)("",!0),y.showEnable?((0,o.wg)(),(0,o.j4)(U,{key:3,lines:"none"},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{slot:"end",onClick:t[10]||(t[10]=e=>y.itemEnable()),color:"success"},{default:(0,o.w5)((()=>[b])),_:1})])),_:1})):(0,o.kq)("",!0),(0,o.Wm)(U,{lines:"none"},{default:(0,o.w5)((()=>[(0,o.Wm)(I,null,{default:(0,o.w5)((()=>[(0,o._)("a",{onClick:t[11]||(t[11]=t=>e.$router.push("/page-courier_contract"))},"Договор о предоставлении услуг курьера")])),_:1})])),_:1})])),_:1})],32)])):(0,o.kq)("",!0)])),_:1})}var y=a(9095),W=a(9755),U=a.n(W),I=a(2008),D=a(351),Z={components:{IonTextarea:y.g2,IonInput:y.pK,IonCard:y.PM,IonCardContent:y.FN,IonLabel:y.Q$,IonItem:y.Ie,IonNote:y.uN,IonButton:y.YG,IonImg:y.Xz,IonThumbnail:y.Bs,IonList:y.q_,IonCheckbox:y.nz,IonText:y.yW},data(){return{courier:D.Z.courier.data,isAdmin:D.Z.isAdmin(),contractAccepted:0}},mounted(){},computed:{message(){return this.courier.deleted_at?"Анкета не активна и будет удалена. Вы можете еще отменить удаление":1==this.courier.is_disabled?"Анкета не активна и находится на рассмотрении у администратора":null},messageClass(){return this.courier.deleted_at?"deleted":1==this.courier.is_disabled?"disabled":null},imageClass(){return 1==this.courier?.images[0]?.is_disabled?"image_disabled":""},showDisable(){return!(0!=this.courier.is_disabled||!D.Z.isAdmin())},showEnable(){return!(1!=this.courier.is_disabled||!D.Z.isAdmin())},showDelete(){return!this.courier.deleted_at},showUnDelete(){return-1!=this.courier.deleted_at&&!this.courier.deleted_at}},methods:{async load(){try{this.courier=await D.Z.courier.get()}catch(e){JSON.parse(e.responseJSON?.status)}},async itemCreate(){try{await U().post(I.Z.state.hostname+"Courier/itemCreate"),await D.Z.get(),this.courier=D.Z.courier.data}catch{this.$flash("Не удалось зарегистрироваться как курьер")}},async itemDelete(){try{await U().post(I.Z.state.hostname+"Courier/itemDelete",{courier_id:this.courier.courier_id}),this.load()}catch(e){const t=e.responseJSON?.messages?.error;"invalid_status"==t&&this.$flash("Надо сначала закрыть смену")}},itemUnDelete(){const e=this;U().post(I.Z.state.hostname+"Courier/itemUnDelete",{courier_id:this.courier.courier_id}).done((()=>{e.load()}))},itemDisable(){const e=this;U().post(I.Z.state.hostname+"Courier/itemDisable",{courier_id:this.courier.courier_id,is_disabled:1}).done((()=>{e.load()}))},itemEnable(){const e=this;U().post(I.Z.state.hostname+"Courier/itemDisable",{courier_id:this.courier.courier_id,is_disabled:0}).done((()=>{e.load()}))},async uploadImage(e){let t=new FormData;t.append("files[]",e.target.files[0]),t.set("image_holder_id",this.courier.courier_id);const a={url:I.Z.state.hostname+"Courier/fileUpload",type:"POST",data:t,processData:!1,contentType:!1};try{await U().ajax(a),this.load()}catch(o){this.$flash("Не удалось загрузить фото")}},uploadImageTrigger(){U()("#courier_foto_upload").trigger("click")},async updateCourier(){try{return await U().post(I.Z.state.hostname+"Courier/itemUpdate",JSON.stringify(this.courier))}catch(e){const t=JSON.parse(e.responseJSON?.messages?.error);t.courier_tax_num&&this.$flash("Неверный формат ИНН")}}}},x=a(3744);const V=(0,x.Z)(Z,[["render",C],["__scopeId","data-v-3c71528e"]]);var v=V}}]);
//# sourceMappingURL=739.eaaf7454.js.map