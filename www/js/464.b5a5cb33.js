"use strict";(self["webpackChunktezkel"]=self["webpackChunktezkel"]||[]).push([[464],{7237:function(t,e,r){r.d(e,{Z:function(){return _}});var o=r(6252),n=r(3577);const i={key:0},l=["src"],u=["src"];function a(t,e,r,a,c,d){const s=(0,o.up)("swiper-slide"),p=(0,o.up)("swiper"),m=(0,o.up)("ion-icon"),g=(0,o.up)("ion-fab-button"),h=(0,o.up)("ion-fab");return(0,o.wg)(),(0,o.iD)(o.HY,null,[c.expanded?((0,o.wg)(),(0,o.iD)("div",i,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.imageList,(e=>((0,o.wg)(),(0,o.iD)("div",{key:e.image_hash,style:{border:"2px solid var(--ion-color-primary)"}},[(0,o._)("img",{src:`${t.$heap.state.hostname}image/get.php/${e.image_hash}.1000.1000.webp`},null,8,l)])))),128))])):((0,o.wg)(),(0,o.j4)(p,{key:1,modules:a.modules,autoplay:{delay:3e3,disableOnInteraction:!1},loop:!0,effect:"fade",style:(0,n.j5)(`height: ${r.imgHeight||300}px;`)},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.imageList,(e=>((0,o.wg)(),(0,o.j4)(s,{key:e.image_hash},{default:(0,o.w5)((()=>[(0,o._)("div",{class:"crop-to-fit",style:(0,n.j5)(`height: ${r.imgHeight||300}px;`)},[(0,o._)("img",{style:(0,n.j5)(`min-height: ${r.imgHeight||300}px;`),src:`${t.$heap.state.hostname}image/get.php/${e.image_hash}.${4*r.imgHeight||1200}.${4*r.imgHeight||1200}.webp`},null,12,u)],4)])),_:2},1024)))),128))])),_:1},8,["modules","style"])),(0,o.Wm)(h,{horizontal:"end",vertical:"top",slot:"fixed"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{color:"light"},{default:(0,o.w5)((()=>[c.expanded?((0,o.wg)(),(0,o.j4)(m,{key:0,src:a.contract,size:"large",onClick:e[0]||(e[0]=t=>d.minimize())},null,8,["src"])):((0,o.wg)(),(0,o.j4)(m,{key:1,src:a.expand,size:"large",onClick:e[1]||(e[1]=t=>d.maximize())},null,8,["src"]))])),_:1})])),_:1})],64)}var c=r(8903),d=r(3741),s=r(702),p=r(3181),m={components:{Swiper:p.t,SwiperSlide:p.o,IonFab:d.IJ,IonFabButton:d.W4,IonIcon:d.gu},props:["imageList","imgHeight"],setup(){return{modules:[s.pt,s.xW],expand:c.jnR,contract:c.LJB}},data(){return{expanded:!1,vh:0,vw:0}},methods:{maximize(){this.expanded=!0,this.vh=document.getElementsByTagName("ion-content")[0].clientHeight,this.vw=document.getElementsByTagName("ion-content")[0].clientWidth},minimize(){this.expanded=!1,this.vh=document.getElementsByTagName("ion-content")[0].clientHeight,this.vw=document.getElementsByTagName("ion-content")[0].clientWidth}}},g=r(3744);const h=(0,g.Z)(m,[["render",a],["__scopeId","data-v-1da5ed4a"]]);var _=h},7464:function(t,e,r){r.r(e),r.d(e,{default:function(){return W}});var o=r(6252),n=r(3577);const i={key:0},l={key:0,style:{color:"var(--ion-color-danger)","font-size":"0.75em"}},u=(0,o.Uk)("   "),a=(0,o.Uk)("Не заказан"),c=(0,o.Uk)("Итог");function d(t,e,r,d,s,p){var m;const g=(0,o.up)("image-slider"),h=(0,o.up)("ion-list-header"),_=(0,o.up)("ion-text"),w=(0,o.up)("ion-icon"),y=(0,o.up)("ion-item"),f=(0,o.up)("ion-chip"),I=(0,o.up)("ion-label"),k=(0,o.up)("cart-add-buttons"),v=(0,o.up)("ion-textarea"),W=(0,o.up)("ion-list"),z=(0,o.up)("base-layout");return(0,o.wg)(),(0,o.j4)(z,{"page-title":null===(m=s.productItem)||void 0===m?void 0:m.product_name,pageDefaultBackLink:"/catalog",cartComponent:d.CartHeader},{default:(0,o.w5)((()=>[s.productItem?((0,o.wg)(),(0,o.j4)(g,{key:0,imageList:s.productItem.images,imgHeight:"200"},null,8,["imageList"])):(0,o.kq)("",!0),s.productItem?((0,o.wg)(),(0,o.j4)(W,{key:1},{default:(0,o.w5)((()=>[(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[(0,o._)("h2",null,[(0,o.Uk)((0,n.zw)(s.productItem.product_name)+" ",1),p.isAvailable?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("span",i,"(Нет в наличии)"))])])),_:1}),(0,o.Wm)(y,{lines:"none"},{default:(0,o.w5)((()=>{var r;return[(0,o.Wm)(_,{color:"medium"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(s.productItem.product_description),1)])),_:1}),null!==(r=s.productItem)&&void 0!==r&&r.is_writable?((0,o.wg)(),(0,o.j4)(w,{key:0,slot:"end",src:d.settingsOutline,color:"primary",onClick:e[0]||(e[0]=e=>t.$router.push("product-edit-"+s.productId))},null,8,["src"])):(0,o.kq)("",!0)]})),_:1}),(0,o.Wm)(y,{lines:"none"}),(0,o.Wm)(y,null,{default:(0,o.w5)((()=>[(0,o.Wm)(w,{slot:"start",color:"primary",src:d.compassOutline},null,8,["src"]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(p.categories,(t=>((0,o.wg)(),(0,o.j4)(f,{key:t.group_id},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(t.group_name),1)])),_:2},1024)))),128))])),_:1}),s.productItem.product_price!=s.productItem.product_final_price?((0,o.wg)(),(0,o.j4)(y,{key:0},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{slot:"start",color:"primary",src:d.giftOutline},null,8,["src"]),(0,o.Wm)(I,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Акция до "+(0,n.zw)(p.promoFinish),1)])),_:1}),(0,o.Wm)(I,{slot:"end",color:"success",style:{"font-size":"1.2em"}},{default:(0,o.w5)((()=>[(0,o.Uk)("-"+(0,n.zw)(p.promoPercent)+"%",1)])),_:1})])),_:1})):(0,o.kq)("",!0),(0,o.Wm)(y,null,{default:(0,o.w5)((()=>[(0,o.Wm)(w,{slot:"start",color:"primary",src:d.pricetagOutline},null,8,["src"]),(0,o.Wm)(I,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Цена за "+(0,n.zw)(s.productItem.product_unit),1)])),_:1}),(0,o.Wm)(I,{slot:"end",color:"primary",style:{"font-size":"1.2em"}},{default:(0,o.w5)((()=>[s.productItem.product_price!=s.productItem.product_final_price?((0,o.wg)(),(0,o.iD)("span",l,[(0,o._)("s",null,(0,n.zw)(s.productItem.product_price)+(0,n.zw)(t.$heap.state.currencySign),1),u])):(0,o.kq)("",!0),(0,o.Uk)(" "+(0,n.zw)(s.productItem.product_final_price)+(0,n.zw)(t.$heap.state.currencySign),1)])),_:1})])),_:1}),(0,o.Wm)(y,null,{default:(0,o.w5)((()=>[(0,o.Wm)(w,{slot:"start",color:"primary",src:d.cartOutline},null,8,["src"]),p.inCart?((0,o.wg)(),(0,o.j4)(I,{key:0},{default:(0,o.w5)((()=>[(0,o.Uk)("В корзине "+(0,n.zw)(s.productItem.product_unit),1)])),_:1})):((0,o.wg)(),(0,o.j4)(I,{key:1},{default:(0,o.w5)((()=>[a])),_:1})),(0,o.Wm)(k,{slot:"end",buttonLayout:"horizontal",display:"inline",productItem:s.productItem},null,8,["productItem"])])),_:1}),p.inCart?((0,o.wg)(),(0,o.j4)(y,{key:1},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{slot:"start",color:"primary",src:d.walletOutline},null,8,["src"]),(0,o.Wm)(I,null,{default:(0,o.w5)((()=>[c])),_:1}),(0,o.Wm)(I,{slot:"end",color:"primary",style:{"font-size":"1.2em"}},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(p.inCart)+(0,n.zw)(t.$heap.state.currencySign),1)])),_:1})])),_:1})):(0,o.kq)("",!0),null!=p.inCartComment?((0,o.wg)(),(0,o.j4)(y,{key:2},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{slot:"start",color:"primary",src:d.chatboxEllipsesOutline},null,8,["src"]),(0,o.Wm)(v,{modelValue:p.inCartComment,"onUpdate:modelValue":e[1]||(e[1]=t=>p.inCartComment=t),onIonChange:e[2]||(e[2]=t=>p.cartCommentUpdate(t.target.value)),placeholder:"заметка для продавца"},null,8,["modelValue"])])),_:1})):(0,o.kq)("",!0)])),_:1})):(0,o.kq)("",!0)])),_:1},8,["page-title","cartComponent"])}r(4916);var s=r(9755),p=r.n(s),m=r(2008),g=r(8903),h=r(3741),_=r(7237),w=r(1720),y=r(2559),f=r(7782),I={components:{ImageSlider:_.Z,CartAddButtons:w.Z,IonTextarea:h.g2,IonListHeader:h.yh,IonText:h.yW,IonIcon:h.gu,IonItem:h.Ie,IonChip:h.hM,IonLabel:h.Q$,IonList:h.q_},setup(){return{CartHeader:y.Z,compassOutline:g.gmD,cartOutline:g.Ox0,pricetagOutline:g.TuG,giftOutline:g._$o,walletOutline:g.S5P,chatboxEllipsesOutline:g._Pt,settingsOutline:g.C$N}},data(){return{productId:this.$route.params.id,productItem:null}},mounted(){},ionViewDidEnter(){this.getProduct()},computed:{categories(){var t,e,r,o,n,i;if(null===(t=this.productItem)||void 0===t||null===(e=t.member_of_groups)||void 0===e||!e.group_ids)return[];const l=null===(r=this.productItem)||void 0===r||null===(o=r.member_of_groups)||void 0===o?void 0:o.group_ids.split(","),u=null===(n=this.productItem)||void 0===n||null===(i=n.member_of_groups)||void 0===i?void 0:i.group_names.split(",");let a=[];for(let c in l)a.push({group_id:l[c],group_name:u[c]});return a},promoFinish(){try{return this.productItem.product_promo_finish.split(" ")[0].split("-").reverse().join(".")}catch(t){return null}},promoPercent(){return Math.round(100-this.productItem.product_final_price/this.productItem.product_price*100)},inCart(){const t=f.Z.cart.entryGet(this.productId);return t?t.data.entry_quantity*t.data.entry_price:0},inCartComment(){var t;const e=f.Z.cart.entryGet(this.productId);return e?null!==(t=e.data.entry_comment)&&void 0!==t?t:"":null},isAvailable(){return 1!=this.productItem.is_counted||this.productItem.product_quantity-this.productItem.product_quantity_reserved>0}},methods:{async getProduct(){try{this.productItem=await p().post(m.Z.state.hostname+"Product/itemGet",{product_id:this.productId})}catch(t){}},cartCommentUpdate(t){const e={product_id:this.productId,entry_comment:t};f.Z.cart.entryUpdate(e)}}},k=r(3744);const v=(0,k.Z)(I,[["render",d]]);var W=v}}]);
//# sourceMappingURL=464.b5a5cb33.js.map