{"version":3,"file":"js/229.38cf3c2f.js","mappings":"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","sources":["webpack://Tezkel/./src/components/ImageSlider.vue","webpack://Tezkel/./src/components/ImageSlider.vue?cba7","webpack://Tezkel/./src/views/ProductView.vue","webpack://Tezkel/./src/views/ProductView.vue?3bfe"],"sourcesContent":["<style scoped>\r\n    .crop-to-fit {\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n      overflow: hidden;\r\n      width: 100%;\r\n    }\r\n    .crop-to-fit img {\r\n      flex-shrink:0;\r\n      min-width:100%;\r\n    }\r\n</style>\r\n\r\n<template>\r\n    <swiper :modules=\"modules\" :autoplay='{delay: 3000, disableOnInteraction: false}' :loop=\"true\" effect=\"fade\">\r\n        <swiper-slide v-for=\"image in imageList\" :key=\"image.image_hash\">\r\n          <div class=\"crop-to-fit\" :style=\"`height: ${imgHeight||300}px;`\">\r\n            <img :style=\"`min-height: ${imgHeight||300}px;`\" :src=\"`${$heap.state.hostname}image/get.php/${image.image_hash}.${imgHeight*4||1200}.${imgHeight*4||1200}.webp`\"/>\r\n          </div>\r\n        </swiper-slide>\r\n      </swiper>\r\n</template>\r\n\r\n<script>\r\nimport { EffectFade, Autoplay }   from 'swiper';\r\nimport { Swiper, SwiperSlide }    from 'swiper/vue';\r\nimport 'swiper/css/bundle';\r\nexport default({\r\n    components: { \r\n      Swiper,\r\n      SwiperSlide\r\n    },\r\n    props: ['imageList','imgHeight'],\r\n    setup() {\r\n      return {\r\n        modules: [Autoplay,EffectFade], \r\n      };\r\n    },\r\n});\r\n</script>","import { render } from \"./ImageSlider.vue?vue&type=template&id=7c4e19d7&scoped=true\"\nimport script from \"./ImageSlider.vue?vue&type=script&lang=js\"\nexport * from \"./ImageSlider.vue?vue&type=script&lang=js\"\n\nimport \"./ImageSlider.vue?vue&type=style&index=0&id=7c4e19d7&scoped=true&lang=css\"\n\nimport exportComponent from \"W:\\\\Ionic\\\\Tezkel\\\\blank\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7c4e19d7\"]])\n\nexport default __exports__","<template>\r\n  <base-layout :page-title=\"productItem?.product_name \" :page-default-back-link=\"'/store-'+productItem?.store_id\" :cartComponent=\"CartHeader\">\r\n      <image-slider v-if=\"productItem\" :imageList=\"productItem.images\" imgHeight=\"200\"/>\r\n      <ion-list v-if=\"productItem\">\r\n        <ion-list-header>\r\n          <h2>\r\n            {{ productItem.product_name }} <span v-if=\"!(productItem.is_counted && productItem.product_quantity>0)\">(Нет в наличии)</span>\r\n          </h2>\r\n        </ion-list-header>\r\n        <ion-item lines=\"none\">\r\n          <ion-text color=\"medium\">{{productItem.product_description}}</ion-text>\r\n          <ion-icon v-if=\"productItem?.is_writable\" slot=\"end\" :src=\"settingsOutline\" color=\"primary\" @click=\"$router.push('product-edit-'+productId)\"/>\r\n        </ion-item>\r\n        <ion-item lines=\"none\"></ion-item>\r\n        <ion-item>\r\n          <ion-icon slot=\"start\" color=\"primary\" :src=\"compassOutline\"/>\r\n          <ion-chip v-for=\"group in categories\" :key=\"group.group_id\">{{group.group_name}}</ion-chip>\r\n        </ion-item>\r\n\r\n        <ion-item v-if=\"productItem.product_price!=productItem.product_final_price\">\r\n          <ion-icon slot=\"start\" color=\"primary\" :src=\"giftOutline\"/>\r\n          <ion-label>Акция до {{promoFinish}}</ion-label>\r\n          <ion-label slot=\"end\" color=\"success\" style=\"font-size:1.2em\">-{{promoPercent}}%</ion-label>\r\n        </ion-item>\r\n\r\n        <ion-item>\r\n          <ion-icon slot=\"start\" color=\"primary\" :src=\"pricetagOutline\"/>\r\n          <ion-label>Цена за {{productItem.product_unit}}</ion-label>\r\n          <ion-label slot=\"end\" color=\"primary\" style=\"font-size:1.2em\">\r\n            <span v-if=\"productItem.product_price!=productItem.product_final_price\" style=\"color:var(--ion-color-danger);font-size:0.75em\">\r\n                <s>{{productItem.product_price}}{{$heap.state.currencySign}}</s>&nbsp;&nbsp;\r\n            </span>\r\n            {{productItem.product_final_price}}{{$heap.state.currencySign}}\r\n          </ion-label>\r\n        </ion-item>\r\n        <ion-item>\r\n          <ion-icon slot=\"start\" color=\"primary\" :src=\"cartOutline\"/>\r\n          <ion-label v-if=\"inCart\">В корзине {{productItem.product_unit}}</ion-label>\r\n          <ion-label v-else>Не заказан</ion-label>\r\n          <cart-add-buttons slot=\"end\" buttonLayout=\"horizontal\" display=\"inline\" :productItem=\"productItem\"></cart-add-buttons>\r\n        </ion-item>\r\n\r\n        <ion-item v-if=\"inCart\">\r\n          <ion-icon slot=\"start\" color=\"primary\" :src=\"walletOutline\"/>\r\n          <ion-label>Итог</ion-label>\r\n          <ion-label slot=\"end\" color=\"primary\" style=\"font-size:1.2em\">{{inCart}}{{$heap.state.currencySign}}</ion-label>\r\n        </ion-item>\r\n\r\n        <ion-item v-if=\"inCartComment!=null\">\r\n          <ion-icon slot=\"start\" color=\"primary\" :src=\"chatboxEllipsesOutline\"/>\r\n          <ion-textarea v-model=\"inCartComment\" @ionChange=\"cartCommentUpdate($event.target.value)\" placeholder=\"заметка для продавца\"></ion-textarea>\r\n        </ion-item>\r\n      </ion-list>\r\n  </base-layout>\r\n</template>\r\n\r\n<script>\r\nimport jQuery           from \"jquery\";\r\nimport heap             from '@/heap';\r\n\r\nimport {\r\n  compassOutline,\r\n  cartOutline,\r\n  pricetagOutline,\r\n  giftOutline,\r\n  walletOutline,\r\n  chatboxEllipsesOutline,\r\n  settingsOutline\r\n}                       from 'ionicons/icons'\r\nimport {\r\n  IonTextarea,\r\n  IonListHeader,\r\n  IonText,\r\n  IonIcon,\r\n  IonItem,\r\n  IonChip,\r\n  IonLabel,\r\n  IonList,\r\n\r\n}                       from '@ionic/vue'\r\nimport ImageSlider      from '@/components/ImageSlider'\r\nimport CartAddButtons   from '@/components/CartAddButtons'\r\nimport CartHeader       from '@/components/CartHeader'\r\n\r\nimport Order            from '@/scripts/Order.js'\r\n\r\nexport default  {\r\n  components: { \r\n    ImageSlider,\r\n    CartAddButtons,\r\n    IonTextarea,\r\n    IonListHeader,\r\n    IonText,\r\n    IonIcon,\r\n    IonItem,\r\n    IonChip,\r\n    IonLabel,\r\n    IonList,\r\n  },\r\n  setup(){\r\n    return {CartHeader,compassOutline,cartOutline,pricetagOutline,giftOutline,walletOutline,chatboxEllipsesOutline,settingsOutline}\r\n  },\r\n  data() {\r\n    return { \r\n      productId: this.$route.params.id,\r\n      productItem: null\r\n    };\r\n  },\r\n  created(){\r\n      //\r\n  },\r\n  computed:{\r\n    categories(){\r\n      if(!this.productItem?.member_of_groups?.group_ids){\r\n        return [];\r\n      }\r\n      const ids=this.productItem?.member_of_groups?.group_ids.split(',')\r\n      const names=this.productItem?.member_of_groups?.group_names.split(',')\r\n      let categories=[]\r\n      for(let i in ids){\r\n        categories.push({group_id:ids[i],group_name:names[i]})\r\n      }\r\n      return categories\r\n    },\r\n    promoFinish(){\r\n      try{\r\n        return this.productItem.product_promo_finish.split(' ')[0].split('-').reverse().join('.')\r\n      }catch{\r\n        return null;\r\n      }\r\n    },\r\n    promoPercent(){\r\n      return Math.round(100-this.productItem.product_final_price/this.productItem.product_price*100)\r\n    },\r\n    inCart(){\r\n      const entry=Order.cart.entryGet(this.productId)\r\n      if( !entry ){\r\n        return 0;\r\n      }\r\n      return entry.data.entry_quantity*entry.data.entry_price\r\n    },\r\n    inCartComment(){\r\n      const entry=Order.cart.entryGet(this.productId)\r\n      if( !entry ){\r\n        return null;\r\n      }\r\n      return entry.data.entry_comment??''\r\n    }\r\n  },\r\n  ionViewDidEnter(){\r\n    this.getProduct();\r\n  },\r\n  methods: {\r\n      async getProduct(){\r\n        try{\r\n          this.productItem=await jQuery.post( heap.state.hostname + \"Product/itemGet\", { product_id: this.productId })\r\n        }catch{/** */}\r\n      },\r\n      cartCommentUpdate(comment){\r\n        const entry={\r\n          product_id:this.productId,\r\n          entry_comment:comment\r\n        };\r\n        Order.cart.entryUpdate(entry)\r\n      }\r\n  },\r\n}\r\n</script>","import { render } from \"./ProductView.vue?vue&type=template&id=f5624c92\"\nimport script from \"./ProductView.vue?vue&type=script&lang=js\"\nexport * from \"./ProductView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"W:\\\\Ionic\\\\Tezkel\\\\blank\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["modules","autoplay","loop","effect","imageList","image","key","image_hash","class","style","imgHeight","src","$heap","state","hostname","components","Swiper","SwiperSlide","props","setup","__exports__","render","productItem","product_name","store_id","cartComponent","CartHeader","images","is_counted","product_quantity","lines","color","product_description","is_writable","slot","settingsOutline","$router","push","productId","compassOutline","categories","group","group_id","group_name","product_price","product_final_price","giftOutline","promoFinish","promoPercent","pricetagOutline","product_unit","currencySign","cartOutline","inCart","buttonLayout","display","walletOutline","inCartComment","chatboxEllipsesOutline","cartCommentUpdate","$event","target","value","placeholder","ImageSlider","CartAddButtons","IonTextarea","IonListHeader","IonText","IonIcon","IonItem","IonChip","IonLabel","IonList","data","this","$route","params","id","created","computed","member_of_groups","group_ids","ids","split","names","group_names","i","product_promo_finish","reverse","join","Math","round","entry","Order","entry_quantity","entry_price","entry_comment","ionViewDidEnter","getProduct","methods","async","heap","product_id","comment"],"sourceRoot":""}