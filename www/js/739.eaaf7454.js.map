{"version":3,"file":"js/739.eaaf7454.js","mappings":"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","sources":["webpack://Tezkel/./src/views/CourierDashboard.vue","webpack://Tezkel/./src/views/CourierDashboard.vue?821e"],"sourcesContent":["<style scoped>\r\ninput,textarea{\r\n  border: none;\r\n  padding: 5px;\r\n  margin: 5px;\r\n  width: 100%;\r\n  outline: none;\r\n}\r\nion-text{\r\n  color:black;\r\n  padding:20px;\r\n  border-radius:10px;\r\n  font-size: 12px;;\r\n}\r\n.disabled{\r\n  background-color: var(--ion-color-light-shade);\r\n}\r\n.deleted{\r\n  background-color: var(--ion-color-danger-tint);\r\n}\r\n.image_disabled{\r\n  border: 4px solid #999;\r\n  filter: grayscale(0.5);\r\n}\r\n</style>\r\n<template>\r\n  <base-layout page-title=\"Анкета курьера\" page-default-back-link=\"/user-dashboard\">\r\n  <div v-if=\"!courier\">\r\n    <ion-card>\r\n      <ion-item>\r\n        <ion-label>Пока вы не курьер</ion-label>\r\n      </ion-item>\r\n      <ion-item>\r\n        <ion-text>\r\n        Подавая заявку вы даете согласие на условия \r\n        <a href=\"#/page-courier_contract\">Договор о предоставлении услуг</a>\r\n        </ion-text>\r\n        <ion-checkbox v-model=\"contractAccepted\" slot=\"end\"/>\r\n      </ion-item>\r\n      <ion-button expand=\"full\" @click=\"itemCreate()\" :disabled=\"!contractAccepted\">Стать курьером</ion-button>\r\n    </ion-card>\r\n  </div>\r\n\r\n  <div v-if=\"courier\">\r\n    <ion-card lines=\"none\" v-if=\"message\">\r\n      <ion-card-content :class=\"messageClass\">\r\n        {{message}}\r\n      </ion-card-content>\r\n    </ion-card>\r\n    <ion-card lines=\"none\" v-else>\r\n      <ion-card-content style=\"background-color: var(--ion-color-success-tint);\">\r\n      Анкета активна\r\n      </ion-card-content>\r\n    </ion-card>\r\n    \r\n    <form @change=\"updateCourier()\">\r\n        <ion-list>\r\n          <ion-item lines=\"full\">\r\n            <ion-thumbnail v-if=\"courier?.images[0]\" slot=\"start\">\r\n              <ion-img style=\"border-radius:10px;\" :class=\"imageClass\" :src=\"$heap.state.hostname + 'image/get.php/'+courier.images[0].image_hash+'.100.100.webp'\"/>\r\n            </ion-thumbnail>\r\n            <ion-button slot=\"end\" @click=\"uploadImageTrigger()\">Загрузить фото</ion-button>\r\n            <input type=\"file\" id=\"courier_foto_upload\" accept=\"image/*\" @change=\"uploadImage($event)\" style=\"display:none\">\r\n          </ion-item>\r\n\r\n          <ion-item lines=\"full\">\r\n            <ion-label position=\"stacked\" color=\"primary\">Транспорт</ion-label>\r\n            <ion-input v-model=\"courier.courier_vehicle\"/>\r\n          </ion-item>\r\n\r\n          <ion-item lines=\"full\">\r\n            <ion-label position=\"stacked\" color=\"primary\">ИНН</ion-label>\r\n            <ion-input v-model=\"courier.courier_tax_num\"/>\r\n          </ion-item>\r\n\r\n          <ion-item lines=\"full\">\r\n            <ion-label position=\"stacked\" color=\"primary\">Коментарий</ion-label>\r\n            <ion-textarea v-model=\"courier.courier_comment\"></ion-textarea>\r\n          </ion-item>\r\n          <ion-item v-if=\"courier.deleted_at\" lines=\"none\">\r\n              <ion-button slot=\"end\" @click=\"itemUnDelete()\" color=\"success\">Восстановить</ion-button>\r\n          </ion-item>\r\n          <ion-item v-else lines=\"none\">\r\n              <ion-button slot=\"end\" color=\"danger\" @click=\"itemDelete()\">Удалить анкету</ion-button>\r\n          </ion-item>\r\n\r\n          <ion-item v-if=\"showDisable\" lines=\"none\">\r\n              <ion-button slot=\"end\" @click=\"itemDisable()\" color=\"dark\">Заблокировать анкету</ion-button>\r\n          </ion-item>\r\n          <ion-item v-if=\"showEnable\" lines=\"none\">\r\n              <ion-button slot=\"end\" @click=\"itemEnable()\" color=\"success\">Утвердить анкету</ion-button>\r\n          </ion-item>\r\n          <ion-item lines=\"none\">\r\n            <ion-text>\r\n              <a @click=\"$router.push('/page-courier_contract')\">Договор о предоставлении услуг курьера</a>\r\n            </ion-text>\r\n          </ion-item>\r\n        </ion-list>\r\n    </form>\r\n  </div>\r\n\r\n  </base-layout>\r\n</template>\r\n\r\n<script>\r\nimport { \r\n  IonTextarea,\r\n  IonInput,\r\n  IonCard,\r\n  IonCardContent,\r\n  IonLabel,\r\n  IonItem,\r\n  IonNote,\r\n  IonButton,\r\n  IonImg,\r\n  IonThumbnail,\r\n  IonList,\r\n  IonCheckbox,\r\n  IonText\r\n}                   from \"@ionic/vue\";\r\nimport jQuery       from \"jquery\";\r\nimport heap         from '@/heap';\r\nimport User         from '@/scripts/User.js';\r\n\r\nexport default  {\r\n  components: {\r\n  IonTextarea,\r\n  IonInput,\r\n  IonCard,\r\n  IonCardContent,\r\n  IonLabel,\r\n  IonItem,\r\n  IonNote,\r\n  IonButton,\r\n  IonImg,\r\n  IonThumbnail,\r\n  IonList,\r\n  IonCheckbox,\r\n  IonText\r\n  },\r\n  data(){\r\n    return {\r\n      courier:User.courier.data,\r\n      isAdmin:User.isAdmin(),\r\n      contractAccepted:0\r\n    }\r\n  },\r\n  mounted(){\r\n    //this.load();\r\n  },\r\n  computed:{\r\n    message(){\r\n      if(this.courier.deleted_at){\r\n        return \"Анкета не активна и будет удалена. Вы можете еще отменить удаление\";\r\n      }\r\n      if(this.courier.is_disabled==1){\r\n        return \"Анкета не активна и находится на рассмотрении у администратора\";\r\n      }\r\n      return null;\r\n    },\r\n    messageClass(){\r\n      if(this.courier.deleted_at){\r\n        return \"deleted\";\r\n      }\r\n      if(this.courier.is_disabled==1){\r\n        return \"disabled\";\r\n      }\r\n      return null;\r\n    },\r\n    imageClass(){\r\n      if(this.courier?.images[0]?.is_disabled==1){\r\n        return 'image_disabled';\r\n      }\r\n      return '';\r\n    },\r\n    showDisable(){\r\n      if( this.courier.is_disabled==0 && User.isAdmin() ){\r\n        return true;\r\n      }\r\n      return false;\r\n    },\r\n    showEnable(){\r\n      if( this.courier.is_disabled==1 && User.isAdmin() ){\r\n        return true;\r\n      }\r\n      return false;\r\n    },\r\n    showDelete(){\r\n      if( this.courier.deleted_at ){\r\n        return false;\r\n      }\r\n      return true;\r\n    },\r\n    showUnDelete(){\r\n      if( this.courier.deleted_at==-1 || this.courier.deleted_at ){\r\n        return false;\r\n      }\r\n      return true;\r\n    }\r\n  },\r\n  methods:{\r\n    async load(){\r\n      try{\r\n        this.courier=await User.courier.get();\r\n      } catch(err){\r\n        const status=JSON.parse(err.responseJSON?.status);\r\n        if(status==\"404\"){\r\n          //\r\n        }\r\n      }\r\n    },\r\n    async itemCreate(){\r\n      try{\r\n        await jQuery.post(heap.state.hostname + \"Courier/itemCreate\");\r\n        await User.get();\r\n        this.courier=User.courier.data;\r\n      } catch {\r\n        this.$flash(\"Не удалось зарегистрироваться как курьер\")\r\n      }\r\n    },\r\n    async itemDelete(){\r\n      try{\r\n        await jQuery.post(heap.state.hostname + \"Courier/itemDelete\",{courier_id:this.courier.courier_id});\r\n        this.load();\r\n      } catch(err){\r\n        const message=err.responseJSON?.messages?.error;\r\n        if(message=='invalid_status'){\r\n          this.$flash(\"Надо сначала закрыть смену\");\r\n        }\r\n      }\r\n    },\r\n    itemUnDelete(){\r\n      const self=this;\r\n      jQuery.post( heap.state.hostname + \"Courier/itemUnDelete\", {courier_id:this.courier.courier_id})\r\n      .done(()=>{\r\n        self.load();\r\n      });\r\n    },\r\n\r\n    itemDisable(){\r\n      const self=this;\r\n      jQuery.post( heap.state.hostname + \"Courier/itemDisable\", {courier_id:this.courier.courier_id,is_disabled:1})\r\n      .done(()=>{\r\n        self.load();\r\n      });\r\n    },\r\n    itemEnable(){\r\n      const self=this;\r\n      jQuery.post( heap.state.hostname + \"Courier/itemDisable\", {courier_id:this.courier.courier_id,is_disabled:0})\r\n      .done(()=>{\r\n        self.load();\r\n      });\r\n    },\r\n\r\n    async uploadImage(event) {\r\n      let data = new FormData();\r\n      data.append(\"files[]\", event.target.files[0]); \r\n      data.set(\"image_holder_id\", this.courier.courier_id);\r\n      const request={\r\n        url : heap.state.hostname + \"Courier/fileUpload\",\r\n        type: \"POST\",\r\n        data : data,\r\n        processData: false,\r\n        contentType: false\r\n      };\r\n      try{\r\n        await jQuery.ajax(request)\r\n        this.load()\r\n      } catch(err){\r\n        this.$flash(\"Не удалось загрузить фото\");\r\n      }\r\n    },\r\n    uploadImageTrigger(){\r\n      jQuery('#courier_foto_upload').trigger('click');\r\n    },\r\n    async updateCourier(){\r\n      try{\r\n        return await jQuery.post(heap.state.hostname + \"Courier/itemUpdate\",JSON.stringify(this.courier));\r\n      } catch(err){\r\n        const message=JSON.parse(err.responseJSON?.messages?.error);\r\n        if(message.courier_tax_num){\r\n          this.$flash(\"Неверный формат ИНН\");\r\n        }\r\n      }\r\n      \r\n    }\r\n  },\r\n}\r\n</script>","import { render } from \"./CourierDashboard.vue?vue&type=template&id=3c71528e&scoped=true\"\nimport script from \"./CourierDashboard.vue?vue&type=script&lang=js\"\nexport * from \"./CourierDashboard.vue?vue&type=script&lang=js\"\n\nimport \"./CourierDashboard.vue?vue&type=style&index=0&id=3c71528e&scoped=true&lang=css\"\n\nimport exportComponent from \"W:\\\\Ionic\\\\Tezkel\\\\blank\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3c71528e\"]])\n\nexport default __exports__"],"names":["href","courier","contractAccepted","slot","expand","itemCreate","disabled","message","lines","class","messageClass","style","updateCourier","images","imageClass","src","$heap","state","hostname","image_hash","uploadImageTrigger","type","id","accept","uploadImage","$event","position","color","courier_vehicle","courier_tax_num","courier_comment","deleted_at","itemUnDelete","itemDelete","showDisable","itemDisable","showEnable","itemEnable","$router","push","components","IonTextarea","IonInput","IonCard","IonCardContent","IonLabel","IonItem","IonNote","IonButton","IonImg","IonThumbnail","IonList","IonCheckbox","IonText","data","User","isAdmin","mounted","computed","this","is_disabled","showDelete","showUnDelete","methods","async","err","JSON","parse","responseJSON","status","heap","$flash","courier_id","load","messages","error","self","done","event","FormData","append","target","files","set","request","url","processData","contentType","trigger","stringify","__exports__","render"],"sourceRoot":""}