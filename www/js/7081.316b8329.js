"use strict";(self["webpackChunktezkel"]=self["webpackChunktezkel"]||[]).push([[7081],{7081:function(e,l,t){t.r(l),t.d(l,{default:function(){return F}});var i=t(641),a=t(33);const r={key:0},o={key:1},u={key:2,style:{background:"linear-gradient(to top, #009dcd, #79c8e2)"}};function d(e,l,t,d,n,s){const c=(0,i.g2)("ion-card-content"),_=(0,i.g2)("ion-card"),m=(0,i.g2)("ion-icon"),b=(0,i.g2)("ion-toggle"),k=(0,i.g2)("ion-item"),f=(0,i.g2)("ion-label"),h=(0,i.g2)("ion-item-divider"),g=(0,i.g2)("ion-input"),F=(0,i.g2)("ion-textarea"),p=(0,i.g2)("ion-list"),v=(0,i.g2)("image-tile-comp"),y=(0,i.g2)("ion-button"),C=(0,i.g2)("router-link"),I=(0,i.g2)("ion-col"),W=(0,i.g2)("ion-row"),x=(0,i.g2)("ion-grid"),z=(0,i.g2)("ion-card-title"),V=(0,i.g2)("ion-card-header"),A=(0,i.g2)("ion-text"),w=(0,i.g2)("ion-checkbox"),O=(0,i.g2)("base-layout");return(0,i.uX)(),(0,i.Wv)(O,{"page-title":"Анкета курьера",pageDefaultBackLink:"/user"},{default:(0,i.k6)(()=>{var t;return[null==n.courier?((0,i.uX)(),(0,i.CE)("div",r)):null!==(t=n.courier)&&void 0!==t&&t.courier_id?((0,i.uX)(),(0,i.CE)("div",o,[s.message?((0,i.uX)(),(0,i.Wv)(_,{key:0,lines:"none"},{default:(0,i.k6)(()=>[(0,i.bF)(c,{class:(0,a.C4)(s.messageClass)},{default:(0,i.k6)(()=>[(0,i.eW)((0,a.v_)(s.message),1)]),_:1},8,["class"])]),_:1})):((0,i.uX)(),(0,i.Wv)(_,{key:1,lines:"none"},{default:(0,i.k6)(()=>[(0,i.bF)(c,{style:{"background-color":"var(--ion-color-success-tint)"}},{default:(0,i.k6)(()=>l[13]||(l[13]=[(0,i.eW)(" Анкета активна. Вы можете открыть смену для приема заказов. ")])),_:1,__:[13]})]),_:1})),(0,i.Lk)("form",{onChange:l[8]||(l[8]=e=>s.updateCourier())},[(0,i.bF)(p,null,{default:(0,i.k6)(()=>[(0,i.bF)(k,null,{default:(0,i.k6)(()=>[(0,i.bF)(m,{src:d.trashOutline,color:"primary",slot:"start"},null,8,["src"]),l[14]||(l[14]=(0,i.eW)(" Удалено ")),(0,i.bF)(b,{slot:"end",modelValue:n.is_deleted,"onUpdate:modelValue":l[0]||(l[0]=e=>n.is_deleted=e),color:"danger",onIonChange:l[1]||(l[1]=e=>s.itemDelete(e.target.checked?1:0))},null,8,["modelValue"])]),_:1,__:[14]}),(0,i.bF)(k,null,{default:(0,i.k6)(()=>[(0,i.bF)(m,{src:d.searchOutline,color:"primary",slot:"start"},null,8,["src"]),l[15]||(l[15]=(0,i.eW)(" На модерации ")),(0,i.bF)(b,{slot:"end",modelValue:n.is_disabled,"onUpdate:modelValue":l[2]||(l[2]=e=>n.is_disabled=e),onIonChange:l[3]||(l[3]=e=>s.itemDisable(e.target.checked?1:0))},null,8,["modelValue"])]),_:1,__:[15]}),(0,i.bF)(h,null,{default:(0,i.k6)(()=>[(0,i.bF)(f,null,{default:(0,i.k6)(()=>l[16]||(l[16]=[(0,i.eW)("Основные настройки")])),_:1,__:[16]})]),_:1}),(0,i.bF)(k,{lines:"full"},{default:(0,i.k6)(()=>[(0,i.bF)(g,{modelValue:n.courier.courier_name,"onUpdate:modelValue":l[4]||(l[4]=e=>n.courier.courier_name=e),placeholder:"Имя курьера",label:"Имя","label-placement":"stacked"},null,8,["modelValue"])]),_:1}),(0,i.bF)(k,{lines:"full"},{default:(0,i.k6)(()=>[(0,i.bF)(g,{modelValue:n.courier.courier_vehicle,"onUpdate:modelValue":l[5]||(l[5]=e=>n.courier.courier_vehicle=e),placeholder:"автомобиль, мопед, велосипед",label:"Транспорт","label-placement":"stacked"},null,8,["modelValue"])]),_:1}),(0,i.bF)(k,{lines:"full"},{default:(0,i.k6)(()=>[(0,i.bF)(g,{modelValue:n.courier.courier_tax_num,"onUpdate:modelValue":l[6]||(l[6]=e=>n.courier.courier_tax_num=e),placeholder:"ИНН курьера",label:"ИНН","label-placement":"stacked"},null,8,["modelValue"])]),_:1}),(0,i.bF)(k,{lines:"full"},{default:(0,i.k6)(()=>[(0,i.bF)(F,{modelValue:n.courier.courier_comment,"onUpdate:modelValue":l[7]||(l[7]=e=>n.courier.courier_comment=e),placeholder:"Цвет, номер авто",label:"Комментарий","label-placement":"stacked"},null,8,["modelValue"])]),_:1})]),_:1})],32),n.courier?((0,i.uX)(),(0,i.Wv)(p,{key:2},{default:(0,i.k6)(()=>[(0,i.bF)(h,null,{default:(0,i.k6)(()=>[(0,i.bF)(f,null,{default:(0,i.k6)(()=>l[17]||(l[17]=[(0,i.eW)("Ваше фото")])),_:1,__:[17]})]),_:1}),(0,i.bF)(v,{images:n.courier.images,image_holder_id:n.courier.courier_id,controller:"Courier",ref:"courierImgs"},null,8,["images","image_holder_id"]),(0,i.bF)(y,{onClick:l[9]||(l[9]=l=>e.$refs.courierImgs.take_photo()),expand:"block",color:"light"},{default:(0,i.k6)(()=>[(0,i.bF)(m,{src:d.cameraOutline},null,8,["src"]),l[18]||(l[18]=(0,i.eW)(" Добавить "))]),_:1,__:[18]})]),_:1})):(0,i.Q3)("",!0),(0,i.bF)(p,null,{default:(0,i.k6)(()=>[(0,i.bF)(h,null,{default:(0,i.k6)(()=>[(0,i.bF)(f,null,{default:(0,i.k6)(()=>l[19]||(l[19]=[(0,i.eW)("Информация")])),_:1,__:[19]})]),_:1}),(0,i.bF)(k,{lines:"none",button:"",detail:"",onClick:l[10]||(l[10]=l=>e.$go("/page/rules-courier"))},{default:(0,i.k6)(()=>[(0,i.bF)(m,{src:d.documentTextOutline,slot:"start"},null,8,["src"]),(0,i.bF)(C,{to:"/page/rules-courier"},{default:(0,i.k6)(()=>l[20]||(l[20]=[(0,i.eW)("Правила пользования для курьера")])),_:1,__:[20]})]),_:1})]),_:1})])):((0,i.uX)(),(0,i.CE)("div",u,[(0,i.bF)(x,{class:"courier-grid",style:{"background-image":"url('/img/courier_tezkel.png')"}},{default:(0,i.k6)(()=>[(0,i.bF)(W,{class:"ion-align-items-center"},{default:(0,i.k6)(()=>[(0,i.bF)(I,{"size-md":"6","size-xs":"12","size-sm":"12",class:"ion-padding",style:{color:"var(--ion-color-primary-contrast)"}},{default:(0,i.k6)(()=>l[21]||(l[21]=[(0,i.Lk)("h3",null,[(0,i.Lk)("b",null,"Хотите стать нашим курьером?")],-1),(0,i.Lk)("h6",null,[(0,i.Lk)("b",null,"Заполняйте анкету и присоединяйтесь к нашей дружной команде!")],-1)])),_:1,__:[21]}),(0,i.bF)(I,{"size-md":"6","size-xs":"12","size-sm":"12",style:{"min-height":"350px"}})]),_:1})]),_:1}),(0,i.bF)(_,{color:"light",style:{margin:"0"}},{default:(0,i.k6)(()=>[(0,i.bF)(V,null,{default:(0,i.k6)(()=>[(0,i.bF)(z,{class:"ion-text-center"},{default:(0,i.k6)(()=>l[22]||(l[22]=[(0,i.eW)("Мы предлагаем")])),_:1,__:[22]})]),_:1}),(0,i.bF)(c,null,{default:(0,i.k6)(()=>[(0,i.bF)(x,null,{default:(0,i.k6)(()=>[(0,i.bF)(W,null,{default:(0,i.k6)(()=>[(0,i.bF)(I,{"size-xs":"12","size-md":"4"},{default:(0,i.k6)(()=>[(0,i.bF)(_,{color:"primary"},{default:(0,i.k6)(()=>[(0,i.bF)(V,null,{default:(0,i.k6)(()=>[(0,i.bF)(z,null,{default:(0,i.k6)(()=>l[23]||(l[23]=[(0,i.eW)("1. Без стажировки")])),_:1,__:[23]})]),_:1}),(0,i.bF)(c,null,{default:(0,i.k6)(()=>l[24]||(l[24]=[(0,i.eW)(" Никаких испытательных сроков, вы с первого дня погружаетесь в работу ")])),_:1,__:[24]})]),_:1})]),_:1}),(0,i.bF)(I,{"size-xs":"12","size-md":"4"},{default:(0,i.k6)(()=>[(0,i.bF)(_,{color:"primary"},{default:(0,i.k6)(()=>[(0,i.bF)(V,null,{default:(0,i.k6)(()=>[(0,i.bF)(z,null,{default:(0,i.k6)(()=>l[25]||(l[25]=[(0,i.eW)("2. Гибкий график")])),_:1,__:[25]})]),_:1}),(0,i.bF)(c,null,{default:(0,i.k6)(()=>l[26]||(l[26]=[(0,i.eW)(" Можно подгонять и совмещать рабочее время так, как удобно именно Вам. ")])),_:1,__:[26]})]),_:1})]),_:1}),(0,i.bF)(I,{"size-xs":"12","size-md":"4"},{default:(0,i.k6)(()=>[(0,i.bF)(_,{color:"primary"},{default:(0,i.k6)(()=>[(0,i.bF)(V,null,{default:(0,i.k6)(()=>[(0,i.bF)(z,null,{default:(0,i.k6)(()=>l[27]||(l[27]=[(0,i.eW)("3. Трудовой договор")])),_:1,__:[27]})]),_:1}),(0,i.bF)(c,null,{default:(0,i.k6)(()=>l[28]||(l[28]=[(0,i.eW)(" Есть возможность официально оформить трудовые отношения. ")])),_:1,__:[28]})]),_:1})]),_:1})]),_:1}),(0,i.bF)(W,null,{default:(0,i.k6)(()=>[(0,i.bF)(I,{"size-xs":"12","size-md":"4"},{default:(0,i.k6)(()=>[(0,i.bF)(_,{color:"primary"},{default:(0,i.k6)(()=>[(0,i.bF)(V,null,{default:(0,i.k6)(()=>[(0,i.bF)(z,null,{default:(0,i.k6)(()=>l[29]||(l[29]=[(0,i.eW)("4. Автоматизация")])),_:1,__:[29]})]),_:1}),(0,i.bF)(c,null,{default:(0,i.k6)(()=>l[30]||(l[30]=[(0,i.eW)(" Работа автоматизирована с помощью приложения. Нет работы с наличными. ")])),_:1,__:[30]})]),_:1})]),_:1}),(0,i.bF)(I,{"size-xs":"12","size-md":"4"},{default:(0,i.k6)(()=>[(0,i.bF)(_,{color:"primary"},{default:(0,i.k6)(()=>[(0,i.bF)(V,null,{default:(0,i.k6)(()=>[(0,i.bF)(z,null,{default:(0,i.k6)(()=>l[31]||(l[31]=[(0,i.eW)("5. Компенсация")])),_:1,__:[31]})]),_:1}),(0,i.bF)(c,null,{default:(0,i.k6)(()=>l[32]||(l[32]=[(0,i.eW)(" Мы выплачеваем компенсацию затрат на топливо, затраченное в рабочее время ")])),_:1,__:[32]})]),_:1})]),_:1}),(0,i.bF)(I,{"size-xs":"12","size-md":"4"},{default:(0,i.k6)(()=>[(0,i.bF)(_,{color:"primary"},{default:(0,i.k6)(()=>[(0,i.bF)(V,null,{default:(0,i.k6)(()=>[(0,i.bF)(z,null,{default:(0,i.k6)(()=>l[33]||(l[33]=[(0,i.eW)("6. Рабочий отдых")])),_:1,__:[33]})]),_:1}),(0,i.bF)(c,null,{default:(0,i.k6)(()=>l[34]||(l[34]=[(0,i.eW)(" Вы можете отдохнуть в нашей комнате отдыха для персонала ")])),_:1,__:[34]})]),_:1})]),_:1})]),_:1})]),_:1}),(0,i.bF)(k,{lines:"none"},{default:(0,i.k6)(()=>[(0,i.bF)(A,null,{default:(0,i.k6)(()=>[l[36]||(l[36]=(0,i.eW)(" Подавая заявку вы даете согласие на условия ")),(0,i.bF)(C,{to:"/page/rules-courier"},{default:(0,i.k6)(()=>l[35]||(l[35]=[(0,i.eW)("Оферта об оказании услуг доставки")])),_:1,__:[35]})]),_:1,__:[36]}),(0,i.bF)(w,{slot:"end",modelValue:n.contractAccepted,"onUpdate:modelValue":l[11]||(l[11]=e=>n.contractAccepted=e)},null,8,["modelValue"])]),_:1}),(0,i.bF)(y,{expand:"block",onClick:l[12]||(l[12]=e=>s.itemCreate()),disabled:!n.contractAccepted},{default:(0,i.k6)(()=>l[37]||(l[37]=[(0,i.eW)("Подать заявку")])),_:1,__:[37]},8,["disabled"])]),_:1})]),_:1})]))]}),_:1})}var n=t(5634),s=t(5480),c=t(2311),_=t.n(c),m=t(5538),b=t(8701),k=t(4933),f={components:{imageTileComp:k.A,IonTextarea:n.nc,IonInput:n.$w,IonCard:n.b_,IonCardHeader:n.ME,IonCardTitle:n.tN,IonCardContent:n.I9,IonGrid:n.lO,IonRow:n.ln,IonCol:n.hU,IonLabel:n.he,IonItem:n.uz,IonButton:n.Jm,IonList:n.nf,IonCheckbox:n.eY,IonText:n.IO,IonItemDivider:n.Dg,IonToggle:n.BY,IonIcon:n.iq},setup(){return{cameraOutline:s.GOB,trashOutline:s.P1A,searchOutline:s.jBE,documentTextOutline:s.pXZ}},data(){var e,l;return{other_courier_id:null===(e=this.$route)||void 0===e||null===(l=e.query)||void 0===l?void 0:l.courier_id,courier:null,isAdmin:b.A.isAdmin(),contractAccepted:0,is_deleted:0,is_disabled:0}},ionViewDidEnter(){var e,l,t,i;this.other_courier_id!=(null===(e=this.$route)||void 0===e||null===(l=e.query)||void 0===l?void 0:l.courier_id)&&(this.other_courier_id=null===(t=this.$route)||void 0===t||null===(i=t.query)||void 0===i?void 0:i.courier_id,this.itemGet())},mounted(){this.itemGet()},computed:{message(){var e,l;return null!==(e=this.courier)&&void 0!==e&&e.deleted_at?"Анкета не активна и будет удалена. Вы можете еще отменить удаление":1==(null===(l=this.courier)||void 0===l?void 0:l.is_disabled)?"Анкета не активна и находится на рассмотрении у администратора":null},messageClass(){var e,l;return null!==(e=this.courier)&&void 0!==e&&e.deleted_at?"deleted":1==(null===(l=this.courier)||void 0===l?void 0:l.is_disabled)?"disabled":null},imageClass(){var e,l;return 1==(null===(e=this.courier)||void 0===e||null===(l=e.images[0])||void 0===l?void 0:l.is_disabled)?"image_disabled":""}},methods:{async itemGet(){if(this.other_courier_id>0)try{this.courier=await _().post(m.A.state.hostname+"Courier/itemGet",{courier_id:this.other_courier_id})}catch(e){this.$flash("Не удалось загрузить анкету")}else this.courier=await b.A.courier.get()||{};this.itemParseFlags()},itemParseFlags(){this.courier&&(this.is_deleted=null==this.courier.deleted_at?0:1,this.is_disabled=0==this.courier.is_disabled?0:1)},async itemCreate(){try{await _().post(m.A.state.hostname+"Courier/itemCreate"),await b.A.get("full"),this.courier=b.A.courier.data}catch{this.$flash("Не удалось зарегистрироваться как курьер")}},async itemDelete(e){const l=e?"itemDelete":"itemUnDelete";try{await _().post(m.A.state.hostname+"Courier/"+l,{courier_id:this.courier.courier_id}),this.courier.deleted_at=e?1:null}catch{this.itemGet()}},async itemDisable(e){if(this.courier.is_disabled!=e)try{await _().post(m.A.state.hostname+"Courier/itemDisable",{courier_id:this.courier.courier_id,is_disabled:e}),this.courier.is_disabled=e}catch{this.itemGet()}},async uploadImage(e){let l=new FormData;l.append("files[]",e.target.files[0]),l.set("image_holder_id",this.courier.courier_id);const t={url:m.A.state.hostname+"Courier/fileUpload",type:"POST",data:l,processData:!1,contentType:!1};try{await _().ajax(t),this.itemGet()}catch(i){this.$flash("Не удалось загрузить фото")}},uploadImageTrigger(){_()("#courier_foto_upload").trigger("click")},async updateCourier(){try{return await _().post(m.A.state.hostname+"Courier/itemUpdate",JSON.stringify(this.courier))}catch(t){var e,l;const i=JSON.parse(null===(e=t.responseJSON)||void 0===e||null===(l=e.messages)||void 0===l?void 0:l.error);i.courier_tax_num&&this.$flash("Неверный формат ИНН")}}}},h=t(6262);const g=(0,h.A)(f,[["render",d],["__scopeId","data-v-5185867e"]]);var F=g}}]);
//# sourceMappingURL=7081.316b8329.js.map