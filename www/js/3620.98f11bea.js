"use strict";(self["webpackChunkTezkel"]=self["webpackChunkTezkel"]||[]).push([[3620],{3620:function(e,t,a){a.r(t),a.d(t,{default:function(){return f}});var i=a(641);function n(e,t,a,n,o,l){const g=(0,i.g2)("ion-icon"),s=(0,i.g2)("ion-label"),p=(0,i.g2)("ion-input"),d=(0,i.g2)("ion-item"),u=(0,i.g2)("ion-list"),r=(0,i.g2)("ckeditor"),c=(0,i.g2)("ion-button"),h=(0,i.g2)("ion-col"),m=(0,i.g2)("ion-row"),_=(0,i.g2)("ion-grid"),f=(0,i.g2)("base-layout");return(0,i.uX)(),(0,i.Wv)(f,{pageTitle:"Редактирование страницы",pageDefaultBackLink:"/user"},{default:(0,i.k6)((()=>[(0,i.bF)(u,null,{default:(0,i.k6)((()=>[(0,i.bF)(d,null,{default:(0,i.k6)((()=>[(0,i.bF)(g,{slot:"start",icon:n.bookmarkOutline},null,8,["icon"]),(0,i.bF)(s,{position:"stacked",color:"primary"},{default:(0,i.k6)((()=>[(0,i.eW)("Заголовок статьи")])),_:1}),(0,i.bF)(p,{modelValue:o.page.page_title,"onUpdate:modelValue":t[0]||(t[0]=e=>o.page.page_title=e),placeholder:"Заголовок статьи"},null,8,["modelValue"])])),_:1}),(0,i.bF)(d,null,{default:(0,i.k6)((()=>[(0,i.bF)(g,{slot:"start",icon:n.codeOutline},null,8,["icon"]),(0,i.bF)(s,{position:"stacked",color:"primary"},{default:(0,i.k6)((()=>[(0,i.eW)("Код для ссылки")])),_:1}),(0,i.bF)(p,{modelValue:o.page.page_name,"onUpdate:modelValue":t[1]||(t[1]=e=>o.page.page_name=e),placeholder:"Код для ссылки"},null,8,["modelValue"])])),_:1})])),_:1}),(0,i.bF)(r,{editor:o.editor,modelValue:o.page.page_content,"onUpdate:modelValue":t[2]||(t[2]=e=>o.page.page_content=e),config:o.editorConfig},null,8,["editor","modelValue","config"]),(0,i.bF)(_,{style:{width:"100%"}},{default:(0,i.k6)((()=>[(0,i.bF)(m,null,{default:(0,i.k6)((()=>[(0,i.bF)(h,null,{default:(0,i.k6)((()=>[(0,i.bF)(c,{onClick:t[3]||(t[3]=t=>e.$go("/user/text-list")),color:"light"},{default:(0,i.k6)((()=>[(0,i.eW)("К списку страниц")])),_:1})])),_:1}),(0,i.bF)(h,{style:{"text-align":"right"}},{default:(0,i.k6)((()=>[(0,i.bF)(c,{onClick:t[4]||(t[4]=e=>l.itemDelete()),color:"danger"},{default:(0,i.k6)((()=>[(0,i.eW)("Удалить")])),_:1})])),_:1}),(0,i.bF)(h,{style:{"text-align":"right"}},{default:(0,i.k6)((()=>[(0,i.bF)(c,{onClick:t[5]||(t[5]=e=>l.itemSave())},{default:(0,i.k6)((()=>[(0,i.eW)("Сохранить")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}a(3110);var o=a(5846),l=a.n(o),g=a(2819),s=a.n(g),p=(a(1622),a(5480)),d=a(972),u=a(8701),r=a(2311),c=a.n(r),h={components:{IonLabel:d.he,IonIcon:d.iq,IonList:d.nf,IonItem:d.uz,IonInput:d.$w,IonButton:d.Jm,IonGrid:d.lO,IonRow:d.ln,IonCol:d.hU,ckeditor:l().component},setup(){return{documentTextOutline:p.pXZ,codeOutline:p.abl,bookmarkOutline:p.dm8}},data(){return{editor:s(),page_id:0,page:{page_name:"",page_title:"",page_content:""},editorConfig:{language:"ru"}}},created(){},ionViewDidEnter(){var e;u.A.isAdmin()?(this.page_id=null!==(e=this.$route.params.id)&&void 0!==e?e:0,this.page_id>0?this.itemGet():this.page={page_name:"",page_title:"",page_content:""}):(this.$flash("Страница для администраторов"),this.$go("/catalog"))},methods:{async itemGet(){const e=this.page_id;try{this.page=await c().post(this.$heap.state.hostname+"Page/itemGet",{page_id:e})}catch{}},async itemSave(){const e={page_name:this.page.page_name,page_title:this.page.page_title,page_content:this.page.page_content};try{this.page_id>0?(e.page_id=this.page_id,await c().post(this.$heap.state.hostname+"Page/itemUpdate",JSON.stringify(e)),this.$flash("Страница сохранена")):this.page_id=await c().post(this.$heap.state.hostname+"Page/itemCreate",JSON.stringify(e))}catch{}},async itemDelete(){if(!confirm(`Удалить страницу "${this.page.page_title}"?`))return;const e=this.page_id;try{await c().post(this.$heap.state.hostname+"Page/itemDelete",{page_id:e}),this.$flash("Страница удалена"),this.$go("/user/text-list")}catch{}}}},m=a(6262);const _=(0,m.A)(h,[["render",n]]);var f=_}}]);
//# sourceMappingURL=3620.98f11bea.js.map