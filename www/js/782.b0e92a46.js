"use strict";(self["webpackChunktezkel"]=self["webpackChunktezkel"]||[]).push([[782],{7526:function(t,e,i){i.d(e,{Z:function(){return _}});var o=i(6252),n=i(3577);const a={class:"blur-image"},r=["src"],l=["src"];function s(t,e,i,s,u,c){const d=(0,o.up)("swiper-slide"),m=(0,o.up)("swiper");return(0,o.wg)(),(0,o.j4)(m,{modules:s.modules,autoplay:{delay:3e3,disableOnInteraction:!1},loop:!0,effect:"fade",style:(0,n.j5)(`height: ${i.imgHeight||"100%"};`)},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.imageList,(e=>((0,o.wg)(),(0,o.j4)(d,{key:e.image_hash},{default:(0,o.w5)((()=>[(0,o._)("div",{class:(0,n.C_)(`${i.mode?i.mode:""} cropper`),style:(0,n.j5)(`height: ${i.imgHeight+"px"||0}`)},[(0,o._)("div",a,[(0,o._)("img",{src:`${t.$heap.state.hostname}image/get.php/${e.image_hash}.${4*i.imgHeight||1200}.${4*i.imgHeight||1200}.webp`},null,8,r)]),(0,o._)("img",{style:(0,n.j5)(`min-height: ${i.imgHeight+"px;"||0};max-height:50vh`),src:`${t.$heap.state.hostname}image/get.php/${e.image_hash}.${4*i.imgHeight||1200}.${4*i.imgHeight||1200}.webp`},null,12,l)],6)])),_:2},1024)))),128))])),_:1},8,["modules","style"])}var u=i(8903),c=i(702),d=i(3181),m={components:{Swiper:d.t,SwiperSlide:d.o},props:["imageList","imgHeight","mode"],setup(){return{modules:[c.pt,c.xW],expand:u.jnR,contract:u.LJB}},data(){return{expanded:!1,vh:0,vw:0}},methods:{maximize(){this.expanded=!0,this.vh=document.getElementsByTagName("ion-content")[0].clientHeight,this.vw=document.getElementsByTagName("ion-content")[0].clientWidth},minimize(){this.expanded=!1,this.vh=document.getElementsByTagName("ion-content")[0].clientHeight,this.vw=document.getElementsByTagName("ion-content")[0].clientWidth}}},p=i(3744);const h=(0,p.Z)(m,[["render",s],["__scopeId","data-v-8c3c7a70"]]);var _=h},2782:function(t,e,i){i.r(e),i.d(e,{default:function(){return S}});i(5306);var o=i(6252),n=i(3577);const a={key:0,class:"product-images"},r={key:0},l={key:1},s={key:2},u={key:0,style:{color:"var(--ion-color-danger)","font-size":"0.75em"}};function c(t,e,i,c,d,m){var p;const h=(0,o.up)("image-slider-comp"),_=(0,o.up)("ion-label"),g=(0,o.up)("ion-icon"),w=(0,o.up)("ion-button"),k=(0,o.up)("ion-list-header"),y=(0,o.up)("ion-text"),f=(0,o.up)("ion-item"),I=(0,o.up)("ion-list"),v=(0,o.up)("ion-accordion"),W=(0,o.up)("ion-accordion-group"),b=(0,o.up)("ion-img"),$=(0,o.up)("ion-avatar"),C=(0,o.up)("ion-chip"),D=(0,o.up)("cart-add-buttons"),U=(0,o.up)("ion-textarea"),x=(0,o.up)("base-layout");return(0,o.wg)(),(0,o.j4)(x,{"page-title":null===(p=d.productItem)||void 0===p?void 0:p.product_name,pageDefaultBackLink:"/catalog",cartComponent:c.CartHeader},{default:(0,o.w5)((()=>[d.productItem?((0,o.wg)(),(0,o.iD)("div",a,[(0,o.Wm)(h,{imageList:d.productItem.images,imgHeight:400,mode:"save-aspect-ratio"},null,8,["imageList"])])):(0,o.kq)("",!0),d.productItem?((0,o.wg)(),(0,o.j4)(I,{key:1},{default:(0,o.w5)((()=>{var i;return[(0,o.Wm)(k,null,{default:(0,o.w5)((()=>[(0,o.Wm)(_,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(d.productItem.product_name),1),d.productItem.product_option?((0,o.wg)(),(0,o.iD)("b",r," ["+(0,n.zw)(d.productItem.product_option)+"]",1)):(0,o.kq)("",!0),(0,o.Uk)(),m.isAvailable?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("span",l,"(Нет в наличии)"))])),_:1}),d.productItem.is_writable?((0,o.wg)(),(0,o.j4)(w,{key:0,onClick:e[0]||(e[0]=e=>t.$go("/catalog/product-edit-"+d.productId))},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{color:"primary",src:c.settingsOutline},null,8,["src"])])),_:1})):(0,o.kq)("",!0)])),_:1}),d.productItem.product_description?((0,o.wg)(),(0,o.j4)(W,{key:0,style:{width:"100%"}},{default:(0,o.w5)((()=>[(0,o.Wm)(v,null,{default:(0,o.w5)((()=>[(0,o.Wm)(f,{slot:"header",lines:"none"},{default:(0,o.w5)((()=>[(0,o.Wm)(y,{class:"product-description",color:"medium",innerHTML:m.itemDescription},null,8,["innerHTML"])])),_:1}),(0,o.Wm)(I,{slot:"content"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{lines:"none"})])),_:1})])),_:1})])),_:1})):(0,o.kq)("",!0),(0,o.Wm)(f,{lines:"none",onClick:e[1]||(e[1]=e=>t.$go("/catalog/store-"+d.productItem.store_id)),button:""},{default:(0,o.w5)((()=>{var e,i;return[null!==(e=d.productItem)&&void 0!==e&&null!==(i=e.store)&&void 0!==i&&i.avatar?((0,o.wg)(),(0,o.j4)($,{key:0,slot:"start"},{default:(0,o.w5)((()=>{var e,i;return[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(null===(e=d.productItem)||void 0===e||null===(i=e.store)||void 0===i?void 0:i.avatar,(e=>((0,o.wg)(),(0,o.j4)(b,{src:`${t.$heap.state.hostname}image/get.php/${e.image_hash}.200.200.webp`,key:e.image_id},null,8,["src"])))),128))]})),_:1})):(0,o.kq)("",!0),(0,o.Wm)(y,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(d.productItem.store.store_name),1)])),_:1}),m.categories&&m.categories[0]?((0,o.wg)(),(0,o.j4)(y,{key:1,slot:"end",color:"medium"},{default:(0,o.w5)((()=>[(0,o.Uk)("#"+(0,n.zw)(m.categories[0].group_name),1)])),_:1})):(0,o.kq)("",!0)]})),_:1}),(0,o.Wm)(f,{lines:"none"},{default:(0,o.w5)((()=>[(0,o.kq)("",!0),(0,o.Wm)(C,{onClick:e[3]||(e[3]=t=>m.itemShare()),color:"medium"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{src:c.arrowRedoOutline},null,8,["src"]),(0,o.Wm)(_,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Поделиться")])),_:1})])),_:1})])),_:1}),(0,o.kq)("",!0),(0,o.Wm)(f,{lines:"none"}),null!==(i=d.productItem)&&void 0!==i&&i.options?((0,o.wg)(),(0,o.iD)("div",s,[(0,o.Wm)(f,{lines:"none"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{color:"medium",src:c.layersOutline,slot:"start"},null,8,["src"]),(0,o.Wm)(_,{color:"medium"},{default:(0,o.w5)((()=>[(0,o.Uk)("Варианты")])),_:1})])),_:1}),(0,o.Wm)(f,{lines:"none"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(d.productItem.options,(e=>((0,o.wg)(),(0,o.j4)(C,{outline:!0,onClick:i=>t.$router.replace(`/catalog/product-${e.product_id}`),color:"primary",key:e.product_id},{default:(0,o.w5)((()=>[(0,o.Wm)(_,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(e.product_option),1)])),_:2},1024),(0,o.Uk)(" "),e.product_final_price>0?((0,o.wg)(),(0,o.j4)(_,{key:0},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(e.product_final_price)+(0,n.zw)(t.$heap.state.currencySign),1)])),_:2},1024)):(0,o.kq)("",!0)])),_:2},1032,["onClick"])))),128))])),_:1})])):(0,o.kq)("",!0),d.productItem.product_price!=d.productItem.product_final_price?((0,o.wg)(),(0,o.j4)(f,{key:3,lines:"none"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{slot:"start",src:c.giftOutline,color:"medium"},null,8,["src"]),(0,o.Wm)(_,{color:"medium"},{default:(0,o.w5)((()=>[(0,o.Uk)("Акция до "+(0,n.zw)(m.promoFinish),1)])),_:1}),(0,o.Wm)(_,{slot:"end",color:"success",style:{"font-size":"1.2em"}},{default:(0,o.w5)((()=>[(0,o.Uk)("-"+(0,n.zw)(m.promoPercent)+"%",1)])),_:1})])),_:1})):(0,o.kq)("",!0),(0,o.Wm)(f,{lines:"none"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{slot:"start",src:c.pricetagOutline,color:"medium"},null,8,["src"]),"порция"==d.productItem.product_unit?((0,o.wg)(),(0,o.j4)(_,{key:0,color:"medium"},{default:(0,o.w5)((()=>[(0,o.Uk)("Цена за "+(0,n.zw)(m.weight_in_gramms)+"г",1)])),_:1})):"порция мл"==d.productItem.product_unit?((0,o.wg)(),(0,o.j4)(_,{key:1,color:"medium"},{default:(0,o.w5)((()=>[(0,o.Uk)("Цена за "+(0,n.zw)(m.weight_in_gramms)+"мл",1)])),_:1})):((0,o.wg)(),(0,o.j4)(_,{key:2,color:"medium"},{default:(0,o.w5)((()=>[(0,o.Uk)("Цена за "+(0,n.zw)(d.productItem.product_unit),1)])),_:1})),(0,o.Wm)(_,{slot:"end",color:"primary",style:{"font-size":"1.2em"}},{default:(0,o.w5)((()=>[d.productItem.product_price!=d.productItem.product_final_price?((0,o.wg)(),(0,o.iD)("span",u,[(0,o._)("s",null,(0,n.zw)(d.productItem.product_price)+(0,n.zw)(t.$heap.state.currencySign),1),(0,o.Uk)("   ")])):(0,o.kq)("",!0),(0,o.Uk)(" "+(0,n.zw)(d.productItem.product_final_price)+(0,n.zw)(t.$heap.state.currencySign),1)])),_:1})])),_:1}),(0,o.Wm)(f,{lines:"none"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{slot:"start",src:c.cartOutline,color:"medium"},null,8,["src"]),m.inCart?((0,o.wg)(),(0,o.j4)(_,{key:0,color:"medium"},{default:(0,o.w5)((()=>[(0,o.Uk)("В корзине ("+(0,n.zw)(d.productItem.product_unit)+")",1)])),_:1})):((0,o.wg)(),(0,o.j4)(_,{key:1,color:"medium"},{default:(0,o.w5)((()=>[(0,o.Uk)("Не заказан")])),_:1})),(0,o.Wm)(D,{slot:"end",buttonLayout:"horizontal",display:"inline",productItem:d.productItem},null,8,["productItem"])])),_:1}),m.inCart?((0,o.wg)(),(0,o.j4)(f,{key:4,lines:"none"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{slot:"start",src:c.walletOutline,color:"medium"},null,8,["src"]),(0,o.Wm)(_,{color:"medium"},{default:(0,o.w5)((()=>[(0,o.Uk)("Итог")])),_:1}),(0,o.Wm)(_,{slot:"end",color:"medium",style:{"font-size":"1.2em"}},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(m.inCart)+(0,n.zw)(t.$heap.state.currencySign),1)])),_:1})])),_:1})):(0,o.kq)("",!0),null!=m.inCartComment?((0,o.wg)(),(0,o.j4)(f,{key:5,lines:"none"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{slot:"start",src:c.chatboxEllipsesOutline,color:"medium"},null,8,["src"]),(0,o.Wm)(U,{value:m.inCartComment,onChange:e[5]||(e[5]=t=>m.cartCommentUpdate(t.target.value)),placeholder:"заметка для продавца"},null,8,["value"])])),_:1})):(0,o.kq)("",!0)]})),_:1})):(0,o.kq)("",!0)])),_:1},8,["page-title","cartComponent"])}var d=i(9755),m=i.n(d),p=i(2008),h=i(8903),_=i(6964),g=i(7526),w=i(3991),k=i(7725),y=i(7782);const f={class:"ion-page"},I={key:0,class:"commentEdit"},v={key:0},W={key:1};function b(t,e,i,a,r,l){const s=(0,o.up)("ion-title"),u=(0,o.up)("ion-icon"),c=(0,o.up)("ion-item"),d=(0,o.up)("ion-toolbar"),m=(0,o.up)("ion-header"),p=(0,o.up)("ion-textarea"),h=(0,o.up)("ion-searchbar"),_=(0,o.up)("ion-skeleton-text"),g=(0,o.up)("ion-list"),w=(0,o.up)("ion-img"),k=(0,o.up)("ion-avatar"),y=(0,o.up)("ion-text"),b=(0,o.up)("ion-label"),$=(0,o.up)("ion-chip"),C=(0,o.up)("ion-note"),D=(0,o.up)("ion-content");return(0,o.wg)(),(0,o.iD)("div",f,[(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Wm)(c,{lines:"none"},{default:(0,o.w5)((()=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Ваши отзывы и реакции")])),_:1}),(0,o.Wm)(u,{icon:a.closeOutline,onClick:e[0]||(e[0]=t=>{l.closeModal()}),slot:"end",size:"large"},null,8,["icon"])])),_:1})])),_:1})])),_:1}),(0,o.Wm)(D,null,{default:(0,o.w5)((()=>{var i;return[!r.commentCurrent?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",I,[(0,o.Wm)(c,{lines:"none"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{rows:"1","auto-grow":"true",modelValue:r.commentCurrent,"onUpdate:modelValue":e[1]||(e[1]=t=>r.commentCurrent=t),placeholder:"добавьте отзыв",style:{border:"1px solid #ccc"}},null,8,["modelValue"]),(0,o.Wm)(u,{icon:a.send,slot:"end",color:"medium"},null,8,["icon"])])),_:1})])),(0,o.Wm)(h,{modelValue:r.query,"onUpdate:modelValue":e[2]||(e[2]=t=>r.query=t),placeholder:"поиск",debounce:200,onIonChange:e[3]||(e[3]=t=>l.listGet())},null,8,["modelValue"]),r.itemList?null!==(i=r.itemList)&&void 0!==i&&i.length?((0,o.wg)(),(0,o.j4)(g,{key:2},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.itemList,(e=>((0,o.wg)(),(0,o.iD)("div",{key:e.id},[0==e.is_sealed?((0,o.wg)(),(0,o.iD)("div",v,[(0,o.Wm)(c,{lines:"none"},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{slot:"start"},{default:(0,o.w5)((()=>[e.image_hash?((0,o.wg)(),(0,o.j4)(w,{key:0,src:`${t.$heap.state.hostname}image/get.php/${e.image_hash}.50.50.webp`},null,8,["src"])):(0,o.kq)("",!0)])),_:2},1024),(0,o.Wm)(y,{color:"medium"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(e.name),1)])),_:2},1024),(0,o.Wm)($,{color:"medium",slot:"end"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{src:a.thumbsUpSharp,color:1==e.reaction_is_like?"dark":"medium",onClick:t=>{l.itemReactionLike(e),e.reaction_is_like=1,e.reaction_is_dislike=0}},null,8,["src","color","onClick"]),(0,o.Wm)(b,{color:"medium"},{default:(0,o.w5)((()=>[(0,o.Uk)(" | ")])),_:1}),(0,o.Wm)(u,{src:a.thumbsDownSharp,color:1==e.reaction_is_dislike?"dark":"medium",onClick:t=>{l.itemReactionDislike(e),e.reaction_is_dislike=1,e.reaction_is_like=0}},null,8,["src","color","onClick"])])),_:2},1024)])),_:2},1024),(0,o.Wm)(c,{lines:"full",onClick:t=>l.itemCommentEdit(e)},{default:(0,o.w5)((()=>[e.reaction_comment?((0,o.wg)(),(0,o.j4)(y,{key:0},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(e.reaction_comment),1)])),_:2},1024)):((0,o.wg)(),(0,o.j4)($,{key:1,color:"medium"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{src:a.chatboxOutline},null,8,["src"]),(0,o.Wm)(b,null,{default:(0,o.w5)((()=>[(0,o.Uk)(" добавить отзыв")])),_:1})])),_:1}))])),_:2},1032,["onClick"])])):(0,o.kq)("",!0),1==e.is_sealed?((0,o.wg)(),(0,o.iD)("div",W,[(0,o.Wm)(c,{lines:e.reaction_comment?"none":"full"},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{slot:"start"},{default:(0,o.w5)((()=>[e.image_hash?((0,o.wg)(),(0,o.j4)(w,{key:0,src:`${t.$heap.state.hostname}image/get.php/${e.image_hash}.50.50.webp`},null,8,["src"])):(0,o.kq)("",!0)])),_:2},1024),(0,o.Wm)(y,{color:"medium"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(e.name),1)])),_:2},1024),(0,o.Wm)($,{color:"medium",slot:"end",onClick:t=>l.itemReactionDelete(e)},{default:(0,o.w5)((()=>[1==e.reaction_is_like?((0,o.wg)(),(0,o.j4)(u,{key:0,src:a.thumbsUpSharp,color:"dark"},null,8,["src"])):1==e.reaction_is_dislike?((0,o.wg)(),(0,o.j4)(u,{key:1,src:a.thumbsDownSharp,color:"dark"},null,8,["src"])):(0,o.kq)("",!0),1==e.is_sealed?((0,o.wg)(),(0,o.j4)(u,{key:2,icon:a.trashOutline,color:"danger"},null,8,["icon"])):(0,o.kq)("",!0)])),_:2},1032,["onClick"])])),_:2},1032,["lines"]),e.reaction_comment?((0,o.wg)(),(0,o.j4)(c,{key:0,lines:"full"},{default:(0,o.w5)((()=>[(0,o.Wm)(C,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(e.reaction_comment),1)])),_:2},1024)])),_:2},1024)):(0,o.kq)("",!0)])):(0,o.kq)("",!0)])))),128))])),_:1})):((0,o.wg)(),(0,o.j4)(g,{key:3},{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Uk)(" Ничего не найдено ")])),_:1})])),_:1})):((0,o.wg)(),(0,o.j4)(g,{key:1},{default:(0,o.w5)((()=>[((0,o.wg)(),(0,o.iD)(o.HY,null,(0,o.Ko)([0,1,2,3,4,5],(t=>(0,o._)("div",{key:t},[(0,o.Wm)(c,{lines:"none"},{default:(0,o.w5)((()=>[(0,o.Wm)(_,{style:{height:"35px",width:"40px","border-radius":"20px"},animated:""}),(0,o.Wm)(_,{style:{width:"100%",margin:"5px"},animated:""})])),_:1}),(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(_,{style:{width:"100%"},animated:""})])),_:1})]))),64))])),_:1}))]})),_:1})])}var $={props:["targetType","targetId"],components:{IonContent:_.W2,IonHeader:_.Gu,IonToolbar:_.sr,IonTitle:_.wd,IonIcon:_.gu,IonImg:_.Xz,IonList:_.q_,IonItem:_.Ie,IonSearchbar:_.VI,IonSkeletonText:_.CK,IonAvatar:_.BJ,IonChip:_.hM,IonLabel:_.Q$,IonNote:_.uN,IonTextarea:_.g2,IonText:_.yW,IonBackdrop:_.ql},setup(){return{closeOutline:h.fID,chatboxOutline:h.DMF,thumbsUpSharp:h._DJ,thumbsDownSharp:h.sbE,trashOutline:h.gtu,send:h.lWK}},data(){var t;const e=null!==(t=this.targetType)&&void 0!==t?t:"product";return{query:null,itemList:null,targetTypeLabel:e,targetTypeName:"",commentCurrent:null}},mounted(){this.listGet()},methods:{async listGet(){"product"==this.targetTypeLabel&&(this.itemTypeName="Товар",this.entriesGet())},async entriesGet(){const t={target_type:this.targetTypeLabel,target_id:this.targetId,search_query:this.query};try{const e=await m().post(`${this.$heap.state.hostname}Reaction/itemListGet`,t);this.itemList=e.map((t=>(t.name=`${t.entry_text}`,t.id=t.entry_id,t)))}catch{}},async itemReact(t){try{t.reaction_id?await m().post(`${this.$heap.state.hostname}Reaction/itemUpdate`,t):await m().post(`${this.$heap.state.hostname}Reaction/itemCreate`,t),this.$flash("Сохранено")}catch(o){var e,i;const t=null===o||void 0===o||null===(e=o.responseJSON)||void 0===e||null===(i=e.messages)||void 0===i?void 0:i.error;switch(t){case"notfound":break}return!1}},async itemReactionLike(t){var e,i;let o={is_like:1};null!==(e=t.reaction_id)&&void 0!==e&&e?o.reaction_id=t.reaction_id:null!==(i=t.entry_id)&&void 0!==i&&i&&(o.tagQuery=`entry:${t.entry_id}`),await this.itemReact(o)},async itemReactionDislike(t){var e,i;let o={is_dislike:1};null!==(e=t.reaction_id)&&void 0!==e&&e?o.reaction_id=t.reaction_id:null!==(i=t.entry_id)&&void 0!==i&&i&&(o.tagQuery=`entry:${t.entry_id}`),await this.itemReact(o)},async itemReactionComment(t,e){var i,o;let n={comment:e};null!==(i=t.reaction_id)&&void 0!==i&&i?n.reaction_id=t.reaction_id:null!==(o=t.entry_id)&&void 0!==o&&o&&(n.tagQuery=`entry:${t.entry_id}`),await this.itemReact(n)},async itemReactionDelete(t){if(confirm("Удалить отзыв?"))try{const e={reaction_id:t.reaction_id};await m().post(`${this.$heap.state.hostname}Reaction/itemDelete`,e),this.listGet()}catch(o){var e,i;const t=null===o||void 0===o||null===(e=o.responseJSON)||void 0===e||null===(i=e.messages)||void 0===i?void 0:i.error;switch(t){case"idle":break}return!1}},async itemCommentEdit(t){this.commentCurrent=t.reaction_comment+"-"},async itemCommentSave(){this.commentCurrent=null},closeModal(){_.Fy.dismiss()}}},C=i(3744);const D=(0,C.Z)($,[["render",b]]);var U=D;const x={class:"ion-page"};function z(t,e,i,a,r,l){const s=(0,o.up)("ion-icon"),u=(0,o.up)("ion-title"),c=(0,o.up)("ion-item"),d=(0,o.up)("ion-toolbar"),m=(0,o.up)("ion-text"),p=(0,o.up)("ion-header"),h=(0,o.up)("ion-skeleton-text"),_=(0,o.up)("ion-list"),g=(0,o.up)("ion-img"),w=(0,o.up)("ion-avatar"),k=(0,o.up)("ion-content");return(0,o.wg)(),(0,o.iD)("div",x,[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Wm)(c,{lines:"none"},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{icon:a.chatboxOutline,slot:"start"},null,8,["icon"]),(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Отзывы")])),_:1}),(0,o.Wm)(s,{icon:a.closeOutline,onClick:e[0]||(e[0]=t=>{l.closeModal()}),slot:"end",size:"large"},null,8,["icon"])])),_:1})])),_:1}),(0,o.Wm)(c,{lines:"none",button:"",detail:"true",onClick:e[1]||(e[1]=t=>l.commentAdd())},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{src:a.addOutline,slot:"start",color:"medium",size:"small"},null,8,["src"]),(0,o.Wm)(m,{color:"medium"},{default:(0,o.w5)((()=>[(0,o.Uk)("добавить отзыв")])),_:1})])),_:1})])),_:1}),(0,o.Wm)(k,null,{default:(0,o.w5)((()=>{var e;return[r.itemList?null!==(e=r.itemList)&&void 0!==e&&e.length?((0,o.wg)(),(0,o.j4)(_,{key:1},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.itemList,(e=>((0,o.wg)(),(0,o.iD)("div",{key:e.id},[(0,o._)("div",null,[(0,o.Wm)(c,{lines:"none"},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{slot:"start"},{default:(0,o.w5)((()=>[e.image_hash?((0,o.wg)(),(0,o.j4)(g,{key:0,src:`${t.$heap.state.hostname}image/get.php/${e.image_hash}.50.50.webp`},null,8,["src"])):(0,o.kq)("",!0)])),_:2},1024),(0,o.Wm)(m,{color:"medium"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(e.user_name),1)])),_:2},1024),(0,o.kq)("",!0)])),_:2},1024),(0,o.Wm)(c,{lines:"none"},{default:(0,o.w5)((()=>[(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(e.reaction_comment),1)])),_:2},1024)])),_:2},1024)])])))),128))])),_:1})):((0,o.wg)(),(0,o.j4)(_,{key:2},{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Uk)(" Ничего не найдено ")])),_:1})])),_:1})):((0,o.wg)(),(0,o.j4)(_,{key:0},{default:(0,o.w5)((()=>[((0,o.wg)(),(0,o.iD)(o.HY,null,(0,o.Ko)([0,1,2,3,4,5],(t=>(0,o._)("div",{key:t},[(0,o.Wm)(c,{lines:"none"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{style:{height:"35px",width:"40px","border-radius":"40px"},animated:""}),(0,o.Wm)(h,{style:{width:"40%"},animated:""})])),_:1}),(0,o.Wm)(c,{lines:"none"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{style:{width:"100%"},animated:""})])),_:1})]))),64))])),_:1}))]})),_:1})])}var j={props:["targetType","targetId","targetTitle"],components:{IonContent:_.W2,IonHeader:_.Gu,IonToolbar:_.sr,IonTitle:_.wd,IonIcon:_.gu,IonImg:_.Xz,IonList:_.q_,IonItem:_.Ie,IonSearchbar:_.VI,IonSkeletonText:_.CK,IonAvatar:_.BJ,IonChip:_.hM,IonLabel:_.Q$,IonNote:_.uN,IonTextarea:_.g2,IonText:_.yW},setup(){return{closeOutline:h.fID,chatboxOutline:h.DMF,thumbsUpSharp:h._DJ,thumbsDownSharp:h.sbE,trashOutline:h.gtu,ellipsisVertical:h.LHl,addOutline:h.s6O}},data(){var t;const e=null!==(t=this.targetType)&&void 0!==t?t:"product";return{query:null,itemList:null,targetTypeLabel:e,targetTypeName:""}},mounted(){this.listGet()},methods:{async listGet(){const t={tagQuery:`${this.targetTypeLabel}:${this.targetId}`,commentsOnly:1};try{this.itemList=await m().post(`${this.$heap.state.hostname}Reaction/listGet`,t)}catch{}},closeModal(){_.Fy.dismiss()},commentAdd(){_.Fy.dismiss("commentAdd")}}};const q=(0,C.Z)(j,[["render",z],["__scopeId","data-v-56d686a6"]]);var O=q,T={components:{ImageSliderComp:g.Z,CartAddButtons:w.Z,IonTextarea:_.g2,IonListHeader:_.yh,IonText:_.yW,IonIcon:_.gu,IonItem:_.Ie,IonChip:_.hM,IonLabel:_.Q$,IonList:_.q_,IonAccordion:_.We,IonAccordionGroup:_.eh,IonButton:_.YG,IonAvatar:_.BJ,IonImg:_.Xz},setup(){return{CartHeader:k.Z,compassOutline:h.gmD,cartOutline:h.Ox0,pricetagOutline:h.TuG,giftOutline:h._$o,walletOutline:h.S5P,chatboxEllipsesOutline:h._Pt,settingsOutline:h.C$N,layersOutline:h.Y1P,arrowRedoOutline:h.kY2,thumbsUpSharp:h._DJ,thumbsDownSharp:h.sbE,chevronDownOutline:h.Y$3}},data(){return{productId:this.$route.params.id,productItem:null,is_loading:0}},mounted(){this.getProduct()},computed:{categories(){var t,e,i,o,n,a;if(null===(t=this.productItem)||void 0===t||null===(e=t.member_of_groups)||void 0===e||!e.group_ids)return[];const r=null===(i=this.productItem)||void 0===i||null===(o=i.member_of_groups)||void 0===o?void 0:o.group_ids.split(","),l=null===(n=this.productItem)||void 0===n||null===(a=n.member_of_groups)||void 0===a?void 0:a.group_names.split(",");let s=[];for(let u in r)s.push({group_id:r[u],group_name:l[u]});return s},promoFinish(){try{return this.productItem.product_promo_finish.split(" ")[0].split("-").reverse().join(".")}catch{return null}},promoPercent(){return Math.round(100-this.productItem.product_final_price/this.productItem.product_price*100)},inCart(){const t=y.Z.cart.entryGet(this.productId);return t?t.data.entry_quantity*t.data.entry_price:0},inCartComment(){var t;const e=y.Z.cart.entryGet(this.productId);return e?null!==(t=e.data.entry_comment)&&void 0!==t?t:"":null},isAvailable(){return 1!=this.productItem.is_counted||this.productItem.product_quantity-this.productItem.product_quantity_reserved>0},weight_in_gramms(){return 1e3*this.productItem.product_weight},itemDescription(){var t,e;return null===(t=this.productItem)||void 0===t||null===(e=t.product_description)||void 0===e?void 0:e.replace(/<\/?[^>]+(>|$)/g,"").replace(/[\n\r]/g,"<br>")},itemCommentCount(){var t;return null!==(t=!this.productItem.reactionSummary.sum_comment)&&void 0!==t&&t?"":this.productItem.reactionSummary.sum_comment>1e3?Math.round(this.productItem.reactionSummary.sum_comment/100)/10+"k":this.productItem.reactionSummary.sum_comment}},methods:{async getProduct(){if(1!=this.is_loading){try{this.is_loading=1,this.productItem=await m().post(p.Z.state.hostname+"Product/itemGet",{product_id:this.productId}),this.productItem.reaction={reaction_id:33}}catch(i){var t,e;const o=null===i||void 0===i||null===(t=i.responseJSON)||void 0===t||null===(e=t.messages)||void 0===e?void 0:e.error;switch(o){case"notfound":this.$flash("Товар не найден"),this.$router.replace("/catalog");break}return!1}this.is_loading=0}},cartCommentUpdate(t){const e={product_id:this.productId,entry_comment:t};y.Z.cart.entryUpdate(e)},async itemShare(){try{const t=location.href;if(navigator.share){const e={title:`${this.$heap.state.settings.app_title} ${this.productItem.product_name}`,text:this.productItem.product_description,url:t};await navigator.share(e)}else await navigator.clipboard.writeText(t),this.$alert("Теперь вы можете поделиться ей с друзьями в социальных сетях или мессенджерах.","Ссылка на страницу скопирована")}catch(t){}},async reactionTargetPick(){const t=this.productId,e="product",i=await _.Fy.create({component:U,componentProps:{targetType:e,targetId:t},initialBreakpoint:.6,breakpoints:[.6,.75,1],handleBehavior:"cycle",canDissmiss:!0});i.present(),this.$topic.on("dismissModal",(()=>i.dismiss()));const o=await i.onDidDismiss();this.getProduct(),o.data},async reactionCommentView(){const t=this.productId,e="product",i=this.productItem.product_name,o=await _.Fy.create({component:O,componentProps:{targetType:e,targetId:t,targetTitle:i},initialBreakpoint:.6,breakpoints:[.6,.75,1],handleBehavior:"cycle",canDissmiss:!0});o.present(),this.$topic.on("dismissModal",(()=>o.dismiss()));const n=await o.onDidDismiss();"commentAdd"==(null===n||void 0===n?void 0:n.data)&&this.reactionTargetPick()}}};const L=(0,C.Z)(T,[["render",c]]);var S=L}}]);
//# sourceMappingURL=782.b0e92a46.js.map