"use strict";(self["webpackChunkblank"]=self["webpackChunkblank"]||[]).push([[332],{4332:function(t,l,e){e.r(l),e.d(l,{default:function(){return H}});var u=e(6252),n=e(3577);const a={key:0,class:"user-dashboard-header"},i=(0,u.Uk)("Пользователь"),r=(0,u.Uk)("Войти"),s=(0,u.Uk)("Мои адреса"),o=(0,u.Uk)("Мои заказы"),d=(0,u.Uk)("Выйти"),c=(0,u.Uk)("Администратор"),m=(0,u.Uk)("Редактирование страниц"),w=(0,u.Uk)("Курьер"),f={key:0},k=(0,u.Uk)("Смена активна"),_=(0,u.Uk)("Вы можете брать задания на доставку"),W=(0,u.Uk)("Завершить смену"),g={key:1},p=(0,u.Uk)("Смена закрыта"),y=(0,u.Uk)("Начните смену для начала работы"),h=(0,u.Uk)("Начать смену"),b={key:2},v=(0,u.Uk)("Выполняется задание"),O=(0,u.Uk)("В процессе доставки заказа"),U={key:3},S=(0,u.Uk)("Пока вы не курьер"),C=(0,u.Uk)("Подайте заявку, чтобы стать курьером"),I=(0,u.Uk)("Заполнить анкету"),Z=(0,u.Uk)("Анкета курьера");function j(t,l,e,j,$,q){const x=(0,u.up)("ion-img"),D=(0,u.up)("ion-avatar"),A=(0,u.up)("ion-label"),N=(0,u.up)("ion-icon"),z=(0,u.up)("router-link"),T=(0,u.up)("ion-item"),H=(0,u.up)("ion-thumbnail"),L=(0,u.up)("ion-list"),M=(0,u.up)("ion-item-divider"),B=(0,u.up)("ion-item-group"),F=(0,u.up)("ion-note"),J=(0,u.up)("ion-text"),X=(0,u.up)("ion-button"),E=(0,u.up)("base-layout");return(0,u.wg)(),(0,u.j4)(E,{"page-title":"Личный кабинет","page-default-back-link":"/home",errorMessage:t.error},{default:(0,u.w5)((()=>[q.isSignedIn?((0,u.wg)(),(0,u.iD)("div",a,[(0,u.Wm)(L,null,{default:(0,u.w5)((()=>[(0,u.Wm)(T,{lines:"full",class:"avatar-row"},{default:(0,u.w5)((()=>[(0,u.Wm)(D,{slot:"start"},{default:(0,u.w5)((()=>[$.user.user_avatar_name?((0,u.wg)(),(0,u.j4)(x,{key:0,src:t.$heap.state.hostname+"img/avatar/"+$.user.user_avatar_name+".png"},null,8,["src"])):(0,u.kq)("",!0)])),_:1}),(0,u.Wm)(A,null,{default:(0,u.w5)((()=>[(0,u.Uk)((0,n.zw)($.user.user_name),1)])),_:1}),(0,u.Wm)(A,{slot:"end"},{default:(0,u.w5)((()=>[(0,u.Wm)(z,{class:"section-button",to:"/user-edit",slot:"end"},{default:(0,u.w5)((()=>[(0,u.Wm)(N,{icon:j.settingsOutline},null,8,["icon"])])),_:1})])),_:1})])),_:1}),$.user.user_phone?((0,u.wg)(),(0,u.j4)(T,{key:0,lines:"full"},{default:(0,u.w5)((()=>[(0,u.Wm)(N,{slot:"start",icon:j.callOutline,color:"primary"},null,8,["icon"]),(0,u.Wm)(A,null,{default:(0,u.w5)((()=>[(0,u.Uk)((0,n.zw)($.user.user_phone),1)])),_:1})])),_:1})):(0,u.kq)("",!0),$.user.user_emailOutline&&""!==$.user.user_emailOutline?((0,u.wg)(),(0,u.j4)(T,{key:1},{default:(0,u.w5)((()=>[(0,u.Wm)(H,null,{default:(0,u.w5)((()=>[(0,u.Wm)(N,{icon:j.mailOutline},null,8,["icon"])])),_:1}),(0,u.Wm)(A,null,{default:(0,u.w5)((()=>[(0,u.Uk)((0,n.zw)($.user.user_emailOutline),1)])),_:1})])),_:1})):(0,u.kq)("",!0)])),_:1})])):(0,u.kq)("",!0),(0,u.Wm)(L,null,{default:(0,u.w5)((()=>[(0,u.Wm)(B,null,{default:(0,u.w5)((()=>[(0,u.Wm)(M,null,{default:(0,u.w5)((()=>[(0,u.Wm)(A,null,{default:(0,u.w5)((()=>[i])),_:1})])),_:1}),q.isSignedIn?(0,u.kq)("",!0):((0,u.wg)(),(0,u.j4)(T,{key:0,lines:"full",button:"",detail:"",onClick:l[0]||(l[0]=l=>t.$router.push("sign-in"))},{default:(0,u.w5)((()=>[(0,u.Wm)(N,{icon:j.logIn,slot:"start",color:"primary"},null,8,["icon"]),(0,u.Wm)(A,null,{default:(0,u.w5)((()=>[r])),_:1})])),_:1})),(0,u.Wm)(T,{lines:"full",button:"",detail:"",onClick:l[1]||(l[1]=l=>t.$router.push("user-addresses"))},{default:(0,u.w5)((()=>[(0,u.Wm)(N,{icon:j.locationOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,u.Wm)(A,null,{default:(0,u.w5)((()=>[s])),_:1})])),_:1}),(0,u.Wm)(T,{lines:"full",button:"",detail:"",onClick:l[2]||(l[2]=l=>t.$router.push("order-list"))},{default:(0,u.w5)((()=>[(0,u.Wm)(N,{icon:j.cartOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,u.Wm)(A,null,{default:(0,u.w5)((()=>[o])),_:1})])),_:1}),q.isSignedIn?((0,u.wg)(),(0,u.j4)(T,{key:1,onClick:q.signOut,lines:"full",button:"",detail:""},{default:(0,u.w5)((()=>[(0,u.Wm)(N,{icon:j.exitOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,u.Wm)(A,null,{default:(0,u.w5)((()=>[d])),_:1})])),_:1},8,["onClick"])):(0,u.kq)("",!0),q.isAdmin?((0,u.wg)(),(0,u.j4)(B,{key:2},{default:(0,u.w5)((()=>[(0,u.Wm)(M,null,{default:(0,u.w5)((()=>[(0,u.Wm)(A,null,{default:(0,u.w5)((()=>[c])),_:1})])),_:1}),(0,u.Wm)(T,{onClick:l[3]||(l[3]=l=>t.$router.push("text-list")),lines:"full",button:"",detail:""},{default:(0,u.w5)((()=>[(0,u.Wm)(N,{icon:j.documentTextOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,u.Wm)(A,null,{default:(0,u.w5)((()=>[m])),_:1})])),_:1})])),_:1})):(0,u.kq)("",!0)])),_:1}),q.isSignedIn?((0,u.wg)(),(0,u.j4)(B,{key:0},{default:(0,u.w5)((()=>[(0,u.Wm)(M,null,{default:(0,u.w5)((()=>[(0,u.Wm)(A,null,{default:(0,u.w5)((()=>[w])),_:1})])),_:1}),"ready"==$.courierStatus?((0,u.wg)(),(0,u.iD)("div",f,[(0,u.Wm)(T,{style:{"--background":"var(--ion-color-success-tint)"},lines:"none"},{default:(0,u.w5)((()=>[(0,u.Wm)(J,null,{default:(0,u.w5)((()=>[(0,u.Wm)(A,null,{default:(0,u.w5)((()=>[k])),_:1}),(0,u.Wm)(F,null,{default:(0,u.w5)((()=>[_])),_:1})])),_:1})])),_:1}),(0,u.Wm)(T,{style:{"--background":"var(--ion-color-success-tint)"},button:"",lines:"full",onClick:l[4]||(l[4]=t=>q.courierStatusSet("idle"))},{default:(0,u.w5)((()=>[(0,u.Wm)(N,{src:"./assets/icon/delivery-man.svg",slot:"start"}),(0,u.Wm)(X,{slot:"end"},{default:(0,u.w5)((()=>[W])),_:1})])),_:1})])):"idle"==$.courierStatus?((0,u.wg)(),(0,u.iD)("div",g,[(0,u.Wm)(T,{style:{"--background":"var(--ion-color-warning-tint)"},lines:"none"},{default:(0,u.w5)((()=>[(0,u.Wm)(J,null,{default:(0,u.w5)((()=>[(0,u.Wm)(A,null,{default:(0,u.w5)((()=>[p])),_:1}),(0,u.Wm)(F,null,{default:(0,u.w5)((()=>[y])),_:1})])),_:1})])),_:1}),(0,u.Wm)(T,{style:{"--background":"var(--ion-color-warning-tint)"},button:"",lines:"full",onClick:l[5]||(l[5]=t=>q.courierStatusSet("ready"))},{default:(0,u.w5)((()=>[(0,u.Wm)(N,{src:"./assets/icon/delivery-man.svg",slot:"start"}),(0,u.Wm)(X,{slot:"end"},{default:(0,u.w5)((()=>[h])),_:1})])),_:1})])):"busy"==$.courierStatus?((0,u.wg)(),(0,u.iD)("div",b,[(0,u.Wm)(T,{style:{"--background":"var(--ion-color-warning-tint)"},lines:"none"},{default:(0,u.w5)((()=>[(0,u.Wm)(J,null,{default:(0,u.w5)((()=>[(0,u.Wm)(A,null,{default:(0,u.w5)((()=>[v])),_:1}),(0,u.Wm)(F,null,{default:(0,u.w5)((()=>[O])),_:1})])),_:1})])),_:1}),(0,u.Wm)(T,{style:{"--background":"var(--ion-color-warning-tint)"},button:"",lines:"full"},{default:(0,u.w5)((()=>[(0,u.Wm)(N,{src:"./assets/icon/delivery-man.svg",slot:"start"})])),_:1})])):(0,u.kq)("",!0),"notcourier"==$.courierStatus?((0,u.wg)(),(0,u.iD)("div",U,[(0,u.Wm)(T,{lines:"none"},{default:(0,u.w5)((()=>[(0,u.Wm)(J,null,{default:(0,u.w5)((()=>[(0,u.Wm)(A,null,{default:(0,u.w5)((()=>[S])),_:1}),(0,u.Wm)(F,null,{default:(0,u.w5)((()=>[C])),_:1})])),_:1})])),_:1}),(0,u.Wm)(T,{button:"",lines:"full",onClick:l[6]||(l[6]=l=>t.$router.push("courier-dashboard"))},{default:(0,u.w5)((()=>[(0,u.Wm)(N,{src:"./assets/icon/delivery-man.svg",slot:"start"}),(0,u.Wm)(X,{slot:"end",color:"light"},{default:(0,u.w5)((()=>[I])),_:1})])),_:1})])):((0,u.wg)(),(0,u.j4)(T,{key:4,lines:"full",button:"",detail:"",onClick:l[7]||(l[7]=l=>t.$router.push("courier-dashboard"))},{default:(0,u.w5)((()=>[(0,u.Wm)(N,{icon:j.documentTextOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,u.Wm)(A,null,{default:(0,u.w5)((()=>[Z])),_:1})])),_:1}))])),_:1})):(0,u.kq)("",!0)])),_:1})])),_:1},8,["errorMessage"])}var $=e(3455),q=e(8903),x=e(351),D=e(9042),A=e(2008),N={name:"UserDashboard",components:{IonIcon:$.gu,IonAvatar:$.BJ},setup(){return{settingsOutline:q.C$N,logIn:q.Ib8,exitOutline:q.NmL,locationOutline:q.Iv7,heartOutline:q.gjX,helpCircle:q.pvH,callOutline:q.H7N,mailOutline:q.xOl,cardOutline:q.pvm,cartOutline:q.Ox0,notifications:q.N9d,chevronForwardOutline:q.Dji,documentTextOutline:q.L82}},data(){return{user:A.Z.state.user,courierStatus:x.Z.courier.status}},created(){const t=this;D.Z.on("courierStatusChange",(l=>{t.courierStatus=l}))},computed:{isSignedIn(){return A.Z.state.user.user_id>-1},isAdmin(){return x.Z.isAdmin()}},methods:{async signOut(){await x.Z.signOut(),this.user=await x.Z.get()},async courierStatusSet(t){try{await x.Z.courier.updateStatus(t)}catch(l){409==l.status&&this.$flash("Анкета удалена или не активна")}}},watch:{$route(t,l){t.path!=l.path&&(this.user=A.Z.state.user)},courierStatus(t){"ready"==t||"busy"==t?x.Z.geo.trackingStart():x.Z.geo.trackingStop()}}},z=e(3744);const T=(0,z.Z)(N,[["render",j],["__scopeId","data-v-ec7591b0"]]);var H=T}}]);
//# sourceMappingURL=332.116f89fe.js.map