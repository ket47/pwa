{"version":3,"file":"js/5501.17127454.js","mappings":"0KAQYA,SAAA,I,GAWNC,EAAAA,EAAAA,IAEM,OAFDC,MAAA,mDAAiD,gHAEtD,G,GAGwED,EAAAA,EAAAA,IAA0C,KAAvCC,MAAA,gBAAmB,oBAAgB,G,2QAxBpHC,EAAAA,EAAAA,IAAAC,EAAAA,GAAA,OACEC,EAAAA,EAAAA,IAKaC,EAAA,MANfC,SAAAC,EAAAA,EAAAA,KAEM,IAGc,EAHdH,EAAAA,EAAAA,IAGcI,EAAA,MALpBF,SAAAC,EAAAA,EAAAA,KAGQ,IAA4C,EAA5CH,EAAAA,EAAAA,IAA4CK,EAAA,MAHpDH,SAAAC,EAAAA,EAAAA,KAGmB,IAAqB,EAHxCG,EAAAA,EAAAA,IAGmB,4BAHnBC,EAAA,KAIQP,EAAAA,EAAAA,IAAyFQ,EAAA,CAA/EC,KAAK,MAAOC,QAAKC,EAAA,KAAAA,EAAA,GAAAC,IAAEC,EAAAC,YAAY,GAAIC,KAAMC,EAAAC,aAAcC,KAAK,S,oBAJ9EX,EAAA,OAAAA,EAAA,KAOEP,EAAAA,EAAAA,IAoBcmB,EAAA,MA3BhBjB,SAAAC,EAAAA,EAAAA,KAQM,IAUO,EAVPP,EAAAA,EAAAA,IAUO,OAVPwB,EAUO,EATLpB,EAAAA,EAAAA,IAOWqB,EAAA,MAhBnBnB,SAAAC,EAAAA,EAAAA,KAUU,IAEW,EAFXH,EAAAA,EAAAA,IAEWsB,EAAA,MAZrBpB,SAAAC,EAAAA,EAAAA,KAWY,IAAwH,EAAxHH,EAAAA,EAAAA,IAAwHuB,EAAA,CAA7GC,MAAM,qBAAqB,kBAAgB,UAXlEC,WAWqFC,EAAAC,UAXrF,sBAAAhB,EAAA,KAAAA,EAAA,GAAAC,GAWqFc,EAAAC,UAASf,GAAEgB,YAAY,cAAcC,SAAA,I,0BAX1HtB,EAAA,KAaUP,EAAAA,EAAAA,IAEWsB,EAAA,MAfrBpB,SAAAC,EAAAA,EAAAA,KAcY,IAA2H,EAA3HH,EAAAA,EAAAA,IAA2HuB,EAAA,CAAhHC,MAAM,UAAU,kBAAgB,UAdvDC,WAc0EC,EAAAI,SAd1E,sBAAAnB,EAAA,KAAAA,EAAA,GAAAC,GAc0Ec,EAAAI,SAAQlB,GAAEgB,YAAY,uC,0BAdhGrB,EAAA,OAAAA,EAAA,KAiBQP,EAAAA,EAAAA,IAAqF+B,EAAA,CAAxErB,QAAKC,EAAA,KAAAA,EAAA,GAAAC,GAAEC,EAAAmB,iBAAiBC,OAAO,S,CAjBpD/B,SAAAC,EAAAA,EAAAA,KAiB4D,IAAoB,EAjBhFG,EAAAA,EAAAA,IAiB4D,2BAjB5DC,EAAA,MAmBM2B,GAIAtC,EAAAA,EAAAA,IAEM,OAFDC,MAAA,qCAAuCa,QAAKC,EAAA,KAAAA,EAAA,GAAAC,GAAEuB,EAAAC,QAAQC,KAAK,oB,EAvBtE/B,EAAAA,EAAAA,IAuByF,2EACXgC,OAxB9E/B,EAAA,K,+CAiDA,GACEgC,WAAY,CACZC,WAAU,KACVC,UAAS,KACTC,SAAQ,KACRC,WAAU,KACVC,QAAO,KACPC,QAAO,KACPC,SAAQ,KACRC,UAAS,KACTC,QAAOA,EAAAA,IAEPC,MAAO,CAAE,SACTC,KAAAA,GACE,MAAO,CAACjC,aAAYA,EAAAA,IACtB,EACAkC,IAAAA,GACE,MAAO,CACLrB,SAAU,GACVH,UAAUyB,KAAKC,MAEnB,EACAC,QAAS,CACPxC,UAAAA,GACE,OAAOyC,EAAAA,GAAgBC,SACzB,EACA,mBAAMxB,GACJ,GAAIoB,KAAKzB,UAAU8B,QAAQ,MAAM,IAAIC,OAAO,GAE1C,YADAC,MAAM,gCAGR,IAAIP,KAAKtB,SAEP,YADA6B,MAAM,oCAGR,IAAIC,EAAc,CAChBC,WAAY,IAAIT,KAAKzB,UAAU8B,QAAQ,MAAM,IAC7CK,UAAYV,KAAKtB,UAEnB,UACQiC,IAAAA,KAAY,GAAGX,KAAKY,MAAMC,MAAMC,6BAA8BN,GACpER,KAAKe,OAAO,qCAAqCf,KAAKzB,cACtDyB,KAAKtC,YACP,CAAE,MAAMsD,GAAI,IAAAC,EAAAC,EACV,MAAMC,EAAW,OAAHH,QAAG,IAAHA,GAAiB,QAAdC,EAAHD,EAAKI,oBAAY,IAAAH,GAAU,QAAVC,EAAjBD,EAAmBI,gBAAQ,IAAAH,OAAxB,EAAHA,EAA6BI,MAC/B,iBAATH,EACDnB,KAAKe,OAAO,6BAA6Bf,KAAKzB,wBAAwByB,KAAKtB,uBAE3EsB,KAAKe,OAAO,iCAEhB,CACF,GAEFQ,MAAAA,GACEvB,KAAKwB,OAAOC,GAAG,gBAAe,KAC5BzB,KAAKtC,YAAY,GAErB,G,UCrGF,MAAMgE,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O,oHCWUC,WAAA,I,GAGOnF,MAAA,oE,GAgBqF,mB,GAI3C,mB,GAgBG,mB,oXAnD5DoF,EAAAA,EAAAA,IA2EcC,EAAA,CA3ED,aAAW,iBAAiBC,oBAAoB,S,CAN/DjF,SAAAC,EAAAA,EAAAA,KAOI,IASW,CATKgC,EAAA6B,MAAMC,MAAMmB,KAAKC,QAAO,eAAxCJ,EAAAA,EAAAA,IASWK,EAAA,CAhBfC,IAAA,EAOgD1F,MAAA,sD,CAPhDK,SAAAC,EAAAA,EAAAA,KAQM,IAIkB,EAJlBH,EAAAA,EAAAA,IAIkBwF,EAAA,MAZxBtF,SAAAC,EAAAA,EAAAA,KASQ,IAEiB,EAFjBH,EAAAA,EAAAA,IAEiByF,EAAA,CAFDC,MAAM,WAAS,CATvCxF,SAAAC,EAAAA,EAAAA,KAUU,IAA8B,EAVxCG,EAAAA,EAAAA,KAAAqF,EAAAA,EAAAA,IAUYxD,EAAA6B,MAAMC,MAAMmB,KAAKtB,WAAW,KAAC6B,EAAAA,EAAAA,IAAExD,EAAA6B,MAAMC,MAAMmB,KAAKQ,cAAc,KAACD,EAAAA,EAAAA,IAAExD,EAAA6B,MAAMC,MAAMmB,KAAKS,iBAAe,MAV7GtF,EAAA,OAAAA,EAAA,KAaMP,EAAAA,EAAAA,IAEmB8F,EAAA,MAfzB5F,SAAAC,EAAAA,EAAAA,KAawB,IAC0B,EAdlDG,EAAAA,EAAAA,IAawB,gDAC0BV,EAAAA,EAAAA,IAAsC,UAAA+F,EAAAA,EAAAA,IAAjCxD,EAAA6B,MAAMC,MAAMmB,KAAKvB,YAAU,MAdlFtD,EAAA,OAAAA,EAAA,MAAAwF,EAAAA,EAAAA,IAAA,QAkBInG,EAAAA,EAAAA,IA8DO,OA9DPwB,EA8DO,EA7DHpB,EAAAA,EAAAA,IAyCWqB,EAAA,MA5DnBnB,SAAAC,EAAAA,EAAAA,KAoBU,IAuBW,EAvBXH,EAAAA,EAAAA,IAuBWsB,EAAA,CAvBD0E,MAAM,QAAM,CApBhC9F,SAAAC,EAAAA,EAAAA,KAqBY,IAkBM,EAlBNP,EAAAA,EAAAA,IAkBM,MAlBNsC,EAkBM,EAjBJtC,EAAAA,EAAAA,IAEM,aADFI,EAAAA,EAAAA,IAAuEuB,EAAA,CAA5D0E,SAAA,GAASzE,MAAM,MAAM0E,eAAe,W,CAvBjEhG,SAAAC,EAAAA,EAAAA,KAuB2E,IAAE,EAvB7EG,EAAAA,EAAAA,IAuB2E,SAvB3EC,EAAA,OAyBcX,EAAAA,EAAAA,IAaM,aAZFI,EAAAA,EAAAA,IAUauB,EAAA,CApC/BE,WA2B6BC,EAAAmC,WA3B7B,sBAAAlD,EAAA,KAAAA,EAAA,GAAAC,GA2B6Bc,EAAAmC,WAAUjD,GAClBuF,YAASxF,EAAA,KAAAA,EAAA,GAAAC,GAAEC,EAAAuF,eACZC,KAAK,QACLC,KAAK,MACLC,UAAU,MACV3E,YAAY,iBACZC,SAAA,GACAL,MAAM,qBAAqB0E,eAAe,UAC1CM,aAAa,gB,wBAEfxG,EAAAA,EAAAA,IAAuIyG,EAAA,CAA7Hf,MAAM,SAASjF,KAAK,U,CArChDP,SAAAC,EAAAA,EAAAA,KAqCyD,IAAqF,WAArFP,EAAAA,EAAAA,IAAqF,IAArF0C,EAA0D,0BAAuB,aAArEzB,EAAA6F,YAA2B,GAAbhF,EAAAiF,gBArCnFpG,EAAA,SAwCYP,EAAAA,EAAAA,IAEWyG,EAAA,CAFDf,MAAM,SAASjF,KAAK,U,CAxC1CP,SAAAC,EAAAA,EAAAA,KAyCc,IAAqF,WAArFP,EAAAA,EAAAA,IAAqF,IAArFgH,EAA0D,0BAAuB,aAArE/F,EAAA6F,YAA2B,GAAbhF,EAAAiF,gBAzCxCpG,EAAA,OAAAA,EAAA,KA6CUP,EAAAA,EAAAA,IAcWsB,EAAA,CAdD0E,MAAM,QAAM,CA7ChC9F,SAAAC,EAAAA,EAAAA,KA8CY,IASa,EATbH,EAAAA,EAAAA,IASauB,EAAA,CAvDzBE,WA+CuBC,EAAAmF,UA/CvB,sBAAAlG,EAAA,KAAAA,EAAA,GAAAC,GA+CuBc,EAAAmF,UAASjG,GAClByF,KAAK,WACLC,KAAK,WACLQ,YAAY,MACZlF,YAAY,6BACZC,SAAA,GACAL,MAAM,8BAA8B0E,eAAe,UACnDM,aAAa,oB,wBAEfxG,EAAAA,EAAAA,IAEWyG,EAAA,CAFDf,MAAM,SAASjF,KAAK,U,CAxD1CP,SAAAC,EAAAA,EAAAA,KAyDc,IAA6G,WAA7GP,EAAAA,EAAAA,IAA6G,IAA7GmH,EAA6D,+CAA4C,aAA7FlG,EAAAmG,eAA8B,GAAbtF,EAAAiF,gBAzD3CpG,EAAA,OAAAA,EAAA,OAAAA,EAAA,KA6DMP,EAAAA,EAAAA,IAkBWiH,EAAA,MA/EjB/G,SAAAC,EAAAA,EAAAA,KA8DQ,IAIU,EAJVH,EAAAA,EAAAA,IAIUkH,EAAA,CAJD,oBAAa,CA9D9BhH,SAAAC,EAAAA,EAAAA,KA+DU,IAEU,EAFVH,EAAAA,EAAAA,IAEUmH,EAAA,MAjEpBjH,SAAAC,EAAAA,EAAAA,KAgEY,IAA+D,EAA/DH,EAAAA,EAAAA,IAA+D+B,EAAA,CAAlDrB,QAAOG,EAAAuG,SAAUnF,OAAO,S,CAhEjD/B,SAAAC,EAAAA,EAAAA,KAgEyD,IAAK,EAhE9DG,EAAAA,EAAAA,IAgEyD,YAhEzDC,EAAA,G,kBAAAA,EAAA,OAAAA,EAAA,KAoEQP,EAAAA,EAAAA,IAIUkH,EAAA,CAJD,oBAAa,CApE9BhH,SAAAC,EAAAA,EAAAA,KAqEU,IAEU,EAFVH,EAAAA,EAAAA,IAEUmH,EAAA,MAvEpBjH,SAAAC,EAAAA,EAAAA,KAsEY,IAAuH,EAAvHH,EAAAA,EAAAA,IAAuH+B,EAAA,CAA3G2D,MAAM,QAAQzD,OAAO,QAASvB,QAAKC,EAAA,KAAAA,EAAA,GAAAC,GAAEuB,EAAAC,QAAQC,KAAK,CAADgF,KAAA,oB,CAtEzEnH,SAAAC,EAAAA,EAAAA,KAsEoG,IAAkB,EAtEtHG,EAAAA,EAAAA,IAsEoG,yBAtEpGC,EAAA,OAAAA,EAAA,OAAAA,EAAA,KA0EQP,EAAAA,EAAAA,IAIUkH,EAAA,CAJD,oBAAa,CA1E9BhH,SAAAC,EAAAA,EAAAA,KA2EU,IAEU,EAFVH,EAAAA,EAAAA,IAEUmH,EAAA,MA7EpBjH,SAAAC,EAAAA,EAAAA,KA4Ec,IAA6F,EAA7FH,EAAAA,EAAAA,IAA6F+B,EAAA,CAAhFrB,QAAOG,EAAAyG,gBAAiB5B,MAAM,QAAQzD,OAAO,S,CA5ExE/B,SAAAC,EAAAA,EAAAA,KA4EgF,IAAc,EA5E9FG,EAAAA,EAAAA,IA4EgF,qBA5EhFC,EAAA,G,kBAAAA,EAAA,OAAAA,EAAA,OAAAA,EAAA,SAAAA,EAAA,G,4CAwGA,GACEgC,WAAW,CACXgF,OAAM,KACNzE,SAAQ,KACR0E,OAAM,KACNC,QAAO,KACP1E,UAAS,KACT2E,QAAO,KACPC,QAAO,KACPC,cAAa,KACbC,aAAY,KACZC,eAAc,KACdlF,QAAO,KACPC,QAAOA,EAAAA,IAEPM,IAAAA,GACE,MAAO,CACLwD,WAAW,EACXE,UAAU,KACVhD,WAAW,KACXkE,kBAAkB,IAClBC,WAAW,EAEf,EACAC,SAAU,CACRvB,UAAAA,GAAa,IAAAwB,EACX,OAAoD,KAA9B,QAAfA,EAAA9E,KAAKS,kBAAU,IAAAqE,OAAA,EAAfA,EAAiBzE,QAAQ,MAAM,IAAIC,OAC5C,EACAsD,aAAAA,GAAgB,IAAAmB,EACd,OAAqB,QAAdA,EAAA/E,KAAKyD,iBAAS,IAAAsB,OAAA,EAAdA,EAAgBzE,SAAU,CACnC,GAEF0E,OAAAA,GAAS,IAAAC,EACP,MAAMC,EAAkBC,KAAKC,MAA6B,QAAxBH,EAACI,aAAaC,kBAAU,IAAAL,EAAAA,EAAE,MACxDC,GAAqBA,EAAkBzE,aACvCT,KAAKS,WAAWyE,EAAkBzE,WAClCT,KAAKgD,eAELkC,GAAqBA,EAAkBzB,YACvCzD,KAAKyD,UAAUyB,EAAkBzB,UAEvC,EACAvD,QAAQ,CACN,cAAM8D,GAEJ,GADAhE,KAAKuD,WAAY,GACbvD,KAAKsD,aAAetD,KAAK4D,cAC3B,OAAO,EAET,IAAIpD,EAAc,CAChBC,WAAYT,KAAK2E,kBAAkB3E,KAAKS,WACxCgD,UAAWzD,KAAKyD,UAChB8B,kBAAmBvF,KAAKyD,WAE1B,UACQ+B,EAAAA,EAAKC,OAAOjF,SACZgF,EAAAA,EAAKE,MACXC,EAAAA,EAAOC,IAAI,EACb,CAAE,MAAM5E,GACN,MAAM6E,EAAU7E,EAAII,aACd0E,EAAeD,EAAUxE,SAASC,MACxC,OAAOwE,GACL,IAAK,iBACH9F,KAAKe,OAAO,iDACZ,MACF,IAAK,kBACHf,KAAKe,OAAO,mBACZ,MACF,IAAK,mBACHf,KAAKe,OAAO,sDACZ,MACF,IAAK,kBACHf,KAAKe,OAAO,oDACZ,MACF,IAAK,wBACHf,KAAKe,OAAO,iCAEZf,KAAK+F,cACL,MACF,QACE/F,KAAKe,OAAO,8BAElB,CACF,EACAiC,WAAAA,GACOhD,KAAKS,aACRT,KAAKS,WAAW,IAElB,IACE,IAAIA,EAAWT,KAAKS,WAAWJ,QAAQ,MAAM,IAC1CI,EAAWH,OAAO,KACnBG,EAAWA,EAAWuF,UAAUvF,EAAWH,OAAO,KAEpDN,KAAKS,WAAWA,CAClB,CAAE,MAAY,CAChB,EACA,qBAAMyD,GAAkB,IAAA+B,EAAAC,EACtBlG,KAAK4E,WAAY,EACjB,MAAM3E,GAA6B,QAAvBgG,EAACjG,KAAK2E,yBAAiB,IAAAsB,EAAAA,EAAE,KAAoB,QAAlBC,EAAGlG,KAAKS,kBAAU,IAAAyF,EAAAA,EAAE,IACrDC,QAAchG,EAAAA,GACjBiG,OAAO,CACNC,UAAWC,EAAAA,EACXC,eAAgB,CAACtG,SACjBuG,kBAAmB,GACnBC,YAAa,CAAC,GAAK,OAEvB,OAAON,EAAMO,SACf,EACAX,WAAAA,GAIE,IACE/F,KAAKY,MAAMC,MAAMmB,KAAK2E,cAAc3G,KAAK2E,kBAAkB3E,KAAKS,WAChET,KAAK4G,IAAI,qBAEX,CAAE,MACA5G,KAAKe,OAAO,0CACd,CACF,I,UCvNJ,MAAMW,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://Tezkel/./src/components/UserPasswordReset.vue","webpack://Tezkel/./src/components/UserPasswordReset.vue?ef19","webpack://Tezkel/./src/views/UserSignIn.vue","webpack://Tezkel/./src/views/UserSignIn.vue?e01c"],"sourcesContent":["<template>\r\n  <ion-header>\r\n      <ion-toolbar>\r\n        <ion-title>Восстановление пароля</ion-title>\r\n        <ion-icon slot=\"end\" @click=\"closeModal();\" :icon=\"closeOutline\" size=\"large\"></ion-icon>\r\n      </ion-toolbar>\r\n  </ion-header>\r\n  <ion-content>\r\n      <form validate>\r\n        <ion-list>\r\n          <ion-item>\r\n            <ion-input label=\"Ваш номер телефона\" label-placement=\"stacked\" v-model=\"userphone\" placeholder=\"Ваш телефон\" required/>\r\n          </ion-item>\r\n          <ion-item>\r\n            <ion-input label=\"Ваш ник\" label-placement=\"stacked\" v-model=\"username\" placeholder=\"Имя, указанное вами при регистрации\"/>\r\n          </ion-item>\r\n        </ion-list>\r\n        <ion-button @click=\"passwordReset()\" expand=\"block\">Создать новый пароль</ion-button>\r\n      </form>\r\n      <div style=\"padding: 15px;font-size:0.8em;color:#999\">\r\n        Рекомендуем сначала проверить СМС сообщение с паролем, которое было выслано вам при регистрации в сервисе.\r\n      </div>\r\n\r\n      <div style=\"padding: 15px;font-size:0.8em\" @click=\"$router.push('/page/contacts')\">\r\n        Если у вас возникли сложности с восстановлением пароля, обращайтесь в <u style=\"color:blue\">службу поддержки</u>\r\n      </div>\r\n      \r\n  </ion-content>\r\n</template>\r\n\r\n<script>\r\nimport { \r\n  IonContent, \r\n  IonHeader, \r\n  IonTitle, \r\n  IonToolbar, \r\n  IonList, \r\n  IonItem,\r\n  IonInput,\r\n  IonButton,\r\n  IonIcon,\r\n\r\n  modalController \r\n}                   from '@ionic/vue';\r\nimport {\r\n    closeOutline\r\n}                   from 'ionicons/icons';\r\nimport jQuery       from \"jquery\";\r\n\r\nexport default {\r\n  components: {\r\n  IonContent, \r\n  IonHeader, \r\n  IonTitle, \r\n  IonToolbar, \r\n  IonList, \r\n  IonItem,\r\n  IonInput,\r\n  IonButton,\r\n  IonIcon,\r\n  },\r\n  props: [ 'phone' ],\r\n  setup(){\r\n    return {closeOutline}\r\n  },\r\n  data() {\r\n    return {\r\n      username: '',\r\n      userphone:this.phone\r\n    }\r\n  },\r\n  methods: {\r\n    closeModal(){\r\n      return modalController.dismiss()\r\n    },\r\n    async passwordReset(){\r\n      if( this.userphone.replace(/\\D/g,\"\").length<11 ){\r\n        alert(\"Проверьте ваш номер телефона\")\r\n        return \r\n      }\r\n      if(!this.username){\r\n        alert(\"Введите ваше имя при регистрации\")\r\n        return \r\n      }\r\n      let requestData = {\r\n        user_phone: '+'+this.userphone.replace(/\\D/g,\"\"),\r\n        user_name:  this.username\r\n      }\r\n      try{\r\n        await jQuery.post(`${this.$heap.state.hostname}User/passwordReset`, requestData)\r\n        this.$flash(`Ваш новый пароль выслан на номер '${this.userphone}'`)\r\n        this.closeModal()\r\n      } catch(err){\r\n        const message=err?.responseJSON?.messages?.error\r\n        if(message=='user_notfound'){\r\n          this.$flash(`Пользователь с телефоном '${this.userphone}' и именем '${this.username}' не найден`)\r\n        }else{\r\n          this.$flash(`Не удалось восстановить пароль`)\r\n        }\r\n      }\r\n    },\r\n  },\r\n  mouted(){\r\n    this.$topic.on('dismissModal',()=>{\r\n      this.closeModal()\r\n    })\r\n  }\r\n};\r\n</script>","import { render } from \"./UserPasswordReset.vue?vue&type=template&id=0b07e06e\"\nimport script from \"./UserPasswordReset.vue?vue&type=script&lang=js\"\nexport * from \"./UserPasswordReset.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<style scoped>\n  ion-input,ion-select{\n    border-bottom: 1px solid var(--ion-color-primary-tint);\n  }\n</style>\n<template>\n  <base-layout page-title=\"Вход в систему\" pageDefaultBackLink=\"/user\">\n    <ion-card v-if=\"$heap.state.user.user_id>0\" style=\"background-color:var(--ion-color-success-tint)\">\n      <ion-card-header>\n        <ion-card-title color=\"primary\">\n          {{$heap.state.user.user_name}} {{$heap.state.user.user_surname}} {{$heap.state.user.user_middlename}}\n        </ion-card-title>\n      </ion-card-header>\n      <ion-card-content>\n        Вы уже вошли в систему с номером телефона <b>{{$heap.state.user.user_phone}}</b>\n      </ion-card-content>\n    </ion-card>\n\n    <form novalidate>\n        <ion-list>\n          <ion-item lines=\"full\">\n            <div style=\"display:grid;grid-template-columns:100px auto;width:100%;\">\n              <div>\n                  <ion-input readonly label=\"Код\" labelPlacement=\"stacked\">+7</ion-input>\n              </div>\n              <div>\n                  <ion-input\n                    v-model=\"user_phone\"\n                    @ionChange=\"phoneFormat()\"\n                    name=\"phone\"\n                    type=\"tel\"\n                    inputmode=\"tel\"\n                    placeholder=\"(xxx)xxxxxxxxx\"\n                    required\n                    label=\"Мобильный телефон*\" labelPlacement=\"stacked\"\n                    autocomplete=\"tel-national\"\n                  ></ion-input>            \n                  <ion-text color=\"danger\" slot=\"helper\"><p v-show=\"!phoneValid && submitted == true\" padding-left>Неверный номер телефона</p></ion-text>\n              </div>\n            </div>\n            <ion-text color=\"danger\" slot=\"helper\">\n              <p v-show=\"!phoneValid && submitted == true\" padding-left>Неверный номер телефона</p>\n            </ion-text>\n          </ion-item>\n\n          <ion-item lines=\"full\">\n            <ion-input \n              v-model=\"user_pass\" \n              name=\"password\" \n              type=\"password\" \n              autocorrect=\"off\"\n              placeholder=\"Пароль (Минимум 4 символа)\"\n              required\n              label=\"Пароль (Минимум 4 символа)*\" labelPlacement=\"stacked\"\n              autocomplete=\"current-password\"\n            ></ion-input>\n            <ion-text color=\"danger\" slot=\"helper\">\n              <p v-show=\"!passwordValid && submitted == true\" padding-left>Пароль должен содержать не менее 4 символов.</p>\n            </ion-text>\n          </ion-item>\n        </ion-list>\n      <ion-grid>\n        <ion-row responsive-sm>\n          <ion-col>\n            <ion-button @click=\"onSubmit\" expand=\"block\">Войти</ion-button>\n          </ion-col>\n        </ion-row>\n        \n        <ion-row responsive-sm>\n          <ion-col>\n            <ion-button color=\"light\" expand=\"block\" @click=\"$router.push({path: `/user/sign-up`})\">Зарегистрироваться</ion-button>\n          </ion-col>\n        </ion-row>\n        \n        <ion-row responsive-sm>\n          <ion-col>\n              <ion-button @click=\"forgotPassModal\" color=\"light\" expand=\"block\">Забыли пароль?</ion-button>\n          </ion-col>\n        </ion-row>\n      </ion-grid>\n    </form>\n  </base-layout>\n</template>\n\n<script>\nimport { \n  IonCol,\n  IonInput,\n  IonRow,\n  IonText,\n  IonButton,\n  IonGrid,\n  IonCard,\n  IonCardHeader,\n  IonCardTitle,\n  IonCardContent,\n  IonItem,\n  IonList,\n  modalController\n}                               from '@ionic/vue';\nimport UserPasswordReset        from '@/components/UserPasswordReset.vue'\nimport User                     from '@/scripts/User.js'\nimport router                   from '@/router';\n\nexport default{\n  components:{\n  IonCol,\n  IonInput,\n  IonRow,\n  IonText,\n  IonButton,\n  IonGrid,\n  IonCard,\n  IonCardHeader,\n  IonCardTitle,\n  IonCardContent,\n  IonList,\n  IonItem,\n  },\n  data(){\n    return {\n      submitted: false,\n      user_pass:null,\n      user_phone:null,\n      user_phone_prefix:'7',\n      modalOpen: false\n    }\n  },\n  computed: {\n    phoneValid() {\n      return this.user_phone?.replace(/\\D/g,\"\").length == 10;\n    },\n    passwordValid() {\n      return this.user_pass?.length >= 4;\n    }\n  },\n  created(){\n    const signInCredentials=JSON.parse(localStorage.signInData??'{}');\n    if( signInCredentials && signInCredentials.user_phone ){\n        this.user_phone=signInCredentials.user_phone\n        this.phoneFormat()\n    }\n    if( signInCredentials && signInCredentials.user_pass ){\n        this.user_pass=signInCredentials.user_pass\n    }\n  },\n  methods:{\n    async onSubmit() {\n      this.submitted = true;\n      if(!this.phoneValid || !this.passwordValid){\n        return false;\n      }\n      let requestData = {\n        user_phone: this.user_phone_prefix+this.user_phone,\n        user_pass: this.user_pass,\n        user_pass_confirm: this.user_pass\n      }\n      try{\n        await User.signIn(requestData);\n        await User.get();\n        router.go(-1);\n      } catch(err){\n        const exception=err.responseJSON;\n        const exception_code=exception.messages.error;\n        switch(exception_code){\n          case 'user_not_found':\n            this.$flash(\"Пользователь не найден. Пройдите регистрацию.\");\n            break;\n          case 'user_pass_wrong':\n            this.$flash(\"Неверный пароль\");\n            break;\n          case 'user_is_disabled':\n            this.$flash(\"Пользователь отключен. Обратитесь к администратору\");\n            break;\n          case 'user_is_deleted':\n            this.$flash(\"Пользователь удален. Обратитесь к администратору\");\n            break;\n          case 'user_phone_unverified':\n            this.$flash(\"Номер телефона не подтвержден\");\n            //localStorage.signInData = JSON.stringify({user_phone: this.user_phone_prefix+this.user_phone,user_pass: this.user_pass});\n            this.phoneVerify();\n            break;\n          default:\n            this.$flash(\"Не удалось войти в систему\");\n        }\n      }\n    },\n    phoneFormat(){\n      if( !this.user_phone ){\n        this.user_phone='';\n      }\n      try{\n        let user_phone=this.user_phone.replace(/\\D/g,\"\")\n        if(user_phone.length>10){\n          user_phone=user_phone.substring(user_phone.length-10)\n        }\n        this.user_phone=user_phone\n      } catch{/** */}\n    },\n    async forgotPassModal() {\n      this.modalOpen = true\n      const phone=(this.user_phone_prefix??'')+(this.user_phone??'')\n      const modal = await modalController\n        .create({\n          component: UserPasswordReset,\n          componentProps: {phone},\n          initialBreakpoint: 0.5,\n          breakpoints: [0.5, 0.75]\n        })\n      return modal.present();\n    },\n    phoneVerify(){\n      // let requestData = {\n      //   user_phone: this.user_phone_prefix+this.user_phone\n      // }\n      try{\n        this.$heap.state.user.tmp_userphone=this.user_phone_prefix+this.user_phone\n        this.$go('/user/verify-phone')\n        //this.$router.push({name:'UserVerifyPhone',query:requestData})\n      } catch{\n        this.$flash(\"Не удалось выслать смс с подтверждением\")\n      }\n    },\n  }\n}\n</script>","import { render } from \"./UserSignIn.vue?vue&type=template&id=5b89585f&scoped=true\"\nimport script from \"./UserSignIn.vue?vue&type=script&lang=js\"\nexport * from \"./UserSignIn.vue?vue&type=script&lang=js\"\n\nimport \"./UserSignIn.vue?vue&type=style&index=0&id=5b89585f&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5b89585f\"]])\n\nexport default __exports__"],"names":["validate","_createElementVNode","style","_createElementBlock","_Fragment","_createVNode","_component_ion_header","default","_withCtx","_component_ion_toolbar","_component_ion_title","_createTextVNode","_","_component_ion_icon","slot","onClick","_cache","$event","$options","closeModal","icon","$setup","closeOutline","size","_component_ion_content","_hoisted_1","_component_ion_list","_component_ion_item","_component_ion_input","label","modelValue","$data","userphone","placeholder","required","username","_component_ion_button","passwordReset","expand","_hoisted_2","_ctx","$router","push","_hoisted_3","components","IonContent","IonHeader","IonTitle","IonToolbar","IonList","IonItem","IonInput","IonButton","IonIcon","props","setup","data","this","phone","methods","modalController","dismiss","replace","length","alert","requestData","user_phone","user_name","jQuery","$heap","state","hostname","$flash","err","_err$responseJSON","_err$responseJSON$mes","message","responseJSON","messages","error","mouted","$topic","on","__exports__","render","novalidate","_createBlock","_component_base_layout","pageDefaultBackLink","user","user_id","_component_ion_card","key","_component_ion_card_header","_component_ion_card_title","color","_toDisplayString","user_surname","user_middlename","_component_ion_card_content","_createCommentVNode","lines","readonly","labelPlacement","onIonChange","phoneFormat","name","type","inputmode","autocomplete","_component_ion_text","phoneValid","submitted","_hoisted_4","user_pass","autocorrect","_hoisted_5","passwordValid","_component_ion_grid","_component_ion_row","_component_ion_col","onSubmit","path","forgotPassModal","IonCol","IonRow","IonText","IonGrid","IonCard","IonCardHeader","IonCardTitle","IonCardContent","user_phone_prefix","modalOpen","computed","_this$user_phone","_this$user_pass","created","_localStorage$signInD","signInCredentials","JSON","parse","localStorage","signInData","user_pass_confirm","User","signIn","get","router","go","exception","exception_code","phoneVerify","substring","_this$user_phone_pref","_this$user_phone2","modal","create","component","UserPasswordReset","componentProps","initialBreakpoint","breakpoints","present","tmp_userphone","$go"],"sourceRoot":""}