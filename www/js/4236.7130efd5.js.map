{"version":3,"file":"js/4236.7130efd5.js","mappings":"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","sources":["webpack://Tezkel/./src/views/StoreEditProducts.vue","webpack://Tezkel/./src/views/StoreEditProducts.vue?d725"],"sourcesContent":["<style scoped>\r\n.deleted{\r\n    border: 3px red solid;\r\n}\r\n</style>\r\n<template>\r\n    <base-layout :pageDefaultBackLink=\"`/catalog/store-edit-${storeId}`\" page-title=\"Управление товарами\">\r\n        <!-- <ion-segment :scrollable=\"true\" v-model=\"moderationType\" @ionChange=\"listTypeChanged($event)\">\r\n            <ion-segment-button value=\"products\">\r\n                Товары\r\n            </ion-segment-button>\r\n        </ion-segment> -->\r\n        <div>\r\n            <!-- <ion-item>\r\n                <ion-select v-model=\"item_type\" value=\"active\" label=\"Тип элементов\" label-placement=\"stacked\" @ionChange=\"listReload()\">\r\n                    <ion-select-option value=\"active\">активные</ion-select-option>\r\n                    <ion-select-option value=\"disabled\">выключенные</ion-select-option>\r\n                    <ion-select-option value=\"deleted\">удаленные</ion-select-option>\r\n                </ion-select>\r\n            </ion-item> -->\r\n            <ion-searchbar placeholder=\"Фильтр\" v-model=\"filter\"/>\r\n            <ion-list v-if=\"listComputed.length>0\">\r\n\r\n\r\n\r\n                <div v-for=\"item in listComputed\" :key=\"item.item_id\">\r\n                <ion-item lines=\"none\">\r\n                    <ion-thumbnail slot=\"start\" :class=\"item.class\" @click=\"itemEdit(item)\">\r\n                        <ion-img :src=\"`${$heap.state.hostname}image/get.php/${item.image_hash}.150.150.webp`\" style=\"border-radius:10px\"/>\r\n                    </ion-thumbnail>\r\n                    <ion-text>{{item.item_name}}</ion-text>\r\n                </ion-item>\r\n                <ion-item lines=\"full\">\r\n                    <ion-chip color=\"medium\">\r\n                        <ion-icon :src=\"calculatorOutline\"/>\r\n                        <ion-checkbox label-placement=\"start\" :checked=\"item.is_counted\" @ionChange=\"itemUpdate(item.product_id,{is_counted:$event.target.checked})\">учет</ion-checkbox>&nbsp;\r\n                    </ion-chip>\r\n                    <ion-chip v-if=\"item.is_counted==0\" color=\"medium\">\r\n                        <ion-icon :src=\"infiniteOutline\"/>\r\n                    </ion-chip>\r\n                    <ion-chip v-else :color=\"item.product_quantity>0?'success':'medium'\" @click=\"itemPrompt(item,'product_quantity','введите остаток')\">\r\n                        {{item.product_quantity}}{{item.product_unit}}\r\n                    </ion-chip>\r\n\r\n                    <ion-chip color=\"primary\" @click=\"itemPrompt(item,'product_price','введите цену')\">{{item.product_price}}{{$heap.state.currencySign}}</ion-chip>                    \r\n                </ion-item>\r\n                </div>\r\n            </ion-list>\r\n            <ion-list v-else-if=\"is_loading==1\">\r\n                <ion-item v-for=\"item in [1,2,3]\" :key=\"item\" button detail>\r\n                    <ion-thumbnail slot=\"start\" style=\"background-color:lightgray\"></ion-thumbnail>\r\n                    <ion-skeleton-text animated></ion-skeleton-text>\r\n                </ion-item>\r\n            </ion-list>\r\n            <ion-card v-else color=\"light\">\r\n                <ion-card-content>\r\n                Ничего не найдено\r\n                </ion-card-content>\r\n            </ion-card>\r\n            <ion-infinite-scroll @ionInfinite=\"listLoadMore($event)\" id=\"moderation-infinite-scroll\">\r\n                <ion-infinite-scroll-content loading-spinner=\"bubbles\" loading-text=\"Loading more data...\"></ion-infinite-scroll-content>\r\n            </ion-infinite-scroll>\r\n        </div>\r\n    </base-layout>\r\n</template>\r\n<script>\r\nimport {\r\n  IonInfiniteScroll, \r\n  IonInfiniteScrollContent,\r\n  IonItem,\r\n  IonLabel,\r\n  IonList,\r\n  IonSegmentButton,\r\n  IonSegment,\r\n  IonImg,\r\n  modalController,\r\n  alertController,\r\n  IonThumbnail,\r\n  IonText,\r\n  IonSkeletonText,\r\n  IonCard,\r\n  IonCardContent,\r\n  IonSearchbar,\r\n  IonSelect,\r\n  IonSelectOption,\r\n  IonChip,\r\n  IonCheckbox,\r\n  IonIcon,\r\n }                          from '@ionic/vue';\r\nimport jquery               from 'jquery'\r\nimport ImagePreviewModal    from '@/components/ImagePreviewModal'\r\nimport { \r\n  infiniteOutline,\r\n  calculatorOutline\r\n}                         from \"ionicons/icons\";\r\nexport default {\r\n    components: {\r\n        IonInfiniteScroll, \r\n        IonInfiniteScrollContent,\r\n        IonItem,\r\n        IonLabel,\r\n        IonList,\r\n        IonSegmentButton,\r\n        IonSegment,\r\n        IonImg,\r\n        IonThumbnail,\r\n        IonText,\r\n        IonSkeletonText,\r\n        IonCard,\r\n        IonCardContent,\r\n        IonSearchbar,\r\n        IonSelect,\r\n        IonSelectOption,\r\n        IonChip,\r\n        IonCheckbox,\r\n        IonIcon,\r\n    },\r\n    setup(){\r\n        return {infiniteOutline,calculatorOutline}\r\n    },\r\n    data(){\r\n        return{\r\n            storeId: this.$route.params.id,\r\n            items:[],\r\n            item_type:'active',\r\n            filter:'',\r\n            is_loading:0,\r\n            moderationType:'products',\r\n            holders:{\r\n                'store':'Поставщик',\r\n                'courier':'Курьер',\r\n                'product':'Товар',\r\n                'order':'Заказ',\r\n                'product_group_list':'Категория товара',\r\n                'location_group_list':'Категория местоп.',\r\n                'store_group_list':'Категория поставщ.',\r\n                'user_group_list':'Категория пользователя',\r\n            }\r\n        }\r\n    },\r\n    computed:{\r\n        listComputed(){\r\n            for(let item of this.items){\r\n                item.image_hash=item.image_hash||item.courier_photo_image_hash\r\n                item.item_id=item.image_id||item.store_id||item.courier_id||item.product_id\r\n                item.item_name=this.holders[item.image_holder]||(item.store_name??item.store_name_new)||item.user_name||item.product_name\r\n                item.date_time=this.toLocDateTime(item.updated_at)\r\n                item.class=item.deleted_at?'deleted':''\r\n            }\r\n            return this.items\r\n        }\r\n    },\r\n    methods:{\r\n        async listLoadMore(ev){\r\n            await this.listLoad()\r\n            ev.target.complete();\r\n        },\r\n        async listReload(){\r\n            this.items=[]\r\n            this.listLoad()\r\n        },\r\n        async listLoad(){\r\n            let request={\r\n                is_disabled: this.item_type=='disabled'?1:0,\r\n                is_active: this.item_type=='active'?1:0,\r\n                is_deleted: this.item_type=='deleted'?1:0,\r\n                name_query:this.filter,\r\n                offset:this.items.length,\r\n                limit:15,\r\n                order:'group_id'\r\n            }\r\n            try{\r\n                this.is_loading=1\r\n                let items\r\n                if(this.moderationType=='products'){\r\n                    request.name_query_fields='product_name,product_description,product_barcode,product_code'\r\n                    request.reverse='validity'\r\n                    request.store_id=this.storeId\r\n                    const products=await jquery.post(`${this.$heap.state.hostname}Product/listGet`,request)\r\n                    items=products.product_list\r\n                }\r\n                this.is_loading=0\r\n                this.items=this.items.concat(items)\r\n            } catch(err){\r\n                //console.log(err)\r\n            }\r\n        },\r\n        listTypeChanged(e){\r\n            const listType=e.target.value;\r\n            this.items=[]\r\n            this.listLoad();\r\n        },\r\n        listFilter(){\r\n            clearTimeout(this.clock)\r\n            this.clock=setTimeout(()=>{\r\n                this.listReload()\r\n            },300)\r\n        },\r\n        toLocDate( iso ){\r\n            const event = new Date(Date.parse(iso));\r\n            const options = { month: 'short', day: 'numeric' };\r\n\r\n            return event.toLocaleDateString(undefined, options);\r\n        },\r\n        toLocDateTime( iso ){\r\n            const event = new Date(Date.parse(iso));\r\n            const options = { month: 'short', day: 'numeric',hour:'numeric',minute:'numeric' };\r\n\r\n            return event.toLocaleDateString(undefined, options);\r\n        },\r\n        itemUpdate(item){\r\n            console.log(item)\r\n        },\r\n        async itemPrompt( item, property, label ){\r\n            const val=item[property]\r\n            const alert = await alertController.create({\r\n                header: label,\r\n                buttons: [\r\n                    {\r\n                        text: 'Отмена',\r\n                        role: 'cancel'\r\n                    },\r\n                    {\r\n                        text: 'Ок',\r\n                        role: 'confirm'\r\n                    },\r\n                ],\r\n                inputs: [\r\n                    {\r\n                        type:'input',\r\n                        name:'comment',\r\n                        placeholder: label,\r\n                        value:val\r\n                    },\r\n                ],\r\n            });\r\n            await alert.present();\r\n            const {data,role}=await alert.onDidDismiss()\r\n            if(role=='cancel'){\r\n                return\r\n            }\r\n            const request={\r\n                product_id:item.product_id,\r\n                [property]:data.values.comment\r\n            }\r\n            try{\r\n                await jquery.post(`${this.$heap.state.hostname}Product/itemUpdate`,request)\r\n                this.$flash(\"Сохранено\")\r\n            }catch(err){\r\n                this.$flash(\"Не сохранено\")\r\n                // const exception_code=err?.responseJSON?.messages?.error\r\n                // switch(exception_code){\r\n                //     case 'notsent':\r\n                //         this.$flash(\"Не удалось отправить сообщение\")\r\n                //         break;\r\n                //     case 'unknown_reciever_type':\r\n                //         this.$flash(\"Не известный вид получателя\")\r\n                //         break;\r\n                //     case 'order_is_finished':\r\n                //         this.$flash(\"Заказ уже завершен\")\r\n                //         break;\r\n                // }\r\n            }\r\n        },\r\n        itemEdit(item){\r\n            if( this.moderationType=='images' ){\r\n                this.imageEdit(item)\r\n            }\r\n            if( this.moderationType=='products' ){\r\n                this.$go('/catalog/product-edit-'+item.product_id)\r\n            }\r\n            if( this.moderationType=='stores' ){\r\n                this.$go('/catalog/store-edit-'+item.store_id)\r\n            }\r\n            if( this.moderationType=='couriers' ){\r\n                this.$go('/user/courier-dashboard?courier_id='+item.courier_id)\r\n            }\r\n        },\r\n        async imageEdit(item){\r\n            const actions={\r\n                'delete':['Удалить','danger'],\r\n                'postpone':['Потом','primary'],\r\n                'enable':['Ок','success'],\r\n            }\r\n            const modal = await modalController.create({\r\n                component: ImagePreviewModal,\r\n                componentProps:{image_hash:item.image_hash,actions},\r\n                initialBreakpoint: 0.75,\r\n                breakpoints: [0.75, 1]\r\n                });\r\n            this.$topic.on('dismissModal',()=>{\r\n                modal.dismiss();\r\n            });\r\n            modal.present();\r\n            const action=await modal.onDidDismiss()\r\n            if( action.role=='delete' ){\r\n                await this.imageDelete(item)\r\n            }\r\n            if( action.role=='enable' ){\r\n                await this.imageEnable(item)\r\n            }\r\n            if( action.role=='postpone' ){\r\n                await this.imagePostpone(item)\r\n            }\r\n            this.listReload()\r\n        },\r\n        async imageEnable(item){\r\n            await jquery.post(`${this.$heap.state.hostname}Image/itemDisable`,{image_id:item.image_id,is_disabled:0})\r\n        },\r\n        async imagePostpone(item){\r\n            //only to change updated_at db field\r\n            await jquery.post(`${this.$heap.state.hostname}Image/itemDisable`,{image_id:item.image_id,is_disabled:0})\r\n            await jquery.post(`${this.$heap.state.hostname}Image/itemDisable`,{image_id:item.image_id,is_disabled:1})\r\n        },\r\n        async imageDelete(item){\r\n            await jquery.post(`${this.$heap.state.hostname}Image/itemDelete`,{image_id:item.image_id})\r\n        },\r\n    },\r\n    mounted(){\r\n        this.listLoad();\r\n    },\r\n    watch:{\r\n        'filter':function(){\r\n            this.listFilter()\r\n        }\r\n    }\r\n}\r\n</script>","import { render } from \"./StoreEditProducts.vue?vue&type=template&id=c7cc0c30&scoped=true\"\nimport script from \"./StoreEditProducts.vue?vue&type=script&lang=js\"\nexport * from \"./StoreEditProducts.vue?vue&type=script&lang=js\"\n\nimport \"./StoreEditProducts.vue?vue&type=style&index=0&id=c7cc0c30&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-c7cc0c30\"]])\n\nexport default __exports__"],"names":["_createBlock","_component_base_layout","pageDefaultBackLink","$data","storeId","_createElementVNode","_createVNode","_component_ion_searchbar","placeholder","filter","$event","$options","listComputed","length","_component_ion_list","key","_createElementBlock","_Fragment","_renderList","item","item_id","_component_ion_item","lines","_component_ion_thumbnail","slot","class","_normalizeClass","onClick","itemEdit","_component_ion_img","src","_ctx","$heap","state","hostname","image_hash","style","_component_ion_text","item_name","_component_ion_chip","color","_component_ion_icon","$setup","calculatorOutline","_component_ion_checkbox","checked","is_counted","onIonChange","itemUpdate","product_id","target","infiniteOutline","product_quantity","itemPrompt","_toDisplayString","product_unit","product_price","currencySign","is_loading","button","detail","_component_ion_skeleton_text","animated","_component_ion_card","_component_ion_card_content","_component_ion_infinite_scroll","onIonInfinite","_cache","listLoadMore","id","_component_ion_infinite_scroll_content","components","IonInfiniteScroll","IonInfiniteScrollContent","IonItem","IonLabel","IonList","IonSegmentButton","IonSegment","IonImg","IonThumbnail","IonText","IonSkeletonText","IonCard","IonCardContent","IonSearchbar","IonSelect","IonSelectOption","IonChip","IonCheckbox","IonIcon","setup","data","this","$route","params","items","item_type","moderationType","holders","computed","_item$store_name","courier_photo_image_hash","image_id","store_id","courier_id","image_holder","store_name","store_name_new","user_name","product_name","date_time","toLocDateTime","updated_at","deleted_at","methods","ev","listLoad","complete","listReload","request","is_disabled","is_active","is_deleted","name_query","offset","limit","order","name_query_fields","reverse","products","jquery","product_list","concat","err","listTypeChanged","e","value","listFilter","clearTimeout","clock","setTimeout","toLocDate","iso","event","Date","parse","options","month","day","toLocaleDateString","undefined","hour","minute","console","log","property","label","val","alert","alertController","create","header","buttons","text","role","inputs","type","name","present","onDidDismiss","values","comment","$flash","imageEdit","$go","actions","modal","modalController","component","ImagePreviewModal","componentProps","initialBreakpoint","breakpoints","$topic","on","dismiss","action","imageDelete","imageEnable","imagePostpone","mounted","watch","__exports__","render"],"sourceRoot":""}