"use strict";(self["webpackChunktezkel"]=self["webpackChunktezkel"]||[]).push([[166],{7327:function(t,e,o){o.d(e,{Z:function(){return c}});var i=o(6252),l=o(3577);function r(t,e,o,r,d,a){const n=(0,i.up)("ion-title"),u=(0,i.up)("ion-icon"),s=(0,i.up)("ion-toolbar"),c=(0,i.up)("ion-header"),p=(0,i.up)("ion-button"),m=(0,i.up)("ion-col"),_=(0,i.up)("ion-row"),h=(0,i.up)("ion-grid"),g=(0,i.up)("ion-img"),w=(0,i.up)("ion-content");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[(0,i.Wm)(s,{color:"secondary"},{default:(0,i.w5)((()=>[(0,i.Wm)(n,null,{default:(0,i.w5)((()=>[(0,i.Uk)("–ü—Ä–æ—Å–º–æ—Ç—Ä —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏")])),_:1}),(0,i.Wm)(u,{icon:r.closeOutline,onClick:e[0]||(e[0]=t=>{r.closeModal()}),slot:"end",size:"large"},null,8,["icon"])])),_:1})])),_:1}),(0,i.Wm)(w,null,{default:(0,i.w5)((()=>[o.actions?((0,i.wg)(),(0,i.j4)(h,{key:0},{default:(0,i.w5)((()=>[(0,i.Wm)(_,null,{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.actions,((t,e)=>((0,i.wg)(),(0,i.j4)(m,{key:e},{default:(0,i.w5)((()=>{var o;return[t[0]?((0,i.wg)(),(0,i.j4)(p,{key:0,onClick:o=>a.actionCreate(e,t[1]),expand:"block",color:null!==(o=t[1])&&void 0!==o?o:"primary"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(t[0]),1)])),_:2},1032,["onClick","color"])):(0,i.kq)("",!0)]})),_:2},1024)))),128))])),_:1})])),_:1})):(0,i.kq)("",!0),(0,i.Wm)(g,{src:t.$heap.state.hostname+"image/get.php/"+o.image_hash+".1000.1000.webp"},null,8,["src"])])),_:1})],64)}var d=o(8903),a=o(6964),n={props:["image_hash","actions"],components:{IonIcon:a.gu,IonToolbar:a.sr,IonHeader:a.Gu,IonImg:a.Xz,IonContent:a.W2,IonTitle:a.wd,IonButton:a.YG,IonCol:a.wI,IonRow:a.Nd,IonGrid:a.jY},setup(){const t=function(){a.Fy.dismiss()};return{closeModal:t,closeOutline:d.fID}},methods:{actionCreate(t,e){("danger"!=e||confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã?"))&&a.Fy.dismiss(null,t)}}},u=o(3744);const s=(0,u.Z)(n,[["render",r]]);var c=s},2226:function(t,e,o){o.d(e,{Z:function(){return v}});var i=o(6252),l=o(3577);const r={key:0,class:"image_grid"},d=["onClick"],a={key:0},n={key:1},u={key:0,class:"image_controls"},s=["id"];function c(t,e,o,c,p,m){var _;const h=(0,i.up)("ion-label"),g=(0,i.up)("ion-icon"),w=(0,i.up)("ion-item"),k=(0,i.up)("ion-img"),f=(0,i.up)("ion-avatar");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(w,{lines:"none",onClick:e[0]||(e[0]=t=>{p.editMode=!p.editMode,p.editMode&&m.load()})},{default:(0,i.w5)((()=>[o.title?((0,i.wg)(),(0,i.j4)(h,{key:0,color:"imageList?.length?'':medium"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(o.title),1)])),_:1})):((0,i.wg)(),(0,i.j4)(h,{key:1,color:"imageList?.length?'':medium"},{default:(0,i.w5)((()=>[(0,i.Uk)("–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏")])),_:1})),p.editMode?((0,i.wg)(),(0,i.j4)(g,{key:2,slot:"end",icon:c.settingsSharp,color:"primary"},null,8,["icon"])):((0,i.wg)(),(0,i.j4)(g,{key:3,slot:"end",icon:c.settingsOutline},null,8,["icon"]))])),_:1}),null!==(_=m.imageList)&&void 0!==_&&_.length?((0,i.wg)(),(0,i.iD)("div",r,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(m.imageList,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e.image_id,style:{position:"relative"}},[(0,i._)("div",{style:{position:"absolute",top:"0px","background-color":"#fffc","font-size":"0.75em"},onClick:t=>m.imagePreview(e.image_hash)},[e.deleted_at?((0,i.wg)(),(0,i.iD)("div",a,"–±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–æ")):1==e.is_disabled?((0,i.wg)(),(0,i.iD)("div",n,"–Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏")):(0,i.kq)("",!0)],8,d),(0,i.Wm)(f,{onClick:t=>m.imagePreview(e.image_hash),class:(0,l.C_)(e.class)},{default:(0,i.w5)((()=>[(0,i.Wm)(k,{src:t.$heap.state.hostname+"image/get.php/"+e.image_hash+".100.100.webp"},null,8,["src"])])),_:2},1032,["onClick","class"]),p.editMode?((0,i.wg)(),(0,i.iD)("div",u,[(0,i.Wm)(g,{icon:c.chevronBackCircleOutline,onClick:t=>m.back(e)},null,8,["icon","onClick"]),m.isAdmin&&1==e.is_disabled?((0,i.wg)(),(0,i.j4)(g,{key:0,icon:c.checkmarkCircle,color:"success",onClick:t=>m.enable(e)},null,8,["icon","onClick"])):(0,i.kq)("",!0),e.deleted_at?((0,i.wg)(),(0,i.j4)(g,{key:1,icon:c.addCircle,color:"success",onClick:t=>m.restore(e)},null,8,["icon","onClick"])):((0,i.wg)(),(0,i.j4)(g,{key:2,icon:c.trash,color:"danger",onClick:t=>m.remove(e)},null,8,["icon","onClick"])),(0,i.Wm)(g,{icon:c.chevronForwardCircleOutline,onClick:t=>m.forward(e)},null,8,["icon","onClick"])])):(0,i.kq)("",!0)])))),128))])):(0,i.kq)("",!0),(0,i._)("input",{type:"file",id:p.fileUploaderId,accept:".png, .jpg, .jpeg, .webp, .gif",onChange:e[1]||(e[1]=t=>m.uploadImage(t)),style:{display:"none"}},null,40,s)])}var p=o(8903),m=o(6964),_=o(7327),h=o(9755),g=o.n(h),w=o(9042),k=o(351),f={props:["images","image_holder","image_holder_id","controller","title"],components:{IonLabel:m.Q$,IonIcon:m.gu,IonItem:m.Ie,IonImg:m.Xz,IonAvatar:m.BJ},setup(){return{settingsOutline:p.C$N,settingsSharp:p.kiF,chevronBackCircleOutline:p.CK0,chevronForwardCircleOutline:p.esm,trash:p._Ij,addCircle:p.ZWo,checkmarkCircle:p.I1A}},data(){var t;return{images_loaded:null,editMode:!1,fileUploaderId:(null!==(t=this.image_holder)&&void 0!==t?t:this.controller)+this.image_holder_id}},computed:{imageList(){let t=this.images_loaded||this.images,e=[];for(let o in t)t[o].deleted_at?(t[o].class=" deleted",this.editMode&&e.push(t[o])):1==t[o].is_disabled?(t[o].class=" disabled",this.editMode&&e.push(t[o])):e.push(t[o]);return e},isAdmin(){return k.Z.isAdmin()}},methods:{async back(t){try{await g().post(this.$heap.state.hostname+"Image/itemUpdateOrder",{image_id:t.image_id,dir:"up"}),this.load()}catch{}},async forward(t){try{await g().post(this.$heap.state.hostname+"Image/itemUpdateOrder",{image_id:t.image_id,dir:"down"}),this.load()}catch{}},async remove(t){try{await g().post(this.$heap.state.hostname+"Image/itemDelete",{image_id:t.image_id}),this.load(),this.$flash("–§–æ—Ç–æ –ø–µ—Ä–µ–º–µ—â–µ–Ω–æ –≤ –∫–æ—Ä–∑–∏–Ω—É –∏ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–æ")}catch{}},async restore(t){try{await g().post(this.$heap.state.hostname+"Image/itemUnDelete",{image_id:t.image_id}),this.load(),this.$flash("–§–æ—Ç–æ –ø–µ—Ä–µ–º–µ—â–µ–Ω–æ –∏–∑–≤–ª–µ—á–µ–Ω–æ –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã")}catch{}},async enable(t){try{await g().post(this.$heap.state.hostname+"Image/itemDisable",{image_id:t.image_id,is_disabled:0}),this.load()}catch{}},async load(){var t;const e={image_holder_id:this.image_holder_id,image_holder:null!==(t=this.image_holder)&&void 0!==t?t:this.controller,is_disabled:1,is_deleted:1,is_active:1};this.images_loaded=await g().post(this.$heap.state.hostname+"Image/listGet",e)},async imagePreview(t){const e=await m.Fy.create({component:_.Z,componentProps:{image_hash:t},initialBreakpoint:.5,breakpoints:[.5,1]}),o=function(){e.dismiss()};return w.Z.on("dismissModal",o),e.present()},async uploadImage(t){let e=new FormData;e.append("files[]",t.target.files[0]),e.set("image_holder_id",this.image_holder_id),this.image_holder&&e.set("image_holder",this.image_holder);const o={url:this.$heap.state.hostname+this.controller+"/fileUpload",type:"POST",data:e,processData:!1,contentType:!1};try{await g().ajax(o),this.load()}catch(a){var i,l,r,d;if("limit_exeeded"==(null===a||void 0===a||null===(i=a.responseJSON)||void 0===i||null===(l=i.messages)||void 0===l?void 0:l.error))return void this.$flash("–£–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–æ—Ç–æ");if("no_valid_images"==(null===a||void 0===a||null===(r=a.responseJSON)||void 0===r||null===(d=r.messages)||void 0===d?void 0:d.error))return void this.$flash("–§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è");this.$flash("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ")}},take_photo(){g()(`#${this.fileUploaderId}`).trigger("click"),this.editMode=!0}}},I=o(3744);const y=(0,I.Z)(f,[["render",c],["__scopeId","data-v-5ec0cc30"]]);var v=y},4166:function(t,e,o){o.r(e),o.d(e,{default:function(){return V}});o(3948),o(5306);var i=o(6252),l=o(3577);const r=t=>((0,i.dD)("data-v-4ce0da85"),t=t(),(0,i.Cn)(),t),d={key:0},a={key:0},n=r((()=>(0,i._)("ul",null,[(0,i._)("li",null,"–ù–∞–∑–≤–∞–Ω–∏–µ (–±–æ–ª—å—à–µ 5 –±—É–∫–≤), "),(0,i._)("li",null,"–¶–µ–Ω–∞, "),(0,i._)("li",null,"–ê–∫—Ç—É–∞–ª—å–Ω—ã–π –æ—Å—Ç–∞—Ç–æ–∫ (–µ—Å–ª–∏ –≤–µ–¥–µ—Ç—Å—è —É—á–µ—Ç), "),(0,i._)("li",null,"–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞")],-1))),u={style:{display:"grid","grid-template-columns":"1fr 1fr"}},s={key:2},c={key:0},p={key:0};function m(t,e,o,r,m,_){var h,g;const w=(0,i.up)("ion-progress-bar"),k=(0,i.up)("ion-card-title"),f=(0,i.up)("ion-card-header"),I=(0,i.up)("ion-text"),y=(0,i.up)("ion-card-content"),v=(0,i.up)("ion-card"),W=(0,i.up)("ion-icon"),b=(0,i.up)("ion-toggle"),U=(0,i.up)("ion-item"),C=(0,i.up)("ion-card-subtitle"),O=(0,i.up)("ion-img"),D=(0,i.up)("ion-label"),V=(0,i.up)("ion-input"),G=(0,i.up)("ion-chip"),$=(0,i.up)("ion-button"),L=(0,i.up)("ion-item-divider"),j=(0,i.up)("ion-list"),q=(0,i.up)("ion-textarea"),P=(0,i.up)("ion-select-option"),z=(0,i.up)("ion-select"),F=(0,i.up)("ion-item-group"),M=(0,i.up)("image-tile-comp"),S=(0,i.up)("base-layout");return(0,i.wg)(),(0,i.j4)(S,{"page-title":null!==(h=null===(g=m.productItem)||void 0===g?void 0:g.product_name)&&void 0!==h?h:"–¢–æ–≤–∞—Ä",pageDefaultBackLink:"/catalog"},{default:(0,i.w5)((()=>{var o,h;return[m.is_option_child?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",d,[(0,i.Wm)(v,{color:(null===(o=m.productItem)||void 0===o?void 0:o.validity)<m.validity_min?"danger":""},{default:(0,i.w5)((()=>{var t;return[(0,i.Wm)(f,null,{default:(0,i.w5)((()=>[(0,i.Wm)(k,null,{default:(0,i.w5)((()=>{var t,e,o;return[(0,i.Uk)(" –§–æ—Ä–º–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∞ –Ω–∞ "+(0,l.zw)(null!==(t=null===(e=m.productItem)||void 0===e?void 0:e.validity)&&void 0!==t?t:0)+"% ",1),(0,i.Wm)(w,{value:(null===(o=m.productItem)||void 0===o?void 0:o.validity)/100},null,8,["value"])]})),_:1})])),_:1}),(null===(t=m.productItem)||void 0===t?void 0:t.validity)<m.validity_min?((0,i.wg)(),(0,i.j4)(y,{key:0},{default:(0,i.w5)((()=>[(0,i.Wm)(I,null,{default:(0,i.w5)((()=>{var t;return[(0,i.Uk)(" –í–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –∞–Ω–∫–µ—Ç—É –Ω–µ –º–µ–Ω—å—à–µ —á–µ–º –Ω–∞ "+(0,l.zw)(m.validity_min)+"% –¥–ª—è —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏—è –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–º ",1),0==(null===(t=m.productItem)||void 0===t?void 0:t.validity)?((0,i.wg)(),(0,i.iD)("p",a,[(0,i.Uk)("–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Ç–æ, —á—Ç–æ –ø–æ–ª—è "),n,(0,i.Uk)(" –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ ")])):(0,i.kq)("",!0)]})),_:1})])),_:1})):(0,i.kq)("",!0)]})),_:1},8,["color"]),_.message&&(null===(h=m.productItem)||void 0===h?void 0:h.validity)>m.validity_min?((0,i.wg)(),(0,i.j4)(v,{key:0},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{class:(0,l.C_)(_.messageClass)},{default:(0,i.w5)((()=>[(0,i.Wm)(I,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(_.message),1)])),_:1})])),_:1},8,["class"])])),_:1})):(0,i.kq)("",!0)])),m.productItem?((0,i.wg)(),(0,i.j4)(j,{key:1},{default:(0,i.w5)((()=>[(0,i.Wm)(U,null,{default:(0,i.w5)((()=>[(0,i.Wm)(W,{src:r.trashOutline,color:"primary",slot:"start"},null,8,["src"]),(0,i.Uk)(" –£–¥–∞–ª–µ–Ω–æ "),(0,i.Wm)(b,{slot:"end",modelValue:m.is_deleted,"onUpdate:modelValue":e[0]||(e[0]=t=>m.is_deleted=t),color:"danger",onIonChange:e[1]||(e[1]=t=>_.itemDelete(t.target.checked?1:0))},null,8,["modelValue"])])),_:1}),(0,i.Wm)(U,null,{default:(0,i.w5)((()=>[(0,i.Wm)(W,{src:r.pizzaOutline,color:"primary",slot:"start"},null,8,["src"]),(0,i.Uk)(" –í–µ—Å—Ç–∏ —É—á–µ—Ç –æ—Å—Ç–∞—Ç–∫–æ–≤ "),m.productItem?((0,i.wg)(),(0,i.j4)(b,{key:0,slot:"end",modelValue:m.is_counted,"onUpdate:modelValue":e[2]||(e[2]=t=>m.is_counted=t),onIonChange:e[3]||(e[3]=t=>_.save("is_counted",t.target.checked?1:0))},null,8,["modelValue"])):(0,i.kq)("",!0)])),_:1}),m.is_option_child?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(U,{key:0},{default:(0,i.w5)((()=>[(0,i.Wm)(W,{src:r.layersOutline,color:"primary",slot:"start"},null,8,["src"]),(0,i.Uk)(" –ò–º–µ–µ—Ç –≤–∞—Ä–∏–∞–Ω—Ç—ã "),m.productItem?((0,i.wg)(),(0,i.j4)(b,{key:0,slot:"end",modelValue:m.is_option_parent,"onUpdate:modelValue":e[4]||(e[4]=t=>m.is_option_parent=t),onIonChange:e[5]||(e[5]=t=>{_.itemOptionSet(t.target.checked)})},null,8,["modelValue"])):(0,i.kq)("",!0)])),_:1})),(0,i.Wm)(U,null,{default:(0,i.w5)((()=>[(0,i.Wm)(W,{src:r.ribbonOutline,color:"primary",slot:"start"},null,8,["src"]),(0,i.Uk)(" –ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ "),(0,i.Wm)(b,{slot:"end",modelValue:m.is_disabled,"onUpdate:modelValue":e[6]||(e[6]=t=>m.is_disabled=t),onIonChange:e[7]||(e[7]=t=>_.itemDisable(t.target.checked?1:0))},null,8,["modelValue"])])),_:1}),m.optionData?((0,i.wg)(),(0,i.iD)("div",{key:1,onChange:e[12]||(e[12]=(...t)=>_.saveForm&&_.saveForm(...t))},[(0,i.Wm)(v,{onClick:e[9]||(e[9]=e=>t.$router.replace(`product-edit-${m.optionData.parent.product_id}?refreshOptions=1`)),color:m.productId==m.optionData.parent.product_id?"primary":"light"},{default:(0,i.w5)((()=>[(0,i.Wm)(f,null,{default:(0,i.w5)((()=>[(0,i.Wm)(C,null,{default:(0,i.w5)((()=>[(0,i.Uk)(" –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π —Ç–æ–≤–∞—Ä ")])),_:1})])),_:1}),(0,i.Wm)(y,null,{default:(0,i.w5)((()=>[(0,i.Wm)(U,{color:"light",lines:"none"},{default:(0,i.w5)((()=>[(0,i.Wm)(O,{slot:"start",style:{height:"70px"},src:`${t.$heap.state.hostname}image/get.php/${m.optionData.parent.image_hash}.70.70.webp`},null,8,["src"]),(0,i.Uk)(" "+(0,l.zw)(m.optionData.parent.product_name),1)])),_:1}),m.productId==m.optionData.parent.product_id?((0,i.wg)(),(0,i.j4)(U,{key:0,color:"light"},{default:(0,i.w5)((()=>[(0,i.Wm)(D,{position:"stacked"},{default:(0,i.w5)((()=>[(0,i.Uk)("–í–∞—Ä–∏–∞–Ω—Ç*")])),_:1}),(0,i.Wm)(V,{name:"product_option",modelValue:m.productItem.product_option,"onUpdate:modelValue":e[8]||(e[8]=t=>m.productItem.product_option=t)},null,8,["modelValue"])])),_:1})):((0,i.wg)(),(0,i.j4)(U,{key:1,lines:"none",color:"light"},{default:(0,i.w5)((()=>[(0,i.Wm)(G,null,{default:(0,i.w5)((()=>[(0,i.Uk)("["+(0,l.zw)(m.optionData.parent.product_option)+"]",1)])),_:1})])),_:1}))])),_:1})])),_:1},8,["color"]),(0,i._)("div",u,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(m.optionData.children,(o=>((0,i.wg)(),(0,i.j4)(v,{onClick:e=>t.$router.replace(`product-edit-${o.product_id}?refreshOptions=1`),key:o.product_id,color:m.productItem.product_id==o.product_id?"primary":""},{default:(0,i.w5)((()=>[(0,i.Wm)(y,null,{default:(0,i.w5)((()=>[m.productItem.product_id==o.product_id?((0,i.wg)(),(0,i.j4)(U,{key:0,color:m.productItem.deleted_at?"danger":""},{default:(0,i.w5)((()=>[(0,i.Wm)(D,{position:"stacked"},{default:(0,i.w5)((()=>[(0,i.Uk)("–í–∞—Ä–∏–∞–Ω—Ç*")])),_:1}),(0,i.Wm)(V,{name:"product_option",modelValue:m.productItem.product_option,"onUpdate:modelValue":e[10]||(e[10]=t=>m.productItem.product_option=t)},null,8,["modelValue"])])),_:1},8,["color"])):((0,i.wg)(),(0,i.j4)(U,{key:1,lines:"none"},{default:(0,i.w5)((()=>[(0,i.Wm)(G,{color:o.deleted_at?"danger":""},{default:(0,i.w5)((()=>[(0,i.Uk)("["+(0,l.zw)(o.product_option)+"]",1)])),_:2},1032,["color"])])),_:2},1024))])),_:2},1024)])),_:2},1032,["onClick","color"])))),128)),(0,i.Wm)(v,null,{default:(0,i.w5)((()=>[(0,i.Wm)(y,null,{default:(0,i.w5)((()=>[(0,i.Wm)($,{color:"light",expand:"block",onClick:e[11]||(e[11]=t=>_.itemOptionCreate())},{default:(0,i.w5)((()=>[(0,i.Uk)("–¥–æ–±–∞–≤–∏—Ç—å")])),_:1})])),_:1})])),_:1})])],32)):(0,i.kq)("",!0),m.is_option_child?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",s,[(0,i.Wm)(L),(0,i.Wm)(U,{button:"",onClick:e[13]||(e[13]=e=>t.$go("/catalog/product-"+m.productItem.product_id))},{default:(0,i.w5)((()=>[(0,i.Wm)(W,{src:r.chevronBack,slot:"start"},null,8,["src"]),(0,i.Uk)(" –ü–æ–∫–∞–∑–∞—Ç—å —Ç–æ–≤–∞—Ä ")])),_:1}),(0,i.Wm)(U,{button:"",onClick:e[14]||(e[14]=t=>_.showProductInStore())},{default:(0,i.w5)((()=>[(0,i.Wm)(W,{src:r.chevronBack,slot:"start"},null,8,["src"]),(0,i.Uk)(" –ü–æ–∫–∞–∑–∞—Ç—å –≤ –º–∞–≥–∞–∑–∏–Ω–µ ")])),_:1}),(0,i.Wm)(U,{button:"",onClick:e[15]||(e[15]=e=>t.$go("/catalog/store-edit-"+m.productItem.store_id))},{default:(0,i.w5)((()=>[(0,i.Wm)(W,{src:r.chevronBack,slot:"start"},null,8,["src"]),(0,i.Uk)(" –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–æ–º ")])),_:1})]))])),_:1})):(0,i.kq)("",!0),m.productItem?((0,i.wg)(),(0,i.iD)("form",{key:2,onChange:e[29]||(e[29]=(...t)=>_.saveForm&&_.saveForm(...t))},[(0,i.Wm)(j,{lines:"full"},{default:(0,i.w5)((()=>[(0,i.Wm)(F,null,{default:(0,i.w5)((()=>[(0,i.Wm)(L,null,{default:(0,i.w5)((()=>[(0,i.Wm)(D,null,{default:(0,i.w5)((()=>[(0,i.Uk)("–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏")])),_:1})])),_:1}),m.is_option_child?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(U,{key:0},{default:(0,i.w5)((()=>[(0,i.Wm)(D,{position:"stacked",color:"primary"},{default:(0,i.w5)((()=>[(0,i.Uk)("–ù–∞–∑–≤–∞–Ω–∏–µ*")])),_:1}),(0,i.Wm)(V,{modelValue:m.productItem.product_name,"onUpdate:modelValue":e[16]||(e[16]=t=>m.productItem.product_name=t),name:"product_name",placeholder:"–ø–æ–ª–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞",clearInput:"true"},null,8,["modelValue"])])),_:1})),m.is_option_child?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(U,{key:1},{default:(0,i.w5)((()=>[(0,i.Wm)(D,{position:"stacked",color:"primary"},{default:(0,i.w5)((()=>[(0,i.Uk)("–û–ø–∏—Å–∞–Ω–∏–µ*")])),_:1}),(0,i.Wm)(q,{modelValue:m.productItem.product_description,"onUpdate:modelValue":e[17]||(e[17]=t=>m.productItem.product_description=t),name:"product_description",rows:"6",placeholder:"—Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏, —Å–≤–æ–π—Å—Ç–≤–∞, —Å–æ—Å—Ç–∞–≤ —Ç–æ–≤–∞—Ä–∞"},null,8,["modelValue"])])),_:1})),(0,i.Wm)(U,null,{default:(0,i.w5)((()=>[(0,i.Wm)(D,null,{default:(0,i.w5)((()=>[(0,i.Uk)("–ê—Ä—Ç–∏–∫—É–ª")])),_:1}),(0,i.Wm)(V,{modelValue:m.productItem.product_code,"onUpdate:modelValue":e[18]||(e[18]=t=>m.productItem.product_code=t),name:"product_code",slot:"end",placeholder:"–∫–æ–¥ —Ç–æ–≤–∞—Ä–∞"},null,8,["modelValue"])])),_:1}),(0,i.Wm)(U,null,{default:(0,i.w5)((()=>[(0,i.Wm)(D,null,{default:(0,i.w5)((()=>[(0,i.Uk)("–®—Ç—Ä–∏—Ö–∫–æ–¥")])),_:1}),(0,i.Wm)(V,{modelValue:m.productItem.product_barcode,"onUpdate:modelValue":e[19]||(e[19]=t=>m.productItem.product_barcode=t),name:"product_barcode",slot:"end",placeholder:"—à—Ç—Ä–∏—Ö–∫–æ–¥"},null,8,["modelValue"])])),_:1}),m.is_counted?((0,i.wg)(),(0,i.j4)(U,{key:2},{default:(0,i.w5)((()=>[(0,i.Wm)(D,null,{default:(0,i.w5)((()=>[(0,i.Uk)("–û—Å—Ç–∞—Ç–æ–∫ "),m.productItem.product_unit?((0,i.wg)(),(0,i.iD)("span",c,"("+(0,l.zw)(m.productItem.product_unit)+")",1)):(0,i.kq)("",!0)])),_:1}),(0,i.Wm)(V,{modelValue:m.productItem.product_quantity,"onUpdate:modelValue":e[20]||(e[20]=t=>m.productItem.product_quantity=t),name:"product_quantity",slot:"end",placeholder:"–≤ –Ω–∞–ª–∏—á–∏–∏"},null,8,["modelValue"])])),_:1})):(0,i.kq)("",!0),(0,i.Wm)(U,null,{default:(0,i.w5)((()=>[(0,i.Wm)(D,null,{default:(0,i.w5)((()=>[(0,i.Uk)("–ú–∏–Ω. –∑–∞–∫–∞–∑*"),m.productItem.product_unit?((0,i.wg)(),(0,i.iD)("span",p,"("+(0,l.zw)(m.productItem.product_unit)+")",1)):(0,i.kq)("",!0)])),_:1}),(0,i.Wm)(V,{modelValue:m.productItem.product_quantity_min,"onUpdate:modelValue":e[21]||(e[21]=t=>m.productItem.product_quantity_min=t),name:"product_quantity_min",type:"number",inputmode:"numeric",pattern:"\\d\\.",slot:"end"},null,8,["modelValue"])])),_:1}),m.is_option_child?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(U,{key:3},{default:(0,i.w5)((()=>[(0,i.Wm)(D,null,{default:(0,i.w5)((()=>[(0,i.Uk)("–ï–¥–∏–Ω–∏—Ü–∞*")])),_:1}),(0,i.Wm)(z,{modelValue:m.productItem.product_unit,"onUpdate:modelValue":e[22]||(e[22]=t=>m.productItem.product_unit=t),name:"product_unit",slot:"end",onIonChange:_.saveForm},{default:(0,i.w5)((()=>[(0,i.Wm)(P,{value:"—à—Ç"},{default:(0,i.w5)((()=>[(0,i.Uk)("—à—Ç—É–∫–∞")])),_:1}),(0,i.Wm)(P,{value:"–ø–æ—Ä—Ü–∏—è"},{default:(0,i.w5)((()=>[(0,i.Uk)("–ø–æ—Ä—Ü–∏—è –≤–µ—Å")])),_:1}),(0,i.Wm)(P,{value:"–ø–æ—Ä—Ü–∏—è –º–ª"},{default:(0,i.w5)((()=>[(0,i.Uk)("–ø–æ—Ä—Ü–∏—è –æ–±—ä–µ–º")])),_:1}),(0,i.Wm)(P,{value:"–∫–≥"},{default:(0,i.w5)((()=>[(0,i.Uk)("–∫–∏–ª–æ–≥—Ä–∞–º–º")])),_:1}),(0,i.Wm)(P,{value:"–º"},{default:(0,i.w5)((()=>[(0,i.Uk)("–º–µ—Ç—Ä")])),_:1}),(0,i.Wm)(P,{value:"–ª"},{default:(0,i.w5)((()=>[(0,i.Uk)("–ª–∏—Ç—Ä")])),_:1})])),_:1},8,["modelValue","onIonChange"])])),_:1})),"–∫–≥"!=m.productItem.product_unit?((0,i.wg)(),(0,i.j4)(U,{key:4},{default:(0,i.w5)((()=>["–ø–æ—Ä—Ü–∏—è –º–ª"==m.productItem.product_unit?((0,i.wg)(),(0,i.j4)(D,{key:0},{default:(0,i.w5)((()=>[(0,i.Uk)("–û–±—ä–µ–º –ª*")])),_:1})):((0,i.wg)(),(0,i.j4)(D,{key:1},{default:(0,i.w5)((()=>[(0,i.Uk)("–í–µ—Å 1"+(0,l.zw)(m.productItem.product_unit)+" (–∫–≥)*",1)])),_:1})),(0,i.Wm)(V,{modelValue:m.productItem.product_weight,"onUpdate:modelValue":e[23]||(e[23]=t=>m.productItem.product_weight=t),name:"product_weight",type:"number",step:"0.1",inputmode:"numeric",pattern:"\\d\\.",slot:"end"},null,8,["modelValue"])])),_:1})):(0,i.kq)("",!0)])),_:1})])),_:1}),(0,i.Wm)(j,{lines:"full"},{default:(0,i.w5)((()=>[(0,i.Wm)(F,null,{default:(0,i.w5)((()=>[(0,i.Wm)(L,null,{default:(0,i.w5)((()=>[(0,i.Wm)(D,null,{default:(0,i.w5)((()=>[(0,i.Uk)("–¶–µ–Ω–∞")])),_:1})])),_:1})])),_:1}),(0,i.Wm)(U,null,{default:(0,i.w5)((()=>[(0,i.Wm)(D,null,{default:(0,i.w5)((()=>[(0,i.Uk)("–¶–µ–Ω–∞*")])),_:1}),(0,i.Wm)(V,{modelValue:m.productItem.product_price,"onUpdate:modelValue":e[24]||(e[24]=t=>m.productItem.product_price=t),name:"product_price",type:"number",inputmode:"numeric",slot:"end"},null,8,["modelValue"])])),_:1}),(0,i.Wm)(U,null,{default:(0,i.w5)((()=>[(0,i.Wm)(D,null,{default:(0,i.w5)((()=>[(0,i.Uk)("–¶–µ–Ω–∞ –≤ –º–µ–Ω—é/–Ω–∞ –ø–æ–ª–∫–µ")])),_:1}),(0,i.Wm)(V,{modelValue:m.productItem.product_net_price,"onUpdate:modelValue":e[25]||(e[25]=t=>m.productItem.product_net_price=t),name:"product_net_price",type:"number",inputmode:"numeric",slot:"end"},null,8,["modelValue"])])),_:1}),(0,i.Wm)(U,null,{default:(0,i.w5)((()=>[(0,i.Wm)(D,{color:"success"},{default:(0,i.w5)((()=>[(0,i.Uk)("–¶–µ–Ω–∞ –∞–∫—Ü–∏–æ–Ω–Ω–∞—è")])),_:1}),(0,i.Wm)(V,{modelValue:m.productItem.product_promo_price,"onUpdate:modelValue":e[26]||(e[26]=t=>m.productItem.product_promo_price=t),name:"product_promo_price",type:"number",inputmode:"numeric",slot:"end",color:"success"},null,8,["modelValue"])])),_:1}),(0,i.Wm)(U,null,{default:(0,i.w5)((()=>[(0,i.Wm)(D,{color:"success"},{default:(0,i.w5)((()=>[(0,i.Uk)("–ù–∞—á–∞–ª–æ –∞–∫—Ü–∏–∏")])),_:1}),(0,i.Wm)(V,{type:"date",modelValue:m.productItem.product_promo_start,"onUpdate:modelValue":e[27]||(e[27]=t=>m.productItem.product_promo_start=t),name:"product_promo_start",slot:"end"},null,8,["modelValue"])])),_:1}),(0,i.Wm)(U,null,{default:(0,i.w5)((()=>[(0,i.Wm)(D,{color:"success"},{default:(0,i.w5)((()=>[(0,i.Uk)("–ö–æ–Ω–µ—Ü –∞–∫—Ü–∏–∏")])),_:1}),(0,i.Wm)(V,{type:"date",modelValue:m.productItem.product_promo_finish,"onUpdate:modelValue":e[28]||(e[28]=t=>m.productItem.product_promo_finish=t),name:"product_promo_finish",slot:"end"},null,8,["modelValue"])])),_:1})])),_:1})],32)):(0,i.kq)("",!0),m.productItem&&!m.is_option_child?((0,i.wg)(),(0,i.j4)(j,{key:3},{default:(0,i.w5)((()=>[(0,i.Wm)(L,null,{default:(0,i.w5)((()=>[(0,i.Wm)(D,null,{default:(0,i.w5)((()=>[(0,i.Uk)("–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞*")])),_:1})])),_:1}),(0,i.Wm)(M,{images:m.productItem.images,image_holder_id:m.productItem.product_id,title:"–í–∏—Ç—Ä–∏–Ω–∞ —Ç–æ–≤–∞—Ä–∞ 5 —Ñ–æ—Ç–æ",controller:"Product",ref:"productImgs"},null,8,["images","image_holder_id"]),(0,i.Wm)($,{onClick:e[30]||(e[30]=e=>t.$refs.productImgs.take_photo()),color:"light",expand:"block"},{default:(0,i.w5)((()=>[(0,i.Wm)(W,{src:r.cameraOutline,slot:"start"},null,8,["src"]),(0,i.Uk)(" –î–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ –Ω–∞ –≤–∏—Ç—Ä–∏–Ω—É ")])),_:1})])),_:1})):(0,i.kq)("",!0),m.productItem&&_.categoryList&&!m.is_option_child?((0,i.wg)(),(0,i.j4)(j,{key:4},{default:(0,i.w5)((()=>[(0,i.Wm)(L,null,{default:(0,i.w5)((()=>[(0,i.Wm)(D,null,{default:(0,i.w5)((()=>[(0,i.Uk)("–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–∞*")])),_:1})])),_:1}),0==_.categoryList.length?((0,i.wg)(),(0,i.j4)(U,{key:0,color:"light"},{default:(0,i.w5)((()=>[(0,i.Wm)(W,{src:r.compassOutline,slot:"start",color:"danger"},null,8,["src"]),(0,i.Wm)(D,{color:"danger"},{default:(0,i.w5)((()=>[(0,i.Uk)("–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–≤ —Ä–∞–∑–¥–µ–ª–µ '–î—Ä—É–≥–æ–µ')")])),_:1})])),_:1})):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(_.categoryList,(t=>((0,i.wg)(),(0,i.j4)(U,{key:t.group_id},{default:(0,i.w5)((()=>[(0,i.Wm)(W,{src:r.compassOutline,slot:"start",color:"primary"},null,8,["src"]),(0,i.Wm)(D,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(t.group_name),1)])),_:2},1024),(0,i.Wm)(W,{src:r.trashOutline,slot:"end",onClick:e=>_.categoryDelete(t.group_id,t.group_name)},null,8,["src","onClick"])])),_:2},1024)))),128)),(0,i.Wm)(U,{button:"",onClick:e[31]||(e[31]=t=>_.categoryAdd())},{default:(0,i.w5)((()=>[(0,i.Wm)(W,{src:r.addOutline,slot:"start",color:"primary"},null,8,["src"]),(0,i.Wm)(D,null,{default:(0,i.w5)((()=>[(0,i.Uk)("–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏—é")])),_:1})])),_:1})])),_:1})):(0,i.kq)("",!0)]})),_:1},8,["page-title"])}var _=o(6964),h=o(8903),g=o(2226);const w={class:"ion-padding",slot:"content"};function k(t,e,o,r,d,a){const n=(0,i.up)("ion-title"),u=(0,i.up)("ion-icon"),s=(0,i.up)("ion-toolbar"),c=(0,i.up)("ion-header"),p=(0,i.up)("ion-searchbar"),m=(0,i.up)("ion-img"),_=(0,i.up)("ion-avatar"),h=(0,i.up)("ion-label"),g=(0,i.up)("ion-item"),k=(0,i.up)("ion-checkbox"),f=(0,i.up)("ion-list"),I=(0,i.up)("ion-accordion"),y=(0,i.up)("ion-accordion-group"),v=(0,i.up)("ion-skeleton-text"),W=(0,i.up)("ion-content");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[(0,i.Wm)(s,{color:"secondary"},{default:(0,i.w5)((()=>[(0,i.Wm)(n,null,{default:(0,i.w5)((()=>[(0,i.Uk)("–ö–∞—Ç–µ–≥–æ—Ä–∏–∏")])),_:1}),(0,i.Wm)(u,{slot:"end",onClick:e[0]||(e[0]=t=>{a.closeModal()}),icon:r.closeOutline,size:"large",color:"medium"},null,8,["icon"])])),_:1})])),_:1}),(0,i.Wm)(W,null,{default:(0,i.w5)((()=>[(0,i.Wm)(p,{placeholder:"–§–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º",modelValue:d.searchQuery,"onUpdate:modelValue":e[1]||(e[1]=t=>d.searchQuery=t)},null,8,["modelValue"]),a.groupListFiltered.length>0?((0,i.wg)(),(0,i.j4)(y,{key:0},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.groupListTree,(e=>((0,i.wg)(),(0,i.j4)(I,{key:e.group_id},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{slot:"header"},{default:(0,i.w5)((()=>[e.image_hash?((0,i.wg)(),(0,i.j4)(_,{key:0,slot:"start"},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{src:t.$heap.state.hostname+"image/get.php/"+e.image_hash+".50.50.webp"},null,8,["src"])])),_:2},1024)):(0,i.kq)("",!0),(0,i.Wm)(h,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(e.group_name),1)])),_:2},1024)])),_:2},1024),(0,i._)("div",w,[(0,i.Wm)(f,null,{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.children,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e.group_id},[(0,i.Wm)(g,null,{default:(0,i.w5)((()=>[e.image_hash?((0,i.wg)(),(0,i.j4)(_,{key:0,slot:"start"},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{src:t.$heap.state.hostname+"image/get.php/"+e.image_hash+".50.50.webp"},null,8,["src"])])),_:2},1024)):(0,i.kq)("",!0),(0,i.Wm)(h,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(e.group_name),1)])),_:2},1024),(0,i.Wm)(k,{slot:"end",checked:e.is_marked,onClick:t=>a.mimickChage(t.target,e.group_id)},null,8,["checked","onClick"])])),_:2},1024)])))),128))])),_:2},1024)])])),_:2},1024)))),128))])),_:1})):((0,i.wg)(),(0,i.j4)(f,{key:1},{default:(0,i.w5)((()=>[((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)([1,2,3,4],(t=>(0,i.Wm)(g,{key:t},{default:(0,i.w5)((()=>[(0,i.Wm)(v,{style:{width:"100%"}})])),_:2},1024))),64))])),_:1}))])),_:1})],64)}var f=o(9755),I=o.n(f),y={props:["controller","memberId","memberOfIds","memberLimit"],components:{IonCheckbox:_.nz,IonContent:_.W2,IonHeader:_.Gu,IonToolbar:_.sr,IonTitle:_.wd,IonIcon:_.gu,IonImg:_.Xz,IonAvatar:_.BJ,IonLabel:_.Q$,IonList:_.q_,IonItem:_.Ie,IonAccordion:_.We,IonAccordionGroup:_.eh,IonSearchbar:_.VI,IonSkeletonText:_.CK},setup(){return{closeOutline:h.fID}},data(){return{searchQuery:"",groupList:null,checkedGroupList:[]}},created(){this.listGroupGet(),this.checkedGroupList=this.memberOfIds||[]},computed:{groupListFiltered(){var t,e;if(!this.searchQuery)return null!==(e=this.groupList)&&void 0!==e?e:[];const o=new RegExp(this.searchQuery.replace(/^[\w\d\s]/,"").replace(/\s/g,".*"),"im");return null!==(t=this.groupList.filter((t=>{var e;return null===(e=t.group_path)||void 0===e?void 0:e.match(o)})))&&void 0!==t?t:[]},groupListTree(){let t=[];for(let e of this.groupListFiltered){let o=t.findIndex((t=>e.group_parent_id==t.group_id));if(o<0){let i=this.groupList.find((t=>t.group_id==e.group_parent_id));if(!i)continue;i.children=[],o=t.push(i)-1}t[o].children.push(e)}return t},parentGroupList(){var t;return null===(t=this.groupListFiltered)||void 0===t?void 0:t.filter((t=>0==t.group_parent_id))},childGroupList(){let t={};for(let e of this.parentGroupList)t[e.group_id]=this.groupListFiltered.filter((t=>t.group_parent_id==e.group_id));return t}},methods:{async listGroupGet(){this.groupList=await I().get(this.$heap.state.hostname+this.controller+"/listGroupGet"),this.itemMarkGroups()},itemMarkGroups(){if(this.groupList)try{for(let t of this.groupList)t.is_marked=this.checkedGroupList.includes(t.group_id)?1:0}catch{}},async itemUpdateGroup(t,e){const o={[this.controller.toLowerCase()+"_id"]:this.memberId,is_joined:t,group_id:e};try{await I().post(this.$heap.state.hostname+this.controller+"/itemUpdateGroup",o)}catch(i){this.$flash("–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ")}},mimickChage(t,e){const o=this;setTimeout((()=>{o.groupChanged(t,e)}),0)},async groupChanged(t,e){const o=t.checked?1:0;if(o){if(this.checkedGroupList.length>=this.memberLimit)return this.$flash(`–ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –Ω–µ –±–æ–ª—å—à–µ ${this.memberLimit} –∫–∞—Ç–µ–≥–æ—Ä–∏–π`),void(t.checked=0);1==this.memberLimit&&this.closeModal(),this.checkedGroupList.push(e)}else this.checkedGroupList=this.checkedGroupList.filter((function(t,o,i){return t!=e}));this.itemUpdateGroup(o,e)},closeModal(){_.Fy.dismiss(this.checkedGroupList)}}},v=o(3744);const W=(0,v.Z)(y,[["render",k]]);var b=W,U=o(2008),C=o(9042),O={components:{IonInput:_.pK,IonTextarea:_.g2,IonCard:_.PM,IonCardContent:_.FN,IonCardHeader:_.Zi,IonToggle:_.ho,IonIcon:_.gu,IonItem:_.Ie,IonList:_.q_,IonLabel:_.Q$,IonItemDivider:_.rH,IonItemGroup:_.Ub,IonButton:_.YG,IonProgressBar:_.X7,IonText:_.yW,IonSelect:_.t9,IonSelectOption:_.n0,IonImg:_.Xz,IonChip:_.hM,IonCardTitle:_.Dq,IonCardSubtitle:_.tO,imageTileComp:g.Z},setup(){return{cameraOutline:h.kuq,trashOutline:h.gtu,banOutline:h.L6S,personOutline:h.QJ7,addOutline:h.s6O,pizzaOutline:h.fqo,compassOutline:h.gmD,chevronBack:h.Mny,layersOutline:h.Y1P,ribbonOutline:h.Muk}},data(){return{productId:this.$route.params.id,productItem:null,productGroupList:null,validity:0,validity_min:80,optionData:null,refreshOptions:this.$route.query.refreshOptions,is_option_parent:!1,is_option_child:!1,is_groups_marked:0,is_deleted:0,is_disabled:0,is_counted:0}},computed:{message(){var t,e,o;return null!==(t=this.productItem)&&void 0!==t&&t.deleted_at?"–¢–æ–≤–∞—Ä –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω –∏ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω. –í—ã –µ—â–µ –º–æ–∂–µ—Ç–µ –æ—Ç–º–µ–Ω–∏—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ":1==(null===(e=this.productItem)||void 0===e?void 0:e.is_disabled)?"–¢–æ–≤–∞—Ä –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω –∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏ —É –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞":1!=(null===(o=this.productItem)||void 0===o?void 0:o.is_counted)?"–¢–æ–≤–∞—Ä –∞–∫—Ç–∏–≤–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥–∞–∂–µ. –£—á–µ—Ç –æ—Å—Ç–∞—Ç–∫–æ–≤ —Ç–æ–≤–∞—Ä–∞ –Ω–µ –≤–µ–¥–µ—Ç—Å—è":"–¢–æ–≤–∞—Ä –∞–∫—Ç–∏–≤–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥–∞–∂–µ."},messageClass(){var t,e,o;return null!==(t=this.productItem)&&void 0!==t&&t.deleted_at?"deleted":1==(null===(e=this.productItem)||void 0===e?void 0:e.is_disabled)?"disabled":1!=(null===(o=this.productItem)||void 0===o?void 0:o.is_counted)?"primary":"active"},categoryList(){let t=[];try{let e=this.productItem.member_of_groups.group_ids.split(","),o=this.productItem.member_of_groups.group_names.split(",");for(let i in e)t.push({group_id:e[i],group_name:o[i]})}catch{}return t}},created(){this.listGroupGet(),this.itemGet()},ionViewDidEnter(){var t;this.refreshOptions&&null!==(t=this.productItem)&&void 0!==t&&t.product_parent_id&&this.itemOptionGet()},methods:{async itemGet(){try{let t=await I().post(U.Z.state.hostname+"Product/itemGet",{product_id:this.productId});this.productItem=this.itemPrepare(t),this.itemParseFlags(),this.is_option_child=this.productItem.product_parent_id&&this.productItem.product_parent_id!=this.productItem.product_id,this.is_option_parent=this.productItem.product_parent_id&&this.productItem.product_parent_id==this.productItem.product_id,await this.itemOptionGet()}catch(t){}},itemPrepare(t){return t.product_promo_start&&(t.product_promo_start=t.product_promo_start.split(" ")[0]),t.product_promo_finish&&(t.product_promo_finish=t.product_promo_finish.split(" ")[0]),t},itemParseFlags(){this.is_deleted=null==this.productItem.deleted_at?0:1,this.is_disabled=0==this.productItem.is_disabled?0:1,this.is_counted=0==this.productItem.is_counted?0:1},async itemDelete(t){const e=t?"itemDelete":"itemUnDelete";try{await I().post(U.Z.state.hostname+"Product/"+e,{product_id:this.productId}),this.productItem.deleted_at=t?1:null,(this.is_option_child||this.is_option_parent)&&this.itemOptionGet()}catch{this.itemGet()}},async itemDisable(t){if(this.productItem.is_disabled!=t)try{await I().post(U.Z.state.hostname+"Product/itemDisable",{product_id:this.productId,is_disabled:t}),this.productItem.is_disabled=t}catch{this.$flash("–ò–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ"),this.itemGet()}},async itemUpdate(t){try{return await I().post(U.Z.state.hostname+"Product/itemUpdate",JSON.stringify(t)),this.$flash("üíæ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ"),!0}catch(e){const t=e.responseJSON.messages.error;return null!==t&&void 0!==t&&t.includes("product_description")?this.$flash("–û–ø–∏—Å–∞–Ω–∏–µ —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–æ–µ"):null!==t&&void 0!==t&&t.includes("product_name")?this.$flash("–ù–∞–∑–≤–∞–Ω–∏–µ —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–æ–µ"):this.$flash("–ò–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ"),this.itemGet(),!1}},async itemOptionGet(){this.productItem.product_parent_id||(this.optionData=null);const t={product_parent_id:this.productItem.product_parent_id};let e=await I().post(`${this.$heap.state.hostname}Product/itemOptionGet`,t);this.optionData={parent:e[0],children:e.slice(1)}},async itemOptionCreate(){var t,e,o;const i=null!==(t=null===(e=this.optionData)||void 0===e||null===(o=e.children)||void 0===o?void 0:o.length)&&void 0!==t?t:0,l={is_disabled:1,store_id:this.productItem.store_id,product_parent_id:this.productItem.product_parent_id,product_name:"OPTION",product_price:0,product_option:`–í–∞—Ä–∏–∞–Ω—Ç#${i}`};try{await I().post(`${this.$heap.state.hostname}Product/itemCreate`,l),this.itemOptionGet()}catch(r){}},async itemOptionSet(t){t?await this.itemOptionSave(this.productId,this.productId):await this.itemOptionDelete(this.productId),this.itemGet()},async itemOptionUpdate(t){},async itemOptionSave(t,e){try{await I().post(`${this.$heap.state.hostname}Product/itemOptionSave`,{product_id:t,product_parent_id:e})}catch{}},async itemOptionDelete(t){if(confirm("–£–¥–∞–ª–∏—Ç—å —Ä–∞–∑–Ω–æ–≤–∏–¥–Ω–æ—Å—Ç–∏ —Ç–æ–≤–∞—Ä–∞?"))try{await I().post(`${this.$heap.state.hostname}Product/itemOptionDelete`,{product_id:t}),this.itemOptionGet()}catch{}},checkPromoPrice(t){const e=parseFloat(this.productItem.product_promo_price),o=parseFloat(this.productItem.product_price);if(o>0&&e>0&&o<=e){"product_promo_price"==t&&(this.productItem.product_price=e+1),"product_price"==t&&(this.productItem.product_promo_price=o-1);const i={product_id:this.productId,product_promo_price:this.productItem.product_promo_price,product_price:this.productItem.product_price};return this.itemUpdate(i),this.$flash("–ê–∫—Ü–∏–æ–Ω–Ω–∞—è —Ü–µ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –Ω–∏–∂–µ –æ—Å–Ω–æ–≤–Ω–æ–π. –í–Ω–∏–º–∞–Ω–∏–µ —Ü–µ–Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∞!"),!1}return!0},saveForm(t){const e=t.target.name,o=this.productItem[e]=t.target.value;this.checkPromoPrice(e)&&this.save(e,o)},async save(t,e){if(!this.productItem.product_id)return;let o={product_id:this.productItem.product_id,[t]:e};this.itemUpdate(o)&&(this.productItem[t]=e,this.itemParseFlags())},categoryDelete(t,e){if(confirm("–ò—Å–∫–ª—é—á–∏—Ç—å —Ç–æ–≤–∞—Ä –∏–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "+e+"?"))try{this.itemUpdateGroup(0,t)}catch{}},async categoryAdd(){var t,e,o;const i=(null===(t=this.productItem)||void 0===t||null===(e=t.member_of_groups)||void 0===e||null===(o=e.group_ids)||void 0===o?void 0:o.split(","))||[],l=await _.Fy.create({component:b,componentProps:{controller:"Product",memberId:this.productId,memberOfIds:i,memberLimit:1},initialBreakpoint:.75,breakpoints:[.75,1],canDissmiss:!0});l.present(),C.Z.on("dismissModal",(()=>{l.dismiss()})),await l.onDidDismiss(),this.itemGet()},async itemUpdateGroup(t,e){const o={product_id:this.productId,is_joined:t,group_id:e};try{await I().post(U.Z.state.hostname+"Product/itemUpdateGroup",o)}catch(i){this.$flash("–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ")}this.itemGet()},async listGroupGet(){try{this.productGroupList=await I().get(U.Z.state.hostname+"Product/listGroupGet"),this.itemMarkGroups()}catch{}},showProductInStore(){let t=0;try{t=this.productItem.member_of_groups.group_ids.split(",")[0]}catch{}this.$go({path:"store-"+this.productItem.store_id,query:{sub_group_id:t}})}}};const D=(0,v.Z)(O,[["render",m],["__scopeId","data-v-4ce0da85"]]);var V=D}}]);
//# sourceMappingURL=166.beaad446.js.map