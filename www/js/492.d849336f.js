"use strict";(self["webpackChunkTezkel"]=self["webpackChunkTezkel"]||[]).push([[492],{4548:function(e,t,i){i.d(t,{Z:function(){return k}});var o=i(6252),a=i(3577);const n={class:"center"},s={key:0,class:"rightend"},r=(0,o.Uk)("мин"),l={key:1,class:"rightend"},c=(0,o.Uk)(" Выбрать адрес доставки ");function d(e,t,i,d,u,m){const p=(0,o.up)("ion-img"),_=(0,o.up)("ion-text"),h=(0,o.up)("ion-note"),g=(0,o.up)("ion-icon"),y=(0,o.up)("ion-label"),w=(0,o.up)("ion-item"),v=(0,o.up)("ion-textarea");return(0,o.wg)(),(0,o.iD)(o.HY,null,[m.isMainLocationSet?((0,o.wg)(),(0,o.iD)("div",{key:0,onClick:t[0]||(t[0]=e=>m.selectDeliveryAddress()),class:"selector"},[(0,o._)("div",n,[u.location_main.image_hash?((0,o.wg)(),(0,o.j4)(p,{key:0,src:e.$heap.state.hostname+"image/get.php/"+u.location_main.image_hash+".32.32.webp"},null,8,["src"])):(0,o.kq)("",!0),(0,o.Wm)(_,{style:{margin:"5px"},color:"primary"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.$heap.state.user?.location_main?.location_address),1)])),_:1})]),i.deliveryTime?((0,o.wg)(),(0,o.iD)("div",s,[(0,o.Wm)(_,{style:{"font-size":"24px"}},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(i.deliveryTime.time),1)])),_:1}),(0,o.Wm)(h,{style:{"font-size":"10px"}},{default:(0,o.w5)((()=>[r])),_:1})])):((0,o.wg)(),(0,o.iD)("div",l))])):((0,o.wg)(),(0,o.j4)(w,{key:1,detail:"",button:"",onClick:t[1]||(t[1]=e=>m.selectDeliveryAddress())},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{slot:"start",style:{color:"var(--ion-color-primary)"},icon:d.location},null,8,["icon"]),(0,o.Wm)(y,null,{default:(0,o.w5)((()=>[c])),_:1})])),_:1})),i.showComment?((0,o.wg)(),(0,o.j4)(w,{key:2},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{placeholder:"комментарий к адресу",onChange:t[2]||(t[2]=e=>m.locationCommentChanged()),modelValue:e.$heap.state.user.location_main.location_comment,"onUpdate:modelValue":t[3]||(t[3]=t=>e.$heap.state.user.location_main.location_comment=t)},null,8,["modelValue"])])),_:1})):(0,o.kq)("",!0)],64)}var u=i(7873),m=i(8903),p=i(2008),_=i(9127),h=i(9042),g=i(9755),y=i.n(g),w={props:["deliveryTime","showComment"],components:{IonIcon:u.gu,IonTextarea:u.g2},setup(){return{location:m.xhW}},data(){return{location_main:p.Z.state.user.location_main}},created(){let e=this;h.Z.on("userMainLocationSet",(t=>{e.location_main=t}))},methods:{selectDeliveryAddress(){_.Z.push({name:"UserAddresses"})},async locationCommentChanged(){const e={location_id:p.Z.state.user.location_main.location_id,location_comment:p.Z.state.user.location_main.location_comment};y().post(this.$heap.state.hostname+"Location/itemUpdate",JSON.stringify(e))}},computed:{isSignedIn(){return p.Z.state.user.user_id&&p.Z.state.user.user_id>-1},isMainLocationSet(){return this.location_main?1:0}}},v=i(3744);const f=(0,v.Z)(w,[["render",d],["__scopeId","data-v-b676decc"]]);var k=f},3492:function(e,t,i){i.r(t),i.d(t,{default:function(){return $}});var o=i(6252);function a(e,t,i,a,n,s){const r=(0,o.up)("home-slider"),l=(0,o.up)("user-address-widget"),c=(0,o.up)("home-primary-category-widget"),d=(0,o.up)("store-list"),u=(0,o.up)("base-layout");return(0,o.wg)(),(0,o.j4)(u,{pageLogo:"./assets/icon/tezkel_logo.png"},{default:(0,o.w5)((()=>[(0,o.Wm)(r),(0,o.Wm)(l,{deliveryTime:n.primaryDeliveryTime},null,8,["deliveryTime"]),(0,o.Wm)(c,{onDeliveryTimeGet:t[0]||(t[0]=e=>{n.primaryDeliveryTime=e})}),(0,o.Wm)(d)])),_:1})}var n=i(3577);const s=["src"],r={class:"home_slide"},l={style:{"font-size":"3em"}};function c(e,t,i,a,c,d){const u=(0,o.up)("swiper-slide"),m=(0,o.up)("swiper");return(0,o.wg)(),(0,o.j4)(m,{modules:e.modules,autoplay:{delay:3e3,disableOnInteraction:!1},loop:!0,effect:"fade"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.home_slides,(e=>((0,o.wg)(),(0,o.j4)(u,{key:e.title,style:(0,n.j5)(`background-color:${e.color};`)},{default:(0,o.w5)((()=>[(0,o._)("img",{src:e.image,class:"home_slide_img"},null,8,s),(0,o._)("div",r,[(0,o._)("h1",l,(0,n.zw)(e.title),1),(0,o._)("p",null,(0,n.zw)(e.description),1)])])),_:2},1032,["style"])))),128))])),_:1},8,["modules"])}var d=i(9755),u=i.n(d),m=i(702),p=i(3181),_=(0,o.aZ)({components:{Swiper:p.t,SwiperSlide:p.o},data(){return{home_slides:[],error:""}},created(){this.getSlideList()},methods:{getSlideList(){var e=this;u().get("/assets/homeslider/conf.json").done((function(t){e.home_slides=t.slides})).fail((function(t){e.error=t.responseJSON.messages.error}))}},setup(){return{modules:[m.pt,m.xW]}}}),h=i(3744);const g=(0,h.Z)(_,[["render",c],["__scopeId","data-v-27f49c76"]]);var y=g;const w={class:"crop-to-fit"};function v(e,t,i,a,s,r){const l=(0,o.up)("ion-img"),c=(0,o.up)("ion-chip"),d=(0,o.up)("ion-item"),u=(0,o.up)("ion-card"),m=(0,o.up)("ion-list");return s.storeList?((0,o.wg)(),(0,o.j4)(m,{key:0,class:"store-list"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.storeList,(t=>((0,o.wg)(),(0,o.j4)(u,{button:"",key:t.store_id,onClick:i=>e.$router.push("store-"+t.store_id)},{default:(0,o.w5)((()=>[(0,o._)("div",w,[t.image_hash?((0,o.wg)(),(0,o.j4)(l,{key:0,src:e.$heap.state.hostname+"/image/get.php/"+t.image_hash+".200.200.webp"},null,8,["src"])):(0,o.kq)("",!0)]),t.is_opened?((0,o.wg)(),(0,o.j4)(c,{key:0,color:"success"},{default:(0,o.w5)((()=>[(0,o.Uk)("Открыт до "+(0,n.zw)(t.store_time_closes)+":00",1)])),_:2},1024)):((0,o.wg)(),(0,o.j4)(c,{key:1,color:"danger"},{default:(0,o.w5)((()=>[(0,o.Uk)("Закрыт до "+(0,n.zw)(t.store_time_opens)+":00",1)])),_:2},1024)),(0,o.Wm)(d,{lines:"none"},{default:(0,o.w5)((()=>[(0,o._)("h3",null,(0,n.zw)(t.store_name),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):(0,o.kq)("",!0)}var f=i(7873),k=i(2008),Z={components:{IonList:f.q_},data(){return{storeList:null}},methods:{async listGet(){var e=k.Z.state.user.location_main;if(e)try{this.storeList=await u().post(k.Z.state.hostname+"Store/listNearGet",{location_id:e.location_id})}catch{}else console.log("what to do address not set!!!")}},created(){this.listGet()}};const T=(0,h.Z)(Z,[["render",v],["__scopeId","data-v-61447249"]]);var S=T,D=i(4548);const L={key:0,id:"hcat_widget_wrapper"},W={id:"hcat_widget_grid"};function C(e,t){const i=(0,o.up)("ion-note"),a=(0,o.up)("ion-item"),s=(0,o.up)("ion-img"),r=(0,o.up)("ion-thumbnail"),l=(0,o.up)("ion-label");return e.productGroupList?((0,o.wg)(),(0,o.iD)("div",L,[(0,o.Wm)(a,{button:"",detail:"",lines:"none",color:"light",onClick:t[0]||(t[0]=t=>this.$router.push("store-"+e.primaryStoreData.store_id))},{default:(0,o.w5)((()=>[(0,o._)("h4",null,(0,n.zw)(e.primaryStoreData.store_name),1),(0,o.Wm)(i,{slot:"helper"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Доставка за "+(0,n.zw)(e.deliveryTime.timeMin)+"-"+(0,n.zw)(e.deliveryTime.timeMax)+"мин ",1)])),_:1})])),_:1}),(0,o._)("div",W,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.productGroupList,(t=>((0,o.wg)(),(0,o.iD)("div",{key:t.group_id},[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s,{src:e.$heap.state.hostname+"image/get.php/"+t.image_hash+".100.100.webp"},null,8,["src"])])),_:2},1024),(0,o.Wm)(l,{style:{height:"2em","text-align":"center"}},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(t.group_name),1)])),_:2},1024)])))),128))])])):(0,o.kq)("",!0)}var z=i(9042),b=i(4405),G=(0,o.aZ)({components:{IonImg:f.Xz,IonThumbnail:f.Bs,IonNote:f.uN},data(){return{productGroupList:null,primaryStoreData:null,deliveryTime:{},main_location_id:null}},created(){let e=this;z.Z.on("userMainLocationSet",(t=>{e.main_location_id=t.location_id,e.productGroupListGet()})),this.main_location_id=k.Z.state.user.location_main?k.Z.state.user.location_main.location_id:null,this.productGroupListGet()},methods:{async productGroupListGet(){if(this.main_location_id)try{const e=await u().get(k.Z.state.hostname+"Store/primaryNearGet",{location_id:this.main_location_id});this.productGroupList=e.category_list,this.deliveryTime=b.Z.deliveryTimeCalculate(e.distance,e.store_time_preparation),this.primaryStoreData=e,this.$emit("deliveryTimeGet",this.deliveryTime)}catch(e){}}}});const I=(0,h.Z)(G,[["render",C],["__scopeId","data-v-aebe5c8a"]]);var j=I,U={components:{HomeSlider:y,StoreList:S,UserAddressWidget:D.Z,HomePrimaryCategoryWidget:j},data(){return{primaryDeliveryTime:null}}};const x=(0,h.Z)(U,[["render",a]]);var $=x},4405:function(e,t,i){var o=i(2008);const a={deliveryCalculate(e){if(!e.locations||!e.locations[0]||!e.locations[0].distance)return null;const t=e.locations[0].distance,i=e.store_time_preparation||0;return a.deliveryTimeCalculate(t,i)},deliveryTimeCalculate(e,t){t=t??o.Z.state.deliverySettings.defaultPreparationTime;const i=o.Z.state.deliverySettings.deliveryTimeDelta,a=5*Math.round(e/o.Z.state.deliverySettings.courierVelocity*60/5)+parseInt(t),n=a>i?a-i:a,s=n+i;return{time:a,timeMin:n,timeMax:s}}};t["Z"]=a}}]);
//# sourceMappingURL=492.d849336f.js.map