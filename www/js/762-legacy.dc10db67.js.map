{"version":3,"file":"js/762-legacy.dc10db67.js","mappings":"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","sources":["webpack://tezkel/./src/components/LedgerComp.vue","webpack://tezkel/./src/components/LedgerComp.vue?a865"],"sourcesContent":["<style >\r\n.tag{\r\n  padding: 5px;\r\n  color:#ccc;\r\n  display: inline-block;\r\n}\r\n.tag:hover{\r\n  color: var(--ion-color-primary);\r\n  cursor:pointer;\r\n}\r\n</style>\r\n\r\n\r\n<template>\r\n<div>\r\n  <ion-list>\r\n    <ion-item>\r\n      <ion-title>Баланс</ion-title>\r\n      <ion-text slot=\"end\" v-if=\"balance>0\" color=\"success\">{{ balance }}{{ $heap.state.currencySign }}</ion-text>\r\n      <ion-text slot=\"end\" v-else>{{ balance }}{{ $heap.state.currencySign }}</ion-text>\r\n    </ion-item>\r\n  </ion-list>\r\n\r\n  <ion-accordion-group :value=\"settingsType\">\r\n    <ion-accordion value=\"period\">\r\n      <ion-item slot=\"header\">\r\n        <ion-icon :icon=\"calendarOutline\" slot=\"start\"/>\r\n        <ion-text>Период</ion-text>\r\n      </ion-item>\r\n      <ion-list slot=\"content\">\r\n        <ion-item>\r\n          <ion-text>Начальная дата</ion-text>\r\n          <div slot=\"end\" style=\"display:grid;grid-template-columns:120px 100px;\">\r\n            <ion-input type=\"date\" v-model=\"start_at\"  @ionChange=\"listGet()\"/>\r\n            <ion-input type=\"text\" style=\"text-align:right\" color=\"medium\" v-if=\"meta.sum_start\" :value=\"`${meta.sum_start}${$heap.state.currencySign}`\" readonly />\r\n          </div>\r\n        </ion-item>\r\n        <ion-item>\r\n          <ion-text>Обороты</ion-text>\r\n          <div slot=\"end\" style=\"display:grid;grid-template-columns:120px 100px;\">\r\n            <ion-input type=\"text\" style=\"text-align:right\" color=\"medium\" v-if=\"meta.sum_debit\" :value=\"`+${meta.sum_debit}${$heap.state.currencySign}`\" readonly />\r\n            <ion-input type=\"text\" style=\"text-align:right\" color=\"medium\" v-if=\"meta.sum_credit\" :value=\"`-${meta.sum_credit}${$heap.state.currencySign}`\" readonly />\r\n          </div>\r\n        </ion-item>\r\n        <ion-item>\r\n          <ion-text>Конечная дата</ion-text>\r\n          <div slot=\"end\" style=\"display:grid;grid-template-columns:120px 100px;\">\r\n            <ion-input type=\"date\" v-model=\"finish_at\" />\r\n            <ion-input type=\"text\" style=\"text-align:right\" color=\"medium\" v-if=\"meta.sum_finish\" :value=\"`${meta.sum_finish}${$heap.state.currencySign}`\" readonly />\r\n          </div>\r\n        </ion-item>\r\n      </ion-list>\r\n    </ion-accordion>\r\n    <ion-accordion value=\"tags\">\r\n      <ion-item slot=\"header\">\r\n        <ion-icon :icon=\"pricetagOutline\" slot=\"start\"/>\r\n        <ion-text>Фильтр по тегам</ion-text>\r\n      </ion-item>\r\n      <ion-list slot=\"content\">\r\n        <ion-item lines=\"none\">\r\n          <ion-text>\r\n            <ion-chip v-for=\"(tagLabel,tag) in tagDict\" :key=\"tag\" color=\"primary\">#{{tagLabel}} <ion-icon :src=\"closeCircle\" @click=\"itemTagRemove(tag)\"></ion-icon></ion-chip>\r\n            <ion-chip @click=\"itemTagCreate()\" color=\"medium\"><ion-icon :src=\"addOutline\"/><ion-label>Добавить #тег</ion-label></ion-chip>\r\n          </ion-text>\r\n        </ion-item>\r\n      </ion-list>\r\n    </ion-accordion>\r\n  </ion-accordion-group>\r\n  <ion-searchbar v-model=\"searchQuery\" placeholder=\"Поиск по сумме или описанию\" @ionChange=\"listGet()\" />\r\n  <ion-list v-if=\"ledger==null\">\r\n    <ion-item v-for=\"i in [1,2,3]\" :key=\"i\">\r\n        <ion-text slot=\"start\"><ion-skeleton-text animated style=\"width:50px\" /></ion-text>\r\n        <ion-label><ion-skeleton-text animated style=\"width:100%\" /></ion-label>\r\n        <ion-label slot=\"end\" color=\"success\"><ion-skeleton-text animated style=\"width:50px\" /></ion-label>\r\n    </ion-item>\r\n  </ion-list>\r\n  <ion-list v-else-if=\"ledger.length>0\">\r\n    <div v-for=\"trans in ledgerCalc\" :key=\"trans.trans_id\">\r\n      <ion-item :detail=\"is_admin\" lines=\"none\" @click=\"itemClick(trans.trans_id)\">\r\n          <ion-text slot=\"start\">{{trans.date}}</ion-text>\r\n          <ion-text>\r\n            {{trans.trans_description}} {{trans.trans_role}}\r\n          </ion-text>\r\n          <ion-label slot=\"end\" v-if=\"trans.amount_sign>0\" color=\"success\">{{trans.trans_amount}}</ion-label>\r\n          <ion-label slot=\"end\" v-else-if=\"trans.amount_sign<0\"  color=\"danger\">{{trans.trans_amount}}</ion-label>\r\n          <ion-label slot=\"end\" v-else  color=\"medium\">{{trans.trans_amount}}</ion-label>\r\n      </ion-item>\r\n      <ion-item>\r\n        <ion-text>\r\n          <div class=\"tag\" v-for=\"(tag,i) in trans.tag_list\" :key=\"i\" @click=\"itemTagAdd(tag)\">#{{tag[1]}}</div>\r\n        </ion-text>\r\n      </ion-item>\r\n    </div>\r\n  </ion-list>\r\n  <ion-list v-else>\r\n    <ion-item>\r\n        Нет операций в данном периоде\r\n    </ion-item>\r\n  </ion-list>\r\n\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  IonIcon,\r\n  IonTitle,\r\n  IonLabel,\r\n  IonItem,\r\n  IonInput,\r\n  IonList,\r\n  IonAccordion,\r\n  IonAccordionGroup,\r\n  IonText,\r\n  IonSkeletonText,\r\n  IonSearchbar,\r\n  IonChip,\r\n  modalController,\r\n  actionSheetController,\r\n}                             from \"@ionic/vue\";\r\nimport { \r\n  calendarOutline,\r\n  addOutline,\r\n  closeCircle,\r\n  pricetagOutline,\r\n}                             from \"ionicons/icons\";\r\nimport jquery                 from \"jquery\";\r\nimport User                   from '@/scripts/User.js'\r\n\r\nimport ItemPicker          from '@/components/ItemPicker.vue'\r\n\r\nexport default {\r\n  components: {\r\n    IonIcon,\r\n    IonTitle,\r\n    IonLabel,\r\n    IonItem,\r\n    IonInput,\r\n    IonList,\r\n    IonAccordion,\r\n    IonAccordionGroup,\r\n    IonText,\r\n    IonSkeletonText,\r\n    IonSearchbar,\r\n    IonChip,\r\n  },\r\n  props:[],\r\n  setup(){\r\n    return {\r\n      calendarOutline,\r\n      addOutline,\r\n      closeCircle,\r\n      pricetagOutline,\r\n    }\r\n  },\r\n  data() {\r\n    console.log(this.query)\r\n    const today = new Date();\r\n    const firstDay = new Date(Date.parse(`${today.getFullYear()}-${today.getMonth()+1}-1`));\r\n    return {\r\n      balance: '-',\r\n      start_at: firstDay.toISOString().slice(0, 10),\r\n      finish_at: today.toISOString().slice(0, 10),\r\n      searchQuery:'',\r\n      tagQuery:'',\r\n      tagDict:null,\r\n\r\n      ledger:null,\r\n      meta:{},\r\n      today:today,\r\n      settingsType:null,\r\n    };\r\n  },\r\n  computed:{\r\n    ledgerCalc(){\r\n        if( this.ledger==null ){\r\n            return null;\r\n        }\r\n        let lcalc=[];\r\n        for(let trans of this.ledger){\r\n            trans.date=this.toLocDate(trans.trans_date)\r\n            trans.tag_list= trans.tags?.substring(1)?.toLowerCase()?.split('|')?.map(tag=>tag.split('#'))\r\n            lcalc.push(trans)\r\n        }\r\n        return lcalc\r\n    },\r\n    is_admin(){\r\n      return User.isAdmin()\r\n    }\r\n  },\r\n  watch:{\r\n    query:function(){\r\n      this.listGet()\r\n    }\r\n  },\r\n  methods: {\r\n    async listGet() {\r\n      try {\r\n        const tagQuery=Object.keys(this.tagDict??{})?.join(' ')\r\n        const request={\r\n            start_at:this.start_at,\r\n            finish_at:this.finish_at,\r\n            tagQuery,\r\n            searchQuery:this.searchQuery,\r\n        }\r\n        const response= await jquery.post(`${this.$heap.state.hostname}Transaction/listGet`,request)\r\n        this.ledger=response.ledger\r\n        this.meta=response.meta\r\n        if( this.finish_at==this.today.toISOString().slice(0, 10) ){\r\n            this.balance=response.meta.sum_finish\r\n        }\r\n      } catch (err) {\r\n        const exception = err.responseJSON;\r\n        const exception_code = exception.messages.error;\r\n        switch (exception_code) {\r\n          case \"large_interval\":\r\n            this.$flash(\"Период должен быть не больше 3 месяцев\")\r\n            break;\r\n          default:\r\n            this.$flash(\"Ошибка получения выписки\")\r\n            break;\r\n        }\r\n        this.ledger=[]\r\n        this.balance=0\r\n        return false;\r\n      }\r\n    },\r\n    toLocDate( iso ){\r\n        const event = new Date(Date.parse(iso));\r\n        const options = { month: 'short', day: 'numeric' };\r\n\r\n        return event.toLocaleDateString(undefined, options);\r\n    },\r\n    itemClick(trans_id){\r\n      if( !User.isAdmin() ){\r\n        return\r\n      }\r\n      this.$router.push(`/admin/transaction-edit-${trans_id}`)\r\n    },\r\n    async itemTagPick( itemType ){\r\n      const modal = await modalController.create({\r\n          component: ItemPicker,\r\n          componentProps:{itemType},\r\n          initialBreakpoint: 0.75,\r\n          breakpoints: [0.75, 1],\r\n          canDissmiss:true,\r\n      });\r\n      modal.present()\r\n      this.$topic.on('dismissModal',()=>{\r\n          modal.dismiss()\r\n      });\r\n      const item=await modal.onDidDismiss();\r\n      if(!item.data){\r\n          return\r\n      }\r\n\r\n      if(item.data.order_id??0){\r\n        this.itemTagAdd([`order:${item.data.order_id}`,`заказ ${item.data.order_id}`])\r\n      }\r\n      if(item.data.store_id??0){\r\n        this.itemTagAdd([`store:${item.data.store_id}`,`продавец ${item.data.store_name}`])\r\n      }\r\n      if(item.data.courier_id??0){\r\n        this.itemTagAdd([`courier:${item.data.courier_id}`,`курьер ${item.data.courier_name}`])\r\n      }\r\n      if(item.data.type??0){\r\n        this.itemTagAdd([`acc::${item.data.type}`,`счет ${item.data.name}`])\r\n      }\r\n    },\r\n    async itemTagCreate(){\r\n        const actionSheet = await actionSheetController.create({\r\n          header: 'Тип тега',\r\n          buttons: [\r\n            {\r\n              text: 'Заказ',\r\n              role: 'destructive',\r\n              data: 'order',\r\n            },\r\n            {\r\n              text: 'Продавец',\r\n              role: 'destructive',\r\n              data: 'store',\r\n            },\r\n            {\r\n              text: 'Курьер',\r\n              role: 'destructive',\r\n              data: 'courier',\r\n            },\r\n            {\r\n              text: 'Счет',\r\n              role: 'destructive',\r\n              data: 'acc',\r\n            },\r\n          ],\r\n        });\r\n        await actionSheet.present();\r\n        const itemType = await actionSheet.onDidDismiss();\r\n        if(itemType?.data){\r\n          this.itemTagPick(itemType?.data)\r\n        }\r\n    },\r\n    itemTagAdd(tag){\r\n      let dict=this.tagDict??{}\r\n      dict[tag[0]]=tag[1]\r\n      this.tagDict=dict\r\n      this.listGet()\r\n      this.settingsType='tags'\r\n    },\r\n    itemTagRemove(tag){\r\n      let dict=this.tagDict??{}\r\n      dict[tag] && delete dict[tag]\r\n      const size = Object.keys(dict).length\r\n      this.tagDict=size?dict:null\r\n      this.listGet()\r\n      this.settingsType='tags'\r\n    }\r\n  },\r\n  mounted() {\r\n    this.listGet()\r\n  },\r\n};\r\n</script>","import { render } from \"./LedgerComp.vue?vue&type=template&id=3cf763c2\"\nimport script from \"./LedgerComp.vue?vue&type=script&lang=js\"\nexport * from \"./LedgerComp.vue?vue&type=script&lang=js\"\n\nimport \"./LedgerComp.vue?vue&type=style&index=0&id=3cf763c2&lang=css\"\n\nimport exportComponent from \"W:\\\\Ionic\\\\Tezkel\\\\blank\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["slot","style","_createElementBlock","_createVNode","_component_ion_list","_component_ion_item","_component_ion_title","$data","_createBlock","_component_ion_text","color","_ctx","state","currencySign","_component_ion_accordion_group","value","_component_ion_accordion","_component_ion_icon","icon","$setup","_createElementVNode","_hoisted_4","_component_ion_input","type","onIonChange","$options","sum_start","readonly","_hoisted_6","sum_debit","sum_credit","_hoisted_8","sum_finish","lines","_Fragment","tagLabel","tag","_component_ion_chip","key","src","onClick","_component_ion_label","_component_ion_searchbar","placeholder","i","_component_ion_skeleton_text","animated","length","trans","trans_id","detail","date","trans_description","trans_role","amount_sign","trans_amount","tag_list","class","components","IonIcon","IonTitle","IonLabel","IonItem","IonInput","IonList","IonAccordion","IonAccordionGroup","IonText","IonSkeletonText","IonSearchbar","IonChip","props","setup","calendarOutline","addOutline","closeCircle","pricetagOutline","data","console","log","this","query","today","Date","firstDay","parse","getFullYear","getMonth","balance","start_at","toISOString","slice","finish_at","searchQuery","tagQuery","tagDict","ledger","meta","settingsType","computed","ledgerCalc","lcalc","toLocDate","trans_date","tags","substring","toLowerCase","split","map","push","is_admin","User","watch","listGet","methods","Object","keys","join","request","jquery","$heap","hostname","response","exception","responseJSON","exception_code","messages","error","$flash","iso","event","options","month","day","toLocaleDateString","undefined","itemClick","$router","itemTagPick","itemType","modalController","component","ItemPicker","componentProps","initialBreakpoint","breakpoints","canDissmiss","modal","present","$topic","on","dismiss","onDidDismiss","item","order_id","itemTagAdd","store_id","store_name","courier_id","courier_name","name","itemTagCreate","actionSheetController","header","buttons","text","role","actionSheet","dict","itemTagRemove","size","mounted","__exports__","render"],"sourceRoot":""}