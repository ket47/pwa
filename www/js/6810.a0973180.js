"use strict";(self["webpackChunkTezkel"]=self["webpackChunkTezkel"]||[]).push([[6810],{6810:function(e,t,a){a.r(t),a.d(t,{default:function(){return G}});var n=a(6252),l=a(3577);const r=e=>((0,n.dD)("data-v-bc892e3e"),e=e(),(0,n.Cn)(),e),o=r((()=>(0,n._)("b",null,"Курьер",-1))),i=r((()=>(0,n._)("br",null,null,-1))),s={style:{"border-radius":"10px",margin:"10px",overflow:"hidden"}},c={style:{padding:"10px"}},d=r((()=>(0,n._)("b",null,"Ко времени",-1))),u=r((()=>(0,n._)("label",{for:"payment_cash"},"Оплата наличными",-1))),p={slot:"end"},m=["checked"],y=r((()=>(0,n._)("label",{for:"payment_cash_store"},"Оплата наличными продавцу",-1))),_={slot:"end"},h=["checked"],k={key:2},f=r((()=>(0,n._)("label",{for:"payment_card"},"Оплата картой без привязки",-1))),g={slot:"end"},w=["checked"],v={for:"use_card_recurrent"},b={slot:"end"},C=["checked"];function W(e,t,a,r,W,I){const T=(0,n.up)("ion-title"),$=(0,n.up)("ion-label"),x=(0,n.up)("ion-icon"),O=(0,n.up)("ion-text"),j=(0,n.up)("ion-item"),U=(0,n.up)("ymap-marker"),D=(0,n.up)("yandex-map"),z=(0,n.up)("ion-segment-button"),G=(0,n.up)("ion-segment"),R=(0,n.up)("ion-img"),S=(0,n.up)("base-layout");return(0,n.wg)(),(0,n.j4)(S,{pageTitle:"Оформление",pageDefaultBackLink:"/order/order-list"},{default:(0,n.w5)((()=>{var a;return[(0,n.Wm)(T,{class:"ion-padding"},{default:(0,n.w5)((()=>[(0,n.Uk)("Ваш заказ")])),_:1}),(0,n.Wm)($,{class:"ion-padding"},{default:(0,n.w5)((()=>[o])),_:1}),(0,n.Wm)(j,{detail:"",lines:"none"},{default:(0,n.w5)((()=>[(0,n.Wm)(x,{src:r.cubeOutline,slot:"start",size:"large",color:"medium",style:{"font-size":"2em"}},null,8,["src"]),(0,n.Wm)(O,{color:"medium"},{default:(0,n.w5)((()=>[(0,n.Uk)("Скажите нам, что нужно перевезти?")])),_:1})])),_:1}),i,(0,n.Wm)(T,{class:"ion-padding"},{default:(0,n.w5)((()=>[(0,n.Uk)("Детали перевозки")])),_:1}),(0,n._)("div",s,[W.placemarkCoords?((0,n.wg)(),(0,n.j4)(D,{key:0,coords:W.placemarkCoords,zoom:16,settings:W.mapsettings,controls:["fullscreenControl"],behaviors:[],style:{height:"200px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(U,{coords:W.placemarkCoords,icon:W.placemarkIcon,"marker-id":"1",properties:W.placemarkProperties},null,8,["coords","icon","properties"])])),_:1},8,["coords","settings"])):(0,n.kq)("",!0)]),(0,n.Wm)(j,{detail:"",lines:"none",detailIcon:r.chevronDown},{default:(0,n.w5)((()=>[(0,n.Wm)(x,{src:r.locationOutline,slot:"start",color:"medium"},null,8,["src"]),(0,n.Wm)(O,{color:"medium"},{default:(0,n.w5)((()=>[(0,n.Uk)("Откуда?")])),_:1})])),_:1},8,["detailIcon"]),(0,n.Wm)(j,{detail:"",lines:"none",detailIcon:r.chevronDown},{default:(0,n.w5)((()=>[(0,n.Wm)(x,{src:r.flagOutline,slot:"start",color:"medium"},null,8,["src"]),(0,n.Wm)(O,{color:"medium"},{default:(0,n.w5)((()=>[(0,n.Uk)("Куда?")])),_:1})])),_:1},8,["detailIcon"]),(0,n._)("div",c,[(0,n.Wm)(G,{mode:"ios",value:"atonce"},{default:(0,n.w5)((()=>[(0,n.Wm)(z,{value:"atonce"},{default:(0,n.w5)((()=>[(0,n.Wm)($,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Как можно скорее")])),_:1}),(0,n.Uk)(" отвезти сразу ")])),_:1}),(0,n.Wm)(z,{value:"schedule",disabled:""},{default:(0,n.w5)((()=>[(0,n.Wm)($,null,{default:(0,n.w5)((()=>[d])),_:1}),(0,n.Uk)(" выберите день и время ")])),_:1})])),_:1})]),(0,n.Wm)(T,{class:"ion-padding"},{default:(0,n.w5)((()=>[(0,n.Uk)("Способы оплаты")])),_:1}),1==W.tariffRule.paymentByCash?((0,n.wg)(),(0,n.j4)(j,{key:0,button:"",detail:"false",onClick:t[0]||(t[0]=e=>W.paymentType="use_cash")},{default:(0,n.w5)((()=>[(0,n.Wm)(x,{icon:e.cashOutline,slot:"start",color:"primary"},null,8,["icon"]),u,(0,n._)("div",p,[(0,n._)("input",{type:"radio",name:"paymentType",id:"payment_cash",value:"cash",checked:"use_cash"==W.paymentType},null,8,m)])])),_:1})):(0,n.kq)("",!0),1==W.tariffRule.paymentByCashStore?((0,n.wg)(),(0,n.j4)(j,{key:1,button:"",detail:"false",onClick:t[1]||(t[1]=e=>W.paymentType="use_cash_store")},{default:(0,n.w5)((()=>[(0,n.Wm)(x,{icon:e.cashOutline,slot:"start",color:"primary"},null,8,["icon"]),y,(0,n._)("div",_,[(0,n._)("input",{type:"radio",name:"paymentType",id:"payment_cash_store",value:"cash",checked:"use_cash_store"==W.paymentType},null,8,h)])])),_:1})):(0,n.kq)("",!0),1==W.tariffRule.paymentByCard?((0,n.wg)(),(0,n.iD)("div",k,[(0,n.Wm)(j,{detail:"false",button:"",onClick:t[2]||(t[2]=e=>W.paymentType="use_card")},{default:(0,n.w5)((()=>[(0,n.Wm)(x,{icon:e.cardOutline,slot:"start",color:"primary"},null,8,["icon"]),f,(0,n._)("div",g,[(0,n._)("input",{type:"radio",name:"paymentType",id:"payment_card",value:"card",checked:"use_card"==W.paymentType},null,8,w)])])),_:1}),null!==(a=W.bankCard)&&void 0!==a&&a.card_type?((0,n.wg)(),(0,n.j4)(j,{key:0,button:"",detail:"false",onClick:t[3]||(t[3]=e=>W.paymentType="use_card_recurrent")},{default:(0,n.w5)((()=>{var t;return["mir"==W.bankCard.card_type?((0,n.wg)(),(0,n.j4)(R,{key:0,class:"card_type",src:`/img/icons/card-${W.bankCard.card_type}.svg`,slot:"start"},null,8,["src"])):"visa"==W.bankCard.card_type?((0,n.wg)(),(0,n.j4)(R,{key:1,class:"card_type",src:`/img/icons/card-${W.bankCard.card_type}.svg`,slot:"start"},null,8,["src"])):"mastercard"==W.bankCard.card_type?((0,n.wg)(),(0,n.j4)(R,{key:2,class:"card_type",src:`/img/icons/card-${W.bankCard.card_type}.svg`,slot:"start"},null,8,["src"])):((0,n.wg)(),(0,n.j4)(x,{key:3,src:e.cardOutline,slot:"start",color:"primary"},null,8,["src"])),(0,n._)("label",v,"Оплата картой "+(0,l.zw)(null===(t=W.bankCard)||void 0===t?void 0:t.card_mask),1),(0,n._)("div",b,[(0,n._)("input",{type:"radio",name:"paymentType",id:"use_card_recurrent",value:"registered_card",checked:"use_card_recurrent"==W.paymentType},null,8,C)])]})),_:1})):(0,n.kq)("",!0),W.recurrentPaymentAllow?((0,n.wg)(),(0,n.j4)(j,{key:1,button:"",detail:"",onClick:t[4]||(t[4]=t=>e.$go("/user/user-cards"))},{default:(0,n.w5)((()=>{var e;return[null!==(e=W.bankCard)&&void 0!==e&&e.card_type?((0,n.wg)(),(0,n.j4)($,{key:0,color:"medium"},{default:(0,n.w5)((()=>[(0,n.Uk)("Выбрать другую карту")])),_:1})):((0,n.wg)(),(0,n.j4)($,{key:1,color:"medium"},{default:(0,n.w5)((()=>[(0,n.Uk)("Привязать карту")])),_:1}))]})),_:1})):(0,n.kq)("",!0)])):(0,n.kq)("",!0)]})),_:1})}var I=a(2824),T=a(8903),$=a(5836),x=a(6234),O=a(7536),j=a(4405),U={components:{yandexMap:$.xR,ymapMarker:$.Jk,IonText:I.yW,IonItem:I.Ie,IonIcon:I.gu,IonLabel:I.Q$,IonTitle:I.wd,IonImg:I.Xz,IonSegment:I.cJ,IonSegmentButton:I.GO},setup(){return{magic_wand:x,boxDelivery:O,cubeOutline:T.XFf,locationOutline:T.Iv7,flagOutline:T.FMn,chevronDown:T.Dd1}},header(){return{title:"Hahaha"}},data(){var e,t;return{ship_id:this.$route.params.id,ship:null,shipAutoloadClock:null,paymentType:"use_card",bankCard:null,recurrentPaymentAllow:1==(null===(e=this.$heap.state.settings)||void 0===e||null===(t=e.other)||void 0===t?void 0:t.recurrentPaymentAllow)?1:0,tariffRule:{},tariffRuleList:[],mapsettings:null,placemarkCoords:null,placemarkProperties:{},placemarkIcon:{layout:"default#imageWithContent",content:"some content here",contentLayout:'<div class="placemarkBaloon">$[properties.iconContent]</div>',contentOffset:[45,10],imageHref:"/img/tezkel-placemark.png",imageSize:[50,50],imageOffset:[-25,-50]}}},methods:{async itemGet(){const e={ship_id:this.ship_id};try{this.ship=await j.Z.prePost(`${this.$heap.state.hostname}Shipment/itemGet`,e),this.ship=await j.Z.post(`${this.$heap.state.hostname}Shipment/itemGet`,e)}catch(t){switch(t.status){case 404:this.$flash("Заказ не найден"),this.ship="notfound",this.$go("/order/order-list");break}}},async itemCheckoutDataGet(){this.ship||await this.itemLoad()},async ymapInit(e){this.mapsettings={apiKey:e.ymapApiKey,lang:"ru_RU",coordorder:"latlong",version:"2.1"},this.placemarkCoords=JSON.parse(e.mapCenter),await(0,$.xk)()}},mounted(){this.itemGet();let e=this.$heap.state.settings;null!==e&&void 0!==e&&e.location&&this.ymapInit(e.location),this.$topic.on("settingsGet",(async e=>{this.ymapInit(e.location)}))},ionViewDidEnter(){this.itemGet()}},D=a(3744);const z=(0,D.Z)(U,[["render",W],["__scopeId","data-v-bc892e3e"]]);var G=z},7536:function(e,t,a){e.exports=a.p+"img/boxDelivery.31519b49.svg"},6234:function(e,t,a){e.exports=a.p+"img/magic_wand.35042221.svg"}}]);
//# sourceMappingURL=6810.a0973180.js.map