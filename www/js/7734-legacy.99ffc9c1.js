"use strict";(self["webpackChunktezkel"]=self["webpackChunktezkel"]||[]).push([[7734],{457:function(e,r,t){t.r(r),t.d(r,{default:function(){return A}});var n=t(6252),u=t(3577),i={key:0},o=(0,n.Uk)("Пока вы не курьер"),l=(0,n.Uk)(" Подавая заявку вы даете согласие на условия "),a=(0,n.Uk)("Оферта об оказании услуг доставки"),c=(0,n.Uk)("Стать курьером"),s={key:1},d=(0,n.Uk)(" Анкета активна. Вы можете открыть смену для приема заказов. "),m=(0,n.Uk)(" Удалено "),f=(0,n.Uk)(" На модерации "),p=(0,n.Uk)("Основные настройки"),_=(0,n.Uk)("Имя"),h=(0,n.Uk)("Транспорт"),w=(0,n.Uk)("ИНН"),k=(0,n.Uk)("Комментарий"),g=(0,n.Uk)("Ваше фото"),v=(0,n.Uk)(" Добавить "),W=(0,n.Uk)("Информация"),b=(0,n.Uk)("Правила пользования для курьера");function x(e,r,t,x,C,Z){var I=(0,n.up)("ion-card-title"),U=(0,n.up)("ion-card-header"),V=(0,n.up)("router-link"),y=(0,n.up)("ion-text"),D=(0,n.up)("ion-checkbox"),O=(0,n.up)("ion-item"),T=(0,n.up)("ion-button"),q=(0,n.up)("ion-card-content"),$=(0,n.up)("ion-card"),G=(0,n.up)("ion-icon"),A=(0,n.up)("ion-toggle"),j=(0,n.up)("ion-label"),z=(0,n.up)("ion-item-divider"),F=(0,n.up)("ion-input"),L=(0,n.up)("ion-textarea"),N=(0,n.up)("ion-list"),P=(0,n.up)("image-tile-comp"),S=(0,n.up)("base-layout");return(0,n.wg)(),(0,n.j4)(S,{"page-title":"Анкета курьера",pageDefaultBackLink:"/user"},{default:(0,n.w5)((function(){return[C.courier?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",i,[(0,n.Wm)($,{color:"light"},{default:(0,n.w5)((function(){return[(0,n.Wm)(U,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(I,null,{default:(0,n.w5)((function(){return[o]})),_:1})]})),_:1}),(0,n.Wm)(q,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(O,{lines:"none"},{default:(0,n.w5)((function(){return[(0,n.Wm)(y,null,{default:(0,n.w5)((function(){return[l,(0,n.Wm)(V,{to:"/page/rules-courier"},{default:(0,n.w5)((function(){return[a]})),_:1})]})),_:1}),(0,n.Wm)(D,{slot:"end",modelValue:C.contractAccepted,"onUpdate:modelValue":r[0]||(r[0]=function(e){return C.contractAccepted=e})},null,8,["modelValue"])]})),_:1}),(0,n.Wm)(T,{expand:"block",onClick:r[1]||(r[1]=function(e){return Z.itemCreate()}),disabled:!C.contractAccepted},{default:(0,n.w5)((function(){return[c]})),_:1},8,["disabled"])]})),_:1})]})),_:1})])),C.courier?((0,n.wg)(),(0,n.iD)("div",s,[Z.message?((0,n.wg)(),(0,n.j4)($,{key:0,lines:"none"},{default:(0,n.w5)((function(){return[(0,n.Wm)(q,{class:(0,u.C_)(Z.messageClass)},{default:(0,n.w5)((function(){return[(0,n.Uk)((0,u.zw)(Z.message),1)]})),_:1},8,["class"])]})),_:1})):((0,n.wg)(),(0,n.j4)($,{key:1,lines:"none"},{default:(0,n.w5)((function(){return[(0,n.Wm)(q,{style:{"background-color":"var(--ion-color-success-tint)"}},{default:(0,n.w5)((function(){return[d]})),_:1})]})),_:1})),(0,n._)("form",{onChange:r[10]||(r[10]=function(e){return Z.updateCourier()})},[(0,n.Wm)(N,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(O,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(G,{src:x.trashOutline,color:"primary",slot:"start"},null,8,["src"]),m,(0,n.Wm)(A,{slot:"end",modelValue:C.is_deleted,"onUpdate:modelValue":r[2]||(r[2]=function(e){return C.is_deleted=e}),color:"danger",onIonChange:r[3]||(r[3]=function(e){return Z.itemDelete(e.target.checked?1:0)})},null,8,["modelValue"])]})),_:1}),(0,n.Wm)(O,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(G,{src:x.searchOutline,color:"primary",slot:"start"},null,8,["src"]),f,(0,n.Wm)(A,{slot:"end",modelValue:C.is_disabled,"onUpdate:modelValue":r[4]||(r[4]=function(e){return C.is_disabled=e}),onIonChange:r[5]||(r[5]=function(e){return Z.itemDisable(e.target.checked?1:0)})},null,8,["modelValue"])]})),_:1}),(0,n.Wm)(z,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(j,null,{default:(0,n.w5)((function(){return[p]})),_:1})]})),_:1}),(0,n.Wm)(O,{lines:"full"},{default:(0,n.w5)((function(){return[(0,n.Wm)(j,{position:"stacked",color:"primary"},{default:(0,n.w5)((function(){return[_]})),_:1}),(0,n.Wm)(F,{modelValue:C.courier.courier_name,"onUpdate:modelValue":r[6]||(r[6]=function(e){return C.courier.courier_name=e}),placeholder:"Имя курьера"},null,8,["modelValue"])]})),_:1}),(0,n.Wm)(O,{lines:"full"},{default:(0,n.w5)((function(){return[(0,n.Wm)(j,{position:"stacked",color:"primary"},{default:(0,n.w5)((function(){return[h]})),_:1}),(0,n.Wm)(F,{modelValue:C.courier.courier_vehicle,"onUpdate:modelValue":r[7]||(r[7]=function(e){return C.courier.courier_vehicle=e}),placeholder:"автомобиль, мопед, велосипед"},null,8,["modelValue"])]})),_:1}),(0,n.Wm)(O,{lines:"full"},{default:(0,n.w5)((function(){return[(0,n.Wm)(j,{position:"stacked",color:"primary"},{default:(0,n.w5)((function(){return[w]})),_:1}),(0,n.Wm)(F,{modelValue:C.courier.courier_tax_num,"onUpdate:modelValue":r[8]||(r[8]=function(e){return C.courier.courier_tax_num=e}),placeholder:"ИНН курьера"},null,8,["modelValue"])]})),_:1}),(0,n.Wm)(O,{lines:"full"},{default:(0,n.w5)((function(){return[(0,n.Wm)(j,{position:"stacked",color:"primary"},{default:(0,n.w5)((function(){return[k]})),_:1}),(0,n.Wm)(L,{modelValue:C.courier.courier_comment,"onUpdate:modelValue":r[9]||(r[9]=function(e){return C.courier.courier_comment=e}),placeholder:"Цвет, номер авто"},null,8,["modelValue"])]})),_:1})]})),_:1})],32),C.courier?((0,n.wg)(),(0,n.j4)(N,{key:2},{default:(0,n.w5)((function(){return[(0,n.Wm)(z,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(j,null,{default:(0,n.w5)((function(){return[g]})),_:1})]})),_:1}),(0,n.Wm)(P,{images:C.courier.images,image_holder_id:C.courier.courier_id,controller:"Courier",ref:"courierImgs"},null,8,["images","image_holder_id"]),(0,n.Wm)(T,{onClick:r[11]||(r[11]=function(r){return e.$refs.courierImgs.take_photo()}),size:"small",expand:"full",color:"medium"},{default:(0,n.w5)((function(){return[(0,n.Wm)(G,{src:x.cameraOutline},null,8,["src"]),v]})),_:1})]})),_:1})):(0,n.kq)("",!0),(0,n.Wm)(N,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(z,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(j,null,{default:(0,n.w5)((function(){return[W]})),_:1})]})),_:1}),(0,n.Wm)(O,{lines:"none",button:"",detail:"",onClick:r[12]||(r[12]=function(r){return e.$router.push("/page/rules-courier")})},{default:(0,n.w5)((function(){return[(0,n.Wm)(G,{src:x.documentTextOutline,slot:"start"},null,8,["src"]),(0,n.Wm)(V,{to:"/page/rules-courier"},{default:(0,n.w5)((function(){return[b]})),_:1})]})),_:1})]})),_:1})])):(0,n.kq)("",!0)]})),_:1})}var C=t(6835),Z=t(8534),I=(t(8862),t(8292)),U=t(8903),V=t(9755),y=t.n(V),D=t(2008),O=t(351),T=t(2226),q={components:{imageTileComp:T.Z,IonTextarea:I.g2,IonInput:I.pK,IonCard:I.PM,IonCardHeader:I.Zi,IonCardTitle:I.Dq,IonCardContent:I.FN,IonLabel:I.Q$,IonItem:I.Ie,IonButton:I.YG,IonList:I.q_,IonCheckbox:I.nz,IonText:I.yW,IonItemDivider:I.rH,IonToggle:I.ho,IonIcon:I.gu},setup(){return{cameraOutline:U.kuq,trashOutline:U.gtu,searchOutline:U.W6I,documentTextOutline:U.L82}},data(){var e,r;return{other_courier_id:null===(e=this.$route)||void 0===e||null===(r=e.query)||void 0===r?void 0:r.courier_id,courier:null,isAdmin:O.Z.isAdmin(),contractAccepted:0,is_deleted:0,is_disabled:0}},ionViewDidEnter(){var e,r,t,n;this.other_courier_id!=(null===(e=this.$route)||void 0===e||null===(r=e.query)||void 0===r?void 0:r.courier_id)&&(this.other_courier_id=null===(t=this.$route)||void 0===t||null===(n=t.query)||void 0===n?void 0:n.courier_id,this.itemGet())},mounted(){this.itemGet()},computed:{message(){return this.courier.deleted_at?"Анкета не активна и будет удалена. Вы можете еще отменить удаление":1==this.courier.is_disabled?"Анкета не активна и находится на рассмотрении у администратора":null},messageClass(){return this.courier.deleted_at?"deleted":1==this.courier.is_disabled?"disabled":null},imageClass(){var e,r;return 1==(null===(e=this.courier)||void 0===e||null===(r=e.images[0])||void 0===r?void 0:r.is_disabled)?"image_disabled":""}},methods:{itemGet(){var e=this;return(0,Z.Z)((0,C.Z)().mark((function r(){return(0,C.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!e.other_courier_id){r.next=6;break}return r.next=3,y().post(D.Z.state.hostname+"Courier/itemGet",{courier_id:e.other_courier_id});case 3:e.courier=r.sent,r.next=9;break;case 6:return r.next=8,O.Z.courier.get();case 8:e.courier=r.sent;case 9:e.itemParseFlags();case 10:case"end":return r.stop()}}),r)})))()},itemParseFlags(){this.courier&&(this.is_deleted=null==this.courier.deleted_at?0:1,this.is_disabled=0==this.courier.is_disabled?0:1)},itemCreate(){var e=this;return(0,Z.Z)((0,C.Z)().mark((function r(){return(0,C.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,y().post(D.Z.state.hostname+"Courier/itemCreate");case 3:return r.next=5,O.Z.get("full");case 5:e.courier=O.Z.courier.data,r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](0),e.$flash("Не удалось зарегистрироваться как курьер");case 11:case"end":return r.stop()}}),r,null,[[0,8]])})))()},itemDelete(e){var r=this;return(0,Z.Z)((0,C.Z)().mark((function t(){var n;return(0,C.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e?"itemDelete":"itemUnDelete",t.prev=1,t.next=4,y().post(D.Z.state.hostname+"Courier/"+n,{courier_id:r.courier.courier_id});case 4:r.courier.deleted_at=e?1:null,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),r.itemGet();case 10:case"end":return t.stop()}}),t,null,[[1,7]])})))()},itemDisable(e){var r=this;return(0,Z.Z)((0,C.Z)().mark((function t(){return(0,C.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r.courier.is_disabled!=e){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,y().post(D.Z.state.hostname+"Courier/itemDisable",{courier_id:r.courier.courier_id,is_disabled:e});case 5:r.courier.is_disabled=e,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](2),r.itemGet();case 11:case"end":return t.stop()}}),t,null,[[2,8]])})))()},uploadImage(e){var r=this;return(0,Z.Z)((0,C.Z)().mark((function t(){var n,u;return(0,C.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new FormData,n.append("files[]",e.target.files[0]),n.set("image_holder_id",r.courier.courier_id),u={url:D.Z.state.hostname+"Courier/fileUpload",type:"POST",data:n,processData:!1,contentType:!1},t.prev=4,t.next=7,y().ajax(u);case 7:r.itemGet(),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](4),r.$flash("Не удалось загрузить фото");case 13:case"end":return t.stop()}}),t,null,[[4,10]])})))()},uploadImageTrigger(){y()("#courier_foto_upload").trigger("click")},updateCourier(){var e=this;return(0,Z.Z)((0,C.Z)().mark((function r(){var t,n,u;return(0,C.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,y().post(D.Z.state.hostname+"Courier/itemUpdate",JSON.stringify(e.courier));case 3:return r.abrupt("return",r.sent);case 6:r.prev=6,r.t0=r["catch"](0),u=JSON.parse(null===(t=r.t0.responseJSON)||void 0===t||null===(n=t.messages)||void 0===n?void 0:n.error),u.courier_tax_num&&e.$flash("Неверный формат ИНН");case 10:case"end":return r.stop()}}),r,null,[[0,6]])})))()}}},$=t(3744);const G=(0,$.Z)(q,[["render",x],["__scopeId","data-v-67875374"]]);var A=G}}]);
//# sourceMappingURL=7734-legacy.99ffc9c1.js.map