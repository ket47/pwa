(function(){var t={1993:function(t){function e(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}e.keys=function(){return[]},e.resolve=e,e.id=1993,t.exports=e},5458:function(t,e,r){"use strict";r(8851),r(1292),r(1633),r(1045),r(6187),r(2299),r(3423),r(4687),r(9147),r(6250);var n=r(9963),o=r(7248),a=r(6252);function i(t,e,r,n,o,i){const s=(0,a.up)("ion-router-outlet"),c=(0,a.up)("ion-app");return(0,a.wg)(),(0,a.j4)(c,null,{default:(0,a.w5)((()=>[(0,a.Wm)(s)])),_:1})}var s={components:{IonApp:o.dr,IonRouterOutlet:o.jP}},c=r(3744);const u=(0,c.Z)(s,[["render",i]]);var l=u,d=r(1933),p=r(2008),m=r(3577);const h={style:{"line-height":"1.5","max-height":"3em","text-overflow":"ellipsis"}},f={slot:"end"},_=(0,a._)("div",{style:{height:"30px"}},null,-1);function g(t,e,r,n,o,i){const s=(0,a.up)("ion-back-button"),c=(0,a.up)("ion-buttons"),u=(0,a.up)("ion-title"),l=(0,a.up)("ion-icon"),d=(0,a.up)("cart-header"),p=(0,a.up)("ion-toolbar"),g=(0,a.up)("ion-header"),y=(0,a.up)("ion-refresher-content"),w=(0,a.up)("ion-refresher"),b=(0,a.up)("ion-spinner"),k=(0,a.up)("ion-fab"),v=(0,a.up)("ion-content"),I=(0,a.up)("ion-page");return(0,a.wg)(),(0,a.j4)(I,null,{default:(0,a.w5)((()=>[(0,a.Wm)(g,{class:(0,m.C_)([t.pageClass])},{default:(0,a.w5)((()=>[(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,{slot:"start"},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{"default-href":t.pageDefaultBackLink,color:"light",style:{padding:"0px 10px"}},null,8,["default-href"])])),_:1}),t.pageTitle?((0,a.wg)(),(0,a.j4)(u,{key:0,size:"small"},{default:(0,a.w5)((()=>[(0,a._)("div",h,(0,m.zw)(t.pageTitle),1)])),_:1})):(0,a.kq)("",!0),t.pageLogo?((0,a.wg)(),(0,a.j4)(l,{key:1,class:"toolbar_svg_logo",style:{color:"white"},icon:t.pageLogo},null,8,["icon"])):(0,a.kq)("",!0),(0,a._)("div",f,[(0,a.Wm)(d,{slot:"end"})])])),_:1})])),_:1},8,["class"]),(0,a.Wm)(v,{class:(0,m.C_)(["main-container",t.pageClass]),scrollEvents:t.contentOnScroll?"true":"false",onIonScroll:e[1]||(e[1]=e=>t.contentOnScroll(e))},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{slot:"fixed",id:"refresher",onIonRefresh:e[0]||(e[0]=e=>t.reload())},{default:(0,a.w5)((()=>[(0,a.Wm)(y)])),_:1}),(0,a.WI)(t.$slots,"default"),_,t.isInteractingWithServer?((0,a.wg)(),(0,a.j4)(k,{key:0,vertical:"bottom",horizontal:"end",slot:"fixed"},{default:(0,a.w5)((()=>[(0,a.Wm)(b)])),_:1})):(0,a.kq)("",!0)])),_:3},8,["class","scrollEvents"])])),_:3})}var y=r(6050),w=(0,a.aZ)({props:["pageTitle","pageLogo","pageDefaultBackLink","errorMessage","pageClass","cartComponent","contentOnScroll"],components:{IonPage:o._i,IonHeader:o.Gu,IonToolbar:o.sr,IonTitle:o.wd,IonContent:o.W2,IonBackButton:o.oU,IonButtons:o.Sm,IonImg:o.Xz,IonRefresher:o.nJ,IonRefresherContent:o.Wo,IonSpinner:o.PQ,IonFab:o.IJ,IonIcon:o.gu,CartHeader:y.Z},computed:{isInteractingWithServer(){return this.$heap.state.isInteractingWithServer}},methods:{reload(){location.reload()}}});const b=(0,c.Z)(w,[["render",g]]);var k=b;const v=(0,a.Uk)("Главная"),I=(0,a.Uk)("Поиск"),W=(0,a.Uk)("Заказы"),S=(0,a.Uk)("Аккаунт"),Z={class:"page-content"},D={key:0,style:{margin:"30px"}};function C(t,e,r,n,o,i){const s=(0,a.up)("ion-icon"),c=(0,a.up)("ion-label"),u=(0,a.up)("ion-row"),l=(0,a.up)("ion-tab-button"),d=(0,a.up)("ion-tab-bar"),p=(0,a.up)("ion-col"),h=(0,a.up)("cart-body-modal"),f=(0,a.up)("ion-grid"),_=(0,a.up)("footer-desktop"),g=(0,a.up)("ion-spinner"),y=(0,a.up)("ion-fab"),w=(0,a.up)("ion-content"),b=(0,a.up)("ion-page");return(0,a.wg)(),(0,a.j4)(b,null,{default:(0,a.w5)((()=>[(0,a.Wm)(w,{class:(0,m.C_)(["desktop-main-container",r.pageClass]),scrollEvents:r.contentOnScroll?"true":"false",onIonScroll:e[0]||(e[0]=t=>r.contentOnScroll(t))},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{class:(0,m.C_)(["desktop-template",[r.pageClass]])},{default:(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Wm)(p,{class:"ion-left-column",size:"3"},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{class:"toolbar_svg_logo ion-color ion-color-primary",icon:n.mainLogo},null,8,["icon"]),(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[(0,a.Wm)(l,{tab:"tab1",href:"/home",routerDirection:"backward"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Wm)(s,{icon:n.homeIcon},null,8,["icon"]),(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[v])),_:1})])),_:1})])),_:1}),(0,a.Wm)(l,{tab:"tab2",href:"/search",routerDirection:"backward"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Wm)(s,{icon:n.searchIcon},null,8,["icon"]),(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[I])),_:1})])),_:1})])),_:1}),(0,a.Wm)(l,{tab:"tab3",href:"/order-list",routerDirection:"backward"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Wm)(s,{icon:n.ordersIcon},null,8,["icon"]),(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[W])),_:1})])),_:1})])),_:1}),(0,a.Wm)(l,{tab:"tab4",href:"/user-dashboard",routerDirection:"backward"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Wm)(s,{icon:n.personIcon},null,8,["icon"]),(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[S])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.Wm)(p,{class:"ion-middle-column",size:i.cartListTotal>0?6:9},{default:(0,a.w5)((()=>[(0,a._)("div",Z,[r.pageTitle?((0,a.wg)(),(0,a.iD)("h1",D,(0,m.zw)(r.pageTitle),1)):(0,a.kq)("",!0),(0,a.WI)(t.$slots,"default",{},void 0,!0)])])),_:3},8,["size"]),i.cartListTotal?((0,a.wg)(),(0,a.j4)(p,{key:0,class:"ion-right-column",size:"3"},{default:(0,a.w5)((()=>[(0,a.Wm)(h)])),_:1})):(0,a.kq)("",!0)])),_:3})])),_:3},8,["class"]),(0,a.Wm)(_),i.isInteractingWithServer?((0,a.wg)(),(0,a.j4)(y,{key:0,vertical:"center",horizontal:"center",slot:"fixed"},{default:(0,a.w5)((()=>[(0,a.Wm)(g)])),_:1})):(0,a.kq)("",!0)])),_:3},8,["class","scrollEvents"])])),_:3})}const O={class:"desktop-footer-container"},L={class:"desktop-footer-top"},x=(0,a.Uk)("Быстро и удобно"),U=(0,a.Uk)("О нас"),q=(0,a.Uk)("Как заказать?"),T={class:"desktop-footer-bottom"},j=(0,a.Uk)("Все права защищены. 2022 iSellSoft © "),z=(0,a.Uk)("Правила пользования"),$=(0,a.Uk)("Политика конфиденциальности");function P(t,e,r,n,o,i){const s=(0,a.up)("ion-img"),c=(0,a.up)("ion-title"),u=(0,a.up)("ion-label"),l=(0,a.up)("router-link"),d=(0,a.up)("ion-footer");return(0,a.wg)(),(0,a.j4)(d,{class:"desktop-footer",collapse:"fade"},{default:(0,a.w5)((()=>[(0,a._)("div",O,[(0,a._)("div",L,[(0,a._)("div",null,[(0,a.Wm)(s,{src:"./assets/icon/tezkel_logo.png"}),(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[x])),_:1})]),(0,a._)("div",null,[(0,a.Wm)(l,{to:"/page-about"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[U])),_:1})])),_:1}),(0,a.Wm)(l,{to:"/page-howtoorder"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[q])),_:1})])),_:1})])]),(0,a._)("div",T,[(0,a._)("div",null,[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[j])),_:1})]),(0,a._)("div",null,[(0,a.Wm)(l,{to:"/page-rules"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[z])),_:1})])),_:1}),(0,a.Wm)(l,{to:"/page-privacy_policy"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[$])),_:1})])),_:1})])])])])),_:1})}var G=r(7782),E=(0,a.aZ)({components:{IonFooter:o.fr,IonLabel:o.Q$,IonImg:o.Xz,IonTitle:o.wd},computed:{cartListTotal(){return G.Z.cart.listTotalGet()}}});const B=(0,c.Z)(E,[["render",P]]);var N=B,M=r(6e3),A=r(3647),Q=r(8764),H=r(9262),J=r(2520),F=r(94),R=r(8903),Y={setup(){return{personIcon:A,ordersIcon:Q,searchIcon:H,homeIcon:J,cartOutline:R.Ox0,mainLogo:F}},computed:{cartListTotal(){return G.Z.cart.listTotalGet()},isInteractingWithServer(){return this.$heap.state.isInteractingWithServer}},props:["pageTitle","pageDefaultBackLink","errorMessage","pageClass","cartComponent","contentOnScroll"],components:{IonPage:o._i,IonContent:o.W2,IonIcon:o.gu,IonTabBar:o.yq,IonTabButton:o.ZU,IonImg:o.Xz,IonLabel:o.Q$,IonRow:o.Nd,IonCol:o.wI,IonGrid:o.jY,CartBodyModal:M.Z,IonFab:o.IJ,IonSpinner:o.PQ,FooterDesktop:N}};const K=(0,c.Z)(Y,[["render",C],["__scopeId","data-v-3081d022"]]);var X=K,V=r(9042),tt=r(351),et=r(9755),rt=r.n(et),nt=r(5205);(0,nt.z)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\n")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available;")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}});const ot={queue:[],idle:!0,push(t){this.queue.push(t),this.next()},next(){if(!this.idle)return;const t=this.queue.join("<br/><br/>");this.queue=[],t&&this.flash(t)},async flash(t){this.idle=!1;const e=this,r=await o.Mn.create({message:t,duration:3e3,color:"secondary"});r.present(),r.onDidDismiss().then((()=>{e.idle=!0,e.next()}))}},at=t=>{ot.push(t)};rt()(document).ajaxError(((t,e,r,n)=>{const o=e.status;403==o?p.Z.getters.userIsLogged?at("К сожалению, нет прав для этого действия"):(V.Z.publish("dismissModal"),at("Вы не выполнили вход, пожалуйста авторизируйтесь"),d.Z.push({path:"/sign-in"})):401==o&&(at("Вы не выполнили вход, пожалуйста авторизируйтесь"),V.Z.publish("dismissModal"),d.Z.push({path:"/sign-in"})),0==o&&(at("Похоже нет связи с интерентом. Попробуйте позже"),V.Z.publish("dismissModal"),d.Z.push({path:"/error-offline"})),"abort"===n&&(at("Похоже нет связи с интерентом. Попробуйте позже"),d.Z.push({path:"/error-offline"})),"timeout"===n&&(at("Похоже нет связи с интерентом. Попробуйте позже"),d.Z.push({path:"/error-offline"}))})),rt()(document).ajaxSend((()=>{p.Z.commit("setInteractionStatus",1)})),rt()(document).ajaxComplete((()=>{p.Z.commit("setInteractionStatus",-1)}));const it=(0,n.ri)(l).use(o.oX).use(d.Z).use(p.Z);it.provide("$Order",G.Z),it.config.globalProperties.$heap=p.Z,it.config.globalProperties.$flash=at,it.config.globalProperties.$topic=V.Z;const st=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(window.navigator.userAgent);st?it.component("base-layout",k):(it.component("base-layout",X),r(7907)),it.mount("#app"),tt.Z.autoSignIn()},1111:function(t,e,r){"use strict";r.d(e,{Z:function(){return p}});var n=r(6252),o=r(3577);function a(t,e,r,a,i,s){const c=(0,n.up)("ion-icon"),u=(0,n.up)("ion-button"),l=(0,n.up)("ion-label");return(0,n.wg)(),(0,n.iD)("div",{class:(0,o.C_)(`product-actions ${s.componentLayout} ${r.buttonLayout} ${this.currentQuantity>0?"incart":""} ${s.isAvailable?"":"sold"}`)},[this.currentQuantity?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(u,{key:0,onClick:e[0]||(e[0]=t=>s.addToOrder(+this.productData.product_quantity_min)),color:"primary",size:"small"},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{icon:a.add,color:"light"},null,8,["icon"])])),_:1})),this.currentQuantity>0?((0,n.wg)(),(0,n.j4)(u,{key:1,onClick:e[1]||(e[1]=t=>s.addToOrder(+this.productData.product_quantity_min)),color:"light",size:"small"},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{icon:a.add,color:"primary"},null,8,["icon"])])),_:1})):(0,n.kq)("",!0),this.currentQuantity>0?((0,n.wg)(),(0,n.j4)(l,{key:2,color:"primary",size:"small",onClick:e[2]||(e[2]=t=>s.setInOrder())},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(this.currentQuantity),1)])),_:1})):(0,n.kq)("",!0),this.currentQuantity>0?((0,n.wg)(),(0,n.j4)(u,{key:3,onClick:e[3]||(e[3]=t=>s.addToOrder(-this.productData.product_quantity_min)),color:"light",size:"small"},{default:(0,n.w5)((()=>[this.currentQuantity>this.productData.product_quantity_min?((0,n.wg)(),(0,n.j4)(c,{key:0,icon:a.remove,color:"primary"},null,8,["icon"])):(0,n.kq)("",!0),this.currentQuantity<=this.productData.product_quantity_min?((0,n.wg)(),(0,n.j4)(c,{key:1,icon:a.trash,color:"primary"},null,8,["icon"])):(0,n.kq)("",!0)])),_:1})):(0,n.kq)("",!0)],2)}var i=r(7248),s=r(8903),c=r(2008),u={components:{IonIcon:i.gu,IonButton:i.YG,IonLabel:i.Q$},inject:["$Order"],props:["productItem","entry","orderData","buttonLayout","display"],setup(){return{add:s.IHx,remove:s.OdJ,trash:s._Ij,cart:s.Nu6}},data(){let t=0,e=this.entry||this.productItem;return e.product_quantity_min=1|e.product_quantity_min,this.productItem?(e.entry_quantity=0,t=this.productItem.store_id):t=this.orderData.order_store_id,{order_store_id:t,productData:e}},mounted(){this.productListItemHighlight()},methods:{productListItemHighlight(){let t=document.getElementById(`product_list_item${this.productData.product_id}`);t&&(this.currentQuantity?t.classList.add("incart"):t.classList.remove("incart"))},addToOrder(t){let e=1*this.currentQuantity+1*t;if(this.productItem||this.entry)return this.currentQuantity+t<0&&(e=0),this.updateOrder(e)},setInOrder(){let t=parseFloat(prompt("Введите количество",this.currentQuantity));if(null!=t&&!isNaN(t))return this.updateOrder(t)},async updateOrder(t){(t<0||!t)&&(t=0),t=this.productData.product_quantity_min*Math.round(t/this.productData.product_quantity_min),1==this.productData.is_counted&&t>this.productData.product_quantity&&(this.flash(`В наличии есть только ${this.productData.product_quantity}${this.productData.product_unit}`),t=this.productData.product_quantity);let e=this.productItem?this.productItem.product_quantity:this.productData.product_quantity,r={entry_id:this.productData.entry_id,product_id:this.productData.product_id,product_unit:this.productData.product_unit,product_quantity:e,is_counted:this.productData.is_counted,entry_quantity:t,entry_price:this.productData.product_final_price||this.productData.entry_price,entry_text:this.productData.product_name||this.productData.entry_text,image_hash:this.productData.image_hash||""};this.productData.entry_quantity=t,await this.$Order.doc.entrySave(this.order_store_id,r,this.orderData),this.productListItemHighlight()},async flash(t){const e=await i.Mn.create({message:t,duration:2e3,color:"dark"});return e.present()}},computed:{currentQuantity(){return this.productItem?c.Z.state.cartProductWatchList[this.productData.product_id]||0:this.productData.entry_quantity},componentLayout(){return"inline"==this.display?"inline":"absolute"},isAvailable(){return 1!=this.productData.is_counted||this.productData.product_quantity>0}}},l=r(3744);const d=(0,l.Z)(u,[["render",a],["__scopeId","data-v-8ce5c120"]]);var p=d},6e3:function(t,e,r){"use strict";r.d(e,{Z:function(){return k}});var n=r(6252);const o=t=>((0,n.dD)("data-v-c80f234e"),t=t(),(0,n.Cn)(),t),a=(0,n.Uk)("Корзина"),i={key:0},s={key:1,style:{display:"flex","align-items":"center","justify-content":"center",height:"100%"}},c={style:{width:"max-content","text-align":"center"}},u=(0,n.Uk)("Корзина пуста "),l=o((()=>(0,n._)("br",null,null,-1))),d=o((()=>(0,n._)("a",{href:"/home"},"на главную",-1)));function p(t,e,r,o,p,m){const h=(0,n.up)("ion-title"),f=(0,n.up)("ion-icon"),_=(0,n.up)("ion-toolbar"),g=(0,n.up)("ion-header"),y=(0,n.up)("order-comp"),w=(0,n.up)("ion-label"),b=(0,n.up)("ion-content");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(g,null,{default:(0,n.w5)((()=>[(0,n.Wm)(_,{color:"secondary"},{default:(0,n.w5)((()=>[(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[a])),_:1}),(0,n.Wm)(f,{slot:"end",onClick:e[0]||(e[0]=t=>{m.clearCart()}),icon:o.closeOutline,size:"large"},null,8,["icon"])])),_:1})])),_:1}),(0,n.Wm)(b,null,{default:(0,n.w5)((()=>[p.cartList.length?((0,n.wg)(),(0,n.iD)("div",i,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(p.cartList,(t=>((0,n.wg)(),(0,n.iD)("div",{key:t.order_id,class:"order-segment"},[(0,n.Wm)(y,{orderData:t,onStageCreate:m.onStageCreate},null,8,["orderData","onStageCreate"])])))),128))])):((0,n.wg)(),(0,n.iD)("div",s,[(0,n._)("div",c,[(0,n.Wm)(f,{icon:o.sparklesOutline,size:"large"},null,8,["icon"]),(0,n.Wm)(w,null,{default:(0,n.w5)((()=>[u])),_:1}),l,d])]))])),_:1})],64)}var m=r(7248),h=r(8903),f=r(2008),_=r(7965),g=r(7782),y={components:{OrderComp:_.Z,IonContent:m.W2,IonLabel:m.Q$,IonHeader:m.Gu,IonToolbar:m.sr,IonIcon:m.gu,IonTitle:m.wd},setup(){const t=function(){m.Fy.dismiss()};return{closeModal:t,closeOutline:h.fID,cartOutline:h.Ox0,sparklesOutline:h.Fcs}},data(){return{cartList:f.Z.state.cartList}},created(){this.$topic.on("dismissModal",(()=>{m.Fy.dismiss()}))},methods:{clearCart(t){return this.closeModal(),this.clearHighlightedProducts(),g.Z.cart.itemDelete(t)},clearHighlightedProducts(){document.querySelectorAll(".incart").forEach((t=>t.classList.remove("incart")))},async onStageCreate(t,e){if("customer_purged"==e)return this.clearCart(t);"customer_action_checkout"==e&&(e="customer_confirmed");try{const r=await g.Z.cart.itemSync(t),n=await g.Z.api.itemStageCreate(r.order_id,e);if("ok"==n&&"customer_cart"!=e&&this.clearCart(r.order_id),"ok"==n&&"customer_confirmed"==e){const t=await g.Z.api.itemGet(r.order_id);return this.$heap.commit("setCurrentOrder",t),void this.$router.push("order-checkout")}this.$router.push("/order-"+r.order_id)}catch{}}}},w=r(3744);const b=(0,w.Z)(y,[["render",p],["__scopeId","data-v-c80f234e"]]);var k=b},6050:function(t,e,r){"use strict";r.d(e,{Z:function(){return h}});var n=r(6252),o=r(3577);function a(t,e,r,a,i,s){const c=(0,n.up)("ion-icon"),u=(0,n.up)("ion-label"),l=(0,n.up)("ion-chip");return s.cartListTotal?((0,n.wg)(),(0,n.j4)(l,{key:0,onClick:e[0]||(e[0]=t=>s.openCartList()),color:"dark",style:{"background-color":"var(--ion-color-primary)"}},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{icon:a.cart,style:{"font-weight":"bold",color:"white"}},null,8,["icon"]),(0,n.Wm)(u,{style:{"font-weight":"bold",color:"white"}},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(s.cartListTotal)+(0,o.zw)(t.$heap.state.currencySign),1)])),_:1})])),_:1})):(0,n.kq)("",!0)}var i=r(8903),s=r(7248),c=r(1933),u=r(6e3),l=r(9042),d={inject:["$Order"],components:{IonIcon:s.gu,IonLabel:s.Q$,IonChip:s.hM},setup(){return{cart:i.Nu6}},computed:{cartListTotal(){return this.$Order.cart.listTotalGet()}},methods:{goToCartList(){c.Z.push({path:"/cart-list"})},async openCartList(){const t=await s.Fy.create({component:u.Z}),e=function(){t.dismiss()};return l.Z.on("dismissModal",e),t.present()}}},p=r(3744);const m=(0,p.Z)(d,[["render",a]]);var h=m},7965:function(t,e,r){"use strict";r.d(e,{Z:function(){return S}});var n=r(6252),o=r(3577);const a=t=>((0,n.dD)("data-v-0bf95f54"),t=t(),(0,n.Cn)(),t),i={key:0},s=(0,n.Uk)(" Корзина "),c={style:{display:"grid","grid-template-columns":"auto 135px",width:"100%",gap:"5px"}},u={style:{"grid-column":"1 / span 2"}},l={key:0,style:{position:"relative","min-height":"40px"}},d={key:1,style:{"grid-column":"1 / span 2"}},p=(0,n.Uk)("Сумма заказа: "),m=(0,n.Uk)("Доставка: "),h=(0,n.Uk)("Скидка: "),f=(0,n.Uk)("Итого: "),_={key:1},g=a((()=>(0,n._)("div",{slot:"end",style:{position:"relative",width:"120px","min-height":"48px","background-color":"var(--ion-color-light)"}},null,-1)));function y(t,e,r,a,y,w){const b=(0,n.up)("ion-icon"),k=(0,n.up)("ion-label"),v=(0,n.up)("ion-item"),I=(0,n.up)("ion-chip"),W=(0,n.up)("ion-img"),S=(0,n.up)("ion-thumbnail"),Z=(0,n.up)("cart-add-buttons"),D=(0,n.up)("ion-text"),C=(0,n.up)("ion-note"),O=(0,n.up)("ion-list"),L=(0,n.up)("ion-button"),x=(0,n.up)("ion-col"),U=(0,n.up)("ion-row"),q=(0,n.up)("ion-grid"),T=(0,n.up)("ion-skeleton-text");return r.orderData?((0,n.wg)(),(0,n.iD)("div",i,[(0,n.Wm)(v,{detail:"",button:"",onClick:e[0]||(e[0]=t=>w.storeOpen()),lines:"none"},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{slot:"start",icon:a.storefrontOutline},null,8,["icon"]),(0,n.Wm)(k,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(r.orderData?.store?.store_name),1)])),_:1})])),_:1}),(0,n.Wm)(O,null,{default:(0,n.w5)((()=>[(0,n.Wm)(v,{lines:"full"},{default:(0,n.w5)((()=>[r.orderData.order_id>0?((0,n.wg)(),(0,n.j4)(k,{key:0,color:"medium"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Заказ #"+(0,o.zw)(r.orderData.order_id),1)])),_:1})):((0,n.wg)(),(0,n.j4)(k,{key:1,color:"medium"},{default:(0,n.w5)((()=>[s])),_:1})),r.orderData.stage_current_name?((0,n.wg)(),(0,n.j4)(I,{key:2,color:"primary",slot:"end"},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{icon:a.checkmarkOutline},null,8,["icon"]),(0,n.Wm)(k,{color:"dark"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(r.orderData.stage_current_name),1)])),_:1})])),_:1})):(0,n.kq)("",!0)])),_:1}),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.orderData?.entries,(e=>((0,n.wg)(),(0,n.j4)(v,{key:e.product_id,class:(0,o.C_)(e.deleted_at?"entry-deleted":""),lines:"full",style:{"padding-top":"10px"}},{default:(0,n.w5)((()=>[e.image_hash?((0,n.wg)(),(0,n.j4)(S,{key:0,slot:"start",onClick:t=>w.productOpen(e.product_id)},{default:(0,n.w5)((()=>[(0,n.Wm)(W,{src:`${t.$heap.state.hostname}image/get.php/${e.image_hash}.150.150.webp`},null,8,["src"])])),_:2},1032,["onClick"])):(0,n.kq)("",!0),(0,n._)("div",c,[(0,n._)("div",u,(0,o.zw)(e.entry_text),1),(0,n._)("div",null,[(0,n.Wm)(k,{color:"primary"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(e.entry_price)+(0,o.zw)(t.$heap.state.currencySign),1)])),_:2},1024)]),e.product_id?((0,n.wg)(),(0,n.iD)("div",l,[w.isEditable?((0,n.wg)(),(0,n.j4)(Z,{key:0,buttonLayout:"horizontal",entry:e,orderData:r.orderData},null,8,["entry","orderData"])):((0,n.wg)(),(0,n.j4)(D,{key:1,color:"primary"},{default:(0,n.w5)((()=>[(0,n.Uk)("x "+(0,o.zw)(e.entry_quantity)+(0,o.zw)(e.product_unit),1)])),_:2},1024))])):(0,n.kq)("",!0),e.entry_comment?((0,n.wg)(),(0,n.iD)("div",d,[(0,n.Wm)(C,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(e.entry_comment),1)])),_:2},1024)])):(0,n.kq)("",!0)])])),_:2},1032,["class"])))),128)),(0,n.Wm)(v,{lines:"none"},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{icon:a.cubeOutline,slot:"start",color:"medium"},null,8,["icon"]),(0,n.Wm)(D,{color:"medium"},{default:(0,n.w5)((()=>[p])),_:1}),(0,n.Wm)(k,{slot:"end",color:"primary"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(w.orderTotal)+(0,o.zw)(t.$heap.state.currencySign),1)])),_:1})])),_:1}),r.orderData.order_sum_delivery>0?((0,n.wg)(),(0,n.j4)(v,{key:0,lines:"none"},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{icon:a.rocketOutline,slot:"start",color:"medium"},null,8,["icon"]),(0,n.Wm)(D,{color:"medium"},{default:(0,n.w5)((()=>[m])),_:1}),(0,n.Wm)(k,{slot:"end",color:"primary"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(r.orderData.order_sum_delivery)+(0,o.zw)(t.$heap.state.currencySign),1)])),_:1})])),_:1})):(0,n.kq)("",!0),r.orderData.order_sum_promo>0?((0,n.wg)(),(0,n.j4)(v,{key:1,lines:"none"},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{icon:t.giftOutline,slot:"start",color:"medium"},null,8,["icon"]),(0,n.Wm)(D,{color:"medium"},{default:(0,n.w5)((()=>[h])),_:1}),(0,n.Wm)(k,{slot:"end",color:"primary"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(r.orderData.order_sum_promo)+(0,o.zw)(t.$heap.state.currencySign),1)])),_:1})])),_:1})):(0,n.kq)("",!0),r.orderData.order_sum_total>0?((0,n.wg)(),(0,n.j4)(v,{key:2,lines:"none"},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{icon:a.walletOutline,slot:"start",color:"medium"},null,8,["icon"]),(0,n.Wm)(D,{color:"medium"},{default:(0,n.w5)((()=>[f])),_:1}),(0,n.Wm)(k,{slot:"end",color:"primary"},{default:(0,n.w5)((()=>[(0,n._)("b",null,(0,o.zw)(r.orderData.order_sum_total)+(0,o.zw)(t.$heap.state.currencySign),1)])),_:1})])),_:1})):(0,n.kq)("",!0)])),_:1}),(0,n.Wm)(q,null,{default:(0,n.w5)((()=>[(0,n.Wm)(U,null,{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(w.nextStageButtons,((t,e)=>((0,n.wg)(),(0,n.j4)(x,{key:e},{default:(0,n.w5)((()=>[t[0]?((0,n.wg)(),(0,n.j4)(L,{key:0,onClick:n=>w.stageCreate(r.orderData.order_id,e,t[1]),expand:"block",color:"negative"==t[1]?"danger":"positive"==t[1]?"success":"primary"},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{slot:"start",src:t.icon},null,8,["src"]),(0,n.Uk)(" "+(0,o.zw)(t[0]),1)])),_:2},1032,["onClick","color"])):(0,n.kq)("",!0)])),_:2},1024)))),128))])),_:1})])),_:1})])):((0,n.wg)(),(0,n.iD)("div",_,[(0,n.Wm)(v,{detail:"",button:"",lines:"none"},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{slot:"start",icon:a.storefrontOutline},null,8,["icon"]),(0,n.Wm)(T,{animated:"",style:{width:"200px"}})])),_:1}),(0,n.Wm)(O,null,{default:(0,n.w5)((()=>[((0,n.wg)(),(0,n.iD)(n.HY,null,(0,n.Ko)([1,2,3],(t=>(0,n.Wm)(v,{key:t},{default:(0,n.w5)((()=>[(0,n.Wm)(S,{style:{"background-color":"var(--ion-color-light)"}}),(0,n.Wm)(q,null,{default:(0,n.w5)((()=>[(0,n.Wm)(x,null,{default:(0,n.w5)((()=>[(0,n.Wm)(U,null,{default:(0,n.w5)((()=>[(0,n.Wm)(T,{animated:"",style:{width:"100%"}})])),_:1}),(0,n.Wm)(U,null,{default:(0,n.w5)((()=>[(0,n.Wm)(k,{color:"primary"},{default:(0,n.w5)((()=>[(0,n.Wm)(T,{animated:"",style:{width:"100px"}})])),_:1})])),_:1})])),_:1})])),_:1}),g])),_:2},1024))),64))])),_:1}),(0,n.Wm)(q,null,{default:(0,n.w5)((()=>[(0,n.Wm)(U,null,{default:(0,n.w5)((()=>[((0,n.wg)(),(0,n.iD)(n.HY,null,(0,n.Ko)([1,2],(t=>(0,n.Wm)(x,{key:t},{default:(0,n.w5)((()=>[(0,n.Wm)(L,{color:"light",style:{width:"100%"}})])),_:2},1024))),64))])),_:1})])),_:1})]))}var w=r(7248),b=r(8903),k=r(1111),v={props:["orderData"],components:{CartAddButtons:k.Z,IonIcon:w.gu,IonText:w.yW,IonLabel:w.Q$,IonItem:w.Ie,IonList:w.q_,IonChip:w.hM,IonImg:w.Xz,IonThumbnail:w.Bs,IonNote:w.uN,IonButton:w.YG,IonCol:w.wI,IonRow:w.Nd,IonGrid:w.jY,IonSkeletonText:w.CK},setup(){return{add:b.IHx,remove:b.OdJ,trash:b._Ij,rocketOutline:b.G$D,storefrontOutline:b.qRG,checkmarkOutline:b.TjA,cubeOutline:b.XFf,walletOutline:b.S5P}},data(){return{}},computed:{orderTotal(){let t=0;for(let e in this.orderData?.entries){let r=this.orderData?.entries[e];r&&r.entry_quantity&&r.entry_price&&(t+=r.entry_quantity*r.entry_price)}return t},isEditable(){return!("customer"!=this.orderData.user_role&&"admin"!=this.orderData.user_role||!["customer_cart"].includes(this.orderData.stage_current))||!("supplier"!=this.orderData.user_role&&"admin"!=this.orderData.user_role||!["supplier_corrected"].includes(this.orderData.stage_current))},nextStageButtons(){let t={};for(let e in this.orderData.stage_next)this.orderData.stage_next[e][0]&&(t[e]=this.orderData.stage_next[e],t[e].icon=b.TjA,e.includes("delivery")?t[e].icon=b.G$D:e.includes("supplier")&&(t[e].icon=b.qRG));return t}},methods:{storeOpen(){this.$router.push({path:`/store-${this.orderData.order_store_id}`}),this.parentClose()},productOpen(t){this.$router.push({path:`/product-${t}`}),this.parentClose()},parentClose(){this.$topic.publish("dismissModal")},stageCreate(t,e,r){("negative"!=r||confirm("Вы уверены?"))&&this.$emit("stageCreate",t,e)}}},I=r(3744);const W=(0,I.Z)(v,[["render",y],["__scopeId","data-v-0bf95f54"]]);var S=W},1875:function(t){function e(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}e.keys=function(){return[]},e.resolve=e,e.id=1875,t.exports=e},7907:function(t,e,r){"use strict";r.r(e)},2008:function(t,e,r){"use strict";var n=r(8637);const o=(0,n.MT)({state(){return{hostname:"https://tezkel.local/",app_title:"Тезкель",user:{user_id:-1},deliverySettings:{courierVelocity:3e4,deliveryTimeDelta:10,fee:120,defaultPreparationTime:15},location:{mapBoundaries:[[45.068047847988005,33.8779092284851],[44.907247740163136,34.16767363278196]],mapCenter:[44.943863592382236,34.094551210249215],ymapApiKey:"12d851cb-5290-4946-bf15-817cce1f96df",addressErase:"Россия, Республика Крым, "},currencySign:"₽",isInteractingWithServer:0}},getters:{hostname(t){return t.hostname},userIsLogged(t){return t.user.user_id>0},isOnline(t){const e=1;return t.user.user_id>0&&e},cartListRestore(){const t=30,e=new Date;e.setDate(e.getDate()-t);const r=e.toISOString().replace(/[T]/g," ").replace(/.\d\d\dZ/,""),n=[];let o=[];if(localStorage.cartList&&(o=JSON.parse(localStorage.cartList)),o&&o.length)for(const a of o)a&&a.created_at>r&&a.order_store_id&&n.push(a);return n}},mutations:{setUser(t,e){t.user=e},setUserMainLocation(t,e){t.user.location_main=e},setCurrentStore(t,e){t.currentStore=e},setCurrentOrder(t,e){t.currentOrder=e},setInteractionStatus(t,e){t.isInteractingWithServer+=e},cartListStore(t,e){t.cartList=e,localStorage.cartList=JSON.stringify(e),this.commit("cartWathcerPrepare",e)},cartWathcerPrepare(t,e){const r={};for(const n of e)for(const t of n.entries)r[t.product_id]=t.entry_quantity;t.cartProductWatchList=r}}});o.state.cartList=o.getters.cartListRestore,o.commit("cartWathcerPrepare",o.state.cartList),e["Z"]=o},1933:function(t,e,r){"use strict";r.d(e,{Z:function(){return I}});var n=r(1089),o=r(6252);const a=t=>((0,o.dD)("data-v-6a407d1e"),t=t(),(0,o.Cn)(),t),i=(0,o.Uk)("Главная"),s=(0,o.Uk)("Поиск"),c=(0,o.Uk)("Заказы"),u=(0,o.Uk)("Аккаунт"),l=a((()=>(0,o._)("div",{class:"tab-indicator-container"},[(0,o._)("div",{class:"tab-indicator"},[(0,o._)("div",{class:"tab-indicator-content"})])],-1)));function d(t,e){const r=(0,o.up)("ion-router-outlet"),n=(0,o.up)("ion-icon"),a=(0,o.up)("ion-label"),d=(0,o.up)("ion-tab-button"),p=(0,o.up)("ion-tab-bar"),m=(0,o.up)("ion-tabs"),h=(0,o.up)("ion-page");return(0,o.wg)(),(0,o.j4)(h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Wm)(r),(0,o.Wm)(p,{class:"bottom-bar accent-outer",slot:"bottom"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{tab:"tab1",href:"/home",routerDirection:"backward",selected:""},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{icon:t.homeIcon},null,8,["icon"]),(0,o.Wm)(a,null,{default:(0,o.w5)((()=>[i])),_:1})])),_:1}),(0,o.Wm)(d,{tab:"tab2",href:"/search",routerDirection:"backward"},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{icon:t.searchIcon},null,8,["icon"]),(0,o.Wm)(a,null,{default:(0,o.w5)((()=>[s])),_:1})])),_:1}),(0,o.Wm)(d,{tab:"tab3",href:"/order-list",routerDirection:"backward"},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{icon:t.ordersIcon},null,8,["icon"]),(0,o.Wm)(a,null,{default:(0,o.w5)((()=>[c])),_:1})])),_:1}),(0,o.Wm)(d,{tab:"tab4",href:"/user-dashboard",routerDirection:"backward"},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{icon:t.personIcon},null,8,["icon"]),(0,o.Wm)(a,null,{default:(0,o.w5)((()=>[u])),_:1})])),_:1}),l])),_:1})])),_:1})])),_:1})}var p=r(7248),m=r(3647),h=r(8764),f=r(9262),_=r(2520),g=(0,o.aZ)({components:{IonPage:p._i,IonTabBar:p.yq,IonTabButton:p.ZU,IonTabs:p.UN,IonIcon:p.gu,IonLabel:p.Q$,IonRouterOutlet:p.jP},setup(){return{personIcon:m,ordersIcon:h,searchIcon:f,homeIcon:_}}}),y=r(3744);const w=(0,y.Z)(g,[["render",d],["__scopeId","data-v-6a407d1e"]]);var b=w;const k=[{path:"/",redirect:"/home"},{path:"/",component:b,children:[{path:"",redirect:"/home"},{path:"home",component:()=>Promise.all([r.e(181),r.e(179)]).then(r.bind(r,4179))},{path:"/search",component:()=>r.e(199).then(r.bind(r,6199))},{path:"/courier-dashboard",component:()=>r.e(516).then(r.bind(r,2516))},{path:"/supplier-dashboard",component:()=>r.e(104).then(r.bind(r,4104))},{path:"/product-edit-:id",component:()=>r.e(66).then(r.bind(r,8066))},{path:"/product-:id",component:()=>Promise.all([r.e(181),r.e(310)]).then(r.bind(r,6310))},{path:"/store-edit-:id",component:()=>Promise.all([r.e(883),r.e(505)]).then(r.bind(r,1998))},{path:"/store-:id",component:()=>Promise.all([r.e(181),r.e(643)]).then(r.bind(r,3643))},{path:"/category-:id",component:()=>r.e(804).then(r.bind(r,8804))},{path:"/sign-in",component:()=>r.e(134).then(r.bind(r,5134))},{path:"/sign-up",component:()=>r.e(738).then(r.bind(r,3738))},{path:"/user-edit",component:()=>r.e(415).then(r.bind(r,415))},{path:"/user-dashboard",component:()=>r.e(888).then(r.bind(r,3888)),props:!0},{path:"/verify-phone",name:"UserVerifyPhone",component:()=>r.e(638).then(r.bind(r,8638)),props:!0},{path:"/reset-password",component:()=>r.e(409).then(r.bind(r,7409))},{path:"/user-addresses",component:()=>Promise.all([r.e(883),r.e(794)]).then(r.bind(r,3794))},{path:"/user-favourites",component:()=>r.e(789).then(r.bind(r,5789))},{path:"/order-list",component:()=>r.e(653).then(r.bind(r,1653))},{path:"/order-checkout",component:()=>r.e(369).then(r.bind(r,1369))},{path:"/order-:id",component:()=>r.e(326).then(r.bind(r,6326))},{path:"/user-payment-methods",component:()=>r.e(672).then(r.bind(r,7672))},{path:"/user-notifications",component:()=>r.e(595).then(r.bind(r,2595))},{path:"/help",component:()=>r.e(701).then(r.bind(r,9701))},{path:"/confirm-password",component:()=>r.e(31).then(r.bind(r,3031))},{path:"/text-edit-:id",component:()=>r.e(949).then(r.bind(r,9949))},{path:"/text-list",component:()=>r.e(289).then(r.bind(r,8289))},{path:"/page-:id",component:()=>r.e(186).then(r.bind(r,5186))},{path:"/error-offline",component:()=>r.e(685).then(r.bind(r,2685))}]}],v=(0,n.p7)({history:(0,n.r5)("/"),routes:k});var I=v},7782:function(t,e,r){"use strict";var n=r(9755),o=r.n(n),a=r(2008);const i={api:{async itemGet(t){return o().post(a.Z.state.hostname+"Order/itemGet",{order_id:t})},async itemUpdate(t){return o().post(a.Z.state.hostname+"Order/itemUpdate",JSON.stringify(t))},async itemSync(t){const e={order_id:t.order_id,order_store_id:t.order_store_id,order_description:t.order_description,entries:t.entries};return o().post(a.Z.state.hostname+"Order/itemSync",JSON.stringify(e))},async itemStageCreate(t,e){return o().post(a.Z.state.hostname+"Order/itemStageCreate",{order_id:t,new_stage:e})},async listCartGet(){return o().post(a.Z.state.hostname+"Order/listCartGet")},async listLoad(t){return o().post(a.Z.state.hostname+"Order/listGet",{order_group_type:t})},async listJobGet(t){return o().post(a.Z.state.hostname+"Courier/listJobGet",{courier_id:t})},async itemJobGet(t){return o().post(a.Z.state.hostname+"Courier/itemJobGet",{order_id:t})},async itemJobStart(t,e){return o().post(a.Z.state.hostname+"Courier/itemJobStart",{order_id:t,courier_id:e})},async itemJobTrack(t){return o().post(a.Z.state.hostname+"Courier/itemJobTrack",{order_id:t})},async entrySave(t,e){return t.entry_id?0==t.entry_quantity?this.entryDelete(t.entry_id):this.entryUpdate(t):this.entryCreate(t,e)},async entryCreate(t,e){const r={order_id:e,product_id:t.product_id,product_quantity:t.entry_quantity};return o().post(a.Z.state.hostname+"Entry/itemCreate",r)},async entryUpdate(t){const e={entry_id:t.entry_id,entry_quantity:t.entry_quantity};return o().post(a.Z.state.hostname+"Entry/itemUpdate",JSON.stringify(e))},async entryDelete(t){return o().post(a.Z.state.hostname+"Entry/itemDelete",{entry_id:t})}},doc:{async entrySave(t,e,r){return r?.order_id>0&&e?.entry_id?await i.api.entrySave(e,r.order_id):await i.cart.entrySave(t,e)}},cart:{listSave(){a.Z.commit("cartListStore",a.Z.state.cartList)},listTotalGet(){let t=0;for(const e in a.Z.state.cartList)for(const r in a.Z.state.cartList[e].entries){const n=a.Z.state.cartList[e].entries[r];n&&n.entry_quantity&&n.entry_price&&(t+=n.entry_quantity*n.entry_price)}return t},async itemSync(t){const e=i.cart.itemGetById(t);try{const t=await i.api.itemSync(e?.data);return a.Z.state.cartList[e?.order_index]=t,i.cart.listSave(),t}catch{}},itemGetByStoreId(t){for(const e in a.Z.state.cartList)if(a.Z.state.cartList[e].order_store_id==t&&"customer_purged"!=a.Z.state.cartList[e].stage_current)return{data:a.Z.state.cartList[e],order_index:e};return null},itemGetById(t){for(const e in a.Z.state.cartList)if(a.Z.state.cartList[e].order_id==t&&"customer_purged"!=a.Z.state.cartList[e].stage_current)return{data:a.Z.state.cartList[e],order_index:e};return null},itemSave(t,e){return!!i.cart.itemUpdate(t,e)||i.cart.itemCreate(t,e)},async itemCreate(t,e){let r="";if(a.Z.state.currentStore&&a.Z.state.currentStore.store_id==t)r=a.Z.state.currentStore.store_name;else try{const e=await o().get(a.Z.state.hostname+"Store/itemGet",{store_id:t,mode:"basic"});r=e.store_name}catch{}const n=new Date,s={order_store_id:t,order_id:-t,store:{store_name:r},entries:e||[],created_at:n.toISOString().replace(/[T]/g," ").replace(/.\d\d\dZ/,""),stage_next:{customer_purged:["Удалить","negative"],customer_confirmed:["Продолжить"]},stage_current:"customer_cart",user_role:"customer"};return a.Z.state.cartList.push(s),i.cart.listSave(),t},itemUpdate(t,e){const r=this.itemGetByStoreId(t);return!!r&&(a.Z.state.cartList[r.order_index].entries=r.data.entries.concat(e||[]),i.cart.listSave(),!0)},itemDelete(t){const e=this.itemGetById(t);return!!e&&(a.Z.state.cartList.splice(e.order_index,1),i.cart.listSave(),!0)},entryQuantityGet(t){const e=i.cart.entryGet(t);return e&&e.data.entry_quantity&&parseFloat(e.data.entry_quantity)||0},entryGet(t){for(const e in a.Z.state.cartList){if(!a.Z.state.cartList[e].entries||"customer_deleted"==a.Z.state.cartList[e].stage_current)return null;for(const r in a.Z.state.cartList[e].entries)if(a.Z.state.cartList[e].entries[r].product_id==t)return{data:a.Z.state.cartList[e].entries[r],order_index:e,entry_index:r}}return null},async entrySave(t,e){const r=i.cart.itemGetByStoreId(t);return r?0==e.entry_quantity?(i.cart.entryDelete(e.product_id),!0):!!await i.cart.entryUpdate(e)||i.cart.entryCreate(e,r):(i.cart.itemCreate(t,[e]),!0)},entryCreate(t,e){return a.Z.state.cartList[e.order_index].entries.push(t),i.cart.listSave(),!0},async entryUpdate(t){const e=i.cart.entryGet(t.product_id);if(!e)return!1;const r=Object.assign(e.data,t);if(a.Z.state.cartList[e.order_index].entries[e.entry_index]=r,i.cart.listSave(),r.entry_id)try{await i.api.entryUpdate(t)}catch{}return r},entryDelete(t){const e=i.cart.entryGet(t);a.Z.state.cartList[e?.order_index].entries.splice(e?.entry_index,1),0==a.Z.state.cartList[e?.order_index].entries.length&&a.Z.state.cartList.splice(e?.order_index,1),i.cart.listSave()}}};e["Z"]=i},9042:function(t,e){"use strict";class r{constructor(){this.events={}}on(t,e){this.events[t]=this.events[t]||[],this.events[t].push(e)}off(t,e){if(this.events[t])for(let r=0;r<this.events[t].length;r++)if(this.events[t][r]===e){this.events[t].splice(r,1);break}}publish(t,e){this.events[t]&&this.events[t].forEach((function(t){t(e)}))}}e["Z"]=new r},351:function(t,e,r){"use strict";var n=r(9755),o=r.n(n),a=r(2008),i=r(9042),s=r(411),c=r(7248);const u={init(){this.geo.trackingStart()},async get(t="all"){const e=await o().post(a.Z.state.hostname+"User/itemGet",{mode:t}).done((function(e,r,n){const o=n.getResponseHeader("x-sid");u.sessionIdUse(o),"full"==t&&(u.courier.data=e.courier,u.courier.parseStatus()),a.Z.commit("setUser",e),i.Z.publish("userGet",e)}));return e},async autoSignIn(){localStorage.sessionId&&u.sessionIdUse(localStorage.sessionId);const t=await u.get();if(t?.user_id>1)return t;const e=JSON.parse(localStorage.signInData??"{}");if(e&&e.user_phone&&e.user_pass){try{await u.signIn(e)}catch{}return await u.get()}return t},sessionIdUse(t){localStorage.sessionId=t,o().ajaxSetup({beforeSend:function(e){e.setRequestHeader("x-sid",t)}})},async signIn(t){return await o().post(a.Z.state.hostname+"User/signIn",t).done((function(e,r,n){localStorage.signInData=JSON.stringify(t);const o=n.getResponseHeader("x-sid");u.sessionIdUse(o)})).fail((function(){localStorage.signInData=null}))},async signOut(){try{return await u.courier.signOut(),await o().post(a.Z.state.hostname+"User/signOut"),localStorage.removeItem("signInData"),a.Z.commit("setUser",{user_id:-1}),u.sessionIdUse(null),u.geo.trackingStop(),{user_id:-1}}catch{}},async signUp(t,e){return await o().post(a.Z.state.hostname+"User/signUp",t).then((function(){e({success:!0,message:""})}))},isOnline(){return 1},isAdmin(){let t="";try{t=a.Z.state.user.member_of_groups.group_types}catch{}return t.indexOf("admin")>-1},isCourier(){let t="";try{t=a.Z.state.user.member_of_groups.group_types}catch{}return t.indexOf("courier")>-1},isSupplier(){return!0},supplier:{storeList:null,status:"notsupplier",async listGet(){this.storeList=null;const t=a.Z.state.user.user_id??0;if(t>0){const e={owner_id:t,owner_ally_ids:t};try{this.storeList=await o().post(a.Z.state.hostname+"Store/listGet",e),this.status="supplier"}catch{}}return i.Z.publish("supplierStoreListGet",this.storeList),this.storeList},async storeItemCreate(t){const e=a.Z.state.user.user_id??0;return e>0?await o().post(a.Z.state.hostname+"Store/itemCreate",{name:t}):null}},courier:{data:null,status:"notcourier",async get(){try{const t=await o().post(a.Z.state.hostname+"Courier/itemGet");return u.courier.data=t,u.courier.parseStatus(),t}catch(t){u.courier.data=null}},async updateStatus(t){if(!u.courier.data?.courier_id)return"ok";const e={courier_id:u.courier.data.courier_id,group_type:t},r=await o().post(a.Z.state.hostname+"Courier/itemUpdateStatus",e);return"ok"==r&&(u.courier.status=t,i.Z.publish("courierStatusChange",u.courier.status)),r},parseStatus(){u.courier.status=u.courier.data?.member_of_groups?.group_types||"notcourier",i.Z.publish("courierStatusChange",u.courier.status)},async signOut(){const t=await u.courier.updateStatus("idle");return"ok"==t&&(u.courier.data=null,i.Z.publish("courierStatusChange","notcourier")),t}},geo:{clock:null,timeout:6e4,lastPosition:{},async get(){return await u.geo.permissionCheck(),s.b.getCurrentPosition()},async flash(t){const e=await c.Mn.create({message:t,duration:2e3,color:"dark"});return e.present()},async permissionCheck(){const t=await s.b.checkPermissions();return"granted"==t.location||"granted"==t.coarseLocation||(u.geo.flash("Для правильной работы нужен доступ к местоположению устройства"),!1)},async trackingStart(){if(!u.courier.data?.courier_id)return!1;await u.geo.permissionCheck(),u.geo.trackingStop(),u.geo.clock=await s.b.watchPosition({timeout:u.geo.timeout},(t=>{if(!t||u.geo.lastPosition?.coords?.longitude==t?.coords?.longitude&&u.geo.lastPosition?.coords?.latitude==t?.coords?.latitude)return;u.geo.lastPosition=t;const e={location_longitude:t.coords.longitude,location_latitude:t.coords.latitude,location_holder_id:u.courier.data.courier_id};if(e.location_holder_id&&e.location_latitude&&e.location_longitude)return o().post(a.Z.state.hostname+"Courier/locationAdd",e);console.log("geolocation format error",e)})),console.log("trackingStart",u.geo.clock)},trackingStop(){u.geo.clock&&(console.log("trackingStop",u.geo.clock),s.b.clearWatch({id:u.geo.clock}))}}};u.init(),e["Z"]=u},3647:function(t,e,r){"use strict";t.exports=r.p+"img/account.1cfeffdc.svg"},2520:function(t,e,r){"use strict";t.exports=r.p+"img/home.8fd30713.svg"},8764:function(t,e,r){"use strict";t.exports=r.p+"img/orders.ea36eab8.svg"},9262:function(t,e,r){"use strict";t.exports=r.p+"img/search.41f0dbf4.svg"},94:function(t,e,r){"use strict";t.exports=r.p+"img/tezkel_logo.7ce0808f.svg"}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var a=e[n]={id:n,loaded:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}r.m=t,function(){var t=[];r.O=function(e,n,o,a){if(!n){var i=1/0;for(l=0;l<t.length;l++){n=t[l][0],o=t[l][1],a=t[l][2];for(var s=!0,c=0;c<n.length;c++)(!1&a||i>=a)&&Object.keys(r.O).every((function(t){return r.O[t](n[c])}))?n.splice(c--,1):(s=!1,a<i&&(i=a));if(s){t.splice(l--,1);var u=o();void 0!==u&&(e=u)}}return e}a=a||0;for(var l=t.length;l>0&&t[l-1][2]>a;l--)t[l]=t[l-1];t[l]=[n,o,a]}}(),function(){r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,{a:e}),e}}(),function(){r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){r.f={},r.e=function(t){return Promise.all(Object.keys(r.f).reduce((function(e,n){return r.f[n](t,e),e}),[]))}}(),function(){r.u=function(t){return"js/"+t+"."+{31:"873fb06a",66:"3e231325",78:"fa8dd23f",104:"b95ed929",134:"f864db68",168:"abf7ef8d",179:"8ff0e7a2",181:"7a2e920b",186:"c633c0fe",199:"6235438a",289:"9a3660eb",310:"821a24da",326:"ab21180a",338:"feabc5c4",369:"505b029c",409:"8d4f8c00",415:"9a22d3b9",505:"39db8b7d",516:"e4ce6ce4",541:"35bc9fb8",544:"9ddd2f42",576:"0829716b",595:"c0ed97d9",638:"08f81602",642:"dfb8c347",643:"0438e521",653:"8630d00a",672:"a8b6eb5f",685:"7730cc7b",701:"f8235525",738:"b14b0dae",753:"99e4758c",775:"285b7e95",789:"22bc866d",794:"aad3ea36",804:"3fb6825b",880:"98b894e5",883:"0fab3c3d",888:"115887b8",949:"525ed475",990:"5ab3e613"}[t]+".js"}}(),function(){r.miniCssF=function(t){return"css/"+t+"."+{66:"27bc44a9",104:"5a6761e6",134:"bd0cf19c",179:"a984cb96",199:"f49f5c40",310:"2701e2b3",326:"5b4b755c",369:"67c31d1b",505:"52a81b33",516:"1823202f",643:"6de49281",653:"149b4c99",888:"f999829d"}[t]+".css"}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="Tezkel:";r.l=function(n,o,a,i){if(t[n])t[n].push(o);else{var s,c;if(void 0!==a)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var d=u[l];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==e+a){s=d;break}}s||(c=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,r.nc&&s.setAttribute("nonce",r.nc),s.setAttribute("data-webpack",e+a),s.src=n),t[n]=[o];var p=function(e,r){s.onerror=s.onload=null,clearTimeout(m);var o=t[n];if(delete t[n],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((function(t){return t(r)})),e)return e(r)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=p.bind(null,s.onerror),s.onload=p.bind(null,s.onload),c&&document.head.appendChild(s)}}}(),function(){r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){r.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){r.p="/"}(),function(){var t=function(t,e,r,n){var o=document.createElement("link");o.rel="stylesheet",o.type="text/css";var a=function(a){if(o.onerror=o.onload=null,"load"===a.type)r();else{var i=a&&("load"===a.type?"missing":a.type),s=a&&a.target&&a.target.href||e,c=new Error("Loading CSS chunk "+t+" failed.\n("+s+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=i,c.request=s,o.parentNode.removeChild(o),n(c)}};return o.onerror=o.onload=a,o.href=e,document.head.appendChild(o),o},e=function(t,e){for(var r=document.getElementsByTagName("link"),n=0;n<r.length;n++){var o=r[n],a=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(a===t||a===e))return o}var i=document.getElementsByTagName("style");for(n=0;n<i.length;n++){o=i[n],a=o.getAttribute("data-href");if(a===t||a===e)return o}},n=function(n){return new Promise((function(o,a){var i=r.miniCssF(n),s=r.p+i;if(e(i,s))return o();t(n,s,o,a)}))},o={143:0};r.f.miniCss=function(t,e){var r={66:1,104:1,134:1,179:1,199:1,310:1,326:1,369:1,505:1,516:1,643:1,653:1,888:1};o[t]?e.push(o[t]):0!==o[t]&&r[t]&&e.push(o[t]=n(t).then((function(){o[t]=0}),(function(e){throw delete o[t],e})))}}(),function(){var t={143:0};r.f.j=function(e,n){var o=r.o(t,e)?t[e]:void 0;if(0!==o)if(o)n.push(o[2]);else{var a=new Promise((function(r,n){o=t[e]=[r,n]}));n.push(o[2]=a);var i=r.p+r.u(e),s=new Error,c=function(n){if(r.o(t,e)&&(o=t[e],0!==o&&(t[e]=void 0),o)){var a=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;s.message="Loading chunk "+e+" failed.\n("+a+": "+i+")",s.name="ChunkLoadError",s.type=a,s.request=i,o[1](s)}};r.l(i,c,"chunk-"+e,e)}},r.O.j=function(e){return 0===t[e]};var e=function(e,n){var o,a,i=n[0],s=n[1],c=n[2],u=0;if(i.some((function(e){return 0!==t[e]}))){for(o in s)r.o(s,o)&&(r.m[o]=s[o]);if(c)var l=c(r)}for(e&&e(n);u<i.length;u++)a=i[u],r.o(t,a)&&t[a]&&t[a][0](),t[i[u]]=0;return r.O(l)},n=self["webpackChunkTezkel"]=self["webpackChunkTezkel"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=r.O(void 0,[998],(function(){return r(5458)}));n=r.O(n)})();
//# sourceMappingURL=app.75b7100c.js.map