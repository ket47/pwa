{"version":3,"file":"js/6561-legacy.2600639d.js","mappings":"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","sources":["webpack://tezkel/./src/components/ItemPicker.vue","webpack://tezkel/./src/components/ItemPicker.vue?9ba5","webpack://tezkel/./src/components/LedgerComp.vue","webpack://tezkel/./src/components/LedgerComp.vue?a865"],"sourcesContent":["<style scoped>\r\n\r\n</style>\r\n<template>\r\n<div class=\"ion-page\">\r\n  <ion-header>\r\n      <ion-toolbar>\r\n          <ion-title>Выбрать {{itemTypeName}}</ion-title>\r\n          <ion-icon :icon=\"closeOutline\" @click=\"closeModal();\" slot=\"end\" size=\"large\"></ion-icon>\r\n      </ion-toolbar>\r\n  </ion-header>\r\n  <ion-content>\r\n    <ion-searchbar v-if=\"itemTypeLabel!='acc'\" v-model=\"query\" placeholder=\"поиск\" :debounce=\"100\" @ionInput=\"listGet()\" />\r\n    <ion-list v-if=\"!itemList\">\r\n        <ion-item v-for=\"i in [0,1,2,3,4,5,6,7,8,9]\" :key=\"i\" button detail>\r\n            <ion-skeleton-text style=\"height:35px;width:40px\" animated/>\r\n             <ion-skeleton-text style=\"width:100%\" animated/>\r\n        </ion-item>\r\n    </ion-list>\r\n    <ion-list v-else-if=\"itemList?.length\">\r\n        <ion-item v-for=\"item in itemList\" :key=\"item.id\" button detail @click=\"itemPick(item)\">\r\n            <ion-avatar slot=\"start\">\r\n                <ion-img v-if=\"item.image_hash\" :src=\"`${$heap.state.hostname}image/get.php/${item.image_hash}.100.100.webp`\"/>\r\n            </ion-avatar>\r\n            {{item.name}}\r\n        </ion-item>\r\n    </ion-list>\r\n    <ion-list v-else>\r\n        <ion-item>\r\n            Ничего не найдено\r\n        </ion-item>\r\n    </ion-list>\r\n  </ion-content>\r\n</div>\r\n</template>\r\n<script>\r\nimport \r\n{\r\n  closeOutline\r\n}                         from 'ionicons/icons';\r\nimport {\r\n    modalController,\r\n    IonContent,\r\n    IonHeader,\r\n    IonToolbar,\r\n    IonTitle,\r\n    IonIcon,\r\n    IonImg,\r\n    IonList,\r\n    IonItem,\r\n    IonSearchbar,\r\n    IonSkeletonText,\r\n    IonAvatar,\r\n}                         from \"@ionic/vue\";\r\nimport jQuery             from 'jquery'\r\n\r\nexport default {\r\n    props:['itemType'],\r\n    components:{\r\n        IonContent,\r\n        IonHeader,\r\n        IonToolbar,\r\n        IonTitle,\r\n        IonIcon,\r\n        IonImg,\r\n        IonList,\r\n        IonItem,\r\n        IonSearchbar,\r\n        IonSkeletonText,\r\n        IonAvatar,\r\n    },\r\n    setup(){\r\n        return {closeOutline}\r\n    },\r\n    data(){\r\n        const itemTypeLabel=this.itemType?this.itemType:'order'\r\n        return {\r\n            query:null,\r\n            itemList:null,\r\n            itemTypeLabel,\r\n            itemTypeName:''\r\n        }\r\n    },\r\n    mounted(){\r\n        this.listGet()\r\n    },\r\n    methods:{\r\n        async listGet(){\r\n            if( this.itemTypeLabel=='order' ){\r\n                this.itemTypeName='Заказ'\r\n                this.ordersGet()\r\n            } else\r\n            if( this.itemTypeLabel=='store' ){\r\n                this.itemTypeName='Продавец'\r\n                this.storesGet()\r\n            } else\r\n            if( this.itemTypeLabel=='courier' ){\r\n                this.itemTypeName='Курьер'\r\n                this.couriersGet()\r\n            } else \r\n            if( this.itemTypeLabel=='acc' ){\r\n                this.itemTypeName='Счет'\r\n                this.accountsGet()\r\n            } else {\r\n                this.$flash('unknown item type '+this.itemTypeLabel)\r\n            }\r\n        },\r\n        async storesGet(){\r\n            const request={\r\n                name_query:this.query,\r\n                name_query_fields:'store_name',\r\n                limit:10\r\n            }\r\n            try{\r\n                let result=await jQuery.post(`${this.$heap.state.hostname}Store/listGet`,request)\r\n                this.itemList=result.map(item=>{\r\n                    item.name=`продавец ${item.store_name}`;\r\n                    item.id=item.store_id\r\n                    return item\r\n                    })\r\n            }catch{/** */}\r\n        },\r\n        async couriersGet(){\r\n            const request={\r\n                name_query:this.query,\r\n                name_query_fields:'user_name,user_phone',\r\n                limit:10\r\n            }\r\n            try{\r\n                let result=await jQuery.post(`${this.$heap.state.hostname}Courier/listGet`,request)\r\n                this.itemList=result.map(item=>{\r\n                    item.name=`курьер ${item.user_name} ${item.user_phone}`;\r\n                    item.id=item.courier_id\r\n                    item.image_hash=item.courier_photo_image_hash\r\n                    return item\r\n                    })\r\n            }catch{/** */}\r\n        },\r\n        async ordersGet(){\r\n            const request={\r\n                name_query:this.query,\r\n                name_query_fields:'store_name,order_id,user_name',\r\n                limit:10\r\n            }\r\n            try{\r\n                let result=await jQuery.post(`${this.$heap.state.hostname}Order/listGet`,request)\r\n                this.itemList=result.map(item=>{\r\n                    item.name=`заказ#${item.order_id} ${item.store_name} > ${item.user_name}`;\r\n                    item.id=item.order_id\r\n                    return item\r\n                    })\r\n            }catch{/** */}\r\n        },\r\n        async accountsGet(){\r\n            const request={\r\n                group_table:'transaction_account_list'\r\n            }\r\n            try{\r\n                let result=await jQuery.post(`${this.$heap.state.hostname}Admin/GroupManager/listGet`,request)\r\n                this.itemList=result.map(item=>{\r\n                    item.name=`${item.group_name}`;\r\n                    item.type=item.group_type\r\n                    return item\r\n                    })\r\n            }catch{/** */}\r\n        },\r\n        itemPick(item){\r\n            modalController.dismiss(item);\r\n        },\r\n        closeModal(){\r\n            modalController.dismiss();\r\n        }\r\n    }\r\n}\r\n</script>","import { render } from \"./ItemPicker.vue?vue&type=template&id=6cfff72a\"\nimport script from \"./ItemPicker.vue?vue&type=script&lang=js\"\nexport * from \"./ItemPicker.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<style >\r\n.tag{\r\n  padding: 5px;\r\n  color:#ccc;\r\n  display: inline-block;\r\n}\r\n.tag:hover{\r\n  color: var(--ion-color-primary);\r\n  cursor:pointer;\r\n}\r\n</style>\r\n\r\n\r\n<template>\r\n<div>\r\n  <ion-list>\r\n    <ion-item lines=\"full\">\r\n      <ion-label>Баланс</ion-label>\r\n      <ion-text slot=\"end\" v-if=\"balance>0\" color=\"success\"><b>{{ balance }}{{ $heap.state.currencySign }}</b></ion-text>\r\n      <ion-text slot=\"end\" v-else-if=\"balance<0\" color=\"danger\"><b>{{ balance }}{{ $heap.state.currencySign }}</b></ion-text>\r\n      <ion-text slot=\"end\" v-else color=\"medium\"><b>{{ balance }}{{ $heap.state.currencySign }}</b></ion-text>\r\n    </ion-item>\r\n  </ion-list>\r\n\r\n  <ion-accordion-group :value=\"settingsType\">\r\n    <ion-accordion value=\"period\">\r\n      <ion-item slot=\"header\">\r\n        <ion-icon :icon=\"calendarOutline\" slot=\"start\"/>\r\n        <ion-text>Период</ion-text>\r\n        <ion-text color=\"medium\" slot=\"end\">{{ start_at_dmy }} - {{ finish_at_dmy }}</ion-text>\r\n      </ion-item>\r\n      <ion-list slot=\"content\">\r\n        <ion-item>\r\n          <ion-text color=\"medium\">Начальная дата</ion-text>\r\n          <div slot=\"end\" style=\"display:grid;grid-template-columns:120px 100px;\">\r\n            <ion-input type=\"date\" v-model=\"start_at\"  @ionInput=\"listGet()\" debounce=\"500\" />\r\n            <ion-input type=\"text\" style=\"text-align:right\" v-if=\"meta.sum_start\" :value=\"`${meta.sum_start}${$heap.state.currencySign}`\" readonly />\r\n          </div>\r\n        </ion-item>\r\n        <ion-item>\r\n          <ion-text color=\"medium\">Обороты</ion-text>\r\n          <div slot=\"end\" style=\"display:grid;grid-template-columns:120px 100px;\">\r\n            <ion-input type=\"text\" style=\"text-align:right\" v-if=\"meta.sum_debit\" :value=\"`+${meta.sum_debit}${$heap.state.currencySign}`\" readonly />\r\n            <ion-input type=\"text\" style=\"text-align:right\" v-if=\"meta.sum_credit\" :value=\"`-${meta.sum_credit}${$heap.state.currencySign}`\" readonly />\r\n          </div>\r\n        </ion-item>\r\n        <ion-item>\r\n          <ion-text color=\"medium\">Конечная дата</ion-text>\r\n          <div slot=\"end\" style=\"display:grid;grid-template-columns:120px 100px;\">\r\n            <ion-input type=\"date\" v-model=\"finish_at\"  @ionInput=\"listGet()\" />\r\n            <ion-input type=\"text\" style=\"text-align:right\" v-if=\"meta.sum_finish\" :value=\"`${meta.sum_finish}${$heap.state.currencySign}`\" readonly />\r\n          </div>\r\n        </ion-item>\r\n      </ion-list>\r\n    </ion-accordion>\r\n    <ion-accordion value=\"tags\">\r\n      <ion-item slot=\"header\">\r\n        <ion-icon :icon=\"pricetagOutline\" slot=\"start\"/>\r\n        <ion-text>Фильтр по тегам</ion-text>\r\n      </ion-item>\r\n      <ion-list slot=\"content\">\r\n        <ion-item lines=\"none\">\r\n          <ion-text>\r\n            <ion-text v-if=\"!tagDict\" color=\"medium\">нажмите на #тег для фильтрации</ion-text>\r\n            <ion-chip v-for=\"(tagLabel,tag) in tagDict\" :key=\"tag\" color=\"primary\">#{{tagLabel}} <ion-icon :src=\"closeCircle\" @click=\"itemTagRemove(tag)\"></ion-icon></ion-chip>\r\n            <ion-chip @click=\"itemTagCreate()\" color=\"medium\" v-if=\"is_admin\"><ion-icon :src=\"addOutline\"/><ion-label>Добавить #тег</ion-label></ion-chip>\r\n          </ion-text>\r\n        </ion-item>\r\n      </ion-list>\r\n    </ion-accordion>\r\n  </ion-accordion-group>\r\n  <ion-searchbar v-model=\"searchQuery\" placeholder=\"Поиск по сумме или описанию\" debounce=\"300\" @ionInput=\"listGet()\"/>\r\n  <ion-list v-if=\"ledger==null\">\r\n    <ion-item v-for=\"i in [1,2,3]\" :key=\"i\">\r\n        <ion-text slot=\"start\"><ion-skeleton-text animated style=\"width:50px\" /></ion-text>\r\n        <ion-label><ion-skeleton-text animated style=\"width:100%\" /></ion-label>\r\n        <ion-label slot=\"end\" color=\"success\"><ion-skeleton-text animated style=\"width:50px\" /></ion-label>\r\n    </ion-item>\r\n  </ion-list>\r\n\r\n\r\n\r\n  <ion-list v-else-if=\"ledger.length>0\">\r\n    <ion-item detail=\"false\">\r\n      <ion-chip @click=\"listGet()\" color=\"medium\">\r\n        <ion-icon :src=\"refreshOutline\"/>\r\n        <ion-label>Обновить</ion-label>\r\n      </ion-chip>\r\n    </ion-item>\r\n    <div v-for=\"trans in ledgerCalc\" :key=\"trans.trans_id\">\r\n      <ion-item :detail=\"is_admin\" lines=\"none\" @click=\"itemClick(trans.trans_id)\">\r\n          <ion-text slot=\"start\">{{trans.date}}</ion-text>\r\n          <ion-text>\r\n            {{trans.trans_description}}\r\n          </ion-text>\r\n          <ion-label slot=\"end\" v-if=\"trans.amount_sign*trans.trans_amount>0\" color=\"success\">{{trans.trans_amount}}</ion-label>\r\n          <ion-label slot=\"end\" v-else-if=\"trans.amount_sign*trans.trans_amount<0\"  color=\"danger\">{{trans.trans_amount}}</ion-label>\r\n          <ion-label slot=\"end\" v-else  color=\"medium\">{{trans.trans_amount}}</ion-label>\r\n      </ion-item>\r\n      <ion-item>\r\n        <ion-text>\r\n          <div class=\"tag\" v-for=\"(tag,i) in trans.tag_list\" :key=\"i\" @click=\"itemTagAdd(tag)\">#{{tag[1]}}</div>\r\n        </ion-text>\r\n      </ion-item>\r\n    </div>\r\n  </ion-list>\r\n\r\n\r\n  <ion-list v-else>\r\n    <ion-item>\r\n        Нет операций в данном периоде\r\n    </ion-item>\r\n  </ion-list>\r\n\r\n\r\n\r\n  <ion-infinite-scroll @ionInfinite=\"listLoadMore($event)\" id=\"moderation-infinite-scroll\">\r\n      <ion-infinite-scroll-content loading-spinner=\"bubbles\" loading-text=\"Загрузка...\"></ion-infinite-scroll-content>\r\n  </ion-infinite-scroll>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  IonIcon,\r\n  IonLabel,\r\n  IonItem,\r\n  IonInput,\r\n  IonList,\r\n  IonAccordion,\r\n  IonAccordionGroup,\r\n  IonText,\r\n  IonSkeletonText,\r\n  IonSearchbar,\r\n  IonChip,\r\n  IonInfiniteScroll,\r\n  IonInfiniteScrollContent,\r\n  modalController,\r\n  actionSheetController,\r\n}                             from \"@ionic/vue\";\r\nimport { \r\n  calendarOutline,\r\n  addOutline,\r\n  closeCircle,\r\n  pricetagOutline,\r\n  refreshOutline,\r\n  calculatorOutline,\r\n}                             from \"ionicons/icons\";\r\nimport jquery                 from \"jquery\";\r\nimport User                   from '@/scripts/User.js'\r\nimport Utils                  from '@/scripts/Utils.js'\r\n\r\nimport ItemPicker             from '@/components/ItemPicker.vue'\r\n\r\nexport default {\r\n  components: {\r\n    IonIcon,\r\n    IonLabel,\r\n    IonItem,\r\n    IonInput,\r\n    IonList,\r\n    IonAccordion,\r\n    IonAccordionGroup,\r\n    IonText,\r\n    IonSkeletonText,\r\n    IonSearchbar,\r\n    IonChip,\r\n  IonInfiniteScroll,\r\n  IonInfiniteScrollContent,\r\n  },\r\n  props:['permanentTag'],\r\n  setup(){\r\n    return {\r\n      calendarOutline,\r\n      addOutline,\r\n      closeCircle,\r\n      pricetagOutline,\r\n      refreshOutline,\r\n      calculatorOutline,\r\n    }\r\n  },\r\n  data() {\r\n    const today=Utils.date.today()\r\n    const firstDay=Utils.date.firstDay(-1)\r\n    return {\r\n      balance: '-',\r\n      start_at: Utils.date.toIso(firstDay),\r\n      finish_at: Utils.date.toIso(today),\r\n      searchQuery:'',\r\n      tagQuery:'',\r\n      tagDict:null,\r\n\r\n      ledger:null,\r\n      meta:{},\r\n      today:today,\r\n      settingsType:null,\r\n\r\n      can_reload_at:0\r\n    };\r\n  },\r\n  computed:{\r\n    ledgerCalc(){\r\n        if( this.ledger==null ){\r\n            return null;\r\n        }\r\n        let lcalc=[];\r\n        for(let trans of this.ledger){\r\n            trans.date=this.toLocDate(trans.trans_date)\r\n            trans.tag_list= trans.tags?.substring(1)?.toLowerCase()?.split('|')?.map(tag=>tag.split('#'))\r\n            lcalc.push(trans)\r\n        }\r\n        return lcalc\r\n    },\r\n    is_admin(){\r\n      return User.isAdmin()\r\n    },\r\n    start_at_dmy(){\r\n      return Utils.date.isoToDmy(this.start_at)\r\n    },\r\n    finish_at_dmy(){\r\n      return Utils.date.isoToDmy(this.finish_at)\r\n    },\r\n  },\r\n  watch:{\r\n    query:function(){\r\n      this.listGet()\r\n    }\r\n  },\r\n  methods: {\r\n    async listLoadMore(ev){\r\n        await this.listGet('append')\r\n        ev.target.complete();\r\n    },\r\n    async listGet(mode) {\r\n      const now=Date.now()\r\n      if(!mode && this.can_reload_at>now){\r\n        return\r\n      }\r\n      this.can_reload_at=now+1000\r\n      try {\r\n        const tagQuery=Object.keys(this.tagDict??{})?.join(' ')\r\n        const request={\r\n            start_at:this.start_at,\r\n            finish_at:this.finish_at,\r\n            tagQuery:`${tagQuery} ${this.permanentTag??''}`,\r\n            searchQuery:this.searchQuery,\r\n            limit:10\r\n        }\r\n        if(mode=='append'){\r\n            request.offset=this.ledger?.length??0\r\n            request.limit=10\r\n        }\r\n        const response= await jquery.post(`${this.$heap.state.hostname}Transaction/listGet`,request)\r\n        if( mode=='append' ){\r\n            this.ledger??=[]\r\n            response.ledger=this.ledger.concat(response.ledger)\r\n        }\r\n        this.ledger=response.ledger\r\n        this.meta=response.meta\r\n        //if( this.finish_at==this.today ){\r\n            this.balance=response.meta.sum_finish\r\n        //}\r\n      } catch (err) {\r\n        const exception_code = err?.responseJSON?.messages?.error;\r\n        switch (exception_code) {\r\n          case \"large_interval\":\r\n            this.$flash(\"Период должен быть не больше 3 месяцев\")\r\n            break;\r\n          default:\r\n            this.$flash(\"Ошибка получения выписки\")\r\n            break;\r\n        }\r\n        this.ledger=[]\r\n        this.balance=0\r\n        return false;\r\n      }\r\n    },\r\n    toLocDate( iso ){\r\n        const event = new Date(Date.parse(iso));\r\n        const options = { month: 'short', day: 'numeric' };\r\n\r\n        return event.toLocaleDateString(undefined, options);\r\n    },\r\n    itemClick(trans_id){\r\n      if( !User.isAdmin() ){\r\n        return\r\n      }\r\n      this.$go(`/admin/transaction-edit-${trans_id}`)\r\n    },\r\n    async itemTagPick( itemType ){\r\n      const modal = await modalController.create({\r\n          component: ItemPicker,\r\n          componentProps:{itemType},\r\n          initialBreakpoint: 0.75,\r\n          breakpoints: [0.75, 1],\r\n          canDissmiss:true,\r\n      });\r\n      modal.present()\r\n      this.$topic.on('dismissModal',()=>{\r\n          modal.dismiss()\r\n      });\r\n      const item=await modal.onDidDismiss();\r\n      if(!item.data){\r\n          return\r\n      }\r\n\r\n      if(item.data.order_id??0){\r\n        this.itemTagAdd([`order:${item.data.order_id}`,`заказ ${item.data.order_id}`])\r\n      }\r\n      if(item.data.store_id??0){\r\n        this.itemTagAdd([`store:${item.data.store_id}`,`продавец ${item.data.store_name}`])\r\n      }\r\n      if(item.data.courier_id??0){\r\n        this.itemTagAdd([`courier:${item.data.courier_id}`,`курьер ${item.data.courier_name}`])\r\n      }\r\n      if(item.data.type??0){\r\n        this.itemTagAdd([`acc::${item.data.type}`,`счет ${item.data.name}`])\r\n      }\r\n    },\r\n    async itemTagCreate(){\r\n        const actionSheet = await actionSheetController.create({\r\n          header: 'Тип тега',\r\n          buttons: [\r\n            {\r\n              text: 'Заказ',\r\n              data: 'order',\r\n            },\r\n            {\r\n              text: 'Продавец',\r\n              data: 'store',\r\n            },\r\n            {\r\n              text: 'Курьер',\r\n              data: 'courier',\r\n            },\r\n            {\r\n              text: 'Счет',\r\n              data: 'acc',\r\n            },\r\n          ],\r\n        });\r\n        await actionSheet.present();\r\n        const itemType = await actionSheet.onDidDismiss();\r\n        if(itemType?.data){\r\n          this.itemTagPick(itemType?.data)\r\n        }\r\n    },\r\n    itemTagAdd(tag){\r\n      let dict=this.tagDict??{}\r\n      dict[tag[0]]=tag[1]\r\n      this.tagDict=dict\r\n      this.listGet()\r\n      this.settingsType='tags'\r\n    },\r\n    itemTagRemove(tag){\r\n      let dict=this.tagDict??{}\r\n      dict[tag] && delete dict[tag]\r\n      const size = Object.keys(dict).length\r\n      this.tagDict=size?dict:null\r\n      this.listGet()\r\n      this.settingsType='tags'\r\n    }\r\n  },\r\n  mounted() {\r\n    this.listGet()\r\n  },\r\n};\r\n</script>","import { render } from \"./LedgerComp.vue?vue&type=template&id=02675e1b\"\nimport script from \"./LedgerComp.vue?vue&type=script&lang=js\"\nexport * from \"./LedgerComp.vue?vue&type=script&lang=js\"\n\nimport \"./LedgerComp.vue?vue&type=style&index=0&id=02675e1b&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_createVNode","_component_ion_header","_component_ion_toolbar","_component_ion_title","_toDisplayString","$data","itemTypeName","_component_ion_icon","icon","$setup","closeOutline","onClick","_cache","$event","$options","closeModal","slot","size","_component_ion_content","_$data$itemList","itemTypeLabel","_createBlock","_component_ion_searchbar","query","placeholder","debounce","onIonInput","listGet","itemList","length","_component_ion_list","key","_Fragment","_renderList","item","_component_ion_item","id","button","detail","itemPick","_component_ion_avatar","image_hash","_component_ion_img","src","_ctx","$heap","state","hostname","name","i","_component_ion_skeleton_text","style","animated","props","components","IonContent","IonHeader","IonToolbar","IonTitle","IonIcon","IonImg","IonList","IonItem","IonSearchbar","IonSkeletonText","IonAvatar","setup","data","this","itemType","mounted","methods","ordersGet","storesGet","couriersGet","accountsGet","$flash","request","name_query","name_query_fields","limit","result","jQuery","map","store_name","store_id","_unused","user_name","user_phone","courier_id","courier_photo_image_hash","_unused2","order_id","_unused3","group_table","group_name","type","group_type","_unused4","modalController","dismiss","__exports__","render","lines","_component_ion_label","balance","_component_ion_text","color","_createElementVNode","currencySign","_component_ion_accordion_group","value","settingsType","_component_ion_accordion","calendarOutline","start_at_dmy","finish_at_dmy","_component_ion_input","start_at","meta","sum_start","readonly","_hoisted_2","sum_debit","sum_credit","_hoisted_3","finish_at","sum_finish","pricetagOutline","tagDict","tagLabel","tag","_component_ion_chip","closeCircle","itemTagRemove","is_admin","itemTagCreate","addOutline","searchQuery","ledger","refreshOutline","ledgerCalc","trans","trans_id","itemClick","date","trans_description","amount_sign","trans_amount","tag_list","itemTagAdd","_hoisted_4","_component_ion_infinite_scroll","onIonInfinite","listLoadMore","_component_ion_infinite_scroll_content","IonLabel","IonInput","IonAccordion","IonAccordionGroup","IonText","IonChip","IonInfiniteScroll","IonInfiniteScrollContent","calculatorOutline","today","Utils","firstDay","toIso","tagQuery","can_reload_at","computed","lcalc","_trans$tags","_trans$tags$substring","_trans$tags$substring2","_trans$tags$substring3","toLocDate","trans_date","tags","substring","toLowerCase","split","push","User","isAdmin","isoToDmy","watch","ev","target","complete","mode","now","Date","_Object$keys","_this$tagDict","_this$permanentTag","Object","keys","join","permanentTag","_this$ledger$length","_this$ledger","offset","response","jquery","_this$ledger2","concat","err","_err$responseJSON","_err$responseJSON$mes","exception_code","responseJSON","messages","error","iso","event","parse","options","month","day","toLocaleDateString","undefined","$go","itemTagPick","_item$data$order_id","_item$data$store_id","_item$data$courier_id","_item$data$type","modal","create","component","ItemPicker","componentProps","initialBreakpoint","breakpoints","canDissmiss","present","$topic","on","onDidDismiss","courier_name","actionSheet","actionSheetController","header","buttons","text","_this$tagDict2","dict","_this$tagDict3"],"sourceRoot":""}