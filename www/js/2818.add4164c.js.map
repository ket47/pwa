{"version":3,"file":"js/2818.add4164c.js","mappings":"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","sources":["webpack://tezkel/./src/views/UserEdit.vue","webpack://tezkel/./src/views/UserEdit.vue?0119"],"sourcesContent":["<template>\r\n  <base-layout page-title=\"Мой профиль\">\r\n    <ion-list>\r\n      <ion-item>\r\n        <ion-icon :icon=\"personOutline\" slot=\"start\" />\r\n        <ion-input\r\n          v-model=\"fields.user_name\"\r\n          name=\"user_name\"\r\n          type=\"text\"\r\n          @change=\"save('user_name', $event.target.value)\"\r\n          placeholder=\"как к вам обращаться?\"\r\n          label=\"Ваш псевдоним\"\r\n          label-placement=\"stacked\"\r\n          required\r\n        ></ion-input>\r\n      </ion-item>\r\n\r\n      <ion-item>\r\n        <ion-icon :icon=\"giftOutline\" slot=\"start\" />\r\n        <ion-input\r\n          v-model=\"fields.user_birthday\"\r\n          placeholder=\"День рождения\"\r\n          label=\"День рождения\"\r\n          label-placement=\"stacked\"\r\n          name=\"user_birthday\"\r\n          type=\"date\"\r\n          @change=\"save('user_birthday', $event.target.value)\"\r\n          :readonly=\"birthday_is_set\"\r\n        ></ion-input>\r\n      </ion-item>\r\n      <!-- <ion-item>\r\n            <ion-icon :icon=\"personOutline\" slot=\"start\"/>\r\n            <ion-input \r\n              v-model=\"fields.user_surname\" \r\n              placeholder=\"Фамилия\"\r\n              label=\"Фамилия\"\r\n              label-placement=\"stacked\"\r\n              name=\"user_surname\" \r\n              type=\"text\" \r\n              @change=\"save('user_surname', $event.target.value)\" \r\n            ></ion-input>\r\n          </ion-item> -->\r\n      <ion-item>\r\n        <ion-icon :icon=\"callOutline\" slot=\"start\" />\r\n        <ion-input\r\n          readonly\r\n          v-model=\"fields.user_phone\"\r\n          label=\"Телефон\"\r\n          label-placement=\"stacked\"\r\n        ></ion-input>\r\n        <ion-button\r\n          slot=\"end\"\r\n          v-if=\"\r\n            fields.user_phone &&\r\n            (!fields.user_phone_verified || fields.user_phone_verified === '0')\r\n          \"\r\n          @click=\"phoneVerify\"\r\n          expand=\"block\"\r\n          >Подтвердить</ion-button\r\n        >\r\n        <ion-button\r\n          slot=\"end\"\r\n          v-if=\"\r\n            fields.user_phone &&\r\n            fields.user_phone_verified &&\r\n            fields.user_phone_verified !== '0'\r\n          \"\r\n          expand=\"block\"\r\n          disabled=\"true\"\r\n          >Подтверждено</ion-button\r\n        >\r\n      </ion-item>\r\n\r\n      <ion-item>\r\n        <ion-icon :icon=\"atOutline\" slot=\"start\" />\r\n        <ion-input\r\n          v-model=\"fields.user_email\"\r\n          name=\"user_email\"\r\n          type=\"email\"\r\n          @change=\"save('user_email', $event.target.value)\"\r\n          placeholder=\"Электронная почта\"\r\n          label=\"Электронная почта\"\r\n          label-placement=\"stacked\"\r\n        ></ion-input>\r\n      </ion-item>\r\n      <ion-list-header>\r\n        <ion-label>Аватар</ion-label>\r\n      </ion-list-header>\r\n      <ion-item lines=\"none\">\r\n        <ion-segment\r\n          mode=\"ios\"\r\n          v-model=\"fields.user_avatar_name\"\r\n          @ionChange=\"save('user_avatar_name', $event.target.value)\"\r\n        >\r\n          <ion-segment-button value=\"man\">\r\n            <ion-avatar\r\n              ><img :src=\"$heap.state.hostname + 'img/avatar/man.png'\"\r\n            /></ion-avatar>\r\n          </ion-segment-button>\r\n          <ion-segment-button value=\"woman\">\r\n            <ion-avatar\r\n              ><img :src=\"$heap.state.hostname + 'img/avatar/woman.png'\"\r\n            /></ion-avatar>\r\n          </ion-segment-button>\r\n        </ion-segment>\r\n      </ion-item>\r\n    </ion-list>\r\n    <ion-item-divider>\r\n      <ion-label>Пароль</ion-label>\r\n    </ion-item-divider>\r\n    <ion-row responsive-sm>\r\n      <ion-col>\r\n        <ion-button @click=\"passwordReset()\" expand=\"block\"  color=\"medium\" fill=\"outline\"\r\n          ><ion-icon :icon=\"keyOutline\" slot=\"start\" />Сбросить</ion-button\r\n        >\r\n      </ion-col>\r\n      <ion-col>\r\n        <ion-button @click=\"passwordPromptShow = true\" expand=\"block\"  color=\"medium\" fill=\"outline\">\r\n          <ion-icon :icon=\"keyOutline\" slot=\"start\" />Изменить\r\n        </ion-button>\r\n      </ion-col>\r\n    </ion-row>\r\n\r\n    <ion-item-divider>\r\n      <ion-label>Удаление профиля</ion-label>\r\n    </ion-item-divider>\r\n    <ion-row responsive-sm>\r\n      <ion-col>\r\n        <ion-button\r\n          @click=\"deletePromptShow = true\"\r\n          expand=\"block\"\r\n          fill=\"outline\"\r\n          color=\"danger\"\r\n          >\r\n          <ion-icon :icon=\"trashOutline\" slot=\"start\" />\r\n          Удалить профиль\r\n        </ion-button>\r\n      </ion-col>\r\n      <ion-col> </ion-col>\r\n    </ion-row>\r\n\r\n    <ion-modal\r\n      :isOpen=\"passwordPromptShow\"\r\n      :initial-breakpoint=\"0.8\"\r\n      :breakpoints=\"[0, 0.4, 0.8]\"\r\n    >\r\n      <ion-header>\r\n        <ion-toolbar>\r\n          <ion-title>Новый пароль</ion-title>\r\n          <ion-icon\r\n            :icon=\"closeOutline\"\r\n            @click=\"passwordPromptShow = false\"\r\n            slot=\"end\"\r\n            size=\"large\"\r\n          ></ion-icon>\r\n        </ion-toolbar>\r\n      </ion-header>\r\n      <ion-content class=\"ion-padding\">\r\n        <ion-item>\r\n          <ion-input\r\n            v-model=\"fields.user_pass_current\"\r\n            type=\"password\"\r\n            placeholder=\"нет пароля\"\r\n            label=\"Действующий пароль\"\r\n            label-placement=\"stacked\"\r\n          ></ion-input>\r\n        </ion-item>\r\n        <ion-item>\r\n          <ion-input\r\n            v-model=\"fields.user_pass\"\r\n            type=\"text\"\r\n            placeholder=\"пароль\"\r\n            label=\"Новый пароль\"\r\n            label-placement=\"stacked\"\r\n          ></ion-input>\r\n        </ion-item>\r\n        <ion-item>\r\n          <ion-input\r\n            v-model=\"fields.user_pass_confirm\"\r\n            type=\"text\"\r\n            placeholder=\"пароль (повтор)\"\r\n            label=\"Новый пароль (повтор)\"\r\n            label-placement=\"stacked\"\r\n          ></ion-input>\r\n        </ion-item>\r\n        <ion-button @click=\"passwordSave()\" expand=\"block\">Изменить</ion-button>\r\n      </ion-content>\r\n    </ion-modal>\r\n\r\n    <ion-modal\r\n      :isOpen=\"deletePromptShow\"\r\n      :initial-breakpoint=\"0.8\"\r\n      :breakpoints=\"[0, 0.4, 0.8]\"\r\n    >\r\n      <ion-header>\r\n        <ion-toolbar color=\"danger\">\r\n          <ion-title>Удаление учетной записи</ion-title>\r\n          <ion-icon\r\n            :icon=\"closeOutline\"\r\n            @click=\"deletePromptShow = false\"\r\n            slot=\"end\"\r\n            size=\"large\"\r\n          ></ion-icon>\r\n        </ion-toolbar>\r\n      </ion-header>\r\n      <ion-content class=\"ion-padding\">\r\n        <ion-item lines=\"none\" style=\"margin-bottom: 15px\">\r\n          <div>\r\n            <p>Ваши персональные данные будут безвозвратно удалены.</p>\r\n            <p>\r\n              Повторная регистрация по этому номеру телефона будет невозможна!\r\n            </p>\r\n          </div>\r\n        </ion-item>\r\n        <!-- <ion-item>\r\n          <ion-input v-model=\"fields.user_pass_current\" type=\"password\" placeholder=\"пароль\" label=\"Действующий пароль\" label-placement=\"stacked\"></ion-input>\r\n        </ion-item> -->\r\n        <ion-button @click=\"deleteAccount()\" expand=\"block\" color=\"danger\"\r\n          >Удалить аккаунт</ion-button\r\n        >\r\n        <ion-button\r\n          @click=\"deletePromptShow = false\"\r\n          expand=\"block\"\r\n          color=\"light\"\r\n          >Закрыть</ion-button\r\n        >\r\n      </ion-content>\r\n    </ion-modal>\r\n  </base-layout>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  IonList,\r\n  IonItem,\r\n  IonLabel,\r\n  IonInput,\r\n  IonCol,\r\n  IonRow,\r\n  IonItemDivider,\r\n  IonButton,\r\n  IonModal,\r\n  IonHeader,\r\n  IonTitle,\r\n  IonContent,\r\n  IonIcon,\r\n  IonToolbar,\r\n  IonSegment,\r\n  IonSegmentButton,\r\n  IonAvatar,\r\n  IonListHeader,\r\n} from \"@ionic/vue\";\r\nimport {\r\n  closeOutline,\r\n  keyOutline,\r\n  trashOutline,\r\n  callOutline,\r\n  personOutline,\r\n  atOutline,\r\n  giftOutline,\r\n} from \"ionicons/icons\";\r\nimport jQuery from \"jquery\";\r\nimport User from \"@/scripts/User\";\r\n\r\nexport default {\r\n  components: {\r\n    IonList,\r\n    IonItem,\r\n    IonLabel,\r\n    IonInput,\r\n    IonCol,\r\n    IonRow,\r\n    IonItemDivider,\r\n    IonButton,\r\n    IonModal,\r\n    IonHeader,\r\n    IonTitle,\r\n    IonContent,\r\n    IonIcon,\r\n    IonToolbar,\r\n    IonSegment,\r\n    IonSegmentButton,\r\n    IonAvatar,\r\n    IonListHeader,\r\n  },\r\n  setup() {\r\n    return {\r\n      closeOutline,\r\n      keyOutline,\r\n      trashOutline,\r\n      callOutline,\r\n      personOutline,\r\n      atOutline,\r\n      giftOutline,\r\n    };\r\n  },\r\n  data() {\r\n    return {\r\n      config: {\r\n        phoneMask: \"+0(000)-000-00-00\",\r\n      },\r\n      fields: this.$heap.state.user,\r\n      passwordPromptShow: false,\r\n      deletePromptShow: false,\r\n      birthday_is_set: 0,\r\n    };\r\n  },\r\n  computed: {\r\n    isPhoneValid() {\r\n      return this.fields.user_phone.replace(/\\D/g, \"\").length == 11;\r\n    },\r\n  },\r\n  methods: {\r\n    async save(field_name, field_value) {\r\n      if (field_name == \"user_phone\") {\r\n        if (!this.isPhoneValid) {\r\n          return false;\r\n        }\r\n        field_value = field_value.replace(/\\D/g, \"\");\r\n      }\r\n      var requestData = {};\r\n      requestData.user_id = this.$heap.state.user.user_id;\r\n      requestData[field_name] = field_value;\r\n      await this.itemUpdate(requestData);\r\n      this.fields[field_name] = field_value;\r\n    },\r\n    async itemUpdate(requestData) {\r\n      try {\r\n        const resp = await jQuery.post(\r\n          `${this.$heap.state.hostname}User/itemUpdate`,\r\n          JSON.stringify(requestData)\r\n        );\r\n        if (resp == \"ok\") {\r\n          this.$flash(\"Сохранено\");\r\n          return true;\r\n        }\r\n      } catch (err) {\r\n        let exception_code = \"unknown\";\r\n        try {\r\n          const invalid_field = Object.keys(\r\n            JSON.parse(err.responseJSON.messages.error)\r\n          )[0];\r\n          const invalid_reason = Object.values(\r\n            JSON.parse(err.responseJSON.messages.error)\r\n          )[0];\r\n          exception_code = invalid_field + \"_\" + invalid_reason;\r\n        } catch {\r\n          /** */\r\n        }\r\n        switch (exception_code) {\r\n          case \"user_phone_notunique\":\r\n            this.$flash(\"Пользователь с таким телефоном уже зарегистрирован\");\r\n            break;\r\n          case \"user_phone_required\":\r\n          case \"user_phone_invalid\":\r\n          case \"user_phone_short\":\r\n            this.$flash(\"Проверьте номер телефона\");\r\n            break;\r\n          case \"user_name_required\":\r\n          case \"user_name_short\":\r\n            this.$flash(\"Проверьте ваш псевдоним\");\r\n            break;\r\n          case \"user_email_invalid\":\r\n            this.$flash(\"Проверьте ваш е-маил\");\r\n            break;\r\n          case \"user_email_notunique\":\r\n            this.$flash(\"Такой е-маил уже используется\");\r\n            break;\r\n          case \"user_pass_short\":\r\n            this.$flash(\"Пароль слишком короткий\");\r\n            break;\r\n          case \"user_pass_wrong\":\r\n            this.$flash(\"Действующий пароль не верный\");\r\n            break;\r\n          case \"user_pass_notmatches\":\r\n            this.$flash(\"Пароль не совпадает с подтверждением\");\r\n            break;\r\n        }\r\n        return false;\r\n      }\r\n      User.get();\r\n    },\r\n    phoneVerify() {\r\n      const user_phone = this.fields.user_phone.replace(/\\D/g, \"\");\r\n      try {\r\n        jQuery.post(`${this.$heap.state.hostname}User/phoneVerificationSend`, {\r\n          user_phone,\r\n        });\r\n        this.$go({ name: \"UserVerifyPhone\", params: { phone: user_phone } });\r\n      } catch {\r\n        /** */\r\n      }\r\n    },\r\n    async passwordSave() {\r\n      if (this.fields.user_pass != this.fields.user_pass_confirm) {\r\n        this.$flash(\"Пароль и подтверждение не совпадают\");\r\n        return;\r\n      }\r\n      if (!this.fields.user_pass) {\r\n        this.$flash(\"Пароль не заполнен\");\r\n        return;\r\n      }\r\n      const requestData = {\r\n        user_id: this.$heap.state.user.user_id,\r\n        user_pass: this.fields.user_pass,\r\n        user_pass_current: this.fields.user_pass_current,\r\n      };\r\n      const updated = await this.itemUpdate(requestData);\r\n      if (updated) {\r\n        this.passwordPromptShow = false;\r\n        this.$flash(\"Пароль изменен\");\r\n      }\r\n    },\r\n    async passwordReset() {\r\n      if (!confirm(\"Выслать новый пароль на телефон и электронную почту?\")) {\r\n        return;\r\n      }\r\n      const request = {\r\n        user_phone: this.fields.user_phone,\r\n        user_email: this.fields.user_email,\r\n        user_name: this.fields.user_name,\r\n      };\r\n      try {\r\n        await jQuery.post(\r\n          `${this.$heap.state.hostname}User/passwordReset`,\r\n          request\r\n        );\r\n        this.$alert(\"Вам был выслан новый пароль\", \"Пароль сброшен\");\r\n      } catch {\r\n        /** */\r\n      }\r\n    },\r\n    async deleteAccount() {\r\n      try {\r\n        // if(!this.fields.user_pass_current){\r\n        //   this.$flash(\"Действующий пароль обязателен\")\r\n        //   return\r\n        // }\r\n        const requestData = {\r\n          user_id: this.$heap.state.user.user_id,\r\n          //user_pass:this.fields.user_pass_current,\r\n        };\r\n        await jQuery.post(\r\n          `${this.$heap.state.hostname}User/itemDelete`,\r\n          requestData\r\n        );\r\n        this.deletePromptShow = false;\r\n        await User.signOut();\r\n        await this.$go(\"/user\");\r\n      } catch {\r\n        this.$flash(\"Не удалось удалить аккаунт. Проверьте пароль\");\r\n      }\r\n    },\r\n    isPhoneValidate(ev) {\r\n      this.fields.user_phone = ev.target.value;\r\n      this.fields.user_phone = this.fields.user_phone.replace(/\\D/g, \"\");\r\n      if (this.fields.user_phone.length > 11) {\r\n        this.fields.user_phone = this.fields.user_phone.substring(0, 11);\r\n      }\r\n      let result = \"\";\r\n      let numberIndex = 0;\r\n      for (let index in this.config.phoneMask) {\r\n        if (!this.fields.user_phone[numberIndex]) {\r\n          break;\r\n        }\r\n        let character = this.config.phoneMask[index];\r\n        if (character == \"0\") {\r\n          result += this.fields.user_phone[numberIndex];\r\n          numberIndex++;\r\n        } else {\r\n          result += character;\r\n        }\r\n      }\r\n      this.fields.user_phone = result;\r\n      return this.fields.user_phone;\r\n    },\r\n  },\r\n  created() {\r\n    this.$topic.on(\"userGet\", (user) => {\r\n      this.fields = user;\r\n      if (this.fields[\"user_birthday\"]) {\r\n        this.fields[\"user_birthday\"] =\r\n          this.fields[\"user_birthday\"].split(\" \")[0];\r\n      }\r\n      this.birthday_is_set = !!user.user_birthday;\r\n    });\r\n  },\r\n};\r\n</script>","import { render } from \"./UserEdit.vue?vue&type=template&id=6cc822ae\"\nimport script from \"./UserEdit.vue?vue&type=script&lang=js\"\nexport * from \"./UserEdit.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createBlock","_component_base_layout","_createVNode","_component_ion_list","_component_ion_item","_component_ion_icon","icon","$setup","personOutline","slot","_component_ion_input","$data","fields","user_name","$event","name","type","onChange","_cache","$options","save","target","value","placeholder","label","required","giftOutline","user_birthday","readonly","birthday_is_set","callOutline","user_phone","user_phone_verified","_component_ion_button","onClick","phoneVerify","expand","disabled","atOutline","user_email","_component_ion_list_header","_component_ion_label","lines","_component_ion_segment","mode","user_avatar_name","onIonChange","_component_ion_segment_button","_component_ion_avatar","_createElementVNode","src","_ctx","$heap","state","hostname","_component_ion_item_divider","_component_ion_row","_component_ion_col","passwordReset","color","fill","keyOutline","passwordPromptShow","deletePromptShow","trashOutline","_component_ion_modal","isOpen","breakpoints","_component_ion_header","_component_ion_toolbar","_component_ion_title","closeOutline","size","_component_ion_content","class","user_pass_current","user_pass","user_pass_confirm","passwordSave","style","deleteAccount","components","IonList","IonItem","IonLabel","IonInput","IonCol","IonRow","IonItemDivider","IonButton","IonModal","IonHeader","IonTitle","IonContent","IonIcon","IonToolbar","IonSegment","IonSegmentButton","IonAvatar","IonListHeader","setup","data","config","phoneMask","this","user","computed","isPhoneValid","replace","length","methods","field_name","field_value","requestData","user_id","itemUpdate","resp","jQuery","JSON","stringify","$flash","err","exception_code","invalid_field","Object","keys","parse","responseJSON","messages","error","invalid_reason","values","User","get","$go","params","phone","updated","confirm","request","$alert","signOut","isPhoneValidate","ev","substring","result","numberIndex","index","character","created","$topic","on","split","__exports__","render"],"sourceRoot":""}