{"version":3,"file":"js/6288.7e4c9d4f.js","mappings":"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","sources":["webpack://tezkel/./src/views/PostEdit.vue","webpack://tezkel/./src/views/PostEdit.vue?22f0"],"sourcesContent":["<style scoped>\r\n  .pdisabled{\r\n    background-color: var(--ion-color-light-shade);\r\n  }\r\n  .pdeleted{\r\n    background-color: var(--ion-color-danger-tint);\r\n  }\r\n  .phidden{\r\n    background-color: var(--ion-color-warning-shade);\r\n  }\r\n  .pactive{\r\n    background-color: var(--ion-color-success-shade);\r\n  }\r\n</style>\r\n\r\n<template>\r\n  <base-layout :page-title=\"postItem?.post_title??'Пост'\">\r\n  <div v-if=\"postItem\">\r\n    <ion-card>\r\n      <ion-card-content :class=\"messageClass\">\r\n        <ion-text color=\"dark\">{{message}}</ion-text>\r\n      </ion-card-content>\r\n    </ion-card>\r\n    <ion-list>\r\n      <ion-item>\r\n        <ion-icon :src=\"checkmark\" color=\"primary\" slot=\"start\"/>\r\n        <ion-toggle v-model=\"is_published\" @ionChange=\"itemPublish($event.target.checked?1:0)\">Опубликован</ion-toggle>\r\n      </ion-item>\r\n      <ion-item>\r\n        <ion-icon :src=\"trashOutline\" color=\"primary\" slot=\"start\"/>\r\n        <ion-toggle v-model=\"is_deleted\" color=\"danger\" @ionChange=\"itemDelete($event.target.checked?1:0)\">Удален</ion-toggle>\r\n      </ion-item>\r\n      <ion-item>\r\n        <ion-icon :src=\"ribbonOutline\" color=\"primary\" slot=\"start\"/>\r\n        <ion-toggle v-model=\"is_promoted\" @ionChange=\"save('is_promoted',is_promoted)\">Приоритет</ion-toggle>\r\n      </ion-item>\r\n      <ion-item>\r\n        <ion-icon :src=\"ribbonOutline\" color=\"primary\" slot=\"start\"/>\r\n        <ion-toggle v-model=\"is_disabled\" @ionChange=\"itemDisable($event.target.checked?1:0)\">На модерации</ion-toggle>\r\n      </ion-item>\r\n    </ion-list>\r\n\r\n    <form @change=\"saveForm\">\r\n      <ion-item-divider>\r\n        <ion-label>Тип поста</ion-label>\r\n      </ion-item-divider>\r\n      <ion-list>\r\n        <ion-radio-group v-model=\"postItem.post_type\" @ionChange=\"saveForm\" name=\"post_type\">\r\n          <ion-item v-for=\"type in postTypes\" :key=\"type.post_type\" @click=\"itemImageParamsSet()\">\r\n            {{type.post_type_name}}\r\n            <ion-radio color=\"primary\" slot=\"end\" :value=\"type.post_type\" :disabled=\"!!postItem.post_type\"></ion-radio>\r\n          </ion-item>\r\n        </ion-radio-group>\r\n      </ion-list>\r\n      <ion-list v-if=\"imageParams\">\r\n        <ion-item-divider>\r\n          <ion-label>Изображения</ion-label>\r\n        </ion-item-divider>\r\n        <image-tile-comp :images=\"postItem.images\" :image_holder_id=\"postItem.post_id\" :params=\"imageParams\" title=\"Фото поста\" controller=\"Post\" ref=\"postImgs\"></image-tile-comp>\r\n        <ion-button @click=\"$refs.postImgs.take_photo()\" color=\"light\" expand=\"block\">\r\n          <ion-icon :src=\"cameraOutline\" slot=\"start\"/> Добавить фото в пост\r\n        </ion-button>\r\n      </ion-list>\r\n      <ion-list v-if=\"imageParams\">\r\n          <ion-item-divider>\r\n            <ion-label>Автор</ion-label>\r\n          </ion-item-divider>\r\n          <ion-item v-if=\"pickedStore\" button>\r\n              <ion-icon @click=\"storePick()\" slot=\"start\" :src=\"storefrontOutline\"/>\r\n              <ion-label @click=\"storePick()\">{{pickedStore.store_name}}</ion-label>\r\n              <ion-icon slot=\"end\" :src=\"trashOutline\" @click=\"storeReset()\"/>\r\n          </ion-item>\r\n          <ion-item v-else button @click=\"storePick()\">\r\n              <ion-icon slot=\"start\" :src=\"addOutline\"/>\r\n              <ion-label>Добавить автора</ion-label>\r\n          </ion-item>\r\n      </ion-list>\r\n      <ion-list v-if=\"imageParams\" lines=\"full\">\r\n        <ion-item-group>\r\n          <ion-item-divider>\r\n            <ion-label>Основные настройки</ion-label>\r\n          </ion-item-divider>\r\n          <ion-item>\r\n            <ion-input v-model=\"postItem.post_title\" label=\"Заголовок*\" labelPlacement=\"stacked\" name=\"post_title\" placeholder=\"заголовок\" clearInput=\"true\"/>\r\n          </ion-item>\r\n          <ion-item>\r\n            <ion-textarea v-model=\"postItem.post_content\" label=\"Содержание*\" labelPlacement=\"stacked\" name=\"post_content\" rows=\"6\" placeholder=\"текст\"></ion-textarea>\r\n          </ion-item>\r\n          <ion-item>\r\n            <ion-input v-model=\"postItem.post_route\" label=\"Ссылка*\" labelPlacement=\"stacked\" name=\"post_route\" placeholder=\"ссылка\" clearInput=\"true\"/>\r\n          </ion-item>\r\n        </ion-item-group>\r\n      </ion-list>\r\n\r\n      <ion-list v-if=\"imageParams\" lines=\"full\">\r\n        <ion-item-group>\r\n          <ion-item-divider>\r\n            <ion-label>Время действия</ion-label>\r\n          </ion-item-divider>\r\n        </ion-item-group>\r\n        <ion-item>\r\n          <ion-input type=\"date\" v-model=\"postItem.started_at\" label=\"Начало показа\" labelPlacement=\"stacked\" name=\"started_at\"/>\r\n        </ion-item>\r\n        <ion-item>\r\n          <ion-input type=\"date\" v-model=\"postItem.finished_at\" label=\"Конец показа\" labelPlacement=\"stacked\" name=\"finished_at\"/>\r\n        </ion-item>\r\n      </ion-list>\r\n\r\n    </form>\r\n\r\n\r\n\r\n    <ion-list v-if=\"postItem && postItem.updated_user\">\r\n      <ion-item-divider>\r\n          <ion-label></ion-label>\r\n      </ion-item-divider>\r\n      <ion-item lines=\"none\">\r\n        Изменен {{postItem.updated_at}}\r\n        <a slot=\"end\" :href=\"`tel:+${postItem.updated_user.user_phone}`\">{{postItem.updated_user.user_name}}</a>\r\n      </ion-item>\r\n    </ion-list>\r\n\r\n\r\n\r\n  </div>\r\n  <div v-else>\r\n    loading\r\n  </div>\r\n  </base-layout>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  IonInput,\r\n  IonTextarea,\r\n  IonCard,\r\n  IonCardContent,\r\n  IonToggle,\r\n  IonIcon,\r\n  IonItem,\r\n  IonList,\r\n  IonLabel,\r\n  IonItemDivider,\r\n  IonItemGroup,\r\n  IonButton,\r\n  IonText,\r\n  IonRadio,\r\n  IonRadioGroup,\r\n  modalController,\r\n  }                   from '@ionic/vue'\r\nimport {\r\n  cameraOutline,\r\n  trashOutline,\r\n  banOutline,\r\n  personOutline,\r\n  addOutline,\r\n  calculatorOutline,\r\n  compassOutline,\r\n  chevronBack,\r\n  layersOutline,\r\n  ribbonOutline,\r\n  eyeOffOutline,\r\n  storefrontOutline,\r\n  checkmark,\r\n}                     from 'ionicons/icons'\r\nimport imageTileComp  from '@/components/ImageTileComp.vue'\r\nimport jQuery         from \"jquery\";\r\n\r\nimport ItemPicker             from '@/components/ItemPicker.vue'\r\n\r\nexport default  {\r\n  components: { \r\n    IonInput,\r\n    IonTextarea,\r\n    IonCard,\r\n    IonCardContent,\r\n    IonToggle,\r\n    IonIcon,\r\n    IonItem,\r\n    IonList,\r\n    IonLabel,\r\n    IonItemDivider,\r\n    IonItemGroup,\r\n    IonButton,\r\n    IonText,\r\n    imageTileComp,\r\n    IonRadio,\r\n    IonRadioGroup,\r\n    },\r\n  setup(){\r\n    return {\r\n      cameraOutline,\r\n      trashOutline,\r\n      banOutline,\r\n      personOutline,\r\n      addOutline,\r\n      calculatorOutline,\r\n      compassOutline,\r\n      chevronBack,\r\n      layersOutline,\r\n      ribbonOutline,\r\n      eyeOffOutline,\r\n      storefrontOutline,\r\n    }\r\n  },\r\n  data(){\r\n    return {\r\n      postId: this.$route.params.id,\r\n      postItem: null,\r\n      imageParams:null,\r\n      pickedStore:null,\r\n      postTypes:[\r\n        {\r\n          post_type:'slide',\r\n          post_type_name:'Слайд 1920x700',\r\n          image_height:700,\r\n          image_width:1920,\r\n        },\r\n        {\r\n          post_type:'story',\r\n          post_type_name:'История 1500x3200',\r\n          image_height:3200,\r\n          image_width:1500,\r\n        },\r\n      ],\r\n      is_deleted:0,\r\n      is_disabled:0,\r\n      is_promoted:0,\r\n    }\r\n  },\r\n  computed: {\r\n    messageCardSeverity(){\r\n      if(this.postItem?.validity<50){\r\n        return 'danger';\r\n      }\r\n      if(this.postItem?.validity<this.validity_min){\r\n        return 'warning';\r\n      }\r\n      return 'primary';\r\n    },\r\n    message(){\r\n      if( !this.postItem ){\r\n        return ''\r\n      }\r\n      if(this.postItem.deleted_at){\r\n        return \"Пост не активен и будет удален. Вы еще можете отменить удаление\"\r\n      }\r\n      if(this.postItem.is_disabled==1){\r\n        return \"Пост не активен и находится на рассмотрении у администратора\"\r\n      }\r\n      if(this.postItem.is_hidden==1){\r\n        return \"Пост скрыт со стены.\"\r\n      }\r\n      return \"Пост активен\"\r\n    },\r\n    messageClass(){\r\n      if( !this.postItem ){\r\n        return ''\r\n      }\r\n      if(this.postItem?.deleted_at){\r\n        return \"pdeleted\";\r\n      }\r\n      if(this.postItem?.is_disabled==1){\r\n        return \"pdisabled\";\r\n      }\r\n      return 'pactive';\r\n    }\r\n  },\r\n  created(){\r\n    this.itemGet()\r\n  },\r\n  methods:{\r\n    async itemGet(){\r\n      try{\r\n        if( this.postId==0 ){\r\n          await this.itemCreate()\r\n          return\r\n        }\r\n        let postItem=await jQuery.post(`${this.$heap.state.hostname}Post/itemGet`, { post_id: this.postId })\r\n        this.postItem=this.itemPrepare(postItem)\r\n        this.itemParseFlags()\r\n        this.itemImageParamsSet()\r\n        if(postItem.post_holder=='store'){\r\n          this.pickedStore=postItem.holder;\r\n        } else {\r\n          this.pickedStore=null;\r\n        }\r\n      }catch(err){\r\n        //console.log(err);\r\n      }\r\n    },\r\n    itemImageParamsSet(){\r\n      this.imageParams={post_type:this.postType}\r\n        // if(this.postItem.post_type){\r\n        //   for(let type of this.postTypes){\r\n        //     if(type.post_type==this.postItem.post_type){\r\n        //       this.imageParams={image_width:type.image_width,image_height:type.image_height}\r\n        //     }\r\n        //   }\r\n        // }\r\n    },\r\n    itemPrepare(postItem){\r\n      if(postItem.started_at){\r\n        postItem.started_at=postItem.started_at.split(' ')[0]\r\n      }\r\n      if(postItem.finished_at){\r\n        postItem.finished_at=postItem.finished_at.split(' ')[0]\r\n      }\r\n      return postItem\r\n    },\r\n    itemParseFlags(){\r\n      this.is_deleted   = this.postItem.deleted_at==null?0:1\r\n      this.is_disabled  = this.postItem.is_disabled==0?0:1\r\n      this.is_promoted  = this.postItem.is_promoted==0?0:1\r\n    },\r\n    async itemCreate(){\r\n      const draft={\r\n        post_title:''\r\n      }\r\n      try{\r\n        const post_id=await jQuery.post(`${this.$heap.state.hostname}Post/itemCreate`, draft)\r\n        if( post_id ){\r\n          this.$router.replace(`/wall/post-edit-${post_id}`)\r\n        }\r\n      } catch{/** */}\r\n    },\r\n    async itemDelete( is_deleted ){\r\n      const remoteFunction=is_deleted?'itemDelete':'itemUnDelete'\r\n      try{\r\n        await jQuery.post( `${this.$heap.state.hostname}Post/${remoteFunction}`, { post_id: this.postId })\r\n        this.postItem.deleted_at=is_deleted?1:null;\r\n      }catch{\r\n        this.itemGet()\r\n      }\r\n    },\r\n    async itemDisable( is_disabled ){\r\n      if(this.postItem.is_disabled==is_disabled){\r\n        return\r\n      }\r\n      try{\r\n        await jQuery.post( `${this.$heap.state.hostname}Post/itemDisable`, { post_id: this.postId, is_disabled })\r\n        this.postItem.is_disabled=is_disabled;\r\n      }catch{\r\n        this.$flash(\"Изменение не сохранено\")\r\n        this.itemGet()\r\n      }\r\n    },\r\n    async itemUpdate(request){\r\n      try{\r\n        await jQuery.post( `${this.$heap.state.hostname}Post/itemUpdate`, JSON.stringify(request))\r\n        this.$flash(\"💾 сохранено\")\r\n        return true\r\n      } catch(err){\r\n        const validationErrors=err.responseJSON.messages.error\r\n        if(validationErrors?.includes('post_content')){\r\n          this.$flash(\"Описание слишком короткое\")\r\n        } else\r\n        if(validationErrors?.includes('post_title')){\r\n          this.$flash(\"Заголовок слишком короткий\")\r\n        } else \r\n        this.$flash(\"Изменение не сохранено\")\r\n        this.itemGet()\r\n        return false\r\n      }\r\n    },\r\n\r\n    saveForm(ev){\r\n      const field_name=ev.target.name;\r\n      const field_value=this.postItem[field_name]=ev.target.value\r\n      this.save(field_name,field_value)\r\n    },\r\n    async save(field_name, field_value) {\r\n      if( !this.postItem.post_id ){//product not loaded yet\r\n        return\r\n      }\r\n      let request = {\r\n        post_id:this.postItem.post_id,\r\n        [field_name]:field_value\r\n      }\r\n      if( this.itemUpdate(request) ){\r\n        this.postItem[field_name] = field_value;\r\n        this.itemParseFlags()\r\n      }\r\n    },\r\n    async storePick(){\r\n        const modal = await modalController.create({\r\n            component: ItemPicker,\r\n            componentProps:{itemType:'store'},\r\n            initialBreakpoint: 0.75,\r\n            breakpoints: [0.75, 1],\r\n            canDissmiss:true,\r\n        });\r\n        modal.present()\r\n        this.$topic.on('dismissModal',()=>{\r\n            modal.dismiss()\r\n        });\r\n        const item=await modal.onDidDismiss();\r\n        if(!item.data){\r\n            return\r\n        }\r\n        const request={\r\n          post_id:this.postItem.post_id,\r\n          post_holder:'store',\r\n          post_holder_id:item.data.store_id\r\n        }\r\n        await this.itemUpdate(request)\r\n        await this.itemGet()\r\n    },\r\n    async storeReset(){\r\n        const request={\r\n          post_id:this.postItem.post_id,\r\n          post_holder:'',\r\n          post_holder_id:0\r\n        }\r\n        await this.itemUpdate(request)\r\n        await this.itemGet()\r\n    },\r\n    \r\n  },\r\n}\r\n</script>","import { render } from \"./PostEdit.vue?vue&type=template&id=7004cdb5&scoped=true\"\nimport script from \"./PostEdit.vue?vue&type=script&lang=js\"\nexport * from \"./PostEdit.vue?vue&type=script&lang=js\"\n\nimport \"./PostEdit.vue?vue&type=style&index=0&id=7004cdb5&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7004cdb5\"]])\n\nexport default __exports__"],"names":["_createBlock","_component_base_layout","_$data$postItem","$data","postItem","post_title","_createElementBlock","_hoisted_1","_createVNode","_component_ion_card","_component_ion_card_content","class","_normalizeClass","$options","messageClass","_component_ion_text","color","message","_component_ion_list","_component_ion_item","_component_ion_icon","src","_ctx","checkmark","slot","_component_ion_toggle","is_published","$event","onIonChange","_cache","itemPublish","target","checked","$setup","trashOutline","is_deleted","itemDelete","ribbonOutline","is_promoted","save","is_disabled","itemDisable","_createElementVNode","onChange","args","saveForm","_component_ion_item_divider","_component_ion_label","_component_ion_radio_group","post_type","name","_Fragment","_renderList","postTypes","type","key","onClick","itemImageParamsSet","post_type_name","_component_ion_radio","value","disabled","imageParams","_component_image_tile_comp","images","image_holder_id","post_id","params","title","controller","ref","_component_ion_button","$refs","postImgs","take_photo","expand","cameraOutline","pickedStore","button","storePick","storefrontOutline","store_name","storeReset","addOutline","lines","_component_ion_item_group","_component_ion_input","label","labelPlacement","placeholder","clearInput","_component_ion_textarea","post_content","rows","post_route","started_at","finished_at","updated_user","_toDisplayString","updated_at","href","user_phone","user_name","_hoisted_2","_hoisted_3","components","IonInput","IonTextarea","IonCard","IonCardContent","IonToggle","IonIcon","IonItem","IonList","IonLabel","IonItemDivider","IonItemGroup","IonButton","IonText","imageTileComp","IonRadio","IonRadioGroup","setup","banOutline","personOutline","calculatorOutline","compassOutline","chevronBack","layersOutline","eyeOffOutline","data","postId","this","$route","id","image_height","image_width","computed","messageCardSeverity","_this$postItem","_this$postItem2","validity","validity_min","deleted_at","is_hidden","_this$postItem3","_this$postItem4","created","itemGet","methods","itemCreate","jQuery","$heap","state","hostname","itemPrepare","itemParseFlags","post_holder","holder","err","postType","split","draft","$router","replace","remoteFunction","$flash","itemUpdate","request","JSON","stringify","validationErrors","responseJSON","messages","error","includes","ev","field_name","field_value","modal","modalController","create","component","ItemPicker","componentProps","itemType","initialBreakpoint","breakpoints","canDissmiss","present","$topic","on","dismiss","item","onDidDismiss","post_holder_id","store_id","__exports__","render"],"sourceRoot":""}