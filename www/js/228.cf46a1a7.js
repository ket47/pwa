"use strict";(self["webpackChunktezkel_delivery"]=self["webpackChunktezkel_delivery"]||[]).push([[228],{6228:function(e,s,t){t.r(s),t.d(s,{default:function(){return l}});var n=t(6252);const i=(0,n.Uk)(" mesajlar ");function a(e,s,t,a,o,r){const u=(0,n.up)("base-layout");return(0,n.wg)(),(0,n.j4)(u,{pageTitle:"Сообщения"},{default:(0,n.w5)((()=>[i,(0,n._)("button",{onClick:s[0]||(s[0]=e=>r.subscribe())},"SUBSCRIBE")])),_:1})}var o=t(9755),r=t.n(o),u={data(){return{messaging:{}}},methods:{async saveNotificationToken(e){if(!(this.$heap.state.user.user_id>0))return this.$flash("Необходимо авторизироваться"),void this.$router.push("sign-in");try{const s={type:"webpush",registration_id:e,user_agent:navigator.userAgent},t=await r().post(`${this.$heap.state.hostname}MessageSub/itemCreate`,s);console.log("saveNotificationToken",t)}catch(s){console.log(s)}},async subscribe(){this.$OneSignal.setExternalUserId(this.$heap.state.user.user_id),this.$OneSignal.showNativePrompt()},async setupPush(){this.$OneSignal.on("subscriptionChange",(function(e){console.log("The user's subscription state is now:",e)}))}},mounted(){this.setupPush()}},c=t(3744);const h=(0,c.Z)(u,[["render",a]]);var l=h}}]);
//# sourceMappingURL=228.cf46a1a7.js.map