"use strict";(self["webpackChunktezkel"]=self["webpackChunktezkel"]||[]).push([[7443],{2927:function(e,t,r){r.d(t,{Z:function(){return g}});var o=r(6252),n=r(3577),i=function(e){return(0,o.dD)("data-v-0e00b8d4"),e=e(),(0,o.Cn)(),e},u={class:"slide-title"},s=i((function(){return(0,o._)("div",{id:"hcat_widget_grid"},null,-1)}));function l(e,t,r,i,l,a){var d=(0,o.up)("ion-img"),c=(0,o.up)("ion-thumbnail"),p=(0,o.up)("swiper-slide"),m=(0,o.up)("swiper");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(m,{id:"hcat_widget_grid","slides-per-view":4.5,"space-between":10},{default:(0,o.w5)((function(){return[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.groupList,(function(t){return(0,o.wg)(),(0,o.j4)(p,{key:t.group_id,onClick:function(){return e.onClick(t.group_id)}},{default:(0,o.w5)((function(){return[(0,o.Wm)(c,{style:{width:"70px",height:"70px"}},{default:(0,o.w5)((function(){return[t.image_hash?((0,o.wg)(),(0,o.j4)(d,{key:0,style:{"border-radius":"10px",border:"1px solid #ddd"},src:`${e.$heap.state.hostname}image/get.php/${t.image_hash}.150.150.webp`},null,8,["src"])):(0,o.kq)("",!0)]})),_:2},1024),(0,o._)("div",u,(0,n.zw)(t.group_name),1)]})),_:2},1032,["onClick"])})),128))]})),_:1},8,["slides-per-view"]),s],64)}var a=r(8292),d=r(3181),c=(0,o.aZ)({components:{IonImg:a.Xz,IonThumbnail:a.Bs,Swiper:d.t,SwiperSlide:d.o},props:["groupList","onClick"]}),p=r(3744);const m=(0,p.Z)(c,[["render",l],["__scopeId","data-v-0e00b8d4"]]);var g=m},4966:function(e,t,r){r.d(t,{Z:function(){return _}});var o=r(6252),n=r(3577),i={key:0,style:{position:"relative"}},u=["src"],s=["src"];function l(e,t,r,l,a,d){var c=(0,o.up)("ion-icon"),p=(0,o.up)("ion-fab-button"),m=(0,o.up)("ion-fab"),g=(0,o.up)("swiper-slide"),f=(0,o.up)("swiper");return a.expanded?((0,o.wg)(),(0,o.iD)("div",i,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.imageList,(function(t){return(0,o.wg)(),(0,o.iD)("div",{key:t.image_hash,style:{border:"2px solid var(--ion-color-primary)"}},[(0,o._)("img",{src:`${e.$heap.state.hostname}image/get.php/${t.image_hash}.1000.1000.webp`},null,8,u)])})),128)),(0,o.Wm)(m,{horizontal:"end",vertical:"top",slot:"fixed"},{default:(0,o.w5)((function(){return[(0,o.Wm)(p,{color:"light"},{default:(0,o.w5)((function(){return[(0,o.Wm)(c,{src:l.contract,size:"large",onClick:t[0]||(t[0]=function(e){return d.minimize()})},null,8,["src"])]})),_:1})]})),_:1})])):((0,o.wg)(),(0,o.j4)(f,{key:1,modules:l.modules,autoplay:{delay:3e3,disableOnInteraction:!1},loop:!0,effect:"fade",style:(0,n.j5)(`height: ${r.imgHeight||"100%"};`)},{default:(0,o.w5)((function(){return[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.imageList,(function(t){return(0,o.wg)(),(0,o.j4)(g,{key:t.image_hash},{default:(0,o.w5)((function(){return[(0,o._)("div",{class:(0,n.C_)(`${r.mode?r.mode:""} cropper`),style:(0,n.j5)(`height: ${r.imgHeight+"px"||0};`)},[(0,o._)("img",{style:(0,n.j5)(`min-height: ${r.imgHeight+"px;"||0}`),src:`${e.$heap.state.hostname}image/get.php/${t.image_hash}.${4*r.imgHeight||1200}.${4*r.imgHeight||1200}.webp`},null,12,s)],6)]})),_:2},1024)})),128))]})),_:1},8,["modules","style"]))}var a=r(8903),d=r(8292),c=r(702),p=r(3181),m={components:{Swiper:p.t,SwiperSlide:p.o,IonFab:d.IJ,IonFabButton:d.W4,IonIcon:d.gu},props:["imageList","imgHeight","mode"],setup(){return{modules:[c.pt,c.xW],expand:a.jnR,contract:a.LJB}},data(){return{expanded:!1,vh:0,vw:0}},methods:{maximize(){this.expanded=!0,this.vh=document.getElementsByTagName("ion-content")[0].clientHeight,this.vw=document.getElementsByTagName("ion-content")[0].clientWidth},minimize(){this.expanded=!1,this.vh=document.getElementsByTagName("ion-content")[0].clientHeight,this.vw=document.getElementsByTagName("ion-content")[0].clientWidth}}},g=r(3744);const f=(0,g.Z)(m,[["render",l],["__scopeId","data-v-57ad0950"]]);var _=f},1185:function(e,t,r){r.r(t),r.d(t,{default:function(){return J}});var o=r(6252),n=r(3577),i=function(e){return(0,o.dD)("data-v-066444de"),e=e(),(0,o.Cn)(),e},u={class:"store-info-container"},s={key:0,slot:"start",class:"avatar-container"},l={class:"avatar"},a=["src"],d=(0,o.Uk)("подробнее"),c=(0,o.Uk)("ИНН"),p=(0,o.Uk)("Телефон"),m={style:{"scrollbar-width":"none","overflow-x":"scroll",display:"flex"}},g={key:0,class:"delivery-variant"},f=i((function(){return(0,o._)("br",null,null,-1)})),_={key:1,class:"delivery-variant"},h=i((function(){return(0,o._)("br",null,null,-1)})),w={key:2,class:"delivery-variant"},v=(0,o.Uk)("Самовывоз"),k=i((function(){return(0,o._)("br",null,null,-1)})),y=i((function(){return(0,o._)("b",null,"0₽",-1)})),I={key:0,class:"group-fixed-block hidden-block"},b=i((function(){return(0,o._)("h4",{style:{margin:"8px 16px"}},[(0,o._)("b",null,"Категории")],-1)})),S={style:{margin:"0"}},x=(0,o.Uk)("добавить ");function q(e,t,r,i,q,W){var $,C=(0,o.up)("image-slider-comp"),G=(0,o.up)("ion-text"),P=(0,o.up)("ion-icon"),j=(0,o.up)("ion-item"),Z=(0,o.up)("ion-label"),z=(0,o.up)("ion-list"),H=(0,o.up)("ion-accordion"),L=(0,o.up)("ion-accordion-group"),T=(0,o.up)("store-opened-indicator"),D=(0,o.up)("ion-col"),U=(0,o.up)("ion-chip"),O=(0,o.up)("ion-row"),B=(0,o.up)("ion-grid"),M=(0,o.up)("ion-segment-button"),R=(0,o.up)("ion-segment"),N=(0,o.up)("ion-searchbar"),V=(0,o.up)("group-list"),Y=(0,o.up)("product-list"),A=(0,o.up)("swiper-slide"),K=(0,o.up)("swiper"),E=(0,o.up)("base-layout");return(0,o.wg)(),(0,o.j4)(E,{pageDefaultBackLink:"/catalog","page-class":"store-page",contentOnScroll:W.onScroll,"page-title":null!==($=this.storeItem.store_name)&&void 0!==$?$:"Магазин"},{default:(0,o.w5)((function(){var r,$;return[(0,o._)("div",null,[(0,o._)("div",u,[(0,o.Wm)(C,{imageList:q.storeItem.images,imgHeight:300,mode:"crop-to-fit"},null,8,["imageList"]),(0,o.Wm)(z,{class:"store-info"},{default:(0,o.w5)((function(){return[(0,o.Wm)(j,{lines:"none"},{default:(0,o.w5)((function(){return[q.storeItem.avatarImage?((0,o.wg)(),(0,o.iD)("div",s,[(0,o._)("div",l,[(0,o._)("img",{src:e.$heap.state.hostname+"image/get.php/"+q.storeItem.avatarImage+".200.200.webp"},null,8,a)])])):(0,o.kq)("",!0),(0,o.Wm)(G,{style:{"font-size":"1.2em"}},{default:(0,o.w5)((function(){return[(0,o._)("b",null,(0,n.zw)(q.storeItem.store_name),1)]})),_:1}),q.storeItem.is_writable?((0,o.wg)(),(0,o.j4)(P,{key:1,slot:"end",color:"primary",onClick:t[0]||(t[0]=function(t){return e.$router.push(`/catalog/store-edit-${q.storeItem.store_id}`)}),icon:i.settingsOutline,style:{"font-size":"24px"}},null,8,["icon"])):(0,o.kq)("",!0)]})),_:1}),(0,o.Wm)(L,{style:{width:"100%"}},{default:(0,o.w5)((function(){return[(0,o.Wm)(H,null,{default:(0,o.w5)((function(){return[(0,o.Wm)(j,{slot:"header",lines:"none"},{default:(0,o.w5)((function(){return[q.storeItem.store_description?((0,o.wg)(),(0,o.j4)(G,{key:0,class:"store-description",color:"medium"},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,n.zw)(q.storeItem.store_description),1)]})),_:1})):((0,o.wg)(),(0,o.j4)(G,{key:1,color:"medium"},{default:(0,o.w5)((function(){return[d]})),_:1}))]})),_:1}),(0,o.Wm)(z,{slot:"content"},{default:(0,o.w5)((function(){return[q.storeItem.store_company_name?((0,o.wg)(),(0,o.j4)(j,{key:0,lines:"none"},{default:(0,o.w5)((function(){return[(0,o.Wm)(G,null,{default:(0,o.w5)((function(){return[(0,o._)("b",null,(0,n.zw)(q.storeItem.store_company_name),1)]})),_:1})]})),_:1})):(0,o.kq)("",!0),q.storeItem.store_tax_num?((0,o.wg)(),(0,o.j4)(j,{key:1,lines:"none"},{default:(0,o.w5)((function(){return[(0,o.Wm)(Z,{color:"medium"},{default:(0,o.w5)((function(){return[c]})),_:1}),(0,o.Wm)(G,{color:"dark"},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,n.zw)(q.storeItem.store_tax_num),1)]})),_:1})]})),_:1})):(0,o.kq)("",!0),q.storeItem.store_phone?((0,o.wg)(),(0,o.j4)(j,{key:2,lines:"none"},{default:(0,o.w5)((function(){return[(0,o.Wm)(Z,{color:"medium"},{default:(0,o.w5)((function(){return[p]})),_:1}),(0,o.Wm)(G,{color:"dark"},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,n.zw)(q.storeItem.store_phone),1)]})),_:1})]})),_:1})):(0,o.kq)("",!0),q.storeItem.locations?((0,o.wg)(),(0,o.j4)(j,{key:3,lines:"none"},{default:(0,o.w5)((function(){return[(0,o.Wm)(G,{color:"dark"},{default:(0,o.w5)((function(){var e;return[(0,o.Uk)((0,n.zw)(null===(e=q.storeItem.locations)||void 0===e?void 0:e[0].location_address),1)]})),_:1})]})),_:1})):(0,o.kq)("",!0)]})),_:1})]})),_:1})]})),_:1}),(0,o.Wm)(B,null,{default:(0,o.w5)((function(){return[(0,o.Wm)(O,{class:"ion-justify-content-between"},{default:(0,o.w5)((function(){return[(0,o.Wm)(D,{size:"auto"},{default:(0,o.w5)((function(){return[(0,o.Wm)(T,{storeItem:q.storeItem},null,8,["storeItem"])]})),_:1}),(0,o.Wm)(D,{size:"auto"},{default:(0,o.w5)((function(){return[q.storeItem.store_group_names?((0,o.wg)(),(0,o.j4)(U,{key:0,color:"medium",background:"transparent"},{default:(0,o.w5)((function(){return[(0,o._)("label",null,(0,n.zw)(q.storeItem.store_group_names),1)]})),_:1})):(0,o.kq)("",!0)]})),_:1})]})),_:1})]})),_:1})]})),_:1}),(0,o._)("div",m,[q.storeItem.delivery_cost>0?((0,o.wg)(),(0,o.iD)("div",g,[(0,o._)("div",null,[(0,o.Wm)(Z,null,{default:(0,o.w5)((function(){return[(0,o.Uk)("Доставит "+(0,n.zw)(e.$heap.getters.settings.app_title),1)]})),_:1}),f,null!==(r=q.storeItem)&&void 0!==r&&null!==($=r.deliveryTime)&&void 0!==$&&$.timeMin?((0,o.wg)(),(0,o.j4)(G,{key:0},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,n.zw)(q.storeItem.deliveryTime.timeMin)+"-"+(0,n.zw)(q.storeItem.deliveryTime.timeMax)+"мин",1)]})),_:1})):(0,o.kq)("",!0)]),(0,o._)("div",null,[q.storeItem.delivery_cost>0?((0,o.wg)(),(0,o.j4)(G,{key:0},{default:(0,o.w5)((function(){return[(0,o._)("b",null,(0,n.zw)(q.storeItem.delivery_cost)+"₽",1)]})),_:1})):(0,o.kq)("",!0)])])):(0,o.kq)("",!0),1==q.storeItem.store_delivery_allow?((0,o.wg)(),(0,o.iD)("div",_,[(0,o._)("div",null,[(0,o.Wm)(Z,null,{default:(0,o.w5)((function(){return[(0,o.Uk)("Доставит "+(0,n.zw)(q.storeItem.member_of_groups.group_names),1)]})),_:1}),h]),(0,o._)("div",null,[q.storeItem.delivery_cost>0?((0,o.wg)(),(0,o.j4)(G,{key:0},{default:(0,o.w5)((function(){return[(0,o._)("b",null,(0,n.zw)(q.storeItem.store_delivery_cost)+"₽",1)]})),_:1})):(0,o.kq)("",!0)])])):(0,o.kq)("",!0),1==q.storeItem.store_pickup_allow?((0,o.wg)(),(0,o.iD)("div",w,[(0,o._)("div",null,[(0,o.Wm)(Z,null,{default:(0,o.w5)((function(){return[v]})),_:1}),k]),(0,o._)("div",null,[(0,o.Wm)(G,null,{default:(0,o.w5)((function(){return[y]})),_:1})])])):(0,o.kq)("",!0)])]),q.storeGroups?((0,o.wg)(),(0,o.iD)("div",I,[(0,o.Wm)(R,{modelValue:q.groupSelectedParentId,"onUpdate:modelValue":t[1]||(t[1]=function(e){return q.groupSelectedParentId=e}),scrollable:"",style:{"scrollbar-width":"none"},class:"groups-container"},{default:(0,o.w5)((function(){return[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(q.storeGroups,(function(e){return(0,o.wg)(),(0,o.j4)(M,{key:e.group_id,value:e.group_id,onClick:function(t){return W.groupSelectParent(e.group_id,1)},ref_for:!0,ref:"group-tab-"+e.group_id},{default:(0,o.w5)((function(){return[(0,o.Wm)(Z,null,{default:(0,o.w5)((function(){return[(0,o.Uk)((0,n.zw)(e.group_name),1)]})),_:2},1024)]})),_:2},1032,["value","onClick"])})),128))]})),_:1},8,["modelValue"])])):(0,o.kq)("",!0),(0,o.Wm)(N,{class:"search-container",modelValue:q.searchRequest,"onUpdate:modelValue":t[2]||(t[2]=function(e){return q.searchRequest=e}),placeholder:"Поиск у этого продавца",onInput:t[3]||(t[3]=function(e){return W.productListGet({name_query:e.target.value,name_query_fields:"product_name,product_code"})})},null,8,["modelValue"]),b,q.storeGroups?((0,o.wg)(),(0,o.j4)(V,{key:1,groupList:q.storeGroups,onClick:function(e){W.groupSelectParent(e,!0)}},null,8,["groupList","onClick"])):(0,o.kq)("",!0),q.storeGroups?((0,o.wg)(),(0,o.j4)(K,{key:2,pager:"true",initialSlide:0,speed:400,watchSlidesProgress:!1,grabCursor:!0,touchStartForcePreventDefault:!0,slidesPerView:1.1,pagination:!1,centeredSlides:!1,class:"product-list-slider",onSlideChange:t[4]||(t[4]=function(e){return W.groupSliderChanged(e)})},{default:(0,o.w5)((function(){return[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(q.storeGroups,(function(e){return(0,o.wg)(),(0,o.j4)(A,{key:e.group_id},{default:(0,o.w5)((function(){return[(0,o.Wm)(B,{class:"product-list"},{default:(0,o.w5)((function(){return[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.children,(function(e){return(0,o.wg)(),(0,o.j4)(O,{key:e.group_id,ref_for:!0,ref:"group-"+e.group_id,"data-group_id":e.group_id},{default:(0,o.w5)((function(){return[(0,o.Wm)(D,{class:"group-title",size:"12"},{default:(0,o.w5)((function(){return[(0,o._)("h5",S,[(0,o.Uk)((0,n.zw)(e.group_name)+" ",1),1==q.storeItem.is_writable?((0,o.wg)(),(0,o.j4)(U,{key:0,onClick:function(t){return W.productItemCreate(e.group_id)}},{default:(0,o.w5)((function(){return[(0,o.Wm)(P,{src:i.addOutline},null,8,["src"]),x]})),_:2},1032,["onClick"])):(0,o.kq)("",!0)])]})),_:2},1024),(0,o.Wm)(D,{size:"12"},{default:(0,o.w5)((function(){return[(0,o.Wm)(Y,{productList:q.storeProducts[e.group_id]},null,8,["productList"])]})),_:2},1024)]})),_:2},1032,["data-group_id"])})),128))]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1},8,["slidesPerView"])):(0,o.kq)("",!0)])]})),_:1},8,["contentOnScroll","page-title"])}var W=r(8439),$=r(6835),C=r(8534),G=(r(1539),r(4747),r(8292)),P=r(702),j=r(3181),Z=r(8903),z=r(4966),H=r(2927),L={class:"product_list_widget_grid"};function T(e,t,r,n,i,u){var s=(0,o.up)("product-item");return(0,o.wg)(),(0,o.iD)("div",L,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.productList,(function(e){return(0,o.wg)(),(0,o.iD)("div",{key:e.product_id},[(0,o.Wm)(s,{productItem:e},null,8,["productItem"])])})),128))])}var D=r(8336),U={props:["productList"],components:{ProductItem:D.Z}},O=r(3744);const B=(0,O.Z)(U,[["render",T],["__scopeId","data-v-fcf4f40a"]]);var M=B,R=r(6181),N=r(9755),V=r.n(N),Y=r(2008),A=r(4405),K={components:{IonText:G.yW,IonCol:G.wI,IonIcon:G.gu,IonRow:G.Nd,IonGrid:G.jY,IonLabel:G.Q$,IonSegmentButton:G.GO,IonSegment:G.cJ,IonChip:G.hM,IonSearchbar:G.VI,IonAccordion:G.We,IonAccordionGroup:G.eh,IonList:G.q_,IonItem:G.Ie,ImageSliderComp:z.Z,StoreOpenedIndicator:R.Z,Swiper:j.t,SwiperSlide:j.o,GroupList:H.Z,ProductList:M},setup(){return{search:Z.yC4,settingsOutline:Z.C$N,rocketOutline:Z.G$D,compassOutline:Z.gmD,addOutline:Z.s6O,slideModules:[P.pt]}},data(){return{storeId:this.$route.params.id,query:this.$route.query,searchRequest:"",storeItem:[],storeProducts:{},storeGroups:null,groupSelectedParentId:-1,sliderMaxHeight:500,offsetModificator:150,can_reload_at:0}},methods:{itemGet(){var e=this;return(0,C.Z)((0,$.Z)().mark((function t(){var r,o,n,i,u;return(0,$.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=Date.now(),!(e.can_reload_at>r)){t.next=3;break}return t.abrupt("return");case 3:return e.can_reload_at=r+1e4,t.prev=4,t.next=7,V().post(`${Y.Z.state.hostname}Store/itemGet`,{store_id:e.storeId,distance_include:1});case 7:o=t.sent,e.storeItem=e.itemPrepare(o),e.storeId=o.store_id,e.groupTreeGet({store_id:e.storeId}),Y.Z.commit("setCurrentStore",e.storeItem),t.next=24;break;case 14:t.prev=14,t.t0=t["catch"](4),u=null===t.t0||void 0===t.t0||null===(n=t.t0.responseJSON)||void 0===n||null===(i=n.messages)||void 0===i?void 0:i.error,t.t1=u,t.next="notfound"===t.t1?20:23;break;case 20:return e.$flash("Продавец не найден"),e.$router.push("/catalog"),t.abrupt("break",23);case 23:return t.abrupt("return",!1);case 24:case"end":return t.stop()}}),t,null,[[4,14]])})))()},itemPrepare(e){var t;return e.member_of_groups.group_names&&(e.store_group_names=e.member_of_groups.group_names),e.deliveryTime={},null!==(t=e.locations[0])&&void 0!==t&&t.distance&&(e.deliveryTime=A.Z.deliveryTimeCalculate(e.locations[0].distance,e.store_time_preparation)),e.avatarImage="",e.avatar.length>0&&(e.avatarImage=e.avatar[0].image_hash),e},productListGet(){var e=arguments,t=this;return(0,C.Z)((0,$.Z)().mark((function r(){var o,n,i;return(0,$.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(o=e.length>0&&void 0!==e[0]?e[0]:{},o.store_id=t.storeId,o.is_active=1,!o.name_query||""!=o.name_query){r.next=6;break}return t.groupTreeGet({store_id:t.storeId}),r.abrupt("return");case 6:return o.limit=200,n={},r.prev=8,r.next=11,V().post(Y.Z.state.hostname+"Product/listGet",o);case 11:n=r.sent,r.next=16;break;case 14:r.prev=14,r.t0=r["catch"](8);case 16:t.productListPrepare(n.product_list),t.groupOtherAdd(),i=t,setTimeout((function(){i.groupSelect()}),0);case 20:case"end":return r.stop()}}),r,null,[[8,14]])})))()},productListPrepare(e){var t=1;this.storeProducts={};var r,o=(0,W.Z)(e);try{for(o.s();!(r=o.n()).done;){var n,i,u,s,l=r.value;if(this.storeGroups)if(!this.storeProducts[null!==(i=l.group_id)&&void 0!==i?i:0])this.storeProducts[null!==(u=l.group_id)&&void 0!==u?u:0]=[],this.storeProducts[null!==(s=l.group_id)&&void 0!==s?s:0].category_order=t++;this.storeProducts[null!==(n=l.group_id)&&void 0!==n?n:0].push(l)}}catch(a){o.e(a)}finally{o.f()}},productItemCreate(e){var t=this;return(0,C.Z)((0,$.Z)().mark((function r(){var o,n;return(0,$.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,o={store_id:t.storeId,product_name:"Новый товар",product_price:1e3,product_promo_price:1e3},r.next=4,V().post(`${Y.Z.state.hostname}Product/itemCreate`,o);case 4:if(n=r.sent,!e){r.next=8;break}return r.next=8,V().post(`${Y.Z.state.hostname}Product/itemUpdateGroup`,{product_id:n,group_id:e,is_joined:1});case 8:t.$router.push(`/catalog/product-edit-${n}`),t.$flash("Добавлен 'Новый товар'"),r.next=15;break;case 12:r.prev=12,r.t0=r["catch"](0),t.$flash("Не удалось создать товар");case 15:case"end":return r.stop()}}),r,null,[[0,12]])})))()},groupTreeGet(e){var t=this;return(0,C.Z)((0,$.Z)().mark((function r(){var o,n,i;return(0,$.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,V().get(`${Y.Z.state.hostname}Product/groupTreeGet`,{store_id:e.store_id});case 3:for(i in o=r.sent,n=[],o)n[o[i].order]=o[i];t.storeGroups=n,t.productListGet(),r.next=12;break;case 10:r.prev=10,r.t0=r["catch"](0);case 12:case"end":return r.stop()}}),r,null,[[0,10]])})))()},groupOtherAdd(){this.storeProducts[0]&&this.storeGroups.push({group_id:"other",group_name:"Другое",image_hash:"",children:{0:{group_id:0,group_name:"другое",group_parent_id:0,group_path:"",image_hash:""}}})},groupSelect(){var e,t=this.query.parent_group_id,r=this.query.sub_group_id;if(r)e:for(var o in this.storeGroups)for(var n in this.storeGroups[o].children)if(n==r){t=o;break e}t||(t=null===(e=this.storeGroups[0])||void 0===e?void 0:e.group_id);var i=!1;if(this.groupSelectParent(t,i),r){var u=this;setTimeout((function(){u.groupSelectSub(r)}),0)}},groupSelectParent(e){if(this.groupSelectedParentId!=e&&document.querySelector(".product-list-slider")){this.groupSelectedParentId=e;var t=document.querySelector(".product-list-slider").swiper,r=this.storeGroups.findIndex((function(t){return t.group_id==e}));r>=0&&(t.slideTo(r,100,!1),this.groupSliderAdjustHeight())}},groupSelectSub(e){this.groupSelectedSubId,this.groupSelectedSubId=e,document.querySelectorAll(".groups-container ion-chip").forEach((function(e){e.classList.remove("active-chip")}));try{this.$refs[`group-chip-${e}`][0].$el.classList.add("active-chip")}catch(t){}this.scrollTo(e)},groupSliderChanged(e){var t=e.activeIndex,r=this.storeGroups[t].group_id;this.groupSelectParent(r,1)},groupSliderAdjustHeight(){var e,t=null===(e=document.querySelector(".product-list-slider .swiper-slide.swiper-slide-active"))||void 0===e?void 0:e.scrollHeight;document.querySelector(".product-list-slider.swiper").style.maxHeight=t>0?t+"px":""},scrollTo(e){var t,r;if(null!==(t=this.$refs["group-"+e])&&void 0!==t&&t[0]){var o=document.querySelector("ion-content.store-page").shadowRoot.querySelector("main").scrollTop,n=this.$refs["group-"+e][0].$el.getBoundingClientRect().top,i=o+n-this.offsetModificator-window.innerHeight/4,u=Object.keys(null===(r=this.storeGroups[this.groupSelectedParentId])||void 0===r?void 0:r.children)[0]||0;u==e&&(i=o+n-this.offsetModificator),document.querySelector("ion-content.store-page").shadowRoot.querySelector("main").scrollTo({top:i,behavior:"smooth"})}},onScroll(e){var t,r,o=null===(t=document.querySelector(".product-list-slider"))||void 0===t?void 0:t.offsetTop,n=null===(r=document.querySelector(".group-fixed-block"))||void 0===r?void 0:r.offsetHeight;o-n-100<e.detail.scrollTop?document.querySelector(".group-fixed-block")&&(document.querySelector(".group-fixed-block").className="group-fixed-block"):document.querySelector(".group-fixed-block")&&(document.querySelector(".group-fixed-block").className="group-fixed-block hidden-block");var i,u=document.querySelectorAll(".swiper-slide-active .product-list ion-row"),s=(0,W.Z)(u);try{for(s.s();!(i=s.n()).done;){var l=i.value;if(l.getBoundingClientRect().top-this.offsetModificator<=window.innerHeight-window.innerHeight/4&&l.getBoundingClientRect().bottom+this.offsetModificator>=window.innerHeight-window.innerHeight/4&&l.dataset.group_id)break}}catch(a){s.e(a)}finally{s.f()}}},mounted(){this.query=this.$route.query,this.itemGet()},watch:{$route(e){this.storeId=e.params.id}}};const E=(0,O.Z)(K,[["render",q],["__scopeId","data-v-066444de"]]);var J=E}}]);
//# sourceMappingURL=7443-legacy.74c00f60.js.map