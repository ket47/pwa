"use strict";(self["webpackChunktezkel"]=self["webpackChunktezkel"]||[]).push([[71],{4405:function(e,t,o){var i=o(2008);const n={deliveryCalculate(e){if(!e.locations||!e.locations[0]||!e.locations[0].distance)return null;const t=e.locations[0].distance,o=e.store_time_preparation||0;return n.deliveryTimeCalculate(t,o)},deliveryTimeCalculate(e,t){var o;t=parseInt(null!==(o=t)&&void 0!==o?o:i.Z.getters.settings.delivery.timePreparationDefault);const n=parseInt(i.Z.getters.settings.delivery.timeDelta),l=parseInt(i.Z.getters.settings.delivery.speed),a=5*Math.round(e/l*60/5)+t,r=a>n?a-n:a,s=r+n;return{time:a,timeMin:r,timeMax:s}}};t["Z"]=n},3292:function(e,t,o){o.d(t,{Z:function(){return v}});var i=o(6252),n=o(3577);const l=(0,i.Uk)(" ◉ "),a={key:0},r=(0,i.Uk)(" ◉ "),s=(0,i.Uk)("Временно не работает"),u={key:1},d=(0,i.Uk)(" ◉ "),c={key:2},m=(0,i.Uk)(" ◉ "),p=(0,i.Uk)("Закрыт");function _(e,t,o,_,w,h){const g=(0,i.up)("ion-text"),y=(0,i.up)("ion-chip");return 1==o.storeItem.is_opened?((0,i.wg)(),(0,i.j4)(y,{key:0,color:"medium"},{default:(0,i.w5)((()=>[(0,i._)("label",null,[(0,i.Wm)(g,{color:"success"},{default:(0,i.w5)((()=>[l])),_:1}),(0,i.Uk)("Открыт до "+(0,n.zw)(o.storeItem.store_time_closes)+":00",1)])])),_:1})):((0,i.wg)(),(0,i.j4)(y,{key:1,color:"medium"},{default:(0,i.w5)((()=>[0==o.storeItem.is_working?((0,i.wg)(),(0,i.iD)("label",a,[(0,i.Wm)(g,{color:"medium"},{default:(0,i.w5)((()=>[r])),_:1}),s])):o.storeItem.store_next_time_opens>0?((0,i.wg)(),(0,i.iD)("label",u,[(0,i.Wm)(g,{color:"medium"},{default:(0,i.w5)((()=>[d])),_:1}),(0,i.Uk)("Закрыт до "+(0,n.zw)(o.storeItem.store_next_time_opens)+":00",1)])):((0,i.wg)(),(0,i.iD)("label",c,[(0,i.Wm)(g,{color:"medium"},{default:(0,i.w5)((()=>[m])),_:1}),p]))])),_:1}))}var w=o(3741),h=o(8903),g={props:["storeItem"],components:{IonChip:w.hM,IonText:w.yW},setup(){return{ellipse:h.Hpm}}},y=o(3744);const f=(0,y.Z)(g,[["render",_]]);var v=f},5937:function(e,t,o){o.d(t,{Z:function(){return W}});var i=o(6252),n=o(3577);const l={class:"delivery-adress",style:{"font-size":"1em"}},a={class:"center"},r=(0,i.Uk)("Адрес"),s={class:"center"},u={key:0,class:"delivery-time"},d=(0,i.Uk)("мин"),c=(0,i.Uk)(" Выбрать адрес доставки ");function m(e,t,o,m,p,_){const w=(0,i.up)("ion-text"),h=(0,i.up)("ion-icon"),g=(0,i.up)("ion-note"),y=(0,i.up)("ion-label"),f=(0,i.up)("ion-item"),v=(0,i.up)("ion-textarea");return(0,i.wg)(),(0,i.iD)(i.HY,null,[_.isMainLocationSet?((0,i.wg)(),(0,i.iD)("div",{key:0,onClick:t[0]||(t[0]=e=>_.selectDeliveryAddress()),class:"selector"},[(0,i._)("div",l,[(0,i._)("div",a,[(0,i.Wm)(w,{size:"small",color:"medium"},{default:(0,i.w5)((()=>[r])),_:1}),(0,i.Wm)(h,{icon:m.chevronDownOutline,color:"medium"},null,8,["icon"])]),(0,i._)("div",s,[(0,i.Wm)(h,{slot:"start",color:"secondary",icon:m.location},null,8,["icon"]),(0,i.Wm)(w,{color:"dark"},{default:(0,i.w5)((()=>{var t,o;return[(0,i._)("b",null,(0,n.zw)(null===(t=e.$heap.state.user)||void 0===t||null===(o=t.location_main)||void 0===o?void 0:o.location_address),1)]})),_:1})])]),o.deliveryTime?((0,i.wg)(),(0,i.iD)("div",u,[(0,i.Wm)(w,{style:{"font-size":"24px",color:"var(--ion-color-secondary-contrast)"}},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(o.deliveryTime.time),1)])),_:1}),(0,i.Wm)(g,{style:{"font-size":"10px",color:"var(--ion-color-secondary-contrast)"}},{default:(0,i.w5)((()=>[d])),_:1})])):(0,i.kq)("",!0)])):((0,i.wg)(),(0,i.j4)(f,{key:1,detail:"",button:"",onClick:t[1]||(t[1]=e=>_.selectDeliveryAddress()),class:"selector"},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{slot:"start",style:{color:"var(--ion-color-primary)"},icon:m.location},null,8,["icon"]),(0,i.Wm)(y,null,{default:(0,i.w5)((()=>[c])),_:1})])),_:1})),o.showComment&&e.$heap.state.user.location_main?((0,i.wg)(),(0,i.j4)(f,{key:2},{default:(0,i.w5)((()=>[(0,i.Wm)(v,{rows:"1",placeholder:"комментарий к адресу",onChange:t[2]||(t[2]=e=>_.locationCommentChanged()),modelValue:e.$heap.state.user.location_main.location_comment,"onUpdate:modelValue":t[3]||(t[3]=t=>e.$heap.state.user.location_main.location_comment=t)},null,8,["modelValue"])])),_:1})):(0,i.kq)("",!0)],64)}o(8862);var p=o(3741),_=o(8903),w=o(2008),h=o(8363),g=o(9042),y=o(9755),f=o.n(y),v={props:["deliveryTime","showComment"],components:{IonIcon:p.gu,IonTextarea:p.g2,IonText:p.yW,IonNote:p.uN,IonLabel:p.Q$,IonItem:p.Ie},setup(){return{location:_.xhW,chevronDownOutline:_.Y$3}},data(){return{location_main:w.Z.state.user.location_main}},created(){let e=this;g.Z.on("userMainLocationSet",(t=>{e.location_main=t})),g.Z.on("userGet",(t=>{e.location_main=t.location_main}))},methods:{selectDeliveryAddress(){h.Z.push("/user/user-addresses")},async locationCommentChanged(){const e={location_id:w.Z.state.user.location_main.location_id,location_comment:w.Z.state.user.location_main.location_comment};f().post(this.$heap.state.hostname+"Location/itemUpdate",JSON.stringify(e))}},computed:{isSignedIn(){return w.Z.state.user.user_id&&w.Z.state.user.user_id>-1},isMainLocationSet(){return this.location_main?1:0}}},k=o(3744);const I=(0,k.Z)(v,[["render",m],["__scopeId","data-v-47985fb8"]]);var W=I},8071:function(e,t,o){o.r(t),o.d(t,{default:function(){return ee}});var i=o(6252);function n(e,t,o,n,l,a){const r=(0,i.up)("home-slider"),s=(0,i.up)("user-address-widget"),u=(0,i.up)("home-primary-category-widget"),d=(0,i.up)("store-list"),c=(0,i.up)("base-layout");return(0,i.wg)(),(0,i.j4)(c,{pageLogo:n.mainLogo},{default:(0,i.w5)((()=>[(0,i.Wm)(r),(0,i.Wm)(s,{deliveryTime:l.primaryDeliveryTime},null,8,["deliveryTime"]),(0,i.Wm)(u,{onDeliveryTimeGet:t[0]||(t[0]=e=>{l.primaryDeliveryTime=e})}),(0,i.Wm)(d)])),_:1},8,["pageLogo"])}var l=o(3577);const a={class:"home_slide"},r={style:{"font-size":"3em"}};function s(e,t,o,n,s,u){const d=(0,i.up)("ion-img"),c=(0,i.up)("swiper-slide"),m=(0,i.up)("swiper");return(0,i.wg)(),(0,i.j4)(m,{modules:e.modules,autoplay:{delay:6e3,disableOnInteraction:!1},loop:!0,class:"home-swiper"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.home_slides,(e=>((0,i.wg)(),(0,i.j4)(c,{key:e.title,style:(0,l.j5)(`background-color:${e.color};`)},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{src:e.image,class:"home_slide_img",alt:e.alt},null,8,["src","alt"]),(0,i._)("div",a,[(0,i._)("h1",r,(0,l.zw)(e.title),1),(0,i._)("p",null,(0,l.zw)(e.description),1)])])),_:2},1032,["style"])))),128))])),_:1},8,["modules"])}var u=o(9755),d=o.n(u),c=o(702),m=o(3181),p=o(3741),_=(0,i.aZ)({components:{Swiper:m.t,SwiperSlide:m.o,IonImg:p.Xz},setup(){return{modules:[c.pt]}},data(){return{home_slides:[],error:""}},created(){this.getSlideList()},methods:{getSlideList(){var e=this;d().get("/assets/homeslider/conf.json").done((function(t){e.home_slides=t.slides})).fail((function(t){e.error=t.responseJSON.messages.error}))}}}),w=o(3744);const h=(0,w.Z)(_,[["render",s],["__scopeId","data-v-14fdc62e"]]);var g=h;const y=e=>((0,i.dD)("data-v-76beff36"),e=e(),(0,i.Cn)(),e),f=(0,i.Uk)("Присоединяйтесь к команде"),v=y((()=>(0,i._)("p",null,"Многие продавцы еще на стадии модерации. Поэтому доступных магазинов и ресторанов в вашем районе может быть не так много.",-1))),k=(0,i.Uk)(" Позвоните нам по телефону "),I=y((()=>(0,i._)("a",{href:"tel:+79785451935"},"+7 (978) 54-51-935",-1))),W=(0,i.Uk)(" и мы поможем оформить ваше предприятие в нашем сервисе. "),b=(0,i.Uk)("Позвонить"),C=(0,i.Uk)("Как стать продавцом"),D=y((()=>(0,i._)("div",{class:"crop-to-fit",style:{"background-color":"var(--ion-color-light)"}},null,-1))),L=(0,i.Uk)("Вне зоны обслуживания"),Z=(0,i.Uk)(" К сожалению, не найдено подходящих магазинов и ресторанов. "),T=y((()=>(0,i._)("br",null,null,-1))),z=(0,i.Uk)("Возможно вы находитесь вне радиуса доставки. "),S=y((()=>(0,i._)("h5",{class:"section-title"},"Магазины и рестораны",-1))),G={class:"crop-to-fit"};function U(e,t,o,n,a,r){const s=(0,i.up)("ion-card-title"),u=(0,i.up)("ion-card-header"),d=(0,i.up)("ion-button"),c=(0,i.up)("ion-card-content"),m=(0,i.up)("ion-card"),p=(0,i.up)("ion-skeleton-text"),_=(0,i.up)("ion-chip"),w=(0,i.up)("ion-item"),h=(0,i.up)("ion-list"),g=(0,i.up)("ion-col"),y=(0,i.up)("ion-icon"),U=(0,i.up)("ion-row"),$=(0,i.up)("ion-grid"),x=(0,i.up)("ion-img"),j=(0,i.up)("router-link"),M=(0,i.up)("store-opened-indicator");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(m,{color:"warning"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,null,{default:(0,i.w5)((()=>[(0,i.Wm)(s,null,{default:(0,i.w5)((()=>[f])),_:1})])),_:1}),(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[v,k,I,W,(0,i.Wm)(d,{onclick:"location.href='tel:+79785451935'",expand:"block",color:"success"},{default:(0,i.w5)((()=>[b])),_:1}),(0,i.Wm)(d,{href:"/page/supplier-guide",expand:"block"},{default:(0,i.w5)((()=>[C])),_:1})])),_:1})])),_:1}),a.storeList?0==a.storeList.length?((0,i.wg)(),(0,i.j4)(m,{key:1,color:"warning"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,null,{default:(0,i.w5)((()=>[(0,i.Wm)(s,null,{default:(0,i.w5)((()=>[L])),_:1})])),_:1}),(0,i.Wm)(c,{style:{"font-family":"Roboto"}},{default:(0,i.w5)((()=>[Z,T,z])),_:1})])),_:1})):(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(h,{key:0,class:"store-list"},{default:(0,i.w5)((()=>[((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)([1,1],(e=>(0,i.Wm)(m,{button:"",key:e},{default:(0,i.w5)((()=>[D,(0,i.Wm)(_,{color:"success"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{style:{width:"130px"},animated:""})])),_:1}),(0,i.Wm)(_,{color:"primary"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{style:{width:"100px"},animated:""})])),_:1}),(0,i.Wm)(w,{lines:"none"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{style:{width:"70%",height:"1.5em"},animated:""})])),_:1})])),_:2},1024))),64))])),_:1})),(0,i.Wm)($,{class:"ion-justify-content-between ion-align-items-center",style:{padding:"0 16px"}},{default:(0,i.w5)((()=>[(0,i.Wm)(U,null,{default:(0,i.w5)((()=>[(0,i.Wm)(g,{size:"10"},{default:(0,i.w5)((()=>[S])),_:1}),(0,i.Wm)(g,{size:"2",class:"ion-align-self-end"},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{style:{"font-size":"20px"},icon:n.searchOutline},null,8,["icon"])])),_:1})])),_:1})])),_:1}),a.storeList&&a.storeList.length>0?((0,i.wg)(),(0,i.j4)(h,{key:2,class:"store-list"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.storeList,(t=>((0,i.wg)(),(0,i.j4)(m,{button:"",key:t.store_id,onClick:o=>e.$router.push(`/catalog/store-${t.store_id}`),class:(0,l.C_)(0==t.is_opened?"closed":"")},{default:(0,i.w5)((()=>[(0,i.Wm)(j,{to:`/catalog/store-${t.store_id}`},{default:(0,i.w5)((()=>[(0,i._)("div",G,[t.image_hash?((0,i.wg)(),(0,i.j4)(x,{key:0,src:e.$heap.state.hostname+"/image/get.php/"+t.image_hash+".300.300.webp"},null,8,["src"])):(0,i.kq)("",!0)])])),_:2},1032,["to"]),(0,i.Wm)(w,{lines:"none",class:"store-title"},{default:(0,i.w5)((()=>[(0,i._)("b",null,(0,l.zw)(t.store_name),1)])),_:2},1024),(0,i.Wm)($,null,{default:(0,i.w5)((()=>[(0,i.Wm)(U,{class:"ion-justify-content-between"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{size:"auto"},{default:(0,i.w5)((()=>[(0,i.Wm)(M,{storeItem:t},null,8,["storeItem"])])),_:2},1024),(0,i.Wm)(g,{size:"auto"},{default:(0,i.w5)((()=>[t.deliveryTime.timeMin?((0,i.wg)(),(0,i.j4)(_,{key:0,color:"medium",background:"transparent"},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{icon:n.timeOutline},null,8,["icon"]),(0,i._)("label",null,(0,l.zw)(t.deliveryTime.timeMin)+"-"+(0,l.zw)(t.deliveryTime.timeMax)+"мин",1)])),_:2},1024)):(0,i.kq)("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick","class"])))),128))])),_:1})):(0,i.kq)("",!0)],64)}var $=o(8903),x=o(2008),j=o(4405),M=o(3292),O={components:{IonList:p.q_,IonImg:p.Xz,IonChip:p.hM,IonGrid:p.jY,IonRow:p.Nd,IonCol:p.wI,IonItem:p.Ie,IonCard:p.PM,IonIcon:p.gu,IonCardHeader:p.Zi,IonCardTitle:p.Dq,IonCardContent:p.FN,IonSkeletonText:p.CK,IonButton:p.YG,StoreOpenedIndicator:M.Z},setup(){return{timeOutline:$.bdY,searchOutline:$.W6I}},data(){return{storeList:null}},methods:{async listGet(){var e=x.Z.state.user.location_main;if(e)try{const t=await d().post(x.Z.state.hostname+"Store/listNearGet",{location_id:e.location_id});this.storeList=this.storeListCalculate(t)}catch{}},storeListCalculate(e){for(let t in e)e[t].deliveryTime=j.Z.deliveryTimeCalculate(e[t].distance,e[t].store_time_preparation);return e}},mounted(){this.$topic.on("userGet",(()=>{this.listGet()})),this.$topic.on("userMainLocationSet",(e=>{this.listGet()})),this.listGet()}};const q=(0,w.Z)(O,[["render",U],["__scopeId","data-v-76beff36"]]);var H=q,Y=o(5937);const N={key:0,id:"hcat_widget_wrapper"},K={id:"hcat_widget_info"},A=(0,i.Uk)("опорный поставщик"),P={id:"hcat_widget_grid"},V=["onClick"];function X(e,t){const o=(0,i.up)("ion-title"),n=(0,i.up)("store-opened-indicator"),a=(0,i.up)("ion-chip"),r=(0,i.up)("ion-img"),s=(0,i.up)("ion-thumbnail"),u=(0,i.up)("ion-label");return e.productGroupList?((0,i.wg)(),(0,i.iD)("div",N,[(0,i._)("div",{id:"hcat_widget_header",onClick:t[0]||(t[0]=t=>this.$router.push("store-"+e.primaryStoreData.store_id)),style:(0,l.j5)(`background-image:url(${e.$heap.state.hostname}image/get.php/${e.primaryStoreData.image_hash}.500.500.webp)`)},[(0,i._)("div",K,[(0,i.Wm)(o,{size:"large"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(e.primaryStoreData.store_name),1)])),_:1}),(0,i.Wm)(o,{size:"small"},{default:(0,i.w5)((()=>[A])),_:1})])],4),(0,i.Wm)(n,{storeItem:e.primaryStoreData},null,8,["storeItem"]),e.deliveryTime.timeMin?((0,i.wg)(),(0,i.j4)(a,{key:0,color:"primary"},{default:(0,i.w5)((()=>[(0,i.Uk)("доставка "+(0,l.zw)(e.deliveryTime.timeMin)+"-"+(0,l.zw)(e.deliveryTime.timeMax)+"мин",1)])),_:1})):(0,i.kq)("",!0),(0,i._)("div",P,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.productGroupList,(t=>((0,i.wg)(),(0,i.iD)("div",{key:t.group_id,onClick:o=>e.$router.push(`store-${e.primaryStoreData.store_id}?parent_group_id=${t.group_id}`)},[(0,i.Wm)(s,null,{default:(0,i.w5)((()=>[(0,i.Wm)(r,{src:e.$heap.state.hostname+"image/get.php/"+t.image_hash+".250.250.webp"},null,8,["src"])])),_:2},1024),(0,i.Wm)(u,{style:{height:"2em","text-align":"center",padding:"3px","font-size":"0.7em"},color:"dark"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(t.group_name),1)])),_:2},1024)],8,V)))),128))])])):(0,i.kq)("",!0)}o(9042);var B=(0,i.aZ)({components:{IonImg:p.Xz,IonThumbnail:p.Bs,IonLabel:p.Q$,IonTitle:p.wd,IonChip:p.hM,StoreOpenedIndicator:M.Z},data(){return{productGroupList:null,primaryStoreData:null,deliveryTime:{},main_location_id:null,old_location_id:-1}},mounted(){let e=this;this.$topic.on("userMainLocationSet",(t=>{e.main_location_id=t.location_id,e.productGroupListGet()})),this.$topic.on("userGet",(t=>{var o;e.main_location_id=null===(o=t.location_main)||void 0===o?void 0:o.location_id,e.productGroupListGet()})),this.main_location_id=x.Z.state.user.location_main?x.Z.state.user.location_main.location_id:null,this.productGroupListGet()},methods:{async productGroupListGet(){if(this.main_location_id&&this.old_location_id!=this.main_location_id){this.old_location_id=this.main_location_id;try{const e=await d().get(x.Z.state.hostname+"Store/primaryNearGet",{location_id:this.main_location_id});this.productGroupList=e.category_list,this.deliveryTime=j.Z.deliveryTimeCalculate(e.distance,e.store_time_preparation),this.primaryStoreData=e,this.$emit("deliveryTimeGet",this.deliveryTime)}catch(e){this.productGroupList=null,this.primaryStoreData=null,this.$emit("deliveryTimeGet",null)}}}}});const J=(0,w.Z)(B,[["render",X],["__scopeId","data-v-6e02fddd"]]);var Q=J,R=o(94),F={setup(){return{mainLogo:R}},components:{HomeSlider:g,StoreList:H,UserAddressWidget:Y.Z,HomePrimaryCategoryWidget:Q},data(){return{primaryDeliveryTime:null}}};const E=(0,w.Z)(F,[["render",n]]);var ee=E}}]);
//# sourceMappingURL=71.c36475ab.js.map