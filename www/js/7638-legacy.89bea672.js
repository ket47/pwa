"use strict";(self["webpackChunktezkel"]=self["webpackChunktezkel"]||[]).push([[7638],{5074:function(e,r,t){t.r(r),t.d(r,{default:function(){return G}});var n=t(6252),u=t(3577),i={key:0},o=(0,n.Uk)("Пока вы не курьер"),l=(0,n.Uk)(" Подавая заявку вы даете согласие на условия "),a=(0,n.Uk)("Оферта об оказании услуг доставки"),c=(0,n.Uk)("Стать курьером"),s={key:1},d=(0,n.Uk)(" Анкета активна. Вы можете открыть смену для приема заказов. "),m=(0,n.Uk)(" Удалено "),f=(0,n.Uk)(" На модерации "),p=(0,n.Uk)("Основные настройки"),_=(0,n.Uk)("Транспорт"),h=(0,n.Uk)("ИНН"),w=(0,n.Uk)("Комментарий"),k=(0,n.Uk)("Ваше фото"),g=(0,n.Uk)(" Добавить "),v=(0,n.Uk)("Информация"),W=(0,n.Uk)("Правила пользования для курьера");function b(e,r,t,b,x,C){var Z=(0,n.up)("ion-card-title"),I=(0,n.up)("ion-card-header"),U=(0,n.up)("router-link"),y=(0,n.up)("ion-text"),V=(0,n.up)("ion-checkbox"),D=(0,n.up)("ion-item"),O=(0,n.up)("ion-button"),T=(0,n.up)("ion-card-content"),q=(0,n.up)("ion-card"),$=(0,n.up)("ion-icon"),G=(0,n.up)("ion-toggle"),A=(0,n.up)("ion-label"),j=(0,n.up)("ion-item-divider"),z=(0,n.up)("ion-input"),F=(0,n.up)("ion-textarea"),L=(0,n.up)("ion-list"),N=(0,n.up)("image-tile-comp"),P=(0,n.up)("base-layout");return(0,n.wg)(),(0,n.j4)(P,{"page-title":"Анкета курьера",pageDefaultBackLink:"/user"},{default:(0,n.w5)((function(){return[x.courier?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",i,[(0,n.Wm)(q,{color:"light"},{default:(0,n.w5)((function(){return[(0,n.Wm)(I,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(Z,null,{default:(0,n.w5)((function(){return[o]})),_:1})]})),_:1}),(0,n.Wm)(T,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(D,{lines:"none"},{default:(0,n.w5)((function(){return[(0,n.Wm)(y,null,{default:(0,n.w5)((function(){return[l,(0,n.Wm)(U,{to:"/page/rules-courier"},{default:(0,n.w5)((function(){return[a]})),_:1})]})),_:1}),(0,n.Wm)(V,{slot:"end",modelValue:x.contractAccepted,"onUpdate:modelValue":r[0]||(r[0]=function(e){return x.contractAccepted=e})},null,8,["modelValue"])]})),_:1}),(0,n.Wm)(O,{expand:"block",onClick:r[1]||(r[1]=function(e){return C.itemCreate()}),disabled:!x.contractAccepted},{default:(0,n.w5)((function(){return[c]})),_:1},8,["disabled"])]})),_:1})]})),_:1})])),x.courier?((0,n.wg)(),(0,n.iD)("div",s,[C.message?((0,n.wg)(),(0,n.j4)(q,{key:0,lines:"none"},{default:(0,n.w5)((function(){return[(0,n.Wm)(T,{class:(0,u.C_)(C.messageClass)},{default:(0,n.w5)((function(){return[(0,n.Uk)((0,u.zw)(C.message),1)]})),_:1},8,["class"])]})),_:1})):((0,n.wg)(),(0,n.j4)(q,{key:1,lines:"none"},{default:(0,n.w5)((function(){return[(0,n.Wm)(T,{style:{"background-color":"var(--ion-color-success-tint)"}},{default:(0,n.w5)((function(){return[d]})),_:1})]})),_:1})),(0,n._)("form",{onChange:r[9]||(r[9]=function(e){return C.updateCourier()})},[(0,n.Wm)(L,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(D,null,{default:(0,n.w5)((function(){return[(0,n.Wm)($,{src:b.trashOutline,color:"primary",slot:"start"},null,8,["src"]),m,(0,n.Wm)(G,{slot:"end",modelValue:x.is_deleted,"onUpdate:modelValue":r[2]||(r[2]=function(e){return x.is_deleted=e}),color:"danger",onIonChange:r[3]||(r[3]=function(e){return C.itemDelete(e.target.checked?1:0)})},null,8,["modelValue"])]})),_:1}),(0,n.Wm)(D,null,{default:(0,n.w5)((function(){return[(0,n.Wm)($,{src:b.searchOutline,color:"primary",slot:"start"},null,8,["src"]),f,(0,n.Wm)(G,{slot:"end",modelValue:x.is_disabled,"onUpdate:modelValue":r[4]||(r[4]=function(e){return x.is_disabled=e}),onIonChange:r[5]||(r[5]=function(e){return C.itemDisable(e.target.checked?1:0)})},null,8,["modelValue"])]})),_:1}),(0,n.Wm)(j,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(A,null,{default:(0,n.w5)((function(){return[p]})),_:1})]})),_:1}),(0,n.Wm)(D,{lines:"full"},{default:(0,n.w5)((function(){return[(0,n.Wm)(A,{position:"stacked",color:"primary"},{default:(0,n.w5)((function(){return[_]})),_:1}),(0,n.Wm)(z,{modelValue:x.courier.courier_vehicle,"onUpdate:modelValue":r[6]||(r[6]=function(e){return x.courier.courier_vehicle=e}),placeholder:"автомобиль, мопед, велосипед"},null,8,["modelValue"])]})),_:1}),(0,n.Wm)(D,{lines:"full"},{default:(0,n.w5)((function(){return[(0,n.Wm)(A,{position:"stacked",color:"primary"},{default:(0,n.w5)((function(){return[h]})),_:1}),(0,n.Wm)(z,{modelValue:x.courier.courier_tax_num,"onUpdate:modelValue":r[7]||(r[7]=function(e){return x.courier.courier_tax_num=e}),placeholder:"Ваш ИНН"},null,8,["modelValue"])]})),_:1}),(0,n.Wm)(D,{lines:"full"},{default:(0,n.w5)((function(){return[(0,n.Wm)(A,{position:"stacked",color:"primary"},{default:(0,n.w5)((function(){return[w]})),_:1}),(0,n.Wm)(F,{modelValue:x.courier.courier_comment,"onUpdate:modelValue":r[8]||(r[8]=function(e){return x.courier.courier_comment=e}),placeholder:"Цвет, номер авто"},null,8,["modelValue"])]})),_:1})]})),_:1})],32),x.courier?((0,n.wg)(),(0,n.j4)(L,{key:2},{default:(0,n.w5)((function(){return[(0,n.Wm)(j,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(A,null,{default:(0,n.w5)((function(){return[k]})),_:1})]})),_:1}),(0,n.Wm)(N,{images:x.courier.images,image_holder_id:x.courier.courier_id,controller:"Courier",ref:"courierImgs"},null,8,["images","image_holder_id"]),(0,n.Wm)(O,{onClick:r[10]||(r[10]=function(r){return e.$refs.courierImgs.take_photo()}),size:"small",expand:"full",color:"medium"},{default:(0,n.w5)((function(){return[(0,n.Wm)($,{src:b.cameraOutline},null,8,["src"]),g]})),_:1})]})),_:1})):(0,n.kq)("",!0),(0,n.Wm)(L,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(j,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(A,null,{default:(0,n.w5)((function(){return[v]})),_:1})]})),_:1}),(0,n.Wm)(D,{lines:"none",button:"",detail:"",onClick:r[11]||(r[11]=function(r){return e.$router.push("/page/rules-courier")})},{default:(0,n.w5)((function(){return[(0,n.Wm)($,{src:b.documentTextOutline,slot:"start"},null,8,["src"]),(0,n.Wm)(U,{to:"/page/rules-courier"},{default:(0,n.w5)((function(){return[W]})),_:1})]})),_:1})]})),_:1})])):(0,n.kq)("",!0)]})),_:1})}var x=t(6835),C=t(8534),Z=(t(8862),t(2066)),I=t(8903),U=t(9755),y=t.n(U),V=t(2008),D=t(351),O=t(2226),T={components:{imageTileComp:O.Z,IonTextarea:Z.g2,IonInput:Z.pK,IonCard:Z.PM,IonCardHeader:Z.Zi,IonCardTitle:Z.Dq,IonCardContent:Z.FN,IonLabel:Z.Q$,IonItem:Z.Ie,IonButton:Z.YG,IonList:Z.q_,IonCheckbox:Z.nz,IonText:Z.yW,IonItemDivider:Z.rH,IonToggle:Z.ho,IonIcon:Z.gu},setup(){return{cameraOutline:I.kuq,trashOutline:I.gtu,searchOutline:I.W6I,documentTextOutline:I.L82}},data(){var e,r;return{other_courier_id:null===(e=this.$route)||void 0===e||null===(r=e.query)||void 0===r?void 0:r.courier_id,courier:null,isAdmin:D.Z.isAdmin(),contractAccepted:0,is_deleted:0,is_disabled:0}},ionViewDidEnter(){var e,r,t,n;this.other_courier_id!=(null===(e=this.$route)||void 0===e||null===(r=e.query)||void 0===r?void 0:r.courier_id)&&(this.other_courier_id=null===(t=this.$route)||void 0===t||null===(n=t.query)||void 0===n?void 0:n.courier_id,this.itemGet())},mounted(){this.itemGet()},computed:{message(){return this.courier.deleted_at?"Анкета не активна и будет удалена. Вы можете еще отменить удаление":1==this.courier.is_disabled?"Анкета не активна и находится на рассмотрении у администратора":null},messageClass(){return this.courier.deleted_at?"deleted":1==this.courier.is_disabled?"disabled":null},imageClass(){var e,r;return 1==(null===(e=this.courier)||void 0===e||null===(r=e.images[0])||void 0===r?void 0:r.is_disabled)?"image_disabled":""}},methods:{itemGet(){var e=this;return(0,C.Z)((0,x.Z)().mark((function r(){return(0,x.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!e.other_courier_id){r.next=6;break}return r.next=3,y().post(V.Z.state.hostname+"Courier/itemGet",{courier_id:e.other_courier_id});case 3:e.courier=r.sent,r.next=9;break;case 6:return r.next=8,D.Z.courier.get();case 8:e.courier=r.sent;case 9:e.itemParseFlags();case 10:case"end":return r.stop()}}),r)})))()},itemParseFlags(){this.courier&&(this.is_deleted=null==this.courier.deleted_at?0:1,this.is_disabled=0==this.courier.is_disabled?0:1)},itemCreate(){var e=this;return(0,C.Z)((0,x.Z)().mark((function r(){return(0,x.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,y().post(V.Z.state.hostname+"Courier/itemCreate");case 3:return r.next=5,D.Z.get("full");case 5:e.courier=D.Z.courier.data,r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](0),e.$flash("Не удалось зарегистрироваться как курьер");case 11:case"end":return r.stop()}}),r,null,[[0,8]])})))()},itemDelete(e){var r=this;return(0,C.Z)((0,x.Z)().mark((function t(){var n;return(0,x.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e?"itemDelete":"itemUnDelete",t.prev=1,t.next=4,y().post(V.Z.state.hostname+"Courier/"+n,{courier_id:r.courier.courier_id});case 4:r.courier.deleted_at=e?1:null,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),r.itemGet();case 10:case"end":return t.stop()}}),t,null,[[1,7]])})))()},itemDisable(e){var r=this;return(0,C.Z)((0,x.Z)().mark((function t(){return(0,x.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r.courier.is_disabled!=e){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,y().post(V.Z.state.hostname+"Courier/itemDisable",{courier_id:r.courier.courier_id,is_disabled:e});case 5:r.courier.is_disabled=e,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](2),r.itemGet();case 11:case"end":return t.stop()}}),t,null,[[2,8]])})))()},uploadImage(e){var r=this;return(0,C.Z)((0,x.Z)().mark((function t(){var n,u;return(0,x.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new FormData,n.append("files[]",e.target.files[0]),n.set("image_holder_id",r.courier.courier_id),u={url:V.Z.state.hostname+"Courier/fileUpload",type:"POST",data:n,processData:!1,contentType:!1},t.prev=4,t.next=7,y().ajax(u);case 7:r.itemGet(),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](4),r.$flash("Не удалось загрузить фото");case 13:case"end":return t.stop()}}),t,null,[[4,10]])})))()},uploadImageTrigger(){y()("#courier_foto_upload").trigger("click")},updateCourier(){var e=this;return(0,C.Z)((0,x.Z)().mark((function r(){var t,n,u;return(0,x.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,y().post(V.Z.state.hostname+"Courier/itemUpdate",JSON.stringify(e.courier));case 3:return r.abrupt("return",r.sent);case 6:r.prev=6,r.t0=r["catch"](0),u=JSON.parse(null===(t=r.t0.responseJSON)||void 0===t||null===(n=t.messages)||void 0===n?void 0:n.error),u.courier_tax_num&&e.$flash("Неверный формат ИНН");case 10:case"end":return r.stop()}}),r,null,[[0,6]])})))()}}},q=t(3744);const $=(0,q.Z)(T,[["render",b],["__scopeId","data-v-13943567"]]);var G=$}}]);
//# sourceMappingURL=7638-legacy.89bea672.js.map