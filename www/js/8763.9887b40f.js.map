{"version":3,"file":"js/8763.9887b40f.js","mappings":"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","sources":["webpack://tezkel/./src/views/admin/AnalyticsView.vue","webpack://tezkel/./src/components/StatisticsRadialPie.vue","webpack://tezkel/./src/components/StatisticsRadialPie.vue?8e3d","webpack://tezkel/./src/components/StatisticsStackedBarTimeline.vue","webpack://tezkel/./src/components/StatisticsStackedBarTimeline.vue?0c3d","webpack://tezkel/./src/components/StatisticsRatingList.vue","webpack://tezkel/./src/components/StatisticsRatingList.vue?0616","webpack://tezkel/./src/views/admin/AnalyticsView.vue?bb80"],"sourcesContent":["<style>\r\n.grid{\r\n    display: grid;\r\n}\r\n.row{\r\n    display: flex;\r\n}\r\n.col{\r\n    width: 100%;\r\n}\r\n#printPage {\r\n    display: none;\r\n}\r\n.print-nonbreakable {\r\n    page-break-after: avoid;\r\n    break-inside: avoid;\r\n}\r\n@media print {\r\n    body #app {\r\n        display: none;\r\n    }\r\n    body #printPage{\r\n        display: contents !important;\r\n    } \r\n}\r\n</style>\r\n<template>\r\n    <base-layout pageTitle=\"Общая статистика\" pageDefaultBackLink=\"/user\">\r\n        <div class=\"horizontalScroller\">\r\n            <ion-chip @click=\"reportPrint()\" color=\"medium\"><ion-icon :src=\"printOutline\"/><ion-label>Напечатать</ion-label></ion-chip> \r\n        </div>\r\n        <div id=\"analysisPage\">\r\n                <div class=\"print-nonbreakable\">\r\n                    <div class=\"ion-padding-horizontal\"> \r\n                        <h5>Статистика действий по заказам</h5>\r\n                        <p>За последние 7 дней</p>\r\n                    </div>\r\n                    <statistics-stacked-bar-timeline  label=\"Воронка заказов\" :data=\"dataset\" :dates=\"totalDates\"/>\r\n                </div>\r\n                <div class=\"horizontalScroller\">\r\n                    <div class=\"grid\">\r\n                        <div class=\"row\">\r\n                            <div class=\"col\">\r\n                                <statistics-radial-pie  v-if=\"datasetPie.pay\"  label=\"Успешные оплаты\" :data=\"datasetPie.pay\"/>\r\n                            </div>\r\n                            <div class=\"col\">\r\n                                <statistics-radial-pie  v-if=\"datasetPie.completed\"  label=\"Отказы продавцов\" :data=\"datasetPie.completed\"/>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"print-nonbreakable\">\r\n                    <div class=\"ion-padding-horizontal\"> \r\n                        <h5>Рейтинг продавцов</h5>\r\n                        <p>За последние 7 дней</p>\r\n                    </div>\r\n                    <div class=\"horizontalScroller\">\r\n                        <div class=\"grid\">\r\n                            <div class=\"row\">\r\n                                <div class=\"col\">\r\n                                    <statistics-rating-list  v-if=\"datasetRatingLists.top_stores\"  label=\"Лучшие продавцы\" :data=\"datasetRatingLists.top_stores\"/>\r\n                                </div>\r\n                                <div class=\"col\">\r\n                                    <statistics-rating-list  v-if=\"datasetRatingLists.antitop_stores\"  label=\"Худшие продавцы\" :data=\"datasetRatingLists.antitop_stores\"/>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"print-nonbreakable\">\r\n                    <div class=\"ion-padding-horizontal\"> \r\n                        <h5>Рейтинг товаров</h5>\r\n                        <p>За последние 7 дней</p>\r\n                    </div>\r\n                    <div class=\"horizontalScroller\">\r\n                        <div class=\"grid\">\r\n                            <div class=\"row\">\r\n                                <div class=\"col\">\r\n                                    <statistics-rating-list  v-if=\"datasetRatingLists.top_products\"  label=\"Лучшие товары\" :data=\"datasetRatingLists.top_products\"/>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"print-nonbreakable\">\r\n                    <div class=\"ion-padding-horizontal\"> \r\n                        <h5>Статистика отказов</h5>\r\n                        <p>За последние 7 дней</p>\r\n                    </div>\r\n                    <statistics-stacked-bar-timeline  label=\"Отказы\" :data=\"datasetRejections\" :dates=\"rejectionDates\" :showTotal=\"true\" :showDynamics=\"true\"/>\r\n                </div>\r\n            </div>\r\n    </base-layout>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  IonChip,\r\n  IonLabel,\r\n  IonIcon\r\n}                             from \"@ionic/vue\";\r\nimport { \r\n  printOutline\r\n}                                   from \"ionicons/icons\";\r\nimport StatisticsRadialPie          from \"@/components/StatisticsRadialPie.vue\";\r\nimport StatisticsStackedBarTimeline from \"@/components/StatisticsStackedBarTimeline.vue\";\r\nimport StatisticsRatingList         from \"@/components/StatisticsRatingList.vue\";\r\n\r\n\r\nimport jQuery                       from \"jquery\";\r\n\r\nexport default {\r\n    components:{\r\n        IonChip,\r\n        IonLabel,\r\n        IonIcon,\r\n        StatisticsStackedBarTimeline,\r\n        StatisticsRadialPie,\r\n        StatisticsRatingList\r\n    },\r\n    setup(){\r\n        return {\r\n        printOutline\r\n        }\r\n    },\r\n    data(){\r\n        return {\r\n            dataset: [],\r\n            totalDates: [],\r\n            datasetPie: {},\r\n            datasetRatingLists: {},\r\n            datasetRejections: [],\r\n            rejectionDates: []\r\n        }\r\n    },\r\n    async mounted (){\r\n        await this.analysisGet()\r\n        await this.topRatingGet()\r\n        this.rejectionAnalysisGet()\r\n    },\r\n    methods:{\r\n        async analysisGet(){\r\n            const response = await jQuery.post(`${this.$heap.state.hostname}Statistics/totalOrderAnalysisGet`, {point_span: 7, point_num: 10})\r\n            response.body.reverse()\r\n            this.parseAnalysisResponse(response.body)\r\n            this.parsePieStatisticResponse(response.body)\r\n            this.totalDates = this.parseDates(response.body)\r\n        },\r\n        async topRatingGet(){\r\n            const raitingResponse = await jQuery.post(`${this.$heap.state.hostname}Statistics/ratingAnalysisGet`, {point_span: 7, point_num: 10})\r\n            this.datasetRatingLists = raitingResponse.body\r\n        },\r\n        async rejectionAnalysisGet(){\r\n            const rejectionResponse = await jQuery.post(`${this.$heap.state.hostname}Statistics/rejectionAnalysisGet`, {point_span: 7, point_num: 10})\r\n            rejectionResponse.body.reverse()\r\n            this.parseRejectionResponse(rejectionResponse.body)\r\n            this.rejectionDates = this.parseDates(rejectionResponse.body)\r\n        },\r\n        parseAnalysisResponse(response){\r\n            const bars = {\r\n                create: 'Начало оформления',\r\n                start: 'Оформление',\r\n                finish: 'Завершение'\r\n            }\r\n            const statuses = {\r\n                success: 'Успех',\r\n                failure: 'Ошибка'\r\n            }\r\n            for(var param in bars){\r\n                for(var status in statuses){\r\n                    let series_item = {\r\n                        name: bars[param] + ' (' + statuses[status] + ')',\r\n                        group: param,\r\n                        data: []\r\n                    }\r\n                    for(var i in response){\r\n                        series_item.data.push(response[i][param+'_'+status]*1)\r\n                    }\r\n                    this.dataset.push(series_item)\r\n                }\r\n            }\r\n        },\r\n        parsePieStatisticResponse(response){\r\n            const bars = {\r\n                pay: 'Оплаты',\r\n            }\r\n            const statuses = {\r\n                success: 'Успех',\r\n                failure: 'Ошибка'\r\n            }\r\n            const lastChunk = response[response.length - 1]\r\n            for(var param in bars){\r\n                this.datasetPie[param] = {\r\n                    labels: [],\r\n                    series: []\r\n                }\r\n                for(var status in statuses){\r\n                    if(lastChunk[param+'_'+status]){\r\n                        this.datasetPie[param].series.push(lastChunk[param+'_'+status]*1)\r\n                        this.datasetPie[param].labels.push(statuses[status])\r\n                    }\r\n                }\r\n            }\r\n            this.datasetPie.completed = {\r\n                series: [lastChunk.finish_success*1 - lastChunk.reject_success*1, lastChunk.reject_success*1],\r\n                labels: ['Исполнен', 'Отказ']\r\n            }\r\n        },\r\n        parseRejectionResponse(response){\r\n            const bars = {\r\n                home: 'Главная',\r\n                store: 'Продавец',\r\n                product: 'Товар',\r\n                location: 'Локация',\r\n                auth: 'Вход'\r\n            }\r\n\r\n            for(var param in bars){\r\n                let series_item = {\r\n                    name: bars[param],\r\n                    data: []\r\n                }\r\n                for(var i in response){\r\n                    series_item.data.push(response[i][param]*1)\r\n                }\r\n                this.datasetRejections.push(series_item)\r\n            }\r\n        },\r\n        parseDates(response){\r\n            let result = [];\r\n            for(var i in response){\r\n                result.unshift(response[i].point_finish)\r\n            }\r\n            return result\r\n        },\r\n        reportPrint(){\r\n            document.getElementById('printPage')?.remove();\r\n            document.body.setAttribute('class', 'print')\r\n            let page = document.getElementById('analysisPage');\r\n            let newElement = document.createElement('DIV');\r\n            newElement.setAttribute('id', 'printPage');\r\n            newElement.innerHTML = page.innerHTML;\r\n            document.body.appendChild(newElement)\r\n            setTimeout(window.print(), 500)\r\n        }\r\n    },\r\n}\r\n</script>","<template>\r\n    <h6 class=\"ion-padding-horizontal\">{{ label }}</h6>\r\n    <apexchart v-if=\"data.series.length > 0\" type=\"pie\"  width=\"380\"  :options=\"chartOptions\" :series=\"series\" ref=\"apexChartElement\"></apexchart >\r\n    <div v-else class=\"ion-padding ion-text-center\">\r\n      <h2>Недостаточно данных</h2>\r\n      <p>для показа статистики</p>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport VueApexCharts          from \"vue3-apexcharts\";\r\n\r\nexport default {\r\n  components: {\r\n    apexchart: VueApexCharts\r\n  },\r\n  props:['label', 'data', 'format', 'color', 'dates'],\r\n  setup(){\r\n    return {}\r\n  },\r\n  data() {\r\n    return {\r\n      series: this.data?.series,\r\n      chartOptions: {\r\n        chart: {\r\n          width: 380,\r\n          type: 'pie',\r\n        },\r\n        colors: ['#00e396', '#ff4560'],\r\n        labels: this.data.labels,\r\n        legend: {\r\n          position: 'bottom'\r\n        }\r\n      },\r\n    };\r\n  },\r\n  \r\n  methods: {\r\n    initChart () {\r\n      if(this.$refs.apexChartElement){ \r\n        this.$refs.apexChartElement.updateSeries(this.data.series);\r\n        this.$refs.apexChartElement.updateOptions({labels: this.data.labels});\r\n      }\r\n    },\r\n\r\n  },\r\n  mounted() {\r\n    setTimeout(() => {\r\n      this.initChart()\r\n    }, 100)  \r\n  },\r\n  updated() {\r\n    setTimeout(() => {\r\n      this.initChart()\r\n    }, 1)  \r\n  }\r\n};\r\n</script>","import { render } from \"./StatisticsRadialPie.vue?vue&type=template&id=5a36cc97\"\nimport script from \"./StatisticsRadialPie.vue?vue&type=script&lang=js\"\nexport * from \"./StatisticsRadialPie.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n    <h6 class=\"ion-padding-horizontal\">\r\n      {{ label }}\r\n      <ion-chip  v-if=\"showDynamics && data.length > 0\" :outline=\"true\"  :color=\"dynamicsData.color\" class=\" ion-no-margin \" style=\"font-size: 12px; border: none; \">\r\n        <ion-icon :icon=\"dynamicsData.icon\"></ion-icon>\r\n        <ion-label>{{ dynamicsData.value }}%</ion-label>\r\n      </ion-chip>\r\n    </h6>\r\n    <apexchart v-if=\"data.length > 0\" type=\"bar\" height=\"370\" :options=\"chartOptions\" :series=\"series\" ref=\"apexChartElement\"></apexchart >\r\n    <div v-else class=\"ion-padding ion-text-center\">\r\n      <h2>Недостаточно данных</h2>\r\n      <p>для показа статистики</p>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  IonChip,\r\n  IonLabel,\r\n  IonIcon\r\n}                             from \"@ionic/vue\";\r\nimport { \r\n  caretUpOutline,\r\n  caretDownOutline,\r\n  caretForwardOutline\r\n}                             from \"ionicons/icons\";\r\nimport VueApexCharts          from \"vue3-apexcharts\";\r\n\r\nexport default {\r\n  components: {\r\n    IonChip,\r\n    IonLabel,\r\n    IonIcon,\r\n    apexchart: VueApexCharts\r\n  },\r\n  props:['label', 'data', 'format', 'color', 'dates', 'showTotal', 'showDynamics'],\r\n  setup(){\r\n    return {\r\n      caretUpOutline,\r\n      caretDownOutline,\r\n      caretForwardOutline\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      value: 0,\r\n      series: this.data,\r\n      chartOptions: {\r\n        chart: {\r\n          type: 'bar',\r\n          height: 350,\r\n          stacked: true,\r\n          zoom: { enabled: false },\r\n          toolbar: { show: false }\r\n        },\r\n        dataLabels: {\r\n          enabled:false\r\n        },\r\n        plotOptions: {\r\n          bar: {\r\n            horizontal: false,\r\n            columnWidth: '35%',\r\n            dataLabels: {\r\n              total: {\r\n                enabled: this.showTotal,\r\n                formatter: function (val, opts) {\r\n                    return \"Всего: \\n\"+val\r\n                },\r\n                style: {\r\n                  fontSize: '13px',\r\n                }\r\n              }\r\n            }\r\n          },\r\n        },\r\n        stroke: {\r\n          show: true,\r\n          width: 2,\r\n          colors: ['transparent']\r\n        },\r\n        xaxis: {\r\n          categories: [],\r\n        },\r\n        fill: {\r\n          opacity: 1\r\n        },\r\n      },\r\n    };\r\n  },\r\n  computed:{\r\n      datesParsed(){\r\n          return this.getDates(this.dates)\r\n      },\r\n      dynamicsData(){\r\n          var sumCurrent = 0;\r\n          var sumPrevious = 0;\r\n          for(var i in this.data){\r\n            if(this.data[i].data.lenght < 2){\r\n              break;\r\n            }\r\n            sumCurrent += this.data[i].data[this.data.length - 1]\r\n            sumPrevious += this.data[i].data[this.data.length - 2]\r\n\r\n          }\r\n          const dynamicsValue = ((100 * ( (sumCurrent - sumPrevious) / ( (sumCurrent + sumPrevious)/2 ) )) || 0 ).toFixed(2) \r\n          var color = \"medium\"\r\n          var icon = caretForwardOutline\r\n          if(dynamicsValue > 0){\r\n            color = 'danger'\r\n            icon = caretUpOutline\r\n          }\r\n          if(dynamicsValue < 0){\r\n            color = 'success'\r\n            icon = caretDownOutline\r\n          }\r\n          return {\r\n            value: dynamicsValue,\r\n            color: color,\r\n            icon: icon\r\n          };\r\n      },\r\n  },\r\n  \r\n  methods: {\r\n    initChart () {\r\n      if(this.$refs.apexChartElement){ \r\n        this.$refs.apexChartElement.updateSeries(this.data);\r\n        this.$refs.apexChartElement.updateOptions({xaxis: {\r\n          categories: this.datesParsed\r\n        }});\r\n      }\r\n    },\r\n    getDates(data) {\r\n      let result = [];\r\n      for(let i = 0; i < data.length; i++){\r\n        result.unshift(new Date(data[i]).toLocaleString(\"ru\", {day: 'numeric', month: 'long'}))\r\n      }\r\n      return result;\r\n    }\r\n\r\n  },\r\n  mounted() {\r\n    setTimeout(() => {\r\n      this.initChart()\r\n    }, 100)  \r\n  },\r\n  updated() {\r\n    setTimeout(() => {\r\n      this.initChart()\r\n    }, 1)  \r\n  }\r\n};\r\n</script>","import { render } from \"./StatisticsStackedBarTimeline.vue?vue&type=template&id=3196860b\"\nimport script from \"./StatisticsStackedBarTimeline.vue?vue&type=script&lang=js\"\nexport * from \"./StatisticsStackedBarTimeline.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<style scoped>\r\n.table_head{\r\n    display:grid;\r\n    grid-template-columns:repeat(3,auto);\r\n    font-size:.8em;\r\n    background-color: #ccc;\r\n    border-radius: 2px;\r\n    margin: 10px;\r\n    width:250px;\r\n    row-gap:1px;\r\n}\r\n.table_head>div{\r\n    padding: 15px;\r\n    background-color: #fcfcfc;\r\n}\r\n.table_head>div:nth-child(even){\r\n    text-align: right;\r\n    color:var(--ion-color-primary);\r\n}\r\n.table{\r\n    display:grid;\r\n    grid-template-columns:repeat(3,auto);\r\n    font-size:.6em;\r\n    margin: 10px;\r\n}\r\n.table_h{\r\n    display:contents;\r\n    font-weight:bold;\r\n    text-align: left;\r\n    white-space: nowrap;\r\n    border-radius:15px;\r\n}\r\n.table_r{\r\n    display:contents;\r\n}\r\n.table_r:nth-child(odd)>div{\r\n    background-color: #fcfcfc;\r\n}\r\n.table_r:hover>div{\r\n    background-color: var(--ion-color-primary-tint);\r\n}\r\n.table_h>div{\r\n    color:var(--ion-color-primary);\r\n    font-weight: bold;\r\n    background-color: var(--ion-color-primary-tint);\r\n    padding: 15px;\r\n    border-bottom: 3px var(--ion-color-primary) solid;\r\n}\r\n.table_r>div{\r\n    padding: 10px;\r\n    border-bottom: 1px #ccc solid;\r\n}\r\n</style>\r\n<template>\r\n    <h6 class=\"ion-padding-horizontal\">{{ label }}</h6>\r\n    <div v-if=\"list.length > 0\" class=\"table\" style=\"overflow-x:auto\">\r\n        <div class=\"table_h\">\r\n            <div>#</div>\r\n            <div>Продавец</div>\r\n            <div>Показы</div>\r\n        </div>\r\n        <div v-for=\"(row,i) in list\" :key=\"i\" class=\"table_r\">\r\n            <div>{{i+1}}</div>\r\n            <div>\r\n                <router-link :to=\"`/catalog/${row.act_group}-${row.act_target_id}`\">\r\n                {{row.act_description}}\r\n                </router-link>\r\n            </div>\r\n            <div>{{row.total}}</div>\r\n        </div>\r\n    </div>\r\n    <div v-else class=\"ion-padding ion-text-center\">\r\n      <h2>Недостаточно данных</h2>\r\n      <p>для показа статистики</p>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n  components: {},\r\n  props:['label', 'data', 'format', 'color', 'dates'],\r\n  setup(){\r\n    return {}\r\n  },\r\n  data() {\r\n    return {\r\n      value: 0,\r\n      list: this.data \r\n    }\r\n  },\r\n  methods: {\r\n  },\r\n};\r\n</script>","import { render } from \"./StatisticsRatingList.vue?vue&type=template&id=2996913c&scoped=true\"\nimport script from \"./StatisticsRatingList.vue?vue&type=script&lang=js\"\nexport * from \"./StatisticsRatingList.vue?vue&type=script&lang=js\"\n\nimport \"./StatisticsRatingList.vue?vue&type=style&index=0&id=2996913c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2996913c\"]])\n\nexport default __exports__","import { render } from \"./AnalyticsView.vue?vue&type=template&id=4161ea99\"\nimport script from \"./AnalyticsView.vue?vue&type=script&lang=js\"\nexport * from \"./AnalyticsView.vue?vue&type=script&lang=js\"\n\nimport \"./AnalyticsView.vue?vue&type=style&index=0&id=4161ea99&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","id","_createBlock","_component_base_layout","pageTitle","pageDefaultBackLink","_createElementVNode","_hoisted_1","_createVNode","_component_ion_chip","onClick","_cache","$event","$options","reportPrint","color","_component_ion_icon","src","$setup","printOutline","_component_ion_label","_hoisted_2","_hoisted_3","_component_statistics_stacked_bar_timeline","label","data","$data","dataset","dates","totalDates","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","datasetPie","pay","_component_statistics_radial_pie","_hoisted_8","completed","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","datasetRatingLists","top_stores","_component_statistics_rating_list","_hoisted_14","antitop_stores","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","top_products","_hoisted_20","datasetRejections","rejectionDates","showTotal","showDynamics","_toDisplayString","$props","series","length","_component_apexchart","type","width","options","chartOptions","ref","_createElementBlock","components","apexchart","VueApexCharts","props","setup","_this$data","this","chart","colors","labels","legend","position","methods","initChart","$refs","apexChartElement","updateSeries","updateOptions","mounted","setTimeout","updated","__exports__","outline","dynamicsData","style","icon","value","height","IonChip","IonLabel","IonIcon","caretUpOutline","caretDownOutline","caretForwardOutline","stacked","zoom","enabled","toolbar","show","dataLabels","plotOptions","bar","horizontal","columnWidth","total","formatter","val","opts","fontSize","stroke","xaxis","categories","fill","opacity","computed","datesParsed","getDates","sumCurrent","sumPrevious","i","lenght","dynamicsValue","toFixed","result","unshift","Date","toLocaleString","day","month","list","_Fragment","_renderList","row","key","_component_router_link","to","act_group","act_target_id","act_description","StatisticsStackedBarTimeline","StatisticsRadialPie","StatisticsRatingList","analysisGet","topRatingGet","rejectionAnalysisGet","response","jQuery","$heap","state","hostname","point_span","point_num","body","reverse","parseAnalysisResponse","parsePieStatisticResponse","parseDates","raitingResponse","rejectionResponse","parseRejectionResponse","bars","create","start","finish","statuses","success","failure","param","status","series_item","name","group","push","lastChunk","finish_success","reject_success","home","store","product","location","auth","point_finish","_document$getElementB","document","getElementById","remove","setAttribute","page","newElement","createElement","innerHTML","appendChild","window","print","render"],"sourceRoot":""}