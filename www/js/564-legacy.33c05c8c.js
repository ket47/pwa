(self["webpackChunktezkel"]=self["webpackChunktezkel"]||[]).push([[564],{7850:function(t,e,r){var i=r(111),n=r(4326),o=r(5112),u=o("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[u])?!!e:"RegExp"==n(t))}},5069:function(t,e,r){"use strict";var i=r(2109),n=r(1702),o=r(3157),u=n([].reverse),l=[1,2];i({target:"Array",proto:!0,forced:String(l)===String(l.reverse())},{reverse:function(){return o(this)&&(this.length=this.length),u(this)}})},3123:function(t,e,r){"use strict";var i=r(2104),n=r(6916),o=r(1702),u=r(7007),l=r(7850),a=r(9670),c=r(4488),s=r(6707),d=r(1530),m=r(7466),p=r(1340),g=r(8173),h=r(1589),_=r(7651),w=r(2261),f=r(2999),v=r(7293),k=f.UNSUPPORTED_Y,y=4294967295,I=Math.min,W=[].push,$=o(/./.exec),b=o(W),x=o("".slice),C=!v((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var r="ab".split(t);return 2!==r.length||"a"!==r[0]||"b"!==r[1]}));u("split",(function(t,e,r){var o;return o="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,r){var o=p(c(this)),u=void 0===r?y:r>>>0;if(0===u)return[];if(void 0===t)return[o];if(!l(t))return n(e,o,t,u);var a,s,d,m=[],g=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),_=0,f=new RegExp(t.source,g+"g");while(a=n(w,f,o)){if(s=f.lastIndex,s>_&&(b(m,x(o,_,a.index)),a.length>1&&a.index<o.length&&i(W,m,h(a,1)),d=a[0].length,_=s,m.length>=u))break;f.lastIndex===a.index&&f.lastIndex++}return _===o.length?!d&&$(f,"")||b(m,""):b(m,x(o,_)),m.length>u?h(m,0,u):m}:"0".split(void 0,0).length?function(t,r){return void 0===t&&0===r?[]:n(e,this,t,r)}:e,[function(e,r){var i=c(this),u=void 0==e?void 0:g(e,t);return u?n(u,e,i,r):n(o,p(i),e,r)},function(t,i){var n=a(this),u=p(t),l=r(o,n,u,i,o!==e);if(l.done)return l.value;var c=s(n,RegExp),g=n.unicode,h=(n.ignoreCase?"i":"")+(n.multiline?"m":"")+(n.unicode?"u":"")+(k?"g":"y"),w=new c(k?"^(?:"+n.source+")":n,h),f=void 0===i?y:i>>>0;if(0===f)return[];if(0===u.length)return null===_(w,u)?[u]:[];var v=0,W=0,$=[];while(W<u.length){w.lastIndex=k?0:W;var C,z=_(w,k?x(u,W):u);if(null===z||(C=I(m(w.lastIndex+(k?W:0)),u.length))===v)W=d(u,W,g);else{if(b($,x(u,v,W)),$.length===f)return $;for(var U=1;U<=z.length-1;U++)if(b($,z[U]),$.length===f)return $;W=v=C}}return b($,x(u,v)),$}]}),!C,k)},7526:function(t,e,r){"use strict";r.d(e,{Z:function(){return h}});var i=r(6252),n=r(3577);const o={class:"blur-image"},u=["src"],l=["src"];function a(t,e,r,a,c,s){const d=(0,i.up)("swiper-slide"),m=(0,i.up)("swiper");return(0,i.wg)(),(0,i.j4)(m,{modules:a.modules,autoplay:{delay:3e3,disableOnInteraction:!1},loop:!0,effect:"fade",style:(0,n.j5)(`height: ${r.imgHeight||"100%"};`)},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.imageList,(e=>((0,i.wg)(),(0,i.j4)(d,{key:e.image_hash},{default:(0,i.w5)((()=>[(0,i._)("div",{class:(0,n.C_)(`${r.mode?r.mode:""} cropper`),style:(0,n.j5)(`height: ${r.imgHeight+"px"||0}`)},[(0,i._)("div",o,[(0,i._)("img",{src:`${t.$heap.state.hostname}image/get.php/${e.image_hash}.${4*r.imgHeight||1200}.${4*r.imgHeight||1200}.webp`},null,8,u)]),(0,i._)("img",{style:(0,n.j5)(`min-height: ${r.imgHeight+"px;"||0};max-height:50vh`),src:`${t.$heap.state.hostname}image/get.php/${e.image_hash}.${4*r.imgHeight||1200}.${4*r.imgHeight||1200}.webp`},null,12,l)],6)])),_:2},1024)))),128))])),_:1},8,["modules","style"])}var c=r(8903),s=r(702),d=r(3181),m={components:{Swiper:d.t,SwiperSlide:d.o},props:["imageList","imgHeight","mode"],setup(){return{modules:[s.pt,s.xW],expand:c.jnR,contract:c.LJB}},data(){return{expanded:!1,vh:0,vw:0}},methods:{maximize(){this.expanded=!0,this.vh=document.getElementsByTagName("ion-content")[0].clientHeight,this.vw=document.getElementsByTagName("ion-content")[0].clientWidth},minimize(){this.expanded=!1,this.vh=document.getElementsByTagName("ion-content")[0].clientHeight,this.vw=document.getElementsByTagName("ion-content")[0].clientWidth}}},p=r(3744);const g=(0,p.Z)(m,[["render",a],["__scopeId","data-v-8c3c7a70"]]);var h=g},564:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return O}});r(4916),r(5306);var i=r(6252),n=r(3577);const o={key:0,class:"product-images"},u={key:0},l=(0,i.Uk)(),a={key:1},c=(0,i.Uk)("Поделиться"),s={key:1},d=(0,i.Uk)("Варианты"),m=(0,i.Uk)(" "),p={key:0,style:{color:"var(--ion-color-danger)","font-size":"0.75em"}},g=(0,i.Uk)("   "),h=(0,i.Uk)("Не заказан"),_=(0,i.Uk)("Итог");function w(t,e,r,w,f,v){var k;const y=(0,i.up)("image-slider-comp"),I=(0,i.up)("ion-label"),W=(0,i.up)("ion-icon"),$=(0,i.up)("ion-button"),b=(0,i.up)("ion-list-header"),x=(0,i.up)("ion-text"),C=(0,i.up)("ion-item"),z=(0,i.up)("ion-list"),U=(0,i.up)("ion-accordion"),j=(0,i.up)("ion-accordion-group"),O=(0,i.up)("ion-img"),S=(0,i.up)("ion-avatar"),q=(0,i.up)("ion-chip"),H=(0,i.up)("cart-add-buttons"),Z=(0,i.up)("ion-textarea"),D=(0,i.up)("base-layout");return(0,i.wg)(),(0,i.j4)(D,{"page-title":null===(k=f.productItem)||void 0===k?void 0:k.product_name,pageDefaultBackLink:"/catalog",cartComponent:w.CartHeader},{default:(0,i.w5)((()=>[f.productItem?((0,i.wg)(),(0,i.iD)("div",o,[(0,i.Wm)(y,{imageList:f.productItem.images,imgHeight:400,mode:"save-aspect-ratio"},null,8,["imageList"])])):(0,i.kq)("",!0),f.productItem?((0,i.wg)(),(0,i.j4)(z,{key:1},{default:(0,i.w5)((()=>{var r;return[(0,i.Wm)(b,null,{default:(0,i.w5)((()=>[(0,i.Wm)(I,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(f.productItem.product_name),1),f.productItem.product_option?((0,i.wg)(),(0,i.iD)("b",u," ["+(0,n.zw)(f.productItem.product_option)+"]",1)):(0,i.kq)("",!0),l,v.isAvailable?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("span",a,"(Нет в наличии)"))])),_:1}),f.productItem.is_writable?((0,i.wg)(),(0,i.j4)($,{key:0,onClick:e[0]||(e[0]=e=>t.$router.push("/catalog/product-edit-"+f.productId))},{default:(0,i.w5)((()=>[(0,i.Wm)(W,{color:"primary",src:w.settingsOutline},null,8,["src"])])),_:1})):(0,i.kq)("",!0)])),_:1}),f.productItem.product_description?((0,i.wg)(),(0,i.j4)(j,{key:0,style:{width:"100%"}},{default:(0,i.w5)((()=>[(0,i.Wm)(U,null,{default:(0,i.w5)((()=>[(0,i.Wm)(C,{slot:"header",lines:"none"},{default:(0,i.w5)((()=>[(0,i.Wm)(x,{class:"product-description",color:"medium",innerHTML:v.itemDescription},null,8,["innerHTML"])])),_:1}),(0,i.Wm)(z,{slot:"content"},{default:(0,i.w5)((()=>[(0,i.Wm)(C,{lines:"none"})])),_:1})])),_:1})])),_:1})):(0,i.kq)("",!0),(0,i.Wm)(C,{lines:"none",onClick:e[1]||(e[1]=e=>t.$router.push("/catalog/store-"+f.productItem.store_id)),button:""},{default:(0,i.w5)((()=>{var e,r;return[null!==(e=f.productItem)&&void 0!==e&&null!==(r=e.store)&&void 0!==r&&r.avatar?((0,i.wg)(),(0,i.j4)(S,{key:0,slot:"start"},{default:(0,i.w5)((()=>{var e,r;return[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(null===(e=f.productItem)||void 0===e||null===(r=e.store)||void 0===r?void 0:r.avatar,(e=>((0,i.wg)(),(0,i.j4)(O,{src:`${t.$heap.state.hostname}image/get.php/${e.image_hash}.200.200.webp`,key:e.image_id},null,8,["src"])))),128))]})),_:1})):(0,i.kq)("",!0),(0,i.Wm)(x,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(f.productItem.store.store_name),1)])),_:1}),v.categories&&v.categories[0]?((0,i.wg)(),(0,i.j4)(x,{key:1,slot:"end",color:"medium"},{default:(0,i.w5)((()=>[(0,i.Uk)("#"+(0,n.zw)(v.categories[0].group_name),1)])),_:1})):(0,i.kq)("",!0)]})),_:1}),(0,i.Wm)(C,{lines:"none"},{default:(0,i.w5)((()=>[(0,i.kq)("",!0),(0,i.Wm)(q,{onClick:e[4]||(e[4]=t=>v.itemShare()),color:"medium"},{default:(0,i.w5)((()=>[(0,i.Wm)(W,{src:w.shareSocialOutline},null,8,["src"]),(0,i.Wm)(I,null,{default:(0,i.w5)((()=>[c])),_:1})])),_:1})])),_:1}),(0,i.Wm)(C,{lines:"none"}),null!==(r=f.productItem)&&void 0!==r&&r.options?((0,i.wg)(),(0,i.iD)("div",s,[(0,i.Wm)(C,{lines:"none"},{default:(0,i.w5)((()=>[(0,i.Wm)(W,{color:"medium",src:w.layersOutline,slot:"start"},null,8,["src"]),(0,i.Wm)(I,{color:"medium"},{default:(0,i.w5)((()=>[d])),_:1})])),_:1}),(0,i.Wm)(C,{lines:"none"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(f.productItem.options,(e=>((0,i.wg)(),(0,i.j4)(q,{outline:!0,onClick:r=>t.$router.replace(`/catalog/product-${e.product_id}`),color:"primary",key:e.product_id},{default:(0,i.w5)((()=>[(0,i.Wm)(I,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(e.product_option),1)])),_:2},1024),m,e.product_final_price>0?((0,i.wg)(),(0,i.j4)(I,{key:0},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(e.product_final_price)+(0,n.zw)(t.$heap.state.currencySign),1)])),_:2},1024)):(0,i.kq)("",!0)])),_:2},1032,["onClick"])))),128))])),_:1})])):(0,i.kq)("",!0),f.productItem.product_price!=f.productItem.product_final_price?((0,i.wg)(),(0,i.j4)(C,{key:2,lines:"none"},{default:(0,i.w5)((()=>[(0,i.Wm)(W,{slot:"start",src:w.giftOutline,color:"medium"},null,8,["src"]),(0,i.Wm)(I,{color:"medium"},{default:(0,i.w5)((()=>[(0,i.Uk)("Акция до "+(0,n.zw)(v.promoFinish),1)])),_:1}),(0,i.Wm)(I,{slot:"end",color:"success",style:{"font-size":"1.2em"}},{default:(0,i.w5)((()=>[(0,i.Uk)("-"+(0,n.zw)(v.promoPercent)+"%",1)])),_:1})])),_:1})):(0,i.kq)("",!0),(0,i.Wm)(C,{lines:"none"},{default:(0,i.w5)((()=>[(0,i.Wm)(W,{slot:"start",src:w.pricetagOutline,color:"medium"},null,8,["src"]),"порция"==f.productItem.product_unit?((0,i.wg)(),(0,i.j4)(I,{key:0,color:"medium"},{default:(0,i.w5)((()=>[(0,i.Uk)("Цена за "+(0,n.zw)(v.weight_in_gramms)+"г",1)])),_:1})):"порция мл"==f.productItem.product_unit?((0,i.wg)(),(0,i.j4)(I,{key:1,color:"medium"},{default:(0,i.w5)((()=>[(0,i.Uk)("Цена за "+(0,n.zw)(v.weight_in_gramms)+"мл",1)])),_:1})):((0,i.wg)(),(0,i.j4)(I,{key:2,color:"medium"},{default:(0,i.w5)((()=>[(0,i.Uk)("Цена за "+(0,n.zw)(f.productItem.product_unit),1)])),_:1})),(0,i.Wm)(I,{slot:"end",color:"primary",style:{"font-size":"1.2em"}},{default:(0,i.w5)((()=>[f.productItem.product_price!=f.productItem.product_final_price?((0,i.wg)(),(0,i.iD)("span",p,[(0,i._)("s",null,(0,n.zw)(f.productItem.product_price)+(0,n.zw)(t.$heap.state.currencySign),1),g])):(0,i.kq)("",!0),(0,i.Uk)(" "+(0,n.zw)(f.productItem.product_final_price)+(0,n.zw)(t.$heap.state.currencySign),1)])),_:1})])),_:1}),(0,i.Wm)(C,{lines:"none"},{default:(0,i.w5)((()=>[(0,i.Wm)(W,{slot:"start",src:w.cartOutline,color:"medium"},null,8,["src"]),v.inCart?((0,i.wg)(),(0,i.j4)(I,{key:0,color:"medium"},{default:(0,i.w5)((()=>[(0,i.Uk)("В корзине ("+(0,n.zw)(f.productItem.product_unit)+")",1)])),_:1})):((0,i.wg)(),(0,i.j4)(I,{key:1,color:"medium"},{default:(0,i.w5)((()=>[h])),_:1})),(0,i.Wm)(H,{slot:"end",buttonLayout:"horizontal",display:"inline",productItem:f.productItem},null,8,["productItem"])])),_:1}),v.inCart?((0,i.wg)(),(0,i.j4)(C,{key:3,lines:"none"},{default:(0,i.w5)((()=>[(0,i.Wm)(W,{slot:"start",src:w.walletOutline,color:"medium"},null,8,["src"]),(0,i.Wm)(I,{color:"medium"},{default:(0,i.w5)((()=>[_])),_:1}),(0,i.Wm)(I,{slot:"end",color:"medium",style:{"font-size":"1.2em"}},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(v.inCart)+(0,n.zw)(t.$heap.state.currencySign),1)])),_:1})])),_:1})):(0,i.kq)("",!0),null!=v.inCartComment?((0,i.wg)(),(0,i.j4)(C,{key:4,lines:"none"},{default:(0,i.w5)((()=>[(0,i.Wm)(W,{slot:"start",src:w.chatboxEllipsesOutline,color:"medium"},null,8,["src"]),(0,i.Wm)(Z,{value:v.inCartComment,onChange:e[5]||(e[5]=t=>v.cartCommentUpdate(t.target.value)),placeholder:"заметка для продавца"},null,8,["value"])])),_:1})):(0,i.kq)("",!0)]})),_:1})):(0,i.kq)("",!0)])),_:1},8,["page-title","cartComponent"])}var f=r(8534),v=(r(3123),r(5069),r(9755)),k=r.n(v),y=r(2008),I=r(8903),W=r(3716),$=r(7526),b=r(3991),x=r(9052),C=r(7782),z={components:{ImageSliderComp:$.Z,CartAddButtons:b.Z,IonTextarea:W.g2,IonListHeader:W.yh,IonText:W.yW,IonIcon:W.gu,IonItem:W.Ie,IonChip:W.hM,IonLabel:W.Q$,IonList:W.q_,IonAccordion:W.We,IonAccordionGroup:W.eh,IonButton:W.YG,IonAvatar:W.BJ,IonImg:W.Xz},setup(){return{CartHeader:x.Z,compassOutline:I.gmD,cartOutline:I.Ox0,pricetagOutline:I.TuG,giftOutline:I._$o,walletOutline:I.S5P,chatboxEllipsesOutline:I._Pt,settingsOutline:I.C$N,layersOutline:I.Y1P,shareSocialOutline:I.Zej,thumbsUpSharp:I._DJ,thumbsDownSharp:I.sbE}},data(){return{productId:this.$route.params.id,productItem:null,is_loading:0}},mounted(){this.getProduct()},computed:{categories(){var t,e,r,i,n,o;if(null===(t=this.productItem)||void 0===t||null===(e=t.member_of_groups)||void 0===e||!e.group_ids)return[];const u=null===(r=this.productItem)||void 0===r||null===(i=r.member_of_groups)||void 0===i?void 0:i.group_ids.split(","),l=null===(n=this.productItem)||void 0===n||null===(o=n.member_of_groups)||void 0===o?void 0:o.group_names.split(",");let a=[];for(let c in u)a.push({group_id:u[c],group_name:l[c]});return a},promoFinish(){try{return this.productItem.product_promo_finish.split(" ")[0].split("-").reverse().join(".")}catch(t){return null}},promoPercent(){return Math.round(100-this.productItem.product_final_price/this.productItem.product_price*100)},inCart(){const t=C.Z.cart.entryGet(this.productId);return t?t.data.entry_quantity*t.data.entry_price:0},inCartComment(){var t;const e=C.Z.cart.entryGet(this.productId);return e?null!==(t=e.data.entry_comment)&&void 0!==t?t:"":null},isAvailable(){return 1!=this.productItem.is_counted||this.productItem.product_quantity-this.productItem.product_quantity_reserved>0},weight_in_gramms(){return 1e3*this.productItem.product_weight},itemDescription(){var t,e;return null===(t=this.productItem)||void 0===t||null===(e=t.product_description)||void 0===e?void 0:e.replace(/<\/?[^>]+(>|$)/g,"").replace(/[\n\r]/g,"<br>")}},methods:{getProduct(){var t=this;return(0,f.Z)((function*(){if(1!=t.is_loading){try{t.is_loading=1,t.productItem=yield k().post(y.Z.state.hostname+"Product/itemGet",{product_id:t.productId}),t.productItem.reaction={reaction_id:33}}catch(i){var e,r;const n=null===i||void 0===i||null===(e=i.responseJSON)||void 0===e||null===(r=e.messages)||void 0===r?void 0:r.error;switch(n){case"notfound":t.$flash("Товар не найден"),t.$router.replace("/catalog");break}return!1}t.is_loading=0}}))()},cartCommentUpdate(t){const e={product_id:this.productId,entry_comment:t};C.Z.cart.entryUpdate(e)},itemShare(){var t=this;return(0,f.Z)((function*(){try{const e=location.href;if(navigator.share){const r={title:`${t.$heap.state.settings.app_title} ${t.productItem.product_name}`,text:t.productItem.product_description,url:e};yield navigator.share(r)}else yield navigator.clipboard.writeText(e),t.$alert("Теперь вы можете поделиться ей с друзьями в социальных сетях или мессенджерах.","Ссылка на страницу скопирована")}catch(e){}}))()},itemReact(t){var e=this;return(0,f.Z)((function*(){try{yield k().post(`${y.Z.state.hostname}Reaction/itemCreate`,t)}catch(n){var r,i;const t=null===n||void 0===n||null===(r=n.responseJSON)||void 0===r||null===(i=r.messages)||void 0===i?void 0:i.error;switch(t){case"notfound":e.$flash("Нужно купить товар, чтобы его оценить");break}return!1}}))()},itemReactionLike(){var t=this;return(0,f.Z)((function*(){const e={tagQuery:`product:${t.productId}`,is_like:1};yield t.itemReact(e)}))()},itemReactionDislike(){var t=this;return(0,f.Z)((function*(){const e={tagQuery:`product:${t.productId}`,is_dislike:1};yield t.itemReact(e)}))()}}},U=r(3744);const j=(0,U.Z)(z,[["render",w]]);var O=j}}]);
//# sourceMappingURL=564-legacy.33c05c8c.js.map