"use strict";(self["webpackChunktezkel"]=self["webpackChunktezkel"]||[]).push([[3165],{5043:function(t,e,n){n.r(e),n.d(e,{default:function(){return G}});var u=n(6252),r=n(3577),i={key:0},o=(0,u.Uk)("Найденные товары"),l={style:{"font-size":"1.1em"}},a={style:{display:"grid","grid-template-columns":"repeat(auto-fit, 150px)"}},d={key:1},c=(0,u.Uk)("Найденные товары"),s={style:{display:"grid","grid-template-columns":"repeat(auto-fit, 150px)"}},p={key:2},m=(0,u.Uk)("Ничего не найдено."),f=(0,u.Uk)("Возможно у нас нет того что вы ищите или вы находитель за пределами зоны доставки");function h(t,e,n,h,_,w){var y=(0,u.up)("ion-searchbar"),v=(0,u.up)("ion-title"),W=(0,u.up)("ion-img"),g=(0,u.up)("ion-thumbnail"),k=(0,u.up)("ion-note"),I=(0,u.up)("ion-item"),x=(0,u.up)("ion-card-header"),C=(0,u.up)("store-opened-indicator"),b=(0,u.up)("product-item"),G=(0,u.up)("ion-card-content"),$=(0,u.up)("ion-card"),D=(0,u.up)("ion-skeleton-text"),q=(0,u.up)("ion-chip"),T=(0,u.up)("ion-card-title"),Z=(0,u.up)("base-layout");return(0,u.wg)(),(0,u.j4)(Z,{"page-title":"Поиск товаров"},{default:(0,u.w5)((function(){return[(0,u.Wm)(y,{class:"search-container",modelValue:_.query,"onUpdate:modelValue":e[0]||(e[0]=function(t){return _.query=t}),onInput:e[1]||(e[1]=function(t){return w.delayedListGet()}),placeholder:"начните искать"},null,8,["modelValue"]),_.found?((0,u.wg)(),(0,u.iD)("div",i,[(0,u.Wm)(v,null,{default:(0,u.w5)((function(){return[o]})),_:1}),((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)(_.found.product_matches,(function(e){return(0,u.wg)(),(0,u.j4)($,{key:e.store_id},{default:(0,u.w5)((function(){return[(0,u.Wm)(x,null,{default:(0,u.w5)((function(){return[(0,u.Wm)(I,{detail:"",button:"",onClick:function(n){return t.$router.push(`/search/store-${e.store_id}`)},lines:"full"},{default:(0,u.w5)((function(){return[(0,u.Wm)(g,{slot:"start"},{default:(0,u.w5)((function(){return[(0,u.Wm)(W,{style:{"border-radius":"10px"},src:`${t.$heap.state.hostname}image/get.php/${e.image_hash}.150.150.webp`},null,8,["src"])]})),_:2},1024),(0,u._)("p",l,(0,r.zw)(null===e||void 0===e?void 0:e.store_name),1),(0,u.Wm)(k,{slot:"helper"},{default:(0,u.w5)((function(){return[(0,u.Uk)((0,r.zw)(e.store_description),1)]})),_:2},1024)]})),_:2},1032,["onClick"])]})),_:2},1024),(0,u.Wm)(G,null,{default:(0,u.w5)((function(){return[(0,u._)("div",null,[(0,u.Wm)(C,{storeItem:e},null,8,["storeItem"])]),(0,u._)("div",a,[((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)(e.matches,(function(t){return(0,u.wg)(),(0,u.iD)("div",{key:t.product_id},[(0,u.Wm)(b,{productItem:t,storeName:e.store_name},null,8,["productItem","storeName"])])})),128))])]})),_:2},1024)]})),_:2},1024)})),128))])):null==_.found?((0,u.wg)(),(0,u.iD)("div",d,[(0,u.Wm)(v,null,{default:(0,u.w5)((function(){return[c]})),_:1}),(0,u.Wm)($,null,{default:(0,u.w5)((function(){return[(0,u.Wm)(x,null,{default:(0,u.w5)((function(){return[(0,u.Wm)(I,{detail:"",lines:"full"},{default:(0,u.w5)((function(){return[(0,u.Wm)(g,{slot:"start"},{default:(0,u.w5)((function(){return[(0,u.Wm)(D,{style:{width:"50px",height:"50px"},animated:""})]})),_:1}),(0,u.Wm)(D,{style:{width:"300px",height:"30px"},animated:""}),(0,u.Wm)(k,{slot:"helper"},{default:(0,u.w5)((function(){return[(0,u.Wm)(D,{style:{width:"300px"}})]})),_:1})]})),_:1})]})),_:1}),(0,u.Wm)(G,null,{default:(0,u.w5)((function(){return[(0,u.Wm)(q,null,{default:(0,u.w5)((function(){return[(0,u.Wm)(D,{style:{width:"100px"}})]})),_:1}),(0,u._)("div",s,[((0,u.wg)(),(0,u.iD)(u.HY,null,(0,u.Ko)([1,2,3,4],(function(t){return(0,u._)("div",{key:t},[(0,u.Wm)(D,{style:{width:"120px",height:"120px"},animated:""}),(0,u.Wm)(D,{style:{width:"120px",height:"30px"},animated:""})])})),64))])]})),_:1})]})),_:1})])):((0,u.wg)(),(0,u.iD)("div",p,[(0,u.Wm)($,{color:"light"},{default:(0,u.w5)((function(){return[(0,u.Wm)(x,null,{default:(0,u.w5)((function(){return[(0,u.Wm)(T,null,{default:(0,u.w5)((function(){return[m]})),_:1})]})),_:1}),(0,u.Wm)(G,null,{default:(0,u.w5)((function(){return[f]})),_:1})]})),_:1})]))]})),_:1})}var _=n(6835),w=n(8534),y=n(8292),v=n(9755),W=n.n(v),g=n(4405),k=n(8336),I=n(6181),x={components:{StoreOpenedIndicator:I.Z,IonSearchbar:y.VI,IonTitle:y.wd,IonImg:y.Xz,IonThumbnail:y.Bs,IonNote:y.uN,IonItem:y.Ie,IonCard:y.PM,IonCardContent:y.FN,IonCardTitle:y.Dq,IonCardHeader:y.Zi,IonSkeletonText:y.CK,IonChip:y.hM,ProductItem:k.Z},data(){return{query:this.$route.query.q||"",found:null}},ionViewDidEnter(){this.delayedListGet()},created(){var t=this;this.delayedListGet();var e=this;this.$topic.on("userGet",(function(n){t.found||e.listGet()}))},methods:{listGet(){var t=this;return(0,w.Z)((0,_.Z)().mark((function e(){var n,u;return(0,_.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n={query:t.query,in_products:1,in_stores:0,location_id:t.locMainGet()},n.location_id){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,W().get(t.$heap.state.hostname+"Search/listGet",n);case 6:u=e.sent,t.found=t.storeListCalculate(u),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](3),t.found=null;case 13:case"end":return e.stop()}}),e,null,[[3,10]])})))()},storeListCalculate(t){var e;if(null===(e=t.product_matches)||void 0===e||!e.length)return null;for(var n in t.product_matches)t.product_matches[n].deliveryTime=g.Z.deliveryTimeCalculate(t.product_matches[n].distance,t.product_matches[n].store_time_preparation);return t},locMainGet(){return this.$heap.state.user.location_main?this.$heap.state.user.location_main.location_id:null},delayedListGet(){clearTimeout(this.clock);var t=this;this.clock=setTimeout((function(){t.listGet()}),200)}}},C=n(3744);const b=(0,C.Z)(x,[["render",h],["__scopeId","data-v-a2c630cc"]]);var G=b}}]);
//# sourceMappingURL=3165-legacy.03f4a4ba.js.map