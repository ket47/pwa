(self["webpackChunktezkel"]=self["webpackChunktezkel"]||[]).push([[4747],{9587:function(e,t,r){var o=r(614),i=r(111),s=r(7674);e.exports=function(e,t,r){var n,l;return s&&o(n=t.constructor)&&n!==r&&i(l=n.prototype)&&l!==r.prototype&&s(e,l),e}},7850:function(e,t,r){var o=r(111),i=r(4326),s=r(5112),n=s("match");e.exports=function(e){var t;return o(e)&&(void 0!==(t=e[n])?!!t:"RegExp"==i(e))}},2626:function(e,t,r){var o=r(3070).f;e.exports=function(e,t,r){r in e||o(e,r,{configurable:!0,get:function(){return t[r]},set:function(e){t[r]=e}})}},4706:function(e,t,r){var o=r(6916),i=r(2597),s=r(7976),n=r(7066),l=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in l||i(e,"flags")||!s(l,e)?t:o(n,e)}},4603:function(e,t,r){var o=r(9781),i=r(7854),s=r(1702),n=r(4705),l=r(9587),u=r(8880),a=r(8006).f,d=r(7976),c=r(7850),p=r(1340),m=r(4706),g=r(2999),_=r(2626),h=r(8052),w=r(7293),f=r(2597),v=r(9909).enforce,y=r(6340),I=r(5112),k=r(9441),b=r(7168),x=I("match"),W=i.RegExp,S=W.prototype,$=i.SyntaxError,z=s(S.exec),C=s("".charAt),D=s("".replace),G=s("".indexOf),q=s("".slice),j=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,U=/a/g,P=/a/g,Z=new W(U)!==U,L=g.MISSED_STICKY,H=g.UNSUPPORTED_Y,T=o&&(!Z||L||k||b||w((function(){return P[x]=!1,W(U)!=U||W(P)==P||"/a/i"!=W(U,"i")}))),O=function(e){for(var t,r=e.length,o=0,i="",s=!1;o<=r;o++)t=C(e,o),"\\"!==t?s||"."!==t?("["===t?s=!0:"]"===t&&(s=!1),i+=t):i+="[\\s\\S]":i+=t+C(e,++o);return i},E=function(e){for(var t,r=e.length,o=0,i="",s=[],n={},l=!1,u=!1,a=0,d="";o<=r;o++){if(t=C(e,o),"\\"===t)t+=C(e,++o);else if("]"===t)l=!1;else if(!l)switch(!0){case"["===t:l=!0;break;case"("===t:z(j,q(e,o+1))&&(o+=2,u=!0),i+=t,a++;continue;case">"===t&&u:if(""===d||f(n,d))throw new $("Invalid capture group name");n[d]=!0,s[s.length]=[d,a],u=!1,d="";continue}u?d+=t:i+=t}return[i,s]};if(n("RegExp",T)){for(var F=function(e,t){var r,o,i,s,n,a,g=d(S,this),_=c(e),h=void 0===t,w=[],f=e;if(!g&&_&&h&&e.constructor===F)return e;if((_||d(S,e))&&(e=e.source,h&&(t=m(f))),e=void 0===e?"":p(e),t=void 0===t?"":p(t),f=e,k&&"dotAll"in U&&(o=!!t&&G(t,"s")>-1,o&&(t=D(t,/s/g,""))),r=t,L&&"sticky"in U&&(i=!!t&&G(t,"y")>-1,i&&H&&(t=D(t,/y/g,""))),b&&(s=E(e),e=s[0],w=s[1]),n=l(W(e,t),g?this:S,F),(o||i||w.length)&&(a=v(n),o&&(a.dotAll=!0,a.raw=F(O(e),r)),i&&(a.sticky=!0),w.length&&(a.groups=w)),e!==f)try{u(n,"source",""===f?"(?:)":f)}catch(y){}return n},M=a(W),Y=0;M.length>Y;)_(F,W,M[Y++]);S.constructor=F,F.prototype=S,h(i,"RegExp",F,{constructor:!0})}y("RegExp")},4405:function(e,t,r){"use strict";r(4916),r(5306);var o=r(2008);const i={deliveryCalculate(e){if(!e.locations||!e.locations[0]||!e.locations[0].distance)return null;const t=e.locations[0].distance,r=e.store_time_preparation||0;return i.deliveryTimeCalculate(t,r)},deliveryTimeCalculate(e,t){var r;t=parseInt(null!==(r=t)&&void 0!==r?r:o.Z.getters.settings.delivery.timePreparationDefault);const i=parseInt(o.Z.getters.settings.delivery.timeDelta),s=parseInt(o.Z.getters.settings.delivery.speed),n=5*Math.round(e/s*60/5)+t,l=n>i?n-i:n,u=l+i;return{time:n,timeMin:l,timeMax:u}},render(e,t){for(let r in t)e=e.replace(`{{${r}}}`,t[r]);return e=e.replace(/{{\.}}/,"-"),e}};t["Z"]=i},2927:function(e,t,r){"use strict";r.d(t,{Z:function(){return g}});var o=r(6252),i=r(3577);const s=e=>((0,o.dD)("data-v-0e00b8d4"),e=e(),(0,o.Cn)(),e),n={class:"slide-title"},l=s((()=>(0,o._)("div",{id:"hcat_widget_grid"},null,-1)));function u(e,t,r,s,u,a){const d=(0,o.up)("ion-img"),c=(0,o.up)("ion-thumbnail"),p=(0,o.up)("swiper-slide"),m=(0,o.up)("swiper");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(m,{id:"hcat_widget_grid","slides-per-view":4.5,"space-between":10},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.groupList,(t=>((0,o.wg)(),(0,o.j4)(p,{key:t.group_id,onClick:()=>e.onClick(t.group_id)},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{style:{width:"70px",height:"70px"}},{default:(0,o.w5)((()=>[t.image_hash?((0,o.wg)(),(0,o.j4)(d,{key:0,style:{"border-radius":"10px",border:"1px solid #ddd"},src:`${e.$heap.state.hostname}image/get.php/${t.image_hash}.150.150.webp`},null,8,["src"])):(0,o.kq)("",!0)])),_:2},1024),(0,o._)("div",n,(0,i.zw)(t.group_name),1)])),_:2},1032,["onClick"])))),128))])),_:1},8,["slides-per-view"]),l],64)}var a=r(8292),d=r(3181),c=(0,o.aZ)({components:{IonImg:a.Xz,IonThumbnail:a.Bs,Swiper:d.t,SwiperSlide:d.o},props:["groupList","onClick"]}),p=r(3744);const m=(0,p.Z)(c,[["render",u],["__scopeId","data-v-0e00b8d4"]]);var g=m},4966:function(e,t,r){"use strict";r.d(t,{Z:function(){return h}});var o=r(6252),i=r(3577);const s={key:0,style:{position:"relative"}},n=["src"],l=["src"];function u(e,t,r,u,a,d){const c=(0,o.up)("ion-icon"),p=(0,o.up)("ion-fab-button"),m=(0,o.up)("ion-fab"),g=(0,o.up)("swiper-slide"),_=(0,o.up)("swiper");return a.expanded?((0,o.wg)(),(0,o.iD)("div",s,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.imageList,(t=>((0,o.wg)(),(0,o.iD)("div",{key:t.image_hash,style:{border:"2px solid var(--ion-color-primary)"}},[(0,o._)("img",{src:`${e.$heap.state.hostname}image/get.php/${t.image_hash}.1000.1000.webp`},null,8,n)])))),128)),(0,o.Wm)(m,{horizontal:"end",vertical:"top",slot:"fixed"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{color:"light"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{src:u.contract,size:"large",onClick:t[0]||(t[0]=e=>d.minimize())},null,8,["src"])])),_:1})])),_:1})])):((0,o.wg)(),(0,o.j4)(_,{key:1,modules:u.modules,autoplay:{delay:3e3,disableOnInteraction:!1},loop:!0,effect:"fade",style:(0,i.j5)(`height: ${r.imgHeight||"100%"};`)},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.imageList,(t=>((0,o.wg)(),(0,o.j4)(g,{key:t.image_hash},{default:(0,o.w5)((()=>[(0,o._)("div",{class:(0,i.C_)(`${r.mode?r.mode:""} cropper`),style:(0,i.j5)(`height: ${r.imgHeight+"px"||0};`)},[(0,o._)("img",{style:(0,i.j5)(`min-height: ${r.imgHeight+"px;"||0}`),src:`${e.$heap.state.hostname}image/get.php/${t.image_hash}.${4*r.imgHeight||1200}.${4*r.imgHeight||1200}.webp`},null,12,l)],6)])),_:2},1024)))),128))])),_:1},8,["modules","style"]))}var a=r(8903),d=r(8292),c=r(702),p=r(3181),m={components:{Swiper:p.t,SwiperSlide:p.o,IonFab:d.IJ,IonFabButton:d.W4,IonIcon:d.gu},props:["imageList","imgHeight","mode"],setup(){return{modules:[c.pt,c.xW],expand:a.jnR,contract:a.LJB}},data(){return{expanded:!1,vh:0,vw:0}},methods:{maximize(){this.expanded=!0,this.vh=document.getElementsByTagName("ion-content")[0].clientHeight,this.vw=document.getElementsByTagName("ion-content")[0].clientWidth},minimize(){this.expanded=!1,this.vh=document.getElementsByTagName("ion-content")[0].clientHeight,this.vw=document.getElementsByTagName("ion-content")[0].clientWidth}}},g=r(3744);const _=(0,g.Z)(m,[["render",u],["__scopeId","data-v-57ad0950"]]);var h=_},6761:function(e,t,r){"use strict";r.d(t,{Z:function(){return C}});var o=r(6252),i=r(3577);const s=e=>((0,o.dD)("data-v-1c5866bc"),e=e(),(0,o.Cn)(),e),n=["id"],l={key:0,style:{position:"relative"}},u=s((()=>(0,o._)("div",{class:"product_list_item_img",style:{position:"absolute",border:"#9ac solid 2px",top:"-8px",left:"8px","z-index":"-1"}},null,-1))),a=s((()=>(0,o._)("div",{class:"product_list_item_img",style:{position:"absolute",border:"#cde solid 2px",top:"-4px",left:"4px","z-index":"-1"}},null,-1))),d=[u,a],c={key:0,style:{position:"relative",top:"-50%"}},p={style:{height:"5em",overflow:"hidden"}},m={key:0,style:{color:"var(--ion-color-danger)"}},g=(0,o.Uk)("   "),_={style:{color:"var(--ion-color-primary)"}},h={style:{"font-weight":"bold",margin:"0","font-size":"1.4em"}},w={style:{"font-weight":"bold",margin:"0","font-size":"1.2em"}},f=(0,o.Uk)(" / "),v={key:1,style:{color:"var(--ion-color-medium)"}},y={key:2,style:{color:"var(--ion-color-medium)"}},I={key:3,style:{color:"var(--ion-color-medium)"}};function k(e,t,r,s,u,a){const k=(0,o.up)("cart-add-buttons"),b=(0,o.up)("ion-img"),x=(0,o.up)("ion-icon");return(0,o.wg)(),(0,o.iD)("div",{class:(0,i.C_)(a.item_class),id:`product_list_item${r.productItem.product_id}`},[r.productItem.options?((0,o.wg)(),(0,o.iD)("div",l,d)):(0,o.kq)("",!0),(0,o._)("div",{class:"product_list_item_img",style:(0,i.j5)(r.productItem.options?"border:#def solid 2px;":"")},["0"!=r.productItem.is_disabled||r.productItem.deleted_at?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",c,[(0,o.Wm)(k,{buttonLayout:"vertical",productItem:r.productItem},null,8,["productItem"])])),(0,o.Wm)(b,{class:"blur-image",src:`${e.$heap.state.hostname}image/get.php/${r.productItem.image_hash}.200.200.webp`},null,8,["src"]),(0,o.Wm)(b,{onClick:t[0]||(t[0]=t=>e.$router.push(`/catalog/product-${r.productItem.product_id}`)),src:`${e.$heap.state.hostname}image/get.php/${r.productItem.image_hash}.200.200.webp`},null,8,["src"]),r.productItem.options?((0,o.wg)(),(0,o.j4)(x,{key:1,src:s.layersOutline,color:"primary",size:"large",style:{position:"absolute",bottom:"3px",right:"3px"}},null,8,["src"])):(0,o.kq)("",!0)],4),(0,o._)("div",p,[(0,o._)("div",{style:{color:"black",height:"3em","font-size":"1em",overflow:"hidden","line-height":"1.4em","font-weight":"bold"},onClick:t[1]||(t[1]=t=>e.$router.push(`/catalog/product-${r.productItem.product_id}`))},(0,i.zw)(r.productItem.product_name),1),r.productItem.product_price!=r.productItem.product_final_price?((0,o.wg)(),(0,o.iD)("span",m,[(0,o._)("s",null,(0,i.zw)(r.productItem.product_price)+(0,i.zw)(e.$heap.state.currencySign),1),g])):(0,o.kq)("",!0),(0,o._)("span",_,[(0,o._)("b",h,(0,i.zw)(r.productItem.product_final_price),1),(0,o._)("b",w,(0,i.zw)(e.$heap.state.currencySign),1)]),f,"порция"==r.productItem.product_unit?((0,o.wg)(),(0,o.iD)("span",v,(0,i.zw)(a.weight_in_gramms)+"г",1)):"порция мл"==r.productItem.product_unit?((0,o.wg)(),(0,o.iD)("span",y,(0,i.zw)(a.weight_in_gramms)+"мл",1)):((0,o.wg)(),(0,o.iD)("span",I,(0,i.zw)(r.productItem.product_unit),1))])],10,n)}var b=r(8292),x=r(3991),W=r(8903),S={components:{IonImg:b.Xz,IonIcon:b.gu,CartAddButtons:x.Z},props:["productItem"],setup(){return{layersOutline:W.Y1P}},computed:{item_class(){return this.productItem.deleted_at?"deleted":this.productItem.product_final_price!=this.productItem.product_price?"promo":1==this.productItem.is_disabled?"disabled":1==this.productItem.is_counted&&this.productItem.product_quantity-this.productItem.product_quantity_reserved<1?"absent":""},weight_in_gramms(){return 1e3*this.productItem.product_weight}}},$=r(3744);const z=(0,$.Z)(S,[["render",k],["__scopeId","data-v-1c5866bc"]]);var C=z},6181:function(e,t,r){"use strict";r.d(t,{Z:function(){return y}});var o=r(6252),i=r(3577);const s=(0,o.Uk)(" ◉ "),n={key:0},l=(0,o.Uk)(" ◉ "),u=(0,o.Uk)("Временно не работает"),a={key:1},d=(0,o.Uk)(" ◉ "),c={key:2},p=(0,o.Uk)(" ◉ "),m=(0,o.Uk)("Закрыт");function g(e,t,r,g,_,h){const w=(0,o.up)("ion-text"),f=(0,o.up)("ion-chip");return 1==r.storeItem.is_opened?((0,o.wg)(),(0,o.j4)(f,{key:0,color:"medium"},{default:(0,o.w5)((()=>[(0,o._)("label",null,[(0,o.Wm)(w,{color:"success"},{default:(0,o.w5)((()=>[s])),_:1}),(0,o.Uk)("Открыт до "+(0,i.zw)(r.storeItem.store_time_closes)+":00",1)])])),_:1})):((0,o.wg)(),(0,o.j4)(f,{key:1,color:"medium"},{default:(0,o.w5)((()=>[0==r.storeItem.is_working?((0,o.wg)(),(0,o.iD)("label",n,[(0,o.Wm)(w,{color:"medium"},{default:(0,o.w5)((()=>[l])),_:1}),u])):r.storeItem.store_next_time_opens>0?((0,o.wg)(),(0,o.iD)("label",a,[(0,o.Wm)(w,{color:"danger"},{default:(0,o.w5)((()=>[d])),_:1}),(0,o.Uk)("Закрыт до "+(0,i.zw)(r.storeItem.store_next_time_opens)+":00",1)])):((0,o.wg)(),(0,o.iD)("label",c,[(0,o.Wm)(w,{color:"danger"},{default:(0,o.w5)((()=>[p])),_:1}),m]))])),_:1}))}var _=r(8292),h=r(8903),w={props:["storeItem"],components:{IonChip:_.hM,IonText:_.yW},setup(){return{ellipse:h.Hpm}}},f=r(3744);const v=(0,f.Z)(w,[["render",g]]);var y=v},4747:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return J}});var o=r(6252),i=r(3577);const s=e=>((0,o.dD)("data-v-1ac56118"),e=e(),(0,o.Cn)(),e),n={class:"store-info-container"},l={key:0,slot:"start",class:"avatar-container"},u={class:"avatar"},a=["src"],d=(0,o.Uk)("подробнее"),c=(0,o.Uk)("ИНН"),p=(0,o.Uk)("Телефон"),m={style:{"scrollbar-width":"none","overflow-x":"scroll",display:"flex"}},g={key:0,class:"delivery-variant"},_=s((()=>(0,o._)("br",null,null,-1))),h={key:1,class:"delivery-variant"},w=s((()=>(0,o._)("br",null,null,-1))),f={key:2,class:"delivery-variant"},v=(0,o.Uk)("Самовывоз"),y=s((()=>(0,o._)("br",null,null,-1))),I=s((()=>(0,o._)("b",null,"0₽",-1))),k={key:0,class:"group-fixed-block hidden-block"},b={key:1},x=s((()=>(0,o._)("h4",{style:{margin:"8px 16px"}},[(0,o._)("b",null,"Категории")],-1))),W={style:{margin:"0"}},S=(0,o.Uk)("добавить "),$=(0,o.Uk)(" К сожалению, в "),z=(0,o.Uk)(" по запросу "),C=(0,o.Uk)(" ничего не найдено. "),D=(0,o.Uk)("Сбросить фильтр");function G(e,t,r,s,G,q){var j;const U=(0,o.up)("image-slider-comp"),P=(0,o.up)("ion-text"),Z=(0,o.up)("ion-icon"),L=(0,o.up)("ion-item"),H=(0,o.up)("ion-label"),T=(0,o.up)("ion-list"),O=(0,o.up)("ion-accordion"),E=(0,o.up)("ion-accordion-group"),F=(0,o.up)("store-opened-indicator"),M=(0,o.up)("ion-col"),Y=(0,o.up)("ion-chip"),A=(0,o.up)("ion-row"),B=(0,o.up)("ion-grid"),R=(0,o.up)("ion-segment-button"),Q=(0,o.up)("ion-segment"),V=(0,o.up)("ion-searchbar"),K=(0,o.up)("group-list"),N=(0,o.up)("product-list"),J=(0,o.up)("swiper-slide"),X=(0,o.up)("swiper"),ee=(0,o.up)("base-layout");return(0,o.wg)(),(0,o.j4)(ee,{pageDefaultBackLink:"/catalog","page-class":"store-page","page-title":null!==(j=this.storeItem.store_name)&&void 0!==j?j:"Магазин"},{default:(0,o.w5)((()=>{var r,j;return[(0,o._)("div",null,[(0,o._)("div",n,[(0,o.Wm)(U,{imageList:G.storeItem.images,imgHeight:300,mode:"crop-to-fit"},null,8,["imageList"]),(0,o.Wm)(T,{class:"store-info"},{default:(0,o.w5)((()=>[(0,o.Wm)(L,{lines:"none"},{default:(0,o.w5)((()=>[G.storeItem.avatarImage?((0,o.wg)(),(0,o.iD)("div",l,[(0,o._)("div",u,[(0,o._)("img",{src:e.$heap.state.hostname+"image/get.php/"+G.storeItem.avatarImage+".200.200.webp"},null,8,a)])])):(0,o.kq)("",!0),(0,o.Wm)(P,{style:{"font-size":"1.2em"}},{default:(0,o.w5)((()=>[(0,o._)("b",null,(0,i.zw)(G.storeItem.store_name),1)])),_:1}),G.storeItem.is_writable?((0,o.wg)(),(0,o.j4)(Z,{key:1,slot:"end",color:"primary",onClick:t[0]||(t[0]=t=>e.$router.push(`/catalog/store-edit-${G.storeItem.store_id}`)),icon:s.settingsOutline,style:{"font-size":"24px"}},null,8,["icon"])):(0,o.kq)("",!0)])),_:1}),(0,o.Wm)(E,{style:{width:"100%"}},{default:(0,o.w5)((()=>[(0,o.Wm)(O,null,{default:(0,o.w5)((()=>[(0,o.Wm)(L,{slot:"header",lines:"none"},{default:(0,o.w5)((()=>[G.storeItem.store_description?((0,o.wg)(),(0,o.j4)(P,{key:0,class:"store-description",color:"medium"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(G.storeItem.store_description),1)])),_:1})):((0,o.wg)(),(0,o.j4)(P,{key:1,color:"medium"},{default:(0,o.w5)((()=>[d])),_:1}))])),_:1}),(0,o.Wm)(T,{slot:"content"},{default:(0,o.w5)((()=>[G.storeItem.store_company_name?((0,o.wg)(),(0,o.j4)(L,{key:0,lines:"none"},{default:(0,o.w5)((()=>[(0,o.Wm)(P,null,{default:(0,o.w5)((()=>[(0,o._)("b",null,(0,i.zw)(G.storeItem.store_company_name),1)])),_:1})])),_:1})):(0,o.kq)("",!0),G.storeItem.store_tax_num?((0,o.wg)(),(0,o.j4)(L,{key:1,lines:"none"},{default:(0,o.w5)((()=>[(0,o.Wm)(H,{color:"medium"},{default:(0,o.w5)((()=>[c])),_:1}),(0,o.Wm)(P,{color:"dark"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(G.storeItem.store_tax_num),1)])),_:1})])),_:1})):(0,o.kq)("",!0),G.storeItem.store_phone?((0,o.wg)(),(0,o.j4)(L,{key:2,lines:"none"},{default:(0,o.w5)((()=>[(0,o.Wm)(H,{color:"medium"},{default:(0,o.w5)((()=>[p])),_:1}),(0,o.Wm)(P,{color:"dark"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(G.storeItem.store_phone),1)])),_:1})])),_:1})):(0,o.kq)("",!0),G.storeItem.locations?((0,o.wg)(),(0,o.j4)(L,{key:3,lines:"none"},{default:(0,o.w5)((()=>[(0,o.Wm)(P,{color:"dark"},{default:(0,o.w5)((()=>{var e;return[(0,o.Uk)((0,i.zw)(null===(e=G.storeItem.locations)||void 0===e?void 0:e[0].location_address),1)]})),_:1})])),_:1})):(0,o.kq)("",!0)])),_:1})])),_:1})])),_:1}),(0,o.Wm)(B,null,{default:(0,o.w5)((()=>[(0,o.Wm)(A,{class:"ion-justify-content-between"},{default:(0,o.w5)((()=>[(0,o.Wm)(M,{size:"auto"},{default:(0,o.w5)((()=>[(0,o.Wm)(F,{storeItem:G.storeItem},null,8,["storeItem"])])),_:1}),(0,o.Wm)(M,{size:"auto"},{default:(0,o.w5)((()=>[G.storeItem.store_group_names?((0,o.wg)(),(0,o.j4)(Y,{key:0,color:"medium",background:"transparent"},{default:(0,o.w5)((()=>[(0,o._)("label",null,(0,i.zw)(G.storeItem.store_group_names),1)])),_:1})):(0,o.kq)("",!0)])),_:1})])),_:1})])),_:1})])),_:1}),(0,o._)("div",m,[G.storeItem.delivery_cost>0?((0,o.wg)(),(0,o.iD)("div",g,[(0,o._)("div",null,[(0,o.Wm)(H,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Доставит "+(0,i.zw)(e.$heap.getters.settings.app_title),1)])),_:1}),_,null!==(r=G.storeItem)&&void 0!==r&&null!==(j=r.deliveryTime)&&void 0!==j&&j.timeMin?((0,o.wg)(),(0,o.j4)(P,{key:0},{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(G.storeItem.deliveryTime.timeMin)+"-"+(0,i.zw)(G.storeItem.deliveryTime.timeMax)+"мин",1)])),_:1})):(0,o.kq)("",!0)]),(0,o._)("div",null,[G.storeItem.delivery_cost>0?((0,o.wg)(),(0,o.j4)(P,{key:0},{default:(0,o.w5)((()=>[(0,o._)("b",null,(0,i.zw)(G.storeItem.delivery_cost)+"₽",1)])),_:1})):(0,o.kq)("",!0)])])):(0,o.kq)("",!0),1==G.storeItem.store_delivery_allow?((0,o.wg)(),(0,o.iD)("div",h,[(0,o._)("div",null,[(0,o.Wm)(H,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Доставит "+(0,i.zw)(G.storeItem.member_of_groups.group_names),1)])),_:1}),w]),(0,o._)("div",null,[G.storeItem.delivery_cost>0?((0,o.wg)(),(0,o.j4)(P,{key:0},{default:(0,o.w5)((()=>[(0,o._)("b",null,(0,i.zw)(G.storeItem.store_delivery_cost)+"₽",1)])),_:1})):(0,o.kq)("",!0)])])):(0,o.kq)("",!0),1==G.storeItem.store_pickup_allow?((0,o.wg)(),(0,o.iD)("div",f,[(0,o._)("div",null,[(0,o.Wm)(H,null,{default:(0,o.w5)((()=>[v])),_:1}),y]),(0,o._)("div",null,[(0,o.Wm)(P,null,{default:(0,o.w5)((()=>[I])),_:1})])])):(0,o.kq)("",!0)])]),q.storeGroupsFiltered?((0,o.wg)(),(0,o.iD)("div",k,[(0,o.Wm)(Q,{modelValue:G.groupSelectedParentId,"onUpdate:modelValue":t[1]||(t[1]=e=>G.groupSelectedParentId=e),scrollable:"",style:{"scrollbar-width":"none"},class:"groups-container"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(q.storeGroupsFiltered,(e=>((0,o.wg)(),(0,o.j4)(R,{key:e.group_id,value:e.group_id,onClick:t=>q.groupSelectParent(e.group_id,1),ref_for:!0,ref:"group-tab-"+e.group_id},{default:(0,o.w5)((()=>[(0,o.Wm)(H,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(e.group_name),1)])),_:2},1024)])),_:2},1032,["value","onClick"])))),128))])),_:1},8,["modelValue"])])):(0,o.kq)("",!0),(0,o.Wm)(V,{class:"search-container",modelValue:G.searchQuery,"onUpdate:modelValue":t[2]||(t[2]=e=>G.searchQuery=e),placeholder:"Поиск у этого продавца"},null,8,["modelValue"]),q.storeGroupsFiltered?((0,o.wg)(),(0,o.iD)("div",b,[x,(0,o.Wm)(K,{groupList:q.storeGroupsFiltered,onClick:e=>{q.groupSelectParent(e,!0)}},null,8,["groupList","onClick"]),(0,o.Wm)(X,{pager:"true",initialSlide:0,speed:400,watchSlidesProgress:!1,grabCursor:!0,touchStartForcePreventDefault:!0,slidesPerView:1.1,pagination:!1,centeredSlides:!1,class:"product-list-slider",onSlideChange:t[3]||(t[3]=e=>q.groupSliderChanged(e))},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(q.storeGroupsFiltered,(e=>((0,o.wg)(),(0,o.j4)(J,{key:e.group_id},{default:(0,o.w5)((()=>[(0,o.Wm)(B,{class:"product-list"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.children,(e=>((0,o.wg)(),(0,o.j4)(A,{key:e.group_id,ref_for:!0,ref:"group-"+e.group_id,"data-group_id":e.group_id},{default:(0,o.w5)((()=>[(0,o.Wm)(M,{class:"group-title",size:"12"},{default:(0,o.w5)((()=>[(0,o._)("h5",W,[(0,o.Uk)((0,i.zw)(e.group_name)+" ",1),1==G.storeItem.is_writable?((0,o.wg)(),(0,o.j4)(Y,{key:0,onClick:t=>q.productItemCreate(e.group_id)},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{src:s.addOutline},null,8,["src"]),S])),_:2},1032,["onClick"])):(0,o.kq)("",!0)])])),_:2},1024),(0,o.Wm)(M,{size:"12"},{default:(0,o.w5)((()=>[(0,o.Wm)(N,{productList:q.storeProductsFiltered[e.group_id]},null,8,["productList"])])),_:2},1024)])),_:2},1032,["data-group_id"])))),128))])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["slidesPerView"])])):G.searchQuery?((0,o.wg)(),(0,o.j4)(H,{key:2},{default:(0,o.w5)((()=>[$,(0,o._)("b",null,(0,i.zw)(G.storeItem.store_name),1),z,(0,o._)("b",null,'"'+(0,i.zw)(G.searchQuery)+'"',1),C,(0,o.Wm)(Y,{onClick:t[4]||(t[4]=e=>this.searchQuery=null)},{default:(0,o.w5)((()=>[D])),_:1})])),_:1})):(0,o.kq)("",!0)])]})),_:1},8,["page-title"])}r(6699),r(3948),r(4603),r(4916),r(5306);var q=r(8292),j=r(702),U=r(3181),P=r(8903),Z=r(4966),L=r(2927);const H={class:"product_list_widget_grid"};function T(e,t,r,i,s,n){const l=(0,o.up)("product-item");return(0,o.wg)(),(0,o.iD)("div",H,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.productList,(e=>((0,o.wg)(),(0,o.iD)("div",{key:e.product_id},[(0,o.Wm)(l,{productItem:e},null,8,["productItem"])])))),128))])}var O=r(6761),E={props:["productList"],components:{ProductItem:O.Z}},F=r(3744);const M=(0,F.Z)(E,[["render",T],["__scopeId","data-v-fcf4f40a"]]);var Y=M,A=r(6181),B=r(9755),R=r.n(B),Q=r(2008),V=r(4405),K={components:{IonText:q.yW,IonCol:q.wI,IonIcon:q.gu,IonRow:q.Nd,IonGrid:q.jY,IonLabel:q.Q$,IonSegmentButton:q.GO,IonSegment:q.cJ,IonChip:q.hM,IonSearchbar:q.VI,IonAccordion:q.We,IonAccordionGroup:q.eh,IonList:q.q_,IonItem:q.Ie,ImageSliderComp:Z.Z,StoreOpenedIndicator:A.Z,Swiper:U.t,SwiperSlide:U.o,GroupList:L.Z,ProductList:Y},setup(){return{search:P.yC4,settingsOutline:P.C$N,rocketOutline:P.G$D,compassOutline:P.gmD,addOutline:P.s6O,slideModules:[j.pt]}},data(){return{storeId:this.$route.params.id,query:this.$route.query,searchQuery:null,storeItem:[],productList:[],storeGroups:null,groupSelectedParentId:-1,sliderMaxHeight:500,offsetModificator:150,can_reload_at:0}},computed:{storeGroupsFiltered(){if(!this.storeProductsFiltered||!this.storeGroups)return null;const e=Object.keys(this.storeProductsFiltered);let t=null;for(let r in this.storeGroups)for(let o in this.storeGroups[r].children){const i=this.storeGroups[r].children[o];e.includes(o)&&(t||(t={}),t[r]||(t[r]={group_id:this.storeGroups[r].group_id,group_name:this.storeGroups[r].group_name,image_hash:this.storeGroups[r].image_hash,children:[]}),t[r].children.push(i))}return t},storeProductsFiltered(){let e=1,t={};for(let d of this.productList){var r,o,i,s;if(this.searchQuery)try{var n,l,u;const e=new RegExp(this.searchQuery.replace(/^[\w\d\s]/,"").replace(/\s/g,".*"),"im");if((null===(n=d.product_name)||void 0===n||!n.match(e))&&(null===(l=d.product_code)||void 0===l||!l.match(e))&&(null===(u=d.product_description)||void 0===u||!u.match(e)))continue}catch(a){}if(this.storeGroups)if(!t[null!==(o=d.group_id)&&void 0!==o?o:0])t[null!==(i=d.group_id)&&void 0!==i?i:0]=[],t[null!==(s=d.group_id)&&void 0!==s?s:0].category_order=e++;t[null!==(r=d.group_id)&&void 0!==r?r:0].push(d)}return t}},methods:{async itemGet(){const e=Date.now();if(!(this.can_reload_at>e)){this.can_reload_at=e+1e4;try{const e=await R().post(`${Q.Z.state.hostname}Store/itemGet`,{store_id:this.storeId,distance_include:1});this.storeItem=this.itemPrepare(e),this.storeId=e.store_id,this.groupTreeGet({store_id:this.storeId}),Q.Z.commit("setCurrentStore",this.storeItem)}catch(o){var t,r;const e=null===o||void 0===o||null===(t=o.responseJSON)||void 0===t||null===(r=t.messages)||void 0===r?void 0:r.error;switch(e){case"notfound":this.$flash("Продавец не найден"),this.$router.replace("/catalog");break}return!1}}},itemPrepare(e){var t;return e.member_of_groups.group_names&&(e.store_group_names=e.member_of_groups.group_names),e.deliveryTime={},null!==(t=e.locations[0])&&void 0!==t&&t.distance&&(e.deliveryTime=V.Z.deliveryTimeCalculate(e.locations[0].distance,e.store_time_preparation)),e.avatarImage="",e.avatar.length>0&&(e.avatarImage=e.avatar[0].image_hash),e},async productListGet(e={}){if(e.store_id=this.storeId,e.is_active=1,e.name_query&&""==e.name_query)return void this.groupTreeGet({store_id:this.storeId});e.limit=200;let t={};try{t=await R().post(Q.Z.state.hostname+"Product/listGet",e)}catch(o){}this.productList=t.product_list,this.groupOtherAdd();let r=this;setTimeout((()=>{r.groupSelect()}),0)},async productItemCreate(e){try{const t={store_id:this.storeId,product_name:"Новый товар",product_price:1e3,product_promo_price:1e3},r=await R().post(`${Q.Z.state.hostname}Product/itemCreate`,t);e&&await R().post(`${Q.Z.state.hostname}Product/itemUpdateGroup`,{product_id:r,group_id:e,is_joined:1}),this.$router.push(`/catalog/product-edit-${r}`),this.$flash("Добавлен 'Новый товар'")}catch(t){this.$flash("Не удалось создать товар")}},async groupTreeGet(e){try{const t=await R().get(`${Q.Z.state.hostname}Product/groupTreeGet`,{store_id:e.store_id});let r=[];for(let e in t)r[t[e].order]=t[e];this.storeGroups=r,this.productListGet()}catch(t){}},groupOtherAdd(){if(this.storeProductsFiltered[0]){const e=this.storeGroups.filter((e=>"other"==e.group_id));if(e)return;this.storeGroups.push({group_id:"other",group_name:"Другое",image_hash:"",children:{0:{group_id:0,group_name:"другое",group_parent_id:0,group_path:"",image_hash:""}}})}},groupSelect(){let e=this.query.parent_group_id,t=this.query.sub_group_id;if(t)e:for(let i in this.storeGroups)for(let r in this.storeGroups[i].children)if(r==t){e=i;break e}var r;e||(e=null===(r=this.storeGroups[0])||void 0===r?void 0:r.group_id);const o=!1;this.groupSelectParent(e,o)},groupSelectParent(e,t=!1){if(this.groupSelectedParentId==e||!document.querySelector(".product-list-slider"))return;this.groupSelectedParentId=e;const r=document.querySelector(".product-list-slider").swiper,o=this.storeGroups.findIndex((t=>t.group_id==e));o>=0&&(r.slideTo(o,100,!1),this.groupSliderAdjustHeight())},groupSliderChanged(e){const t=e.activeIndex,r=this.storeGroups[t].group_id;this.groupSelectParent(r,1)},groupSliderAdjustHeight(){var e;const t=null===(e=document.querySelector(".product-list-slider .swiper-slide.swiper-slide-active"))||void 0===e?void 0:e.scrollHeight;document.querySelector(".product-list-slider.swiper").style.maxHeight=t>0?t+"px":""}},mounted(){this.query=this.$route.query,this.itemGet()},watch:{$route(e){this.storeId=e.params.id}}};const N=(0,F.Z)(K,[["render",G],["__scopeId","data-v-1ac56118"]]);var J=N}}]);
//# sourceMappingURL=4747.dca3fae8.js.map