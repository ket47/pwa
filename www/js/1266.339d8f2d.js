"use strict";(self["webpackChunktezkel"]=self["webpackChunktezkel"]||[]).push([[1266],{1266:function(e,o,t){t.r(o),t.d(o,{default:function(){return _}});var l=t(641);const n={class:"ion-padding"};function r(e,o,t,r,a,i){const u=(0,l.g2)("ion-icon"),s=(0,l.g2)("ion-input"),d=(0,l.g2)("ion-item"),c=(0,l.g2)("ion-textarea"),m=(0,l.g2)("ion-list"),p=(0,l.g2)("ion-button"),_=(0,l.g2)("base-layout");return(0,l.uX)(),(0,l.Wv)(_,{"page-title":"Создать промокод"},{default:(0,l.k6)(()=>{var t;return[(0,l.bF)(m,null,{default:(0,l.k6)(()=>[(0,l.bF)(d,null,{default:(0,l.k6)(()=>[(0,l.bF)(u,{icon:r.textOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,l.bF)(s,{modelValue:a.promo_code,"onUpdate:modelValue":o[0]||(o[0]=e=>a.promo_code=e),type:"text",placeholder:"буквы и цифры",label:"Промокод","label-placement":"stacked",required:""},null,8,["modelValue"])]),_:1}),(0,l.bF)(d,null,{default:(0,l.k6)(()=>[(0,l.bF)(u,{icon:r.giftOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,l.bF)(s,{modelValue:a.promo_sum,"onUpdate:modelValue":o[1]||(o[1]=e=>a.promo_sum=e),placeholder:"сумма скидки",label:"Сумма","label-placement":"stacked",ref:"promo_sum",type:"numeric",inputmode:"numeric",maxlength:"4",pattern:"\\d{4}"},null,8,["modelValue"])]),_:1}),(0,l.bF)(d,null,{default:(0,l.k6)(()=>[(0,l.bF)(u,{icon:r.bookOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,l.bF)(c,{modelValue:a.promo_description,"onUpdate:modelValue":o[2]||(o[2]=e=>a.promo_description=e),placeholder:"описание промокода",label:"Описание (не обязательно)","label-placement":"stacked",name:"promo_description",onChange:o[3]||(o[3]=o=>e.save("promo_description",o.target.value))},null,8,["modelValue"])]),_:1})]),_:1}),(0,l.Lk)("div",n,[a.promo_sum>0?((0,l.uX)(),(0,l.Wv)(p,{key:0,expand:"block",onClick:o[4]||(o[4]=e=>i.itemCreate())},{default:(0,l.k6)(()=>o[7]||(o[7]=[(0,l.eW)("Создать промокод")])),_:1,__:[7]})):(null===(t=a.promo_code)||void 0===t?void 0:t.length)>3?((0,l.uX)(),(0,l.Wv)(p,{key:2,expand:"block",color:"light",onClick:o[6]||(o[6]=o=>e.$refs.promo_sum.$el.setFocus())},{default:(0,l.k6)(()=>o[9]||(o[9]=[(0,l.eW)("Заполнить сумму")])),_:1,__:[9]})):((0,l.uX)(),(0,l.Wv)(p,{key:1,expand:"block",color:"light",onClick:o[5]||(o[5]=o=>e.$refs.promo_sum.$el.setFocus())},{default:(0,l.k6)(()=>o[8]||(o[8]=[(0,l.eW)("Заполнить код")])),_:1,__:[8]}))])]}),_:1})}var a=t(5634),i=t(5480),u=t(2311),s=t.n(u),d=t(8701),c={components:{IonList:a.nf,IonItem:a.uz,IonInput:a.$w,IonTextarea:a.nc,IonButton:a.Jm,IonIcon:a.iq},setup(){return{trashOutline:i.P1A,giftOutline:i.Lsq,textOutline:i.kr7,bookOutline:i.AiO,walletOutline:i.eF1}},data(){return{promo_code:null,promo_description:null,promo_sum:null}},methods:{async itemCreate(){try{const e={promo_code:this.promo_code,promo_sum:this.promo_sum,promo_description:this.promo_description},o=await s().post(`${this.$heap.state.hostname}PromoCode/itemCreate`,e);o&&this.$router.replace(`/admin/promo-code-edit-${o}`)}catch(t){var e,o;const l=null===t||void 0===t||null===(e=t.responseJSON)||void 0===e||null===(o=e.messages)||void 0===o?void 0:o.error;return null!==l&&void 0!==l&&l.includes("post_content")?this.$flash("Описание слишком короткое"):null!==l&&void 0!==l&&l.includes("post_title")?this.$flash("Заголовок слишком короткий"):this.$flash("Изменение не сохранено"),!1}d.A.get()},makeid(e){for(var o="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",l=t.length,n=0;n<e;n++)o+=t.charAt(Math.floor(Math.random()*l));return o}},created(){this.promo_code=this.makeid(5)}},m=t(6262);const p=(0,m.A)(c,[["render",r]]);var _=p}}]);
//# sourceMappingURL=1266.339d8f2d.js.map