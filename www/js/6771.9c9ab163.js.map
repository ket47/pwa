{"version":3,"file":"js/6771.9c9ab163.js","mappings":"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","sources":["webpack://Tezkel/./src/views/StoreEditProducts.vue","webpack://Tezkel/./src/views/StoreEditProducts.vue?d725"],"sourcesContent":["<style scoped>\r\n.deleted{\r\n    border: 3px red solid;\r\n}\r\n.disabled{\r\n    border: 3px gray solid;\r\n}\r\n.absent img{\r\n    filter: grayscale(1);\r\n}\r\n.hidden{\r\n    border: 3px orange solid;\r\n}\r\n</style>\r\n<template>\r\n    <base-layout :pageDefaultBackLink=\"`/catalog/store-edit-${storeId}`\" page-title=\"Управление товарами\">\r\n        <!-- <ion-segment :scrollable=\"true\" v-model=\"moderationType\" @ionChange=\"listTypeChanged($event)\">\r\n            <ion-segment-button value=\"products\">\r\n                Товары\r\n            </ion-segment-button>\r\n        </ion-segment> -->\r\n        <div>\r\n            <!-- <ion-item>\r\n                <ion-select v-model=\"item_type\" value=\"active\" label=\"Тип элементов\" label-placement=\"stacked\" @ionChange=\"listReload()\">\r\n                    <ion-select-option value=\"active\">активные</ion-select-option>\r\n                    <ion-select-option value=\"disabled\">выключенные</ion-select-option>\r\n                    <ion-select-option value=\"deleted\">удаленные</ion-select-option>\r\n                </ion-select>\r\n            </ion-item> -->\r\n            <ion-searchbar placeholder=\"Фильтр\" v-model=\"filter\"/>\r\n\r\n\r\n\r\n            <ion-popover :is-open=\"editor_opened\" @didDismiss=\"editor_opened = 0\">\r\n                <ion-content style=\"--ion-padding\">\r\n                <ion-item>\r\n                    <ion-input :placeholder=\"editor_placeholder\" v-model=\"editor_value\" style=\"--border-width:1px;--border-radius:10px\" />\r\n                    <ion-button slot=\"end\">OK</ion-button>\r\n                </ion-item>\r\n                </ion-content>\r\n            </ion-popover>\r\n\r\n            <ion-list v-if=\"listComputed.length>0\">\r\n                <div v-for=\"item in listComputed\" :key=\"item.item_id\">\r\n                <ion-item lines=\"none\"  @click=\"itemEdit(item)\" button detail=\"\">\r\n                    <ion-thumbnail slot=\"start\" :class=\"item.class\" style=\"border-radius:10px\">\r\n                        <ion-img :src=\"`${$heap.state.hostname}image/get.php/${item.image_hash}.150.150.webp`\"/>\r\n                    </ion-thumbnail>\r\n                    <ion-text>\r\n                        {{item.item_name}}\r\n                        <span v-if=\"item.is_counted==1 && item.product_quantity*1==0\"> (нет в наличии)</span>\r\n                        <span v-if=\"item.is_hidden==1\"> (скрыт)</span>\r\n                    </ion-text>\r\n                </ion-item>\r\n                <ion-item lines=\"full\">\r\n                    <ion-chip v-if=\"item.is_hidden==1\" @click=\"itemUpdate(item.product_id,'is_hidden',0)\" color=\"warning\">\r\n                        <ion-icon :src=\"eyeOffOutline\"/>&nbsp;&nbsp;\r\n                    </ion-chip>\r\n                    <ion-chip v-else @click=\"itemUpdate(item.product_id,'is_hidden',1)\" color=\"medium\">\r\n                        <ion-icon :src=\"eyeOffOutline\"/>&nbsp;&nbsp;\r\n                    </ion-chip>\r\n\r\n\r\n                    <ion-chip v-if=\"item.is_counted==1\" :color=\"item.product_quantity>0?'success':'danger'\" @click=\"itemPrompt(item,'product_quantity','введите остаток')\">\r\n                        <ion-icon :src=\"calculatorOutline\"/>\r\n                        <ion-label>{{item.product_quantity||0}}{{item.product_unit}}</ion-label>\r\n                    </ion-chip>\r\n                    <ion-chip v-else @click=\"itemUpdate(item.product_id,'is_counted',1)\" color=\"medium\">\r\n                        <ion-icon :src=\"calculatorOutline\"/><ion-icon :src=\"infiniteOutline\"/>&nbsp;&nbsp;\r\n                    </ion-chip>\r\n\r\n                    <ion-chip color=\"primary\" @click=\"itemPrompt(item,'product_price','введите цену')\">{{item.product_price}}{{$heap.state.currencySign}}</ion-chip>                    \r\n                </ion-item>\r\n                </div>\r\n            </ion-list>\r\n            <ion-list v-else-if=\"is_loading==1\">\r\n                <ion-item v-for=\"item in [1,2,3]\" :key=\"item\" button detail>\r\n                    <ion-thumbnail slot=\"start\" style=\"background-color:lightgray\"></ion-thumbnail>\r\n                    <ion-skeleton-text animated></ion-skeleton-text>\r\n                </ion-item>\r\n            </ion-list>\r\n            <ion-card v-else color=\"light\">\r\n                <ion-card-content>\r\n                Ничего не найдено\r\n                </ion-card-content>\r\n            </ion-card>\r\n            <ion-infinite-scroll @ionInfinite=\"listLoadMore($event)\" id=\"moderation-infinite-scroll\">\r\n                <ion-infinite-scroll-content loading-spinner=\"bubbles\" loading-text=\"Loading more data...\"></ion-infinite-scroll-content>\r\n            </ion-infinite-scroll>\r\n        </div>\r\n    </base-layout>\r\n</template>\r\n<script>\r\nimport {\r\n  IonInfiniteScroll, \r\n  IonInfiniteScrollContent,\r\n  IonItem,\r\n  IonList,\r\n  IonImg,\r\n  modalController,\r\n  alertController,\r\n  IonThumbnail,\r\n  IonText,\r\n  IonSkeletonText,\r\n  IonCard,\r\n  IonCardContent,\r\n  IonSearchbar,\r\n  IonChip,\r\n  IonIcon,\r\n\r\n  IonPopover,\r\n  IonContent,\r\n  IonInput,\r\n  IonButton,\r\n }                          from '@ionic/vue';\r\nimport jquery               from 'jquery'\r\nimport ImagePreviewModal    from '@/components/ImagePreviewModal'\r\nimport { \r\n  infiniteOutline,\r\n  calculatorOutline,\r\n  eyeOffOutline\r\n}                         from \"ionicons/icons\";\r\nexport default {\r\n    components: {\r\n        IonInfiniteScroll, \r\n        IonInfiniteScrollContent,\r\n        IonItem,\r\n        IonList,\r\n        IonImg,\r\n        IonThumbnail,\r\n        IonText,\r\n        IonSkeletonText,\r\n        IonCard,\r\n        IonCardContent,\r\n        IonSearchbar,\r\n        IonChip,\r\n        IonIcon,\r\n        IonPopover,\r\n        IonContent,\r\n  IonInput,\r\n  IonButton,\r\n    },\r\n    setup(){\r\n        return {infiniteOutline,calculatorOutline,\r\n  eyeOffOutline}\r\n    },\r\n    data(){\r\n        return{\r\n            storeId: this.$route.params.id,\r\n            items:[],\r\n            item_type:'active',\r\n            filter:'',\r\n            is_loading:0,\r\n            moderationType:'products',\r\n            holders:{\r\n                'store':'Поставщик',\r\n                'courier':'Курьер',\r\n                'product':'Товар',\r\n                'order':'Заказ',\r\n                'product_group_list':'Категория товара',\r\n                'location_group_list':'Категория местоп.',\r\n                'store_group_list':'Категория поставщ.',\r\n                'user_group_list':'Категория пользователя',\r\n            },\r\n\r\n            editor_opened:0,\r\n            editor_value:null,\r\n            editor_placeholder:''\r\n        }\r\n    },\r\n    computed:{\r\n        listComputed(){\r\n            let list=[]\r\n            for(let i of this.items){\r\n                let item=Object.assign({},i)\r\n                item.item_id=item.product_id\r\n                item.item_name=item.product_name\r\n                item.date_time=this.toLocDateTime(item.updated_at)\r\n                item.class=''\r\n                item.class+=(item.deleted_at)?'deleted ':''\r\n                item.class+=(item.is_disabled==1)?'disabled ':''\r\n                item.class+=(item.is_hidden==1)?'hidden ':''\r\n                item.class+=(item.is_counted==1 && item.product_quantity==0)?'absent ':''\r\n                list.push(item)\r\n            }\r\n            return list\r\n        }\r\n    },\r\n    methods:{\r\n        async listLoadMore(ev){\r\n            await this.listLoad()\r\n            ev.target.complete();\r\n        },\r\n        async listReload(){\r\n            this.items=[]\r\n            this.listLoad()\r\n        },\r\n        async listLoad(){\r\n            let request={\r\n                is_disabled: this.item_type=='disabled'?1:0,\r\n                is_active: this.item_type=='active'?1:0,\r\n                is_deleted: this.item_type=='deleted'?1:0,\r\n                name_query:this.filter,\r\n                offset:this.items.length,\r\n                limit:15,\r\n                //order:'group_id'\r\n            }\r\n            try{\r\n                this.is_loading=1\r\n                let items\r\n                if(this.moderationType=='products'){\r\n                    request.name_query_fields='product_name'\r\n                    request.reverse='updated_at'\r\n                    request.store_id=this.storeId\r\n                    const products=await jquery.post(`${this.$heap.state.hostname}Product/listGet`,request)\r\n                    items=products.product_list\r\n                }\r\n                this.is_loading=0\r\n                this.items=this.items.concat(items)\r\n            } catch(err){\r\n                //console.log(err)\r\n            }\r\n        },\r\n        listTypeChanged(e){\r\n            const listType=e.target.value;\r\n            this.items=[]\r\n            this.listLoad();\r\n        },\r\n        listFilter(){\r\n            clearTimeout(this.clock)\r\n            this.clock=setTimeout(()=>{\r\n                this.listReload()\r\n            },300)\r\n        },\r\n        toLocDate( iso ){\r\n            const event = new Date(Date.parse(iso));\r\n            const options = { month: 'short', day: 'numeric' };\r\n\r\n            return event.toLocaleDateString(undefined, options);\r\n        },\r\n        toLocDateTime( iso ){\r\n            const event = new Date(Date.parse(iso));\r\n            const options = { month: 'short', day: 'numeric',hour:'numeric',minute:'numeric' };\r\n\r\n            return event.toLocaleDateString(undefined, options);\r\n        },\r\n        async itemPrompt( item, property, label ){\r\n            const val=item[property]\r\n            const conf={\r\n                header: label,\r\n                buttons: [\r\n                    {\r\n                        text: 'Ок',\r\n                        role: 'confirm'\r\n                    },\r\n                    {\r\n                        text: 'Отмена',\r\n                        role: 'cancel'\r\n                    },\r\n                ],\r\n                inputs: [\r\n                    {\r\n                        type:'input',\r\n                        name:'comment',\r\n                        placeholder: label,\r\n                        value:val\r\n                    },\r\n                ],\r\n            }\r\n            if(property=='product_quantity'){\r\n                conf.buttons.push({\r\n                        text: 'Бесконечное кол-во',\r\n                        role: 'notcount'\r\n                    },)\r\n            }\r\n            const alert = await alertController.create(conf);\r\n            await alert.present();\r\n            const {data,role}=await alert.onDidDismiss()\r\n            if(role=='cancel'){\r\n                return\r\n            }\r\n            if(role=='notcount'){\r\n                this.itemUpdate( item.product_id, 'is_counted', 0 )\r\n                return\r\n            }\r\n            this.itemUpdate( item.product_id, property, data.values.comment )\r\n        },\r\n        async itemUpdate( product_id, property, value ){\r\n            try{\r\n                const update={\r\n                    product_id:product_id,\r\n                    [property]:value\r\n                }\r\n                await jquery.post(`${this.$heap.state.hostname}Product/itemUpdate`,JSON.stringify(update))\r\n                this.itemAlter( product_id, property, value )\r\n                this.$flash(\"💾 Сохранено\")\r\n            }catch(err){\r\n                const exception_code=err?.responseJSON?.messages?.error;\r\n                if(exception_code=='idle'){\r\n                    return\r\n                }\r\n                this.$flash(\"Не сохранено\")\r\n            }\r\n        },\r\n        itemAlter( product_id, property, value ){\r\n            for( let i in this.items ){\r\n                if(this.items[i].product_id==product_id){\r\n                    this.items[i][property]=value\r\n                }\r\n            }\r\n        },\r\n        itemEdit(item){\r\n            if( this.moderationType=='images' ){\r\n                this.imageEdit(item)\r\n            }\r\n            if( this.moderationType=='products' ){\r\n                this.$go('/catalog/product-edit-'+item.product_id)\r\n            }\r\n            if( this.moderationType=='stores' ){\r\n                this.$go('/catalog/store-edit-'+item.store_id)\r\n            }\r\n            if( this.moderationType=='couriers' ){\r\n                this.$go('/user/courier-dashboard?courier_id='+item.courier_id)\r\n            }\r\n        },\r\n        async imageEdit(item){\r\n            const actions={\r\n                'delete':['Удалить','danger'],\r\n                'postpone':['Потом','primary'],\r\n                'enable':['Ок','success'],\r\n            }\r\n            const modal = await modalController.create({\r\n                component: ImagePreviewModal,\r\n                componentProps:{image_hash:item.image_hash,actions},\r\n                initialBreakpoint: 0.75,\r\n                breakpoints: [0.75, 1]\r\n                });\r\n            this.$topic.on('dismissModal',()=>{\r\n                modal.dismiss();\r\n            });\r\n            modal.present();\r\n            const action=await modal.onDidDismiss()\r\n            if( action.role=='delete' ){\r\n                await this.imageDelete(item)\r\n            }\r\n            if( action.role=='enable' ){\r\n                await this.imageEnable(item)\r\n            }\r\n            if( action.role=='postpone' ){\r\n                await this.imagePostpone(item)\r\n            }\r\n            this.listReload()\r\n        },\r\n        async imageEnable(item){\r\n            await jquery.post(`${this.$heap.state.hostname}Image/itemDisable`,{image_id:item.image_id,is_disabled:0})\r\n        },\r\n        async imagePostpone(item){\r\n            //only to change updated_at db field\r\n            await jquery.post(`${this.$heap.state.hostname}Image/itemDisable`,{image_id:item.image_id,is_disabled:0})\r\n            await jquery.post(`${this.$heap.state.hostname}Image/itemDisable`,{image_id:item.image_id,is_disabled:1})\r\n        },\r\n        async imageDelete(item){\r\n            await jquery.post(`${this.$heap.state.hostname}Image/itemDelete`,{image_id:item.image_id})\r\n        },\r\n    },\r\n    mounted(){\r\n        this.listLoad();\r\n    },\r\n    watch:{\r\n        'filter':function(){\r\n            this.listFilter()\r\n        }\r\n    }\r\n}\r\n</script>","import { render } from \"./StoreEditProducts.vue?vue&type=template&id=34b325b8&scoped=true\"\nimport script from \"./StoreEditProducts.vue?vue&type=script&lang=js\"\nexport * from \"./StoreEditProducts.vue?vue&type=script&lang=js\"\n\nimport \"./StoreEditProducts.vue?vue&type=style&index=0&id=34b325b8&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-34b325b8\"]])\n\nexport default __exports__"],"names":["key","_createBlock","_component_base_layout","pageDefaultBackLink","$data","storeId","default","_withCtx","_createElementVNode","_createVNode","_component_ion_searchbar","placeholder","modelValue","filter","_cache","$event","_component_ion_popover","editor_opened","onDidDismiss","_component_ion_content","style","_component_ion_item","_component_ion_input","editor_placeholder","editor_value","_component_ion_button","slot","_createTextVNode","_","$options","listComputed","length","_component_ion_list","_createElementBlock","_Fragment","_renderList","item","item_id","lines","onClick","itemEdit","button","detail","_component_ion_thumbnail","class","_normalizeClass","_component_ion_img","src","_ctx","$heap","state","hostname","image_hash","_component_ion_text","_toDisplayString","item_name","is_counted","product_quantity","_hoisted_1","_createCommentVNode","is_hidden","_hoisted_2","_component_ion_chip","itemUpdate","product_id","color","_component_ion_icon","$setup","eyeOffOutline","itemPrompt","calculatorOutline","_component_ion_label","product_unit","infiniteOutline","product_price","currencySign","is_loading","_component_ion_skeleton_text","animated","_component_ion_card","_component_ion_card_content","_component_ion_infinite_scroll","onIonInfinite","listLoadMore","id","_component_ion_infinite_scroll_content","components","IonInfiniteScroll","IonInfiniteScrollContent","IonItem","IonList","IonImg","IonThumbnail","IonText","IonSkeletonText","IonCard","IonCardContent","IonSearchbar","IonChip","IonIcon","IonPopover","IonContent","IonInput","IonButton","setup","data","this","$route","params","items","item_type","moderationType","holders","computed","list","i","Object","assign","product_name","date_time","toLocDateTime","updated_at","deleted_at","is_disabled","push","methods","ev","listLoad","target","complete","listReload","request","is_active","is_deleted","name_query","offset","limit","name_query_fields","reverse","store_id","products","jquery","product_list","concat","err","listTypeChanged","e","value","listFilter","clearTimeout","clock","setTimeout","toLocDate","iso","event","Date","parse","options","month","day","toLocaleDateString","undefined","hour","minute","property","label","val","conf","header","buttons","text","role","inputs","type","name","alert","alertController","create","present","values","comment","update","JSON","stringify","itemAlter","$flash","_err$responseJSON","_err$responseJSON$mes","exception_code","responseJSON","messages","error","imageEdit","$go","courier_id","actions","modal","modalController","component","ImagePreviewModal","componentProps","initialBreakpoint","breakpoints","$topic","on","dismiss","action","imageDelete","imageEnable","imagePostpone","image_id","mounted","watch","__exports__","render"],"sourceRoot":""}