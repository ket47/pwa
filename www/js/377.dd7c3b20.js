"use strict";(self["webpackChunktezkel"]=self["webpackChunktezkel"]||[]).push([[377],{6509:function(t,l,e){e.d(l,{Z:function(){return m}});var n=e(6252);const u=(0,n.Uk)(" Чтобы вовремя узнавать об изменениях статусов заказов, подпишитесь на уведомления "),i=(0,n.Uk)("Подписаться");function o(t,l,e,o,r,a){const s=(0,n.up)("ion-button"),c=(0,n.up)("ion-card-content"),d=(0,n.up)("ion-card");return"default"!=r.permission||r.wasRejected?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(d,{key:0,color:"light"},{default:(0,n.w5)((()=>[(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[u,(0,n._)("p",null,[(0,n.Wm)(s,{onClick:l[0]||(l[0]=t=>a.subscribe()),expand:"block"},{default:(0,n.w5)((()=>[i])),_:1})])])),_:1})])),_:1}))}var r=e(351),a=e(3741),s={components:{IonButton:a.YG,IonCard:a.PM,IonCardContent:a.FN},data(){return{permission:Notification.permission,wasRejected:0}},methods:{async subscribe(){try{this.permission=await Notification.requestPermission(),"granted"==this.permission&&r.Z.firebase.saveNotificationToken()}catch(t){this.$flash("Вы не разрешили уведомлять вас")}},reject(){localStorage.pushNotificationsWasRejected=this.wasRejected=1}}},c=e(3744);const d=(0,c.Z)(s,[["render",o]]);var m=d},4377:function(t,l,e){e.r(l),e.d(l,{default:function(){return et}});var n=e(6252),u=e(3577);const i={class:"user-dashboard-header"},o=(0,n.Uk)("Выйти"),r=(0,n.Uk)("Войти"),a=(0,n.Uk)("Зарегистрироваться"),s=(0,n.Uk)("Пользователь"),c=(0,n.Uk)("Мои адреса"),d=(0,n.Uk)("Мои заказы"),m=(0,n.Uk)("Мои скидки"),f=(0,n.Uk)("Администратор"),w=(0,n.Uk)("Редактирование страниц"),k=(0,n.Uk)("Модерация элементов"),_=(0,n.Uk)("Курьер"),W={key:0},p=(0,n.Uk)("Смена активна"),g=(0,n.Uk)("Вы можете брать задания на доставку"),y=(0,n.Uk)("Завершить смену"),h={key:1},b=(0,n.Uk)("Смена закрыта"),v=(0,n.Uk)("Начните смену для начала работы"),O=(0,n.Uk)("Начать смену"),C={key:2},U=(0,n.Uk)("Выполняется задание"),I=(0,n.Uk)("В процессе доставки заказа"),S={key:3},$=(0,n.Uk)("Пока вы не курьер"),j=(0,n.Uk)("Подайте заявку, чтобы стать курьером"),Z=(0,n.Uk)("Заполнить анкету"),D=(0,n.Uk)("Анкета курьера"),L=(0,n.Uk)("Продавец"),x={key:0},q={key:1},N={key:2},T=(0,n.Uk)("Пока вы не продавец"),z=(0,n.Uk)("Зарегистрируйте свой магазин или ресторан"),A=(0,n.Uk)("Стать продавцем"),B=(0,n.Uk)("Информация"),G=(0,n.Uk)("О нас"),M=(0,n.Uk)("Правила пользования"),R=(0,n.Uk)("Правила пользования для продавца"),H=(0,n.Uk)("Правила пользования для курьера"),X=(0,n.Uk)("Политика конфиденциальности");function Y(t,l,e,Y,F,K){const P=(0,n.up)("ion-img"),E=(0,n.up)("ion-avatar"),J=(0,n.up)("ion-label"),Q=(0,n.up)("ion-icon"),V=(0,n.up)("router-link"),tt=(0,n.up)("ion-item"),lt=(0,n.up)("ion-list"),et=(0,n.up)("msg-subscription-comp"),nt=(0,n.up)("ion-item-divider"),ut=(0,n.up)("ion-item-group"),it=(0,n.up)("ion-note"),ot=(0,n.up)("ion-text"),rt=(0,n.up)("ion-button"),at=(0,n.up)("ion-skeleton-text"),st=(0,n.up)("base-layout");return(0,n.wg)(),(0,n.j4)(st,{"page-title":"Личный кабинет",pageDefaultBackLink:"/home"},{default:(0,n.w5)((()=>[(0,n._)("div",i,[(0,n.Wm)(lt,null,{default:(0,n.w5)((()=>[K.isSignedIn?((0,n.wg)(),(0,n.j4)(tt,{key:0,lines:"full",class:"avatar-row"},{default:(0,n.w5)((()=>[(0,n.Wm)(E,{slot:"start"},{default:(0,n.w5)((()=>[F.user.user_avatar_name?((0,n.wg)(),(0,n.j4)(P,{key:0,src:t.$heap.state.hostname+"img/avatar/"+F.user.user_avatar_name+".png"},null,8,["src"])):(0,n.kq)("",!0)])),_:1}),(0,n.Wm)(J,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,u.zw)(F.user.user_name),1)])),_:1}),(0,n.Wm)(J,{slot:"end"},{default:(0,n.w5)((()=>[(0,n.Wm)(V,{class:"section-button",to:"/user-edit",slot:"end"},{default:(0,n.w5)((()=>[(0,n.Wm)(Q,{icon:Y.settingsOutline},null,8,["icon"])])),_:1})])),_:1})])),_:1})):(0,n.kq)("",!0),K.isSignedIn?((0,n.wg)(),(0,n.j4)(tt,{key:1,onClick:K.signOut,lines:"full",button:"",detail:""},{default:(0,n.w5)((()=>[(0,n.Wm)(Q,{icon:Y.exitOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,n.Wm)(J,null,{default:(0,n.w5)((()=>[o])),_:1})])),_:1},8,["onClick"])):((0,n.wg)(),(0,n.j4)(tt,{key:2,lines:"full",button:"",detail:"",onClick:l[0]||(l[0]=l=>t.$router.push("sign-in"))},{default:(0,n.w5)((()=>[(0,n.Wm)(Q,{icon:Y.logInOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,n.Wm)(J,null,{default:(0,n.w5)((()=>[r])),_:1})])),_:1})),K.isSignedIn?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(tt,{key:3,lines:"full",button:"",detail:"",onClick:l[1]||(l[1]=l=>t.$router.push("sign-up"))},{default:(0,n.w5)((()=>[(0,n.Wm)(Q,{icon:Y.personAddOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,n.Wm)(J,null,{default:(0,n.w5)((()=>[a])),_:1})])),_:1}))])),_:1})]),(0,n.Wm)(et),(0,n.Wm)(lt,null,{default:(0,n.w5)((()=>[K.isSignedIn?((0,n.wg)(),(0,n.j4)(ut,{key:0},{default:(0,n.w5)((()=>[(0,n.Wm)(nt,null,{default:(0,n.w5)((()=>[(0,n.Wm)(J,null,{default:(0,n.w5)((()=>[s])),_:1})])),_:1}),(0,n._)("div",null,[(0,n.Wm)(tt,{lines:"full",button:"",detail:"",onClick:l[2]||(l[2]=l=>t.$router.push("user-addresses"))},{default:(0,n.w5)((()=>[(0,n.Wm)(Q,{icon:Y.locationOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,n.Wm)(J,null,{default:(0,n.w5)((()=>[c])),_:1})])),_:1}),(0,n.Wm)(tt,{lines:"full",button:"",detail:"",onClick:l[3]||(l[3]=l=>t.$router.push("order-list"))},{default:(0,n.w5)((()=>[(0,n.Wm)(Q,{icon:Y.cartOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,n.Wm)(J,null,{default:(0,n.w5)((()=>[d])),_:1})])),_:1}),(0,n.Wm)(tt,{lines:"full",button:"",detail:"",onClick:l[4]||(l[4]=l=>t.$router.push("user-promo"))},{default:(0,n.w5)((()=>[(0,n.Wm)(Q,{icon:Y.giftOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,n.Wm)(J,null,{default:(0,n.w5)((()=>[m])),_:1})])),_:1})]),K.isAdmin?((0,n.wg)(),(0,n.j4)(ut,{key:0},{default:(0,n.w5)((()=>[(0,n.Wm)(nt,null,{default:(0,n.w5)((()=>[(0,n.Wm)(J,null,{default:(0,n.w5)((()=>[f])),_:1})])),_:1}),(0,n.Wm)(tt,{onClick:l[5]||(l[5]=l=>t.$router.push("text-list")),lines:"full",button:"",detail:""},{default:(0,n.w5)((()=>[(0,n.Wm)(Q,{icon:Y.documentTextOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,n.Wm)(J,null,{default:(0,n.w5)((()=>[w])),_:1})])),_:1}),(0,n.Wm)(tt,{onClick:l[6]||(l[6]=l=>t.$router.push("admin-moderation")),lines:"full",button:"",detail:""},{default:(0,n.w5)((()=>[(0,n.Wm)(Q,{icon:Y.ribbonOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,n.Wm)(J,null,{default:(0,n.w5)((()=>[k])),_:1})])),_:1})])),_:1})):(0,n.kq)("",!0)])),_:1})):(0,n.kq)("",!0),K.isSignedIn?((0,n.wg)(),(0,n.j4)(ut,{key:1},{default:(0,n.w5)((()=>[(0,n.Wm)(nt,null,{default:(0,n.w5)((()=>[(0,n.Wm)(J,null,{default:(0,n.w5)((()=>[_])),_:1})])),_:1}),"ready"==F.courierStatus?((0,n.wg)(),(0,n.iD)("div",W,[(0,n.Wm)(tt,{style:{"--background":"var(--ion-color-success-tint)"},lines:"none"},{default:(0,n.w5)((()=>[(0,n.Wm)(ot,null,{default:(0,n.w5)((()=>[(0,n.Wm)(J,null,{default:(0,n.w5)((()=>[p])),_:1}),(0,n.Wm)(it,null,{default:(0,n.w5)((()=>[g])),_:1})])),_:1})])),_:1}),(0,n.Wm)(tt,{style:{"--background":"var(--ion-color-success-tint)"},button:"",lines:"full",onClick:l[7]||(l[7]=t=>K.courierStatusSet("idle"))},{default:(0,n.w5)((()=>[(0,n.Wm)(Q,{src:"./assets/icon/delivery-man.svg",slot:"start"}),(0,n.Wm)(rt,{slot:"end"},{default:(0,n.w5)((()=>[y])),_:1})])),_:1})])):"idle"==F.courierStatus?((0,n.wg)(),(0,n.iD)("div",h,[(0,n.Wm)(tt,{style:{"--background":"var(--ion-color-warning-tint)"},lines:"none"},{default:(0,n.w5)((()=>[(0,n.Wm)(ot,null,{default:(0,n.w5)((()=>[(0,n.Wm)(J,null,{default:(0,n.w5)((()=>[b])),_:1}),(0,n.Wm)(it,null,{default:(0,n.w5)((()=>[v])),_:1})])),_:1})])),_:1}),(0,n.Wm)(tt,{style:{"--background":"var(--ion-color-warning-tint)"},button:"",lines:"full",onClick:l[8]||(l[8]=t=>K.courierStatusSet("ready"))},{default:(0,n.w5)((()=>[(0,n.Wm)(Q,{src:"./assets/icon/delivery-man.svg",slot:"start"}),(0,n.Wm)(rt,{slot:"end"},{default:(0,n.w5)((()=>[O])),_:1})])),_:1})])):"busy"==F.courierStatus?((0,n.wg)(),(0,n.iD)("div",C,[(0,n.Wm)(tt,{style:{"--background":"var(--ion-color-warning-tint)"},lines:"none"},{default:(0,n.w5)((()=>[(0,n.Wm)(ot,null,{default:(0,n.w5)((()=>[(0,n.Wm)(J,null,{default:(0,n.w5)((()=>[U])),_:1}),(0,n.Wm)(it,null,{default:(0,n.w5)((()=>[I])),_:1})])),_:1})])),_:1}),(0,n.Wm)(tt,{style:{"--background":"var(--ion-color-warning-tint)"},button:"",lines:"full"},{default:(0,n.w5)((()=>[(0,n.Wm)(Q,{src:"./assets/icon/delivery-man.svg",slot:"start"})])),_:1})])):(0,n.kq)("",!0),"notcourier"==F.courierStatus?((0,n.wg)(),(0,n.iD)("div",S,[(0,n.Wm)(tt,{lines:"none"},{default:(0,n.w5)((()=>[(0,n.Wm)(ot,null,{default:(0,n.w5)((()=>[(0,n.Wm)(J,null,{default:(0,n.w5)((()=>[$])),_:1}),(0,n.Wm)(it,null,{default:(0,n.w5)((()=>[j])),_:1})])),_:1})])),_:1}),(0,n.Wm)(tt,{button:"",lines:"full",onClick:l[9]||(l[9]=l=>t.$router.push("courier-dashboard"))},{default:(0,n.w5)((()=>[(0,n.Wm)(Q,{src:"./assets/icon/delivery-man.svg",slot:"start"}),(0,n.Wm)(rt,{slot:"end",color:"light"},{default:(0,n.w5)((()=>[Z])),_:1})])),_:1})])):((0,n.wg)(),(0,n.j4)(tt,{key:4,lines:"full",button:"",detail:"",onClick:l[10]||(l[10]=l=>t.$router.push("courier-dashboard"))},{default:(0,n.w5)((()=>[(0,n.Wm)(Q,{icon:Y.documentTextOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,n.Wm)(J,null,{default:(0,n.w5)((()=>[D])),_:1})])),_:1}))])),_:1})):(0,n.kq)("",!0),K.isSignedIn?((0,n.wg)(),(0,n.j4)(ut,{key:2},{default:(0,n.w5)((()=>[(0,n.Wm)(nt,null,{default:(0,n.w5)((()=>[(0,n.Wm)(J,null,{default:(0,n.w5)((()=>[L])),_:1})])),_:1}),F.storeList?F.storeList.length>0?((0,n.wg)(),(0,n.iD)("div",q,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(F.storeList,(l=>((0,n.wg)(),(0,n.j4)(tt,{key:l.store_id,detail:"",button:"",onClick:e=>t.$router.push(`store-edit-${l.store_id}`)},{default:(0,n.w5)((()=>[(0,n.Wm)(Q,{icon:Y.storefrontOutline,slot:"start"},null,8,["icon"]),(0,n.Uk)(" "+(0,u.zw)(l.store_name||"- - -"),1)])),_:2},1032,["onClick"])))),128))])):((0,n.wg)(),(0,n.iD)("div",N,[(0,n.Wm)(tt,{lines:"none"},{default:(0,n.w5)((()=>[(0,n.Wm)(ot,null,{default:(0,n.w5)((()=>[(0,n.Wm)(J,null,{default:(0,n.w5)((()=>[T])),_:1}),(0,n.Wm)(it,null,{default:(0,n.w5)((()=>[z])),_:1})])),_:1})])),_:1}),(0,n.Wm)(tt,{onClick:l[11]||(l[11]=l=>t.$router.push("supplier-dashboard")),lines:"full"},{default:(0,n.w5)((()=>[(0,n.Wm)(Q,{icon:Y.storefrontOutline,slot:"start"},null,8,["icon"]),(0,n.Wm)(rt,{slot:"end",color:"light"},{default:(0,n.w5)((()=>[A])),_:1})])),_:1})])):((0,n.wg)(),(0,n.iD)("div",x,[(0,n.Wm)(tt,null,{default:(0,n.w5)((()=>[(0,n.Wm)(Q,{icon:Y.storefrontOutline,slot:"start"},null,8,["icon"]),(0,n.Wm)(at,{animated:""})])),_:1})]))])),_:1})):(0,n.kq)("",!0),(0,n.Wm)(ut,null,{default:(0,n.w5)((()=>[(0,n.Wm)(nt,null,{default:(0,n.w5)((()=>[(0,n.Wm)(J,null,{default:(0,n.w5)((()=>[B])),_:1})])),_:1}),(0,n.Wm)(tt,{lines:"full",button:"",detail:"",onClick:l[12]||(l[12]=l=>t.$router.push("page-about"))},{default:(0,n.w5)((()=>[(0,n.Wm)(Q,{icon:Y.informationCircleOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,n.Wm)(ot,null,{default:(0,n.w5)((()=>[G])),_:1})])),_:1}),(0,n.Wm)(tt,{lines:"full",button:"",detail:"",onClick:l[13]||(l[13]=l=>t.$router.push("page-rules-customer"))},{default:(0,n.w5)((()=>[(0,n.Wm)(Q,{icon:Y.informationCircleOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,n.Wm)(ot,null,{default:(0,n.w5)((()=>[M])),_:1})])),_:1}),(0,n.Wm)(tt,{lines:"full",button:"",detail:"",onClick:l[14]||(l[14]=l=>t.$router.push("page-rules-supplier"))},{default:(0,n.w5)((()=>[(0,n.Wm)(Q,{icon:Y.informationCircleOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,n.Wm)(ot,null,{default:(0,n.w5)((()=>[R])),_:1})])),_:1}),(0,n.Wm)(tt,{lines:"full",button:"",detail:"",onClick:l[15]||(l[15]=l=>t.$router.push("page-rules-courier"))},{default:(0,n.w5)((()=>[(0,n.Wm)(Q,{icon:Y.informationCircleOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,n.Wm)(ot,null,{default:(0,n.w5)((()=>[H])),_:1})])),_:1}),(0,n.Wm)(tt,{lines:"full",button:"",detail:"",onClick:l[16]||(l[16]=l=>t.$router.push("page-privacy_policy"))},{default:(0,n.w5)((()=>[(0,n.Wm)(Q,{icon:Y.informationCircleOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,n.Wm)(ot,null,{default:(0,n.w5)((()=>[X])),_:1})])),_:1}),(0,n.Wm)(tt,{lines:"none"},{default:(0,n.w5)((()=>[(0,n.Wm)(Q,{icon:Y.informationCircleOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,n.Wm)(J,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Версия "+(0,u.zw)(F.version),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}var F=e(3741),K=e(8903),P=e(351),E=e(9042),J=e(2008),Q=e(6509),V={components:{IonIcon:F.gu,IonAvatar:F.BJ,IonImg:F.Xz,IonLabel:F.Q$,IonItem:F.Ie,IonList:F.q_,IonItemDivider:F.rH,IonItemGroup:F.Ub,IonNote:F.uN,IonText:F.yW,IonButton:F.YG,IonSkeletonText:F.CK,MsgSubscriptionComp:Q.Z},setup(){return{settingsOutline:K.C$N,logInOutline:K.Ohu,personCircleOutline:K.XMB,exitOutline:K.NmL,locationOutline:K.Iv7,heartOutline:K.gjX,helpCircle:K.pvH,callOutline:K.H7N,mailOutline:K.xOl,cardOutline:K.pvm,cartOutline:K.Ox0,notifications:K.N9d,chevronForwardOutline:K.Dji,documentTextOutline:K.L82,informationCircleOutline:K.yo2,storefrontOutline:K.qRG,notificationsOutline:K.iZ5,giftOutline:K._$o,personAddOutline:K.$$h,ribbonOutline:K.Muk}},data(){return{user:J.Z.state.user,courierStatus:P.Z.courier.status,storeList:P.Z.supplier.storeList,version:this.toLocDateTime(document.lastModified)}},ionViewDidEnter(){P.Z.get("full")},mounted(){const t=this;E.Z.on("courierStatusChange",(l=>{t.courierStatus=l})),E.Z.on("userGet",(l=>{t.user=l,l.storeList&&(t.storeList=l.storeList)}))},computed:{isAdmin(){return P.Z.isAdmin()},isSignedIn(){return this.user?.user_id>0}},methods:{async signOut(){await P.Z.signOut(),this.user=await P.Z.get()},async courierStatusSet(t){try{await P.Z.courier.updateStatus(t)}catch(l){409==l.status&&this.$flash("Анкета удалена или не активна")}},toLocDateTime(t){const l=new Date(Date.parse(t)),e={month:"short",day:"numeric",hour:"numeric",minute:"numeric",year:"numeric"};return l.toLocaleDateString(void 0,e)}},watch:{$route(t,l){t.path!=l.path&&(this.user=J.Z.state.user)},courierStatus(t){"ready"==t||"busy"==t?P.Z.geo.trackingStart():P.Z.geo.trackingStop()}}},tt=e(3744);const lt=(0,tt.Z)(V,[["render",Y],["__scopeId","data-v-73c2f4dc"]]);var et=lt}}]);
//# sourceMappingURL=377.dd7c3b20.js.map