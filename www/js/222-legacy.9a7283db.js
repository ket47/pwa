"use strict";(self["webpackChunktezkel"]=self["webpackChunktezkel"]||[]).push([[222],{6222:function(e,t,l){l.r(t),l.d(t,{default:function(){return m}});var n=l(6252),o=l(3577);function u(e,t,l,u,a,r){const i=(0,n.up)("ion-card-title"),s=(0,n.up)("ion-card-header"),d=(0,n.up)("ion-label"),c=(0,n.up)("ion-input"),p=(0,n.up)("ion-item"),m=(0,n.up)("router-link"),f=(0,n.up)("ion-text"),_=(0,n.up)("ion-checkbox"),k=(0,n.up)("ion-button"),w=(0,n.up)("ion-card-content"),h=(0,n.up)("ion-card"),g=(0,n.up)("ion-icon"),W=(0,n.up)("base-layout");return(0,n.wg)(),(0,n.j4)(W,{"page-title":"Панель управления продавца"},{default:(0,n.w5)((()=>{var l;return[e.$heap.state.user.user_id>1?((0,n.wg)(),(0,n.j4)(h,{key:0,color:"light"},{default:(0,n.w5)((()=>[(0,n.Wm)(s,null,{default:(0,n.w5)((()=>[(0,n.Wm)(i,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Регистрация нового магазина")])),_:1})])),_:1}),(0,n.Wm)(w,null,{default:(0,n.w5)((()=>[(0,n.Wm)(p,{lines:"full"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{position:"stacked",color:"primary"},{default:(0,n.w5)((()=>[(0,n.Uk)("Название магазина или ресторана*")])),_:1}),(0,n.Wm)(c,{modelValue:a.store_name,"onUpdate:modelValue":t[0]||(t[0]=e=>a.store_name=e),placeholder:"Название*"},null,8,["modelValue"])])),_:1}),(0,n.Wm)(p,{lines:"none"},{default:(0,n.w5)((()=>[(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[(0,n.Uk)(" Подавая заявку вы даете согласие на условия "),(0,n.Wm)(m,{to:"/page/rules-supplier"},{default:(0,n.w5)((()=>[(0,n.Uk)("Договор поставки товаров и услуг")])),_:1})])),_:1}),(0,n.Wm)(_,{slot:"end",modelValue:a.contractAccepted,"onUpdate:modelValue":t[1]||(t[1]=e=>a.contractAccepted=e)},null,8,["modelValue"])])),_:1}),(0,n.Wm)(k,{expand:"block",onClick:t[2]||(t[2]=e=>r.itemCreate()),disabled:!a.contractAccepted||!a.store_name},{default:(0,n.w5)((()=>[(0,n.Uk)("Стать продавцом")])),_:1},8,["disabled"])])),_:1})])),_:1})):((0,n.wg)(),(0,n.j4)(h,{key:1,color:"light"},{default:(0,n.w5)((()=>[(0,n.Wm)(s,null,{default:(0,n.w5)((()=>[(0,n.Wm)(i,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Необходимо зарегистрироваться")])),_:1})])),_:1}),(0,n.Wm)(w,null,{default:(0,n.w5)((()=>[(0,n.Uk)(" Чтобы стать продавцом, нужно быть зарегистрированным пользователем. Вы можете зарегистрироваться за 2 минуты. "),(0,n.Wm)(k,{expand:"block",onClick:t[3]||(t[3]=t=>e.$go("/user/sign-up"))},{default:(0,n.w5)((()=>[(0,n.Uk)("Зарегистрироваться")])),_:1})])),_:1})])),_:1})),(null===(l=a.storeList)||void 0===l?void 0:l.length)>0?((0,n.wg)(),(0,n.j4)(h,{key:2,color:"light"},{default:(0,n.w5)((()=>[(0,n.Wm)(s,null,{default:(0,n.w5)((()=>[(0,n.Wm)(i,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Зарегистрированые магазины")])),_:1})])),_:1}),(0,n.Wm)(w,null,{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.storeList,(t=>((0,n.wg)(),(0,n.j4)(p,{key:t.store_id,detail:"",button:"",onClick:l=>e.$go(`/catalog/store-edit-${t.store_id}`)},{default:(0,n.w5)((()=>[(0,n.Wm)(g,{icon:u.storefrontOutline,slot:"start"},null,8,["icon"]),(0,n.Uk)(" "+(0,o.zw)(t.store_name||t.store_name_new||"- - -"),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})):(0,n.kq)("",!0)]})),_:1})}var a=l(8534),r=l(6964),i=l(8903),s=(l(9755),l(2008),l(351)),d={components:{IonInput:r.pK,IonCard:r.PM,IonCardHeader:r.Zi,IonCardTitle:r.Dq,IonCardContent:r.FN,IonLabel:r.Q$,IonItem:r.Ie,IonButton:r.YG,IonCheckbox:r.nz,IonText:r.yW,IonIcon:r.gu},setup(){return{storefrontOutline:i.qRG}},data(){return{supprier:s.Z.supplier.status,store_name:null,contractAccepted:0,storeList:null}},mounted(){const e=this;this.listGet(),this.$topic.on("userGet",(function(){e.storeList||e.listGet()}))},methods:{itemCreate(){var e=this;return(0,a.Z)((function*(){try{if(!e.store_name)return void e.$flash("Название обязательно");const t=yield s.Z.supplier.storeItemCreate(e.store_name);if(!t)return void e.$flash("Не удалось создать магазин или ресторан");e.$go(`/catalog/store-edit-${t}`)}catch(n){var t,l;const o=null===(t=n.responseJSON)||void 0===t||null===(l=t.messages)||void 0===l?void 0:l.error;"limit_exeeded"==o&&e.$flash("У вас зарегистрировано максимальное количество магазинов"),e.$flash("Не удалось создать магазин или ресторан")}}))()},listGet(){var e=this;return(0,a.Z)((function*(){e.storeList=yield s.Z.supplier.listGet()}))()}}},c=l(3744);const p=(0,c.Z)(d,[["render",u],["__scopeId","data-v-6f97a1ac"]]);var m=p}}]);
//# sourceMappingURL=222-legacy.9a7283db.js.map