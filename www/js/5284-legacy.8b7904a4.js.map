{"version":3,"file":"js/5284-legacy.8b7904a4.js","mappings":"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","sources":["webpack://tezkel/./src/views/UserVerifyPhone.vue","webpack://tezkel/./src/views/UserVerifyPhone.vue?cefe"],"sourcesContent":["<template>\n  <base-layout page-title=\"Подтверждение телефона\" pageDefaultBackLink=\"/user\">\n      <ion-card color=\"light\">\n        <ion-card-header>\n          <ion-card-title color=\"primary\">\n            Подтверждение номера телефона\n          </ion-card-title>\n        </ion-card-header>\n        <ion-card-content>\n          Мы выслали вам смс с кодом подтверждения на номер <b>{{user_phone}}</b>. Введите 4 цифры из смс ниже\n        </ion-card-content>\n      </ion-card>\n\n      <form novalidate>\n        <ion-list>\n          <ion-item>\n            <ion-row>\n              <ion-col>\n                <ion-label position=\"stacked\" color=\"primary\">Код подтверждения из смс</ion-label>\n                <ion-input\n                  v-model=\"verification_code\"\n                  type=\"numeric\"\n                  inputmode=\"numeric\"\n                  placeholder=\"- - - -\"\n                  @ionInput=\"verification_code=$event.target.value;onSubmit()\"\n                  enterkeyhint=\"go\"\n                  required\n                ></ion-input>\n              </ion-col>\n            </ion-row>\n          </ion-item>\n        </ion-list>\n\n        <ion-row responsive-sm>\n          <ion-col>\n            <ion-button @click=\"onSubmit()\" expand=\"block\">Подтвердить</ion-button>\n          </ion-col>\n        </ion-row>\n      </form>\n  </base-layout>\n</template>\n\n<script>\nimport { \n  IonLabel,\n  IonCol,\n  IonInput,\n  IonRow,\n  IonButton,\n  IonCard,\n  IonCardHeader,\n  IonCardTitle,\n  IonCardContent,\n  IonItem,\n  IonList,\n}                     from '@ionic/vue';\nimport jQuery         from \"jquery\";\nimport User           from '@/scripts/User.js';\n\nexport default  {\n  name:'UserVerifyPhone',\n  components:{\n  IonLabel,\n  IonCol,\n  IonInput,\n  IonRow,\n  IonButton,\n  IonCard,\n  IonCardHeader,\n  IonCardTitle,\n  IonCardContent,\n  IonItem,\n  IonList,\n  },\n  data(){\n    return {\n      verification_code:null,\n      user_phone:this.$route.params.user_phone||this.$route.query.user_phone||'',\n      is_sent:false\n    }\n  },\n  created(){\n    this.smsSend();\n  },\n  ionViewDidEnter(){\n    this.smsSend();\n  },\n  methods:{\n    smsSend(){\n      if(this.is_sent){\n        return\n      }\n      this.user_phone=this.$route.params.user_phone||this.$route.query.user_phone||'';\n      if(!this.user_phone){\n        return;\n      }\n      let requestData = {\n        user_phone: this.user_phone\n      }\n      try{\n        this.is_sent=true\n        jQuery.post( `${this.$heap.state.hostname}User/phoneVerificationSend`, requestData)\n      }catch{/** */}\n    },\n    async onSubmit() {\n      if( !this.verification_code || String(this.verification_code).length!=4 ){\n        return\n      }\n      try{\n        await jQuery.post( `${this.$heap.state.hostname}/User/phoneVerificationCheck`, {user_phone: this.user_phone, verification_code: this.verification_code})\n        User.autoSignIn()\n        this.$router.replace('/user/user-edit')\n        this.$router.push('/home')\n        this.$flash(\"Номер телефона верифицирован\")\n      } catch(err){\n        const message=err.responseJSON.messages.error\n        switch(message){\n          case 'verification_not_found':\n            this.$flash(\"Код верификации устарел\")\n            this.$router.push('sign-in')\n            break;\n        }\n        this.$flash(\"Не удалось верифицировать телефон\")\n      }\n    },\n  },\n}\n</script>","import { render } from \"./UserVerifyPhone.vue?vue&type=template&id=9df6ee28\"\nimport script from \"./UserVerifyPhone.vue?vue&type=script&lang=js\"\nexport * from \"./UserVerifyPhone.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"W:\\\\Ionic\\\\Tezkel\\\\blank\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["novalidate","_createBlock","_component_base_layout","pageDefaultBackLink","_createVNode","_component_ion_card","color","_component_ion_card_header","_component_ion_card_title","_component_ion_card_content","$data","_createElementVNode","_hoisted_4","_component_ion_list","_component_ion_item","_component_ion_row","_component_ion_col","_component_ion_label","position","_component_ion_input","type","inputmode","placeholder","onIonInput","$event","target","value","$options","enterkeyhint","required","_component_ion_button","onClick","expand","name","components","IonLabel","IonCol","IonInput","IonRow","IonButton","IonCard","IonCardHeader","IonCardTitle","IonCardContent","IonItem","IonList","data","verification_code","user_phone","this","$route","params","query","is_sent","created","smsSend","ionViewDidEnter","methods","requestData","jQuery","$heap","state","hostname","onSubmit","String","length","User","$router","replace","push","$flash","message","responseJSON","messages","error","__exports__","render"],"sourceRoot":""}