(function(){var e={1993:function(e){function t(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}t.keys=function(){return[]},t.resolve=t,t.id=1993,e.exports=t},1875:function(e){function t(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}t.keys=function(){return[]},t.resolve=t,t.id=1875,e.exports=t},183:function(e,t,o){"use strict";o(6992),o(8674),o(7727),o(7658),o(4916);var i=o(7582),r=(o(8851),o(1292),o(1633),o(1045),o(6187),o(2299),o(3423),o(4687),o(9147),o(6250),o(9963)),n=o(4929),a=o(6252);function l(e,t,o,i,r,n){const l=(0,a.up)("ion-router-outlet"),s=(0,a.up)("ion-app");return(0,a.wg)(),(0,a.j4)(s,null,{default:(0,a.w5)((()=>[(0,a.Wm)(l,{ref:"mainAppOutlet"},null,512)])),_:1})}var s={components:{IonApp:n.dr,IonRouterOutlet:n.jP}},u=o(3744);const d=(0,u.Z)(s,[["render",l]]);var c=d,m=o(5625),p=o(2008),h=o(3577);const _={style:{"line-height":"1.5","max-height":"3em","text-overflow":"ellipsis",overflow:"hidden","font-weight":"bold"}},g={slot:"end"},f={key:0,class:"installPrompt"},y={style:{"padding-top":"30px"}},w=(0,a._)("small",null,[(0,a.Uk)("Установите приложение Tezkel из AppStore"),(0,a._)("br")],-1),k={href:"https://apps.apple.com/tr/app/tezkel-%D0%B1%D1%8B%D1%81%D1%82%D1%80%D0%B0%D1%8F-%D0%B4%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%BA%D0%B0/id6449783821",target:"_new"},v={key:1,class:"installPrompt"},b={style:{"padding-top":"30px"}},I=(0,a._)("small",null,[(0,a.Uk)("Установите приложение Tezkel из GooglePlay"),(0,a._)("br")],-1),W={href:"https://play.google.com/store/apps/details?id=com.tezkel.twa",target:"_new"},C=(0,a._)("div",{style:{height:"30px"}},null,-1);function $(e,t,o,i,r,n){const l=(0,a.up)("ion-icon"),s=(0,a.up)("ion-button"),u=(0,a.up)("ion-buttons"),d=(0,a.up)("ion-title"),c=(0,a.up)("cart-header"),m=(0,a.up)("ion-toolbar"),p=(0,a.up)("ion-header"),$=(0,a.up)("ion-refresher-content"),D=(0,a.up)("ion-refresher"),S=(0,a.up)("tezkel-loader"),O=(0,a.up)("ion-fab"),x=(0,a.up)("ion-content"),U=(0,a.up)("ion-page");return(0,a.wg)(),(0,a.j4)(U,null,{default:(0,a.w5)((()=>[(0,a.Wm)(p,{class:(0,h.C_)([e.pageClass])},{default:(0,a.w5)((()=>[(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[e.canGoBack?((0,a.wg)(),(0,a.j4)(u,{key:0,slot:"start"},{default:(0,a.w5)((()=>[e.isIos?((0,a.wg)(),(0,a.j4)(s,{key:0,onClick:t[0]||(t[0]=t=>e.goback()),style:{"font-family":"SF, Arial, Helvetica, sans-serif"}},{default:(0,a.w5)((()=>[(0,a.Wm)(l,{src:e.chevronBackOutline},null,8,["src"]),(0,a.Uk)("Назад")])),_:1})):((0,a.wg)(),(0,a.j4)(s,{key:1,onClick:t[1]||(t[1]=t=>e.goback())},{default:(0,a.w5)((()=>[(0,a.Wm)(l,{src:e.arrowBackOutline,size:"large"},null,8,["src"])])),_:1}))])),_:1})):(0,a.kq)("",!0),e.pageTitle?((0,a.wg)(),(0,a.j4)(d,{key:1,size:"small"},{default:(0,a.w5)((()=>[(0,a._)("div",_,(0,h.zw)(e.pageTitle),1)])),_:1})):(0,a.kq)("",!0),e.pageLogo?((0,a.wg)(),(0,a.j4)(l,{key:2,class:"toolbar_svg_logo",style:{color:"var(--ion-color-primary)"},icon:e.pageLogo},null,8,["icon"])):(0,a.kq)("",!0),(0,a._)("div",g,[(0,a.Wm)(c,{slot:"end"})])])),_:1})])),_:1},8,["class"]),(0,a.Wm)(x,{class:(0,h.C_)(["main-container",e.pageClass]),scrollEvents:e.contentOnScroll?"true":"false",onIonScroll:t[5]||(t[5]=t=>e.contentOnScroll(t))},{default:(0,a.w5)((()=>[(0,a.Wm)(D,{slot:"fixed",id:"refresher",onIonRefresh:t[2]||(t[2]=t=>e.reload())},{default:(0,a.w5)((()=>[(0,a.Wm)($)])),_:1}),(0,a.WI)(e.$slots,"default"),e.iosInstallPromptShow?((0,a.wg)(),(0,a.iD)("div",f,[(0,a._)("div",y,[w,(0,a._)("a",k,[(0,a.Wm)(s,{expand:"block"},{default:(0,a.w5)((()=>[(0,a.Wm)(l,{slot:"start",src:e.logoAppleAppstore},null,8,["src"]),(0,a.Uk)(" Установить ")])),_:1})])]),(0,a._)("div",null,[(0,a.Wm)(l,{src:e.closeOutline,style:{float:"right"},size:"large",color:"light",onClick:t[3]||(t[3]=t=>e.iosInstallPromptDismiss())},null,8,["src"])])])):(0,a.kq)("",!0),e.androidInstallPromptShow?((0,a.wg)(),(0,a.iD)("div",v,[(0,a._)("div",b,[I,(0,a._)("a",W,[(0,a.Wm)(s,{expand:"block"},{default:(0,a.w5)((()=>[(0,a.Wm)(l,{slot:"start",src:e.logoGooglePlaystore},null,8,["src"]),(0,a.Uk)(" Установить ")])),_:1})])]),(0,a._)("div",null,[(0,a.Wm)(l,{src:e.closeOutline,style:{float:"right"},size:"large",color:"light",onClick:t[4]||(t[4]=t=>e.androidInstallPromptDismiss())},null,8,["src"])])])):(0,a.kq)("",!0),C,e.isInteractingWithServer?((0,a.wg)(),(0,a.j4)(O,{key:2,vertical:"bottom",slot:"fixed"},{default:(0,a.w5)((()=>[(0,a.Wm)(S)])),_:1})):(0,a.kq)("",!0)])),_:3},8,["class","scrollEvents"])])),_:3})}var D=o(5241),S=o(9395);const O={xmlns:"http://www.w3.org/2000/svg",width:"512",height:"278",viewBox:"0 0 512 278"},x={id:"wolf",fill:"#000000","fill-rule":"evenodd"},U={ref:"frame-01",class:"frame",d:"M113.19 40.98l-4.81 3.4 -4.9 2.8 -1.1 3.61 -0.1 4.9 -2.3 3.6 -6.11 5.41 -6.4 6 -7.41 6.01 -5.4 5.5 -2.81 2.8 3.51 4.91 8.2 5.7 5.21 1.7 3 3.71 3.7 1.3 7.71 -2 9.71 -3.61 10.2 -2.7 5.81 0.7 2.2 4.71 2.5 5.3 -2.4 13.01 4.11 -2 -3.21 12.61 4.41 -3.5 -4.41 17.41 7.31 -3.9 -5.31 7.5 10.01 -1.3 3.5 9.61 7.31 7.91 8.61 6.5 9.4 2.2 2.31 5.41 -0.2 13.81 2.5 16.51 1.8 19.62 0.8 7.5 5.81 4.31 9.6 1 9.51 1.7 10.81 3.4 6 1 1.2 3 -3 2.81 -4.9 1.7 -4.81 -0.3 -5 -1.2 -6 -5.21 -3.81 3 -5.4 7.21 -4 5.81 -0.31 2.4 1.01 3 3.8 -0.9 4.5 1.6 3.2 -0.7 5.31 2 6.6 1.2 7.81 -0.9 6.61 -1.8 7 -8.01 5.71 -4.6 5 -5.2 5 -1.4 6.71 -5.11 4.8 -0.3 5.21 -2.6 3.6 -2.4 5.5 0.2 2.21 -4.71 8.7 -3.2 5.01 -1.3 10.41 -0.7 8.6 0.6 7.31 -2 3.9 -0.5 4.71 -5.61 -3.41 0 -0.8 -4.1 -4.6 -3.2 -3.41 -2.31 -4.4 -2.7 -4.4 0 -4.61 -6.2 -5 -9.31 -0.9 -8.31 5.6 -8.4 4.71 2.8 0.8 -6.01 14.41 5.01 -4 -8.51 20.01 -2.9 -2.5 -3.8 4 -0.6 0.4 -5.21 2.51 -0.6 2.7 -4.3 9.81 -2.2 -1.01 -3.71 8.41 -1.8 9.81 3 10.51 4.01 14.21 2 -10.21 -7.21 15.01 -1.6 7.01 -3.3 -9.71 -4 11.91 -1.51 11.01 -5 8.71 -8.01 6.9 -10 8.51 -19.52 3.8 -12.81 1.4 -9.21 -2.2 -8 -4.1 -4.21 1.2 -7 -6.01 -1 -5 2.2 -9.31 5.8 7.11 -7.8 -6.11 2.4 -5 3.6 -5.01 4 -6.3 8.61 -9.51 9.51 -7.5 6.4 -9.51 4.01 -14.61 3.1 -14.51 0.8 -12.72 -1 -14.11 -2 -9.7 2.1 -11.73 -1.26 -14.59 3.56 9.8 -4.4 -8.7 -0.2 -6.31 -0.5 -4.5 -0.3 -5.71 1.8 -13.41 -3.21 -11.81 -0.5 -15.91 -1.4 -13.51 -4 -13.61 -4.8 2.8 -2.21 -13.61 -2.4 8.67 -8.76c0.98,0.79 0.9,2.07 5.97,3.08 -0.21,1.01 -0.47,6.89 0.13,7.65 0.44,0.57 0.94,0.99 1.72,1.39 1.56,0.81 11.8,4.09 13.37,4.75 4.95,1.86 5.44,1.82 7.3,2.2 10.22,2.03 23.05,2.32 33.35,3.26 5.85,0.54 17.28,1.39 21.18,1.6 1.08,0.04 -0.24,0.05 2.48,0.12 2.29,0.06 6.98,1.24 7.42,1.24 5.3,0 15.57,0.68 16.6,-0.06 3.5,-2.53 2.92,-4.64 4.8,-8.67 2.07,-4.44 1.86,-12.95 1.29,-18.77 -0.26,-2.6 -8.35,-12.94 -10.34,-13.45 -0.83,-0.21 -1.32,-0.44 -2.41,-0.65 -2.06,-0.49 -5.21,0.26 -8.2,-0.43 -3.74,-0.86 -7.43,-3.21 -10.67,-4.22 -0.83,-0.26 -2.4,0.06 -3.06,1.45 -1.8,3.77 -3.5,6.65 -3.33,8.13 0.2,1.73 31.15,7 38.01,9.17 0,0 0.12,2.97 0.07,3.03 -0.34,0.45 -40.41,-9.99 -42.44,-10.92 -2.04,-0.93 -13.04,-3.67 -13.41,-3.77 -0.99,-0.26 -6.43,-2.16 -9.28,-1.24 -6.58,2.12 -26.32,5.66 -34.47,7.5 -1.09,0.24 -3.69,9.65 -4.17,11.21 -0.52,1.68 -1.48,3.11 -1.68,3.15 -0.61,0.15 2.82,-13.22 3.08,-14.28 0.7,-2.9 4.08,-3.57 3.75,-3.58 -0.93,-0.04 23.54,-3.89 32.1,-6.68 1.19,-0.39 2.42,-0.8 3.69,-1.24 0.99,-0.34 1.99,-0.69 3,-1.05 1.34,-0.48 -4.97,-3.63 -11.49,-4.34 -8.93,-0.36 -13.73,-2.78 -17.76,2.14 -2.87,3.66 -17.56,7.52 -19.38,11.22 0.43,0.09 0.26,2.22 -0.25,5.86 -0.19,1.38 -0.24,0.59 -0.36,1.16 -1,-0.17 -6.31,-2.93 -8.39,-2.67 -0.72,0.09 -1.46,3.66 -0.4,5.39l-14.3 -1.23 3.41 -3.8 -11.41 -2.3 10.51 -2.3 -18.72 -3.51 11.01 -4 -20.02 -5.6 -6.2 -8.01 -6.31 -8.21 -6.7 -5.8 -5.91 -5.2 -6 -9.41 -3.8 -4.11 -1.71 2.71 -1 10.21 0.5 8 -3.6 -2.1 -4.2 -5.4 -2 -2.21 -1.31 4.61 1.21 7 3.7 9.51 1.2 4.1 -5.2 4.91 0 0.1zm92.67 151.42l-3.5 6.9 -5.21 9.51 -4.3 8.71 -0.2 3 4.7 3.7 7.21 -1.1 8.81 -1.1 2.2 -2.1 7 0.3 4.91 2.4 5.6 3.71 5.61 1.5 4 -2.3 3.7 -10.21 -7.9 -4.41 -12.01 -5.9 -10.21 -6 -10.41 -6.61 0 0zm28.02 -17.92l3.51 3.91 1.6 3.4 4.5 8.01 6.7 6.9 1.71 -7.7 -3.41 -6.91 0.7 -8.91 3.71 -10 -7.41 4.4 -6.2 4 -5.41 2.91 0 -0.01z"},L={ref:"frame-02",class:"frame",d:"M112.4 53.22l-8.36 5.26 -1.22 4.15 0.14 4.68 -1.81 4.22 -7.96 8.31 -7.57 6.17 -9.26 7.76 -2.62 4.17 4.7 4.05 6.29 4.45 4.89 2.02 4.16 0.15 -1.05 2.5 5.16 3 4.18 1.89 6.99 -3.42 6.84 -4.83 6.17 -2.03 5.95 0.16 4.25 4.76 3.95 7.53 -0.23 8.81 -2.19 7.61 -2.38 4.09 5.37 1.97 4.96 0.35 1.64 0.53 -2.59 1.95 -4.34 1.12 -2.36 1.14 6.95 3.96 4.64 2.65 2.63 1.9 -3.37 1.46 5.79 3.37 3.45 4.06 10.96 7.66 -4.09 4.83 -5.41 5.91 -7.54 7.12 -5.85 6.16 -5.71 5.59 -4.28 5.65 -2.04 3.98 0.65 5.76 3.97 6.5 6.16 6.33 7.35 9.35 5.94 7.7 4.83 4.85 5.92 1.18 8.15 -0.09 2.75 -0.01 -0.87 -7.97 -3.84 -2.6 -0.76 -5.66 -4.9 -3.69 -7.13 -4.91 -4.31 -4.04 -4.77 -5.1 -1.05 -7.21 3.71 -4.82 7.56 -4.32 7.6 -2.63 7.96 -3.42 7.73 -2.56 6.84 -0.03 0.72 7.86 2.28 11.93 1.63 8.76 2.38 5.83 5.31 1.11 10.06 0.39 9.79 1.98 12.42 2.99 8.94 1.51 7.25 -0.26 5.59 -4.72 1.93 -3.91 -0.52 -3.78 -3.2 -2.99 -4.36 -1.51 -4.92 -1.72 -2.88 0.08 -5.39 -0.13 -6.87 0.03 -5.62 0.49 -7.55 -0.47 -6.62 -2.57 -1.47 -4.6 2.36 -5.4 7.01 -9.35 3.63 -6.34 4.4 -5.33 4.3 -5.9 -1.09 -3 4.2 -0.78 6.29 -2.51 6.71 -2.62 6.43 -3.26 5.25 -1.47 3.98 -0.2 0.12 6.83 -0.57 6.61 2.13 11.97 2.36 10.57 4.27 14.07 2.99 13.8 0.71 7.91 -1.36 6.42 -3.25 4.58 -4.84 5.53 -6.34 3.08 -5.03 3.69 -7.11 1.58 -3.53 -1.82 -4.34 -0.53 -4.13 2.93 -4.53 5.03 -3.58 5.02 -0.5 3.04 4.96 0.97 4.42 0.63 1.8 1.36 1.2 0.96 13.33 0 4.25 -2.34 3.67 -0.08 6.84 -4.96 7.24 -7.75 6.49 -7.04 5.72 -5.89 5.39 -5.53 5.31 -3.68 0.33 -5.67 -2.93 -6.54 -3.23 -8.39 -1.9 -6.68 -1.17 -6.67 1.57 -1.54 4.36 2.86 10.04 8.33 7.39 7.17 3.74 4.07 -0.71 15.12 -2.78 9.47 -3.95 8.46 -3.21 2.52 -5.4 -0.02 -4.89 -1.9 -5.17 3.78 -2.26 3.82 -2.44 5.27 -1.5 3.22 23.38 0 5.61 -1.94 4.36 -1.75 4.4 -2.83 3.51 -6.76 1.45 -7.92 1.37 -8.99 1.95 -8 1.14 -12.6 0.31 -8.73 0.09 -5.7 -5.24 -2.79 -9.37 -4.67 -6.69 -4.82 -1.26 -4.34 3.61 -6.32 3.33 -2.47 4.58 -0.4 3.88 2.1 0.38 -6.91 3.75 3.11 3.92 1.25 0.93 -6.02 1.28 -5.43 6.43 2.38 0.36 -14.94 3.94 6.3 -0.56 -15.38 4.99 8.15 -1.6 -15.81 6.6 9.34 14.43 3.78 8.26 -1.13 -8.11 -5.36 11.8 1.27 6.19 0.85 10.19 -0.7 5.2 -1.22 -7.05 -3.24 7.66 -2.25 7.69 -3.58 6.6 -2.91 5.41 -4.68 7.86 -6.49 2.47 -3.04 6.47 -8.82 -6.74 2.72 8.59 -8.63 -7.16 2.5 5.82 -5.6 1.37 -3.46 -0.2 -6.71 -1.02 -8.09 -2.59 -8.18 -4.06 -10.3 -3.65 -4.37 -4.39 -3.35 -1.26 -5.37 -1.76 -6.44 -4.42 3.27 -5.09 3.49 -3.69 4.44 5.19 -9.34 -4.86 3.44 -2.92 3.49 -3.6 4.49 -5.14 5.97 -5.67 8.39 -7.55 8.79 -8.6 6.54 -9.54 5.85 -3.21 2.31 -7.22 0.79 -9.07 1.07 -8.67 1 -6.14 2.15 -6.21 -3.14 -10.76 -4.44 -8.18 -1.51 -8.47 -2.82 -11.05 -1.18 -10.45 0.12 -8.85 -0.07 -10.77 0.08 -8.25 -0.68 -14.02 -1.28 -14.46 -2.51 -7.03 -2.68 -9.85 -4.15 -4.65 -3.34 5.47 -1.47 -9.97 -2.05 4.78 -4.04 -6.81 -0.07 5.32 -6.89 -9.97 2.69 4.24 -4.64 -12.85 -1.2 5.48 -2.4 -11.99 -0.97 12.96 -7.37 -23.97 -0.48 4.14 -3.81 -10.2 0.11 -1.83 -4.36 -3.37 -5.76 -5.51 -7.62 -7.96 -7.16 -7.16 -5.54 -2.32 -1.85 -1.3 7.04 -1.52 9.81 -0.97 9.41 0.24 2.45 -2.01 -1.88 -3.91 -2.16 -3.43 -3.34 -2.92 -3.94 1.23 7.41 1.8 6.21 2.1 5.01 -3.11 2.8zm86.89 16.27c2.79,0.45 0.8,2.29 7.39,3.36 -0.17,1.02 -0.22,6.91 0.4,7.65 0.46,0.55 0.97,0.95 1.77,1.32 1.59,0.75 11.93,3.67 13.53,4.28 5.01,1.68 5.5,1.62 7.37,1.94 10.29,1.67 23.12,1.49 33.45,2.08 5.86,0.32 17.32,0.77 21.22,0.84 1.08,0.01 -0.24,0.06 2.48,0.04 2.29,-0.02 7.03,0.99 7.46,0.97 5.3,-0.18 15.58,0.13 16.59,-0.65 3.41,-2.64 2.76,-4.73 4.49,-8.83 1.91,-4.51 1.4,-13 0.62,-18.81 -0.34,-2.58 -8.8,-12.63 -10.8,-13.07 -0.84,-0.18 -1.34,-0.39 -2.43,-0.56 -2.09,-0.42 -5.2,0.45 -8.22,-0.14 -3.77,-0.73 -7.53,-2.94 -10.81,-3.84 -0.84,-0.23 -2.39,0.14 -3.01,1.56 -1.66,3.83 -3.25,6.77 -3.03,8.24 0.26,1.72 31.37,5.89 38.3,7.81 0,0 0.23,2.98 0.18,3.04 -0.32,0.46 -40.73,-8.57 -42.8,-9.42 -2.06,-0.85 -13.16,-3.21 -13.53,-3.29 -1,-0.23 -6.51,-1.93 -9.32,-0.91 -6.5,2.35 -26.1,6.58 -34.18,8.71 -1.09,0.28 -3.35,9.78 -3.78,11.36 -0.46,1.69 -1.36,3.15 -1.56,3.2 -0.61,0.17 2.35,-13.31 2.57,-14.38 0.59,-2.92 3.95,-3.71 3.62,-3.71 -0.93,-0.01 23.39,-4.72 31.85,-7.81 1.17,-0.43 2.39,-0.89 3.64,-1.37 0.97,-0.37 1.96,-0.76 2.96,-1.16 1.33,-0.53 -5.09,-3.45 -11.63,-3.93 -8.95,-0.04 -13.83,-2.29 -17.67,2.76 -2.75,3.77 -17.29,8.15 -18.98,11.91 0.43,0.07 0.33,2.2 -0.04,5.87 -0.14,1.38 -0.22,0.59 -0.32,1.17 -1.01,-0.14 -6.42,-2.71 -8.48,-2.38 -0.87,0.14 -1.57,5.32 0.7,6.15z"},j={ref:"frame-03",class:"frame",d:"M103.57 58.26l-8.49 3.96 -2.01 6.97 -1.28 6.12 -7.24 4.79 -9.86 7.05 -8.35 5.2 -6.74 7.33 3.52 3.98 4.91 2.31 4.6 3.56 4.45 2.67 2.98 -0.4 2.71 3.41 4.1 2.86 6.39 -3.5 6.15 -3.4 9.98 -2.42 6.64 -0.13 7.69 4.32 9.47 4.39 3.65 2.87 -0.25 6.91 2.12 8.91 3.62 -8.24 1.06 7.35 3.97 10 2.77 -8.29 -0.75 8.82 2.92 6.61 0.2 7.37 -6 2.7 -11.16 4.7 -10.08 3.74 -10.41 6.69 -12.05 6.71 -6.99 7.61 -9.33 8.01 -10.48 5.98 -6.71 4.3 -2.96 4.24 -1.79 5.51 -1.08 5.13 2.74 1.3 6.08 2.07 4.58 0.38 6.23 -1.76 4.05 -1.74 3.57 -1.14 6.05 -7.95 4.6 -5.06 3.47 -2.96 2.95 -7.33 6.87 -5.27 6.81 -3.86 10.1 -4.65 11.34 -1.57 5.37 -0.64 -4.85 5.74 -7.96 6.85 -2.63 4.3 3.11 3 7.16 5.24 7.29 5.92 10.48 5.28 10.35 5.74 9.86 5.43 6.84 -0.7 8.59 1.04 4.13 -2.31 2.35 -4.81 0.52 -4.15 -3.61 -2.46 -2.76 -2.69 -4.65 -1.81 -5.15 -1.08 -4.98 -4.29 -6.88 -2.29 -7.04 -0.96 -4.64 -0.86 -7.13 -7.33 10.32 -2.57 12.08 -2.41 8.58 -2.46 9.73 -2.47 8.7 -3.21 -2.02 -5.35 0.18 -2.93 5.99 -0.66 12.35 -1.3 7.24 -3.46 -3.99 -2.58 8.2 -2.44 9.88 -3.21 17.67 -4.54 11.04 -3.05 7.76 0.18 7.66 2.52 4.33 2.86 3.07 5.51 4.71 6.24 4.62 7.37 9.12 11.53 4.78 4.8 8.09 5.43 9.09 7.5 10.44 7.29 5.37 4.61 0.87 7.74 -0.62 9.56 -4.24 9.2 -2.85 5.54 -3.86 3.86 -2.77 3.12 -3.23 1.74 -3.41 -0.97 -5.27 -2.32 -3.69 2.8 -2.73 4.78 -1.45 4.64 0.45 6.51 29.34 0 3.75 -1.45 3.23 -6.96 4.38 -6.65 3.9 -6.97 3.98 -10.5 1.61 -8.15 2.07 -7.38 0.88 -7.13 -0.14 -11.65 -2.89 -2.71 -3.1 -3.65 6.44 1.57 4.01 1.67 7.68 4.4 8.3 9.86 6.59 17.83 1.35 12.03 -2.23 10.69 -8.01 1.73 -4.61 1.45 -3.65 1.86 -2.85 5.79 0.37 4.51 23.84 0 4.67 -2.18 2.98 -3.12 0.64 -5.14 3.69 -5.3 1.57 -5.96 -0.31 -6.32 -2.12 -11.12 -1.85 -11.69 -1.7 -8.67 -0.83 -8.44 -3.2 -7.01 -3.5 -2.44 -7.33 -1.04 -10.04 -3.45 -9.86 -5.55 -7.81 -5.04 -7.39 -7.66 -2.19 -12.03 -0.47 -9.59 -0.17 -4.66 -0.16 -6.8 7.42 8.59 9.28 10.81 5.16 3.12 -1.72 -8.34 9.65 6.42 11 1.29 -4.67 -5.42 9.93 2.37 11.71 -0.07 10.06 -2.43 3.66 -2.21 -9.39 -2.74 5.85 -2.07 9.03 -4.93 2.6 -3.9 -7.08 0.08 8.62 -5.22 7.15 -7.16 -3.78 -1.81 5.53 -5.3 3.65 -7.9 3.23 -9.72 1.45 -8.44 -0.09 -5.15 -5.08 6.12 1.74 -5.56 -0.45 -9.29 -3.72 3.24 1.62 -11.01 -2.58 -9.37 -1.52 7.22 -3.94 -6.79 -8.36 -6.25 -18.44 -6.69 -8.31 -1.52 -9.29 -0.22 -7.88 -0.11 3.54 8.77 -8 -8.89 0.42 3.69 2.6 3.74 5.81 7.73 4.16 10.7 -0.7 7.82 -3.24 7.13 -4.53 5.74 -8.26 4.93 -5.96 1.78 -9.72 2.18 -6.57 0.37 -12.92 -5.36 -9.62 -7.33 -10.57 -5.27 -10.08 -2.69 -9.17 -2.68 -9.75 -1.97 -10.35 -2.42 -8.5 -0.44 -13.49 -0.92 -14.42 -0.73 -17.62 -0.85 -17.18 -2.23 -3.95 -1.38 -6.25 -2.86 -5.38 -1.17 4.35 -1.92 -11.33 -2 8.57 -3.74 -18.36 -1.74 5.97 -7.29 -10.36 2.18 8.05 -6.37 -11.93 1.32 -13.08 -1.16 -5.85 -0.28 6.06 -3.72 -5.37 -0.01 -5.47 1.58 -2.29 0.94 -1.43 -8.14 -0.04 -5.83 -0.67 -8.23 -1.35 -4.55 -3.96 -0.51 -4.57 4.43 -4.21 5.4 -5.37 5.42 0.03 -6.44 -2.22 -0.49 -2.61 3.52 -4.07 5.1 -6.26 8.58 -5.09 6.04 -3.63 5.18zm97.03 -0.78c2.79,0.42 0.81,2.28 7.42,3.28 -0.16,1.02 -0.15,6.91 0.48,7.64 0.47,0.55 0.99,0.94 1.79,1.31 1.59,0.73 11.97,3.54 13.57,4.13 5.03,1.63 5.52,1.56 7.39,1.86 10.31,1.56 23.14,1.24 33.47,1.71 5.87,0.27 17.33,0.59 21.23,0.62 1.08,-0.01 -0.24,0.06 2.48,0.01 2.29,-0.04 7.04,0.91 7.48,0.89 5.29,-0.24 15.57,-0.04 16.57,-0.83 3.39,-2.68 2.71,-4.76 4.4,-8.88 1.86,-4.53 1.26,-13.02 0.42,-18.81 -0.38,-2.58 -8.94,-12.54 -10.95,-12.95 -0.84,-0.18 -1.34,-0.38 -2.43,-0.54 -2.09,-0.4 -5.2,0.5 -8.22,-0.05 -3.78,-0.69 -7.57,-2.86 -10.86,-3.73 -0.84,-0.22 -2.39,0.17 -2.99,1.6 -1.62,3.85 -3.18,6.8 -2.94,8.27 0.28,1.72 31.43,5.55 38.39,7.4 0,0 0.25,2.97 0.21,3.03 -0.32,0.46 -40.82,-8.12 -42.9,-8.95 -2.08,-0.83 -13.2,-3.07 -13.57,-3.15 -1,-0.21 -6.53,-1.85 -9.33,-0.8 -6.47,2.42 -26.03,6.86 -34.08,9.08 -1.08,0.29 -3.24,9.81 -3.65,11.39 -0.45,1.7 -1.34,3.17 -1.53,3.22 -0.61,0.18 2.2,-13.33 2.41,-14.4 0.56,-2.93 3.92,-3.76 3.58,-3.76 -0.93,0.01 23.34,-4.96 31.76,-8.15 1.17,-0.44 2.38,-0.91 3.63,-1.41 0.97,-0.38 1.95,-0.78 2.95,-1.19 1.32,-0.54 -5.13,-3.39 -11.68,-3.8 -8.94,0.05 -13.85,-2.15 -17.64,2.95 -2.7,3.79 -17.19,8.33 -18.84,12.11 0.43,0.07 0.35,2.2 0.02,5.87 -0.13,1.38 -0.22,0.6 -0.31,1.18 -1.01,-0.13 -6.44,-2.64 -8.5,-2.29 -0.87,0.15 -1.52,5.34 0.77,6.14z"},T={ref:"frame-04",class:"frame",d:"M92.91 79.37l-11.01 5.39 -3.45 4.48 -1.77 5.83 -3.85 4.83 -11.62 7.76 -10.18 5.3 -7.18 4.86 -5.79 5.36 4.42 4.89 4.39 3.01 6.06 3.4 5.46 1.57 1.56 3.54 4.86 1.02 11.78 -4.41 11.42 -3.06 13.12 -1.93 10.55 1.6 3.9 1.67 2.51 2.23 0.58 7.17 1.75 1.84 3 -5.56 3.84 -4.04 -0.47 8.22 3.08 5.52 0.8 -4.47 1.32 -4.29 2.04 3.9 4.22 3.95 3.88 1.41 0.25 10.37 -5.83 3.92 -11.12 4.88 -8.66 3.17 -10.51 4.98 -9.81 5.7 -9.15 5.67 -11 4.93 -11.02 5.38 -10.79 5.16 -10.59 3.25 -8.71 0.56 -8.96 3.87 -4.61 5.06 -3.4 7.33 0.26 2.87 7.18 1.84 4.51 1.81 5.34 -1.12 2.48 -0.41 3.87 2.55 4.52 -1.64 6.18 0.35 4.12 1.25 5.99 -0.22 2.61 -0.71 2.97 -0.46 3.83 -1.59 4.86 -0.46 5.06 -4.65 7.47 -7.1 10.87 -8.7 9.07 -6.04 5.97 -2.58 7.26 -1.31 11.75 0 15.58 0.15 11.77 0 6.88 -0.85 3.5 -0.01 7.39 1.88 0.72 -6.89 4.54 5.38 -0.73 -11.65 4.14 -7.84 3.13 -2.73 5.19 3.75 7.32 3.03 -0.7 -3.29 6.61 0.6 1.06 -3.21 12.42 0.54 12.61 -1.51 11.94 -3.71 10.69 -3.99 7.2 -3.18 12.15 -1.67 9.53 -1.13 9.39 -0.1 7.04 0.59 8.12 7.1 10.46 7.7 11.51 9.97 8.35 5.73 13.87 5.18 15.34 5.23 12.39 2.89 10.16 4.28 9.88 7.94 6.12 8.96 5.17 10.13 5.72 11.17 5.22 8.82 1.73 3.68 4.82 2.42 7.67 1.99 5.96 2.05 0.25 -3.06 -0.15 -6.18 -0.91 -4.2 -2.01 -1.77 -0.39 -5.49 -1.3 -5.43 -2.99 -2.7 -3.04 -2.73 -2.56 -6.29 -3.67 -2.75 -6.05 -6.65 -3.55 -4.94 -2.55 -8.13 -3.32 -6.24 -6.28 -3.83 -6.63 0.07 -10.53 -1.87 -7.78 -4.33 -6.3 -6.63 -1.05 -3.27 8.67 -1.84 11.29 -2.05 5.75 -0.99 8.04 2.18 -1.63 -4.23 10.59 1.18 3.44 3.94 7.43 11.24 9.05 11.73 8.06 9.31 7.52 6.3 8.15 3.13 8.44 0.9 7.89 -0.02 6.31 -2.68 5.36 -4.4 -1.06 -2.9 -4.05 -0.3 -3.11 -3.03 -4.88 -2.84 -4.44 0.1 -5.32 0.79 -5.55 -4.16 -3.46 -5.47 -4.44 -3.75 -6.29 -5.37 -5.78 -6.7 -5.5 -8.25 -1.62 -2.8 3.16 -1.69 3.51 0.8 -2.36 -5.48 5.22 0.5 1.51 -2.27 6 -3.39 12.53 -3.85 11.92 -6.99 6.33 -4.31 4.74 -5.15 -7.38 -1.04 10.54 -5.39 7.17 -5.22 8.06 -7.56 -7.67 -0.17 8.8 -6.73 3.76 -11.88 1.54 -9.07 0.12 -6.8 -1.85 -7.01 -11.49 8.91 5.51 -8.4 -8.13 3.49 -7.25 2.96 -10.28 5.04 -9.79 3.93 -8.57 4.38 -3.82 1.03 -3.34 1.85 -5.92 4.63 4.7 -8.79 -12.42 7.23 -9.86 5.92 -9.35 5.24 -15.75 7.18 -13.82 -0.68 -7.26 -0.55 -7.02 -3.41 -12.47 -1.8 -9 -2.18 -9.76 -7.93 -12.98 -4.68 -19.31 -2.35 -20.46 -2.77 -13.55 -1.46 -14.41 -1.56 -20.2 -2.43 -14.09 -1.98 -9.96 -1.75 -13.36 -2.97 -6.65 -2.53 1.96 -3.39 -14.81 1.1 9.62 -5.08 -23.06 0.15 5.18 -6.97 -18.77 3.99 -7.01 1.34 4.5 -5.87 -8.24 3.59 2.06 -7.81 0.23 -6.13 -0.41 -2.78 -6.96 3.39 -6.41 3.53 -10.06 4.09 -10.88 4.57 -8.14 4.07 -5.97 0.67 -4.6 3.24 -5.21 2.53zm108.34 -15.32c2.75,0.64 0.63,2.34 7.13,3.86 -0.23,1 -0.69,6.87 -0.12,7.65 0.42,0.58 0.91,1.02 1.68,1.45 1.53,0.85 11.65,4.47 13.2,5.19 4.88,2.02 5.38,2 7.22,2.44 10.15,2.37 22.97,3.08 33.23,4.36 5.83,0.73 17.22,1.97 21.11,2.31 1.08,0.07 -0.24,0.03 2.47,0.2 2.29,0.14 6.95,1.47 7.38,1.48 5.3,0.18 15.54,1.2 16.6,0.49 3.58,-2.4 3.07,-4.54 5.08,-8.5 2.22,-4.37 2.29,-12.88 1.91,-18.72 -0.17,-2.61 -7.91,-13.21 -9.88,-13.78 -0.83,-0.24 -1.31,-0.49 -2.39,-0.73 -2.05,-0.56 -5.22,0.09 -8.19,-0.7 -3.71,-0.99 -7.31,-3.46 -10.52,-4.58 -0.82,-0.29 -2.4,-0.02 -3.11,1.35 -1.92,3.71 -3.71,6.53 -3.59,8.01 0.14,1.74 30.9,8.03 37.68,10.43 0,0 0.02,2.98 -0.03,3.04 -0.35,0.43 -40.05,-11.34 -42.05,-12.33 -2.01,-0.99 -12.91,-4.1 -13.28,-4.21 -0.98,-0.29 -6.36,-2.37 -9.24,-1.55 -6.64,1.9 -26.49,4.78 -34.69,6.35 -1.1,0.21 -4.01,9.53 -4.55,11.07 -0.57,1.66 -1.57,3.05 -1.77,3.09 -0.62,0.13 3.25,-13.12 3.54,-14.17 0.8,-2.88 4.2,-3.43 3.87,-3.46 -0.93,-0.07 23.66,-3.1 32.31,-5.61 1.2,-0.35 2.45,-0.72 3.73,-1.11 0.99,-0.31 2.01,-0.62 3.03,-0.95 1.36,-0.44 -4.84,-3.79 -11.34,-4.72 -8.92,-0.65 -13.63,-3.24 -17.82,1.54 -3,3.57 -17.8,6.94 -19.74,10.58 0.43,0.1 0.18,2.22 -0.45,5.85 -0.23,1.37 -0.26,0.58 -0.39,1.15 -1,-0.21 -6.22,-3.14 -8.3,-2.95 -0.88,0.07 -1.93,5.2 0.28,6.18z"},z={ref:"frame-05",class:"frame",d:"M94.82 85.36l-9.5 3.69 -8.3 4.07 -2.24 3.88 -0.89 8.06 -8.44 5.59 -9.47 5.22 -8.37 4.91 -5.66 3.34 -6.9 7.71 6.28 6.03 6.82 4.73 6.01 1.83 2.6 3.21 4.33 4.01 7.2 -2.19 16.76 -4.99 13.62 -3.26 11.48 1.66 9.51 0.78 -1.76 10.11 8.32 -5.64 -1.11 8.83 0.85 3.87 2.92 -2.98 1.42 3.87 -2.12 4.39 -5.34 5.22 -10.47 3.52 -11.95 4.2 -7.7 0.21 -5.94 3.19 -10.69 3.86 -14.68 5.13 -14.9 4.27 -9.69 4.18 -14.51 1.39 -5.14 -1.04 -3.34 -0.93 -9.18 3.95 -4.85 6.22 1.03 4.06 5.53 2.73 4.41 0.49 2.49 3.39 5.4 1.78 6.13 -1.89 8.08 -0.17 7.12 -2.07 9.15 -2.75 6.11 -1.22 10.7 -4.16 11.05 -5.08 10.73 -1.84 9.72 -1.38 -14.45 14.58 -15.3 11.91 -8.74 6.54 -4.12 5.4 -6.74 4.99 -8.63 5.49 -5.22 -0.05 -4.83 5.42 -2.84 3.63 3.49 4.06 6.5 1.8 5.35 -0.49 1.02 2.12 3.57 -0.09 6.46 -1.09 8.94 -4.53 6.27 -7.18 3.58 -5.46 6.05 -2.61 7.36 -4.63 6.14 -7.83 7.61 -8.92 13.48 -6.63 12.86 -5.36 8.63 -2.97 10.46 -4.54 8.47 -4.15 7.81 1.45 4.86 2.01 2.13 -13.35 5.28 6.93 2.24 -9.08 7.71 3.99 -0.07 -4.24 8.57 -0.55 11.64 -4.57 14.21 -5.2 16.46 -7.17 11.74 -7.26 15.72 -10.83 8.96 -5.72 11.43 -2.24 11.5 0.23 10.72 7.67 14.68 11.75 13.78 8.75 7.31 3.67 6.53 2.29 -3.09 -5.7 7.99 2.9 6.34 -1.57 5.4 -2.48 4.2 -4.16 4.08 4.27 4.16 8.57 6.56 10.58 8.26 3.04 7.25 0.23 4.11 -2.3 0.37 -6.33 -2.82 -6.29 -4.38 -5.05 -1.23 -5.22 -6 -7.13 -2.87 -5.35 4.92 -1.26 4.33 1.13 5.97 3.8 3.79 1.33 4.13 -0.1 5.25 6 5.81 7.95 8.91 3.92 9.55 0.12 5.15 -1.99 0.05 -5.92 -2.85 -5.72 -2.56 -3.23 7.82 0.3 -3.6 -4.26 8.68 0.2 -2.17 -5.29 7.21 -6.89 1.39 -6.92 -6.31 4.24 3.93 -10.36 1.67 -6.96 0.73 -9.29 -0.56 -7.81 -2.38 -8.51 -10.56 5.04 7.61 -8.43 -6.34 2.16 -6.2 5.04 -7.77 4.88 -7.97 0.73 -4.69 -0.23 -9.51 -1.82 -10.24 -4.93 -7.01 -3.65 -11.72 -5.85 -10.15 -3.98 -10.08 -2.79 -7.68 -0.75 6.72 -4.55 -4.93 -0.79 -9.4 3.93 4.75 -7.32 -6.35 1.37 -5.26 4.82 -4.62 1.7 -7.89 -1.89 -12.32 -3.5 -11.57 -1.84 -12.63 -0.07 -13.91 0.91 -17.79 2.09 -16.15 2.02 -14.13 2.38 -12.59 0.75 -10.3 -0.9 -10.56 -2 9.4 -3.3 -2.93 -1.59 -13.68 -0.25 10.07 -4.77 -4.94 -1.77 -7.79 1.15 -11.67 0.81 11 -4.48 -8.9 -2.57 -11.21 3.06 -6.72 2.21 -5.7 0.96 6.53 -5.38 -10.37 3.76 -5.03 0.94 -2.44 -0.9 0.96 -6.92 0.73 -4.02 -1.38 -2.31 -5.5 2.83 -7.21 4.08 -7.97 5.4 -8.3 6.84 -6.22 3.27 -7.89 4zm100.84 -17.23c2.83,0.01 1.15,2.14 7.82,2.15 0,1.04 0.88,6.86 1.61,7.49 0.54,0.47 1.11,0.78 1.96,1.03 1.69,0.49 12.36,1.74 14.03,2.09 5.22,0.87 5.69,0.73 7.59,0.75 10.42,0.02 23.07,-2.17 33.35,-3.23 5.84,-0.6 17.23,-1.97 21.09,-2.51 1.07,-0.17 -0.22,0.09 2.46,-0.36 2.26,-0.38 7.09,-0.13 7.52,-0.22 5.2,-1.01 15.4,-2.33 16.28,-3.26 2.95,-3.15 1.97,-5.11 3.04,-9.43 1.17,-4.75 -0.67,-13.06 -2.36,-18.67 -0.75,-2.5 -10.68,-11.08 -12.73,-11.2 -0.86,-0.05 -1.39,-0.17 -2.49,-0.17 -2.12,-0.08 -5.07,1.26 -8.13,1.16 -3.84,-0.12 -7.91,-1.72 -11.29,-2.09 -0.86,-0.09 -2.34,0.52 -2.72,2.02 -1.04,4.04 -2.15,7.2 -1.7,8.61 0.53,1.66 31.91,0.87 39.06,1.67 0,0 0.69,2.9 0.66,2.97 -0.25,0.51 -41.58,-2.02 -43.75,-2.54 -2.18,-0.52 -13.51,-1.09 -13.89,-1.12 -1.01,-0.06 -6.72,-0.87 -9.34,0.58 -6.05,3.35 -24.74,10.62 -32.38,13.99 -1.02,0.46 -1.76,10.19 -1.93,11.82 -0.19,1.74 -0.85,3.32 -1.04,3.41 -0.58,0.26 0.22,-13.52 0.26,-14.61 0.13,-2.98 3.33,-4.29 2.99,-4.24 -0.91,0.14 22.36,-8.35 30.22,-12.74 1.09,-0.61 2.22,-1.25 3.38,-1.92 0.9,-0.52 1.82,-1.06 2.75,-1.61 1.22,-0.73 -5.58,-2.6 -12.11,-2.05 -8.84,1.37 -14.02,-0.08 -17.02,5.52 -2.12,4.15 -15.78,10.77 -16.85,14.75 0.43,0 0.67,2.12 0.88,5.8 0.08,1.39 -0.13,0.62 -0.13,1.21 -1.02,0.02 -6.76,-1.66 -8.75,-1.01 -0.84,0.27 -0.71,5.51 1.66,5.96z"},Z={ref:"frame-06",class:"frame",d:"M74.99 103.15l-5.02 5.72 -3.38 6.97 -7.53 3.85 -9.09 4.32 -11.04 5.18 -8.12 2.66 -0.97 4.04 3.4 3.86 5.77 5.59 4.02 3.81 3.56 0.66 0.41 2.36 2.07 2.22 4 3.18 13.78 -2.8 17.57 -1.13 19.87 1.67 7.32 3.41 5.14 11.95 1.08 -9.56 4.89 6.1 0.99 10.32 3.17 -4.03 2.26 10.43 0.37 11.5 -3.03 9.21 -6.05 12.15 -4.19 8.63 -3.55 9.44 -6.73 11.71 -7.92 7.27 -6.71 4.52 -3.2 2 -3.76 -1.79 -2.64 1.63 -3.5 3.29 -2.73 4.76 -2.62 5.79 -0.81 2.13 9.58 0.32 11.55 -0.14 8.77 -0.08 4.44 -1.74 5.13 -8.68 5.06 -6.25 7.18 -5.31 3.48 -7.66 6.98 -11.97 7.38 -10.8 2.28 10.06 0.21 13.8 -3.01 7.72 -4.91 4.34 -4.27 -0.97 -5.22 -2.48 -4.32 3.72 -5.28 4.4 -3.09 4.25 -1.22 4.99 6.35 1.28 4.56 0.02 7.92 0.21 9.66 0.14 7.21 -1.95 2.46 -6.27 6.07 -8.11 4.46 -6.17 2.98 -3.32 -1.33 -14.18 -1.2 -13.56 -1.71 -14.24 3.53 -2.2 6.34 0.24 0.11 -13.42 6.61 8.73 2.2 -10.25 9.35 1.72 -0.59 -5.01 10.09 2.74 5.87 -2.5 10.44 1.19 -3.55 -5.43 7.23 -1.28 8.11 -5.24 2.87 -3.06 -0.36 3.32 2.98 3.1 5.93 -0.09 4.03 -2.42 6.22 -0.2 3.76 -2.93 4.33 0.64 4.51 -2.77 4.28 -4.3 5.11 -3.14 6.21 -1.44 4.64 -1.46 2.56 3.42 4.92 2.28 5.79 1.97 10.51 -0.4 12.9 -3.92 14.07 -4.16 6.73 -1.54 3.12 0.61 -0.6 4.71 -5.63 11.72 -2.69 6.5 -5.44 12.54 -2.17 10.42 4.37 6.99 3.11 3.49 4.4 -1.74 2.06 -3.58 5.27 -2.71 2.86 -4.72 -0.59 -7.39 3.19 -5.62 2.29 -6.02 0.88 -6.31 2.96 -11.55 3.41 -7.52 5.28 -6.68 5.33 3.07 12.38 4.91 5.72 0.26 -3.68 -4.7 6.39 0.42 12.77 -0.28 15.34 -1.29 5.33 -2.32 -11.03 -1.99 11.88 -4.59 9.27 -2.47 9.08 -5.5 3.24 -5.75 -13.89 2.95 8.93 -8.03 7.38 -13.26 2.17 -12.48 2.6 -14.84 -10.43 6.83 6.29 -7.78 -12.89 5.57 -6.88 2.89 -7.57 2.28 7.62 -8.98 -9.79 3.2 -5.03 4.08 -11.07 4.22 -11.03 1.81 -7.25 -0.52 -9.42 -0.75 -17.31 -3.31 -11.2 -2.08 -12.48 -2.23 -7.89 -0.5 -10.43 -6.88 -10.43 -6.29 -13.62 -4.73 -13.2 -3.3 -10.35 -0.18 -9.48 2.44 -12.59 1.96 -8.89 4.88 -2.38 2.9 -11.26 2.9 -15.21 4.47 -13.98 1.53 -12.59 -0.6 1.78 -2.79 -5.88 -0.27 -7.05 1.67 -7.32 -0.66 5.52 -3.92 -6.44 -1.16 -4.46 1.13 -5.4 2.02 -5.53 1.02 5.86 -7.43 -8.9 0.94 -7.24 2.96 -5.55 2.34 -7.04 0.03 -2.74 -9.05 -0.78 -6.93 -1.5 -4.31 -3.66 3.03 -4.22 6.03 -5.45 6.19 1.58 -6 -3.73 1.01 -2.85 2.47 -3.38 5.6 -2 3.23 -2.56 3.52 -3.05 3.82 -3.45 3.06 -3.3 2.88 -8.77 1.91zm103.13 -24.78c2.75,-0.64 1.61,1.82 8.11,0.29 0.24,1 2.44,6.46 3.29,6.91 0.64,0.33 1.27,0.5 2.15,0.55 1.75,0.08 12.43,-1.18 14.13,-1.23 5.28,-0.35 5.71,-0.6 7.56,-1.02 10.14,-2.39 21.94,-7.46 31.7,-10.87 5.54,-1.94 16.3,-5.9 19.93,-7.33 1,-0.41 -0.2,0.14 2.31,-0.91 2.11,-0.9 6.87,-1.78 7.26,-1.96 4.83,-2.19 14.45,-5.83 15.08,-6.94 2.14,-3.75 0.74,-5.43 0.78,-9.88 0.04,-4.89 -3.68,-12.55 -6.62,-17.61 -1.31,-2.26 -12.96,-8.31 -14.98,-7.95 -0.85,0.15 -1.39,0.15 -2.46,0.41 -2.09,0.41 -4.64,2.4 -7.65,3.01 -3.76,0.77 -8.09,0.16 -11.46,0.58 -0.86,0.11 -2.15,1.05 -2.18,2.6 -0.07,4.17 -0.42,7.5 0.35,8.77 0.9,1.49 31.24,-6.55 38.38,-7.42 0,0 1.34,2.66 1.33,2.73 -0.13,0.55 -40.92,7.66 -43.15,7.66 -2.24,0 -13.39,2.07 -13.77,2.14 -1,0.17 -6.75,0.7 -8.96,2.72 -5.1,4.65 -21.6,16.06 -28.25,21.11 -0.89,0.68 0.65,10.32 0.85,11.94 0.22,1.74 -0.05,3.44 -0.21,3.56 -0.5,0.39 -2.93,-13.2 -3.13,-14.27 -0.57,-2.93 2.24,-4.94 1.93,-4.82 -0.86,0.35 19.81,-13.29 26.44,-19.39 0.92,-0.84 1.87,-1.73 2.84,-2.65 0.76,-0.72 1.53,-1.46 2.3,-2.21 1.02,-0.99 -6.03,-1.24 -12.26,0.82 -8.28,3.38 -13.65,3.16 -15.27,9.31 -1.1,4.53 -12.86,14.13 -12.98,18.25 0.42,-0.1 1.15,1.91 2.2,5.44 0.4,1.33 0.03,0.64 0.16,1.21 -0.99,0.25 -6.97,-0.05 -8.75,1.04 -0.75,0.46 0.59,5.52 3,5.41z"},q={ref:"frame-07",class:"frame",d:"M180.92 76.97c2.75,-0.65 1.61,1.81 8.11,0.28 0.24,1.01 2.44,6.47 3.3,6.92 0.63,0.33 1.26,0.5 2.14,0.54 1.75,0.09 12.43,-1.17 14.13,-1.22 5.28,-0.35 5.71,-0.6 7.56,-1.02 10.14,-2.39 21.94,-7.46 31.7,-10.87 5.54,-1.94 16.3,-5.9 19.93,-7.33 1,-0.41 -0.2,0.14 2.31,-0.92 2.11,-0.89 6.87,-1.77 7.27,-1.95 4.82,-2.19 14.44,-5.83 15.08,-6.94 2.14,-3.75 0.73,-5.43 0.77,-9.88 0.04,-4.9 -3.68,-12.55 -6.62,-17.61 -1.31,-2.26 -12.96,-8.31 -14.98,-7.95 -0.84,0.15 -1.39,0.15 -2.46,0.41 -2.08,0.41 -4.64,2.4 -7.64,3.01 -3.76,0.77 -8.09,0.16 -11.47,0.58 -0.86,0.11 -2.15,1.05 -2.18,2.6 -0.07,4.17 -0.42,7.49 0.35,8.77 0.9,1.49 31.24,-6.55 38.38,-7.42 0,0 1.35,2.66 1.33,2.73 -0.13,0.55 -40.91,7.66 -43.15,7.66 -2.24,0 -13.39,2.07 -13.77,2.13 -1,0.18 -6.74,0.71 -8.96,2.73 -5.1,4.65 -21.59,16.06 -28.25,21.11 -0.89,0.68 0.65,10.32 0.86,11.94 0.22,1.74 -0.06,3.43 -0.22,3.56 -0.5,0.39 -2.92,-13.2 -3.13,-14.27 -0.57,-2.93 2.24,-4.94 1.93,-4.82 -0.86,0.35 19.81,-13.3 26.44,-19.39 0.92,-0.85 1.87,-1.73 2.84,-2.65 0.76,-0.72 1.53,-1.46 2.3,-2.21 1.02,-0.99 -6.03,-1.24 -12.25,0.82 -8.28,3.38 -13.66,3.16 -15.28,9.31 -1.1,4.52 -12.86,14.13 -12.98,18.25 0.43,-0.1 1.15,1.91 2.2,5.44 0.4,1.33 0.03,0.63 0.16,1.2 -0.99,0.26 -6.96,-0.04 -8.74,1.05 -0.76,0.46 0.58,5.52 2.99,5.41zm-91.48 -12.03l-11 6.94 -5.66 4.33 -0.94 8.16 -6.75 6.52 -9.17 6.17 -10.09 6.29 -3.71 2.59 -5.66 5.96 6.58 7.43 7.67 4.7 5.72 1.97 4.61 5.06 4.22 3.39 9.93 -4.24 14.36 -3.5 10.33 0.39 5.55 5.07 4.15 12.26 1.65 12.33 2.81 6.71 3.58 -13.27 3.96 16.72 3.2 5.65 3.39 -6.51 7.22 11.08 14.23 7.06 5.94 10.9 12.51 18.96 10.76 17.79 9.91 14.65 2.92 12.44 -10.58 1.2 -4.59 4.85 -3.56 5.61 -0.93 5.62 11.86 0.71 18.03 -0.23 3.14 -4.84 5.02 -9.07 2.6 -8.5 -1.9 -8.04 -4.27 -9.04 7.55 9 8.5 5.23 15.55 5.58 17.88 4.96 7.14 -0.63 6.47 -3.97 3.03 -4.08 -5.52 -1.47 2.18 -4.77 -8.36 -2.72 -7.39 -4.62 -5.02 -3.98 -9.87 1.1 -5.46 0.62 -10.19 -4.67 -5.27 -11.61 -3.41 -12.19 -3.31 -7.2 2.82 -1.65 4.86 4.74 6.56 0.59 12.14 -3.3 8.39 -3.39 14.7 -2.09 9.78 -0.35 3.27 -4.28 -0.24 -11.88 5.13 -1.02 4.83 -0.08 4.51 -5.7 1.23 -6.25 -2.42 -4.37 10.79 -1.48 8.78 2.78 2.58 -8.47 3.76 8.62 5.47 -18.58 2.39 6.24 3.56 -20.88 8.8 11.55 1.65 -4.15 10.96 5.62 14.75 3.84 -6.54 -8.83 25.19 7.11 12.47 1.58 -8.72 -8.39 27.4 -3.2 12.42 -4.06 -11.97 -2.86 15.99 -7.68 10.83 -11.74 7.51 -14.92 1.46 -7.38 -11.58 -1.29 5.64 -3.18 -16.28 -1.11 -12.64 5.05 11.58 -12.07 -13.08 3.96 -12.95 6.86 -10.97 7.19 -11.55 5.58 -14.24 0.69 -17.18 1.27 -11.45 -1.52 -12.68 -5.92 -17.46 -9.2 -13.81 -8.04 -20.96 -4.19 -17.15 2.79 -15.96 5.91 -11.84 4.27 -9.22 4.9 -12.87 5.67 -10.65 0.78 -17.91 -2.2 3.93 -3.7 -10.84 -0.54 6.52 -3.51 -7.74 -3.39 -7.49 -1.01 6.62 -3.3 -4.6 -3.45 -7.39 -1.27 -10.13 -1.61 7.25 -4.33 -9.22 -2.43 -7.78 1.47 -6.18 -2.26 -6.93 -9.15 -3.06 -8.69 -3.32 -7.65 -4.88 -6.39 -3.49 5.83 -1.58 4.4 -1.14 6.88 -2.51 5.46 -2.53 -6.7 -1.85 -3.9 -2.66 7.92 -0.64 7.03 0.22 5.55z"},G={ref:"frame-08",class:"frame",d:"M94.87 56.09l-12.61 8.21 -2 3.3 0.3 6.61 -8.81 7 -22.01 13.31 -5.61 6.01 9.51 8.7 8.01 5.01 4.6 6.8 5.5 -0.3 14.31 -2.3 10.71 0.1 8.31 3.5 5.6 7.31 2.51 7.41 -0.2 16.91 6 -9.11 1.5 18.32 4.81 -6.41 5.1 9.61 12.01 10.71 13.51 5.4 8.61 1.8 15.41 15.32 19.82 19.31 11.7 10.61 -7.8 7.41 -13.41 5 -6.01 0.4 -5.8 5.2 -4.21 7.51 3.61 3.2 8.2 0.5 6.51 2 5.8 -1.4 10.81 -7.6 9.81 -7.41 9.51 -5.2 23.22 4 19.01 0.6 10.01 -6.8 2.2 -11.01 -4.7 -3.71 -3.01 1.71 -3.8 -1.01 4 -2.3 5.71 -5.1 -2.1 -3.1 3.6 -3.21 1.6 -3.7 3.6 -2 0.71 -6.41 -4.51 -3.9 -7.8 -7.81 -2.11 -3.5 0.2 -6 8.51 -4.51 5 -1.5 6.21 3.41 0.2 -3.81 15.01 5.41 -1 -6.01 4 5.01 5.41 -17.12 1 12.31 5 -17.61 5.01 12.31 2.2 -4.01 13.81 9.21 15.51 4.61 4.51 -0.3 -12.01 -8.21 14.31 2.7 14.31 -0.6 -8.21 -5.2 16.01 -3.01 11.41 -7.7 10.01 -7.41 -11.01 0.5 13.31 -7.9 7.31 -7.41 -8.01 -0.4 12.61 -18.71 0.8 -13.22 -6.3 -19.81 -7.31 8.51 1.7 -6.51 -9.8 9.91 -5.31 3.7 -6.7 6.61 1.8 -8.61 -6.51 6.01 -6 6.6 -7.51 6.41 -11.61 5.4 -14.01 4.3 -16.01 2.01 -11.01 -0.81 -4 -9.7 -5.01 -5.91 -11.51 -6.8 -14.71 -4.31 -9.7 -3.7 -12.81 -4.11 -14.42 1.01 -12.01 3.2 -12.51 4.5 -11 4.6 -8.71 1.01 -8.01 -1.21 -7.2 -2.8 -9.51 -3.2 3.7 -1.4 -4.8 -1.8 -7.61 -0.7 9.61 -3.41 -5 -4.2 -7.01 -1.2 -6.1 -1 10.8 -2.2 -5.5 -3.71 -6.91 -1 -5 -0.5 12.71 -5 -4.6 -2.8 -4.91 -1.1 -9 -0.4 4 -3.81 -9.01 -1.4 -7.4 -0.4 -7.21 -10.61 -11.01 -11.21 -8.21 -9 -2.5 -6.21 -3.6 -4.8 -2.2 5.2 -0.3 11.81 -0.6 9.41 -3.61 -5 -3.2 -6.01 -2.1 -2.1 -1.2 6 -0.4 7.91 1.4 7.51 1.8 6.6 0 -0.1zm98 20.53c2.81,-0.27 1.34,2.01 7.99,1.39 0.09,1.03 1.52,6.74 2.31,7.3 0.59,0.42 1.18,0.68 2.05,0.84 1.73,0.33 12.47,0.55 14.16,0.74 5.28,0.37 5.74,0.19 7.63,0.02 10.38,-0.97 22.76,-4.37 32.89,-6.4 5.76,-1.16 16.96,-3.61 20.76,-4.52 1.04,-0.27 -0.22,0.12 2.41,-0.59 2.21,-0.59 7.05,-0.81 7.47,-0.93 5.07,-1.51 15.11,-3.8 15.89,-4.8 2.63,-3.42 1.47,-5.28 2.12,-9.68 0.72,-4.85 -1.91,-12.94 -4.13,-18.36 -0.98,-2.42 -11.69,-10.01 -13.74,-9.93 -0.86,0.03 -1.4,-0.05 -2.49,0.06 -2.13,0.12 -4.93,1.74 -7.99,1.94 -3.83,0.24 -8.04,-0.96 -11.44,-1.01 -0.87,-0.01 -2.27,0.75 -2.51,2.27 -0.65,4.13 -1.45,7.37 -0.87,8.74 0.69,1.6 31.85,-2.19 39.04,-2.07 0,0 0.97,2.82 0.94,2.89 -0.2,0.53 -41.58,1.96 -43.79,1.65 -2.22,-0.3 -13.55,0.21 -13.93,0.22 -1.02,0.03 -6.78,-0.23 -9.25,1.46 -5.7,3.91 -23.6,12.94 -30.89,17.03 -0.98,0.55 -0.78,10.31 -0.8,11.94 -0.02,1.76 -0.53,3.4 -0.7,3.5 -0.55,0.31 -1.08,-13.48 -1.14,-14.57 -0.15,-2.98 2.9,-4.58 2.57,-4.5 -0.89,0.22 21.46,-10.45 28.86,-15.57 1.03,-0.71 2.1,-1.46 3.19,-2.24 0.84,-0.61 1.71,-1.23 2.57,-1.87 1.15,-0.84 -5.79,-2.05 -12.25,-0.88 -8.66,2.22 -13.95,1.26 -16.41,7.13 -1.71,4.33 -14.68,12.22 -15.36,16.29 0.43,-0.04 0.87,2.05 1.43,5.69 0.21,1.37 -0.07,0.63 -0.01,1.21 -1.01,0.12 -6.89,-1 -8.81,-0.17 -0.81,0.36 -0.18,5.55 2.23,5.78zm31.4 114.38l-2.5 4.2 9.11 8.01 15.31 -3.7 1.3 -3.71 5.21 -6.4 5.2 -7.01 -7.1 -6.2 -4.01 -4.81 -6.5 7.61 -8.41 6.8 -7.61 5.21z"};function P(e,t,o,i,r,n){return(0,a.wg)(),(0,a.iD)("svg",O,[(0,a._)("g",x,[(0,a._)("path",U,null,512),(0,a._)("path",L,null,512),(0,a._)("path",j,null,512),(0,a._)("path",T,null,512),(0,a._)("path",z,null,512),(0,a._)("path",Z,null,512),(0,a._)("path",q,null,512),(0,a._)("path",G,null,512)])])}var M={data(){return{clock:null}},mounted(){var e=8,t=1,o=e;const i=this;clearInterval(this.clock),this.clock=setInterval((function(){i.$refs[`frame-0${t}`].style.visibility="visible",i.$refs[`frame-0${o}`].style.visibility="hidden",t<e?(t+=1,o=t-1):(t=1,o=e)}),75)},unmounted(){clearInterval(this.clock)}};const B=(0,u.Z)(M,[["render",P],["__scopeId","data-v-526a4f21"]]);var R=B,A=o(8903),N=(0,a.aZ)({props:["pageTitle","pageLogo","pageDefaultBackLink","hideBackLink","errorMessage","pageClass","cartComponent","contentOnScroll"],components:{IonPage:n._i,IonHeader:n.Gu,IonToolbar:n.sr,IonTitle:n.wd,IonContent:n.W2,IonButtons:n.Sm,IonRefresher:n.nJ,IonRefresherContent:n.Wo,IonFab:n.IJ,IonIcon:n.gu,IonButton:n.YG,CartHeader:S.Z,TezkelLoader:R},setup(){return{arrowBackOutline:A.Pjk,chevronBackOutline:A.ZY4,closeOutline:A.fID,shareOutline:A.d5n,addCircleOutline:A.hd1,logoAppleAppstore:A.$dN,logoGooglePlaystore:A.QQX}},data(){return{isIosPromptDismissed:localStorage.iosInstallAppPromptDismissed?1:0,isAndroidPromptDismissed:localStorage.androidInstallAppPromptDismissed?1:0}},computed:{isInteractingWithServer(){return this.$heap.state.isInteractingWithServer},canGoBack(){return this.hideBackLink?0:this.pageDefaultBackLink||history.state.back?1:0},isIos(){return(0,D.a)("ios")},iosInstallPromptShow(){return(0,D.a)("ios")&&!(0,D.a)("capacitor")&&!this.isIosPromptDismissed},androidInstallPromptShow(){return(0,D.a)("android")&&!(0,D.a)("capacitor")&&!this.isAndroidPromptDismissed}},methods:{reload(){location.reload()},goback(){if(this.pageDefaultBackLink)return this.$go(this.pageDefaultBackLink);history.back()},iosInstallPromptDismiss(){this.isIosPromptDismissed=localStorage.iosInstallAppPromptDismissed=1},androidInstallPromptDismiss(){this.isAndroidPromptDismissed=localStorage.androidInstallAppPromptDismissed=1}}});const H=(0,u.Z)(N,[["render",$]]);var F=H;const Y=e=>((0,a.dD)("data-v-7e1bf652"),e=e(),(0,a.Cn)(),e),E={class:"main-grid"},V=Y((()=>(0,a._)("div",null,null,-1))),K={style:{background:"white","max-width":"1200px"}},Q={class:"page-content",style:{}},J={key:0,style:{margin:"30px"}},X=Y((()=>(0,a._)("div",null,null,-1)));function ee(e,t,o,i,r,n){const l=(0,a.up)("ion-title"),s=(0,a.up)("cart-header"),u=(0,a.up)("ion-toolbar"),d=(0,a.up)("footer-desktop"),c=(0,a.up)("ion-content"),m=(0,a.up)("ion-page");return(0,a.wg)(),(0,a.j4)(m,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,{class:(0,h.C_)(["desktop-main-container",o.pageClass]),scrollEvents:o.contentOnScroll?"true":"false",onIonScroll:t[0]||(t[0]=e=>o.contentOnScroll(e))},{default:(0,a.w5)((()=>[(0,a._)("div",E,[V,(0,a._)("div",K,[(0,a._)("div",Q,[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Wm)(l,null,{default:(0,a.w5)((()=>[o.pageTitle?((0,a.wg)(),(0,a.iD)("h1",J,(0,h.zw)(o.pageTitle),1)):(0,a.kq)("",!0)])),_:1}),(0,a.Wm)(s,{slot:"end"})])),_:1}),(0,a.WI)(e.$slots,"default",{},void 0,!0)])]),X]),(0,a.Wm)(d)])),_:3},8,["class","scrollEvents"])])),_:3})}var te=o(8699),oe=o(7782),ie={setup(){return{cartOutline:A.Ox0}},computed:{cartListTotal(){return oe.Z.cart.listTotalGet()}},props:["pageTitle","pageDefaultBackLink","errorMessage","pageClass","cartComponent","contentOnScroll"],components:{IonPage:n._i,IonContent:n.W2,CartHeader:S.Z,FooterDesktop:te.Z,IonTitle:n.wd,IonToolbar:n.sr}};const re=(0,u.Z)(ie,[["render",ee],["__scopeId","data-v-7e1bf652"]]);var ne=re,ae=o(9755),le=o.n(ae),se=o(9042),ue=o(351),de=o(4405);o(3948),o(285),o(1637),o(6229),o(7330),o(2062);const ce={async init(){await this.recordIncomingUser()},async recordIncomingUser(){const e=localStorage.metric_id;if(e)return;const t=new URL(location.href),o=t.searchParams.get("m"),i=t.searchParams.get("inviter_user_id")||localStorage.inviter_user_id,r=document.referrer,n={come_media_id:o,come_inviter_id:i,come_referrer:r,come_url:t.href};try{localStorage.metric_id=await le().post(`${p.Z.state.hostname}Metric/itemCreate`,n)}catch(a){}}};var me=ce,pe=o(7327),he=(o(8862),o(4052)),_e=o(773);class ge{constructor(){(0,pe.Z)(this,"addListeners",(async()=>{await _e.V.addListener("registration",(e=>{ue.Z.firebase.savePushToken(e.value)})),await _e.V.addListener("registrationError",(e=>{})),await _e.V.addListener("pushNotificationActionPerformed",(e=>{var t,o;null!==e&&void 0!==e&&null!==(t=e.notification)&&void 0!==t&&null!==(o=t.data)&&void 0!==o&&o.link&&this.go(e.notification.data.link),this.dispatchIncoming(null===e||void 0===e?void 0:e.notification),console.log("pushNotificationActionPerformed: "+JSON.stringify(e))})),await _e.V.addListener("pushNotificationReceived",(async e=>{e.data.sound&&await he.ej.vibrate({duration:2e3}),this.dispatchIncoming(e),console.log("Push notification received: ",JSON.stringify(e))}))})),(0,pe.Z)(this,"registerNotifications",(async()=>{let e=await _e.V.checkPermissions();"prompt"===e.receive&&(e=await _e.V.requestPermissions()),e.receive,await _e.V.register()})),(0,pe.Z)(this,"setChannels",(async()=>{_e.V.createChannel({description:"Urgent Notifications",id:"com.tezkel.urgent",importance:5,lights:!0,name:"My Urgent notification channel",sound:"longsound.wav",vibration:!0,visibility:1,lightColor:"#FF0000"}),_e.V.createChannel({description:"High Notifications",id:"com.tezkel.high",importance:5,lights:!0,name:"My High notification channel",sound:"mediumsound.wav",vibration:!0,visibility:1,lightColor:"#FF0000"}),_e.V.createChannel({description:"Normal Notifications",id:"com.tezkel.normal",importance:5,lights:!0,name:"My Normal notification channel",sound:"shortsound.wav",vibration:!0,visibility:1,lightColor:"#FF0000"})})),(0,D.a)("capacitor")&&se.Z.on("userGet",(()=>{this.registerNotifications(),this.addListeners(),this.setChannels()}))}flash(){}alert(){}go(){}setFlashHandler(e){this.flash=e}setAlertHandler(e){this.alert=e}setGoHandler(e){this.go=e}dispatchIncoming(e){var t;const{title:o,body:i,topic:r,type:n}=null!==(t=e.data)&&void 0!==t?t:{};r?se.Z.publish(r,e.data):"flash"===n?this.flash(i):i&&this.alert(i,o)}}var fe=new ge,ye=o(5205);(0,ye.z)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\n")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available: Please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var we=o(5137);const ke={queue:[],idle:!0,push(e){this.queue[this.queue.length-1]!=e&&(this.queue.push(e),this.next())},next(){if(!this.idle)return;const e=this.queue.join("\n");this.queue=[],e&&this.flash(e)},flash(e){return(0,i.mG)(this,void 0,void 0,(function*(){this.idle=!1;const t=this,o=yield n.Mn.create({message:e,duration:2e3,color:"dark",position:"bottom"});o.present(),o.onDidDismiss().then((()=>{t.idle=!0,t.next()}))}))}},ve=e=>{ke.push(e)};let be;const Ie=(e,t)=>(0,i.mG)(void 0,void 0,void 0,(function*(){return se.Z.publish("dismissModal"),be&&be.dismiss(),be=yield n.Cl.create({header:t,message:e,translucent:!0,buttons:["Ok"]}),yield be.present(),yield be.onDidDismiss()})),We=e=>(0,i.mG)(void 0,void 0,void 0,(function*(){m.Z.push(e)}));le()(document).ajaxError(((e,t,o,i)=>{const r=t.status;403==r?p.Z.getters.userIsLogged?ve("К сожалению, нет прав для этого действия"):(se.Z.publish("dismissModal"),ve("Вы не выполнили вход, пожалуйста авторизируйтесь"),m.Z.push({path:"/user/sign-in"})):401==r&&(ve("Вы не выполнили вход, пожалуйста авторизируйтесь"),se.Z.publish("dismissModal"),m.Z.push({path:"/user/sign-in"})),0==r&&se.Z.publish("dismissModal")})),le()(document).ajaxSend((()=>{p.Z.commit("setInteractionStatus",1)})),le()(document).ajaxComplete((()=>{setTimeout((()=>{p.Z.commit("setInteractionStatus",-1)}),100)})),"serviceWorker"in navigator&&(navigator.serviceWorker.onmessage=e=>{var t;const{data:o}=null!==(t=e.data)&&void 0!==t?t:{},{title:i,body:r,topic:n,type:a}=null!==o&&void 0!==o?o:{};n?se.Z.publish(n,o):"flash"===a?ve(r):r?Ie(r,i):console.log("UNHANDLED WEBPUSH",o)});const Ce=(0,r.ri)(c).use(n.oX).use(m.Z).use(p.Z);Ce.provide("$Order",oe.Z),Ce.config.globalProperties.$heap=p.Z,Ce.config.globalProperties.$flash=ve,Ce.config.globalProperties.$alert=Ie,Ce.config.globalProperties.$topic=se.Z,Ce.config.globalProperties.$go=We;const $e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(window.navigator.userAgent);function De(){return(0,i.mG)(this,void 0,void 0,(function*(){const e=yield de.Z.pref.get("sessionId");e&&(console.log(e),yield ue.Z.sessionIdUse(e)),Ce.mount("#app"),yield ue.Z.autoSignIn(),me.init(),fe.setFlashHandler(ve),fe.setAlertHandler(Ie),fe.setGoHandler(We),we.g.addListener("appUrlOpen",(function(e){const t=e.url.split(".com").pop();t&&We(t)}))}))}$e?Ce.component("base-layout",F):Ce.component("base-layout",ne),De()},2008:function(e,t,o){"use strict";o(4916),o(5306),o(3948),o(7658),o(8862);var i=o(3907);const r=(0,i.MT)({state(){const e=localStorage.hostname||"https://api.tezkel.com/";return{hostname:e,user:{user_id:-1},settings:null,currencySign:"₽",isInteractingWithServer:0}},getters:{hostname(e){return e.hostname},settings(e){return e.settings||{}},userIsLogged(e){return e.user.user_id>0},isOnline(e){const t=1;return e.user.user_id>0&&t},cartListRestore(){const e=30,t=new Date;t.setDate(t.getDate()-e);const o=t.toISOString().replace(/[T]/g," ").replace(/.\d\d\dZ/,""),i=[];let r=[];if(localStorage.cartList&&(r=JSON.parse(localStorage.cartList)),r&&r.length)for(const n of r)n&&n.created_at>o&&n.order_store_id&&i.push(n);return i}},mutations:{setUser(e,t){e.user=t},setSettings(e,t){e.settings=t},setUserMainLocation(e,t){e.user.location_main=t},setUserCurrentLocation(e,t){e.user.location_current=t},setCurrentStore(e,t){e.currentStore=t},setCurrentOrder(e,t){e.currentOrder=t},setInteractionStatus(e,t){e.isInteractingWithServer+=t},cartListStore(e,t){e.cartList=t,localStorage.cartList=JSON.stringify(t),this.commit("cartWathcerPrepare",t)},cartWathcerPrepare(e,t){const o={};for(const i of t)for(const e of i.entries)o[e.product_id]=e.entry_quantity;e.cartProductWatchList=o}}});r.state.cartList=r.getters.cartListRestore,r.commit("cartWathcerPrepare",r.state.cartList),t.Z=r},5625:function(e,t,o){"use strict";o.d(t,{Z:function(){return Vo}});o(3948);var i=o(4297),r=(o(4916),o(6252)),n=o(3577);const a={class:"tabbar_svg_logo"},l={key:0,color:"warning",class:"badge"};function s(e,t,o,i,s,u){const d=(0,r.up)("ion-router-outlet"),c=(0,r.up)("ion-icon"),m=(0,r.up)("ion-label"),p=(0,r.up)("ion-tab-bar"),h=(0,r.up)("ion-tabs"),_=(0,r.up)("ion-page");return(0,r.wg)(),(0,r.j4)(_,null,{default:(0,r.w5)((()=>[(0,r.Wm)(h,{style:{position:"relative"}},{default:(0,r.w5)((()=>[(0,r.Wm)(d),(0,r.Wm)(p,{class:"main-tab-bar",slot:"bottom"},{default:(0,r.w5)((()=>[(0,r._)("div",a,[(0,r.Wm)(c,{class:"ion-color ion-color-primary",icon:i.mainLogo},null,8,["icon"])]),(0,r._)("div",{onClick:t[0]||(t[0]=e=>u.tabClicked("/catalog")),ref:"catalogtab"},[(0,r.Wm)(c,{class:"active",color:"primary",icon:i.home},null,8,["icon"]),(0,r.Wm)(c,{class:"passive",icon:i.homeOutline},null,8,["icon"]),(0,r.Wm)(m,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Каталог")])),_:1})],512),(0,r._)("div",{onClick:t[1]||(t[1]=e=>u.tabClicked("/search")),ref:"searchtab"},[(0,r.Wm)(c,{class:"active",color:"primary",icon:i.search},null,8,["icon"]),(0,r.Wm)(c,{class:"passive",icon:i.searchOutline},null,8,["icon"]),(0,r.Wm)(m,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Поиск")])),_:1})],512),(0,r._)("div",{onClick:t[2]||(t[2]=e=>u.tabClicked("/order")),ref:"ordertab",style:{position:"relative"}},[(0,r.Wm)(c,{class:"active",color:"primary",icon:i.reader},null,8,["icon"]),(0,r.Wm)(c,{class:"passive",icon:i.readerOutline},null,8,["icon"]),s.activeOrderCount>0?((0,r.wg)(),(0,r.iD)("div",l,(0,n.zw)(s.activeOrderCount),1)):(0,r.kq)("",!0),(0,r.Wm)(m,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Заказы")])),_:1})],512),(0,r._)("div",{onClick:t[3]||(t[3]=e=>u.tabClicked("/user")),ref:"usertab"},[(0,r.Wm)(c,{class:"active",color:"primary",icon:i.person},null,8,["icon"]),(0,r.Wm)(c,{class:"passive",icon:i.personOutline},null,8,["icon"]),(0,r.Wm)(m,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Профиль")])),_:1})],512)])),_:1})])),_:1})])),_:1})}o(7658);var u=o(4929),d=o(7782),c=o(8903),m=o(94),p={components:{IonPage:u._i,IonTabBar:u.yq,IonTabs:u.UN,IonIcon:u.gu,IonLabel:u.Q$,IonRouterOutlet:u.jP},setup(){return{mainLogo:m,homeOutline:c.TSh,home:c.LEH,searchOutline:c.W6I,search:c.yC4,personOutline:c.QJ7,person:c.lBs,readerOutline:c.$1v,reader:c.r1b}},data(){return{activeOrderCount:0,tabRoutes:{},tabSelected:"",can_click:0}},async created(){const e=this;this.$topic.on("pushStageChanged",(t=>{e.activeOrderCount=null===t||void 0===t?void 0:t.orderActiveCount})),this.activeOrderCount=await d.Z.api.listCount();const t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(window.navigator.userAgent);t||document.querySelector(".main-tab-bar").classList.add("main-tab-bar-adaptive"),this.tabSelect()},methods:{tabClicked(e){var t;const o=Date.now();if(this.can_click>o)return;this.can_click=o+300;const i=null===e||void 0===e||null===(t=e.split("/"))||void 0===t?void 0:t[1];this.tabSelected!==i&&this.tabRoutes[i]?this.$router.push(this.tabRoutes[i]):this.$router.push(e)},tabSelect(){var e,t,o;const i=this.$route.href;if(!i)return;const r=null===i||void 0===i||null===(e=i.split("/"))||void 0===e?void 0:e[1],n=(r||"catalog")+"tab";null===(t=document.querySelector(".tab-selected"))||void 0===t||null===(o=t.classList)||void 0===o||o.remove("tab-selected"),this.$refs[n]&&(this.$refs[n].className="tab-selected"),this.tabRoutes[r]=i,this.tabSelected=r}},watch:{$route(e,t){this.tabSelect()}}},h=o(3744);const _=(0,h.Z)(p,[["render",s]]);var g=_;const f={key:0,class:"store-list"},y=(0,r._)("h5",{slot:"start",style:{background:"#eee","border-radius":"5px",padding:"5px",width:"120px",color:"#999"}},"#",-1),w={style:{display:"grid","grid-template-columns":"330px 330px"}},k={key:1},v=(0,r._)("img",{src:"/img/404_store.png"},null,-1),b=(0,r._)("h2",null,"Вне зоны обслуживания",-1),I={style:{color:"#333"}},W={style:{color:"var(--ion-color-primary)"}},C={key:2};function $(e,t,o,i,a,l){const s=(0,r.up)("home-slider"),u=(0,r.up)("user-address-widget"),d=(0,r.up)("ion-skeleton-text"),c=(0,r.up)("ion-item"),m=(0,r.up)("ion-col"),p=(0,r.up)("ion-row"),h=(0,r.up)("ion-grid"),_=(0,r.up)("ion-card-subtitle"),g=(0,r.up)("ion-card-header"),$=(0,r.up)("ion-input"),D=(0,r.up)("ion-button"),S=(0,r.up)("ion-card-content"),O=(0,r.up)("ion-card"),x=(0,r.up)("home-promo-product-slider"),U=(0,r.up)("home-primary-category-widget"),L=(0,r.up)("home-store-slider"),j=(0,r.up)("ion-list"),T=(0,r.up)("ion-note"),z=(0,r.up)("base-layout");return(0,r.wg)(),(0,r.j4)(z,{pageLogo:i.mainLogo,hideBackLink:"true"},{default:(0,r.w5)((()=>[(0,r.Wm)(s),(0,r.Wm)(u,{deliveryTime:a.primaryDeliveryTime},null,8,["deliveryTime"]),a.storeList?0==a.storeList.length?((0,r.wg)(),(0,r.iD)("div",k,[(0,r.Wm)(h,null,{default:(0,r.w5)((()=>[(0,r.Wm)(p,null,{default:(0,r.w5)((()=>[(0,r.Wm)(m,{"size-xs":"12","size-sm":"6"},{default:(0,r.w5)((()=>[v])),_:1}),(0,r.Wm)(m,{"size-xs":"12","size-sm":"6"},{default:(0,r.w5)((()=>{var e;return[b,(0,r._)("p",I,[(0,r.Uk)("Поблизости к адресу "),(0,r._)("b",W,(0,n.zw)(null!==(e=l.showndelivery_address)&&void 0!==e?e:"доставки заказа"),1),(0,r.Uk)(", который вы выбрали, пока нет подходящих ресторанов и магазинов.")])]})),_:1})])),_:1})])),_:1}),a.outofrangeFormHidden?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(O,{key:0},{default:(0,r.w5)((()=>[(0,r.Wm)(g,null,{default:(0,r.w5)((()=>[(0,r.Wm)(_,null,{default:(0,r.w5)((()=>[(0,r.Uk)(" Заполните форму и мы уведомим вас, когда появится ресторан или магазин поблизости.")])),_:1})])),_:1}),(0,r.Wm)(S,null,{default:(0,r.w5)((()=>{var o,i;return[null!==(o=e.$heap.state.user)&&void 0!==o&&o.user_phone?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)($,{key:0,modelValue:a.out.phone,"onUpdate:modelValue":t[0]||(t[0]=e=>a.out.phone=e),label:"Номер телефона","label-placement":"floating",value:null===(i=e.$heap.state.user)||void 0===i?void 0:i.user_phone},null,8,["modelValue","value"])),l.showndelivery_address?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)($,{key:1,modelValue:a.out.address,"onUpdate:modelValue":t[1]||(t[1]=e=>a.out.address=e),label:"Желаемый адрес","label-placement":"floating",value:l.showndelivery_address},null,8,["modelValue","value"])),(0,r.Wm)($,{modelValue:a.out.comment,"onUpdate:modelValue":t[2]||(t[2]=e=>a.out.comment=e),label:"Ваш комментарий","label-placement":"floating"},null,8,["modelValue"]),(0,r.Wm)(D,{expand:"block",onClick:t[3]||(t[3]=e=>l.outFormSend())},{default:(0,r.w5)((()=>[(0,r.Uk)("отправить заявку")])),_:1})]})),_:1})])),_:1})),(0,r.Wm)(c,{button:"",detail:"",onClick:t[4]||(t[4]=t=>e.$go("/page/supplier-guide"))},{default:(0,r.w5)((()=>[(0,r.Uk)(" Хотите стать продавцом здесь? Узнайте о преимуществах. ")])),_:1})])):a.storeList&&a.storeList.length>0?((0,r.wg)(),(0,r.iD)("div",C,[(0,r.Wm)(x,{"store-list":a.storeList,limit:30,titleColor:"#f77f00"},null,8,["store-list"]),(0,r.Wm)(U,{"category-limit":"10",titleColor:"#0097d2"}),(0,r.Wm)(j,{ref:"storeSlidersContainer"},{default:(0,r.w5)((()=>[a.storeSliderLoadQueue>=0?((0,r.wg)(),(0,r.j4)(L,{key:0,"store-list":a.storeList,filter:{member_of_groups:{value:"fastfood",type:"includes"}},sliderTitle:"Фастфуд",sliderTitleColor:"#ff0000",backgroundImage:"/img/fastfood_background.jpg"},null,8,["store-list"])):(0,r.kq)("",!0),a.storeSliderLoadQueue>=1?((0,r.wg)(),(0,r.j4)(L,{key:1,"store-list":a.storeList,filter:{member_of_groups:{value:"restaraunt",type:"includes"}},sliderTitle:"Рестораны",sliderTitleColor:"#326cd9",backgroundImage:"/img/restaurant_background.jpg"},null,8,["store-list"])):(0,r.kq)("",!0),a.storeSliderLoadQueue>=2?((0,r.wg)(),(0,r.j4)(L,{key:2,"store-list":a.storeList,filter:{member_of_groups:{value:"halal",type:"includes"}},sliderTitle:"Халяль",sliderTitleColor:"#41a663",backgroundImage:"/img/halal_background.jpg"},null,8,["store-list"])):(0,r.kq)("",!0),a.storeSliderLoadQueue>=3?((0,r.wg)(),(0,r.j4)(L,{key:3,"store-list":a.storeList,filter:{member_of_groups:{value:"foodstore",type:"includes"}},sliderTitle:"Магазины",sliderTitleColor:"#893abf",backgroundImage:"/img/market_background.jpg"},null,8,["store-list"])):(0,r.kq)("",!0)])),_:1},512),a.suggestFormHidden?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(O,{key:0},{default:(0,r.w5)((()=>[(0,r.Wm)(g,null,{default:(0,r.w5)((()=>[(0,r.Wm)(_,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Не нашли то, что искали?")])),_:1})])),_:1}),(0,r.Wm)(S,null,{default:(0,r.w5)((()=>[(0,r.Wm)($,{modelValue:a.storeSuggestion,"onUpdate:modelValue":t[5]||(t[5]=e=>a.storeSuggestion=e),label:"",helperText:"маркет, магазин, кафе, ресторан, аптека",placeholder:"ваше предложение"},null,8,["modelValue"]),(0,r.Wm)(D,{expand:"block",onClick:t[6]||(t[6]=e=>l.suggestFormSend()),color:"light"},{default:(0,r.w5)((()=>[(0,r.Uk)("отправить")])),_:1})])),_:1})])),_:1})),a.hiddenCount>0?((0,r.wg)(),(0,r.j4)(c,{key:1,lines:"none",style:{"margin-top":"30px",color:"#ddd"}},{default:(0,r.w5)((()=>[(0,r.Wm)(T,null,{default:(0,r.w5)((()=>[(0,r.Uk)(" Количество продавцов, находящихся за пределами радиуса доставки, скрытых из результатов "),(0,r._)("b",null,(0,n.zw)(a.hiddenCount),1)])),_:1})])),_:1})):(0,r.kq)("",!0)])):(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",f,[(0,r.Wm)(c,{lines:"none",style:{"--padding-start":"10px"}},{default:(0,r.w5)((()=>[y,(0,r.Wm)(d,{slot:"end",style:{width:"130px","border-radius":"3px"}})])),_:1}),(0,r._)("div",w,[((0,r.wg)(),(0,r.iD)(r.HY,null,(0,r.Ko)([1,1,1,1],(e=>(0,r._)("div",{button:"",key:e},[(0,r.Wm)(d,{style:{width:"310px",height:"180px","border-radius":"5px","margin-left":"10px"},animated:""}),(0,r.Wm)(c,{lines:"none"},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{slot:"start",style:{width:"130px","border-radius":"3px"}}),(0,r.Wm)(d,{slot:"end",style:{width:"60px","border-radius":"3px"}})])),_:1})]))),64))])]))])),_:1},8,["pageLogo"])}o(1817);const D=["src","alt"],S={class:"home_slide"},O={style:{"font-size":"3em"}};function x(e,t,o,i,a,l){const s=(0,r.up)("swiper-slide"),u=(0,r.up)("swiper");return e.home_slides?((0,r.wg)(),(0,r.j4)(u,{key:0,modules:e.modules,autoplay:{delay:6e3,disableOnInteraction:!1},loop:!0,class:"home-swiper"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.home_slides,(t=>((0,r.wg)(),(0,r.j4)(s,{key:t.title,style:(0,n.j5)(`background-color:${t.color};`),onClick:o=>e.go(t.link)},{default:(0,r.w5)((()=>[(0,r._)("img",{src:t.image,class:"home_slide_img",alt:t.alt},null,8,D),(0,r._)("div",S,[(0,r._)("h1",O,(0,n.zw)(t.title),1),(0,r._)("p",null,(0,n.zw)(t.description),1)])])),_:2},1032,["style","onClick"])))),128))])),_:1},8,["modules"])):(0,r.kq)("",!0)}var U=o(9755),L=o.n(U),j=o(702),T=o(3181),z=(0,r.aZ)({components:{Swiper:T.t,SwiperSlide:T.o},setup(){return{modules:[j.pt]}},data(){return{home_slides:null,error:""}},created(){this.getSlideList()},methods:{async getSlideList(){try{const e=await L().get("/assets/homeslider/conf.json");this.home_slides=e.slides}catch(e){}},go(e){e&&this.$go(e)}}});const Z=(0,h.Z)(z,[["render",x],["__scopeId","data-v-9b8e5828"]]);var q=Z;const G={key:0,id:"primary-category-wrapper",class:"ion-padding-vertical"},P={slot:"start",class:"section-title"},M=["onClick"],B={class:"category-label"},R={key:0},A={key:1},N={key:0},H={key:1},F={key:2},Y={key:0,lines:"none"};function E(e,t,o,i,a,l){const s=(0,r.up)("ion-item"),u=(0,r.up)("ion-img"),d=(0,r.up)("ion-card"),c=(0,r.up)("ion-card-title"),m=(0,r.up)("ion-col"),p=(0,r.up)("ion-row"),h=(0,r.up)("ion-grid"),_=(0,r.up)("ion-label"),g=(0,r.up)("ion-text");return e.productGroupList?((0,r.wg)(),(0,r.iD)("div",G,[(0,r.Wm)(s,{lines:"none",style:{"--background":"transparent","--padding-start":"10px"}},{default:(0,r.w5)((()=>[(0,r._)("h5",P,[(0,r._)("span",{class:"fake-label",style:(0,n.j5)(`background-color: ${e.titleColor}`)},"#Маркет",4)])])),_:1}),(0,r.Wm)(h,{class:"primary-category-grid ion-margin-top ion-no-padding",onClick:t[1]||(t[1]=t=>e.$go(`/catalog/store-${e.primaryStoreData.store_id}`)),style:(0,n.j5)(`background: no-repeat center/ cover url(${e.$heap.state.hostname}/image/get.php/${e.primaryStoreData.image_hash}.1500.1500.webp); height: 250px;`)},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{class:"primary-category-container ion-padding-vertical"},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{class:"primary-categories horizontalScroller"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.productGroupList,(t=>((0,r.wg)(),(0,r.iD)("div",{key:t.group_id,onClick:o=>e.$go(`/catalog/store-${e.primaryStoreData.store_id}?parent_group_id=${t.group_id}`),style:{cursor:"pointer"}},[(0,r.Wm)(d,{class:"ion-no-margin"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{style:{width:"70px",height:"70px"},src:e.$heap.state.hostname+"image/get.php/"+t.image_hash+".200.200.webp"},null,8,["src"])])),_:2},1024),(0,r._)("div",B,(0,n.zw)(t.group_name),1)],8,M)))),128)),(0,r._)("div",{onClick:t[0]||(t[0]=t=>e.$go(`/catalog/store-${e.primaryStoreData.store_id}`)),style:{cursor:"pointer"}},[(0,r.Wm)(d,{class:"ion-no-margin ion-align-items-center ion-text-center",style:{display:"grid",width:"70px",height:"70px"}},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{style:{"font-size":"12px"}},{default:(0,r.w5)((()=>[(0,r.Uk)("Ещё...")])),_:1})])),_:1})])])),_:1})])),_:1})])),_:1},8,["style"]),(0,r.Wm)(h,{class:"store-indicators"},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{class:"ion-justify-content-between"},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{size:"auto"},{default:(0,r.w5)((()=>[(0,r._)("div",{onClick:t[2]||(t[2]=t=>e.$go(`/catalog/store-${e.primaryStoreData.store_id}`)),style:{cursor:"pointer"},class:""},[(0,r.Wm)(_,{lines:"none",class:"store-title",style:{"font-family":"Roboto","font-size":"17px"}},{default:(0,r.w5)((()=>[(0,r._)("b",null,(0,n.zw)(e.primaryStoreData.store_name),1)])),_:1})])])),_:1})])),_:1}),(0,r.Wm)(p,{class:"ion-justify-content-between",style:{"font-size":"12px"}},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{size:"auto",class:"indicator-label"},{default:(0,r.w5)((()=>[1==e.primaryStoreData.is_opened?((0,r.wg)(),(0,r.iD)("div",R,[(0,r._)("label",null,[(0,r.Wm)(g,{color:"success"},{default:(0,r.w5)((()=>[(0,r.Uk)(" ◉ ")])),_:1}),(0,r.Uk)(),(0,r.Wm)(g,{class:"indicator-label-text",color:"medium"},{default:(0,r.w5)((()=>[(0,r.Uk)("открыт до "+(0,n.zw)(e.primaryStoreData.store_time_closes)+":00",1)])),_:1})])])):((0,r.wg)(),(0,r.iD)("div",A,[0==e.primaryStoreData.is_working?((0,r.wg)(),(0,r.iD)("label",N,[(0,r.Wm)(g,{class:"indicator-label-text"},{default:(0,r.w5)((()=>[(0,r.Uk)(" ◉ ")])),_:1}),(0,r.Wm)(g,{color:"medium"},{default:(0,r.w5)((()=>[(0,r.Uk)("временно не работает")])),_:1})])):e.primaryStoreData.store_next_time_opens>0?((0,r.wg)(),(0,r.iD)("label",H,[(0,r.Wm)(g,{class:"indicator-label-text"},{default:(0,r.w5)((()=>[(0,r.Uk)(" ◉ ")])),_:1}),(0,r.Wm)(g,{color:"medium"},{default:(0,r.w5)((()=>[(0,r.Uk)("закрыт до "+(0,n.zw)(e.primaryStoreData.store_next_time_opens)+":00",1)])),_:1})])):((0,r.wg)(),(0,r.iD)("label",F,[(0,r.Wm)(g,{color:"danger"},{default:(0,r.w5)((()=>[(0,r.Uk)(" ◉ ")])),_:1}),(0,r.Wm)(g,{class:"indicator-label-text"},{default:(0,r.w5)((()=>[(0,r.Uk)("закрыт")])),_:1})]))]))])),_:1}),(0,r.Wm)(m,{size:"auto",class:"indicator-label"},{default:(0,r.w5)((()=>[e.deliveryTime.timeMin?((0,r.wg)(),(0,r.iD)("div",Y,[(0,r.Wm)(g,{class:"indicator-label-text"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,n.zw)(e.deliveryTime.timeMin)+"-"+(0,n.zw)(e.deliveryTime.timeMax)+"мин",1)])),_:1})])):(0,r.kq)("",!0)])),_:1})])),_:1})])),_:1})])):(0,r.kq)("",!0)}var V=o(2008),K=o(9042),Q=o(4405),J=(0,r.aZ)({components:{IonImg:u.Xz,IonText:u.yW,IonGrid:u.jY,IonItem:u.Ie,IonCol:u.wI,IonRow:u.Nd,IonCard:u.PM,IonCardTitle:u.Dq,IonLabel:u.Q$},props:["categoryLimit","titleColor"],setup(){return{chevronBackOutline:c.ZY4,chevronForwardOutline:c.Dji}},data(){return{productGroupList:null,primaryStoreData:null,deliveryTime:{},main_location_id:null,old_location_id:-1}},mounted(){let e=this;this.$topic.on("userMainLocationSet",(t=>{e.main_location_id=t.location_id,e.productGroupListGet()})),this.$topic.on("userGet",(t=>{var o;e.main_location_id=null===(o=t.location_main)||void 0===o?void 0:o.location_id,e.productGroupListGet()})),this.main_location_id=V.Z.state.user.location_main?V.Z.state.user.location_main.location_id:null,this.productGroupListGet()},methods:{async productGroupListGet(){if(this.main_location_id&&this.old_location_id!=this.main_location_id){this.old_location_id=this.main_location_id;try{const e=await L().get(V.Z.state.hostname+"Store/primaryNearGet",{location_id:this.main_location_id});this.productGroupList=Object.entries(e.category_list).slice(0,this.categoryLimit).map((e=>e[1])),this.deliveryTime=Q.Z.deliveryTimeCalculate(e.distance,e.store_time_preparation),this.primaryStoreData=e,this.$emit("deliveryTimeGet",this.deliveryTime)}catch(e){this.productGroupList=null,this.primaryStoreData=null,this.$emit("deliveryTimeGet",null)}}}}});const X=(0,h.Z)(J,[["render",E],["__scopeId","data-v-ca72d610"]]);var ee=X;const te={key:0,class:"promo-slider-container ion-margin-vertical"},oe={slot:"start",class:"section-title"},ie={class:"horizontalScroller promo-slider",style:{"overflow-y":"hidden"},ref:"promoSlider"},re=["onClick"],ne=["src"],ae={class:"promo-title"},le={class:"promo-title",style:{color:"var(--ion-color-primary)","font-size":"1.2em"}},se={key:0,style:{color:"var(--ion-color-danger)","font-size":"0.5em"}};function ue(e,t,o,i,a,l){const s=(0,r.up)("ion-item"),u=(0,r.up)("ion-icon"),d=(0,r.up)("ion-button"),c=(0,r.up)("ion-col"),m=(0,r.up)("ion-row"),p=(0,r.up)("ion-chip"),h=(0,r.up)("ion-img"),_=(0,r.up)("ion-card");return l.promo_list&&l.promo_list.length>0?((0,r.wg)(),(0,r.iD)("div",te,[(0,r.Wm)(s,{lines:"none",style:{"--background":"transparent","--padding-start":"10px"}},{default:(0,r.w5)((()=>[(0,r._)("h5",oe,[(0,r._)("span",{class:"fake-label",style:(0,n.j5)(`background-color: ${o.titleColor}`)},"#Акция",4)])])),_:1}),a.isMobile?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(m,{key:0,class:"ion-justify-content-between ion-align-items-center"},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{class:"ion-text-start"},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{onClick:t[0]||(t[0]=e=>l.scrollSlider("prev")),shape:"round",color:"light"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{slot:"icon-only",icon:i.chevronBackOutline},null,8,["icon"])])),_:1})])),_:1}),(0,r.Wm)(c,{class:"ion-text-end"},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{onClick:t[1]||(t[1]=e=>l.scrollSlider("next")),shape:"round",color:"light"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{slot:"icon-only",icon:i.chevronForwardOutline},null,8,["icon"])])),_:1})])),_:1})])),_:1})),(0,r._)("div",ie,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.promo_list,((t,o)=>((0,r.wg)(),(0,r.iD)("div",{key:o,style:{width:"120px"},class:"promo-item ion-margin-horizontal"},[(0,r._)("div",{onClick:o=>e.$go(`/catalog/product-${t.product_id}`),style:{position:"relative"}},[(0,r.Wm)(p,{class:"promo-label",style:{background:"var(--ion-color-success)",color:"white"}},{default:(0,r.w5)((()=>[(0,r._)("b",null,(0,n.zw)(t.perk_label),1)])),_:2},1024),(0,r.Wm)(_,{class:"promo-image",style:{width:"100px",height:"100px",margin:"0","border-radius":"1000000px"}},{default:(0,r.w5)((()=>[(0,r._)("img",{class:"blur-image",src:`${e.$heap.state.hostname}image/get.php/${t.image_hash}.10.10.png`},null,8,ne),(0,r.Wm)(h,{onClick:o=>e.$go(`/catalog/product-${t.product_id}`),src:`${e.$heap.state.hostname}image/get.php/${t.image_hash}.150.150.webp`},null,8,["onClick","src"])])),_:2},1024),(0,r._)("div",ae,[(0,r._)("b",null,(0,n.zw)(t.perk_title),1)]),(0,r._)("div",le,[t.product_price!=t.product_final_price?((0,r.wg)(),(0,r.iD)("span",se,[(0,r._)("s",null,(0,n.zw)(t.product_price)+(0,n.zw)(e.$heap.state.currencySign),1),(0,r.Uk)("   ")])):(0,r.kq)("",!0),(0,r.Uk)(" "+(0,n.zw)(t.product_final_price)+(0,n.zw)(e.$heap.state.currencySign),1)])],8,re)])))),128))],512)])):(0,r.kq)("",!0)}var de={components:{IonImg:u.Xz,IonChip:u.hM,IonRow:u.Nd,IonIcon:u.gu,IonButton:u.YG,IonCol:u.wI,IonCard:u.PM,IonItem:u.Ie},setup(){return{chevronBackOutline:c.ZY4,chevronForwardOutline:c.Dji}},props:["storeList","titleColor","limit"],data(){return{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(window.navigator.userAgent)}},computed:{promo_list(){return this.filterSubstract(this.storeList).slice(0,this.limit)}},methods:{filterSubstract(e){let t=[];for(var o in e)if(e[o].perks.length>0){let i=e[o].perks.filter((e=>{if(e.product_id)return!0}));t=t.concat(i)}return t},scrollSlider(e){let t,o=330;"prev"==e&&(t=this.$refs.promoSlider.scrollLeft-o),"next"==e&&(t=this.$refs.promoSlider.scrollLeft+o),this.$refs.promoSlider.scrollTo({top:0,left:t,behavior:"smooth"})}}};const ce=(0,h.Z)(de,[["render",ue],["__scopeId","data-v-69ad82a1"]]);var me=ce;const pe={key:0,class:"store-slider-container ion-padding-vertical"},he={slot:"start",class:"section-title"},_e={class:"horizontalScroller store-slider",ref:"storeSlider"},ge=["onClick"],fe=["src"],ye=["onClick"],we={key:0},ke={key:1},ve={key:0},be={key:1},Ie={key:2},We={key:0,lines:"none"};function Ce(e,t,o,i,a,l){const s=(0,r.up)("ion-icon"),u=(0,r.up)("ion-button"),d=(0,r.up)("ion-col"),c=(0,r.up)("ion-row"),m=(0,r.up)("ion-item"),p=(0,r.up)("ion-img"),h=(0,r.up)("ion-card"),_=(0,r.up)("ion-label"),g=(0,r.up)("ion-text"),f=(0,r.up)("ion-grid");return l.list_filtered&&l.list_filtered[0]?((0,r.wg)(),(0,r.iD)("div",pe,[a.isMobile?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(c,{key:0,class:"scroller-navigation ion-justify-content-between ion-align-items-center"},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{class:"ion-text-start"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{onClick:t[0]||(t[0]=e=>l.scrollSlider("prev")),shape:"round",color:"light"},{default:(0,r.w5)((()=>[(0,r.Wm)(s,{slot:"icon-only",icon:i.chevronBackOutline},null,8,["icon"])])),_:1})])),_:1}),(0,r.Wm)(d,{class:"ion-text-end"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{onClick:t[1]||(t[1]=e=>l.scrollSlider("next")),shape:"round",color:"light"},{default:(0,r.w5)((()=>[(0,r.Wm)(s,{slot:"icon-only",icon:i.chevronForwardOutline},null,8,["icon"])])),_:1})])),_:1})])),_:1})),(0,r.Wm)(m,{class:"ion-justify-content-between",lines:"none",style:{"--background":"transparent","--padding-start":"10px"}},{default:(0,r.w5)((()=>[(0,r._)("h5",he,[(0,r._)("span",{class:"fake-label",style:(0,n.j5)(`background-color: ${o.sliderTitleColor}`)},"#"+(0,n.zw)(o.sliderTitle),5)]),(0,r._)("a",{slot:"end",onClick:t[2]||(t[2]=e=>l.storeListModal(o.storeList,o.sliderTitle,o.sliderTitleColor))},[(0,r.Wm)(m,{lines:"none",style:(0,n.j5)(`color: ${o.sliderTitleColor}; cursor: pointer;`)},{default:(0,r.w5)((()=>[(0,r.Uk)(" Показать все "),(0,r.Wm)(s,{icon:i.chevronForwardOutline,color:o.sliderTitleColor},null,8,["icon","color"])])),_:1},8,["style"])])])),_:1}),(0,r._)("div",_e,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.list_filtered,((t,o)=>((0,r.wg)(),(0,r.iD)("div",{key:o,class:"store-pair"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t,((t,i)=>((0,r.wg)(),(0,r.iD)("div",{key:t.store_id,class:"store-item"},[(0,r.Wm)(h,{style:{position:"relative",height:"fit-content"},class:(0,n.C_)(0==t.is_opened?"closed":"")},{default:(0,r.w5)((()=>[(0,r._)("div",{onClick:o=>e.$go(`/catalog/store-${t.store_id}`),class:"crop-to-fit",style:{height:"180px",cursor:"pointer"}},[t.image_hash?((0,r.wg)(),(0,r.iD)("img",{key:0,src:e.$heap.state.hostname+"/image/get.php/"+t.image_hash+".700.700.webp"},null,8,fe)):(0,r.kq)("",!0)],8,ge),l.store_perks[o][i].length>0?((0,r.wg)(),(0,r.iD)("div",{key:0,class:"perk-row",style:(0,n.j5)(`width:${50*l.store_perks[o][i].length}px`)},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.store_perks[o][i],(t=>((0,r.wg)(),(0,r.iD)("span",{key:t.image_hash,class:"perk"},[t.image_hash?((0,r.wg)(),(0,r.j4)(p,{key:0,src:""+(e.$heap.state.hostname+"/image/get.php/"+t.image_hash+".80.80.png")},null,8,["src"])):((0,r.wg)(),(0,r.j4)(p,{key:1,src:`/img/perks/${t.image_url}`},null,8,["src"]))])))),128))],4)):(0,r.kq)("",!0)])),_:2},1032,["class"]),(0,r.Wm)(f,{class:"store-indicators"},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{class:"ion-justify-content-between"},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{size:"auto"},{default:(0,r.w5)((()=>[(0,r._)("div",{onClick:o=>e.$go(`/catalog/store-${t.store_id}`),style:{cursor:"pointer"},class:""},[(0,r.Wm)(_,{lines:"none",class:"store-title",style:{"font-family":"Roboto","font-size":"15px"}},{default:(0,r.w5)((()=>[(0,r._)("b",null,(0,n.zw)(t.store_name),1)])),_:2},1024)],8,ye)])),_:2},1024)])),_:2},1024),(0,r.Wm)(c,{class:"ion-justify-content-between ion-padding-bottom",style:{"font-size":"12px"}},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{size:"auto",class:"indicator-label"},{default:(0,r.w5)((()=>[1==t.is_opened?((0,r.wg)(),(0,r.iD)("div",we,[(0,r._)("label",null,[(0,r.Wm)(g,{color:"success"},{default:(0,r.w5)((()=>[(0,r.Uk)(" ◉ ")])),_:1}),(0,r.Uk)(),(0,r.Wm)(g,{class:"indicator-label-text",color:"medium"},{default:(0,r.w5)((()=>[(0,r.Uk)("открыт до "+(0,n.zw)(t.store_time_closes)+":00",1)])),_:2},1024)])])):((0,r.wg)(),(0,r.iD)("div",ke,[0==t.is_working?((0,r.wg)(),(0,r.iD)("label",ve,[(0,r.Wm)(g,{class:"indicator-label-text"},{default:(0,r.w5)((()=>[(0,r.Uk)(" ◉ ")])),_:1}),(0,r.Wm)(g,{color:"medium"},{default:(0,r.w5)((()=>[(0,r.Uk)("временно не работает")])),_:1})])):t.store_next_time_opens>0?((0,r.wg)(),(0,r.iD)("label",be,[(0,r.Wm)(g,{class:"indicator-label-text"},{default:(0,r.w5)((()=>[(0,r.Uk)(" ◉ ")])),_:1}),(0,r.Wm)(g,{color:"medium"},{default:(0,r.w5)((()=>[(0,r.Uk)("закрыт до "+(0,n.zw)(t.store_next_time_opens)+":00",1)])),_:2},1024)])):((0,r.wg)(),(0,r.iD)("label",Ie,[(0,r.Wm)(g,{color:"danger"},{default:(0,r.w5)((()=>[(0,r.Uk)(" ◉ ")])),_:1}),(0,r.Wm)(g,{class:"indicator-label-text"},{default:(0,r.w5)((()=>[(0,r.Uk)("закрыт")])),_:1})]))]))])),_:2},1024),(0,r.Wm)(d,{size:"auto",class:"indicator-label"},{default:(0,r.w5)((()=>[t.deliveryTime.timeMin?((0,r.wg)(),(0,r.iD)("div",We,[(0,r.Wm)(g,{class:"indicator-label-text"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,n.zw)(t.deliveryTime.timeMin)+"-"+(0,n.zw)(t.deliveryTime.timeMax)+"мин",1)])),_:2},1024)])):(0,r.kq)("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024)])))),128))])))),128))],512)])):(0,r.kq)("",!0)}o(6699),o(5827);const $e=["onClick"],De=["src"],Se=["onClick"],Oe={key:0},xe={key:1},Ue={key:0},Le={key:1},je={key:2},Te={key:0,lines:"none"};function ze(e,t,o,i,a,l){const s=(0,r.up)("ion-title"),u=(0,r.up)("ion-icon"),d=(0,r.up)("ion-item"),c=(0,r.up)("ion-toolbar"),m=(0,r.up)("ion-header"),p=(0,r.up)("ion-img"),h=(0,r.up)("ion-card"),_=(0,r.up)("ion-label"),g=(0,r.up)("ion-col"),f=(0,r.up)("ion-row"),y=(0,r.up)("ion-text"),w=(0,r.up)("ion-grid"),k=(0,r.up)("ion-list"),v=(0,r.up)("ion-content");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(m,null,{default:(0,r.w5)((()=>[(0,r.Wm)(c,{style:(0,n.j5)(`--background: ${o.modalColor};`)},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{lines:"none",style:(0,n.j5)(`--background: ${o.modalColor}; color: white`)},{default:(0,r.w5)((()=>[(0,r.Wm)(s,null,{default:(0,r.w5)((()=>[(0,r.Uk)((0,n.zw)(o.modalTitle),1)])),_:1}),(0,r.Wm)(u,{slot:"end",onClick:t[0]||(t[0]=e=>{i.closeModal()}),icon:i.closeOutline,size:"large",color:"light"},null,8,["icon"])])),_:1},8,["style"])])),_:1},8,["style"])])),_:1}),(0,r.Wm)(v,null,{default:(0,r.w5)((()=>[(0,r.Wm)(k,{class:"store-list"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.filteredStoreList,((t,o)=>((0,r.wg)(),(0,r.iD)("div",{key:t.store_id},[(0,r.Wm)(h,{style:{position:"relative",height:"fit-content"},class:(0,n.C_)(0==t.is_opened?"closed":"")},{default:(0,r.w5)((()=>[(0,r._)("div",{onClick:o=>e.$go(`/catalog/store-${t.store_id}`),class:"crop-to-fit",style:{height:"180px",cursor:"pointer"}},[t.image_hash?((0,r.wg)(),(0,r.iD)("img",{key:0,src:e.$heap.state.hostname+"/image/get.php/"+t.image_hash+".700.700.webp"},null,8,De)):(0,r.kq)("",!0)],8,$e),l.store_perks[o].length>0?((0,r.wg)(),(0,r.iD)("div",{key:0,class:"perk-row",style:(0,n.j5)(`width:${50*l.store_perks[o].length}px`)},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.store_perks[o],(t=>((0,r.wg)(),(0,r.iD)("span",{key:t.image_hash,class:"perk"},[t.image_hash?((0,r.wg)(),(0,r.j4)(p,{key:0,src:""+(e.$heap.state.hostname+"/image/get.php/"+t.image_hash+".80.80.png")},null,8,["src"])):((0,r.wg)(),(0,r.j4)(p,{key:1,src:`/img/perks/${t.image_url}`},null,8,["src"]))])))),128))],4)):(0,r.kq)("",!0)])),_:2},1032,["class"]),(0,r.Wm)(w,{class:"store-indicators"},{default:(0,r.w5)((()=>[(0,r.Wm)(f,{class:"ion-justify-content-between"},{default:(0,r.w5)((()=>[(0,r.Wm)(g,{size:"auto"},{default:(0,r.w5)((()=>[(0,r._)("div",{onClick:o=>e.$go(`/catalog/store-${t.store_id}`),style:{cursor:"pointer"},class:""},[(0,r.Wm)(_,{lines:"none",class:"store-title",style:{"font-family":"Roboto","font-size":"15px"}},{default:(0,r.w5)((()=>[(0,r._)("b",null,(0,n.zw)(t.store_name),1)])),_:2},1024)],8,Se)])),_:2},1024)])),_:2},1024),(0,r.Wm)(f,{class:"ion-justify-content-between ion-padding-bottom",style:{"font-size":"12px"}},{default:(0,r.w5)((()=>[(0,r.Wm)(g,{size:"auto"},{default:(0,r.w5)((()=>[1==t.is_opened?((0,r.wg)(),(0,r.iD)("div",Oe,[(0,r._)("label",null,[(0,r.Wm)(y,{color:"success"},{default:(0,r.w5)((()=>[(0,r.Uk)(" ◉ ")])),_:1}),(0,r.Uk)(),(0,r.Wm)(y,{color:"medium"},{default:(0,r.w5)((()=>[(0,r.Uk)("открыт до "+(0,n.zw)(t.store_time_closes)+":00",1)])),_:2},1024)])])):((0,r.wg)(),(0,r.iD)("div",xe,[0==t.is_working?((0,r.wg)(),(0,r.iD)("label",Ue,[(0,r.Wm)(y,{color:"medium"},{default:(0,r.w5)((()=>[(0,r.Uk)(" ◉ ")])),_:1}),(0,r.Wm)(y,{color:"medium"},{default:(0,r.w5)((()=>[(0,r.Uk)("временно не работает")])),_:1})])):t.store_next_time_opens>0?((0,r.wg)(),(0,r.iD)("label",Le,[(0,r.Wm)(y,{color:"danger"},{default:(0,r.w5)((()=>[(0,r.Uk)(" ◉ ")])),_:1}),(0,r.Wm)(y,{color:"medium"},{default:(0,r.w5)((()=>[(0,r.Uk)("закрыт до "+(0,n.zw)(t.store_next_time_opens)+":00",1)])),_:2},1024)])):((0,r.wg)(),(0,r.iD)("label",je,[(0,r.Wm)(y,{color:"danger"},{default:(0,r.w5)((()=>[(0,r.Uk)(" ◉ ")])),_:1}),(0,r.Wm)(y,{color:"medium"},{default:(0,r.w5)((()=>[(0,r.Uk)("закрыт")])),_:1})]))]))])),_:2},1024),(0,r.Wm)(g,{size:"auto"},{default:(0,r.w5)((()=>[t.deliveryTime.timeMin?((0,r.wg)(),(0,r.iD)("div",Te,[(0,r.Wm)(y,{color:"medium"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,n.zw)(t.deliveryTime.timeMin)+"-"+(0,n.zw)(t.deliveryTime.timeMax)+"мин",1)])),_:2},1024)])):(0,r.kq)("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024)])))),128))])),_:1})])),_:1})],64)}var Ze={props:["filteredStoreList","modalTitle","modalColor"],components:{IonIcon:u.gu,IonToolbar:u.sr,IonHeader:u.Gu,IonImg:u.Xz,IonContent:u.W2,IonTitle:u.wd,IonLabel:u.Q$,IonText:u.yW,IonItem:u.Ie,IonCol:u.wI,IonRow:u.Nd,IonGrid:u.jY,IonCard:u.PM,IonList:u.q_},setup(){const e=function(){u.Fy.dismiss()};return{closeModal:e,closeOutline:c.fID,timeOutline:c.bdY}},mounted(){K.Z.on("dismissModal",(()=>{u.Fy&&u.Fy.isOpen&&u.Fy.dismiss()}))},computed:{store_perks(){return this.filteredStoreList.map((function(e){return e.perks.filter((e=>"perk"==e.slot))}))},store_perks_slider(){return this.filteredStoreList.map((function(e){return e.perks.filter((e=>"slider"==e.slot))}))}}};const qe=(0,h.Z)(Ze,[["render",ze],["__scopeId","data-v-3f821475"]]);var Ge=qe,Pe={components:{IonImg:u.Xz,IonGrid:u.jY,IonRow:u.Nd,IonCol:u.wI,IonCard:u.PM,IonLabel:u.Q$,IonText:u.yW,IonIcon:u.gu,IonItem:u.Ie,IonButton:u.YG},setup(){return{chevronBackOutline:c.ZY4,chevronForwardOutline:c.Dji}},props:["storeList","filter","sliderTitle","sliderTitleColor","backgroundImage"],data(){return{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(window.navigator.userAgent)}},computed:{list_filtered(){let e=this.filterSubstract(this.storeList);return this.filterGroup(e)},store_perks(){return this.list_filtered.map((function(e){return e.map((function(e){return e.perks.filter((e=>"perk"==e.slot))}))}))}},methods:{filterSubstract(e){let t=e.filter((e=>{for(let o in this.filter){var t;if("equals"==this.filter[o].type&&e[o]==this.filter[o].value)return!0;if("includes"==this.filter[o].type&&null!==(t=e[o])&&void 0!==t&&t.includes(this.filter[o].value))return!0}return!1}));return t},filterGroup(e){if(!e.length)return[];if(e.length<=2)return[e];let t=e.reduce((function(e,t,o,i){return o%2===0&&e.push(i.slice(o,o+2)),e}),[]);return t},async storeListModal(e,t,o){const i=this.filterSubstract(e),r=await u.Fy.create({component:Ge,componentProps:{filteredStoreList:i,modalTitle:t,modalColor:o},initialBreakpoint:1,breakpoints:[1,1]}),n=function(){r.dismiss()};return K.Z.on("dismissModal",n),r.present()},scrollSlider(e){let t,o=330;"prev"==e&&(t=this.$refs.storeSlider.scrollLeft-o),"next"==e&&(t=this.$refs.storeSlider.scrollLeft+o),this.$refs.storeSlider.scrollTo({top:0,left:t,behavior:"smooth"})}}};const Me=(0,h.Z)(Pe,[["render",Ce],["__scopeId","data-v-4d996e05"]]);var Be=Me;function Re(e,t,o,i,a,l){const s=(0,r.up)("ion-text"),u=(0,r.up)("ion-icon"),d=(0,r.up)("ion-item"),c=(0,r.up)("ion-img"),m=(0,r.up)("ion-thumbnail"),p=(0,r.up)("ion-chip"),h=(0,r.up)("ion-list"),_=(0,r.up)("ion-textarea");return(0,r.wg)(),(0,r.iD)(r.HY,null,[l.isMainLocationSet?((0,r.wg)(),(0,r.j4)(h,{key:0,onClick:t[0]||(t[0]=e=>l.selectDeliveryAddress())},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{lines:"none"},{default:(0,r.w5)((()=>["Current"==a.location_shown.group_name?((0,r.wg)(),(0,r.j4)(s,{key:0,color:"medium"},{default:(0,r.w5)((()=>[(0,r.Uk)("Ваше местоположение")])),_:1})):((0,r.wg)(),(0,r.j4)(s,{key:1,color:"medium"},{default:(0,r.w5)((()=>[(0,r.Uk)("Адрес доставки заказа")])),_:1})),(0,r.Wm)(u,{slot:"end",icon:i.chevronDownOutline},null,8,["icon"])])),_:1}),(0,r.Wm)(d,{lines:"none"},{default:(0,r.w5)((()=>{var t;return[a.location_shown.image_hash?((0,r.wg)(),(0,r.j4)(m,{key:0,slot:"start",style:{width:"30px",height:"30px"}},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{src:`${e.$heap.state.hostname}/image/get.php/${a.location_shown.image_hash}.32.32.png`},null,8,["src"])])),_:1})):((0,r.wg)(),(0,r.j4)(u,{key:1,slot:"start",color:"primary",icon:i.locationOutline},null,8,["icon"])),(0,r.Wm)(s,{color:"dark"},{default:(0,r.w5)((()=>{var e;return[(0,r.Uk)((0,n.zw)(null===(e=a.location_shown)||void 0===e?void 0:e.location_address),1)]})),_:1}),(null===(t=o.deliveryTime)||void 0===t?void 0:t.time)>0?((0,r.wg)(),(0,r.j4)(p,{key:2,slot:"end",color:"medium",background:"transparent"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{src:i.timeOutline},null,8,["src"]),(0,r._)("label",null,(0,n.zw)(o.deliveryTime.time),1)])),_:1})):(0,r.kq)("",!0)]})),_:1})])),_:1})):(0,r.kq)("",!0),o.showComment&&a.location_shown?((0,r.wg)(),(0,r.j4)(h,{key:1},{default:(0,r.w5)((()=>[(0,r.Wm)(d,null,{default:(0,r.w5)((()=>[(0,r.Wm)(_,{rows:"1",placeholder:"комментарий к адресу",onChange:t[1]||(t[1]=e=>l.locationCommentChanged()),modelValue:a.location_shown.location_comment,"onUpdate:modelValue":t[2]||(t[2]=e=>a.location_shown.location_comment=e)},null,8,["modelValue"])])),_:1})])),_:1})):(0,r.kq)("",!0)],64)}o(8862);var Ae={props:["deliveryTime","showComment"],components:{IonImg:u.Xz,IonIcon:u.gu,IonTextarea:u.g2,IonText:u.yW,IonItem:u.Ie,IonList:u.q_,IonThumbnail:u.Bs,IonChip:u.hM},setup(){return{locationOutline:c.Iv7,chevronDownOutline:c.Y$3,timeOutline:c.bdY}},data(){return{location_shown:V.Z.state.user.location_main}},created(){K.Z.on("userMainLocationSet",(e=>this.location_shown=e)),K.Z.on("userCurrentLocationSet",(e=>this.location_shown=e))},methods:{selectDeliveryAddress(){this.$go("/modal/user-addresses")},async locationCommentChanged(){const e={location_id:this.location_shown.location_id,location_comment:this.location_shown.location_comment};L().post(this.$heap.state.hostname+"Location/itemUpdate",JSON.stringify(e))}},computed:{isSignedIn(){return V.Z.state.user.user_id&&V.Z.state.user.user_id>-1},isMainLocationSet(){return this.location_shown?1:0}}};const Ne=(0,h.Z)(Ae,[["render",Re],["__scopeId","data-v-ab823a5a"]]);var He=Ne,Fe={setup(){return{mainLogo:m}},components:{IonList:u.q_,IonGrid:u.jY,IonRow:u.Nd,IonCol:u.wI,IonCard:u.PM,IonItem:u.Ie,IonCardHeader:u.Zi,IonCardSubtitle:u.tO,IonCardContent:u.FN,IonSkeletonText:u.CK,IonInput:u.pK,IonButton:u.YG,IonNote:u.uN,HomeSlider:q,HomePrimaryCategoryWidget:ee,HomePromoProductSlider:me,HomeStoreSlider:Be,UserAddressWidget:He},data(){return{out:{},storeList:null,primaryDeliveryTime:null,outofrangeFormHidden:0,storeSuggestion:null,suggestFormHidden:0,hiddenCount:null,storeSliderLoadQueue:100}},computed:{showndelivery_address(){return 1!=this.$heap.state.user.location_main.is_default?this.$heap.state.user.location_main.location_address:this.$heap.state.user.location_current.location_address}},methods:{async listNearReload(){var e;this.listNearGet(null!==(e=this.$heap.state.user.location_current)&&void 0!==e?e:this.$heap.state.user.location_main)},async listNearGet(e){try{const t={location_id:e.location_id,location_latitude:e.location_latitude,location_longitude:e.location_longitude};let o;o=await Q.Z.prePost(`${this.$heap.state.hostname}Store/listNearGet`,t),o&&(this.hiddenCount=o.hidden_count,this.storeList=this.storeListCalculate(o.store_list)),o=await Q.Z.post(`${this.$heap.state.hostname}Store/listNearGet`,t),this.hiddenCount=o.hidden_count,this.storeList=this.storeListCalculate(o.store_list)}catch(t){}},storeListCalculate(e){for(let t in e)e[t].deliveryTime=Q.Z.deliveryTimeCalculate(e[t].distance,e[t].store_time_preparation);return e},async outFormSend(){var e,t,o,i,r,n,a;if(null!==(t=(e=this.out).phone)&&void 0!==t||(e.phone=null===(o=this.$heap.state.user)||void 0===o?void 0:o.user_phone),null!==(r=(i=this.out).address)&&void 0!==r||(i.address=this.showndelivery_address),null===(n=this.$heap.state.user)||void 0===n||!n.user_id||(null===(a=this.$heap.state.user)||void 0===a?void 0:a.user_id)<0)this.$flash("Пожалуйста зарегистрируйтесь, чтобы мы могли с вами связаться");else{try{var l;const e={type:"outofrange",user_id:null===(l=this.$heap.state.user)||void 0===l?void 0:l.user_id,from:this.out.phone,subject:this.out.address,body:this.out.comment};await Q.Z.post(`${this.$heap.state.hostname}Talk/inquiryCreate`,e),this.$flash("Заявка отправлена")}catch(s){}this.outofrangeFormHidden=1}},async suggestFormSend(){if(this.storeSuggestion){try{var e,t;const o={type:"suggest_new_store",user_id:null===(e=this.$heap.state.user)||void 0===e?void 0:e.user_id,from:null===(t=this.$heap.state.user)||void 0===t?void 0:t.user_phone,subject:this.showndelivery_address,body:this.storeSuggestion};await Q.Z.post(`${this.$heap.state.hostname}Talk/inquiryCreate`,o),this.$flash("Ваше предложение отправлено")}catch(o){}this.suggestFormHidden=1}else this.$flash("Напишите что нам стоило бы добавить")},loadStoreSlider(e){this.storeSliderLoadQueue++,e.target.complete()}},mounted(){this.$topic.on("userMainLocationSet",(e=>this.listNearGet(e))),this.$topic.on("userCurrentLocationSet",(e=>this.listNearGet(e))),this.listNearReload()},ionViewDidEnter(){this.listNearReload()},watch:{$route(e,t){"/catalog/"==e&&this.listNearReload()}}};const Ye=(0,h.Z)(Fe,[["render",$]]);var Ee=Ye;const Ve={key:0},Ke={style:{"font-size":"1.1em"}},Qe={style:{display:"grid","grid-template-columns":"repeat(auto-fit, 150px)"}},Je={key:1},Xe={style:{display:"grid","grid-template-columns":"repeat(auto-fit, 150px)"}},et={key:2};function tt(e,t,o,i,a,l){const s=(0,r.up)("ion-searchbar"),u=(0,r.up)("ion-title"),d=(0,r.up)("ion-img"),c=(0,r.up)("ion-thumbnail"),m=(0,r.up)("ion-note"),p=(0,r.up)("ion-item"),h=(0,r.up)("ion-card-header"),_=(0,r.up)("store-opened-indicator"),g=(0,r.up)("product-item"),f=(0,r.up)("ion-card-content"),y=(0,r.up)("ion-card"),w=(0,r.up)("ion-skeleton-text"),k=(0,r.up)("ion-chip"),v=(0,r.up)("ion-card-title"),b=(0,r.up)("base-layout");return(0,r.wg)(),(0,r.j4)(b,{"page-title":"Поиск",hideBackLink:"true"},{default:(0,r.w5)((()=>{var o,i;return[(0,r.Wm)(s,{class:"search-container",modelValue:a.query,"onUpdate:modelValue":t[0]||(t[0]=e=>a.query=e),debounce:"400",onIonInput:t[1]||(t[1]=e=>l.listGet()),onIonClear:t[2]||(t[2]=e=>l.listGet()),placeholder:"начните искать"},null,8,["modelValue"]),(null===(o=a.found)||void 0===o||null===(i=o.product_matches)||void 0===i?void 0:i.length)>0?((0,r.wg)(),(0,r.iD)("div",Ve,[(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Найденные товары")])),_:1}),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.found.product_matches,(t=>((0,r.wg)(),(0,r.j4)(y,{key:t.store_id},{default:(0,r.w5)((()=>[(0,r.Wm)(h,null,{default:(0,r.w5)((()=>[(0,r.Wm)(p,{detail:"",button:"",onClick:o=>e.$go(`/search/store-${t.store_id}`),lines:"full"},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{slot:"start"},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{style:{"border-radius":"10px"},src:`${e.$heap.state.hostname}image/get.php/${t.image_hash}.150.150.webp`},null,8,["src"])])),_:2},1024),(0,r._)("p",Ke,(0,n.zw)(null===t||void 0===t?void 0:t.store_name),1),(0,r.Wm)(m,{slot:"helperText"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,n.zw)(t.store_description),1)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1024),(0,r.Wm)(f,null,{default:(0,r.w5)((()=>[(0,r._)("div",null,[(0,r.Wm)(_,{storeItem:t},null,8,["storeItem"])]),(0,r._)("div",Qe,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.matches,(e=>((0,r.wg)(),(0,r.iD)("div",{key:e.product_id},[(0,r.Wm)(g,{productItem:e,storeName:t.store_name},null,8,["productItem","storeName"])])))),128))])])),_:2},1024)])),_:2},1024)))),128))])):null==a.found?((0,r.wg)(),(0,r.iD)("div",Je,[(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Найденные товары")])),_:1}),(0,r.Wm)(y,null,{default:(0,r.w5)((()=>[(0,r.Wm)(h,null,{default:(0,r.w5)((()=>[(0,r.Wm)(p,{detail:"",lines:"full"},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{slot:"start"},{default:(0,r.w5)((()=>[(0,r.Wm)(w,{style:{width:"50px",height:"50px"},animated:""})])),_:1}),(0,r.Wm)(w,{style:{width:"300px",height:"30px"},animated:""}),(0,r.Wm)(m,{slot:"helperText"},{default:(0,r.w5)((()=>[(0,r.Wm)(w,{style:{width:"300px"}})])),_:1})])),_:1})])),_:1}),(0,r.Wm)(f,null,{default:(0,r.w5)((()=>[(0,r.Wm)(k,null,{default:(0,r.w5)((()=>[(0,r.Wm)(w,{style:{width:"100px"}})])),_:1}),(0,r._)("div",Xe,[((0,r.wg)(),(0,r.iD)(r.HY,null,(0,r.Ko)([1,2,3,4],(e=>(0,r._)("div",{key:e},[(0,r.Wm)(w,{style:{width:"120px",height:"120px"},animated:""}),(0,r.Wm)(w,{style:{width:"120px",height:"30px"},animated:""})]))),64))])])),_:1})])),_:1})])):((0,r.wg)(),(0,r.iD)("div",et,[(0,r.Wm)(y,{color:"light"},{default:(0,r.w5)((()=>[(0,r.Wm)(h,null,{default:(0,r.w5)((()=>[(0,r.Wm)(v,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Ничего не найдено.")])),_:1})])),_:1}),(0,r.Wm)(f,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Возможно у нас нет того что вы ищите или вы находитель за пределами зоны доставки")])),_:1})])),_:1})]))]})),_:1})}var ot=o(6615),it=o(7294),rt={components:{StoreOpenedIndicator:it.Z,IonSearchbar:u.VI,IonTitle:u.wd,IonImg:u.Xz,IonThumbnail:u.Bs,IonNote:u.uN,IonItem:u.Ie,IonCard:u.PM,IonCardContent:u.FN,IonCardTitle:u.Dq,IonCardHeader:u.Zi,IonSkeletonText:u.CK,IonChip:u.hM,ProductItem:ot.Z},data(){return{query:this.$route.query.q||"",found:null}},created(){this.listGet(),this.$topic.on("userMainLocationSet",(e=>this.listGet()))},methods:{async listGet(){const e={query:this.query,in_products:1,in_stores:0,location_id:this.locMainGet()};if(e.location_id)try{let t=await Q.Z.prePost(`${this.$heap.state.hostname}Search/listGet`,e);t&&(this.found=this.storeListCalculate(t)),t=await Q.Z.post(`${this.$heap.state.hostname}Search/listGet`,e),this.found=this.storeListCalculate(t)}catch(t){this.found=null}},storeListCalculate(e){var t;if(null===(t=e.product_matches)||void 0===t||!t.length)return[];for(let o in e.product_matches)e.product_matches[o].deliveryTime=Q.Z.deliveryTimeCalculate(e.product_matches[o].distance,e.product_matches[o].store_time_preparation);return e},locMainGet(){return this.$heap.state.user.location_main?this.$heap.state.user.location_main.location_id:null},delayedListGet(){clearTimeout(this.clock);const e=this;this.clock=setTimeout((()=>{e.listGet()}),400)}}};const nt=(0,h.Z)(rt,[["render",tt],["__scopeId","data-v-2fdb305c"]]);var at=nt;const lt=e=>((0,r.dD)("data-v-2c94f056"),e=e(),(0,r.Cn)(),e),st={class:"user-dashboard-header"},ut=lt((()=>(0,r._)("a",{href:"https://t.me/tezkelbot",target:"_new"},"@tezkelbot",-1))),dt={key:0},ct=lt((()=>(0,r._)("a",{href:"https://t.me/tezkelbot",target:"_new"},"@tezkelbot",-1))),mt={key:1},pt=lt((()=>(0,r._)("a",{href:"https://t.me/tezkelbot",target:"_new"},"@tezkelbot",-1))),ht={key:2},_t=lt((()=>(0,r._)("a",{href:"https://t.me/tezkelbot",target:"_new"},"@tezkelbot",-1))),gt={key:3},ft={key:4},yt={key:0},wt={key:1},kt={key:2};function vt(e,t,o,i,a,l){const s=(0,r.up)("ion-img"),u=(0,r.up)("ion-icon"),d=(0,r.up)("ion-avatar"),c=(0,r.up)("ion-label"),m=(0,r.up)("ion-item"),p=(0,r.up)("ion-list"),h=(0,r.up)("msg-subscription-comp"),_=(0,r.up)("ion-item-divider"),g=(0,r.up)("ion-item-group"),f=(0,r.up)("ion-note"),y=(0,r.up)("ion-text"),w=(0,r.up)("ion-button"),k=(0,r.up)("ion-skeleton-text"),v=(0,r.up)("base-layout");return(0,r.wg)(),(0,r.j4)(v,{"page-title":"Личный кабинет",hideBackLink:"true"},{default:(0,r.w5)((()=>[(0,r._)("div",st,[(0,r.Wm)(p,null,{default:(0,r.w5)((()=>[l.isSignedIn?((0,r.wg)(),(0,r.j4)(m,{key:0,lines:"full",class:"avatar-row",onClick:t[0]||(t[0]=t=>e.$go("/user/user-edit")),button:""},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{slot:"start"},{default:(0,r.w5)((()=>[a.user.user_avatar_name?((0,r.wg)(),(0,r.j4)(s,{key:0,src:e.$heap.state.hostname+"img/avatar/"+a.user.user_avatar_name+".png"},null,8,["src"])):((0,r.wg)(),(0,r.j4)(u,{key:1,icon:i.personCircleOutline,color:"primary",size:"large"},null,8,["icon"]))])),_:1}),(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[(0,r.Uk)((0,n.zw)(a.user.user_name),1)])),_:1}),(0,r.Wm)(u,{icon:i.settingsOutline,color:"primary",slot:"end"},null,8,["icon"])])),_:1})):(0,r.kq)("",!0),l.isSignedIn?((0,r.wg)(),(0,r.j4)(m,{key:1,onClick:l.signOut,lines:"full",button:"",detail:""},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{icon:i.exitOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Выйти")])),_:1})])),_:1},8,["onClick"])):((0,r.wg)(),(0,r.j4)(m,{key:2,lines:"full",button:"",detail:"",onClick:t[1]||(t[1]=t=>e.$go("/user/sign-in"))},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{icon:i.logInOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Войти")])),_:1})])),_:1})),l.isSignedIn?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(m,{key:3,lines:"full",button:"",detail:"",onClick:t[2]||(t[2]=t=>e.$go("/user/sign-up"))},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{icon:i.personAddOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Зарегистрироваться")])),_:1})])),_:1}))])),_:1})]),(0,r.Wm)(h),(0,r.Wm)(p,null,{default:(0,r.w5)((()=>[l.isSignedIn?((0,r.wg)(),(0,r.j4)(g,{key:0},{default:(0,r.w5)((()=>[(0,r.Wm)(_,null,{default:(0,r.w5)((()=>[(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Пользователь")])),_:1})])),_:1}),(0,r._)("div",null,[(0,r.Wm)(m,{onClick:t[3]||(t[3]=t=>e.$go("/user/reactions")),lines:"full",button:"",detail:""},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{icon:i.thumbsUpSharp,slot:"start",color:"primary"},null,8,["icon"]),(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Мои отзывы")])),_:1})])),_:1}),(0,r.Wm)(m,{lines:"full",button:"",detail:"",onClick:t[4]||(t[4]=t=>e.$go("/modal/user-addresses"))},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{icon:i.locationOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Мои адреса")])),_:1})])),_:1}),(0,r.Wm)(m,{lines:"full",button:"",detail:"",onClick:t[5]||(t[5]=t=>e.$go("/order"))},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{icon:i.cartOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Мои заказы")])),_:1})])),_:1}),(0,r.Wm)(m,{lines:"full",button:"",detail:"",onClick:t[6]||(t[6]=t=>e.$go("/user/user-promo"))},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{icon:i.giftOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Мои скидки")])),_:1})])),_:1}),(0,r.Wm)(m,{lines:"full",button:"",detail:"",onClick:t[7]||(t[7]=t=>e.$go("/user/user-invoice"))},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{icon:i.receiptOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Мои чеки")])),_:1})])),_:1}),(0,r.Wm)(m,{lines:"full",button:"",detail:"",href:"https://t.me/tezkelbot",target:"_new"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{icon:i.chatboxEllipsesOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Телеграм бот "),ut])),_:1})])),_:1})]),l.isAdmin?((0,r.wg)(),(0,r.j4)(g,{key:0},{default:(0,r.w5)((()=>[(0,r.Wm)(_,null,{default:(0,r.w5)((()=>[(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Администратор")])),_:1})])),_:1}),(0,r.Wm)(m,{onClick:t[8]||(t[8]=t=>e.$go("/admin/text-list")),lines:"full",button:"",detail:""},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{icon:i.documentTextOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Редактирование страниц")])),_:1})])),_:1}),(0,r.Wm)(m,{onClick:t[9]||(t[9]=t=>e.$go("/admin/list-moderation")),lines:"full",button:"",detail:""},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{icon:i.ribbonOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Элементы")])),_:1})])),_:1}),(0,r.Wm)(m,{onClick:t[10]||(t[10]=t=>e.$go("/admin/tariff-list")),lines:"full",button:"",detail:""},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{icon:i.briefcaseOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Список тарифов")])),_:1})])),_:1}),(0,r.Wm)(m,{onClick:t[11]||(t[11]=t=>e.$go("/admin/accounting")),lines:"full",button:"",detail:""},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{icon:i.pieChartOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Бухгалтерия")])),_:1})])),_:1}),(0,r.Wm)(m,{onClick:t[12]||(t[12]=t=>e.$go("/admin/mailing-list")),lines:"full",button:"",detail:""},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{icon:i.chatboxEllipsesOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Рассылка")])),_:1})])),_:1})])),_:1})):(0,r.kq)("",!0)])),_:1})):(0,r.kq)("",!0),l.isSignedIn?((0,r.wg)(),(0,r.j4)(g,{key:1},{default:(0,r.w5)((()=>[(0,r.Wm)(_,null,{default:(0,r.w5)((()=>[(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Курьер")])),_:1})])),_:1}),"ready"==a.courierStatus?((0,r.wg)(),(0,r.iD)("div",dt,[(0,r.Wm)(m,{style:{"--background":"var(--ion-color-success-tint)"},lines:"none"},{default:(0,r.w5)((()=>[(0,r.Wm)(y,null,{default:(0,r.w5)((()=>[(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Смена активна")])),_:1}),(0,r.Wm)(f,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Вы можете брать задания на доставку "),ct])),_:1})])),_:1})])),_:1})])):"idle"==a.courierStatus?((0,r.wg)(),(0,r.iD)("div",mt,[(0,r.Wm)(m,{style:{"--background":"var(--ion-color-warning-tint)"},lines:"none"},{default:(0,r.w5)((()=>[(0,r.Wm)(y,null,{default:(0,r.w5)((()=>[(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Смена закрыта")])),_:1}),(0,r.Wm)(f,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Воспользуйтесь telegram ботом "),pt,(0,r.Uk)(", чтобы начать смену")])),_:1})])),_:1})])),_:1})])):"busy"==a.courierStatus?((0,r.wg)(),(0,r.iD)("div",ht,[(0,r.Wm)(m,{style:{"--background":"var(--ion-color-warning-tint)"},lines:"none"},{default:(0,r.w5)((()=>[(0,r.Wm)(y,null,{default:(0,r.w5)((()=>[(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Выполняется задание")])),_:1}),(0,r.Wm)(f,null,{default:(0,r.w5)((()=>[(0,r.Uk)("В процессе доставки заказа "),_t])),_:1})])),_:1})])),_:1}),(0,r.Wm)(m,{style:{"--background":"var(--ion-color-warning-tint)"},button:"",lines:"full"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{icon:i.rocketOutline,slot:"start"},null,8,["icon"])])),_:1})])):(0,r.kq)("",!0),"notcourier"==a.courierStatus?((0,r.wg)(),(0,r.iD)("div",gt,[(0,r.Wm)(m,{lines:"none"},{default:(0,r.w5)((()=>[(0,r.Wm)(y,null,{default:(0,r.w5)((()=>[(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Пока вы не курьер")])),_:1}),(0,r.Wm)(f,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Подайте заявку, чтобы стать курьером")])),_:1})])),_:1})])),_:1}),(0,r.Wm)(m,{button:"",lines:"full",onClick:t[13]||(t[13]=t=>e.$go("/user/courier-dashboard"))},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{icon:i.rocketOutline,slot:"start"},null,8,["icon"]),(0,r.Wm)(w,{slot:"end",color:"light"},{default:(0,r.w5)((()=>[(0,r.Uk)("Стать курьером")])),_:1})])),_:1})])):((0,r.wg)(),(0,r.iD)("div",ft,[(0,r.Wm)(m,{lines:"full",button:"",detail:"",onClick:t[14]||(t[14]=t=>e.$go("/user/courier-dashboard"))},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{icon:i.documentTextOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Анкета курьера")])),_:1})])),_:1}),(0,r.Wm)(m,{lines:"full",button:"",detail:"",onClick:t[15]||(t[15]=t=>e.$go("/user/courier-statistics"))},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{icon:i.pieChartOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Статистика")])),_:1})])),_:1})]))])),_:1})):(0,r.kq)("",!0),l.isSignedIn?((0,r.wg)(),(0,r.j4)(g,{key:2},{default:(0,r.w5)((()=>[(0,r.Wm)(_,null,{default:(0,r.w5)((()=>[(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Продавец")])),_:1})])),_:1}),a.storeList?a.storeList.length>0?((0,r.wg)(),(0,r.iD)("div",wt,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.storeList,(t=>((0,r.wg)(),(0,r.j4)(m,{key:t.store_id,detail:"",button:"",onClick:o=>e.$go(`/catalog/store-edit-${t.store_id}`)},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{icon:i.storefrontOutline,slot:"start"},null,8,["icon"]),(0,r.Uk)(" "+(0,n.zw)(t.store_name||t.store_name_new||"- - -"),1)])),_:2},1032,["onClick"])))),128)),(0,r.Wm)(m,{lines:"full",button:"",detail:"",onClick:t[16]||(t[16]=t=>e.$go("/user/supplier-statistics"))},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{icon:i.pieChartOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Статистика")])),_:1})])),_:1})])):((0,r.wg)(),(0,r.iD)("div",kt,[(0,r.Wm)(m,{lines:"none"},{default:(0,r.w5)((()=>[(0,r.Wm)(y,null,{default:(0,r.w5)((()=>[(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Пока вы не продавец")])),_:1}),(0,r.Wm)(f,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Зарегистрируйте свой магазин или ресторан")])),_:1})])),_:1})])),_:1}),(0,r.Wm)(m,{onClick:t[17]||(t[17]=t=>e.$go("/user/supplier-dashboard")),lines:"full"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{icon:i.storefrontOutline,slot:"start"},null,8,["icon"]),(0,r.Wm)(w,{slot:"end",color:"light"},{default:(0,r.w5)((()=>[(0,r.Uk)("Стать продавцом")])),_:1})])),_:1})])):((0,r.wg)(),(0,r.iD)("div",yt,[(0,r.Wm)(m,null,{default:(0,r.w5)((()=>[(0,r.Wm)(u,{icon:i.storefrontOutline,slot:"start"},null,8,["icon"]),(0,r.Wm)(k,{animated:""})])),_:1})])),(0,r.Wm)(_,null,{default:(0,r.w5)((()=>[(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Обратная связь")])),_:1})])),_:1}),(0,r.Wm)(m,{lines:"full",button:"",detail:"",onClick:t[18]||(t[18]=t=>e.$go("/user/feedback"))},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{icon:i.bookOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,r.Wm)(y,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Ваши пожелания или замечания")])),_:1})])),_:1})])),_:1})):(0,r.kq)("",!0),(0,r.Wm)(g,null,{default:(0,r.w5)((()=>[(0,r.Wm)(_,null,{default:(0,r.w5)((()=>[(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Информация")])),_:1})])),_:1}),(0,r.Wm)(m,{lines:"full",button:"",detail:"",onClick:t[19]||(t[19]=t=>e.$go("/page/about-us"))},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{icon:i.informationCircleOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,r.Wm)(y,null,{default:(0,r.w5)((()=>[(0,r.Uk)("О нас")])),_:1})])),_:1}),(0,r.Wm)(m,{lines:"full",button:"",detail:"",onClick:t[20]||(t[20]=t=>e.$go("/page/supplier-guide"))},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{icon:i.informationCircleOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,r.Wm)(y,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Презентация для продавцов")])),_:1})])),_:1}),(0,r.Wm)(m,{lines:"full",button:"",detail:"",onClick:t[21]||(t[21]=t=>e.$go("/page/contacts"))},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{icon:i.informationCircleOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,r.Wm)(y,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Контакты")])),_:1})])),_:1}),(0,r.Wm)(m,{lines:"full",button:"",detail:"",onClick:t[22]||(t[22]=t=>e.$go("/page/rules-customer"))},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{icon:i.informationCircleOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,r.Wm)(y,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Правила пользования")])),_:1})])),_:1}),(0,r.Wm)(m,{lines:"full",button:"",detail:"",onClick:t[23]||(t[23]=t=>e.$go("/page/rules-supplier"))},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{icon:i.informationCircleOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,r.Wm)(y,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Правила пользования для продавца")])),_:1})])),_:1}),(0,r.Wm)(m,{lines:"full",button:"",detail:"",onClick:t[24]||(t[24]=t=>e.$go("/page/rules-courier"))},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{icon:i.informationCircleOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,r.Wm)(y,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Правила пользования для курьера")])),_:1})])),_:1}),(0,r.Wm)(m,{lines:"full",button:"",detail:"",onClick:t[25]||(t[25]=t=>e.$go("/page/privacy_policy"))},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{icon:i.informationCircleOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,r.Wm)(y,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Политика конфиденциальности")])),_:1})])),_:1}),(0,r.Wm)(m,{lines:"none"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{icon:i.informationCircleOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,r.Wm)(y,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Версия приложения "+(0,n.zw)(a.version),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}var bt=o(351);function It(e,t,o,i,a,l){const s=(0,r.up)("ion-button"),u=(0,r.up)("ion-card-content"),d=(0,r.up)("ion-card"),c=(0,r.up)("ion-icon"),m=(0,r.up)("ion-item");return(0,r.wg)(),(0,r.iD)(r.HY,null,["default"==a.permission?((0,r.wg)(),(0,r.j4)(d,{key:0,color:"light"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[(0,r.Uk)(" Чтобы вовремя узнавать об изменениях статусов заказов, подпишитесь на уведомления "),(0,r._)("p",null,[(0,r.Wm)(s,{onClick:t[0]||(t[0]=e=>l.subscribe()),expand:"block"},{default:(0,r.w5)((()=>[(0,r.Uk)("Подписаться")])),_:1})])])),_:1})])),_:1})):(0,r.kq)("",!0),"denied"==a.permission?((0,r.wg)(),(0,r.j4)(d,{key:1},{default:(0,r.w5)((()=>[(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[(0,r.Wm)(m,{lines:"none"},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{src:i.notificationsOffOutline,color:"primary",slot:"start"},null,8,["src"]),(0,r.Uk)(" Уведомления от нашего сайта были заблокированы вами. Для полноценной работы приложения, рекомендуем влючить уведомления от сайта "+(0,n.zw)(e.$heap.state.hostname)+" в настройках вашего браузера. ",1)])),_:1})])),_:1})])),_:1})):(0,r.kq)("",!0),(a.permission,(0,r.kq)("",!0)),(0,r.kq)("",!0)],64)}var Wt={components:{IonButton:u.YG,IonCard:u.PM,IonCardContent:u.FN,IonIcon:u.gu,IonItem:u.Ie},setup(){return{notificationsOutline:c.iZ5,notificationsOffOutline:c.nZf}},data(){let e="Notification"in window?Notification.permission:"notsupported";return{permission:e,wasRejected:0}},methods:{async subscribe(){if("Notification"in window)try{this.permission=await Notification.requestPermission(),"granted"==this.permission&&bt.Z.firebase.saveNotificationToken()}catch(e){this.$flash("Вы не разрешили уведомлять вас")}else this.$flash("Ваше устройство не поддерживает уведомления")},reject(){localStorage.pushNotificationsWasRejected=this.wasRejected=1}}};const Ct=(0,h.Z)(Wt,[["render",It]]);var $t=Ct,Dt={components:{IonIcon:u.gu,IonAvatar:u.BJ,IonImg:u.Xz,IonLabel:u.Q$,IonItem:u.Ie,IonList:u.q_,IonItemDivider:u.rH,IonItemGroup:u.Ub,IonNote:u.uN,IonText:u.yW,IonButton:u.YG,IonSkeletonText:u.CK,MsgSubscriptionComp:$t},setup(){return{settingsOutline:c.C$N,logInOutline:c.Ohu,personCircleOutline:c.XMB,exitOutline:c.NmL,locationOutline:c.Iv7,heartOutline:c.gjX,helpCircle:c.pvH,callOutline:c.H7N,mailOutline:c.xOl,cardOutline:c.pvm,cartOutline:c.Ox0,notifications:c.N9d,chevronForwardOutline:c.Dji,documentTextOutline:c.L82,informationCircleOutline:c.yo2,storefrontOutline:c.qRG,chatboxEllipsesOutline:c._Pt,giftOutline:c._$o,personAddOutline:c.$$h,ribbonOutline:c.Muk,receiptOutline:c.d71,rocketOutline:c.G$D,briefcaseOutline:c.SVL,pieChartOutline:c.qlh,thumbsUpSharp:c._DJ,bookOutline:c.W3$}},data(){return{user:V.Z.state.user,courierStatus:bt.Z.courier.status,storeList:bt.Z.supplier.storeList,version:this.toLocDateTime(document.lastModified)}},ionViewDidEnter(){bt.Z.get("full")},mounted(){const e=this;K.Z.on("courierStatusChange",(t=>{e.courierStatus=t})),K.Z.on("userGet",(t=>{e.user=t,t.storeList&&(e.storeList=t.storeList)}))},computed:{isAdmin(){return bt.Z.isAdmin()},isSignedIn(){var e;return(null===(e=this.user)||void 0===e?void 0:e.user_id)>0}},methods:{async signOut(){await bt.Z.signOut(),this.user=await bt.Z.get()},async courierStatusSet(e){try{await bt.Z.courier.updateStatus(e)}catch(t){409==t.status&&this.$flash("Анкета удалена или не активна")}},toLocDateTime(e){const t=new Date(Date.parse(e)),o={month:"short",day:"numeric",hour:"numeric",hc:"h24",minute:"numeric",year:"numeric"};return t.toLocaleDateString("ru-RU",o)}},watch:{$route(e,t){e.path!=t.path&&(this.user=V.Z.state.user)},courierStatus(e){"ready"==e||"busy"==e?bt.Z.geo.trackingStart():bt.Z.geo.trackingStop()}}};const St=(0,h.Z)(Dt,[["render",vt],["__scopeId","data-v-2c94f056"]]);var Ot=St,xt=o(4888),Ut=o(7820);const Lt=e=>((0,r.dD)("data-v-e74eaaac"),e=e(),(0,r.Cn)(),e),jt={key:0},Tt={for:"delivery_by_courier"},zt={slot:"end"},Zt=["checked"],qt={for:"delivery_by_store"},Gt={slot:"end"},Pt=["checked"],Mt=Lt((()=>(0,r._)("label",{for:"pickup_by_customer"},"Самовывоз",-1))),Bt={slot:"end"},Rt=["checked"],At=Lt((()=>(0,r._)("label",{for:"payment_cash"},"Оплата наличными",-1))),Nt={slot:"end"},Ht=["checked"],Ft=Lt((()=>(0,r._)("label",{for:"payment_cash_store"},"Оплата наличными продавцу",-1))),Yt={slot:"end"},Et=["checked"],Vt={key:8},Kt=Lt((()=>(0,r._)("label",{for:"payment_card"},"Оплата картой без привязки",-1))),Qt={slot:"end"},Jt=["checked"],Xt={for:"use_card_recurrent"},eo={slot:"end"},to=["checked"],oo={key:9},io={slot:"start"},ro={class:"righttop_badge"},no={slot:"start"},ao={class:"righttop_badge"},lo={key:10},so={slot:"start"},uo={key:1};function co(e,t,o,i,a,l){var s,u;const d=(0,r.up)("ion-item-divider"),c=(0,r.up)("order-checkout-address"),m=(0,r.up)("ion-icon"),p=(0,r.up)("ion-item"),h=(0,r.up)("ion-img"),_=(0,r.up)("ion-label"),g=(0,r.up)("ion-text"),f=(0,r.up)("ion-badge"),y=(0,r.up)("ion-textarea"),w=(0,r.up)("router-link"),k=(0,r.up)("ion-checkbox"),v=(0,r.up)("ion-list"),b=(0,r.up)("ion-card-content"),I=(0,r.up)("ion-card"),W=(0,r.up)("ion-button"),C=(0,r.up)("ion-skeleton-text"),$=(0,r.up)("base-layout");return(0,r.wg)(),(0,r.j4)($,{pageTitle:`Оформление заказа из ${(null===(s=a.order)||void 0===s||null===(u=s.store)||void 0===u?void 0:u.store_name)||""}`,pageDefaultBackLink:`/order/order-${a.order_id}`},{default:(0,r.w5)((()=>[a.is_checkout_data_loaded?((0,r.wg)(),(0,r.iD)("div",jt,[(0,r.Wm)(v,{lines:"none"},{default:(0,r.w5)((()=>{var o;return[a.storeIsReady?((0,r.wg)(),(0,r.j4)(d,{key:0,style:{"margin-top":"0px","box-shadow":"none"}},{default:(0,r.w5)((()=>[(0,r.Uk)("Адрес доставки заказа")])),_:1})):(0,r.kq)("",!0),(0,r.Wm)(c,{deliveryTime:a.deliveryTime,deliveryAddressOnly:"1",showComment:"1",nextRoute:`/modal/order-checkout-${a.order_id}`},null,8,["deliveryTime","nextRoute"]),a.storeIsReady?((0,r.wg)(),(0,r.j4)(d,{key:1},{default:(0,r.w5)((()=>[(0,r.Uk)("Способы доставки")])),_:1})):(0,r.kq)("",!0),l.deliveryByCourierRule?((0,r.wg)(),(0,r.j4)(p,{key:2,button:"",detail:"false",onClick:t[0]||(t[0]=e=>l.tariffRuleSet(l.deliveryByCourierRule))},{default:(0,r.w5)((()=>{var t;return[(0,r.Wm)(m,{icon:i.rocketOutline,slot:"start",color:"medium"},null,8,["icon"]),(0,r._)("label",Tt,[(0,r.Uk)("Доставит "),(0,r._)("b",null,(0,n.zw)(null===(t=e.$heap.state.settings)||void 0===t?void 0:t.app_title),1)]),(0,r._)("div",zt,[(0,r._)("input",{type:"radio",name:"deliveryBy",id:"delivery_by_courier",value:"courier",checked:l.deliveryByCourierRuleChecked},null,8,Zt)])]})),_:1})):(0,r.kq)("",!0),l.deliveryByStoreRule?((0,r.wg)(),(0,r.j4)(p,{key:3,button:"",detail:"false",onClick:t[1]||(t[1]=e=>l.tariffRuleSet(l.deliveryByStoreRule))},{default:(0,r.w5)((()=>{var e,t;return[(0,r.Wm)(m,{icon:i.rocketOutline,slot:"start",color:"medium"},null,8,["icon"]),(0,r._)("label",qt,[(0,r.Uk)("Доставит "),(0,r._)("b",null,(0,n.zw)(null===(e=a.order)||void 0===e||null===(t=e.store)||void 0===t?void 0:t.store_name),1)]),(0,r._)("div",Gt,[(0,r._)("input",{type:"radio",name:"deliveryBy",id:"delivery_by_store",value:"store",checked:l.deliveryByStoreRuleChecked},null,8,Pt)])]})),_:1})):(0,r.kq)("",!0),l.pickupByCustomerRule?((0,r.wg)(),(0,r.j4)(p,{key:4,button:"",detail:"false",onClick:t[2]||(t[2]=e=>l.tariffRuleSet(l.pickupByCustomerRule))},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{icon:i.storefrontOutline,slot:"start",color:"medium"},null,8,["icon"]),Mt,(0,r._)("div",Bt,[(0,r._)("input",{type:"radio",name:"deliveryBy",id:"pickup_by_customer",value:"store",checked:l.pickupByCustomerRuleChecked},null,8,Rt)])])),_:1})):(0,r.kq)("",!0),a.storeIsReady?((0,r.wg)(),(0,r.j4)(d,{key:5},{default:(0,r.w5)((()=>[(0,r.Uk)("Способы оплаты")])),_:1})):(0,r.kq)("",!0),1==a.tariffRule.paymentByCash?((0,r.wg)(),(0,r.j4)(p,{key:6,button:"",detail:"false",onClick:t[3]||(t[3]=e=>a.paymentType="use_cash")},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{icon:i.cashOutline,slot:"start",color:"medium"},null,8,["icon"]),At,(0,r._)("div",Nt,[(0,r._)("input",{type:"radio",name:"paymentType",id:"payment_cash",value:"cash",checked:"use_cash"==a.paymentType},null,8,Ht)])])),_:1})):(0,r.kq)("",!0),1==a.tariffRule.paymentByCashStore?((0,r.wg)(),(0,r.j4)(p,{key:7,button:"",detail:"false",onClick:t[4]||(t[4]=e=>a.paymentType="use_cash_store")},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{icon:i.cashOutline,slot:"start",color:"medium"},null,8,["icon"]),Ft,(0,r._)("div",Yt,[(0,r._)("input",{type:"radio",name:"paymentType",id:"payment_cash_store",value:"cash",checked:"use_cash_store"==a.paymentType},null,8,Et)])])),_:1})):(0,r.kq)("",!0),1==a.tariffRule.paymentByCard?((0,r.wg)(),(0,r.iD)("div",Vt,[(0,r.Wm)(p,{detail:"false",button:"",onClick:t[5]||(t[5]=e=>a.paymentType="use_card")},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{icon:i.cardOutline,slot:"start",color:"medium"},null,8,["icon"]),Kt,(0,r._)("div",Qt,[(0,r._)("input",{type:"radio",name:"paymentType",id:"payment_card",value:"card",checked:"use_card"==a.paymentType},null,8,Jt)])])),_:1}),null!==(o=a.bankCard)&&void 0!==o&&o.card_type?((0,r.wg)(),(0,r.j4)(p,{key:0,button:"",detail:"false",onClick:t[6]||(t[6]=e=>a.paymentType="use_card_recurrent")},{default:(0,r.w5)((()=>{var e;return["mir"==a.bankCard.card_type?((0,r.wg)(),(0,r.j4)(h,{key:0,class:"card_type",src:`/img/icons/card-${a.bankCard.card_type}.svg`,slot:"start"},null,8,["src"])):"visa"==a.bankCard.card_type?((0,r.wg)(),(0,r.j4)(h,{key:1,class:"card_type",src:`/img/icons/card-${a.bankCard.card_type}.svg`,slot:"start"},null,8,["src"])):"mastercard"==a.bankCard.card_type?((0,r.wg)(),(0,r.j4)(h,{key:2,class:"card_type",src:`/img/icons/card-${a.bankCard.card_type}.svg`,slot:"start"},null,8,["src"])):((0,r.wg)(),(0,r.j4)(m,{key:3,src:i.cardOutline,slot:"start",color:"medium"},null,8,["src"])),(0,r._)("label",Xt,"Оплата картой "+(0,n.zw)(null===(e=a.bankCard)||void 0===e?void 0:e.card_mask),1),(0,r._)("div",eo,[(0,r._)("input",{type:"radio",name:"paymentType",id:"use_card_recurrent",value:"registered_card",checked:"use_card_recurrent"==a.paymentType},null,8,to)])]})),_:1})):(0,r.kq)("",!0),a.recurrentPaymentAllow?((0,r.wg)(),(0,r.j4)(p,{key:1,button:"",detail:"",onClick:t[7]||(t[7]=t=>e.$go("/user/user-cards"))},{default:(0,r.w5)((()=>{var e;return[null!==(e=a.bankCard)&&void 0!==e&&e.card_type?((0,r.wg)(),(0,r.j4)(_,{key:0,color:"medium"},{default:(0,r.w5)((()=>[(0,r.Uk)("Выбрать другую карту")])),_:1})):((0,r.wg)(),(0,r.j4)(_,{key:1,color:"medium"},{default:(0,r.w5)((()=>[(0,r.Uk)("Привязать карту")])),_:1}))]})),_:1})):(0,r.kq)("",!0)])):(0,r.kq)("",!0),(0,r.Wm)(d,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Итог")])),_:1}),(0,r.Wm)(p,null,{default:(0,r.w5)((()=>[(0,r.Wm)(m,{icon:i.cubeOutline,slot:"start",color:"medium"},null,8,["icon"]),(0,r.Uk)(" Сумма заказа "),(0,r.Wm)(g,{slot:"end"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,n.zw)(a.order.order_sum_product)+(0,n.zw)(e.$heap.state.currencySign),1)])),_:1})])),_:1}),l.deliveryByCourierRuleChecked?((0,r.wg)(),(0,r.iD)("div",oo,[a.promo?((0,r.wg)(),(0,r.j4)(p,{key:0,button:"",onClick:t[8]||(t[8]=e=>l.promoPick()),color:"success"},{default:(0,r.w5)((()=>[(0,r._)("div",io,[(0,r.Wm)(m,{icon:i.giftOutline,color:"medium",style:{"font-size":"1.5em"}},null,8,["icon"]),(0,r._)("sup",ro,[a.promoCount>0?((0,r.wg)(),(0,r.j4)(f,{key:0,color:"secondary"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,n.zw)(a.promoCount),1)])),_:1})):(0,r.kq)("",!0)])]),(0,r.Uk)(" "+(0,n.zw)(a.promo.promo_name)+" ",1),(0,r.Wm)(g,{slot:"end"},{default:(0,r.w5)((()=>[(0,r.Uk)("-"+(0,n.zw)(a.order.order_sum_promo)+(0,n.zw)(e.$heap.state.currencySign),1)])),_:1})])),_:1})):((0,r.wg)(),(0,r.j4)(p,{key:1,button:"",detail:"",onClick:t[9]||(t[9]=e=>l.promoPick())},{default:(0,r.w5)((()=>[(0,r._)("div",no,[(0,r.Wm)(m,{icon:i.giftOutline,color:"medium",style:{"font-size":"1.5em"}},null,8,["icon"]),(0,r._)("sup",ao,[a.promoCount>0?((0,r.wg)(),(0,r.j4)(f,{key:0,color:"secondary"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,n.zw)(a.promoCount),1)])),_:1})):(0,r.kq)("",!0)])]),(0,r.Uk)(" Выберите скидку ")])),_:1}))])):((0,r.wg)(),(0,r.iD)("div",lo,[(0,r.Wm)(p,null,{default:(0,r.w5)((()=>[(0,r._)("div",so,[(0,r.Wm)(m,{icon:i.giftOutline,color:"medium",style:{"font-size":"1.5em"}},null,8,["icon"])]),(0,r.Wm)(g,{color:"medium"},{default:(0,r.w5)((()=>{var t;return[(0,r.Uk)(" Скидка доступна при доставке "),(0,r._)("b",null,(0,n.zw)(null===(t=e.$heap.state.settings)||void 0===t?void 0:t.app_title),1)]})),_:1})])),_:1})])),a.order_sum_delivery>0?((0,r.wg)(),(0,r.j4)(p,{key:11},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{icon:i.rocketOutline,slot:"start",color:"medium"},null,8,["icon"]),(0,r.Uk)(" Доставка "),(0,r.Wm)(g,{slot:"end"},{default:(0,r.w5)((()=>{var t;return[(0,r.Uk)((0,n.zw)(null!==(t=a.order_sum_delivery)&&void 0!==t?t:0)+(0,n.zw)(e.$heap.state.currencySign),1)]})),_:1})])),_:1})):(0,r.kq)("",!0),l.order_sum_total>0?((0,r.wg)(),(0,r.j4)(p,{key:12},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{icon:i.walletOutline,slot:"start",color:"medium"},null,8,["icon"]),(0,r.Uk)(" Итого к оплате "),(0,r.Wm)(g,{slot:"end"},{default:(0,r.w5)((()=>[(0,r._)("b",null,(0,n.zw)(l.order_sum_total),1),(0,r.Uk)((0,n.zw)(e.$heap.state.currencySign),1)])),_:1})])),_:1})):(0,r.kq)("",!0),(0,r.Wm)(p,null,{default:(0,r.w5)((()=>[(0,r.Wm)(y,{style:{"background-color":"var(--ion-color-light-tint)","border-radius":"10px"},label:"",rows:"2",placeholder:"комментарий к заказу",onChange:t[10]||(t[10]=e=>l.orderDescriptionChanged()),modelValue:a.order.order_description,"onUpdate:modelValue":t[11]||(t[11]=e=>a.order.order_description=e)},null,8,["modelValue"])])),_:1}),(0,r.Wm)(p,null,{default:(0,r.w5)((()=>[(0,r.Wm)(g,{style:{"font-size":"0.9em"}},{default:(0,r.w5)((()=>[(0,r.Uk)(" Я согласен(на) с "),(0,r.Wm)(w,{to:"/page/rules-customer"},{default:(0,r.w5)((()=>[(0,r.Uk)("офертой об оказании услуг доставки")])),_:1})])),_:1}),(0,r.Wm)(k,{slot:"end",modelValue:a.termsAccepted,"onUpdate:modelValue":t[12]||(t[12]=e=>a.termsAccepted=e),"aria-label":""},null,8,["modelValue"])])),_:1})]})),_:1}),l.checkoutError?((0,r.wg)(),(0,r.j4)(I,{key:0,color:"warning"},{default:(0,r.w5)((()=>[(0,r.Wm)(b,null,{default:(0,r.w5)((()=>[(0,r.Uk)((0,n.zw)(l.checkoutError),1)])),_:1})])),_:1})):(0,r.kq)("",!0),!l.isVPNon||"use_card"!=a.paymentType&&"use_card_recurrent"!=a.paymentType?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(I,{key:1,color:"light"},{default:(0,r.w5)((()=>[(0,r.Wm)(b,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Возможно включен VPN. Банк часто блокирует платежи через VPN.")])),_:1})])),_:1})),"use_card"==a.paymentType||"use_card_recurrent"==a.paymentType?((0,r.wg)(),(0,r.j4)(W,{key:2,expand:"block",onClick:t[13]||(t[13]=e=>l.proceed()),disabled:l.checkoutError},{default:(0,r.w5)((()=>[(0,r.Uk)("Оплатить картой")])),_:1},8,["disabled"])):((0,r.wg)(),(0,r.j4)(W,{key:3,expand:"block",onClick:t[14]||(t[14]=e=>l.proceed()),disabled:l.checkoutError},{default:(0,r.w5)((()=>[(0,r.Uk)("Послать заказ")])),_:1},8,["disabled"]))])):((0,r.wg)(),(0,r.iD)("div",uo,[(0,r.Wm)(p,{lines:"none"},{default:(0,r.w5)((()=>[(0,r.Wm)(C,{animated:"",style:{width:"200px"}})])),_:1}),(0,r.Wm)(v,null,{default:(0,r.w5)((()=>[((0,r.wg)(),(0,r.iD)(r.HY,null,(0,r.Ko)([1,2,3,4,5],(e=>(0,r.Wm)(p,{key:e},{default:(0,r.w5)((()=>[(0,r.Wm)(C,{animated:"",style:{width:"100%"}})])),_:2},1024))),64))])),_:1}),(0,r.Wm)(W,{color:"light",expand:"block"})]))])),_:1},8,["pageTitle","pageDefaultBackLink"])}o(5306);var mo=o(8764);function po(e,t,o,i,a,l){const s=(0,r.up)("ion-img"),u=(0,r.up)("ion-thumbnail"),d=(0,r.up)("ion-text"),c=(0,r.up)("ion-icon"),m=(0,r.up)("ion-chip"),p=(0,r.up)("ion-item"),h=(0,r.up)("ion-textarea"),_=(0,r.up)("ion-list");return l.location_delivery?((0,r.wg)(),(0,r.j4)(_,{key:0,lines:"none"},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{onClick:t[0]||(t[0]=e=>l.selectDeliveryAddress())},{default:(0,r.w5)((()=>{var t;return[l.location_delivery.image_hash?((0,r.wg)(),(0,r.j4)(u,{key:0,slot:"start",style:{width:"30px",height:"30px"}},{default:(0,r.w5)((()=>[(0,r.Wm)(s,{src:`${e.$heap.state.hostname}/image/get.php/${l.location_delivery.image_hash}.32.32.png`},null,8,["src"])])),_:1})):(0,r.kq)("",!0),(0,r.Wm)(d,{color:"dark"},{default:(0,r.w5)((()=>{var e;return[(0,r.Uk)((0,n.zw)(null===(e=l.location_delivery)||void 0===e?void 0:e.location_address),1)]})),_:1}),(null===(t=o.deliveryTime)||void 0===t?void 0:t.time)>0?((0,r.wg)(),(0,r.j4)(m,{key:1,slot:"end",color:"medium",background:"transparent"},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{src:i.timeOutline},null,8,["src"]),(0,r._)("label",null,"~"+(0,n.zw)(o.deliveryTime.time)+"мин",1)])),_:1})):(0,r.kq)("",!0)]})),_:1}),(0,r.Wm)(p,null,{default:(0,r.w5)((()=>[(0,r.Wm)(h,{label:"",rows:"1",placeholder:"комментарий к адресу",onChange:t[1]||(t[1]=e=>l.locationCommentChanged()),modelValue:l.location_delivery.location_comment,"onUpdate:modelValue":t[2]||(t[2]=e=>l.location_delivery.location_comment=e)},null,8,["modelValue"])])),_:1})])),_:1})):((0,r.wg)(),(0,r.j4)(_,{key:1},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{button:"",detail:"true",lines:"none",onClick:t[3]||(t[3]=e=>l.selectDeliveryAddress()),color:"secondary"},{default:(0,r.w5)((()=>[(0,r.Uk)("Добавить адрес доставки заказа")])),_:1})])),_:1}))}var ho={props:["deliveryTime","showComment","nextRoute"],components:{IonImg:u.Xz,IonIcon:u.gu,IonTextarea:u.g2,IonText:u.yW,IonItem:u.Ie,IonList:u.q_,IonThumbnail:u.Bs,IonChip:u.hM},setup(){return{locationOutline:c.Iv7,chevronDownOutline:c.Y$3,timeOutline:c.bdY}},data(){return{}},computed:{location_delivery(){var e,t;return null!==(e=V.Z.state)&&void 0!==e&&null!==(t=e.user)&&void 0!==t&&t.location_main&&1!=V.Z.state.user.location_main.is_default&&"Current"!=V.Z.state.user.location_main.group_name?V.Z.state.user.location_main:null}},methods:{selectDeliveryAddress(){this.nextRoute&&(this.$heap.state.next_route=this.nextRoute),this.$go("/modal/user-addresses")},async locationCommentChanged(){const e={location_id:this.location_delivery.location_id,location_comment:this.location_delivery.location_comment};L().post(this.$heap.state.hostname+"Location/itemUpdate",JSON.stringify(e))}}};const _o=(0,h.Z)(ho,[["render",po],["__scopeId","data-v-5fdc51ea"]]);var go=_o,fo=o(2920);const yo={key:0};function wo(e,t,o,i,a,l){const s=(0,r.up)("ion-title"),u=(0,r.up)("ion-icon"),d=(0,r.up)("ion-item"),c=(0,r.up)("ion-toolbar"),m=(0,r.up)("ion-header"),p=(0,r.up)("ion-skeleton-text"),h=(0,r.up)("ion-list"),_=(0,r.up)("ion-text"),g=(0,r.up)("ion-content");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(m,null,{default:(0,r.w5)((()=>[(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[(0,r.Wm)(d,{lines:"none"},{default:(0,r.w5)((()=>[(0,r.Wm)(s,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Ваши доступные скидки")])),_:1}),(0,r.Wm)(u,{icon:i.closeOutline,onClick:t[0]||(t[0]=t=>e.$topic.publish("dismissModal")),slot:"end",size:"large"},null,8,["icon"])])),_:1})])),_:1})])),_:1}),(0,r.Wm)(g,null,{default:(0,r.w5)((()=>[null==a.promoList?((0,r.wg)(),(0,r.j4)(h,{key:0},{default:(0,r.w5)((()=>[((0,r.wg)(),(0,r.iD)(r.HY,null,(0,r.Ko)([1,2,3],(e=>(0,r.Wm)(d,{lines:"none",key:e},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{slot:"start",icon:i.giftOutline,color:"primary"},null,8,["icon"]),(0,r.Wm)(p,{style:{width:"70%"}}),(0,r.Wm)(p,{slot:"end",style:{width:"50px"}})])),_:2},1024))),64))])),_:1})):(0,r.kq)("",!0),(0,r.Wm)(h,null,{default:(0,r.w5)((()=>{var o;return[null!==(o=a.promoList)&&void 0!==o&&o.length?((0,r.wg)(),(0,r.j4)(d,{key:0,button:"",onClick:t[1]||(t[1]=e=>l.promoPick({}))},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{slot:"start",icon:i.banOutline,color:"danger"},null,8,["icon"]),(0,r.Wm)(_,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Без скидки")])),_:1}),(0,r.Wm)(_,{slot:"end"},{default:(0,r.w5)((()=>[(0,r.Uk)("0"+(0,n.zw)(e.$heap.state.currencySign),1)])),_:1})])),_:1})):((0,r.wg)(),(0,r.j4)(d,{key:1},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{slot:"start",icon:i.giftOutline,color:"medium"},null,8,["icon"]),(0,r.Wm)(_,{color:"medium"},{default:(0,r.w5)((()=>[(0,r.Uk)("К сожалению, доступных скидок нет.")])),_:1})])),_:1})),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.promoList,(t=>((0,r.wg)(),(0,r.j4)(d,{key:t.promo_id,button:"",onClick:e=>l.promoPick(t)},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{slot:"start",icon:i.giftOutline,color:"primary"},null,8,["icon"]),(0,r.Wm)(_,null,{default:(0,r.w5)((()=>[(0,r.Uk)((0,n.zw)(t.promo_name),1)])),_:2},1024),(0,r.Wm)(_,{slot:"end",color:"success"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,n.zw)(t.promo_value)+(0,n.zw)(e.$heap.state.currencySign),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128)),(0,r.Wm)(d,{button:"",detail:"",onClick:t[2]||(t[2]=t=>{e.$go("/user/user-promo"),e.$topic.publish("dismissModal")})},{default:(0,r.w5)((()=>[(0,r.Wm)(_,null,{default:(0,r.w5)((()=>{var e;return[(0,r.Uk)("Показать все ваши скидки "),null!==(e=a.promoList)&&void 0!==e&&e.length?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("span",yo,"или получить ещё"))]})),_:1})])),_:1})]})),_:1})])),_:1})],64)}var ko={components:{IonIcon:u.gu,IonToolbar:u.sr,IonHeader:u.Gu,IonContent:u.W2,IonTitle:u.wd,IonList:u.q_,IonItem:u.Ie,IonText:u.yW,IonSkeletonText:u.CK},setup(){return{giftOutline:c._$o,closeOutline:c.fID,banOutline:c.L6S}},data(){return{promoList:null}},mounted(){this.listGet()},methods:{async listGet(){try{const e={type:"active",user_id:this.$heap.state.user.user_id};this.promoList=await L().post(`${this.$heap.state.hostname}Promo/listGet`,e)}catch(e){}},promoPick(e){u.Fy.dismiss(e)}}};const vo=(0,h.Z)(ko,[["render",wo]]);var bo=vo,Io={components:{OrderCheckoutAddress:go,IonTextarea:u.g2,IonItemDivider:u.rH,IonIcon:u.gu,IonItem:u.Ie,IonList:u.q_,IonText:u.yW,IonButton:u.YG,IonCheckbox:u.nz,IonCard:u.PM,IonCardContent:u.FN,IonBadge:u.yp,IonImg:u.Xz,IonLabel:u.Q$,IonSkeletonText:u.CK},setup(){return{cardOutline:c.pvm,cashOutline:c.zaw,giftOutline:c._$o,cubeOutline:c.XFf,walletOutline:c.S5P,pieChartOutline:c.qlh,storefrontOutline:c.qRG,ordersIcon:mo,rocketOutline:c.G$D,documentTextOutline:c.L82}},data(){var e,t;return{is_checkout_data_loaded:0,can_load_at:0,order_id:this.$route.params.id,order:null,order_sum_delivery:0,storeCorrectionAllow:1,promo:null,promoCount:0,deliveryTime:{},termsAccepted:1,storeIsReady:null,errNotfound:0,errTooFar:0,iplocation:null,paymentType:"use_card",bankCard:null,recurrentPaymentAllow:1==(null===(e=this.$heap.state.settings)||void 0===e||null===(t=e.other)||void 0===t?void 0:t.recurrentPaymentAllow)?1:0,tariffRule:{},tariffRuleList:[]}},computed:{checkoutError(){var e,t,o,i,r,n,a,l,s,u;return!!this.order&&(1==this.errTooFar?"Адрес доставки заказа вне зоны обслуживания":1==(null===(e=this.$heap.state.user)||void 0===e||null===(t=e.location_main)||void 0===t?void 0:t.is_default)?"Нужно указать адрес, куда доставить заказ":1==this.errNotfound?"Заказ удален":0==this.storeIsReady?`К сожалению, ${(null===(r=this.order)||void 0===r||null===(n=r.store)||void 0===n?void 0:n.store_name)||"продавец"} не готов к заказам`:0==this.termsAccepted?"К сожалению, мы не можем доставить вам заказ, без согласия с условиями":1!=this.tariffRule.deliveryByCourier||0!=this.tariffRule.deliveryIsReady&&"idle"!=this.tariffRule.deliveryIsReady?this.order_sum_total<2*this.order.order_sum_promo?`Сумма к оплате со скидкой ${this.order.order_sum_promo}${this.$heap.state.currencySign} должна быть больше чем ${2*this.order.order_sum_promo}${this.$heap.state.currencySign}`:1*this.order.order_sum_product<1*this.tariffRule.order_sum_minimal?`Сумма заказа должна быть больше чем ${this.tariffRule.order_sum_minimal}${this.$heap.state.currencySign}`:1*this.order.order_sum_product<1*(null===(o=this.order)||void 0===o||null===(i=o.store)||void 0===i?void 0:i.store_minimal_order)?`Сумма заказа у "${null===(a=this.order)||void 0===a||null===(l=a.store)||void 0===l?void 0:l.store_name}" должна быть больше чем ${null===(s=this.order)||void 0===s||null===(u=s.store)||void 0===u?void 0:u.store_minimal_order}${this.$heap.state.currencySign}`:1*this.order_sum_total<=1*this.order_sum_delivery?`Сумма к оплате должна быть больше чем ${this.order_sum_delivery}${this.$heap.state.currencySign}`:this.order_sum_total<=10&&"Сумма к оплате слишком маленькая":"К сожалению, нет доступных курьеров")},order_sum_total(){return this.order.order_sum_product-this.order.order_sum_promo+this.order_sum_delivery},deliveryByCourierRule(){var e;return null===(e=this.tariffRuleList)||void 0===e?void 0:e.filter((e=>1==e.deliveryByCourier)).shift()},deliveryByCourierRuleChecked(){return 1==this.tariffRule.deliveryByCourier},deliveryByStoreRule(){var e;return null===(e=this.tariffRuleList)||void 0===e?void 0:e.filter((e=>1==e.deliveryByStore)).shift()},deliveryByStoreRuleChecked(){return 1==this.tariffRule.deliveryByStore},pickupByCustomerRule(){var e;return null===(e=this.tariffRuleList)||void 0===e?void 0:e.filter((e=>1==e.pickupByCustomer)).shift()},pickupByCustomerRuleChecked(){return 1==this.tariffRule.pickupByCustomer},isVPNon(){var e;return!(!this.iplocation||["UA","RU","???"].includes(null!==(e=this.iplocation.country_code)&&void 0!==e?e:"???"))}},mounted(){this.checkoutDataGet()},ionViewDidEnter(){this.checkoutDataGet()},methods:{async itemLoad(){try{this.order=await L().post(`${this.$heap.state.hostname}Order/itemGet`,{order_id:this.order_id}),console.log("checkout order get"),0==this.order_sum_delivery&&(this.order_sum_delivery,this.order.order_sum_delivery),this.$heap.commit("setCurrentOrder",this.order)}catch(e){this.$flash("Заказ не найден"),this.$go("/order/order-list")}},debounce(){const e=Date.now;let t=!1;return this.can_load_at>e&&(t=!0),this.can_load_at=e+300,t},async checkoutDataGet(){if(this.order=this.$heap.state.currentOrder,!this.debounce())if(this.order||await this.itemLoad(),this.order)if("customer_confirmed"==this.order.stage_current)try{const e=await L().post(`${this.$heap.state.hostname}Order/itemCheckoutDataGet`,{order_id:this.order.order_id});this.deliveryTime=Q.Z.deliveryTimeCalculate(e.Location_distanceHolderGet,e.Store_preparationTime),this.promo=e.Promo_itemLinkGet,this.promoCount=e.Promo_listGet,this.storeIsReady=Array.isArray(e.Store_deliveryOptions)?1:0,this.errTooFar=0,this.bankCard=null===e||void 0===e?void 0:e.bankCard,this.tariffRuleList=e.Store_deliveryOptions,this.tariffRuleSet(this.tariffRuleList[0]||{}),this.is_checkout_data_loaded=1,this.customerIpLocationGet()}catch(o){var e,t;this.is_checkout_data_loaded=1;const i=null===o||void 0===o||null===(e=o.responseJSON)||void 0===e||null===(t=e.messages)||void 0===t?void 0:t.error;switch(i){case"too_far":this.errTooFar=1;break;case"not_ready":case"no_tariff":this.storeIsReady=0;break;default:this.errNotfound=1}return!1}else this.$router.replace("/order/order-"+this.order.order_id);else this.$flash("Заказ не найден")},async customerIpLocationGet(){try{const e=await fetch("https://geolocation-db.com/json/");this.iplocation=await e.json()}catch(e){}},tariffRuleSet(e){var t,o;if(1==e.deliveryByCourier)this.tariffRule=this.tariffMerge(null===(o=this.tariffRuleList)||void 0===o?void 0:o.filter((e=>1==e.deliveryByCourier)));else if(1==e.deliveryByStore){var i;this.tariffRule=this.tariffMerge(null===(i=this.tariffRuleList)||void 0===i?void 0:i.filter((e=>1==e.deliveryByStore)))}else{if(1!=e.pickupByCustomer)return;var r;this.tariffRule=this.tariffMerge(null===(r=this.tariffRuleList)||void 0===r?void 0:r.filter((e=>1==e.pickupByCustomer)))}this.order_sum_delivery=e.order_sum_delivery,this.paymentType="use_card",null!==(t=this.bankCard)&&void 0!==t&&t.card_type&&(this.paymentType="use_card_recurrent"),1==e.paymentByCashStore?this.paymentType="use_cash_store":1==e.paymentByCash&&(this.paymentType="use_cash"),1!=e.deliveryByCourier&&null!=this.promo&&(this.promoLink({order_id:this.order_id}),this.promo=null)},tariffMerge(e){if(null===e||void 0===e||!e.length)return null;let t;for(let n of e){var o,i,r;t?(t.tariff_id+=`,${n.tariff_id}`,(o=t).paymentByCard||(o.paymentByCard=n.paymentByCard),(i=t).paymentByCash||(i.paymentByCash=n.paymentByCash),(r=t).paymentByCashStore||(r.paymentByCashStore=n.paymentByCashStore)):t=Object.assign({},n)}return t},tariffSplit(){if(!this.tariffRule.tariff_id.includes(","))return this.tariffRule.tariff_id;const e=this.tariffRule.tariff_id.split(",");for(let t of e){let e=this.tariffRuleList.find((e=>e.tariff_id==t));e&&(("use_card"!=this.paymentType&&"use_card_recurrent"!=this.paymentType||1==e.paymentByCard)&&("use_cash"==this.paymentType&&1!=e.paymentByCash||"use_cash_store"==this.paymentType&&1!=e.paymentByCashStore||(this.tariffRule=e)))}},async orderDescriptionChanged(){const e={order_id:this.order.order_id,order_description:this.order.order_description};d.Z.api.itemUpdate(e)},async proceed(){if("busy"==this.tariffRule.deliveryIsReady&&!await this.heavyLoadConfirm())return!1;if(!await this.deliveryAddressConfirm())return!1;this.tariffSplit();const e={order_id:this.order.order_id,tariff_id:this.tariffRule.tariff_id,deliveryByStore:this.deliveryByStoreRuleChecked?1:0,deliveryByCourier:this.deliveryByCourierRuleChecked?1:0,pickupByCustomer:this.pickupByCustomerRuleChecked?1:0,paymentByCard:"use_card"==this.paymentType?1:0,paymentByCardRecurrent:"use_card_recurrent"==this.paymentType?1:0,paymentByCash:"use_cash"==this.paymentType?1:0,paymentByCashStore:"use_cash_store"==this.paymentType?1:0,storeCorrectionAllow:this.storeCorrectionAllow?1:0};localStorage.storeCorrectionAllow=this.storeCorrectionAllow?1:0;try{await L().post(`${this.$heap.state.hostname}Order/itemCheckoutDataSet`,JSON.stringify(e))}catch(i){const e=null===i||void 0===i?void 0:i.responseJSON;if(!e)return!1;e.messages.error;return this.$flash("Не удается оформить заказ, обратитесь на горячую линию"),this.$router.go(-1),!1}if(1!=e.paymentByCard){if(1==e.paymentByCardRecurrent){const e={order_id:this.order.order_id,card_id:this.bankCard.card_id};try{await L().post(`${this.$heap.state.hostname}CardAcquirer/paymentDo`,e)}catch(i){return this.$flash("Оплата привязанной картой не удалась"),!1}}try{await d.Z.api.itemStageCreate(this.order.order_id,"customer_start"),this.$router.replace("/order/order-"+this.order.order_id)}catch(i){var t,o;const e=null===i||void 0===i||null===(t=i.responseJSON)||void 0===t||null===(o=t.messages)||void 0===o?void 0:o.error;switch(e){case"order_is_empty":this.$alert("К сожалению, товара не осталось в наличии &#9785;","Заказ пуст");break;case"address_not_set":this.$flash("Необходимо добавить адрес доставки"),this.$topic.publish("dismissModal"),this.$go("/modal/user-addresses");break}return!1}}else this.paymentFormOpen({order_id:this.order.order_id,order_sum_total:this.order_sum_total,user_id:this.order.owner_id})},async cancel(){this.$router.replace("/order/order-"+this.order.order_id)},async paymentFormOpen(e){const t=this,o=await u.Fy.create({component:fo.Z,componentProps:{order_data:e},initialBreakpoint:.85,breakpoints:[0,.85,.95]}),i=function(){o.dismiss()};return K.Z.on("dismissModal",i),o.onDidDismiss().then((()=>{t.paymentStatusCheck()})),o.present()},async paymentStatusCheck(){const e={order_id:this.order.order_id};try{const t=await L().post(this.$heap.state.hostname+"CardAcquirer/statusGet",e);"OK"==t&&this.$router.replace("/order/order-"+this.order.order_id)}catch(i){var t,o;const e=null===(t=i.responseJSON)||void 0===t||null===(o=t.messages)||void 0===o?void 0:o.error;"wrong_status"==e&&(this.$flash("Данный заказ не может быть оплачен"),this.$router.replace("/order/order-"+this.order.order_id)),"not_authorized"==e&&(this.$flash("Оплата не удалась, возможно не достаточно средств"),this.$router.replace("/order/order-"+this.order.order_id)),"waiting"==e&&(this.$flash("Ваш платеж на ожидании"),this.$router.replace("/order/order-"+this.order.order_id))}},async heavyLoadConfirm(){const e=await u.Cl.create({header:"Высокая загруженность",message:"Доставка может занять больше времени",buttons:[{text:"Отменить",role:"cancel"},{text:"Я подожду",role:"confirm"}]});await e.present();const{role:t}=await e.onDidDismiss();return"confirm"==t},async deliveryAddressConfirm(){const e=await u.Cl.create({header:"Адрес доставки",message:this.$heap.state.user.location_main.location_address,buttons:[{text:"Изменить",role:"cancel"},{text:"Верно",role:"confirm"}]});await e.present();const{role:t}=await e.onDidDismiss();return"confirm"==t||(this.$go("/modal/user-addresses"),!1)},async promoPick(){var e;const t=await u.Fy.create({component:bo,showBackdrop:!0,backdropDismiss:!0,initialBreakpoint:.6,breakpoints:[0,.6,.75]});t.present(),this.$topic.on("dismissModal",(()=>{t.dismiss()}));const o=await t.onDidDismiss();this.promoLink(o.data),null!==o&&void 0!==o&&null!==(e=o.data)&&void 0!==e&&e.promo_id?this.promo=o.data:this.promo=null},async promoLink(e){try{const t={promo_id:null===e||void 0===e?void 0:e.promo_id,order_id:this.order.order_id};await L().post(`${this.$heap.state.hostname}Promo/itemLink`,t),this.itemLoad()}catch(t){}},async promoGet(){try{const e={order_id:this.order.order_id};return await L().post(`${this.$heap.state.hostname}Promo/itemLinkGet`,e)}catch(e){}},async promoCountGet(){try{const e={mode:"count",type:"active",user_id:this.$heap.state.user.user_id};return await L().post(`${this.$heap.state.hostname}Promo/listGet`,e)}catch(e){}}}};const Wo=(0,h.Z)(Io,[["render",co],["__scopeId","data-v-e74eaaac"]]);var Co=Wo;const $o={key:0,style:{display:"flex","align-items":"center","justify-content":"center",height:"100%"}},Do={style:{width:"max-content","text-align":"center"}},So=(0,r._)("br",null,null,-1),Oo=(0,r._)("a",{href:"/order/order-list"},"список заказов",-1);function xo(e,t,o,i,n,a){var l;const s=(0,r.up)("ion-icon"),u=(0,r.up)("ion-label"),d=(0,r.up)("order-comp"),c=(0,r.up)("order-tracking-comp"),m=(0,r.up)("order-info-comp"),p=(0,r.up)("image-tile-comp"),h=(0,r.up)("order-history-comp"),_=(0,r.up)("msg-subscription-comp"),g=(0,r.up)("order-meta-comp"),f=(0,r.up)("ion-item"),y=(0,r.up)("ion-list"),w=(0,r.up)("ion-content"),k=(0,r.up)("ion-popover"),v=(0,r.up)("base-layout");return(0,r.wg)(),(0,r.j4)(v,{pageTitle:`Заказ #${n.order_id} ${null!==(l=n.order)&&void 0!==l&&l.deleted_at?"(Удален)":""}`,pageDefaultBackLink:"/order/order-list"},{default:(0,r.w5)((()=>{var o,l,v,b,I;return["notfound"==n.order?((0,r.wg)(),(0,r.iD)("div",$o,[(0,r._)("div",Do,[(0,r.Wm)(s,{icon:i.sparklesOutline,size:"large"},null,8,["icon"]),(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Заказ не найден")])),_:1}),So,Oo])])):(0,r.kq)("",!0),(0,r.Wm)(d,{orderData:n.order,onStageCreate:a.onStageCreate,onOrderRefresh:a.itemGet},null,8,["orderData","onStageCreate","onOrderRefresh"]),(0,r.Wm)(c,{orderData:n.order},null,8,["orderData"]),(0,r.Wm)(m,{orderData:n.order},null,8,["orderData"]),null!==(o=n.order)&&void 0!==o&&o.images?((0,r.wg)(),(0,r.j4)(p,{key:1,images:null===(l=n.order)||void 0===l?void 0:l.images,image_holder_id:null===(v=n.order)||void 0===v?void 0:v.order_id,controller:"Order",ref:"orderImgs"},null,8,["images","image_holder_id"])):(0,r.kq)("",!0),(0,r.Wm)(h,{orderData:n.order},null,8,["orderData"]),(0,r.Wm)(_),"system_finish"==(null===(b=n.order)||void 0===b?void 0:b.stage_current)?((0,r.wg)(),(0,r.j4)(g,{key:2,orderId:n.order_id},null,8,["orderId"])):(0,r.kq)("",!0),"system_finish"==(null===(I=n.order)||void 0===I?void 0:I.stage_current)?((0,r.wg)(),(0,r.j4)(f,{key:3,detail:"",button:"",lines:"none",onClick:t[0]||(t[0]=t=>e.$router.push("/user/reactions"))},{default:(0,r.w5)((()=>[(0,r.Wm)(s,{src:i.chatboxOutline,slot:"start",color:"primary"},null,8,["src"]),(0,r.Uk)(" Нам важно ваше мнение. Оставьте отзыв о покупке ")])),_:1})):(0,r.kq)("",!0),(0,r.Wm)(k,{"is-open":n.isOpenDeliveryRejectionPopover,onDidDismiss:t[5]||(t[5]=e=>n.isOpenDeliveryRejectionPopover=!1)},{default:(0,r.w5)((()=>[(0,r.Wm)(w,null,{default:(0,r.w5)((()=>[(0,r.Wm)(y,null,{default:(0,r.w5)((()=>[(0,r.Wm)(f,{button:!0,detail:!1,onClick:t[1]||(t[1]=e=>a.action_rejected_reason("ОТКАЗ КУРЬЕРА: Отказ клиента"))},{default:(0,r.w5)((()=>[(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Отказ клиента")])),_:1})])),_:1}),(0,r.Wm)(f,{button:!0,detail:!1,onClick:t[2]||(t[2]=e=>a.action_rejected_reason("ОТКАЗ КУРЬЕРА: Заказ не готов/не соответствует"))},{default:(0,r.w5)((()=>[(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Заказ не готов/не соответствует")])),_:1})])),_:1}),(0,r.Wm)(f,{button:!0,detail:!1,onClick:t[3]||(t[3]=e=>a.action_rejected_reason("ОТКАЗ КУРЬЕРА: Поломка в пути"))},{default:(0,r.w5)((()=>[(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Поломка в пути")])),_:1})])),_:1}),(0,r.Wm)(f,{button:!0,detail:!1,onClick:t[4]||(t[4]=e=>a.action_rejected_reason("ОТКАЗ КУРЬЕРА: Заказ испорчен"))},{default:(0,r.w5)((()=>[(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Заказ испорчен")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["is-open"])]})),_:1},8,["pageTitle"])}var Uo=o(5679),Lo=o(2253),jo=o(3419),To=o(9332),zo=o(3462),Zo=o(9119);function qo(e,t,o,i,a,l){const s=(0,r.up)("ion-icon"),u=(0,r.up)("ion-title"),d=(0,r.up)("ion-item"),c=(0,r.up)("ion-toolbar"),m=(0,r.up)("ion-header"),p=(0,r.up)("ion-searchbar"),h=(0,r.up)("ion-img"),_=(0,r.up)("ion-label"),g=(0,r.up)("ion-list"),f=(0,r.up)("ion-content");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(m,null,{default:(0,r.w5)((()=>[(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[(0,r.Wm)(d,{lines:"none"},{default:(0,r.w5)((()=>[(0,r.Wm)(s,{icon:i.cartOutline,slot:"start"},null,8,["icon"]),(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Добавить к заказу")])),_:1}),(0,r.Wm)(s,{slot:"end",onClick:t[0]||(t[0]=e=>{i.closeModal()}),icon:i.closeOutline,size:"large"},null,8,["icon"])])),_:1})])),_:1})])),_:1}),(0,r.Wm)(f,null,{default:(0,r.w5)((()=>[(0,r.Wm)(p,{onInput:t[1]||(t[1]=e=>l.listGet({name_query:e.target.value,name_query_fields:"product_name,product_code"})),onIonClear:t[2]||(t[2]=e=>l.listGet({name_query:"",name_query_fields:"product_name,product_code"})),style:{"border-radius":"10px",color:"black"},placeholder:"Напишите название товара"}),(0,r.Wm)(g,null,{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.productList,(t=>((0,r.wg)(),(0,r.j4)(d,{key:t.product_id,onClick:e=>l.itemCreate(t.product_id)},{default:(0,r.w5)((()=>[(0,r.Wm)(h,{slot:"start",src:e.$heap.state.hostname+"image/get.php/"+t.image_hash+".50.50.webp"},null,8,["src"]),(0,r.Wm)(_,null,{default:(0,r.w5)((()=>[(0,r.Uk)((0,n.zw)(t.product_name),1)])),_:2},1024),(0,r.Wm)(_,{slot:"end",color:"primary"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,n.zw)(t.product_final_price)+(0,n.zw)(e.$heap.state.currencySign),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})],64)}var Go={components:{IonHeader:u.Gu,IonToolbar:u.sr,IonTitle:u.wd,IonContent:u.W2,IonSearchbar:u.VI,IonList:u.q_,IonItem:u.Ie,IonLabel:u.Q$,IonImg:u.Xz},props:["store_id","order_id"],setup(){const e=function(){u.Fy.dismiss()};return{closeModal:e,closeOutline:c.fID,cartOutline:c.Ox0,sparklesOutline:c.Fcs}},data(){return{productList:[]}},mounted(){this.listGet()},methods:{async listGet(e={}){e.store_id=this.store_id,e.is_active=1,e.limit=30;let t={};try{t=await L().post(`${this.$heap.state.hostname}Product/listGet`,e)}catch(o){}this.productList=t.product_list},async itemCreate(e){let t={order_id:this.order_id,product_id:e,product_quantity:prompt("Сколько добавить?",1)||1};try{await L().post(`${this.$heap.state.hostname}Entry/itemCreate`,t)}catch(o){this.$flash("Не удалось добавить товар")}u.Fy.dismiss()}}};const Po=(0,h.Z)(Go,[["render",qo]]);var Mo=Po,Bo=o(2639),Ro=o(6852),Ao={components:{OrderComp:Uo.Z,OrderHistoryComp:Lo.Z,OrderMetaComp:To.Z,OrderInfoComp:jo.Z,OrderTrackingComp:zo.Z,MsgSubscriptionComp:$t,ImageTileComp:Bo.Z,IonLabel:u.Q$,IonIcon:u.gu,IonContent:u.W2,IonItem:u.Ie,IonList:u.q_,IonPopover:u.d8},setup(){return{sparklesOutline:c.Fcs,chatboxOutline:c.DMF}},data(){return{order_id:this.$route.params.id,order:null,orderAutoloadClock:null,isOpenDeliveryRejectionPopover:!1}},methods:{async itemGet(e){try{if("skipCaching"!==e){const e=await d.Z.api.itemPreGet(this.order_id);e&&(this.order=e)}this.order=await d.Z.api.itemGet(this.order_id),this.itemAutoReload()}catch(t){switch(t.status){case 404:this.$flash("Заказ не найден"),this.order="notfound",this.$go("/order/order-list");break}}},itemAutoReload(){clearTimeout(this.orderAutoloadClock),this.orderAutoloadClock=setTimeout((()=>{this.itemGet(),console.log("order autoreload")}),6e4)},async onStageCreate(e,t){if(t.includes("action")){t=t.split("_").splice(1).join("_");try{this[t](e)}catch(o){console.log("stage handler not found"+t)}}else try{const o=await d.Z.api.itemStageCreate(e,t);if("ok"==o)return"customer_purged"==t||"customer_deleted"==t?(this.$flash("Заказ удален"),this.order=null,this.$go("/order/order-list"),void d.Z.cart.itemDelete(e)):(await this.itemGet(),!0)}catch(i){const e=i.responseJSON,t=e.messages.error;switch(t){case"wrong_courier_status":this.$flash("Смена курьера не открыта");break;case"order_is_empty":this.$alert("К сожалению, товара не осталось в наличии &#9785;","Заказ пуст");break;case"photos_must_be_made":this.$flash("Необходимо сфотографировать заказ"),this.action_take_photo();break;case"address_not_set":this.$flash("Необходимо добавить адрес доставки"),this.$go("/modal/user-addresses");break;case"order_sum_exceeded":this.$flash("Сумма заказа должна быть меньше предоплаты");break;case"order_sum_zero":this.$flash("Нельзя завершить пустой заказ, от него можно отказаться.");break;case"forbidden_bycustomer":this.$flash("Запрещено покупателем");break;case"already_payed":this.$flash("Заказ уже оплачен");break;default:this.$flash("Не удалось изменить статус заказа");break}return!1}},async action_confirm(e){const t=await this.onStageCreate(e,"customer_confirmed");t&&this.action_checkout()},async action_checkout(){console.log("setCurrentOrder",this.order),await this.$heap.commit("setCurrentOrder",this.order),this.$go(`/modal/order-checkout-${this.order_id}`)},async action_add(){const e=await u.Fy.create({component:Mo,componentProps:{store_id:this.order.order_store_id,order_id:this.order_id},initialBreakpoint:.75,breakpoints:[.75,1],canDissmiss:!0});e.present();await e.onDidDismiss();this.itemGet()},async action_objection(){const e=await u.Fy.create({component:Zo.Z,initialBreakpoint:.5,breakpoints:[.5,1],canDissmiss:!0});e.present();const t=await e.onDidDismiss();if(t.data){const e=`ВОЗРАЖЕНИЕ ПОКУПАТЕЛЯ: ${t.data}`,o=await d.Z.api.itemUpdate({order_id:this.order_id,order_objection:e});if("ok"==o){const e=await this.onStageCreate(this.order_id,"customer_disputed");e&&(this.$flash("Ваше возражение принято и будет рассмотрено администратором."),alert("Необходимо сфотографировать заказ"),this.action_take_photo())}}},action_rejected(){this.isOpenDeliveryRejectionPopover=!0},async action_rejected_reason(e){this.isOpenDeliveryRejectionPopover=!1;try{await d.Z.api.itemUpdate({order_id:this.order_id,order_objection:e}),await this.onStageCreate(this.order_id,"delivery_rejected"),this.$flash("Вы отказались от доставки")}catch(t){}},action_take_photo(){this.$refs.orderImgs.take_photo()},action_call_customer(){location.href=`tel:+${this.order.customer.user_phone}`},async action_courier_assign(){const e="courier",t={status:"ready||busy"},o=await u.Fy.create({component:Ro.Z,componentProps:{itemType:e,filter:t},initialBreakpoint:.75,breakpoints:[.75,1],canDissmiss:!0});o.present(),this.$topic.on("dismissModal",(()=>{o.dismiss()}));const i=await o.onDidDismiss();if(i.data)try{const e={order_id:this.order_id,courier_id:i.data.courier_id};await L().post(`${this.$heap.state.hostname}Courier/itemAssign`,e),await this.itemGet(),this.$flash("Курьер назначен")}catch(r){this.$flash("Не удалось назначить курьера")}}},ionViewDidEnter(){this.itemGet()},ionViewDidLeave(){clearTimeout(this.orderAutoloadClock)},created(){this.itemGet(),this.$topic.on("orderSumChanged",(()=>this.itemGet("skipCaching"))),this.$topic.on("pushStageChanged",(e=>{var t;(null===(t=this.order)||void 0===t?void 0:t.order_id)==(null===e||void 0===e?void 0:e.order_id)&&this.order.stage_current!=e.stage&&this.itemGet()}))}};const No=(0,h.Z)(Ao,[["render",xo]]);var Ho=No;const Fo="/catalog",Yo=[{path:"/home",redirect:Fo},{path:"/",redirect:Fo},{path:"/",component:g,children:[{path:"/catalog",component:Ee},{path:"/catalog/home-2",component:Ee},{path:"/catalog/store-edit-:id",component:()=>o.e(8183).then(o.bind(o,8183))},{path:"/catalog/store-:id",component:xt["default"]},{path:"/catalog/product-edit-:id",component:()=>o.e(2490).then(o.bind(o,2490))},{path:"/catalog/product-:id",component:Ut["default"]},{path:"/search",component:at},{path:"/search/store-edit-:id",component:()=>o.e(8183).then(o.bind(o,8183))},{path:"/search/store-:id",component:()=>Promise.resolve().then(o.bind(o,4888))},{path:"/search/product-edit-:id",component:()=>o.e(2490).then(o.bind(o,2490))},{path:"/search/product-:id",component:()=>Promise.resolve().then(o.bind(o,7820))},{path:"/user",component:Ot},{path:"/user/courier-dashboard",component:()=>o.e(139).then(o.bind(o,139))},{path:"/user/supplier-dashboard",component:()=>o.e(8908).then(o.bind(o,8908))},{path:"/user/sign-in",component:()=>o.e(1520).then(o.bind(o,1520))},{path:"/user/sign-up",component:()=>o.e(2812).then(o.bind(o,2812))},{path:"/user/user-edit",component:()=>o.e(4217).then(o.bind(o,4217))},{path:"/user/user-promo",component:()=>o.e(9900).then(o.bind(o,9900)),props:!0},{path:"/user/user-invoice",component:()=>o.e(5179).then(o.bind(o,5179)),props:!0},{path:"/user/verify-phone",name:"UserVerifyPhone",component:()=>o.e(9255).then(o.bind(o,9255)),props:!0},{path:"/user/reset-password",component:()=>o.e(1621).then(o.bind(o,1621))},{path:"/user/confirm-password",component:()=>o.e(4096).then(o.bind(o,4096))},{path:"/user/text-edit-:id",component:()=>o.e(9378).then(o.bind(o,9378))},{path:"/user/admin-tariff-edit-:id",component:()=>o.e(6108).then(o.bind(o,6108))},{path:"/user/courier-statistics",component:()=>Promise.all([o.e(6561),o.e(5627)]).then(o.bind(o,4091))},{path:"/user/supplier-statistics",component:()=>Promise.all([o.e(6561),o.e(4221)]).then(o.bind(o,5228))},{path:"/user/user-cards",component:()=>o.e(9354).then(o.bind(o,9354))},{path:"/user/reactions",component:()=>o.e(126).then(o.bind(o,126))},{path:"/user/feedback",component:()=>o.e(8165).then(o.bind(o,8165))},{path:"/order",component:()=>o.e(6382).then(o.bind(o,6382))},{path:"/order/order-list",component:()=>o.e(6382).then(o.bind(o,6382))},{path:"/order/order-:id",component:Ho},{path:"/order/shipment-draft",component:()=>Promise.all([o.e(1039),o.e(8180)]).then(o.bind(o,1942))},{path:"/order/shipment-:id",component:()=>Promise.all([o.e(1039),o.e(4530)]).then(o.bind(o,3917))},{path:"/page/about-us",component:()=>o.e(2312).then(o.bind(o,2312))},{path:"/page/supplier-guide",component:()=>o.e(9622).then(o.bind(o,9622))},{path:"/page/:id",component:()=>o.e(4220).then(o.bind(o,4220))},{path:"/error-offline",component:()=>o.e(6005).then(o.bind(o,6005))},{path:"/admin/transaction-edit-:id",component:()=>o.e(9371).then(o.bind(o,9371))},{path:"/admin/accounting",component:()=>Promise.all([o.e(6561),o.e(7733)]).then(o.bind(o,2012))},{path:"/admin/list-moderation",component:()=>o.e(6093).then(o.bind(o,6093))},{path:"/admin/text-list",component:()=>o.e(4773).then(o.bind(o,4773))},{path:"/admin/tariff-list",component:()=>o.e(5730).then(o.bind(o,5730))},{path:"/admin/mailing-list",component:()=>o.e(9487).then(o.bind(o,9487))}]},{path:"/modal/order-checkout-:id",component:Co},{path:"/modal/shipment-checkout-:id",component:()=>o.e(9098).then(o.bind(o,9098))},{path:"/modal/user-addresses",component:()=>o.e(1393).then(o.bind(o,1393))},{path:"/catalog/store-:id/menu",component:()=>o.e(6805).then(o.bind(o,6805))},{path:"/:catchAll(.*)",redirect:Fo}],Eo=(0,i.p7)({history:(0,i.PO)("/"),routes:Yo});Eo.beforeEach(((e,t)=>(K.Z.publish("dismissModal"),!0)));var Vo=Eo},7782:function(e,t,o){"use strict";o(3948),o(8862),o(7658),o(4916),o(5306);var i=o(9755),r=o.n(i),n=o(2008),a=o(9042),l=o(4405);const s={api:{async itemPreGet(e){const t=500;return await l.Z.prePost(n.Z.state.hostname+"Order/itemGet",{order_id:e},t)},async itemGet(e){const t=500,o=await l.Z.post(n.Z.state.hostname+"Order/itemGet",{order_id:e},t);if("customer_cart"==o.stage_current&&"customer"==o.user_role){const e={order_store_id:o.order_store_id,order_id:o.order_id,entries:o.entries,user_role:o.user_role,stage_current:"customer_cart",stage_current_name:o.stage_current_name,stage_next:o.stage_next,store:{store_name:o.store.store_name},created_at:o.created_at};s.cart.itemSet(e)}else null!==o&&void 0!==o&&o.order_store_id&&s.cart.itemDelete(o.order_id);return o},async itemUpdate(e){return r().post(n.Z.state.hostname+"Order/itemUpdate",JSON.stringify(e))},async itemSync(e){const t={order_id:e.order_id,order_store_id:e.order_store_id,order_description:e.order_description,entries:e.entries};return r().post(n.Z.state.hostname+"Order/itemSync",JSON.stringify(t))},async itemStageCreate(e,t){try{return r().post(n.Z.state.hostname+"Order/itemStageCreate",{order_id:e,new_stage:t})}catch(o){}},async listCartGet(){return r().post(n.Z.state.hostname+"Order/listCartGet")},async listLoad(e){const t=await r().post(n.Z.state.hostname+"Order/listGet",e);if("active_only"==e.order_group_type){let e=0;for(let o in t)"customer_cart"!=t[o].stage_current&&e++;a.Z.publish("activeOrderCountChanged",e)}return t},async listCount(){return await r().post(n.Z.state.hostname+"Order/listCountGet")},async listJobGet(e){return r().post(n.Z.state.hostname+"Courier/listJobGet",{courier_id:e})},async itemJobGet(e){return r().post(n.Z.state.hostname+"Courier/itemJobGet",{order_id:e})},async itemJobStart(e,t){return r().post(n.Z.state.hostname+"Courier/itemJobStart",{order_id:e,courier_id:t})},async itemJobTrack(e){return r().post(n.Z.state.hostname+"Courier/itemJobTrack",{order_id:e})},async entrySave(e,t){return e.entry_id?0==e.entry_quantity?this.entryDelete(e.entry_id):(e.order_id=t,this.entryUpdate(e)):this.entryCreate(e,t)},async entryCreate(e,t){const o={order_id:t,product_id:e.product_id,product_quantity:e.entry_quantity},i=await r().post(n.Z.state.hostname+"Entry/itemCreate",o);return a.Z.publish("orderSumChanged",t),i},async entryUpdate(e){const t={order_id:e.order_id,entry_id:e.entry_id,entry_quantity:e.entry_quantity},o=await r().post(n.Z.state.hostname+"Entry/itemUpdate",JSON.stringify(t));return a.Z.publish("orderSumChanged",null),o},async entryDelete(e){const t=await r().post(n.Z.state.hostname+"Entry/itemDelete",{entry_id:e});return a.Z.publish("orderSumChanged",null),t}},doc:{async entrySave(e,t,o){return(null===o||void 0===o?void 0:o.order_id)>0&&null!==t&&void 0!==t&&t.entry_id?await s.api.entrySave(t,o.order_id):await s.cart.entrySave(e,t)}},cart:{listSave(){n.Z.commit("cartListStore",n.Z.state.cartList)},listTotalGet(){let e=0;for(let t in n.Z.state.cartList)for(let o in n.Z.state.cartList[t].entries){const i=n.Z.state.cartList[t].entries[o];i&&i.entry_quantity&&i.entry_price&&(e+=i.entry_quantity*i.entry_price)}return Math.round(e)},async itemSync(e){const t=s.cart.itemGetById(e);try{const e=await s.api.itemSync(null===t||void 0===t?void 0:t.data);return n.Z.state.cartList[null===t||void 0===t?void 0:t.order_index]=e,s.cart.listSave(),e}catch(o){}},itemGetByStoreId(e){for(let t in n.Z.state.cartList)if(n.Z.state.cartList[t].order_store_id==e&&"customer_deleted"!=n.Z.state.cartList[t].stage_current)return{data:n.Z.state.cartList[t],order_index:t};return null},itemGetById(e){for(let t in n.Z.state.cartList)if(n.Z.state.cartList[t].order_id==e&&"customer_deleted"!=n.Z.state.cartList[t].stage_current)return{data:n.Z.state.cartList[t],order_index:t};return null},itemSet(e){const t=this.itemGetByStoreId(e.order_store_id);t?n.Z.state.cartList[t.order_index]=e:n.Z.state.cartList.push(e),s.cart.listSave()},itemSave(e,t){return!!s.cart.itemUpdate(e,t)||s.cart.itemCreate(e,t)},async itemCreate(e,t){let o="";if(n.Z.state.currentStore&&n.Z.state.currentStore.store_id==e)o=n.Z.state.currentStore.store_name;else try{const t=await r().get(n.Z.state.hostname+"Store/itemGet",{store_id:e,mode:"basic"});o=t.store_name}catch(l){}const i=new Date,a={order_store_id:e,order_id:-e,store:{store_name:o},entries:t||[],created_at:i.toISOString().replace(/[T]/g," ").replace(/.\d\d\dZ/,""),stage_next:{customer_confirmed:["Перейти к оформлению"],customer_deleted:["Удалить","danger","clear"]},stage_current:"customer_cart",user_role:"customer"};return n.Z.state.cartList.push(a),s.cart.listSave(),e},itemUpdate(e,t){const o=this.itemGetByStoreId(e);return!!o&&(n.Z.state.cartList[o.order_index].entries=o.data.entries.concat(t||[]),s.cart.listSave(),!0)},itemDelete(e,t){const o=this.itemGetById(e);return!!o&&(o.data.order_id>0&&"purge_on_server"==t&&s.api.itemStageCreate(o.data.order_id,"customer_deleted"),n.Z.state.cartList.splice(o.order_index,1),s.cart.listSave(),!0)},entryQuantityGet(e){const t=s.cart.entryGet(e);return t&&t.data.entry_quantity&&parseFloat(t.data.entry_quantity)||0},entryGet(e){for(let t in n.Z.state.cartList){if(!n.Z.state.cartList[t].entries||"customer_deleted"==n.Z.state.cartList[t].stage_current)return null;for(let o in n.Z.state.cartList[t].entries)if(n.Z.state.cartList[t].entries[o].product_id==e)return{data:n.Z.state.cartList[t].entries[o],order_index:t,entry_index:o}}return null},async entrySave(e,t){const o=s.cart.itemGetByStoreId(e);return o?0==t.entry_quantity?(s.cart.entryDelete(t.product_id),!0):!!await s.cart.entryUpdate(t)||s.cart.entryCreate(t,o):(s.cart.itemCreate(e,[t]),!0)},entryCreate(e,t){return 1!=e.is_disabled&&!e.deleted_at&&(n.Z.state.cartList[t.order_index].entries.push(e),s.cart.listSave(),!0)},async entryUpdate(e){const t=s.cart.entryGet(e.product_id);if(!t)return!1;const o=Object.assign(t.data,e);if(n.Z.state.cartList[t.order_index].entries[t.entry_index]=o,s.cart.listSave(),o.entry_id)try{await s.api.entryUpdate(e)}catch(i){}return o},entryDelete(e){const t=s.cart.entryGet(e);n.Z.state.cartList[null===t||void 0===t?void 0:t.order_index].entries.splice(null===t||void 0===t?void 0:t.entry_index,1),0==n.Z.state.cartList[null===t||void 0===t?void 0:t.order_index].entries.length&&n.Z.state.cartList.splice(null===t||void 0===t?void 0:t.order_index,1),s.cart.listSave()}}};t.Z=s},9042:function(e,t,o){"use strict";o(7658);class i{constructor(){this.events={}}on(e,t){this.events[e]=this.events[e]||[],this.off(e,t),this.events[e].push(t)}off(e,t){if(this.events[e])for(let o=0;o<this.events[e].length;o++)if(this.events[e][o]===t){this.events[e].splice(o,1);break}}publish(e,t){this.events[e]&&this.events[e].forEach((function(e){e(t)}))}}t.Z=new i},351:function(e,t,o){"use strict";o(8862);var i=o(9755),r=o.n(i),n=o(2008),a=o(9042),l=o(4405),s=o(411),u=o(2406),d=o(5836),c=o(3977),m=o(175);const p={init(){this.firebase.init()},async settingsGet(){const e=await r().get(n.Z.state.hostname+"User/itemSettingsGet");n.Z.commit("setSettings",e),a.Z.publish("settingsGet",e)},async get(e="all"){n.Z.state.settings||await this.settingsGet();const t=await r().post(n.Z.state.hostname+"User/itemGet",{mode:e}).done((function(t,o,i){const r=i.getResponseHeader("x-sid");p.sessionIdUse(r),"full"==e&&(p.courier.data=t.courier,p.courier.parseStatus(),p.supplier.storeList=t.storeList),n.Z.commit("setUser",t),a.Z.publish("userGet",t),p.geo.switch()}));return null===t||void 0===t||t.user_id,p.isCourier()&&await p.courier.get(),t},async autoSignIn(){var e;const t=await l.Z.pref.get("sessionId");let o;t&&p.sessionIdUse(t);try{o=await p.get()}catch(n){}if((null===(e=o)||void 0===e?void 0:e.user_id)>1)return o;const i=await l.Z.pref.get("signInData"),r=JSON.parse(i||"{}");if(r&&r.user_phone&&r.user_pass){try{await p.signIn(r)}catch(a){}return await p.get()}return o},async sessionIdUse(e){await l.Z.pref.set("sessionId",e),r().ajaxSetup({beforeSend:function(t){t.setRequestHeader("x-sid",e)}})},async signIn(e){const t=await l.Z.pref.get("metric_id");return e.metric_id=null!==t&&void 0!==t?t:0,await r().post(n.Z.state.hostname+"User/signIn",e).done((async function(t,o,i){await l.Z.pref.set("signInData",JSON.stringify(e));const r=i.getResponseHeader("x-sid");p.sessionIdUse(r),e.metric_id&&await l.Z.pref.set("metric_user_id",t)})).fail((async function(){}))},async signOut(){try{return await p.courier.signOut(),await r().post(n.Z.state.hostname+"User/signOut"),await l.Z.pref.remove("signInData"),n.Z.commit("setUser",{user_id:-1}),p.sessionIdUse(null),p.geo.trackingStop(),{user_id:-1}}catch(e){}},async signUp(e){const t=await l.Z.pref.get("metric_id");e.metric_id=null!==t&&void 0!==t?t:0;const o=await r().post(n.Z.state.hostname+"User/signUp",e);if(o>0){const t=e.user_phone,o=e.user_pass;await l.Z.pref.set("signInData",JSON.stringify({user_phone:t,user_pass:o}))}return o},isOnline(){return 1},isAdmin(){var e,t,o;const i=null===(e=n.Z.state)||void 0===e||null===(t=e.user)||void 0===t||null===(o=t.member_of_groups)||void 0===o?void 0:o.group_types;return(null===i||void 0===i?void 0:i.indexOf("admin"))>-1},isCourier(){let e="";try{if(e=n.Z.state.user.member_of_groups.group_types,e.indexOf("courier")>-1)return!0}catch(t){}return!1},isSupplier(){return!0},supplier:{storeList:null,status:"notsupplier",async listGet(){var e,t,o;this.storeList=null;const i=null!==(e=null===(t=n.Z.state)||void 0===t||null===(o=t.user)||void 0===o?void 0:o.user_id)&&void 0!==e?e:0;if(i>0){const e={owner_id:i,owner_ally_ids:i};try{this.storeList=await r().post(n.Z.state.hostname+"Store/listGet",e),this.status="supplier"}catch(l){}}return a.Z.publish("supplierStoreListGet",this.storeList),this.storeList},async storeItemCreate(e){var t,o,i;const a=null!==(t=null===(o=n.Z.state)||void 0===o||null===(i=o.user)||void 0===i?void 0:i.user_id)&&void 0!==t?t:0;return a>0?await r().post(n.Z.state.hostname+"Store/itemCreate",{name:e}):null}},courier:{data:null,status:"notcourier",async get(){try{const e=await r().post(n.Z.state.hostname+"Courier/itemGet");return p.courier.data=e,p.courier.parseStatus(),p.courier.batteryCheck(),e}catch(e){p.courier.data=null}},async batteryCheck(){try{var e;const t=await u.A.getBatteryInfo(),o={courier_id:null===(e=p.courier.data)||void 0===e?void 0:e.courier_id,courier_comment:JSON.stringify(t)};await r().post(n.Z.state.hostname+"Courier/itemUpdate",JSON.stringify(o))}catch(t){}},async updateStatus(e){var t;if(null===(t=p.courier.data)||void 0===t||!t.courier_id)return"ok";const o={courier_id:p.courier.data.courier_id,group_type:e},i=await r().post(n.Z.state.hostname+"Courier/itemUpdateStatus",o);return"ok"==i&&(p.courier.status=e,a.Z.publish("courierStatusChange",p.courier.status)),i},parseStatus(){var e,t;p.courier.status=(null===(e=p.courier.data)||void 0===e||null===(t=e.member_of_groups)||void 0===t?void 0:t.group_types)||"notcourier",a.Z.publish("courierStatusChange",p.courier.status)},async signOut(){const e=await p.courier.updateStatus("idle");return"ok"==e&&(p.courier.data=null,a.Z.publish("courierStatusChange","notcourier")),e}},geo:{trackingActive:!1,clock:null,async switch(){const e=n.Z.state.user.location_main,t=p.geo.lastStoredGet();null!==e&&void 0!==e&&e.group_name&&"Current"!=e.group_name?(n.Z.commit("setUserMainLocation",e),a.Z.publish("userMainLocationSet",e),this.trackingStop()):t?(n.Z.commit("setUserCurrentLocation",t),a.Z.publish("userCurrentLocationSet",t),this.trackingStart()):"Current"==(null===e||void 0===e?void 0:e.group_name)&&(n.Z.commit("setUserCurrentLocation",e),a.Z.publish("userCurrentLocationSet",e),this.trackingStart())},async get(){try{return await s.b.getCurrentPosition({enableHighAccuracy:!1,timeout:2e4,maximumAge:1e3})}catch(e){}return null},async trackingStart(){try{p.geo.trackingStop(),p.geo.trackingActive=!0,p.geo.clock=await s.b.watchPosition({enableHighAccuracy:!0,timeout:2e4,maximumAge:1e3},(async e=>{var t,o,i,r,l,s;const u=parseFloat(null!==(t=null===e||void 0===e||null===(o=e.coords)||void 0===o?void 0:o.latitude)&&void 0!==t?t:0),d=parseFloat(null!==(i=null===e||void 0===e||null===(r=e.coords)||void 0===r?void 0:r.longitude)&&void 0!==i?i:0);if(!u||!d)return;const c=p.geo.lastStoredGet(),m=parseFloat(null!==(l=null===c||void 0===c?void 0:c.location_latitude)&&void 0!==l?l:0),h=parseFloat(null!==(s=null===c||void 0===c?void 0:c.location_longitude)&&void 0!==s?s:0),_=Math.abs(m-u)/9e-6,g=Math.abs(h-d)/9e-6,f=500;if(_<f&&g<f)return;const y=await p.geo.geocode([u,d]),w={group_name:"Current",location_latitude:u,location_longitude:d,location_address:"около "+(null!==y&&void 0!==y?y:"текущего местоположения"),timestamp:e.timestamp};p.geo.trackingActive&&(p.geo.lastStoredSet(w),n.Z.commit("setUserCurrentLocation",w),a.Z.publish("userCurrentLocationSet",w))}))}catch(e){}},trackingStop(){try{p.geo.clock&&s.b.clearWatch({id:p.geo.clock}),p.geo.trackingActive=!1}catch(e){}},async geocode(e){try{var t;await(0,d.xk)({apiKey:n.Z.state.settings.location.ymapApiKey});const o=await window.ymaps.geocode(e);return null===(t=o.geoObjects.get(0))||void 0===t?void 0:t.getAddressLine()}catch(o){}return null},lastStoredGet(){try{var e;return null!==(e=JSON.parse(localStorage.lastStoredPosition))&&void 0!==e?e:null}catch(t){}return null},lastStoredSet(e){try{localStorage.lastStoredPosition=JSON.stringify(e)}catch(t){}}},firebase:{tokenSaved:!1,tokenSavedClock:null,init(){a.Z.on("userGet",(e=>{!p.firebase.tokenSaved&&e.user_id>0&&n.Z.state.settings.firebase&&((0,c.ZF)(n.Z.state.settings.firebase),clearTimeout(p.firebase.tokenSavedClock),p.firebase.tokenSavedClock=setTimeout((function(){p.firebase.saveNotificationToken()}),2e3))}))},async saveNotificationToken(){if(window.Notification&&"granted"==Notification.permission)try{const e=n.Z.state.settings.firebase.vapidKey,t=(0,m.KL)(),o=await(0,m.LP)(t,{vapidKey:e}),i={type:"webpush",registration_id:o,user_agent:navigator.userAgent};await r().post(`${n.Z.state.hostname}MessageSub/itemCreate`,i),p.firebase.tokenSaved=!0}catch(e){}},async savePushToken(e){if(p.firebase.tokenSaved)return"idle";try{const t={type:"push",registration_id:e,user_agent:navigator.userAgent},o=await r().post(`${n.Z.state.hostname}MessageSub/itemCreate`,t);return p.firebase.tokenSaved=!0,o}catch(t){}}}};p.init(),t.Z=p},4405:function(e,t,o){"use strict";o(4916),o(5306),o(8862),o(1703);var i=o(2008),r=o(9755),n=o.n(r),a=o(3978),l=o(4571);const s={pref:{async set(e,t){var o,i;null===(o=navigator)||void 0===o||null===(i=o.storage)||void 0===i||i.persist(),await l.u.set({key:e,value:t})},async get(e){const t=await l.u.get({key:e});return(null===t||void 0===t?void 0:t.value)||localStorage[e]},async remove(e){await l.u.remove({key:e}),localStorage.removeItem(e)}},deliveryCalculate(e){if(!e.locations||!e.locations[0]||!e.locations[0].distance)return null;const t=e.locations[0].distance,o=e.store_time_preparation||0;return s.deliveryTimeCalculate(t,o)},deliveryTimeCalculate(e,t){var o;if(!i.Z.getters.settings.delivery)return{time:0,timeMin:0,timeMax:0};t=parseInt(null!==(o=t)&&void 0!==o?o:i.Z.getters.settings.delivery.timePreparationDefault);const r=parseInt(i.Z.getters.settings.delivery.timeDelta),n=parseInt(i.Z.getters.settings.delivery.speed),a=5*Math.round(e/n*60/5)+t,l=a>r?a-r:a,s=l+r;return{time:a,timeMin:l,timeMax:s}},render(e,t){for(const o in t)e=e.replace(`{{${o}}}`,t[o]);return e=e.replace(/{{\.}}/,"-"),e},date:{today(){const e=new Date;return e.setHours(-e.getTimezoneOffset()/60),e},firstDay(e=0){const t=this.today();return t.setDate(1),t.setMonth(t.getMonth()+e),t},toIso(e){return e.toISOString().slice(0,10)},isoToDmy(e){return e.split("-").reverse().join(".")}},storage:null,async storageCreate(){return s.storage||(this.storage=new a.K,await this.storage.create()),this.storage},stringToHash(e){let t=0;if(0==e.length)return t;for(let o=0;o<e.length;o++){const i=e.charCodeAt(o);t=(t<<5)-t+i,t&=t}return t},requestIdGet(e,t){return e+"~"+s.stringToHash(JSON.stringify(t))},debounceDictionary:{},debounceControl(e,t=2e3){const o=Date.now();this.debounceCheck(e,t),this.debounceDictionary[e]=o},debounceCheck(e,t=2e3){const o=Date.now();if(this.debounceDictionary[e]&&this.debounceDictionary[e]+t>o)throw new Error("Too many requests")},async post(e,t,o=2e3){const i=s.requestIdGet(e,t);this.debounceControl(i,o);const r=await n().post(e,t),a=Date.now(),l={response:r,responseStamp:a};return await this.storageCreate(),await this.storage.set(i,l),r},async prePost(e,t,o=2e3){const i=s.requestIdGet(e,t);this.debounceCheck(i,o),await this.storageCreate();const r=await this.storage.get(i);return r?(Math.random()<.01&&setTimeout((()=>this.clearPost()),5e3),null===r||void 0===r?void 0:r.response):null},async clearPost(){const e=await this.storage.get("lastClearance"),t=e||0,o=12096e5,i=Date.now();i-t<o||(this.storage.forEach(((e,t,r)=>{e&&e.responseStamp&&i-e.responseStamp>o&&this.storage.remove(t)})),await this.storage.set("lastClearance",i))}};t.Z=s},3763:function(e,t,o){"use strict";o.d(t,{Z:function(){return _}});var i=o(6252),r=o(3577);const n=e=>((0,i.dD)("data-v-1923045c"),e=e(),(0,i.Cn)(),e),a=n((()=>(0,i._)("span",{style:{"font-size":"2em"}},"+",-1))),l={key:0};function s(e,t,o,n,s,u){const d=(0,i.up)("ion-button"),c=(0,i.up)("ion-icon"),m=(0,i.up)("ion-label");return s.productData?((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,r.C_)(`product-actions ${u.componentLayout} ${o.buttonLayout} ${this.currentQuantity>0?"incart":""} ${u.isAvailable?"":"sold"}`)},[this.currentQuantity?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(d,{key:0,onClick:t[0]||(t[0]=e=>u.addToOrder(+this.productData.product_quantity_min)),color:"primary",size:"small"},{default:(0,i.w5)((()=>[a,"horizontal"==o.buttonLayout?((0,i.wg)(),(0,i.iD)("span",l,"купить")):(0,i.kq)("",!0)])),_:1})),this.currentQuantity>0?((0,i.wg)(),(0,i.j4)(d,{key:1,onClick:t[1]||(t[1]=e=>u.addToOrder(+this.productData.product_quantity_min)),color:"light",size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{icon:n.add,color:"primary"},null,8,["icon"])])),_:1})):(0,i.kq)("",!0),this.currentQuantity>0?((0,i.wg)(),(0,i.j4)(m,{key:2,color:"primary",size:"small",onClick:t[2]||(t[2]=e=>u.setInOrder())},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(this.currentQuantity),1)])),_:1})):(0,i.kq)("",!0),this.currentQuantity>0?((0,i.wg)(),(0,i.j4)(d,{key:3,onClick:t[3]||(t[3]=e=>u.addToOrder(-this.productData.product_quantity_min)),color:"light",size:"small"},{default:(0,i.w5)((()=>[this.currentQuantity>this.productData.product_quantity_min?((0,i.wg)(),(0,i.j4)(c,{key:0,icon:n.remove,color:"primary"},null,8,["icon"])):(0,i.kq)("",!0),this.currentQuantity<=this.productData.product_quantity_min?((0,i.wg)(),(0,i.j4)(c,{key:1,icon:n.trash,color:"primary"},null,8,["icon"])):(0,i.kq)("",!0)])),_:1})):(0,i.kq)("",!0)],2)):(0,i.kq)("",!0)}var u=o(4929),d=o(8903),c=o(2008),m={components:{IonIcon:u.gu,IonButton:u.YG,IonLabel:u.Q$},inject:["$Order"],props:["productItem","entry","orderData","buttonLayout","display"],setup(){return{add:d.IHx,remove:d.OdJ,trash:d._Ij,cart:d.Nu6}},data(){return{order_store_id:0,productData:null}},mounted(){this.propsCalculate(),this.productListItemHighlight()},methods:{propsCalculate(){let e=0,t=this.entry||this.productItem;t.product_quantity_min=parseFloat(t.product_quantity_min)||1,this.productItem?(t.entry_quantity=0,e=this.productItem.store_id):e=this.orderData.order_store_id,this.order_store_id=e,this.productData=t},productListItemHighlight(){var e,t;const o=(null===(e=this.productData)||void 0===e?void 0:e.parent_product_id)||(null===(t=this.productData)||void 0===t?void 0:t.product_id);let i=document.getElementById(`product_list_item${o}`);i&&(this.currentQuantity?i.classList.add("incart"):i.classList.remove("incart"))},addToOrder(e){var t;let o=parseFloat(this.currentQuantity)+parseFloat(e);if((this.productItem||this.entry)&&(this.currentQuantity+e<0&&(o=0),!(0==o&&(null===(t=this.orderData)||void 0===t?void 0:t.order_id)>0&&!1===confirm("Удалить?"))))return this.updateOrder(o)},setInOrder(){let e=parseFloat(prompt("Введите количество",this.currentQuantity));if(null!=e&&!isNaN(e))return this.updateOrder(e)},newQuantityCalculate(e){var t;(e<0||!e)&&(e=0);const o="reserved"==(null===(t=this.orderData)||void 0===t?void 0:t.order_stock_status),i=!o;if(i&&(e=this.productData.product_quantity_min*Math.round(e/this.productData.product_quantity_min)),1==this.productData.is_counted){let t=Math.round(100*(this.productData.product_quantity-this.productData.product_quantity_reserved))/100;o&&(t+=parseFloat(this.productData.entry_quantity)),e>t&&(this.$flash(`В наличии есть только ${t}${this.productData.product_unit}`),e=Math.min(this.productData.product_quantity,t))}return e},async updateOrder(e){e=this.newQuantityCalculate(e);let t=this.productItem?this.productItem.product_quantity:this.productData.product_quantity,o=this.productData.entry_text;this.productData.product_name&&(o=this.productData.product_name+(this.productData.product_option?` [${this.productData.product_option}]`:""));let i={entry_id:this.productData.entry_id,product_id:this.productData.product_id,product_unit:this.productData.product_unit,product_quantity:t,product_quantity_min:this.productData.product_quantity_min,is_counted:this.productData.is_counted,entry_quantity:e,entry_price:this.productData.product_final_price||this.productData.entry_price,entry_text:o,image_hash:this.productData.image_hash||""};this.productData.entry_quantity=e,await this.$Order.doc.entrySave(this.order_store_id,i,this.orderData),this.productListItemHighlight()}},computed:{currentQuantity(){return this.productItem?Math.round(100*(c.Z.state.cartProductWatchList[this.productData.product_id]||0))/100:Math.round(100*this.productData.entry_quantity)/100},componentLayout(){return"inline"==this.display?"inline":"absolute"},isAvailable(){return!(1==this.productData.is_counted&&!this.productData.entry_quantity)||this.productData.product_quantity-this.productData.product_quantity_reserved>0}},watch:{productItem:function(){this.propsCalculate()},entry:function(){this.propsCalculate()}}},p=o(3744);const h=(0,p.Z)(m,[["render",s],["__scopeId","data-v-1923045c"]]);var _=h},9395:function(e,t,o){"use strict";o.d(t,{Z:function(){return $}});var i=o(6252),r=o(3577);function n(e,t,o,n,a,l){const s=(0,i.up)("ion-icon"),u=(0,i.up)("ion-label"),d=(0,i.up)("ion-chip");return l.cartListTotal?((0,i.wg)(),(0,i.j4)(d,{key:0,onClick:t[0]||(t[0]=e=>l.openCartList()),color:"dark",class:(0,r.C_)(a.currentClass)},{default:(0,i.w5)((()=>[(0,i.Wm)(s,{icon:n.cart},null,8,["icon"]),(0,i.Wm)(u,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(l.cartListTotal)+(0,r.zw)(e.$heap.state.currencySign),1)])),_:1})])),_:1},8,["class"])):(0,i.kq)("",!0)}o(7658);var a=o(8903),l=o(4929),s=o(5625);const u=e=>((0,i.dD)("data-v-2fbd9bf0"),e=e(),(0,i.Cn)(),e),d={key:0},c={key:1,style:{display:"flex","align-items":"center","justify-content":"center",height:"100%"}},m={style:{width:"max-content","text-align":"center"}},p=u((()=>(0,i._)("br",null,null,-1))),h=u((()=>(0,i._)("a",{href:"/catalog"},"на главную",-1)));function _(e,t,o,r,n,a){const l=(0,i.up)("ion-icon"),s=(0,i.up)("ion-title"),u=(0,i.up)("ion-item"),_=(0,i.up)("ion-toolbar"),g=(0,i.up)("ion-header"),f=(0,i.up)("order-comp"),y=(0,i.up)("ion-label"),w=(0,i.up)("ion-content");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(g,null,{default:(0,i.w5)((()=>[(0,i.Wm)(_,{color:"primary"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{lines:"none",color:"primary"},{default:(0,i.w5)((()=>[(0,i.Wm)(l,{icon:r.cartOutline,slot:"start"},null,8,["icon"]),(0,i.Wm)(s,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Корзина")])),_:1}),(0,i.Wm)(l,{slot:"end",onClick:t[0]||(t[0]=e=>{a.clearCart()}),icon:r.closeOutline,size:"large"},null,8,["icon"])])),_:1})])),_:1})])),_:1}),(0,i.Wm)(w,null,{default:(0,i.w5)((()=>[n.cartList.length?((0,i.wg)(),(0,i.iD)("div",d,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.cartList,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e.order_id,class:"order-segment"},[(0,i.Wm)(f,{orderData:e,onStageCreate:a.onStageCreate},null,8,["orderData","onStageCreate"])])))),128))])):((0,i.wg)(),(0,i.iD)("div",c,[(0,i._)("div",m,[(0,i.Wm)(l,{icon:r.sparklesOutline,size:"large"},null,8,["icon"]),(0,i.Wm)(y,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Корзина пуста ")])),_:1}),p,h])]))])),_:1})],64)}var g=o(2008),f=o(5679),y=o(7782),w={components:{OrderComp:f.Z,IonContent:l.W2,IonLabel:l.Q$,IonHeader:l.Gu,IonToolbar:l.sr,IonIcon:l.gu,IonTitle:l.wd,IonItem:l.Ie},setup(){const e=function(){l.Fy.dismiss()};return{closeModal:e,closeOutline:a.fID,cartOutline:a.Ox0,sparklesOutline:a.Fcs}},data(){return{cartList:g.Z.state.cartList}},created(){this.$topic.on("dismissModal",(()=>{l.Fy&&l.Fy.isOpen&&l.Fy.dismiss()}))},methods:{clearCart(e,t){return this.closeModal(),this.clearHighlightedProducts(),y.Z.cart.itemDelete(e,t)},clearHighlightedProducts(){document.querySelectorAll(".incart").forEach((e=>e.classList.remove("incart")))},async onStageCreate(e,t){if("customer_purged"==t||"customer_deleted"==t)return this.clearCart(e,"purge_on_server");"customer_action_confirm"==t&&(t="customer_confirmed");try{const o=await y.Z.cart.itemSync(e),i=await y.Z.api.itemStageCreate(o.order_id,t);if("ok"==i&&"customer_cart"!=t&&this.clearCart(o.order_id),"ok"==i&&"customer_confirmed"==t){const e=await y.Z.api.itemGet(o.order_id);return this.$heap.commit("setCurrentOrder",e),await this.$router.push(`/order/order-${o.order_id}`),void await this.$router.push(`/modal/order-checkout-${o.order_id}`)}this.$go("/order/order-"+o.order_id)}catch(o){const t=null===o||void 0===o?void 0:o.responseJSON;if(!t)return!1;const i=t.messages.error;switch(i){case"order_is_empty":this.$alert("К сожалению, товара не осталось в наличии ☹️","Заказ пуст");break;case"address_not_set":this.$flash("Необходимо добавить адрес доставки"),this.$topic.publish("dismissModal"),this.$go("/modal/user-addresses"),this.$heap.state.next_route="/order/order-"+e;break}return!1}}}},k=o(3744);const v=(0,k.Z)(w,[["render",_],["__scopeId","data-v-2fbd9bf0"]]);var b=v,I=o(9042),W={inject:["$Order"],components:{IonIcon:l.gu,IonLabel:l.Q$,IonChip:l.hM},setup(){return{cart:a.Nu6}},data(){return{currentClass:"activecart"}},computed:{cartListTotal(){return this.$Order.cart.listTotalGet()}},methods:{goToCartList(){s.Z.push({path:"/cart-list"})},async openCartList(){const e=document.querySelector("ion-router-outlet"),t=await l.Fy.create({component:b,canDismiss:!0,backdropDismiss:!0,keyboardClose:!0,presentingElement:e}),o=function(){t.dismiss()};return I.Z.on("dismissModal",o),t.present()}},watch:{cartListTotal(){this.currentClass="",setTimeout((()=>{this.currentClass="activecart"}),300)}}};const C=(0,k.Z)(W,[["render",n],["__scopeId","data-v-19f97250"]]);var $=C},8699:function(e,t,o){"use strict";o.d(t,{Z:function(){return g}});var i=o(6252),r=o(3577);const n={class:"desktop-footer-container"},a={class:"desktop-footer-top"},l={class:"desktop-footer-bottom"},s={style:{"padding-top":"15px"}},u={href:"https://uniteller.ru",target:"_new"};function d(e,t,o,d,c,m){const p=(0,i.up)("ion-img"),h=(0,i.up)("ion-title"),_=(0,i.up)("router-link"),g=(0,i.up)("ion-label"),f=(0,i.up)("ion-footer");return(0,i.wg)(),(0,i.j4)(f,{class:"desktop-footer",collapse:"fade"},{default:(0,i.w5)((()=>[(0,i._)("div",n,[(0,i._)("div",a,[(0,i.Wm)(_,{to:"/"},{default:(0,i.w5)((()=>[(0,i._)("div",null,[(0,i.Wm)(p,{src:"/img/logo_full_transparent.png",style:{width:"150px",height:"auto"}}),(0,i.Wm)(h,null,{default:(0,i.w5)((()=>[(0,i.Uk)("только пожелай")])),_:1})])])),_:1}),(0,i._)("div",null,[(0,i._)("div",null,[(0,i.Wm)(_,{to:"/page/about-us"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,null,{default:(0,i.w5)((()=>[(0,i.Uk)("О нас")])),_:1})])),_:1})]),(0,i._)("div",null,[(0,i.Wm)(_,{to:"/page/contacts"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Контакты")])),_:1})])),_:1})]),(0,i._)("div",null,[(0,i.Wm)(_,{to:"/page/rules-customer"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Правила пользования")])),_:1})])),_:1})]),(0,i._)("div",null,[(0,i.Wm)(_,{to:"/page/privacy_policy"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Политика конфиденциальности")])),_:1})])),_:1})])])]),(0,i._)("div",l,[(0,i._)("div",s,[(0,i.Wm)(g,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Все права защищены. 2021-"+(0,r.zw)(e.year)+" iSellSoft © ",1)])),_:1})]),(0,i._)("div",null,[(0,i._)("a",u,[(0,i.Wm)(p,{src:"/img/uniteller.png",style:{width:"200px",height:"auto"}})])])])])])),_:1})}var c=o(7782),m=o(4929),p=(0,i.aZ)({components:{IonFooter:m.fr,IonLabel:m.Q$,IonImg:m.Xz,IonTitle:m.wd},data(){return{year:(new Date).getUTCFullYear()}},computed:{cartListTotal(){return c.Z.cart.listTotalGet()}}}),h=o(3744);const _=(0,h.Z)(p,[["render",d]]);var g=_},62:function(e,t,o){"use strict";o.d(t,{Z:function(){return h}});var i=o(6252),r=o(3577);const n=e=>((0,i.dD)("data-v-8be16406"),e=e(),(0,i.Cn)(),e),a={class:"slide-title"},l=n((()=>(0,i._)("div",{id:"hcat_widget_grid"},null,-1)));function s(e,t,o,n,s,u){const d=(0,i.up)("ion-img"),c=(0,i.up)("ion-thumbnail"),m=(0,i.up)("swiper-slide"),p=(0,i.up)("swiper");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(p,{id:"hcat_widget_grid","slides-per-view":4.5,"space-between":10},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.groupList,(t=>((0,i.wg)(),(0,i.j4)(m,{key:t.group_id,onClick:()=>e.onClick(t.group_id)},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{style:{width:"70px",height:"70px"}},{default:(0,i.w5)((()=>[t.image_hash?((0,i.wg)(),(0,i.j4)(d,{key:0,style:{"border-radius":"10px",border:"1px solid #ddd"},src:`${e.$heap.state.hostname}image/get.php/${t.image_hash}.150.150.webp`},null,8,["src"])):(0,i.kq)("",!0)])),_:2},1024),(0,i._)("div",a,(0,r.zw)(t.group_name),1)])),_:2},1032,["onClick"])))),128))])),_:1}),l],64)}var u=o(4929),d=o(3181),c=(0,i.aZ)({components:{IonImg:u.Xz,IonThumbnail:u.Bs,Swiper:d.t,SwiperSlide:d.o},props:["groupList","onClick"]}),m=o(3744);const p=(0,m.Z)(c,[["render",s],["__scopeId","data-v-8be16406"]]);var h=p},1590:function(e,t,o){"use strict";o.d(t,{Z:function(){return c}});var i=o(6252),r=o(3577);function n(e,t,o,n,a,l){const s=(0,i.up)("ion-title"),u=(0,i.up)("ion-icon"),d=(0,i.up)("ion-toolbar"),c=(0,i.up)("ion-header"),m=(0,i.up)("ion-button"),p=(0,i.up)("ion-col"),h=(0,i.up)("ion-row"),_=(0,i.up)("ion-grid"),g=(0,i.up)("ion-img"),f=(0,i.up)("ion-content");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Wm)(s,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Просмотр фотографии")])),_:1}),(0,i.Wm)(u,{icon:n.closeOutline,onClick:t[0]||(t[0]=e=>{n.closeModal()}),slot:"end",size:"large"},null,8,["icon"])])),_:1})])),_:1}),(0,i.Wm)(f,null,{default:(0,i.w5)((()=>[o.actions?((0,i.wg)(),(0,i.j4)(_,{key:0},{default:(0,i.w5)((()=>[(0,i.Wm)(h,null,{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.actions,((e,t)=>((0,i.wg)(),(0,i.j4)(p,{key:t},{default:(0,i.w5)((()=>{var o;return[e[0]?((0,i.wg)(),(0,i.j4)(m,{key:0,onClick:o=>l.actionCreate(t,e[1]),expand:"block",color:null!==(o=e[1])&&void 0!==o?o:"primary"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(e[0]),1)])),_:2},1032,["onClick","color"])):(0,i.kq)("",!0)]})),_:2},1024)))),128))])),_:1})])),_:1})):(0,i.kq)("",!0),(0,i.Wm)(g,{src:e.$heap.state.hostname+"image/get.php/"+o.image_hash+".1000.1000.webp"},null,8,["src"])])),_:1})],64)}var a=o(8903),l=o(4929),s={props:["image_hash","actions"],components:{IonIcon:l.gu,IonToolbar:l.sr,IonHeader:l.Gu,IonImg:l.Xz,IonContent:l.W2,IonTitle:l.wd,IonButton:l.YG,IonCol:l.wI,IonRow:l.Nd,IonGrid:l.jY},setup(){const e=function(){l.Fy.dismiss()};return{closeModal:e,closeOutline:a.fID}},methods:{actionCreate(e,t){("danger"!=t||confirm("Вы уверены?"))&&l.Fy.dismiss(null,e)}}},u=o(3744);const d=(0,u.Z)(s,[["render",n]]);var c=d},4846:function(e,t,o){"use strict";o.d(t,{Z:function(){return _}});var i=o(6252),r=o(3577);const n={class:"blur-image"},a=["src"],l=["src"];function s(e,t,o,s,u,d){var c;const m=(0,i.up)("swiper-slide"),p=(0,i.up)("swiper");return(0,i.wg)(),(0,i.j4)(p,{modules:s.modules,autoplay:{delay:3e3,disableOnInteraction:!1},loop:(null===(c=o.imageList)||void 0===c?void 0:c.length)>1,effect:"fade",fadeEffect:{crossFade:!0},style:(0,r.j5)(`height: ${o.imgHeight||"100%"};`)},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.imageList,(t=>((0,i.wg)(),(0,i.j4)(m,{key:t.image_hash},{default:(0,i.w5)((()=>[(0,i._)("div",{class:(0,r.C_)(`${o.mode?o.mode:""} cropper`),style:(0,r.j5)(`height: ${o.imgHeight+"px"||0}`)},[(0,i._)("div",n,[(0,i._)("img",{src:`${e.$heap.state.hostname}image/get.php/${t.image_hash}.1200.1200.webp`},null,8,a)]),(0,i._)("img",{src:`${e.$heap.state.hostname}image/get.php/${t.image_hash}.1200.1200.webp`},null,8,l)],6)])),_:2},1024)))),128))])),_:1},8,["modules","loop","style"])}var u=o(8903),d=o(702),c=o(3181),m={components:{Swiper:c.t,SwiperSlide:c.o},props:["imageList","imgHeight","mode"],setup(){return{modules:[d.pt,d.xW],expand:u.jnR,contract:u.LJB}},data(){return{expanded:!1,vh:0,vw:0}},methods:{maximize(){this.expanded=!0,this.vh=document.getElementsByTagName("ion-content")[0].clientHeight,this.vw=document.getElementsByTagName("ion-content")[0].clientWidth},minimize(){this.expanded=!1,this.vh=document.getElementsByTagName("ion-content")[0].clientHeight,this.vw=document.getElementsByTagName("ion-content")[0].clientWidth}}},p=o(3744);const h=(0,p.Z)(m,[["render",s],["__scopeId","data-v-0a2e082d"]]);var _=h},2639:function(e,t,o){"use strict";o.d(t,{Z:function(){return b}});var i=o(6252),r=o(3577);const n={key:1,class:"image_grid"},a=["onClick"],l={key:0},s={key:1},u={key:0,class:"image_controls"},d=["id"];function c(e,t,o,c,m,p){var h;const _=(0,i.up)("ion-label"),g=(0,i.up)("ion-icon"),f=(0,i.up)("ion-item"),y=(0,i.up)("ion-img"),w=(0,i.up)("ion-avatar");return(0,i.wg)(),(0,i.iD)("div",null,[p.showTile?((0,i.wg)(),(0,i.j4)(f,{key:0,lines:"none",onClick:t[0]||(t[0]=e=>{m.editMode=!m.editMode,m.editMode&&p.load()})},{default:(0,i.w5)((()=>[o.title?((0,i.wg)(),(0,i.j4)(_,{key:0,color:"imageList?.length?'':medium"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(o.title),1)])),_:1})):((0,i.wg)(),(0,i.j4)(_,{key:1,color:"imageList?.length?'':medium"},{default:(0,i.w5)((()=>[(0,i.Uk)("Фотографии")])),_:1})),m.editMode?((0,i.wg)(),(0,i.j4)(g,{key:2,slot:"end",icon:c.settingsSharp,color:"primary"},null,8,["icon"])):((0,i.wg)(),(0,i.j4)(g,{key:3,slot:"end",icon:c.settingsOutline},null,8,["icon"]))])),_:1})):(0,i.kq)("",!0),null!==(h=p.imageList)&&void 0!==h&&h.length?((0,i.wg)(),(0,i.iD)("div",n,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(p.imageList,(t=>((0,i.wg)(),(0,i.iD)("div",{key:t.image_id,style:{position:"relative"}},[(0,i._)("div",{style:{position:"absolute",top:"0px","background-color":"#fffc","font-size":"0.75em"},onClick:e=>p.imagePreview(t.image_hash)},[t.deleted_at?((0,i.wg)(),(0,i.iD)("div",l,"будет удалено")):1==t.is_disabled?((0,i.wg)(),(0,i.iD)("div",s,"на модерации")):(0,i.kq)("",!0)],8,a),(0,i.Wm)(w,{onClick:e=>p.imagePreview(t.image_hash),class:(0,r.C_)(t.class)},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{src:e.$heap.state.hostname+"image/get.php/"+t.image_hash+".100.100.webp"},null,8,["src"])])),_:2},1032,["onClick","class"]),m.editMode?((0,i.wg)(),(0,i.iD)("div",u,[(0,i.Wm)(g,{icon:c.chevronBackCircleOutline,onClick:e=>p.back(t)},null,8,["icon","onClick"]),p.isAdmin&&1==t.is_disabled?((0,i.wg)(),(0,i.j4)(g,{key:0,icon:c.checkmarkCircle,color:"success",onClick:e=>p.enable(t)},null,8,["icon","onClick"])):(0,i.kq)("",!0),t.deleted_at?((0,i.wg)(),(0,i.j4)(g,{key:1,icon:c.addCircle,color:"success",onClick:e=>p.restore(t)},null,8,["icon","onClick"])):((0,i.wg)(),(0,i.j4)(g,{key:2,icon:c.trash,color:"danger",onClick:e=>p.remove(t)},null,8,["icon","onClick"])),(0,i.Wm)(g,{icon:c.chevronForwardCircleOutline,onClick:e=>p.forward(t)},null,8,["icon","onClick"])])):(0,i.kq)("",!0)])))),128))])):(0,i.kq)("",!0),(0,i._)("input",{type:"file",id:m.fileUploaderId,accept:".png, .jpg, .jpeg, .webp, .gif",onChange:t[1]||(t[1]=e=>p.uploadImage(e)),style:{display:"none"}},null,40,d)])}o(4916),o(5306),o(7658);var m=o(8903),p=o(4929),h=o(1590),_=o(9755),g=o.n(_),f=o(9042),y=o(351),w={props:["images","image_holder","image_holder_id","controller","title","hide_if_empty"],components:{IonLabel:p.Q$,IonIcon:p.gu,IonItem:p.Ie,IonImg:p.Xz,IonAvatar:p.BJ},setup(){return{settingsOutline:m.C$N,settingsSharp:m.kiF,chevronBackCircleOutline:m.CK0,chevronForwardCircleOutline:m.esm,trash:m._Ij,addCircle:m.ZWo,checkmarkCircle:m.I1A}},data(){var e;return{images_loaded:null,editMode:!1,fileUploaderId:((null!==(e=this.image_holder)&&void 0!==e?e:this.controller)+this.image_holder_id).replace(/[^\d\w]/,"")}},mounted(){null===this.images&&this.load()},computed:{imageList(){let e=this.images_loaded||this.images,t=[];for(let o in e)e[o].deleted_at?(e[o].class=" deleted",this.editMode&&t.push(e[o])):1==e[o].is_disabled?(e[o].class=" disabled",this.editMode&&t.push(e[o])):t.push(e[o]);return t},isAdmin(){return y.Z.isAdmin()},showTile(){let e=this.images_loaded||this.images;return!(this.hide_if_empty&&(null===e||void 0===e||!e.length))}},methods:{async back(e){try{await g().post(this.$heap.state.hostname+"Image/itemUpdateOrder",{image_id:e.image_id,dir:"up"}),this.load()}catch(t){}},async forward(e){try{await g().post(this.$heap.state.hostname+"Image/itemUpdateOrder",{image_id:e.image_id,dir:"down"}),this.load()}catch(t){}},async remove(e){try{await g().post(this.$heap.state.hostname+"Image/itemDelete",{image_id:e.image_id}),this.load(),this.$flash("Фото перемещено в корзину и будет удалено")}catch(t){}},async restore(e){try{await g().post(this.$heap.state.hostname+"Image/itemUnDelete",{image_id:e.image_id}),this.load(),this.$flash("Фото перемещено извлечено из корзины")}catch(t){}},async enable(e){try{await g().post(this.$heap.state.hostname+"Image/itemDisable",{image_id:e.image_id,is_disabled:0}),this.load()}catch(t){}},async load(){var e;const t={image_holder_id:this.image_holder_id,image_holder:null!==(e=this.image_holder)&&void 0!==e?e:this.controller,is_disabled:1,is_deleted:1,is_active:1};this.images_loaded=await g().post(this.$heap.state.hostname+"Image/listGet",t)},async imagePreview(e){const t=await p.Fy.create({component:h.Z,componentProps:{image_hash:e},initialBreakpoint:.75,breakpoints:[.75,1]}),o=function(){t.dismiss()};return f.Z.on("dismissModal",o),t.present()},async uploadImage(e=null,t=null){let o=new FormData;e&&o.append("files[]",e.target.files[0]),t&&o.append("files[]",t),o.set("image_holder_id",this.image_holder_id),this.image_holder&&o.set("image_holder",this.image_holder);const i={url:this.$heap.state.hostname+this.controller+"/fileUpload",type:"POST",data:o,processData:!1,contentType:!1};try{await g().ajax(i),this.load()}catch(s){var r,n,a,l;if("limit_exeeded"==(null===s||void 0===s||null===(r=s.responseJSON)||void 0===r||null===(n=r.messages)||void 0===n?void 0:n.error))return void this.$flash("Уже загружено максимальное количество фото");if("no_valid_images"==(null===s||void 0===s||null===(a=s.responseJSON)||void 0===a||null===(l=a.messages)||void 0===l?void 0:l.error))return void this.$flash("Формат файла не поддерживается");this.$flash("Не удалось загрузить фото")}},take_photo(){g()(`#${this.fileUploaderId}`).trigger("click"),this.editMode=!0}}},k=o(3744);const v=(0,k.Z)(w,[["render",c],["__scopeId","data-v-5368e999"]]);var b=v},7620:function(e,t,o){"use strict";o.d(t,{Z:function(){return h}});var i=o(6252);const r=["src"],n={key:0,style:{position:"fixed",top:"200px",left:"calc( 50% - 50px )"}},a=["src"];function l(e,t,o,l,s,u){const d=(0,i.up)("ion-icon"),c=(0,i.up)("ion-title"),m=(0,i.up)("ion-item"),p=(0,i.up)("ion-toolbar"),h=(0,i.up)("ion-header"),_=(0,i.up)("ion-content");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(h,null,{default:(0,i.w5)((()=>[(0,i.Wm)(h,null,{default:(0,i.w5)((()=>[(0,i.Wm)(p,null,{default:(0,i.w5)((()=>[(0,i.Wm)(m,{lines:"none"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{icon:l.receiptOutline,slot:"start"},null,8,["icon"]),(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Фискальный чек")])),_:1}),(0,i.Wm)(d,{icon:l.closeOutline,onClick:t[0]||(t[0]=e=>{l.closeModal()}),slot:"end",size:"large"},null,8,["icon"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,i.Wm)(_,null,{default:(0,i.w5)((()=>[(0,i._)("iframe",{src:o.billLink,style:{width:"100%",height:"85%",border:"none"},onLoad:t[1]||(t[1]=e=>u.onLoad())},null,40,r),s.loadAnimation?((0,i.wg)(),(0,i.iD)("div",n,[(0,i._)("img",{src:l.loading},null,8,a)])):(0,i.kq)("",!0)])),_:1})],64)}var s=o(4929),u=o(659),d=o(8903),c={components:{IonTitle:s.wd,IonIcon:s.gu,IonToolbar:s.sr,IonHeader:s.Gu,IonContent:s.W2},props:["billLink"],setup(){const e=function(){s.Fy.dismiss()};return{closeModal:e,closeOutline:d.fID,receiptOutline:d.d71,loading:u}},data(){return{loadAnimation:1}},methods:{onLoad(){this.loadAnimation=0}}},m=o(3744);const p=(0,m.Z)(c,[["render",l]]);var h=p},6852:function(e,t,o){"use strict";o.d(t,{Z:function(){return h}});var i=o(6252),r=o(3577);const n={class:"ion-page"};function a(e,t,o,a,l,s){const u=(0,i.up)("ion-title"),d=(0,i.up)("ion-icon"),c=(0,i.up)("ion-toolbar"),m=(0,i.up)("ion-header"),p=(0,i.up)("ion-searchbar"),h=(0,i.up)("ion-skeleton-text"),_=(0,i.up)("ion-item"),g=(0,i.up)("ion-list"),f=(0,i.up)("ion-img"),y=(0,i.up)("ion-avatar"),w=(0,i.up)("ion-content");return(0,i.wg)(),(0,i.iD)("div",n,[(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Выбрать "+(0,r.zw)(l.itemTypeName),1)])),_:1}),(0,i.Wm)(d,{icon:a.closeOutline,onClick:t[0]||(t[0]=e=>{s.closeModal()}),slot:"end",size:"large"},null,8,["icon"])])),_:1})])),_:1}),(0,i.Wm)(w,null,{default:(0,i.w5)((()=>{var o;return["acc"!=l.itemTypeLabel?((0,i.wg)(),(0,i.j4)(p,{key:0,modelValue:l.query,"onUpdate:modelValue":t[1]||(t[1]=e=>l.query=e),placeholder:"поиск",debounce:100,onIonInput:t[2]||(t[2]=e=>s.listGet())},null,8,["modelValue"])):(0,i.kq)("",!0),l.itemList?null!==(o=l.itemList)&&void 0!==o&&o.length?((0,i.wg)(),(0,i.j4)(g,{key:2},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.itemList,(t=>((0,i.wg)(),(0,i.j4)(_,{key:t.id,button:"",detail:"",onClick:e=>s.itemPick(t)},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{slot:"start"},{default:(0,i.w5)((()=>[t.image_hash?((0,i.wg)(),(0,i.j4)(f,{key:0,src:`${e.$heap.state.hostname}image/get.php/${t.image_hash}.100.100.webp`},null,8,["src"])):(0,i.kq)("",!0)])),_:2},1024),(0,i.Uk)(" "+(0,r.zw)(t.name),1)])),_:2},1032,["onClick"])))),128))])),_:1})):((0,i.wg)(),(0,i.j4)(g,{key:3},{default:(0,i.w5)((()=>[(0,i.Wm)(_,null,{default:(0,i.w5)((()=>[(0,i.Uk)(" Ничего не найдено ")])),_:1})])),_:1})):((0,i.wg)(),(0,i.j4)(g,{key:1},{default:(0,i.w5)((()=>[((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)([0,1,2,3,4,5,6,7,8,9],(e=>(0,i.Wm)(_,{key:e,button:"",detail:""},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{style:{height:"35px",width:"40px"},animated:""}),(0,i.Wm)(h,{style:{width:"100%"},animated:""})])),_:2},1024))),64))])),_:1}))]})),_:1})])}var l=o(8903),s=o(4929),u=o(9755),d=o.n(u),c={props:["itemType","filter"],components:{IonContent:s.W2,IonHeader:s.Gu,IonToolbar:s.sr,IonTitle:s.wd,IonIcon:s.gu,IonImg:s.Xz,IonList:s.q_,IonItem:s.Ie,IonSearchbar:s.VI,IonSkeletonText:s.CK,IonAvatar:s.BJ},setup(){return{closeOutline:l.fID}},data(){const e=this.itemType?this.itemType:"order";return{query:null,itemList:null,itemTypeLabel:e,itemTypeName:""}},mounted(){this.listGet()},methods:{async listGet(){"order"==this.itemTypeLabel?(this.itemTypeName="Заказ",this.ordersGet()):"store"==this.itemTypeLabel?(this.itemTypeName="Продавец",this.storesGet()):"courier"==this.itemTypeLabel?(this.itemTypeName="Курьер",this.couriersGet()):"acc"==this.itemTypeLabel?(this.itemTypeName="Счет",this.accountsGet()):this.$flash("unknown item type "+this.itemTypeLabel)},async storesGet(){const e={name_query:this.query,name_query_fields:"store_name",limit:10};try{let t=await d().post(`${this.$heap.state.hostname}Store/listGet`,e);this.itemList=t.map((e=>(e.name=`продавец ${e.store_name}`,e.id=e.store_id,e)))}catch(t){}},async couriersGet(){let e={name_query:this.query,name_query_fields:"user_name,user_phone",limit:10};this.filter&&(e=Object.assign(e,this.filter));try{let t=await d().post(`${this.$heap.state.hostname}Courier/listGet`,e);this.itemList=t.map((e=>(e.name=`курьер ${e.user_name} ${e.user_phone}`,e.id=e.courier_id,e.image_hash=e.courier_photo_image_hash,e)))}catch(t){}},async ordersGet(){const e={name_query:this.query,name_query_fields:"store_name,order_id,user_name",limit:10};try{let t=await d().post(`${this.$heap.state.hostname}Order/listGet`,e);this.itemList=t.map((e=>(e.name=`заказ#${e.order_id} ${e.store_name} > ${e.user_name}`,e.id=e.order_id,e)))}catch(t){}},async accountsGet(){const e={group_table:"transaction_account_list"};try{let t=await d().post(`${this.$heap.state.hostname}Admin/GroupManager/listGet`,e);this.itemList=t.map((e=>(e.name=`${e.group_name}`,e.type=e.group_type,e)))}catch(t){}},itemPick(e){s.Fy.dismiss(e)},closeModal(){s.Fy.dismiss()}}},m=o(3744);const p=(0,m.Z)(c,[["render",a]]);var h=p},5679:function(e,t,o){"use strict";o.d(t,{Z:function(){return x}});o(3948),o(6699);var i=o(6252),r=o(3577);const n=e=>((0,i.dD)("data-v-b25f2e70"),e=e(),(0,i.Cn)(),e),a={key:0},l={style:{display:"grid","grid-template-columns":"auto 135px",width:"100%",gap:"5px"}},s={style:{"grid-column":"1 / span 2"}},u={key:0,style:{position:"relative","min-height":"40px"}},d={key:0},c={key:1},m={key:2},p={key:1,style:{"grid-column":"1 / span 2"}},h={key:2,style:{"grid-column":"1 / span 2"}},_={key:3,style:{"grid-column":"1 / span 2"}},g={key:4,style:{"grid-column":"1 / span 2"}},f=n((()=>(0,i._)("b",null,"Продавце",-1))),y={key:1},w=n((()=>(0,i._)("div",{slot:"end",style:{position:"relative",width:"120px","min-height":"48px","background-color":"var(--ion-color-light)"}},null,-1)));function k(e,t,o,n,k,v){var b,I;const W=(0,i.up)("ion-img"),C=(0,i.up)("ion-avatar"),$=(0,i.up)("ion-icon"),D=(0,i.up)("ion-label"),S=(0,i.up)("ion-item"),O=(0,i.up)("ion-chip"),x=(0,i.up)("ion-thumbnail"),U=(0,i.up)("cart-add-buttons"),L=(0,i.up)("ion-text"),j=(0,i.up)("ion-note"),T=(0,i.up)("ion-list"),z=(0,i.up)("ion-accordion"),Z=(0,i.up)("ion-accordion-group"),q=(0,i.up)("ion-card-title"),G=(0,i.up)("ion-card-header"),P=(0,i.up)("ion-card-content"),M=(0,i.up)("ion-card"),B=(0,i.up)("ion-button"),R=(0,i.up)("ion-col"),A=(0,i.up)("ion-row"),N=(0,i.up)("ion-grid"),H=(0,i.up)("ion-skeleton-text");return o.orderData?((0,i.wg)(),(0,i.iD)("div",a,[(0,i.Wm)(S,{detail:"",button:"",onClick:t[0]||(t[0]=e=>v.storeOpen()),lines:"none"},{default:(0,i.w5)((()=>{var t,a;return[null!==(t=o.orderData)&&void 0!==t&&null!==(a=t.store)&&void 0!==a&&a.image_hash?((0,i.wg)(),(0,i.j4)(C,{key:0,slot:"start"},{default:(0,i.w5)((()=>{var t,r;return[(0,i.Wm)(W,{src:`${e.$heap.state.hostname}image/get.php/${null===(t=o.orderData)||void 0===t||null===(r=t.store)||void 0===r?void 0:r.image_hash}.80.80.webp`,style:{"border-radius":"100px"}},null,8,["src"])]})),_:1})):((0,i.wg)(),(0,i.j4)($,{key:1,slot:"start",icon:n.storefrontOutline},null,8,["icon"])),(0,i.Wm)(D,null,{default:(0,i.w5)((()=>{var e,t;return[(0,i.Uk)((0,r.zw)(null===(e=o.orderData)||void 0===e||null===(t=e.store)||void 0===t?void 0:t.store_name),1)]})),_:1})]})),_:1}),(0,i.Wm)(T,null,{default:(0,i.w5)((()=>{var t;return[(0,i.Wm)(S,{lines:"full"},{default:(0,i.w5)((()=>[o.orderData.order_id>0?((0,i.wg)(),(0,i.j4)(D,{key:0,color:"medium"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Заказ #"+(0,r.zw)(o.orderData.order_id),1)])),_:1})):((0,i.wg)(),(0,i.j4)(D,{key:1,color:"medium"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Корзина ")])),_:1})),o.orderData.stage_current_name?((0,i.wg)(),(0,i.j4)(O,{key:2,color:"primary",slot:"end"},{default:(0,i.w5)((()=>[(0,i.Wm)($,{icon:n.checkmarkOutline},null,8,["icon"]),(0,i.Wm)(D,{color:"dark"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(o.orderData.stage_current_name),1)])),_:1})])),_:1})):(0,i.kq)("",!0)])),_:1}),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(null===(t=o.orderData)||void 0===t?void 0:t.entries,(t=>((0,i.wg)(),(0,i.j4)(S,{key:t.product_id,class:(0,r.C_)(t.deleted_at?"entry-deleted":""),lines:"full",style:{"padding-top":"10px"}},{default:(0,i.w5)((()=>[t.image_hash?((0,i.wg)(),(0,i.j4)(x,{key:0,slot:"start",onClick:e=>v.productOpen(t.product_id)},{default:(0,i.w5)((()=>[(0,i.Wm)(W,{src:`${e.$heap.state.hostname}image/get.php/${t.image_hash}.150.150.webp`,style:{"border-radius":"10px"}},null,8,["src"])])),_:2},1032,["onClick"])):(0,i.kq)("",!0),(0,i._)("div",l,[(0,i._)("div",s,(0,r.zw)(t.entry_text),1),(0,i._)("div",null,[(0,i.Wm)(D,{color:"primary"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(t.entry_price)+(0,r.zw)(e.$heap.state.currencySign),1)])),_:2},1024)]),t.product_id?((0,i.wg)(),(0,i.iD)("div",u,[v.isEditable?((0,i.wg)(),(0,i.j4)(U,{key:0,buttonLayout:"horizontal",entry:t,orderData:o.orderData},null,8,["entry","orderData"])):((0,i.wg)(),(0,i.j4)(L,{key:1,color:"primary"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(t.entry_quantity)+" ",1),"порция"==t.product_unit?((0,i.wg)(),(0,i.iD)("span",d,"по "+(0,r.zw)(1e3*t.product_weight)+"г",1)):"порция мл"==t.product_unit?((0,i.wg)(),(0,i.iD)("span",c,"по "+(0,r.zw)(1e3*t.product_weight)+"мл",1)):((0,i.wg)(),(0,i.iD)("span",m,(0,r.zw)(t.product_unit),1))])),_:2},1024))])):(0,i.kq)("",!0),v.atCorrection?((0,i.wg)(),(0,i.iD)("div",p,[t.entry_discount>0?((0,i.wg)(),(0,i.j4)(O,{key:0,color:"success"},{default:(0,i.w5)((()=>[(0,i.Wm)(D,{onClick:e=>v.itemDiscountEdit(t)},{default:(0,i.w5)((()=>[(0,i.Uk)("-"+(0,r.zw)(t.entry_discount)+(0,r.zw)(e.$heap.state.currencySign)+" скидка",1)])),_:2},1032,["onClick"]),(0,i.Wm)($,{color:"medium",src:n.trash,onClick:e=>v.itemDiscountEdit(t,"remove")},null,8,["src","onClick"])])),_:2},1024)):((0,i.wg)(),(0,i.j4)(O,{key:1,color:"success",onClick:e=>v.itemDiscountEdit(t)},{default:(0,i.w5)((()=>[(0,i.Uk)("+ Сделать скидку")])),_:2},1032,["onClick"]))])):t.entry_discount>0?((0,i.wg)(),(0,i.iD)("div",h,[(0,i.Wm)(D,{color:"success"},{default:(0,i.w5)((()=>[(0,i.Uk)("-"+(0,r.zw)(t.entry_discount)+(0,r.zw)(e.$heap.state.currencySign)+" скидка",1)])),_:2},1024)])):(0,i.kq)("",!0),v.isEditable?((0,i.wg)(),(0,i.iD)("div",_,[t.entry_comment?((0,i.wg)(),(0,i.j4)(O,{key:0,color:"medium"},{default:(0,i.w5)((()=>[(0,i.Wm)($,{color:"medium",src:n.chatboxEllipsesOutline},null,8,["src"]),(0,i.Uk)(),(0,i.Wm)(j,{onClick:e=>v.itemCommentEdit(t)},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(t.entry_comment),1)])),_:2},1032,["onClick"]),(0,i.Wm)($,{color:"medium",src:n.trash,onClick:e=>v.itemCommentEdit(t,"remove")},null,8,["src","onClick"])])),_:2},1024)):((0,i.wg)(),(0,i.j4)(O,{key:1,color:"medium",onClick:e=>v.itemCommentEdit(t)},{default:(0,i.w5)((()=>[(0,i.Uk)("+ Комментарий")])),_:2},1032,["onClick"]))])):t.entry_comment?((0,i.wg)(),(0,i.iD)("div",g,[(0,i.Wm)($,{color:"medium",src:n.chatboxEllipsesOutline},null,8,["src"]),(0,i.Uk)(),(0,i.Wm)(j,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(t.entry_comment),1)])),_:2},1024)])):(0,i.kq)("",!0)])])),_:2},1032,["class"])))),128)),(0,i.Wm)(Z,null,{default:(0,i.w5)((()=>[(0,i.Wm)(z,null,{default:(0,i.w5)((()=>[(0,i.Wm)(S,{slot:"header"},{default:(0,i.w5)((()=>[(0,i.Wm)($,{icon:n.walletOutline,slot:"start",color:"medium"},null,8,["icon"]),(0,i.Wm)(L,{color:"medium"},{default:(0,i.w5)((()=>[(0,i.Uk)("Итого: ")])),_:1}),(0,i.Wm)(D,{slot:"end",color:"primary"},{default:(0,i.w5)((()=>[(0,i._)("b",null,(0,r.zw)(o.orderData.order_sum_total)+(0,r.zw)(e.$heap.state.currencySign),1)])),_:1})])),_:1}),(0,i.Wm)(T,{slot:"content"},{default:(0,i.w5)((()=>{var t,a;return[(0,i.Wm)(S,{lines:"none"},{default:(0,i.w5)((()=>[(0,i.Wm)($,{icon:n.cubeOutline,slot:"start",color:"medium"},null,8,["icon"]),(0,i.Wm)(L,{color:"medium"},{default:(0,i.w5)((()=>[(0,i.Uk)("Стоимость заказа: ")])),_:1}),(0,i.Wm)(D,{slot:"end",color:"medium"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(v.orderTotal)+(0,r.zw)(e.$heap.state.currencySign),1)])),_:1})])),_:1}),o.orderData.order_sum_delivery>0?((0,i.wg)(),(0,i.j4)(S,{key:0,lines:"none"},{default:(0,i.w5)((()=>[(0,i.Wm)($,{icon:n.rocketOutline,slot:"start",color:"medium"},null,8,["icon"]),(0,i.Wm)(L,{color:"medium"},{default:(0,i.w5)((()=>[(0,i.Uk)("Доставка: ")])),_:1}),(0,i.Wm)(D,{slot:"end",color:"medium"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(o.orderData.order_sum_delivery)+(0,r.zw)(e.$heap.state.currencySign),1)])),_:1})])),_:1})):(0,i.kq)("",!0),o.orderData.order_sum_promo>0?((0,i.wg)(),(0,i.j4)(S,{key:1,lines:"none"},{default:(0,i.w5)((()=>[(0,i.Wm)($,{icon:n.giftOutline,slot:"start",color:"medium"},null,8,["icon"]),(0,i.Wm)(L,{color:"medium"},{default:(0,i.w5)((()=>[(0,i.Uk)("Скидка: ")])),_:1}),(0,i.Wm)(D,{slot:"end",color:"medium"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(o.orderData.order_sum_promo)+(0,r.zw)(e.$heap.state.currencySign),1)])),_:1})])),_:1})):(0,i.kq)("",!0),(null===(t=o.orderData)||void 0===t||null===(a=t.info)||void 0===a?void 0:a.payment_card_fixate_sum)>0?((0,i.wg)(),(0,i.j4)(S,{key:2,lines:"none"},{default:(0,i.w5)((()=>[(0,i.Wm)($,{icon:n.cardOutline,slot:"start",color:"medium"},null,8,["icon"]),(0,i.Wm)(L,{color:"medium"},{default:(0,i.w5)((()=>[(0,i.Uk)("Предоплата: ")])),_:1}),(0,i.Wm)(D,{slot:"end",color:"medium"},{default:(0,i.w5)((()=>{var t,n;return[(0,i._)("b",null,(0,r.zw)(null===(t=o.orderData)||void 0===t||null===(n=t.info)||void 0===n?void 0:n.payment_card_fixate_sum)+(0,r.zw)(e.$heap.state.currencySign),1)]})),_:1})])),_:1})):(0,i.kq)("",!0)]})),_:1})])),_:1})])),_:1})]})),_:1}),"supplier_start"==(null===(b=o.orderData)||void 0===b?void 0:b.stage_current)&&["supplier","admin"].includes(null===(I=o.orderData)||void 0===I?void 0:I.user_role)?((0,i.wg)(),(0,i.j4)(M,{key:0,color:"medium"},{default:(0,i.w5)((()=>[(0,i.Wm)(G,null,{default:(0,i.w5)((()=>[(0,i.Wm)(q,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Фото заказа")])),_:1})])),_:1}),(0,i.Wm)(P,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Рекомендуем делать фотографии товара до упаковки. Ответственность, в случае претензий со стороны Покупателя к качеству и комплектности, лежит на "),f,(0,i.Uk)(".")])),_:1})])),_:1})):(0,i.kq)("",!0),o.orderData.order_description?((0,i.wg)(),(0,i.j4)(M,{key:1,color:"primary"},{default:(0,i.w5)((()=>[(0,i.Wm)(G,null,{default:(0,i.w5)((()=>[(0,i.Wm)(q,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Комментарий")])),_:1})])),_:1}),(0,i.Wm)(P,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(o.orderData.order_description),1)])),_:1})])),_:1})):(0,i.kq)("",!0),o.orderData.order_objection?((0,i.wg)(),(0,i.j4)(M,{key:2,color:"warning"},{default:(0,i.w5)((()=>[(0,i.Wm)(G,null,{default:(0,i.w5)((()=>[(0,i.Wm)(q,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Проблема с заказом")])),_:1})])),_:1}),(0,i.Wm)(P,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(o.orderData.order_objection),1)])),_:1})])),_:1})):(0,i.kq)("",!0),(0,i.Wm)(N,null,{default:(0,i.w5)((()=>[(0,i.Wm)(A,null,{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(v.nextStageButtons,((e,t)=>((0,i.wg)(),(0,i.j4)(R,{key:t},{default:(0,i.w5)((()=>{var n,a;return[e[0]?((0,i.wg)(),(0,i.j4)(B,{key:0,onClick:i=>v.stageCreate(o.orderData.order_id,t,e[1]),expand:"block",color:null!==(n=e[1])&&void 0!==n?n:"primary",fill:null!==(a=e[2])&&void 0!==a?a:"solid"},{default:(0,i.w5)((()=>[(0,i.Wm)($,{slot:"start",src:e.icon},null,8,["src"]),(0,i.Uk)(" "+(0,r.zw)(e[0]),1)])),_:2},1032,["onClick","color","fill"])):(0,i.kq)("",!0)]})),_:2},1024)))),128))])),_:1})])),_:1})])):((0,i.wg)(),(0,i.iD)("div",y,[(0,i.Wm)(S,{detail:"",button:"",lines:"none"},{default:(0,i.w5)((()=>[(0,i.Wm)($,{slot:"start",icon:n.storefrontOutline},null,8,["icon"]),(0,i.Wm)(H,{animated:"",style:{width:"200px"}})])),_:1}),(0,i.Wm)(T,null,{default:(0,i.w5)((()=>[((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)([1,2,3],(e=>(0,i.Wm)(S,{key:e},{default:(0,i.w5)((()=>[(0,i.Wm)(x,{style:{"background-color":"var(--ion-color-light)"}}),(0,i.Wm)(N,null,{default:(0,i.w5)((()=>[(0,i.Wm)(R,null,{default:(0,i.w5)((()=>[(0,i.Wm)(A,null,{default:(0,i.w5)((()=>[(0,i.Wm)(H,{animated:"",style:{width:"100%"}})])),_:1}),(0,i.Wm)(A,null,{default:(0,i.w5)((()=>[(0,i.Wm)(D,{color:"primary"},{default:(0,i.w5)((()=>[(0,i.Wm)(H,{animated:"",style:{width:"100px"}})])),_:1})])),_:1})])),_:1})])),_:1}),w])),_:2},1024))),64))])),_:1}),(0,i.Wm)(N,null,{default:(0,i.w5)((()=>[(0,i.Wm)(A,null,{default:(0,i.w5)((()=>[((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)([1,2],(e=>(0,i.Wm)(R,{key:e},{default:(0,i.w5)((()=>[(0,i.Wm)(B,{color:"light",style:{width:"100%"}})])),_:2},1024))),64))])),_:1})])),_:1})]))}o(8862),o(4916),o(5306);var v=o(4929),b=o(8903),I=o(3763),W=o(9755),C=o.n(W),$=o(7782),D={props:["orderData"],components:{CartAddButtons:I.Z,IonIcon:v.gu,IonText:v.yW,IonLabel:v.Q$,IonItem:v.Ie,IonList:v.q_,IonChip:v.hM,IonImg:v.Xz,IonThumbnail:v.Bs,IonNote:v.uN,IonButton:v.YG,IonCol:v.wI,IonRow:v.Nd,IonGrid:v.jY,IonSkeletonText:v.CK,IonCard:v.PM,IonCardHeader:v.Zi,IonCardContent:v.FN,IonCardTitle:v.Dq,IonAvatar:v.BJ,IonAccordionGroup:v.eh,IonAccordion:v.We},setup(){return{add:b.IHx,remove:b.OdJ,trash:b._Ij,rocketOutline:b.G$D,storefrontOutline:b.qRG,checkmarkOutline:b.TjA,cubeOutline:b.XFf,banOutline:b.L6S,walletOutline:b.S5P,giftOutline:b._$o,cardOutline:b.pvm,ribbonOutline:b.Muk,chatboxEllipsesOutline:b._Pt}},data(){return{}},computed:{orderTotal(){let e=0;for(let i in null===(t=this.orderData)||void 0===t?void 0:t.entries){var t,o;let r=null===(o=this.orderData)||void 0===o?void 0:o.entries[i];r&&r.entry_quantity&&r.entry_price&&(e+=r.entry_quantity*r.entry_price-(r.entry_discount||0))}return Math.round(e)},isEditable(){return this.atCorrection||this.atCart},atCorrection(){return!("supplier"!=this.orderData.user_role&&"admin"!=this.orderData.user_role||!["supplier_corrected"].includes(this.orderData.stage_current))},atCart(){return!("customer"!=this.orderData.user_role&&"admin"!=this.orderData.user_role||!["customer_cart"].includes(this.orderData.stage_current))},nextStageButtons(){let e={};for(let t in this.orderData.stage_next)this.orderData.stage_next[t][0]&&(e[t]=this.orderData.stage_next[t],e[t].icon=b.TjA,t.includes("admin")?e[t].icon=b.Muk:t.includes("delivery")?e[t].icon=b.G$D:t.includes("supplier")&&(e[t].icon=b.qRG));return e}},methods:{storeOpen(){this.$go(`/catalog/store-${this.orderData.order_store_id}`),this.parentClose()},productOpen(e){this.$go(`/catalog/product-${e}`),this.parentClose()},parentClose(){this.$topic.publish("dismissModal")},stageCreate(e,t,o){("danger"!=o||confirm("Вы уверены?"))&&this.$emit("stageCreate",e,t)},async itemCommentEdit(e,t="edit"){let o="";var i;if("edit"==t&&(o=prompt("Комментарий к товару",null!==(i=e.entry_comment)&&void 0!==i?i:""),null===o))return;if(this.orderData.order_id>0){const t={order_id:e.order_id,entry_id:e.entry_id,entry_comment:o};try{await C().post(`${this.$heap.state.hostname}Entry/itemUpdate`,JSON.stringify(t));this.$emit("orderRefresh")}catch(r){}}else e.entry_comment=o,$.Z.cart.entryUpdate(e)},async itemDiscountEdit(e,t="edit"){let o=0;var i,r;"edit"==t&&(o=null!==(i=prompt(`Скидка на товар в ${this.$heap.state.currencySign}`,null!==(r=e.entry_discount)&&void 0!==r?r:""))&&void 0!==i?i:0);o&&(o=o.replace(",",".").replace(/[^\d.]/gim,""));const n={order_id:e.order_id,entry_id:e.entry_id,entry_discount:o};try{await C().post(`${this.$heap.state.hostname}Entry/itemUpdate`,JSON.stringify(n));this.$emit("orderRefresh")}catch(a){this.$flash("Не удалось изменить скидку")}}}},S=o(3744);const O=(0,S.Z)(D,[["render",k],["__scopeId","data-v-b25f2e70"]]);var x=O},2253:function(e,t,o){"use strict";o.d(t,{Z:function(){return m}});var i=o(6252),r=o(3577);const n=["href"];function a(e,t,o,a,l,s){var u;const d=(0,i.up)("ion-label"),c=(0,i.up)("ion-item"),m=(0,i.up)("ion-icon"),p=(0,i.up)("ion-text"),h=(0,i.up)("ion-note"),_=(0,i.up)("ion-list"),g=(0,i.up)("ion-accordion"),f=(0,i.up)("ion-accordion-group");return null!==(u=o.orderData)&&void 0!==u&&u.stages?((0,i.wg)(),(0,i.j4)(f,{key:0},{default:(0,i.w5)((()=>[(0,i.Wm)(g,null,{default:(0,i.w5)((()=>[(0,i.Wm)(c,{slot:"header"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Uk)("История заказа")])),_:1})])),_:1}),(0,i.Wm)(_,{slot:"content"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.orderData.stages,(e=>((0,i.wg)(),(0,i.j4)(c,{key:e.group_id},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{slot:"start",icon:a.checkmarkOutline,size:"small",color:"success"},null,8,["icon"]),(0,i.Wm)(p,null,{default:(0,i.w5)((()=>{var t,o;return[(0,i.Uk)((0,r.zw)(e.group_name)+" ",1),null!==e&&void 0!==e&&e.created_user?((0,i.wg)(),(0,i.iD)("a",{key:0,href:`tel:+${null===e||void 0===e||null===(t=e.created_user)||void 0===t?void 0:t.user_phone}`},(0,r.zw)(null===e||void 0===e||null===(o=e.created_user)||void 0===o?void 0:o.user_name),9,n)):(0,i.kq)("",!0)]})),_:2},1024),(0,i.Wm)(h,{slot:"end",style:{width:"80px"}},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(e.created_at),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1})):(0,i.kq)("",!0)}var l=o(4929),s=o(8903),u={props:["orderData"],components:{IonIcon:l.gu,IonText:l.yW,IonLabel:l.Q$,IonItem:l.Ie,IonList:l.q_,IonNote:l.uN,IonAccordion:l.We,IonAccordionGroup:l.eh},setup(){return{checkmarkOutline:s.TjA}}},d=o(3744);const c=(0,d.Z)(u,[["render",a]]);var m=c},3419:function(e,t,o){"use strict";o.d(t,{Z:function(){return k}});var i=o(6252),r=o(3577);const n=(0,i._)("h4",null,"Условия оплаты и доставки",-1),a=["href"],l=["href"],s={key:2},u=["href"],d=["href"],c=["href"],m={key:2},p=["href"];function h(e,t,o,h,_,g){var f,y;const w=(0,i.up)("ion-item"),k=(0,i.up)("ion-text"),v=(0,i.up)("ion-list"),b=(0,i.up)("ion-label"),I=(0,i.up)("ion-icon"),W=(0,i.up)("ion-chip"),C=(0,i.up)("ion-note"),$=(0,i.up)("ion-accordion"),D=(0,i.up)("ion-accordion-group");return(0,i.wg)(),(0,i.iD)(i.HY,null,[null!==(f=o.orderData)&&void 0!==f&&null!==(y=f.info)&&void 0!==y&&y.tariff_info?((0,i.wg)(),(0,i.j4)(v,{key:0},{default:(0,i.w5)((()=>[(0,i.Wm)(w,{lines:"none",color:"light"},{default:(0,i.w5)((()=>[n])),_:1}),(0,i.Wm)(w,{lines:"none",color:"light"},{default:(0,i.w5)((()=>[(0,i.Wm)(k,{innerHTML:o.orderData.info.tariff_info},null,8,["innerHTML"])])),_:1})])),_:1})):(0,i.kq)("",!0),(0,i.Wm)(D,null,{default:(0,i.w5)((()=>{var e,t,n,_;return[null!==(e=o.orderData)&&void 0!==e&&null!==(t=e.info)&&void 0!==t&&t.customer_name?((0,i.wg)(),(0,i.j4)($,{key:0},{default:(0,i.w5)((()=>[(0,i.Wm)(w,{slot:"header"},{default:(0,i.w5)((()=>[(0,i.Wm)(b,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Покупатель "),(0,i._)("b",null,(0,r.zw)(o.orderData.info.customer_name),1)])),_:1})])),_:1}),(0,i.Wm)(w,{slot:"content"},{default:(0,i.w5)((()=>[(0,i.Wm)(b,{class:"ion-text-wrap"},{default:(0,i.w5)((()=>[o.orderData.info.customer_phone?((0,i.wg)(),(0,i.j4)(W,{key:0,color:"primary"},{default:(0,i.w5)((()=>[(0,i.Wm)(I,{src:h.callOutline},null,8,["src"]),(0,i._)("a",{href:`tel:${o.orderData.info.customer_phone}`},(0,r.zw)(o.orderData.info.customer_phone),9,a)])),_:1})):(0,i.kq)("",!0),o.orderData.info.customer_email?((0,i.wg)(),(0,i.j4)(W,{key:1,color:"primary"},{default:(0,i.w5)((()=>[(0,i.Wm)(I,{src:h.mailOutline},null,8,["src"]),(0,i._)("a",{href:`mailto:${o.orderData.info.customer_email}`},(0,r.zw)(o.orderData.info.customer_email),9,l)])),_:1})):(0,i.kq)("",!0),o.orderData.info.customer_location_address?((0,i.wg)(),(0,i.iD)("div",s,[(0,i.Wm)(I,{src:h.locationOutline,color:"primary"},null,8,["src"]),(0,i._)("a",{href:`https://yandex.ru/maps/?pt=${o.orderData.info.customer_location_longitude},${o.orderData.info.customer_location_latitude}&z=19&l=map,trf`,target:"_new"},(0,r.zw)(o.orderData.info.customer_location_address),9,u)])):(0,i.kq)("",!0),o.orderData.info.customer_location_comment?((0,i.wg)(),(0,i.j4)(C,{key:3},{default:(0,i.w5)((()=>[(0,i.Uk)(" Комментарий к адресу: "+(0,r.zw)(o.orderData.info.customer_location_comment),1)])),_:1})):(0,i.kq)("",!0),o.orderData.info.customer_pickup?((0,i.wg)(),(0,i.j4)(k,{key:4},{default:(0,i.w5)((()=>[(0,i.Uk)(" Покупатель выбрал самовывоз, как способ получения заказа. ")])),_:1})):(0,i.kq)("",!0)])),_:1})])),_:1})])),_:1})):(0,i.kq)("",!0),null!==(n=o.orderData)&&void 0!==n&&null!==(_=n.info)&&void 0!==_&&_.supplier_name?((0,i.wg)(),(0,i.j4)($,{key:1},{default:(0,i.w5)((()=>[(0,i.Wm)(w,{slot:"header"},{default:(0,i.w5)((()=>[(0,i.Wm)(b,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Продавец "),(0,i._)("b",null,(0,r.zw)(o.orderData.info.supplier_name),1)])),_:1})])),_:1}),(0,i.Wm)(w,{slot:"content"},{default:(0,i.w5)((()=>[(0,i.Wm)(b,{class:"ion-text-wrap"},{default:(0,i.w5)((()=>[o.orderData.info.supplier_phone?((0,i.wg)(),(0,i.j4)(W,{key:0,color:"primary"},{default:(0,i.w5)((()=>[(0,i.Wm)(I,{src:h.callOutline},null,8,["src"]),(0,i._)("a",{href:`tel:${o.orderData.info.supplier_phone}`},(0,r.zw)(o.orderData.info.supplier_phone),9,d)])),_:1})):(0,i.kq)("",!0),o.orderData.info.supplier_email?((0,i.wg)(),(0,i.j4)(W,{key:1,color:"primary"},{default:(0,i.w5)((()=>[(0,i.Wm)(I,{src:h.mailOutline},null,8,["src"]),(0,i._)("a",{href:`mailto:${o.orderData.info.supplier_email}`},(0,r.zw)(o.orderData.info.supplier_email),9,c)])),_:1})):(0,i.kq)("",!0),o.orderData.info.supplier_location_address?((0,i.wg)(),(0,i.iD)("div",m,[(0,i.Wm)(I,{src:h.locationOutline,color:"primary"},null,8,["src"]),(0,i._)("a",{href:`https://yandex.ru/maps/?pt=${o.orderData.info.supplier_location_longitude},${o.orderData.info.supplier_location_latitude}&z=19&l=map,trf`,target:"_new"},(0,r.zw)(o.orderData.info.supplier_location_address),9,p)])):(0,i.kq)("",!0),o.orderData.info.supplier_location_comment?((0,i.wg)(),(0,i.j4)(C,{key:3},{default:(0,i.w5)((()=>[(0,i.Uk)(" Комментарий к адресу: "+(0,r.zw)(o.orderData.info.supplier_location_comment),1)])),_:1})):(0,i.kq)("",!0)])),_:1})])),_:1})])),_:1})):(0,i.kq)("",!0)]})),_:1})],64)}var _=o(4929),g=o(8903),f={props:["orderData"],components:{IonIcon:_.gu,IonChip:_.hM,IonLabel:_.Q$,IonItem:_.Ie,IonAccordion:_.We,IonAccordionGroup:_.eh,IonNote:_.uN,IonList:_.q_,IonText:_.yW},setup(){return{locationOutline:g.Iv7,callOutline:g.H7N,mailOutline:g.xOl}},data(){return{}},computed:{},methods:{}},y=o(3744);const w=(0,y.Z)(f,[["render",h]]);var k=w},9332:function(e,t,o){"use strict";o.d(t,{Z:function(){return y}});var i=o(6252),r=o(3577);const n={slot:"content",class:"ion-padding"},a={key:0},l={key:1},s={key:2};function u(e,t,o,u,d,c){const m=(0,i.up)("ion-label"),p=(0,i.up)("ion-item"),h=(0,i.up)("ion-icon"),_=(0,i.up)("ion-text"),g=(0,i.up)("ion-chip"),f=(0,i.up)("ion-button"),y=(0,i.up)("ion-list"),w=(0,i.up)("ion-accordion"),k=(0,i.up)("ion-accordion-group");return(0,i.wg)(),(0,i.j4)(k,null,{default:(0,i.w5)((()=>[(0,i.Wm)(w,null,{default:(0,i.w5)((()=>[(0,i.Wm)(p,{slot:"header",onClick:t[0]||(t[0]=e=>c.itemMetaGet())},{default:(0,i.w5)((()=>[(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Дополнительно")])),_:1})])),_:1}),(0,i._)("div",n,[d.meta.payment_card_fixate_sum>0?((0,i.wg)(),(0,i.j4)(g,{key:0},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{src:u.cardOutline},null,8,["src"]),(0,i.Wm)(_,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Предоплата "+(0,r.zw)(d.meta.payment_card_fixate_sum)+(0,r.zw)(e.$heap.state.currencySign),1)])),_:1})])),_:1})):(0,i.kq)("",!0),d.meta.payment_card_refund_sum>0?((0,i.wg)(),(0,i.j4)(g,{key:1},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{src:u.cardOutline},null,8,["src"]),(0,i.Wm)(_,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Сдача "+(0,r.zw)(d.meta.payment_card_refund_sum)+(0,r.zw)(e.$heap.state.currencySign),1)])),_:1})])),_:1})):(0,i.kq)("",!0),d.meta.payment_card_confirm_sum>0?((0,i.wg)(),(0,i.j4)(g,{key:2},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{src:u.cardOutline},null,8,["src"]),(0,i.Wm)(_,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Оплачено "+(0,r.zw)(d.meta.payment_card_confirm_sum)+(0,r.zw)(e.$heap.state.currencySign),1)])),_:1})])),_:1})):(0,i.kq)("",!0),d.meta.delivery_by_courier||d.meta.delivery_by_store||d.meta.pickup_by_customer?((0,i.wg)(),(0,i.j4)(g,{key:3},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{src:u.rocketOutline},null,8,["src"]),(0,i.Wm)(_,null,{default:(0,i.w5)((()=>[d.meta.delivery_by_courier?((0,i.wg)(),(0,i.iD)("span",a,"Курьер")):(0,i.kq)("",!0),d.meta.delivery_by_store?((0,i.wg)(),(0,i.iD)("span",l,"Продавец")):(0,i.kq)("",!0),d.meta.pickup_by_customer?((0,i.wg)(),(0,i.iD)("span",s,"Самовывоз")):(0,i.kq)("",!0)])),_:1})])),_:1})):(0,i.kq)("",!0),d.meta.invoice_link?((0,i.wg)(),(0,i.j4)(f,{key:4,color:"light",onClick:t[1]||(t[1]=e=>c.billOpen(d.meta.invoice_link)),expand:"block"},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{src:u.receiptOutline,slot:"start"},null,8,["src"]),(0,i.Wm)(_,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Открыть чек на "+(0,r.zw)(d.meta.invoice_sum)+(0,r.zw)(e.$heap.state.currencySign),1)])),_:1})])),_:1})):(0,i.kq)("",!0),c.ledgerCalc.length>0?((0,i.wg)(),(0,i.j4)(y,{key:5},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(c.ledgerCalc,(e=>((0,i.wg)(),(0,i.j4)(p,{key:e.trans_id},{default:(0,i.w5)((()=>[(0,i.Wm)(_,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(e.trans_description),1)])),_:2},1024),(0,i.Wm)(_,{slot:"end",color:e.trans_amount>0?"normal":"danger"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(e.trans_amount),1)])),_:2},1032,["color"])])),_:2},1024)))),128))])),_:1})):(0,i.kq)("",!0)])])),_:1})])),_:1})}o(3948),o(7658);var d=o(4929),c=o(8903),m=o(7620),p=o(9755),h=o.n(p),_={props:["orderId"],components:{IonIcon:d.gu,IonText:d.yW,IonLabel:d.Q$,IonButton:d.YG,IonItem:d.Ie,IonList:d.q_,IonAccordion:d.We,IonAccordionGroup:d.eh,IonChip:d.hM},setup(){return{cardOutline:c.pvm,rocketOutline:c.G$D,receiptOutline:c.d71}},data(){return{meta:{}}},computed:{ledgerCalc(){if(!this.meta.transactions)return[];let e=[];for(let t of this.meta.transactions)t.date=this.toLocDate(t.trans_date),e.push(t);return e}},methods:{async itemMetaGet(){try{this.meta=await h().post(`${this.$heap.state.hostname}Order/itemMetaGet`,{order_id:this.orderId})}catch(o){var e,t;const i=null===o||void 0===o||null===(e=o.responseJSON)||void 0===e||null===(t=e.messages)||void 0===t?void 0:t.error;switch(i){case"forbidden":case"notfound":default:this.meta={}}return!1}},toLocDate(e){const t=new Date(Date.parse(e)),o={month:"short",day:"numeric"};return t.toLocaleDateString(void 0,o)},async billOpen(e){if(!e)return void this.$flash("Невозможно открыть чек");const t=await d.Fy.create({component:m.Z,componentProps:{billLink:e},initialBreakpoint:.85,breakpoints:[0,.85,1]}),o=function(){t.dismiss()};return this.$topic.on("dismissModal",o),t.present()}}},g=o(3744);const f=(0,g.Z)(_,[["render",u]]);var y=f},9119:function(e,t,o){"use strict";o.d(t,{Z:function(){return u}});var i=o(6252);function r(e,t,o,r,n,a){const l=(0,i.up)("ion-title"),s=(0,i.up)("ion-toolbar"),u=(0,i.up)("ion-header"),d=(0,i.up)("ion-label"),c=(0,i.up)("ion-textarea"),m=(0,i.up)("ion-item"),p=(0,i.up)("ion-list"),h=(0,i.up)("ion-button"),_=(0,i.up)("ion-content");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(u,null,{default:(0,i.w5)((()=>[(0,i.Wm)(s,null,{default:(0,i.w5)((()=>[(0,i.Wm)(l,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Возражение")])),_:1})])),_:1})])),_:1}),(0,i.Wm)(_,null,{default:(0,i.w5)((()=>[(0,i.Wm)(p,null,{default:(0,i.w5)((()=>[(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(d,{position:"stacked"}),(0,i.Wm)(c,{rows:"6",modelValue:n.objection_text,"onUpdate:modelValue":t[0]||(t[0]=e=>n.objection_text=e),placeholder:"опишите суть возражения к исполнению заказа (минимум 10 букв)"},null,8,["modelValue"])])),_:1})])),_:1}),(0,i.Wm)(h,{onClick:t[1]||(t[1]=e=>a.save()),color:"primary",disabled:!n.objection_text||n.objection_text.length<10,expand:"full"},{default:(0,i.w5)((()=>[(0,i.Uk)("Сохранить возражение")])),_:1},8,["disabled"]),(0,i.Wm)(h,{onClick:t[2]||(t[2]=e=>a.close()),color:"light",expand:"full"},{default:(0,i.w5)((()=>[(0,i.Uk)("Закрыть без возражения")])),_:1})])),_:1})],64)}var n=o(4929),a={components:{IonTextarea:n.g2,IonButton:n.YG,IonHeader:n.Gu,IonToolbar:n.sr,IonTitle:n.wd,IonContent:n.W2,IonList:n.q_,IonItem:n.Ie,IonLabel:n.Q$},data(){return{objection_text:null}},methods:{close(){n.Fy.dismiss()},save(){n.Fy.dismiss(this.objection_text)}}},l=o(3744);const s=(0,l.Z)(a,[["render",r]]);var u=s},2920:function(e,t,o){"use strict";o.d(t,{Z:function(){return g}});var i=o(6252);const r=["src"],n={key:0,style:{position:"fixed",top:"200px",left:"calc( 50% - 50px )"}},a=["src"];function l(e,t,o,l,s,u){const d=(0,i.up)("ion-icon"),c=(0,i.up)("ion-title"),m=(0,i.up)("ion-item"),p=(0,i.up)("ion-toolbar"),h=(0,i.up)("ion-header"),_=(0,i.up)("ion-content");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(h,null,{default:(0,i.w5)((()=>[(0,i.Wm)(p,null,{default:(0,i.w5)((()=>[(0,i.Wm)(m,{lines:"none"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{icon:l.cardOutline,slot:"start"},null,8,["icon"]),"card_registering"==this.order_data?((0,i.wg)(),(0,i.j4)(c,{key:0},{default:(0,i.w5)((()=>[(0,i.Uk)("Привязка новой карты")])),_:1})):((0,i.wg)(),(0,i.j4)(c,{key:1},{default:(0,i.w5)((()=>[(0,i.Uk)("Оплата картой")])),_:1})),(0,i.Wm)(d,{icon:l.closeOutline,onClick:t[0]||(t[0]=e=>{l.closeModal()}),slot:"end",size:"large"},null,8,["icon"])])),_:1})])),_:1})])),_:1}),(0,i.Wm)(_,null,{default:(0,i.w5)((()=>[(0,i._)("iframe",{src:s.paymentLink,id:"paymentFrame1",style:{width:"100%",height:"calc( 100% - 5px )",border:"none"},onLoad:t[1]||(t[1]=e=>u.onLoad())},null,40,r),s.loadAnimation?((0,i.wg)(),(0,i.iD)("div",n,[(0,i._)("img",{src:l.loading},null,8,a)])):(0,i.kq)("",!0)])),_:1})],64)}o(4916),o(5306);var s=o(4929),u=o(8903),d=o(659),c=o(9755),m=o.n(c),p={components:{IonTitle:s.wd,IonIcon:s.gu,IonToolbar:s.sr,IonHeader:s.Gu,IonContent:s.W2,IonItem:s.Ie},props:["order_data"],setup(){const e=function(){s.Fy.dismiss()};return{closeModal:e,closeOutline:u.fID,cardOutline:u.pvm,loading:d}},data(){return{paymentLink:null,loadAnimation:1}},mounted(){this.listenFrame(),this.postToIframe()},methods:{async postToIframe(){try{if("card_registering"==this.order_data)return void(this.paymentLink=await m().post(this.$heap.state.hostname+"CardAcquirer/cardRegisterLinkGet"));this.paymentLink=await m().post(this.$heap.state.hostname+"CardAcquirer/paymentLinkGet",this.order_data)}catch(o){var e,t;const i=null===o||void 0===o||null===(e=o.responseJSON)||void 0===e||null===(t=e.messages)||void 0===t?void 0:t.error;"order_notvalid"==i?(this.$flash("Оформление немного затянулось... Попробуйте еще раз"),this.$router.replace("/order/order-"+this.order_data.order_id)):"nocardid"==i?this.$flash("Не удалось добавить карту"):this.$flash("Нет возможности принять оплату картой"),this.closeModal()}},onLoad(){this.loadAnimation=0},listenFrame(){let e=this;window.addEventListener("message",(t=>{"paymentOk"!=t.data&&"paymentNo"!=t.data||e.closeModal()}))}}},h=o(3744);const _=(0,h.Z)(p,[["render",l]]);var g=_},3462:function(e,t,o){"use strict";o.d(t,{Z:function(){return w}});var i=o(6252),r=o(3577);const n={style:{color:"var(--ion-color-primary)"}},a=(0,i._)("br",null,null,-1),l=["href"],s=["href"];function u(e,t,o,u,d,c){const m=(0,i.up)("ion-img"),p=(0,i.up)("ion-thumbnail"),h=(0,i.up)("ion-label"),_=(0,i.up)("ion-item"),g=(0,i.up)("ion-chip"),f=(0,i.up)("ion-icon"),y=(0,i.up)("ymap-marker"),w=(0,i.up)("yandex-map"),k=(0,i.up)("ion-list"),v=(0,i.up)("ion-accordion"),b=(0,i.up)("ion-accordion-group");return c.has_delivery_found&&!c.has_system_finish?((0,i.wg)(),(0,i.j4)(b,{key:0,value:"tracking",color:"primary"},{default:(0,i.w5)((()=>[(0,i.Wm)(v,{value:"tracking"},{default:(0,i.w5)((()=>[(0,i.Wm)(_,{slot:"header"},{default:(0,i.w5)((()=>{var t,n;return[null!==(t=o.orderData)&&void 0!==t&&null!==(n=t.info)&&void 0!==n&&n.courier_image_hash?((0,i.wg)(),(0,i.j4)(p,{key:0,slot:"start"},{default:(0,i.w5)((()=>{var t,r;return[(0,i.Wm)(m,{src:`${e.$heap.state.hostname}image/get.php/${null===(t=o.orderData)||void 0===t||null===(r=t.info)||void 0===r?void 0:r.courier_image_hash}.200.200.webp`,style:{"border-radius":"10px","background-color":"var(--ion-color-primary-tint)"}},null,8,["src"])]})),_:1})):(0,i.kq)("",!0),(0,i.Wm)(h,null,{default:(0,i.w5)((()=>{var e,t;return[(0,i.Uk)("Курьер "),(0,i._)("b",null,(0,r.zw)(null===(e=o.orderData)||void 0===e||null===(t=e.info)||void 0===t?void 0:t.courier_name),1)]})),_:1})]})),_:1}),c.has_delivery_finish&&!c.has_system_finish?((0,i.wg)(),(0,i.j4)(_,{key:0,slot:"content",lines:"none"},{default:(0,i.w5)((()=>{var e,t,s,u;return[(0,i._)("p",null,[(0,i.Uk)("Заказ доставлен за "),(0,i.Wm)(g,{color:"medium"},{default:(0,i.w5)((()=>[(0,i._)("b",n,"⏱️ "+(0,r.zw)(c.delivery_time),1)])),_:1}),(0,i.Uk)("."),a,(0,i.Uk)(" Вы можете отблагодарить курьера чаевыми☕, если он доставил заказ быстро и качественно. "),(0,i._)("a",{href:`tel:${null===(e=o.orderData)||void 0===e||null===(t=e.info)||void 0===t?void 0:t.courier_phone}`},(0,r.zw)(null===(s=o.orderData)||void 0===s||null===(u=s.info)||void 0===u?void 0:u.courier_phone),9,l)])]})),_:1})):((0,i.wg)(),(0,i.j4)(k,{key:1,slot:"content"},{default:(0,i.w5)((()=>{var e,t;return[null!==(e=o.orderData)&&void 0!==e&&null!==(t=e.info)&&void 0!==t&&t.courier_phone?((0,i.wg)(),(0,i.j4)(g,{key:0,color:"primary",slot:"end"},{default:(0,i.w5)((()=>{var e,t,n,a;return[(0,i.Wm)(f,{src:u.callOutline},null,8,["src"]),(0,i._)("a",{href:`tel:${null===(e=o.orderData)||void 0===e||null===(t=e.info)||void 0===t?void 0:t.courier_phone}`},(0,r.zw)(null===(n=o.orderData)||void 0===n||null===(a=n.info)||void 0===a?void 0:a.courier_phone),9,s)]})),_:1})):(0,i.kq)("",!0),d.coords?((0,i.wg)(),(0,i.j4)(w,{key:1,coords:d.coords,zoom:16,settings:d.mapsettings,controls:["fullscreenControl"],behaviors:[],style:{height:"200px"},class:(0,r.C_)(d.mapclass)},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{coords:d.coords,icon:d.placemarkIcon,"marker-id":"1",properties:d.placemarkProperties},null,8,["coords","icon","properties"])])),_:1},8,["coords","settings","class"])):(0,i.kq)("",!0)]})),_:1}))])),_:1})])),_:1})):(0,i.kq)("",!0)}o(4916),o(5306);var d=o(4929),c=o(8903),m=o(7782),p=o(4405),h=o(351),_=o(5836),g={props:["orderData"],components:{IonList:d.q_,IonChip:d.hM,IonItem:d.Ie,IonLabel:d.Q$,IonAccordionGroup:d.eh,IonAccordion:d.We,IonThumbnail:d.Bs,IonImg:d.Xz,IonIcon:d.gu,yandexMap:_.xR,ymapMarker:_.Jk},setup(){return{storefrontOutline:c.qRG,locationOutline:c.Iv7,flagOutline:c.FMn,callOutline:c.H7N}},data(){return{job:null,refreshInterval:6e4,clock:null,mapclass:"",mapsettings:null,placemarkProperties:{},placemarkIcon:{layout:"default#imageWithContent",content:"some content here",contentLayout:'<div class="placemarkBaloon">$[properties.iconContent]</div>',contentOffset:[45,10],imageHref:"/img/tezkel-placemark.png",imageSize:[50,50],imageOffset:[-25,-50]},coords:null}},computed:{courier_finish_distance_km(){var e,t;return null!==(e=this.job)&&void 0!==e&&e.courier_finish_distance?Math.round((null===(t=this.job)||void 0===t?void 0:t.courier_finish_distance)/100)/10+"км":"-"},courier_finish_time_min(){var e;const t=p.Z.deliveryTimeCalculate(null===(e=this.job)||void 0===e?void 0:e.courier_finish_distance,0);return t.timeMax?`${t.timeMin}-${t.timeMax}мин`:""},courier_progress(){var e,t;return(null===(e=this.job)||void 0===e?void 0:e.courier_finish_distance)/(null===(t=this.job)||void 0===t?void 0:t.start_finish_distance)},delivery_time(){var e,t;const o=null===(e=this.orderData)||void 0===e?void 0:e.stages.find((e=>"delivery_start"==e.group_type)),i=null===(t=this.orderData)||void 0===t?void 0:t.stages.find((e=>"delivery_finish"==e.group_type)),r=Date.parse(i.created_at.replace(" ","T"))-Date.parse(o.created_at.replace(" ","T")),n=new Date;return n.setTime(r),n.getUTCHours()>0?`${n.getUTCHours()}ч ${n.getUTCMinutes()}мин ${n.getUTCSeconds()}с`:`${n.getUTCMinutes()}мин ${n.getUTCSeconds()}с`},is_admin(){return h.Z.isAdmin()},is_delivering(){return this.has_delivery_found&&!this.has_delivery_finish},has_system_finish(){var e;return null===(e=this.orderData)||void 0===e?void 0:e.stages.find((e=>"system_finish"==e.group_type))},has_delivery_finish(){var e;return null===(e=this.orderData)||void 0===e?void 0:e.stages.find((e=>"delivery_finish"==e.group_type))},has_delivery_found(){var e;return null===(e=this.orderData)||void 0===e?void 0:e.stages.find((e=>"delivery_found"==e.group_type))}},methods:{async jobGet(){if(this.is_delivering)try{var e,t;this.job=await m.Z.api.itemJobTrack(this.orderData.order_id),this.placemarkProperties.iconContent="";const o=180;null!==(e=this.job)&&void 0!==e&&e.location_latitude&&(this.coords=[this.job.location_latitude,this.job.location_longitude],"delivery_start"==this.orderData.stage_current&&(this.placemarkProperties.iconContent=`${this.courier_finish_distance_km} (${this.courier_finish_time_min})`),this.mapclass=""),(null===(t=this.job)||void 0===t?void 0:t.location_age)>o&&(this.mapclass="disabled"),clearTimeout(this.clock),this.clock=setTimeout((()=>{this.jobGet()}),this.refreshInterval)}catch(r){var o,i;const e=null===(o=r.responseJSON)||void 0===o||null===(i=o.messages)||void 0===i?void 0:i.error;if("notfound"==e)return void this.$flash("Задание не найдено");if("notready"==e)return void this.$flash("Смена курьера не открыта")}},async ymapInit(e){this.mapsettings={apiKey:e.ymapApiKey,lang:"ru_RU",coordorder:"latlong",version:"2.1"},await(0,_.xk)()}},async mounted(){if(!this.is_delivering)return;let e=this.$heap.state.settings;null!==e&&void 0!==e&&e.location&&this.ymapInit(e.location),this.$topic.on("settingsGet",(async e=>{this.ymapInit(e.location)}))},watch:{orderData:function(){this.jobGet()}}},f=o(3744);const y=(0,f.Z)(g,[["render",u]]);var w=y},6615:function(e,t,o){"use strict";o.d(t,{Z:function(){return O}});var i=o(6252),r=o(3577);const n=e=>((0,i.dD)("data-v-3f38e664"),e=e(),(0,i.Cn)(),e),a=["id"],l={key:0,style:{position:"relative"}},s=n((()=>(0,i._)("div",{class:"product_list_item_img",style:{position:"absolute",border:"#9ac solid 2px",top:"-8px",left:"8px","z-index":"-1"}},null,-1))),u=n((()=>(0,i._)("div",{class:"product_list_item_img",style:{position:"absolute",border:"#cde solid 2px",top:"-4px",left:"4px","z-index":"-1"}},null,-1))),d=[s,u],c={key:0,style:{position:"relative",top:"-50%"}},m=["src"],p={style:{height:"5em",overflow:"hidden"}},h={key:0,style:{color:"var(--ion-color-danger)"}},_={style:{color:"var(--ion-color-primary)"}},g={style:{"font-weight":"bold",margin:"0","font-size":"1.4em"}},f={style:{"font-weight":"bold",margin:"0","font-size":"1.2em"}},y={key:1,style:{color:"var(--ion-color-medium)"}},w={key:2,style:{color:"var(--ion-color-medium)"}},k={key:3,style:{color:"var(--ion-color-medium)"}},v={key:4,style:{color:"var(--ion-color-medium)"}};function b(e,t,o,n,s,u){const b=(0,i.up)("cart-add-buttons"),I=(0,i.up)("ion-chip"),W=(0,i.up)("ion-img"),C=(0,i.up)("ion-icon");return(0,i.wg)(),(0,i.iD)("div",{class:(0,r.C_)(u.item_class),id:`product_list_item${o.productItem.product_id}`},[o.productItem.options?((0,i.wg)(),(0,i.iD)("div",l,d)):(0,i.kq)("",!0),(0,i._)("div",{class:"product_list_item_img",style:(0,r.j5)(o.productItem.options?"border:#def solid 2px;":"")},["0"!=o.productItem.is_disabled||o.productItem.deleted_at?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",c,[(0,i.Wm)(b,{buttonLayout:"vertical",productItem:o.productItem},null,8,["productItem"])])),u.discount<0?((0,i.wg)(),(0,i.j4)(I,{key:1,style:{position:"absolute",right:"0px",top:"0px","background-color":"var(--ion-color-success-tint)"},outline:"",color:"success"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(u.discount)+"%",1)])),_:1})):(0,i.kq)("",!0),(0,i._)("img",{class:"blur-image",src:`${e.$heap.state.hostname}image/get.php/${o.productItem.image_hash}.10.10.png`},null,8,m),(0,i.Wm)(W,{onClick:t[0]||(t[0]=t=>e.$go(`/catalog/product-${o.productItem.product_id}`)),src:`${e.$heap.state.hostname}image/get.php/${o.productItem.image_hash}.280.280.webp`},null,8,["src"]),o.productItem.options?((0,i.wg)(),(0,i.j4)(C,{key:2,src:n.layersOutline,color:"primary",size:"large",style:{position:"absolute",bottom:"3px",right:"3px"}},null,8,["src"])):(0,i.kq)("",!0)],4),(0,i._)("div",p,[(0,i._)("div",{style:{color:"black",height:"3em","font-size":"1em",overflow:"hidden","line-height":"1.4em","font-weight":"bold"},onClick:t[1]||(t[1]=t=>e.$go(`/catalog/product-${o.productItem.product_id}`))},(0,r.zw)(o.productItem.product_name),1),o.productItem.product_price!=o.productItem.product_final_price?((0,i.wg)(),(0,i.iD)("span",h,[(0,i._)("s",null,(0,r.zw)(u.product_price)+(0,r.zw)(e.$heap.state.currencySign),1),(0,i.Uk)("   ")])):(0,i.kq)("",!0),(0,i._)("span",_,[(0,i._)("b",g,(0,r.zw)(u.product_final_price),1),(0,i._)("b",f,(0,r.zw)(e.$heap.state.currencySign),1)]),(0,i.Uk)(" / "),"порция"==o.productItem.product_unit?((0,i.wg)(),(0,i.iD)("span",y,(0,r.zw)(u.weight_in_gramms)+"г",1)):"порция мл"==o.productItem.product_unit?((0,i.wg)(),(0,i.iD)("span",w,(0,r.zw)(u.weight_in_gramms)+"мл",1)):"кг"==o.productItem.product_unit&&o.productItem.product_quantity_min<1?((0,i.wg)(),(0,i.iD)("span",k,(0,r.zw)(u.unit_in_gramms)+"г",1)):((0,i.wg)(),(0,i.iD)("span",v,(0,r.zw)(o.productItem.product_unit),1))])],10,a)}var I=o(4929),W=o(3763),C=o(8903),$={components:{IonImg:I.Xz,IonIcon:I.gu,IonChip:I.hM,CartAddButtons:W.Z},props:["productItem"],setup(){return{layersOutline:C.Y1P}},computed:{item_class(){return this.productItem.deleted_at?"deleted":this.productItem.product_final_price!=this.productItem.product_price?"promo":1==this.productItem.is_disabled?"disabled":1!=this.productItem.is_counted||this.productItem.product_quantity-this.productItem.product_quantity_reserved>0?"":"absent"},discount(){return Math.round(this.productItem.product_final_price/this.productItem.product_price*100-100)},weight_in_gramms(){return 1e3*this.productItem.product_weight},unit_in_gramms(){return Math.round(1e3*this.productItem.product_quantity_min)},product_price(){return"кг"==this.productItem.product_unit&&this.productItem.product_quantity_min<1?Math.round(this.productItem.product_price*this.productItem.product_quantity_min):this.productItem.product_price},product_final_price(){return"кг"==this.productItem.product_unit&&this.productItem.product_quantity_min<1?Math.round(this.productItem.product_final_price*this.productItem.product_quantity_min):this.productItem.product_final_price}}},D=o(3744);const S=(0,D.Z)($,[["render",b],["__scopeId","data-v-3f38e664"]]);var O=S},2242:function(e,t,o){"use strict";o.d(t,{Z:function(){return I}});var i=o(6252),r=o(3577);const n={style:{"--ion-color-light":"rgba(222, 222, 222,0.2)",padding:"10px"}},a=(0,i._)("b",null,"Отзывы",-1);function l(e,t,o,l,s,u){const d=(0,i.up)("ion-label"),c=(0,i.up)("ion-text"),m=(0,i.up)("ion-icon"),p=(0,i.up)("ion-item"),h=(0,i.up)("ion-chip");return(0,i.wg)(),(0,i.iD)("div",n,[u.itemCommentCount>0?((0,i.wg)(),(0,i.j4)(p,{key:0,color:"light",lines:"none",style:{"border-radius":"10px","--min-height":"80px"},onClick:t[0]||(t[0]=e=>u.reactionCommentView())},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{position:"stacked",color:"medium"},{default:(0,i.w5)((()=>[(0,i._)("b",null,"Отзывы "+(0,r.zw)(u.itemCommentCount),1)])),_:1}),(0,i.Wm)(c,{style:{"margin-top":"15px","margin-bottom":"10px"},color:"dark"},{default:(0,i.w5)((()=>{var e;return[(0,i.Uk)((0,r.zw)(null===(e=o.reactionSummary)||void 0===e?void 0:e.last_comment),1)]})),_:1}),(0,i.Wm)(m,{src:l.chevronDownOutline,slot:"end",size:"small"},null,8,["src"])])),_:1})):((0,i.wg)(),(0,i.j4)(p,{key:1,color:"light",lines:"none",onClick:t[1]||(t[1]=e=>u.reactionTargetPick()),style:{"border-radius":"10px","--min-height":"80px"}},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{position:"stacked",color:"medium"},{default:(0,i.w5)((()=>[a])),_:1}),(0,i.Wm)(h,{color:"medium",style:{"border-radius":"10px",width:"99%"}},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{src:l.addOutline,color:"medium",size:"small"},null,8,["src"]),(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[(0,i.Uk)("добавить отзыв")])),_:1})])),_:1})])),_:1}))])}var s=o(8903),u=o(4929),d=o(6164);const c={class:"ion-page"},m={style:{color:"#999"}},p={key:0};function h(e,t,o,n,a,l){const s=(0,i.up)("ion-icon"),u=(0,i.up)("ion-title"),d=(0,i.up)("ion-item"),h=(0,i.up)("ion-toolbar"),_=(0,i.up)("ion-label"),g=(0,i.up)("ion-chip"),f=(0,i.up)("ion-header"),y=(0,i.up)("ion-skeleton-text"),w=(0,i.up)("ion-list"),k=(0,i.up)("ion-img"),v=(0,i.up)("ion-thumbnail"),b=(0,i.up)("ion-content");return(0,i.wg)(),(0,i.iD)("div",c,[(0,i.Wm)(f,null,{default:(0,i.w5)((()=>[(0,i.Wm)(h,null,{default:(0,i.w5)((()=>[(0,i.Wm)(d,{lines:"none"},{default:(0,i.w5)((()=>[(0,i.Wm)(s,{icon:n.chatboxOutline,slot:"start"},null,8,["icon"]),(0,i.Wm)(u,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Отзывы")])),_:1}),(0,i.Wm)(s,{icon:n.closeOutline,onClick:t[0]||(t[0]=e=>{l.closeModal()}),slot:"end",size:"large"},null,8,["icon"])])),_:1})])),_:1}),(0,i.Wm)(d,{button:"",detail:"false",onClick:t[1]||(t[1]=e=>l.commentAdd())},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{color:"medium"},{default:(0,i.w5)((()=>[(0,i.Wm)(s,{src:n.addOutline,color:"medium",size:"small"},null,8,["src"]),(0,i.Wm)(_,null,{default:(0,i.w5)((()=>[(0,i.Uk)("добавить отзыв")])),_:1})])),_:1})])),_:1})])),_:1}),(0,i.Wm)(b,null,{default:(0,i.w5)((()=>{var t;return[a.itemList?null!==(t=a.itemList)&&void 0!==t&&t.length?((0,i.wg)(),(0,i.j4)(w,{key:1},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.itemList,(t=>((0,i.wg)(),(0,i.iD)("div",{key:t.id},[(0,i._)("div",null,[(0,i.Wm)(d,{lines:"none"},{default:(0,i.w5)((()=>[(0,i.Wm)(v,{slot:"start"},{default:(0,i.w5)((()=>[t.image_hash?((0,i.wg)(),(0,i.j4)(k,{key:0,src:`${e.$heap.state.hostname}image/get.php/${t.image_hash}.150.150.webp`,style:{"border-radius":"10px"}},null,8,["src"])):(0,i.kq)("",!0)])),_:2},1024),(0,i._)("div",null,[(0,i._)("div",m,[(0,i.Uk)((0,r.zw)(t.user_name)+" • ",1),t.reaction_is_like?((0,i.wg)(),(0,i.iD)("i",p,[(0,i.Wm)(s,{src:n.thumbsUpSharp,color:"primary"},null,8,["src"])])):(0,i.kq)("",!0)]),(0,i._)("div",null,(0,r.zw)(t.reaction_comment),1)])])),_:2},1024)])])))),128))])),_:1})):((0,i.wg)(),(0,i.j4)(w,{key:2},{default:(0,i.w5)((()=>[(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Uk)(" Ничего не найдено ")])),_:1})])),_:1})):((0,i.wg)(),(0,i.j4)(w,{key:0},{default:(0,i.w5)((()=>[((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)([0,1,2,3,4,5],(e=>(0,i._)("div",{key:e},[(0,i.Wm)(d,{lines:"none"},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{style:{height:"35px",width:"40px","border-radius":"40px"},animated:""}),(0,i.Wm)(y,{style:{width:"40%"},animated:""})])),_:1}),(0,i.Wm)(d,{lines:"none"},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{style:{width:"100%"},animated:""})])),_:1})]))),64))])),_:1}))]})),_:1})])}var _=o(9755),g=o.n(_),f={props:["targetType","targetId","targetTitle"],components:{IonContent:u.W2,IonHeader:u.Gu,IonToolbar:u.sr,IonTitle:u.wd,IonIcon:u.gu,IonImg:u.Xz,IonList:u.q_,IonItem:u.Ie,IonSkeletonText:u.CK,IonThumbnail:u.Bs,IonChip:u.hM,IonLabel:u.Q$},setup(){return{closeOutline:s.fID,chatboxOutline:s.DMF,thumbsUpSharp:s._DJ,thumbsDownSharp:s.sbE,trashOutline:s.gtu,ellipsisVertical:s.LHl,addOutline:s.s6O}},data(){var e;const t=null!==(e=this.targetType)&&void 0!==e?e:"product";return{query:null,itemList:null,targetTypeLabel:t,targetTypeName:""}},mounted(){this.listGet()},methods:{async listGet(){const e={tagQuery:`${this.targetTypeLabel}:${this.targetId}`,commentsOnly:1};try{this.itemList=await g().post(`${this.$heap.state.hostname}Reaction/listGet`,e)}catch(t){}},closeModal(){u.Fy.dismiss()},commentAdd(){u.Fy.dismiss("commentAdd")}}},y=o(3744);const w=(0,y.Z)(f,[["render",h],["__scopeId","data-v-6d56033c"]]);var k=w,v={components:{IonChip:u.hM,IonIcon:u.gu,IonLabel:u.Q$,IonItem:u.Ie,IonText:u.yW},props:["reactionSummary","targetType","targetId"],setup(){return{addOutline:s.s6O,chevronDownOutline:s.Y$3}},computed:{itemCommentCount(){var e,t,o,i,r;return null!==(e=!(null!==(t=this.reactionSummary)&&void 0!==t&&t.sum_comment))&&void 0!==e&&e?"":(null===(o=this.reactionSummary)||void 0===o?void 0:o.sum_comment)>1e3?Math.round((null===(r=this.reactionSummary)||void 0===r?void 0:r.sum_comment)/100)/10+"k":null===(i=this.reactionSummary)||void 0===i?void 0:i.sum_comment}},methods:{async reactionTargetPick(){const e=await u.Fy.create({component:d.Z,componentProps:{targetType:this.targetType,targetId:this.targetId},initialBreakpoint:.8,breakpoints:[.8,1],handleBehavior:"cycle",canDissmiss:!0});e.present(),this.$topic.on("dismissModal",(()=>e.dismiss()));const t=await e.onDidDismiss();this.$emit("react",t.data)},async reactionCommentView(){const e=this.targetId,t=this.targetType,o="-",i=await u.Fy.create({component:k,componentProps:{targetType:t,targetId:e,targetTitle:o},initialBreakpoint:.8,breakpoints:[.8,1],handleBehavior:"cycle",canDissmiss:!0});i.present(),this.$topic.on("dismissModal",(()=>i.dismiss()));const r=await i.onDidDismiss();"commentAdd"==(null===r||void 0===r?void 0:r.data)&&this.reactionTargetPick()}}};const b=(0,y.Z)(v,[["render",l]]);var I=b},5551:function(e,t,o){"use strict";o.d(t,{Z:function(){return c}});var i=o(6252);function r(e,t,o,r,n,a){const l=(0,i.up)("ion-icon"),s=(0,i.up)("ion-label"),u=(0,i.up)("ion-chip");return(0,i.wg)(),(0,i.j4)(u,{onClick:t[0]||(t[0]=e=>a.itemShare()),color:"medium"},{default:(0,i.w5)((()=>[(0,i.Wm)(l,{src:r.arrowRedoOutline},null,8,["src"]),(0,i.Wm)(s,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Поделиться")])),_:1})])),_:1})}var n=o(8903),a=o(4929),l=o(4161),s={components:{IonChip:a.hM,IonIcon:a.gu,IonLabel:a.Q$},props:["targetUrl","targetTitle","targetText"],setup(){return{arrowRedoOutline:n.kY2}},methods:{async itemShare(){try{const e=await l.m.canShare(),t=this.$heap.getters.settings.app.frontendUrl+this.targetUrl;e?await l.m.share({title:this.targetTitle,text:this.targetText,url:t,dialogTitle:this.targetTitle}):navigator.clipboard?(await navigator.clipboard.writeText(this.targetUrl),this.$alert("Теперь вы можете поделиться ей с друзьями в социальных сетях или мессенджерах.","Ссылка на страницу скопирована")):this.$alert("Устройство не поддерживает функцию поделиться","")}catch(e){}}}},u=o(3744);const d=(0,u.Z)(s,[["render",r]]);var c=d},6947:function(e,t,o){"use strict";o.d(t,{Z:function(){return _}});var i=o(6252),r=o(3577);const n={key:0},a={key:1};function l(e,t,o,l,s,u){var d;const c=(0,i.up)("ion-searchbar"),m=(0,i.up)("ion-skeleton-text"),p=(0,i.up)("ion-item"),h=(0,i.up)("ion-list"),_=(0,i.up)("ion-img"),g=(0,i.up)("ion-thumbnail"),f=(0,i.up)("ion-text"),y=(0,i.up)("ion-icon"),w=(0,i.up)("ion-label"),k=(0,i.up)("ion-chip"),v=(0,i.up)("ion-textarea"),b=(0,i.up)("ion-button"),I=(0,i.up)("ion-buttons"),W=(0,i.up)("ion-note"),C=(0,i.up)("ion-infinite-scroll-content"),$=(0,i.up)("ion-infinite-scroll");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(c,{modelValue:s.query,"onUpdate:modelValue":t[0]||(t[0]=e=>s.query=e),placeholder:"поиск",debounce:600,onIonInput:t[1]||(t[1]=e=>u.listReload())},null,8,["modelValue"]),s.items?null!==(d=s.items)&&void 0!==d&&d.length?((0,i.wg)(),(0,i.j4)(h,{key:1},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.items,(t=>((0,i.wg)(),(0,i.iD)("div",{key:t.id},[0==t.is_sealed?((0,i.wg)(),(0,i.iD)("div",n,[(0,i.Wm)(p,{lines:"none"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{slot:"start"},{default:(0,i.w5)((()=>[t.image_hash?((0,i.wg)(),(0,i.j4)(_,{key:0,src:`${e.$heap.state.hostname}image/get.php/${t.image_hash}.150.150.webp`,style:{"border-radius":"10px"}},null,8,["src"])):(0,i.kq)("",!0)])),_:2},1024),(0,i.Wm)(f,{color:"medium"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(t.name),1)])),_:2},1024),(0,i.Wm)(k,{color:"medium",slot:"end",style:{overflow:"visible"}},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{src:l.thumbsUpSharp,color:1==t.reaction_is_like?"dark":"medium",onClick:e=>u.itemReactionLike(t,e.target),class:"like_animate"},null,8,["src","color","onClick"]),(0,i.Wm)(w,{color:"medium"},{default:(0,i.w5)((()=>[(0,i.Uk)(" | ")])),_:1}),(0,i.Wm)(y,{src:l.thumbsDownSharp,color:1==t.reaction_is_dislike?"dark":"medium",onClick:e=>u.itemReactionDislike(t)},null,8,["src","color","onClick"])])),_:2},1024)])),_:2},1024),1==t.is_comment_editing_mode?((0,i.wg)(),(0,i.j4)(p,{key:0},{default:(0,i.w5)((()=>[(0,i.Wm)(v,{ref_for:!0,ref:`comment_ta${t.id}`,id:`comment_ta${t.id}`,rows:"1","auto-grow":"true",modelValue:t.reaction_comment,"onUpdate:modelValue":e=>t.reaction_comment=e,placeholder:"отзыв о товаре",label:"",style:{background:"var(--ion-color-primary-tint)","border-radius":"10px","margin-bottom":"3px"}},null,8,["id","modelValue","onUpdate:modelValue"]),(0,i.Wm)(I,null,{default:(0,i.w5)((()=>[(0,i.Wm)(b,{onClick:e=>{u.itemReactionComment(t)}},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{icon:l.send,slot:"end",color:"primary"},null,8,["icon"])])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)):(0,i.kq)("",!0),t.is_comment_editing_mode?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(p,{key:1,lines:"full",onClick:e=>u.itemCommentEdit(t)},{default:(0,i.w5)((()=>[t.reaction_comment?((0,i.wg)(),(0,i.j4)(f,{key:0},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(t.reaction_comment)+" ",1),(0,i.Wm)(k,{color:"medium"},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{src:l.pencil},null,8,["src"]),(0,i.Wm)(w,null,{default:(0,i.w5)((()=>[(0,i.Uk)("изменить")])),_:1})])),_:1})])),_:2},1024)):((0,i.wg)(),(0,i.j4)(k,{key:1,color:"medium"},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{src:l.chatboxOutline},null,8,["src"]),(0,i.Wm)(w,null,{default:(0,i.w5)((()=>[(0,i.Uk)(" добавить отзыв")])),_:1})])),_:1}))])),_:2},1032,["onClick"]))])):(0,i.kq)("",!0),1==t.is_sealed?((0,i.wg)(),(0,i.iD)("div",a,[(0,i.Wm)(p,{lines:t.reaction_comment?"none":"full"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{slot:"start"},{default:(0,i.w5)((()=>[t.image_hash?((0,i.wg)(),(0,i.j4)(_,{key:0,src:`${e.$heap.state.hostname}image/get.php/${t.image_hash}.50.50.webp`},null,8,["src"])):(0,i.kq)("",!0)])),_:2},1024),(0,i.Wm)(f,{color:"medium"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(t.name),1)])),_:2},1024),(0,i.Wm)(k,{color:"medium",slot:"end",onClick:e=>u.itemReactionDelete(t)},{default:(0,i.w5)((()=>[1==t.reaction_is_like?((0,i.wg)(),(0,i.j4)(y,{key:0,src:l.thumbsUpSharp,color:"dark"},null,8,["src"])):1==t.reaction_is_dislike?((0,i.wg)(),(0,i.j4)(y,{key:1,src:l.thumbsDownSharp,color:"dark"},null,8,["src"])):(0,i.kq)("",!0),1==t.is_sealed?((0,i.wg)(),(0,i.j4)(y,{key:2,icon:l.trashOutline,color:"danger"},null,8,["icon"])):(0,i.kq)("",!0)])),_:2},1032,["onClick"])])),_:2},1032,["lines"]),t.reaction_comment?((0,i.wg)(),(0,i.j4)(p,{key:0,lines:"full"},{default:(0,i.w5)((()=>[(0,i.Wm)(W,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(t.reaction_comment),1)])),_:2},1024)])),_:2},1024)):(0,i.kq)("",!0)])):(0,i.kq)("",!0)])))),128))])),_:1})):s.query||!o.targetId?((0,i.wg)(),(0,i.j4)(h,{key:2},{default:(0,i.w5)((()=>[(0,i.Wm)(p,null,{default:(0,i.w5)((()=>[(0,i.Uk)(" Ничего не найдено ")])),_:1})])),_:1})):((0,i.wg)(),(0,i.j4)(h,{key:3},{default:(0,i.w5)((()=>[(0,i.Wm)(p,null,{default:(0,i.w5)((()=>[(0,i.Uk)(" Купите у этого продавца, чтобы оставлять отзывы ")])),_:1})])),_:1})):((0,i.wg)(),(0,i.j4)(h,{key:0},{default:(0,i.w5)((()=>[((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)([0,1,2,3],(e=>(0,i._)("div",{key:e},[(0,i.Wm)(p,{lines:"none"},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{style:{height:"35px",width:"40px","border-radius":"20px"},animated:""}),(0,i.Wm)(m,{style:{width:"100%",margin:"5px"},animated:""})])),_:1}),(0,i.Wm)(p,null,{default:(0,i.w5)((()=>[(0,i.Wm)(m,{style:{width:"100%"},animated:""})])),_:1})]))),64))])),_:1})),(0,i.Wm)($,{onIonInfinite:t[2]||(t[2]=e=>u.listLoadMore(e)),id:"moderation-infinite-scroll"},{default:(0,i.w5)((()=>[(0,i.Wm)(C,{"loading-spinner":"bubbles","loading-text":"Loading more data..."})])),_:1})],64)}var s=o(8903),u=o(4929),d=o(9755),c=o.n(d),m={props:["targetType","targetId"],components:{IonIcon:u.gu,IonImg:u.Xz,IonList:u.q_,IonItem:u.Ie,IonSearchbar:u.VI,IonSkeletonText:u.CK,IonThumbnail:u.Bs,IonChip:u.hM,IonLabel:u.Q$,IonNote:u.uN,IonTextarea:u.g2,IonText:u.yW,IonButtons:u.Sm,IonButton:u.YG,IonInfiniteScroll:u.ju,IonInfiniteScrollContent:u.MB},setup(){return{closeOutline:s.fID,chatboxOutline:s.DMF,thumbsUpSharp:s._DJ,thumbsDownSharp:s.sbE,trashOutline:s.gtu,send:s.lWK,pencil:s.rI1}},data(){var e;const t=null!==(e=this.targetType)&&void 0!==e?e:"product";return{query:null,items:null,targetTypeLabel:t,targetTypeName:"",commentCurrentItem:null}},mounted(){this.listLoad()},methods:{async listLoadMore(e){await this.listLoad(),e.target.complete()},async listReload(){this.items=null,this.listLoad()},async listLoad(){var e;let t={target_type:this.targetTypeLabel,target_id:this.targetId,name_query:this.query,offset:null===(e=this.items)||void 0===e?void 0:e.length,limit:15};try{let e;if(this.is_loading=1,"product"==this.targetTypeLabel||"store"==this.targetTypeLabel){const o=await c().post(`${this.$heap.state.hostname}Reaction/itemListGet`,t);e=o.map((e=>(e.name=`${e.entry_text}`,e.id=e.entry_id,e)))}this.is_loading=0,this.items||(this.items=[]),this.items=this.items.concat(e)}catch(o){}},async itemReact(e){try{await c().post(`${this.$heap.state.hostname}Reaction/itemSave`,e)}catch(i){var t,o;const e=null===i||void 0===i||null===(t=i.responseJSON)||void 0===t||null===(o=t.messages)||void 0===o?void 0:o.error;switch(e){case"notfound":break}return this.listReload(),!1}},async itemReactionLike(e){var t;e.reaction_is_like=1*e.reaction_is_like?0:1,e.reaction_is_dislike=0;let o={is_like:e.reaction_is_like};null!==(t=e.entry_id)&&void 0!==t&&t&&(o.tagQuery=`entry:${e.entry_id}`),e.reaction_is_like&&this.$flash("Благодарим за оценку"),await this.itemReact(o)},async itemReactionDislike(e){var t;e.reaction_is_dislike=1*e.reaction_is_dislike?0:1,e.reaction_is_like=0;let o={is_dislike:e.reaction_is_dislike};null!==(t=e.entry_id)&&void 0!==t&&t&&(o.tagQuery=`entry:${e.entry_id}`),e.reaction_is_dislike&&this.$flash("Ваша оценка будет учтена продавцом"),await this.itemReact(o)},async itemReactionComment(e,t){var o;e.is_comment_editing_mode=0;let i={comment:e.reaction_comment};null!==(o=e.entry_id)&&void 0!==o&&o&&(i.tagQuery=`entry:${e.entry_id}`),await this.itemReact(i),this.$flash("Коментарий сохранен")},async itemReactionDelete(e){if(confirm("Удалить отзыв?"))try{const t={reaction_id:e.reaction_id};await c().post(`${this.$heap.state.hostname}Reaction/itemDelete`,t),this.listReload()}catch(i){var t,o;const e=null===i||void 0===i||null===(t=i.responseJSON)||void 0===t||null===(o=t.messages)||void 0===o?void 0:o.error;switch(e){case"idle":break}return!1}},async itemCommentEdit(e){this.commentCurrentItem&&(this.commentCurrentItem.is_comment_editing_mode=0),this.commentCurrentItem=e,e.is_comment_editing_mode=1;try{setTimeout((()=>document.querySelector(`#comment_ta${e.id}`).setFocus()),100)}catch(t){}},closeModal(){u.Fy.dismiss()}}},p=o(3744);const h=(0,p.Z)(m,[["render",l]]);var _=h},6164:function(e,t,o){"use strict";o.d(t,{Z:function(){return m}});var i=o(6252);const r={class:"ion-page"};function n(e,t,o,n,a,l){const s=(0,i.up)("ion-title"),u=(0,i.up)("ion-icon"),d=(0,i.up)("ion-item"),c=(0,i.up)("ion-toolbar"),m=(0,i.up)("ion-header"),p=(0,i.up)("reaction-target-list"),h=(0,i.up)("ion-content");return(0,i.wg)(),(0,i.iD)("div",r,[(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[(0,i.Wm)(d,{lines:"none"},{default:(0,i.w5)((()=>[(0,i.Wm)(s,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Ваши оценки на покупки")])),_:1}),(0,i.Wm)(u,{icon:n.closeOutline,onClick:t[0]||(t[0]=e=>{l.closeModal()}),slot:"end",size:"large"},null,8,["icon"])])),_:1})])),_:1})])),_:1}),(0,i.Wm)(h,null,{default:(0,i.w5)((()=>[(0,i.Wm)(p,{targetType:o.targetType,targetId:o.targetId},null,8,["targetType","targetId"])])),_:1})])}var a=o(8903),l=o(4929),s=(o(9755),o(6947)),u={props:["targetType","targetId"],components:{IonContent:l.W2,IonHeader:l.Gu,IonToolbar:l.sr,IonTitle:l.wd,IonIcon:l.gu,IonItem:l.Ie,ReactionTargetList:s.Z},setup(){return{closeOutline:a.fID}},methods:{closeModal(){l.Fy.dismiss()}}},d=o(3744);const c=(0,d.Z)(u,[["render",n]]);var m=c},3111:function(e,t,o){"use strict";o.d(t,{Z:function(){return m}});var i=o(6252),r=o(3577);function n(e,t,o,n,a,l){const s=(0,i.up)("ion-icon"),u=(0,i.up)("ion-label"),d=(0,i.up)("ion-chip");return(0,i.wg)(),(0,i.j4)(d,{color:"medium",onClick:t[0]||(t[0]=e=>l.reactionTargetPick())},{default:(0,i.w5)((()=>{var e,t,a,l;return[(0,i.Wm)(s,{src:n.thumbsUpSharp,color:1==(null===(e=o.reactionSummary)||void 0===e?void 0:e.reaction_is_like)?"dark":"medium"},null,8,["src","color"]),(null===(t=o.reactionSummary)||void 0===t?void 0:t.sum_is_like)>0?((0,i.wg)(),(0,i.j4)(u,{key:0},{default:(0,i.w5)((()=>{var e,t;return[(0,i.Uk)((0,r.zw)(null!==(e=null===(t=o.reactionSummary)||void 0===t?void 0:t.sum_is_like)&&void 0!==e?e:""),1)]})),_:1})):(0,i.kq)("",!0),(0,i.Wm)(u,{color:"medium"},{default:(0,i.w5)((()=>[(0,i.Uk)(" | ")])),_:1}),(0,i.Wm)(s,{src:n.thumbsDownSharp,color:1==(null===(a=o.reactionSummary)||void 0===a?void 0:a.reaction_is_dislike)?"dark":"medium"},null,8,["src","color"]),(null===(l=o.reactionSummary)||void 0===l?void 0:l.sum_is_dislike)>0?((0,i.wg)(),(0,i.j4)(u,{key:1},{default:(0,i.w5)((()=>{var e,t;return[(0,i.Uk)((0,r.zw)(null!==(e=null===(t=o.reactionSummary)||void 0===t?void 0:t.sum_is_dislike)&&void 0!==e?e:""),1)]})),_:1})):(0,i.kq)("",!0)]})),_:1})}var a=o(8903),l=o(4929),s=o(6164),u={components:{IonChip:l.hM,IonIcon:l.gu,IonLabel:l.Q$},props:["reactionSummary","targetType","targetId"],setup(){return{thumbsUpSharp:a._DJ,thumbsDownSharp:a.sbE}},methods:{async reactionTargetPick(){const e=await l.Fy.create({component:s.Z,componentProps:{targetType:this.targetType,targetId:this.targetId},initialBreakpoint:.8,breakpoints:[.8,1],handleBehavior:"cycle",canDissmiss:!0});e.present(),this.$topic.on("dismissModal",(()=>e.dismiss()));const t=await e.onDidDismiss();this.$emit("react",t.data)}}},d=o(3744);const c=(0,d.Z)(u,[["render",n]]);var m=c},7294:function(e,t,o){"use strict";o.d(t,{Z:function(){return h}});var i=o(6252),r=o(3577);const n={key:0},a={key:1},l={key:2};function s(e,t,o,s,u,d){const c=(0,i.up)("ion-text"),m=(0,i.up)("ion-chip");return 1==o.storeItem.is_opened?((0,i.wg)(),(0,i.j4)(m,{key:0,color:"medium"},{default:(0,i.w5)((()=>[(0,i._)("label",null,[(0,i.Wm)(c,{color:"success"},{default:(0,i.w5)((()=>[(0,i.Uk)(" ◉ ")])),_:1}),(0,i.Uk)("Открыт до "+(0,r.zw)(o.storeItem.store_time_closes)+":00",1)])])),_:1})):((0,i.wg)(),(0,i.j4)(m,{key:1,color:"medium"},{default:(0,i.w5)((()=>[0==o.storeItem.is_working?((0,i.wg)(),(0,i.iD)("label",n,[(0,i.Wm)(c,{color:"danger"},{default:(0,i.w5)((()=>[(0,i.Uk)(" ◉ ")])),_:1}),(0,i.Uk)("Временно не работает")])):o.storeItem.store_next_time_opens>0?((0,i.wg)(),(0,i.iD)("label",a,[(0,i.Wm)(c,{color:"danger"},{default:(0,i.w5)((()=>[(0,i.Uk)(" ◉ ")])),_:1}),(0,i.Uk)("Закрыт до "+(0,r.zw)(o.storeItem.store_next_time_opens)+":00",1)])):((0,i.wg)(),(0,i.iD)("label",l,[(0,i.Wm)(c,{color:"danger"},{default:(0,i.w5)((()=>[(0,i.Uk)(" ◉ ")])),_:1}),(0,i.Uk)("Закрыт")]))])),_:1}))}var u=o(4929),d=o(8903),c={props:["storeItem"],components:{IonChip:u.hM,IonText:u.yW},setup(){return{ellipse:d.Hpm}}},m=o(3744);const p=(0,m.Z)(c,[["render",s]]);var h=p},7820:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return $}});o(4916),o(5306);var i=o(6252),r=o(3577);const n={key:0,class:"product-images"},a={key:0},l={key:1},s={class:"horizontalScroller",style:{padding:"6px"}},u={key:1},d={key:0,style:{color:"var(--ion-color-danger)","font-size":"0.75em"}};function c(e,t,o,c,m,p){var h,_;const g=(0,i.up)("image-slider-comp"),f=(0,i.up)("ion-label"),y=(0,i.up)("ion-icon"),w=(0,i.up)("ion-button"),k=(0,i.up)("ion-list-header"),v=(0,i.up)("ion-text"),b=(0,i.up)("ion-item"),I=(0,i.up)("ion-list"),W=(0,i.up)("ion-accordion"),C=(0,i.up)("ion-accordion-group"),$=(0,i.up)("ion-img"),D=(0,i.up)("ion-avatar"),S=(0,i.up)("reaction-thumbs"),O=(0,i.up)("reaction-share"),x=(0,i.up)("reaction-comment"),U=(0,i.up)("ion-chip"),L=(0,i.up)("cart-add-buttons"),j=(0,i.up)("ion-textarea"),T=(0,i.up)("base-layout");return(0,i.wg)(),(0,i.j4)(T,{"page-title":null===(h=m.productItem)||void 0===h?void 0:h.product_name,pageDefaultBackLink:`/catalog/store-${null===(_=m.productItem)||void 0===_?void 0:_.store_id}`,cartComponent:c.CartHeader},{default:(0,i.w5)((()=>[m.productItem?((0,i.wg)(),(0,i.iD)("div",n,[(0,i.Wm)(g,{imageList:m.productItem.images,imgHeight:400,mode:"save-aspect-ratio"},null,8,["imageList"])])):(0,i.kq)("",!0),m.productItem?((0,i.wg)(),(0,i.j4)(I,{key:1},{default:(0,i.w5)((()=>{var o,n,h;return[(0,i.Wm)(k,null,{default:(0,i.w5)((()=>[(0,i.Wm)(f,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(m.productItem.product_name),1),m.productItem.product_option?((0,i.wg)(),(0,i.iD)("b",a," ["+(0,r.zw)(m.productItem.product_option)+"]",1)):(0,i.kq)("",!0),(0,i.Uk)(),p.isAvailable?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("span",l,"(Нет в наличии)"))])),_:1}),m.productItem.is_writable?((0,i.wg)(),(0,i.j4)(w,{key:0,onClick:t[0]||(t[0]=t=>e.$go("/catalog/product-edit-"+m.productId))},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{color:"primary",src:c.settingsOutline},null,8,["src"])])),_:1})):(0,i.kq)("",!0)])),_:1}),m.productItem.product_description?((0,i.wg)(),(0,i.j4)(C,{key:0,style:{width:"100%"}},{default:(0,i.w5)((()=>[(0,i.Wm)(W,null,{default:(0,i.w5)((()=>[(0,i.Wm)(b,{slot:"header",lines:"none"},{default:(0,i.w5)((()=>[(0,i.Wm)(v,{class:"product-description",color:"medium",innerHTML:p.itemDescription},null,8,["innerHTML"])])),_:1}),(0,i.Wm)(I,{slot:"content"},{default:(0,i.w5)((()=>[(0,i.Wm)(b,{lines:"none"})])),_:1})])),_:1})])),_:1})):(0,i.kq)("",!0),(0,i.Wm)(b,{lines:"none",onClick:t[1]||(t[1]=t=>e.$go("/catalog/store-"+m.productItem.store_id)),button:""},{default:(0,i.w5)((()=>{var t,o;return[null!==(t=m.productItem)&&void 0!==t&&null!==(o=t.store)&&void 0!==o&&o.avatar?((0,i.wg)(),(0,i.j4)(D,{key:0,slot:"start"},{default:(0,i.w5)((()=>{var t,o;return[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(null===(t=m.productItem)||void 0===t||null===(o=t.store)||void 0===o?void 0:o.avatar,(t=>((0,i.wg)(),(0,i.j4)($,{src:`${e.$heap.state.hostname}image/get.php/${t.image_hash}.200.200.webp`,key:t.image_id},null,8,["src"])))),128))]})),_:1})):(0,i.kq)("",!0),(0,i.Wm)(v,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(m.productItem.store.store_name),1)])),_:1}),p.categories&&p.categories[0]?((0,i.wg)(),(0,i.j4)(v,{key:1,slot:"end",color:"medium"},{default:(0,i.w5)((()=>[(0,i.Uk)("#"+(0,r.zw)(p.categories[0].group_name),1)])),_:1})):(0,i.kq)("",!0)]})),_:1}),(0,i._)("div",s,[(0,i.Wm)(S,{onReact:t[2]||(t[2]=e=>p.getProduct()),reactionSummary:null===(o=m.productItem)||void 0===o?void 0:o.reactionSummary,targetType:"product",targetId:m.productId},null,8,["reactionSummary","targetId"]),(0,i.Wm)(O,{targetUrl:`catalog/product-${m.productId}`,targetTitle:m.productItem.product_name,targetText:m.productItem.product_description},null,8,["targetUrl","targetTitle","targetText"])]),(0,i.Wm)(x,{onReact:t[3]||(t[3]=e=>p.getProduct()),reactionSummary:null===(n=m.productItem)||void 0===n?void 0:n.reactionSummary,targetType:"product",targetId:m.productId},null,8,["reactionSummary","targetId"]),(0,i.Wm)(b,{lines:"none"}),null!==(h=m.productItem)&&void 0!==h&&h.options?((0,i.wg)(),(0,i.iD)("div",u,[(0,i.Wm)(b,{lines:"none"},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{color:"medium",src:c.layersOutline,slot:"start"},null,8,["src"]),(0,i.Wm)(f,{color:"medium"},{default:(0,i.w5)((()=>[(0,i.Uk)("Варианты")])),_:1})])),_:1}),(0,i.Wm)(b,{lines:"none"},{default:(0,i.w5)((()=>[(0,i._)("div",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(m.productItem.options,(t=>((0,i.wg)(),(0,i.j4)(U,{color:"primary",outline:"",key:t.product_id,onClick:o=>e.$router.replace(`/catalog/product-${t.product_id}`)},{default:(0,i.w5)((()=>[(0,i.Wm)(f,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(t.product_option),1)])),_:2},1024),(0,i.Uk)(" "),t.product_final_price>0?((0,i.wg)(),(0,i.j4)(f,{key:0},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(t.product_final_price)+(0,r.zw)(e.$heap.state.currencySign),1)])),_:2},1024)):(0,i.kq)("",!0)])),_:2},1032,["onClick"])))),128))])])),_:1})])):(0,i.kq)("",!0),m.productItem.product_price!=m.productItem.product_final_price?((0,i.wg)(),(0,i.j4)(b,{key:2,lines:"none"},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{slot:"start",src:c.giftOutline,color:"medium"},null,8,["src"]),(0,i.Wm)(f,{color:"medium"},{default:(0,i.w5)((()=>[(0,i.Uk)("Акция до "+(0,r.zw)(p.promoFinish),1)])),_:1}),(0,i.Wm)(f,{slot:"end",color:"success",style:{"font-size":"1.2em"}},{default:(0,i.w5)((()=>[(0,i.Uk)("-"+(0,r.zw)(p.promoPercent)+"%",1)])),_:1})])),_:1})):(0,i.kq)("",!0),(0,i.Wm)(b,{lines:"none"},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{slot:"start",src:c.pricetagOutline,color:"medium"},null,8,["src"]),"порция"==m.productItem.product_unit?((0,i.wg)(),(0,i.j4)(f,{key:0,color:"medium"},{default:(0,i.w5)((()=>[(0,i.Uk)("Цена за "+(0,r.zw)(p.weight_in_gramms)+"г",1)])),_:1})):"порция мл"==m.productItem.product_unit?((0,i.wg)(),(0,i.j4)(f,{key:1,color:"medium"},{default:(0,i.w5)((()=>[(0,i.Uk)("Цена за "+(0,r.zw)(p.weight_in_gramms)+"мл",1)])),_:1})):"кг"==m.productItem.product_unit&&m.productItem.product_quantity_min<1?((0,i.wg)(),(0,i.j4)(f,{key:2,style:{color:"var(--ion-color-medium)"}},{default:(0,i.w5)((()=>[(0,i.Uk)("Цена за "+(0,r.zw)(p.unit_in_gramms)+"г",1)])),_:1})):((0,i.wg)(),(0,i.j4)(f,{key:3,color:"medium"},{default:(0,i.w5)((()=>[(0,i.Uk)("Цена за "+(0,r.zw)(m.productItem.product_unit),1)])),_:1})),(0,i.Wm)(f,{slot:"end",color:"primary",style:{"font-size":"1.2em"}},{default:(0,i.w5)((()=>[m.productItem.product_price!=m.productItem.product_final_price?((0,i.wg)(),(0,i.iD)("span",d,[(0,i._)("s",null,(0,r.zw)(p.product_price)+(0,r.zw)(e.$heap.state.currencySign),1),(0,i.Uk)("   ")])):(0,i.kq)("",!0),(0,i.Uk)(" "+(0,r.zw)(p.product_final_price)+(0,r.zw)(e.$heap.state.currencySign),1)])),_:1})])),_:1}),(0,i.Wm)(b,{lines:"none"},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{slot:"start",src:c.cartOutline,color:"medium"},null,8,["src"]),p.inCart?((0,i.wg)(),(0,i.j4)(f,{key:0,color:"medium"},{default:(0,i.w5)((()=>[(0,i.Uk)("В корзине ("+(0,r.zw)(m.productItem.product_unit)+")",1)])),_:1})):((0,i.wg)(),(0,i.j4)(f,{key:1,color:"medium"},{default:(0,i.w5)((()=>[(0,i.Uk)("Не заказан")])),_:1})),(0,i.Wm)(L,{slot:"end",buttonLayout:"horizontal",display:"inline",productItem:m.productItem},null,8,["productItem"])])),_:1}),p.inCart?((0,i.wg)(),(0,i.j4)(b,{key:3,lines:"none"},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{slot:"start",src:c.walletOutline,color:"medium"},null,8,["src"]),(0,i.Wm)(f,{color:"medium"},{default:(0,i.w5)((()=>[(0,i.Uk)("Итог")])),_:1}),(0,i.Wm)(f,{slot:"end",color:"medium",style:{"font-size":"1.2em"}},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(p.inCart)+(0,r.zw)(e.$heap.state.currencySign),1)])),_:1})])),_:1})):(0,i.kq)("",!0),null!=p.inCartComment?((0,i.wg)(),(0,i.j4)(b,{key:4,lines:"none"},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{slot:"start",src:c.chatboxEllipsesOutline,color:"medium"},null,8,["src"]),(0,i.Wm)(j,{label:"","label-placement":"",value:p.inCartComment,onChange:t[4]||(t[4]=e=>p.cartCommentUpdate(e.target.value)),placeholder:"заметка для продавца"},null,8,["value"])])),_:1})):(0,i.kq)("",!0)]})),_:1})):(0,i.kq)("",!0)])),_:1},8,["page-title","pageDefaultBackLink","cartComponent"])}o(7658);var m=o(2008),p=o(8903),h=o(4929),_=o(4846),g=o(3763),f=o(9395),y=o(7782),w=o(4405),k=o(3111),v=o(2242),b=o(5551),I={components:{ImageSliderComp:_.Z,CartAddButtons:g.Z,ReactionThumbs:k.Z,ReactionComment:v.Z,ReactionShare:b.Z,IonTextarea:h.g2,IonListHeader:h.yh,IonText:h.yW,IonIcon:h.gu,IonItem:h.Ie,IonChip:h.hM,IonLabel:h.Q$,IonList:h.q_,IonAccordion:h.We,IonAccordionGroup:h.eh,IonButton:h.YG,IonAvatar:h.BJ,IonImg:h.Xz},setup(){return{CartHeader:f.Z,compassOutline:p.gmD,cartOutline:p.Ox0,pricetagOutline:p.TuG,giftOutline:p._$o,walletOutline:p.S5P,chatboxEllipsesOutline:p._Pt,settingsOutline:p.C$N,layersOutline:p.Y1P,arrowRedoOutline:p.kY2,thumbsUpSharp:p._DJ,thumbsDownSharp:p.sbE,chevronDownOutline:p.Y$3,addOutline:p.s6O}},data(){return{productId:this.$route.params.id,productItem:null}},mounted(){this.getProduct()},ionViewDidEnter(){this.productId=this.$route.params.id,this.getProduct()},computed:{categories(){var e,t,o,i,r,n;if(null===(e=this.productItem)||void 0===e||null===(t=e.member_of_groups)||void 0===t||!t.group_ids)return[];const a=null===(o=this.productItem)||void 0===o||null===(i=o.member_of_groups)||void 0===i?void 0:i.group_ids.split(","),l=null===(r=this.productItem)||void 0===r||null===(n=r.member_of_groups)||void 0===n?void 0:n.group_names.split(",");let s=[];for(let u in a)s.push({group_id:a[u],group_name:l[u]});return s},promoFinish(){try{return this.productItem.product_promo_finish.split(" ")[0].split("-").reverse().join(".")}catch(e){return null}},promoPercent(){return Math.round(100-this.productItem.product_final_price/this.productItem.product_price*100)},inCart(){const e=y.Z.cart.entryGet(this.productId);return e?Math.round(e.data.entry_quantity*e.data.entry_price):0},inCartComment(){var e;const t=y.Z.cart.entryGet(this.productId);return t?null!==(e=t.data.entry_comment)&&void 0!==e?e:"":null},isAvailable(){return 1!=this.productItem.is_counted||this.productItem.product_quantity-this.productItem.product_quantity_reserved>0},weight_in_gramms(){return 1e3*this.productItem.product_weight},unit_in_gramms(){return Math.round(1e3*this.productItem.product_quantity_min)},product_price(){return"кг"==this.productItem.product_unit&&this.productItem.product_quantity_min<1?Math.round(this.productItem.product_price*this.productItem.product_quantity_min):this.productItem.product_price},product_final_price(){return"кг"==this.productItem.product_unit&&this.productItem.product_quantity_min<1?Math.round(this.productItem.product_final_price*this.productItem.product_quantity_min):this.productItem.product_final_price},itemDescription(){var e,t;return null===(e=this.productItem)||void 0===e||null===(t=e.product_description)||void 0===t?void 0:t.replace(/<\/?[^>]+(>|$)/g,"").replace(/[\n\r]/g,"<br>")}},methods:{async getProduct(){try{this.productItem=await w.Z.prePost(m.Z.state.hostname+"Product/itemGet",{product_id:this.productId}),this.productItem=await w.Z.post(m.Z.state.hostname+"Product/itemGet",{product_id:this.productId})}catch(o){var e,t;const i=null===o||void 0===o||null===(e=o.responseJSON)||void 0===e||null===(t=e.messages)||void 0===t?void 0:t.error;switch(i){case"notfound":this.$flash("Товар не найден"),this.$router.replace("/catalog");break}return!1}},cartCommentUpdate(e){const t={product_id:this.productId,entry_comment:e};y.Z.cart.entryUpdate(t)}}},W=o(3744);const C=(0,W.Z)(I,[["render",c]]);var $=C},4888:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return ce}});var i=o(6252),r=o(3577);const n=e=>((0,i.dD)("data-v-77e78147"),e=e(),(0,i.Cn)(),e),a={class:"store-info-container"},l={key:0,slot:"start",class:"avatar-container"},s={class:"avatar"},u=["src"],d={class:"horizontalScroller",style:{padding:"6px"}},c={class:"horizontalScroller",style:{display:"flex"}},m={key:0,class:"delivery-variant"},p=n((()=>(0,i._)("br",null,null,-1))),h={key:1,class:"delivery-variant"},_=n((()=>(0,i._)("br",null,null,-1))),g={key:2,class:"delivery-variant"},f=n((()=>(0,i._)("br",null,null,-1))),y={key:0,ref:"groupFixedBlock",class:"group-fixed-block hidden-block"},w={key:1},k=n((()=>(0,i._)("h4",{style:{margin:"8px 16px"}},[(0,i._)("b",null,"Категории")],-1))),v={style:{margin:"0"}},b={key:3},I={style:{margin:"8px 16px"}},W={style:{margin:"0"}};function C(e,t,o,n,C,$){var D;const S=(0,i.up)("image-slider-comp"),O=(0,i.up)("ion-text"),x=(0,i.up)("ion-icon"),U=(0,i.up)("ion-item"),L=(0,i.up)("ion-label"),j=(0,i.up)("ion-list"),T=(0,i.up)("ion-accordion"),z=(0,i.up)("ion-accordion-group"),Z=(0,i.up)("reaction-thumbs"),q=(0,i.up)("reaction-share"),G=(0,i.up)("store-opened-indicator"),P=(0,i.up)("reaction-comment"),M=(0,i.up)("ion-segment-button"),B=(0,i.up)("ion-segment"),R=(0,i.up)("ion-searchbar"),A=(0,i.up)("group-list"),N=(0,i.up)("ion-chip"),H=(0,i.up)("ion-col"),F=(0,i.up)("product-list"),Y=(0,i.up)("ion-row"),E=(0,i.up)("ion-grid"),V=(0,i.up)("swiper-slide"),K=(0,i.up)("swiper"),Q=(0,i.up)("ion-skeleton-text"),J=(0,i.up)("base-layout");return(0,i.wg)(),(0,i.j4)(J,{pageDefaultBackLink:"/catalog","page-class":"store-page",contentOnScroll:$.onScroll,"page-title":null!==(D=this.storeItem.store_name)&&void 0!==D?D:"Магазин"},{default:(0,i.w5)((()=>{var o,D,J,X;return[(0,i._)("div",null,[(0,i._)("div",a,[(0,i.Wm)(S,{imageList:C.storeItem.images,imgHeight:300,mode:"crop-to-fit"},null,8,["imageList"]),(0,i.Wm)(j,{class:"store-info"},{default:(0,i.w5)((()=>[(0,i.Wm)(U,{lines:"none"},{default:(0,i.w5)((()=>[C.storeItem.avatarImage?((0,i.wg)(),(0,i.iD)("div",l,[(0,i._)("div",s,[(0,i._)("img",{src:e.$heap.state.hostname+"image/get.php/"+C.storeItem.avatarImage+".200.200.webp"},null,8,u)])])):(0,i.kq)("",!0),(0,i.Wm)(O,{style:{"font-size":"1.2em"}},{default:(0,i.w5)((()=>[(0,i._)("b",null,(0,r.zw)(C.storeItem.store_name),1)])),_:1}),C.storeItem.is_writable?((0,i.wg)(),(0,i.j4)(x,{key:1,slot:"end",color:"primary",onClick:t[0]||(t[0]=t=>e.$go(`/catalog/store-edit-${C.storeItem.store_id}`)),icon:n.settingsOutline,style:{"font-size":"24px"}},null,8,["icon"])):(0,i.kq)("",!0)])),_:1}),(0,i.Wm)(z,{style:{width:"100%"}},{default:(0,i.w5)((()=>[(0,i.Wm)(T,null,{default:(0,i.w5)((()=>[(0,i.Wm)(U,{slot:"header",lines:"none"},{default:(0,i.w5)((()=>[C.storeItem.store_description?((0,i.wg)(),(0,i.j4)(O,{key:0,class:"store-description",color:"medium"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(C.storeItem.store_description),1)])),_:1})):((0,i.wg)(),(0,i.j4)(O,{key:1,color:"medium"},{default:(0,i.w5)((()=>[(0,i.Uk)("подробнее")])),_:1}))])),_:1}),(0,i.Wm)(j,{slot:"content"},{default:(0,i.w5)((()=>{var e;return[C.storeItem.store_company_name?((0,i.wg)(),(0,i.j4)(U,{key:0,lines:"none"},{default:(0,i.w5)((()=>[(0,i.Wm)(O,null,{default:(0,i.w5)((()=>[(0,i._)("b",null,(0,r.zw)(C.storeItem.store_company_name),1)])),_:1})])),_:1})):(0,i.kq)("",!0),C.storeItem.store_tax_num?((0,i.wg)(),(0,i.j4)(U,{key:1,lines:"none"},{default:(0,i.w5)((()=>[(0,i.Wm)(L,{color:"medium"},{default:(0,i.w5)((()=>[(0,i.Uk)("ИНН")])),_:1}),(0,i.Wm)(O,{color:"dark"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(C.storeItem.store_tax_num),1)])),_:1})])),_:1})):(0,i.kq)("",!0),(C.storeItem.store_phone,(0,i.kq)("",!0)),(null===(e=C.storeItem.locations)||void 0===e?void 0:e.length)>0?((0,i.wg)(),(0,i.j4)(U,{key:3,lines:"none"},{default:(0,i.w5)((()=>[(0,i.Wm)(O,{color:"dark"},{default:(0,i.w5)((()=>{var e;return[(0,i.Uk)((0,r.zw)(null===(e=C.storeItem.locations)||void 0===e?void 0:e[0].location_address),1)]})),_:1})])),_:1})):(0,i.kq)("",!0)]})),_:1})])),_:1})])),_:1}),C.storeItem.store_group_names?((0,i.wg)(),(0,i.j4)(U,{key:0,lines:"none"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(C.storeItem.store_group_names.split(","),(e=>((0,i.wg)(),(0,i.j4)(O,{key:e,color:"medium",style:{"font-size":"0.9em"}},{default:(0,i.w5)((()=>[(0,i.Uk)("#"+(0,r.zw)(e)+" ",1)])),_:2},1024)))),128))])),_:1})):(0,i.kq)("",!0)])),_:1}),(0,i._)("div",d,[(0,i.Wm)(Z,{onReact:t[1]||(t[1]=e=>$.itemGet()),reactionSummary:null===(o=C.storeItem)||void 0===o?void 0:o.reactionSummary,targetType:"store",targetId:C.storeId},null,8,["reactionSummary","targetId"]),(0,i.Wm)(q,{targetUrl:`catalog/store-${C.storeId}`,targetTitle:C.storeItem.store_name,targetText:C.storeItem.store_description},null,8,["targetUrl","targetTitle","targetText"]),(0,i.Wm)(G,{storeItem:C.storeItem},null,8,["storeItem"])]),(0,i.Wm)(P,{onReact:t[2]||(t[2]=e=>$.itemGet()),reactionSummary:null===(D=C.storeItem)||void 0===D?void 0:D.reactionSummary,targetType:"store",targetId:C.storeId},null,8,["reactionSummary","targetId"]),(0,i._)("div",c,[C.storeItem.delivery_cost>0?((0,i.wg)(),(0,i.iD)("div",m,[(0,i._)("div",null,[(0,i.Wm)(O,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Доставит "+(0,r.zw)(e.$heap.getters.settings.app_title),1)])),_:1}),p,null!==(J=C.storeItem)&&void 0!==J&&null!==(X=J.deliveryTime)&&void 0!==X&&X.timeMin?((0,i.wg)(),(0,i.j4)(O,{key:0},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(C.storeItem.deliveryTime.timeMin)+"-"+(0,r.zw)(C.storeItem.deliveryTime.timeMax)+"мин",1)])),_:1})):(0,i.kq)("",!0)]),(0,i._)("div",null,[C.storeItem.delivery_cost>0?((0,i.wg)(),(0,i.j4)(O,{key:0},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(C.storeItem.delivery_cost)+"₽",1)])),_:1})):((0,i.wg)(),(0,i.j4)(O,{key:1},{default:(0,i.w5)((()=>[(0,i.Uk)("0₽")])),_:1}))])])):(0,i.kq)("",!0),1==C.storeItem.store_delivery_allow?((0,i.wg)(),(0,i.iD)("div",h,[(0,i._)("div",null,[(0,i.Wm)(O,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Доставит "+(0,r.zw)(C.storeItem.store_name),1)])),_:1}),_]),(0,i._)("div",null,[C.storeItem.store_delivery_cost>0?((0,i.wg)(),(0,i.j4)(O,{key:0},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(C.storeItem.store_delivery_cost)+"₽",1)])),_:1})):((0,i.wg)(),(0,i.j4)(O,{key:1},{default:(0,i.w5)((()=>[(0,i.Uk)("0₽")])),_:1}))])])):(0,i.kq)("",!0),1==C.storeItem.store_pickup_allow?((0,i.wg)(),(0,i.iD)("div",g,[(0,i._)("div",null,[(0,i.Wm)(O,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Самовывоз")])),_:1}),f]),(0,i._)("div",null,[(0,i.Wm)(O,null,{default:(0,i.w5)((()=>[(0,i.Uk)("0₽")])),_:1})])])):(0,i.kq)("",!0)])]),$.storeGroupsFiltered?((0,i.wg)(),(0,i.iD)("div",y,[(0,i.Wm)(B,{modelValue:C.groupSelectedParentId,"onUpdate:modelValue":t[3]||(t[3]=e=>C.groupSelectedParentId=e),scrollable:"",style:{"scrollbar-width":"none"},class:"groups-container"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)($.storeGroupsFiltered,(e=>((0,i.wg)(),(0,i.j4)(M,{key:e.group_id,value:e.group_id,onClick:t=>$.groupSelectParent(e.group_id,1),ref_for:!0,ref:"group-tab-"+e.group_id},{default:(0,i.w5)((()=>[(0,i.Wm)(L,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(e.group_name),1)])),_:2},1024)])),_:2},1032,["value","onClick"])))),128))])),_:1},8,["modelValue"])],512)):(0,i.kq)("",!0),(0,i.Wm)(R,{class:"search-container",modelValue:C.searchQuery,"onUpdate:modelValue":t[4]||(t[4]=e=>C.searchQuery=e),placeholder:"Поиск у этого продавца"},null,8,["modelValue"]),$.storeGroupsFiltered?((0,i.wg)(),(0,i.iD)("div",w,[k,(0,i.Wm)(A,{groupList:$.storeGroupsFiltered,onClick:e=>{$.groupSelectParent(e,!0)}},null,8,["groupList","onClick"]),(0,i.Wm)(K,{pager:"true",initialSlide:0,speed:400,watchSlidesProgress:!1,grabCursor:!0,touchStartForcePreventDefault:!0,slidesPerView:1.1,pagination:!1,centeredSlides:!1,class:"product-list-slider",onSlideChange:t[5]||(t[5]=e=>$.groupSliderChanged(e)),ref:"productListSlider"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)($.storeGroupsFiltered,(e=>((0,i.wg)(),(0,i.j4)(V,{key:e.group_id},{default:(0,i.w5)((()=>[(0,i.Wm)(E,{class:"product-list"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.children,(e=>((0,i.wg)(),(0,i.j4)(Y,{key:e.group_id,ref_for:!0,ref:"group-"+e.group_id,"data-group_id":e.group_id},{default:(0,i.w5)((()=>[(0,i.Wm)(H,{class:"group-title",size:"12"},{default:(0,i.w5)((()=>[(0,i._)("h5",v,[(0,i.Uk)((0,r.zw)(e.group_name)+" ",1),1==C.storeItem.is_writable?((0,i.wg)(),(0,i.j4)(N,{key:0,onClick:t=>$.productItemCreate(e.group_id)},{default:(0,i.w5)((()=>[(0,i.Wm)(x,{src:n.addOutline},null,8,["src"]),(0,i.Uk)("добавить ")])),_:2},1032,["onClick"])):(0,i.kq)("",!0)])])),_:2},1024),(0,i.Wm)(H,{size:"12"},{default:(0,i.w5)((()=>[(0,i.Wm)(F,{productList:$.storeProductsFiltered[e.group_id]},null,8,["productList"])])),_:2},1024)])),_:2},1032,["data-group_id"])))),128))])),_:2},1024)])),_:2},1024)))),128))])),_:1},512)])):C.searchQuery?((0,i.wg)(),(0,i.j4)(L,{key:2,style:{padding:"15px"}},{default:(0,i.w5)((()=>[(0,i.Uk)(" К сожалению, в "),(0,i._)("b",null,(0,r.zw)(C.storeItem.store_name),1),(0,i.Uk)(" по запросу "),(0,i._)("b",null,'"'+(0,r.zw)(C.searchQuery)+'"',1),(0,i.Uk)(" ничего не найдено. "),(0,i.Wm)(N,{onClick:t[6]||(t[6]=e=>this.searchQuery=null)},{default:(0,i.w5)((()=>[(0,i.Uk)("Сбросить фильтр")])),_:1})])),_:1})):C.productList?$.productListIsEmpty?((0,i.wg)(),(0,i.j4)(L,{key:4,style:{padding:"15px"}},{default:(0,i.w5)((()=>[(0,i.Uk)(" К сожалению, в "),(0,i._)("b",null,(0,r.zw)(C.storeItem.store_name),1),(0,i.Uk)(" пока нет доступных товаров. ")])),_:1})):(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",b,[(0,i._)("h4",I,[(0,i._)("b",null,[(0,i.Wm)(Q,{style:{height:"30px",width:"150px"}})])]),(0,i._)("div",null,[((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)([1,2,3,4],(e=>(0,i._)("div",{key:e,style:{display:"inline-block",margin:"10px"}},[(0,i.Wm)(Q,{style:{height:"70px",width:"70px"},animated:""})]))),64))]),(0,i.Wm)(E,{class:"product-list"},{default:(0,i.w5)((()=>[(0,i.Wm)(Y,null,{default:(0,i.w5)((()=>[(0,i.Wm)(H,{class:"group-title",size:"12"},{default:(0,i.w5)((()=>[(0,i._)("h5",W,[(0,i.Wm)(Q,{style:{height:"20px",width:"120px"}})])])),_:1}),(0,i.Wm)(H,{size:"12"},{default:(0,i.w5)((()=>[((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)([1,2,3,4],(e=>(0,i._)("div",{key:e,style:{display:"inline-block",margin:"10px"}},[(0,i.Wm)(Q,{style:{height:"120px",width:"120px"},animated:""})]))),64))])),_:1})])),_:1})])),_:1})]))])]})),_:1},8,["contentOnScroll","page-title"])}o(6699),o(7658),o(3948),o(4603),o(8450),o(4916),o(5306);var $=o(4929),D=o(702),S=o(3181),O=o(8903),x=o(4846),U=o(62);const L={class:"product_list_widget_grid"};function j(e,t,o,n,a,l){const s=(0,i.up)("product-item"),u=(0,i.up)("product-item-no-img");return(0,i.wg)(),(0,i.iD)("div",L,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.productList,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e.product_id,class:(0,r.C_)(e.image_hash?"":"product_item_colspan2")},[e.image_hash?((0,i.wg)(),(0,i.j4)(s,{key:0,productItem:e},null,8,["productItem"])):((0,i.wg)(),(0,i.j4)(u,{key:1,productItem:e},null,8,["productItem"]))],2)))),128))])}var T=o(6615);const z=["id"],Z={class:"product_list_item_img"},q={key:0,style:{position:"relative"}},G={style:{color:"black",height:"3em","font-size":"1em",overflow:"hidden","line-height":"1.4em","font-weight":"bold"}},P={key:0,style:{color:"var(--ion-color-danger)"}},M={style:{color:"var(--ion-color-primary)"}},B={style:{"font-weight":"bold",margin:"0","font-size":"1.4em"}},R={style:{"font-weight":"bold",margin:"0","font-size":"1.2em"}},A={key:1,style:{color:"var(--ion-color-medium)"}},N={key:2,style:{color:"var(--ion-color-medium)"}},H={key:3,style:{color:"var(--ion-color-medium)"}};function F(e,t,o,n,a,l){const s=(0,i.up)("cart-add-buttons"),u=(0,i.up)("ion-chip"),d=(0,i.up)("ion-icon");return(0,i.wg)(),(0,i.iD)("div",{class:(0,r.C_)(`product_item ${l.item_class}`),id:`product_list_item${o.productItem.product_id}`},[(0,i._)("div",Z,["0"!=o.productItem.is_disabled||o.productItem.deleted_at?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",q,[(0,i.Wm)(s,{buttonLayout:"vertical",productItem:o.productItem},null,8,["productItem"])]))]),(0,i._)("div",{style:{height:"100%",overflow:"hidden",position:"relative"},onClick:t[0]||(t[0]=t=>e.$go(`/catalog/product-${o.productItem.product_id}`))},[(0,i._)("div",G,(0,r.zw)(o.productItem.product_name),1),o.productItem.product_price!=o.productItem.product_final_price?((0,i.wg)(),(0,i.iD)("span",P,[(0,i._)("s",null,(0,r.zw)(o.productItem.product_price)+(0,r.zw)(e.$heap.state.currencySign),1),(0,i.Uk)("   ")])):(0,i.kq)("",!0),(0,i._)("span",M,[(0,i._)("b",B,(0,r.zw)(o.productItem.product_final_price),1),(0,i._)("b",R,(0,r.zw)(e.$heap.state.currencySign),1)]),(0,i.Uk)(" / "),"порция"==o.productItem.product_unit?((0,i.wg)(),(0,i.iD)("span",A,(0,r.zw)(l.weight_in_gramms)+"г",1)):"порция мл"==o.productItem.product_unit?((0,i.wg)(),(0,i.iD)("span",N,(0,r.zw)(l.weight_in_gramms)+"мл",1)):((0,i.wg)(),(0,i.iD)("span",H,(0,r.zw)(o.productItem.product_unit),1)),l.discount<0?((0,i.wg)(),(0,i.j4)(u,{key:4,style:{position:"absolute",left:"0px",bottom:"0px","background-color":"var(--ion-color-success-tint)"},outline:"",color:"success"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(l.discount)+"%",1)])),_:1})):(0,i.kq)("",!0),o.productItem.options?((0,i.wg)(),(0,i.j4)(d,{key:5,src:n.layersOutline,color:"primary",size:"large",style:{position:"absolute",bottom:"3px",right:"3px"}},null,8,["src"])):(0,i.kq)("",!0)])],10,z)}var Y=o(3763),E={components:{IonIcon:$.gu,IonChip:$.hM,CartAddButtons:Y.Z},props:["productItem"],setup(){return{layersOutline:O.Y1P}},computed:{item_class(){return this.productItem.deleted_at?"deleted":this.productItem.product_final_price!=this.productItem.product_price?"promo":1==this.productItem.is_disabled?"disabled":1!=this.productItem.is_counted||this.productItem.product_quantity-this.productItem.product_quantity_reserved>0?"":"absent"},discount(){return Math.round(this.productItem.product_final_price/this.productItem.product_price*100-100)},weight_in_gramms(){return 1e3*this.productItem.product_weight}}},V=o(3744);const K=(0,V.Z)(E,[["render",F],["__scopeId","data-v-868b5bf2"]]);var Q=K,J={props:["productList"],components:{ProductItem:T.Z,ProductItemNoImg:Q}};const X=(0,V.Z)(J,[["render",j],["__scopeId","data-v-2bde3172"]]);var ee=X,te=o(7294),oe=o(9755),ie=o.n(oe),re=o(2008),ne=o(4405),ae=o(3111),le=o(2242),se=o(5551),ue={components:{IonText:$.yW,IonCol:$.wI,IonIcon:$.gu,IonRow:$.Nd,IonGrid:$.jY,IonLabel:$.Q$,IonSegmentButton:$.GO,IonSegment:$.cJ,IonChip:$.hM,IonSearchbar:$.VI,IonAccordion:$.We,IonAccordionGroup:$.eh,IonList:$.q_,IonItem:$.Ie,ImageSliderComp:x.Z,StoreOpenedIndicator:te.Z,Swiper:S.t,SwiperSlide:S.o,GroupList:U.Z,ProductList:ee,IonSkeletonText:$.CK,ReactionThumbs:ae.Z,ReactionComment:le.Z,ReactionShare:se.Z},setup(){return{search:O.yC4,settingsOutline:O.C$N,rocketOutline:O.G$D,compassOutline:O.gmD,addOutline:O.s6O,arrowRedoOutline:O.kY2,slideModules:[D.pt]}},data(){return{storeId:this.$route.params.id,query:this.$route.query,searchQuery:null,storeItem:[],productList:null,storeGroups:null,groupSelectedParentId:-1,sliderMaxHeight:500,offsetModificator:150,can_reload_at:0}},computed:{storeGroupsFiltered(){if(!this.storeProductsFiltered||!this.storeGroups)return null;const e=Object.keys(this.storeProductsFiltered);let t=null;for(let o in this.storeGroups)for(let i in this.storeGroups[o].children){const r=this.storeGroups[o].children[i];e.includes(i)&&(t||(t={}),t[o]||(t[o]={group_id:this.storeGroups[o].group_id,group_name:this.storeGroups[o].group_name,image_hash:this.storeGroups[o].image_hash,children:[]}),t[o].children.push(r))}return t},storeProductsFiltered(){if(!this.productList)return null;let e=1,t={};for(let l of this.productList){var o;if(this.searchQuery)try{var i,r,n;const e=new RegExp(this.searchQuery.replace(/^[\w\d\s]/,"").replace(/\s/g,".*"),"im");if((null===(i=l.product_name)||void 0===i||!i.match(e))&&(null===(r=l.product_code)||void 0===r||!r.match(e))&&(null===(n=l.product_description)||void 0===n||!n.match(e)))continue}catch(a){}const s=null!==(o=l.group_id)&&void 0!==o?o:0;this.storeGroups&&(t[s]||(t[s]=[],t[s].category_order=e++)),t[s].push(l)}return t},productListIsEmpty(){var e;return(null===(e=this.productList)||void 0===e?void 0:e.length)>0?0:1}},methods:{async itemGet(){try{const e={store_id:this.storeId,distance_include:1,products_include:1};let t=0,o=await ne.Z.prePost(`${re.Z.state.hostname}Store/itemGet`,e);o&&(this.storeItem=this.itemPrepare(o),t=300),o=await ne.Z.post(`${re.Z.state.hostname}Store/itemGet`,e),setTimeout((()=>{this.storeItem=this.itemPrepare(o)}),t),re.Z.commit("setCurrentStore",this.storeItem)}catch(o){var e,t;const i=null===o||void 0===o||null===(e=o.responseJSON)||void 0===e||null===(t=e.messages)||void 0===t?void 0:t.error;switch(i){case"notfound":this.$flash("Продавец не найден"),this.$router.replace("/catalog");break}return!1}},itemPrepare(e){var t;return e.member_of_groups.group_names&&(e.store_group_names=e.member_of_groups.group_names),e.deliveryTime={},null!==(t=e.locations[0])&&void 0!==t&&t.distance&&(e.deliveryTime=ne.Z.deliveryTimeCalculate(e.locations[0].distance,e.store_time_preparation)),e.avatarImage="",e.avatar.length>0&&(e.avatarImage=e.avatar[0].image_hash),e.images.length>0&&document.querySelector('meta[property="og:image"]').setAttribute("content",`${this.$heap.state.hostname}image/get.php/${e.images[0].image_hash}.600.600.jpg`),e},async productItemCreate(e){try{const t={store_id:this.storeId,product_name:"Новый товар",product_price:1e3},o=await ie().post(`${re.Z.state.hostname}Product/itemCreate`,t);e&&await ie().post(`${re.Z.state.hostname}Product/itemUpdateGroup`,{product_id:o,group_id:e,is_joined:1}),this.$go(`/catalog/product-edit-${o}`),this.$flash("Добавлен 'Новый товар'")}catch(t){this.$flash("Не удалось создать товар")}},async productListGet(){const e={store_id:this.storeId,is_active:1,limit:200,grouptree_include:1};try{let t=0,o=await ne.Z.prePost(`${re.Z.state.hostname}Product/listGet`,e);o&&(this.productList=o.product_list,this.groupTreePrepare(o.group_tree),t=300),o=await ne.Z.post(`${re.Z.state.hostname}Product/listGet`,e),setTimeout((()=>{this.productList=o.product_list,this.groupTreePrepare(o.group_tree)}),t)}catch(t){}},async groupTreePrepare(e){let t=[];for(let o in e)t[e[o].order]=e[o];this.storeGroups=t,this.groupOtherAdd(),setTimeout((()=>{this.groupSelect()}),0)},groupOtherAdd(){if(this.storeProductsFiltered[0]){const e=this.storeGroups.filter((e=>"other"==e.group_id));if(e.length>0)return;this.storeGroups.push({group_id:"other",group_name:"Другое",image_hash:"",children:{0:{group_id:0,group_name:"другое",group_parent_id:0,group_path:"",image_hash:""}}})}},groupSelect(){if(this.groupSelectedParentId>-1)return;let e=this.query.parent_group_id,t=this.query.sub_group_id;if(t)e:for(let r in this.storeGroups)for(let o in this.storeGroups[r].children)if(o==t){e=r;break e}var o;e||(e=null===(o=this.storeGroups[0])||void 0===o?void 0:o.group_id);const i=!1;this.groupSelectParent(e,i)},groupSelectParent(e){if(this.groupSelectedParentId==e)return;if(this.groupSelectedParentId=e,void 0==this.$refs.productListSlider)return;const t=this.$refs.productListSlider.$el.swiper,o=this.storeGroups.findIndex((t=>t.group_id==e));o>=0&&(t.slideTo(o,100,!1),this.groupSliderAdjustHeight())},groupSliderChanged(e){const t=e.activeIndex,o=this.storeGroups[t].group_id;this.groupSelectParent(o,1)},groupSliderAdjustHeight(){var e;const t=null===(e=this.$refs.productListSlider.$el.querySelector(".swiper-slide-active"))||void 0===e?void 0:e.scrollHeight;this.$refs.productListSlider.$el.style.maxHeight=t>0?t+"px":""},onScroll(e){var t;if(!this.$refs.productListSlider||!this.$refs.groupFixedBlock)return;const o=null===(t=this.$refs.productListSlider.$el)||void 0===t?void 0:t.offsetTop,i=this.$refs.groupFixedBlock.offsetHeight;o-i-100<e.detail.scrollTop?this.$refs.groupFixedBlock.classList.remove("hidden-block"):this.$refs.groupFixedBlock.classList.add("hidden-block")}},async mounted(){this.query=this.$route.query,this.itemGet(),this.productListGet()},async ionViewDidEnter(){this.query=this.$route.query,this.itemGet(),this.productListGet()},watch:{$route(e){this.storeId=e.params.id}}};const de=(0,V.Z)(ue,[["render",C],["__scopeId","data-v-77e78147"]]);var ce=de},659:function(e,t,o){"use strict";e.exports=o.p+"img/loading.30880178.svg"},8764:function(e,t,o){"use strict";e.exports=o.p+"img/orders.ea36eab8.svg"},94:function(e,t,o){"use strict";e.exports=o.p+"img/tezkel_logo.f7e29fe1.svg"}},t={};function o(i){var r=t[i];if(void 0!==r)return r.exports;var n=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(n.exports,n,n.exports,o),n.loaded=!0,n.exports}o.m=e,function(){var e=[];o.O=function(t,i,r,n){if(!i){var a=1/0;for(d=0;d<e.length;d++){i=e[d][0],r=e[d][1],n=e[d][2];for(var l=!0,s=0;s<i.length;s++)(!1&n||a>=n)&&Object.keys(o.O).every((function(e){return o.O[e](i[s])}))?i.splice(s--,1):(l=!1,n<a&&(a=n));if(l){e.splice(d--,1);var u=r();void 0!==u&&(t=u)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[i,r,n]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var i in t)o.o(t,i)&&!o.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){o.f={},o.e=function(e){return Promise.all(Object.keys(o.f).reduce((function(t,i){return o.f[i](e,t),t}),[]))}}(),function(){o.u=function(e){return"js/"+e+"-legacy."+{126:"9c3e3a31",139:"140c6dcd",576:"73fdbe6a",1039:"c3098fd2",1393:"e8190495",1520:"c652116e",1621:"b5385e29",2312:"636cb33f",2490:"b7693e3f",2812:"7ea2697c",4074:"a0a4c9ea",4096:"101f94fe",4217:"f71ece98",4220:"a9161b68",4221:"1e8f2821",4530:"33ff299c",4753:"c190c700",4773:"59e338d1",4811:"29b824d9",5179:"4eff720f",5486:"dcc2e2a8",5627:"6fa47946",5730:"0485db6c",5880:"6b8b5aea",6005:"63dfa297",6078:"8ba29022",6093:"d14fd40c",6108:"6983e7ec",6338:"8c44b7ad",6382:"cb6b36b1",6561:"3ad8c06a",6642:"e70007cd",6805:"5cff50d6",7733:"54e1c2ca",7961:"4a91c401",8165:"30afa585",8180:"1f656736",8183:"8ddab935",8775:"f46a8a5f",8908:"9fd96eef",8990:"497433d8",9098:"b63f1473",9255:"5ced7348",9354:"22df58b9",9371:"fd01e5c7",9378:"4d7ec003",9487:"1737ab45",9541:"ef937384",9622:"2ee41efc",9776:"3fbfb9db",9900:"ae028487"}[e]+".js"}}(),function(){o.miniCssF=function(e){return"css/"+e+"."+{139:"4e9266b7",1393:"18a937ee",1520:"1d408035",2312:"bfc81ced",2490:"b8a61edd",4221:"03481ef2",4530:"f1e392d8",5627:"03481ef2",6093:"558cade1",6382:"ba27bc3d",6805:"924f449a",7733:"e206a71a",8180:"f1e392d8",8183:"cc4e457d",8908:"80bc1e7a",9098:"767f41e5",9354:"2c5954be",9487:"6272e955",9622:"e373af08"}[e]+".css"}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="Tezkel:";o.l=function(i,r,n,a){if(e[i])e[i].push(r);else{var l,s;if(void 0!==n)for(var u=document.getElementsByTagName("script"),d=0;d<u.length;d++){var c=u[d];if(c.getAttribute("src")==i||c.getAttribute("data-webpack")==t+n){l=c;break}}l||(s=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,o.nc&&l.setAttribute("nonce",o.nc),l.setAttribute("data-webpack",t+n),l.src=i),e[i]=[r];var m=function(t,o){l.onerror=l.onload=null,clearTimeout(p);var r=e[i];if(delete e[i],l.parentNode&&l.parentNode.removeChild(l),r&&r.forEach((function(e){return e(o)})),t)return t(o)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=m.bind(null,l.onerror),l.onload=m.bind(null,l.onload),s&&document.head.appendChild(l)}}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){o.p="/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,o,i,r){var n=document.createElement("link");n.rel="stylesheet",n.type="text/css";var a=function(o){if(n.onerror=n.onload=null,"load"===o.type)i();else{var a=o&&("load"===o.type?"missing":o.type),l=o&&o.target&&o.target.href||t,s=new Error("Loading CSS chunk "+e+" failed.\n("+l+")");s.code="CSS_CHUNK_LOAD_FAILED",s.type=a,s.request=l,n.parentNode&&n.parentNode.removeChild(n),r(s)}};return n.onerror=n.onload=a,n.href=t,o?o.parentNode.insertBefore(n,o.nextSibling):document.head.appendChild(n),n},t=function(e,t){for(var o=document.getElementsByTagName("link"),i=0;i<o.length;i++){var r=o[i],n=r.getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(n===e||n===t))return r}var a=document.getElementsByTagName("style");for(i=0;i<a.length;i++){r=a[i],n=r.getAttribute("data-href");if(n===e||n===t)return r}},i=function(i){return new Promise((function(r,n){var a=o.miniCssF(i),l=o.p+a;if(t(a,l))return r();e(i,l,null,r,n)}))},r={2143:0};o.f.miniCss=function(e,t){var o={139:1,1393:1,1520:1,2312:1,2490:1,4221:1,4530:1,5627:1,6093:1,6382:1,6805:1,7733:1,8180:1,8183:1,8908:1,9098:1,9354:1,9487:1,9622:1};r[e]?t.push(r[e]):0!==r[e]&&o[e]&&t.push(r[e]=i(e).then((function(){r[e]=0}),(function(t){throw delete r[e],t})))}}}(),function(){var e={2143:0};o.f.j=function(t,i){var r=o.o(e,t)?e[t]:void 0;if(0!==r)if(r)i.push(r[2]);else{var n=new Promise((function(o,i){r=e[t]=[o,i]}));i.push(r[2]=n);var a=o.p+o.u(t),l=new Error,s=function(i){if(o.o(e,t)&&(r=e[t],0!==r&&(e[t]=void 0),r)){var n=i&&("load"===i.type?"missing":i.type),a=i&&i.target&&i.target.src;l.message="Loading chunk "+t+" failed.\n("+n+": "+a+")",l.name="ChunkLoadError",l.type=n,l.request=a,r[1](l)}};o.l(a,s,"chunk-"+t,t)}},o.O.j=function(t){return 0===e[t]};var t=function(t,i){var r,n,a=i[0],l=i[1],s=i[2],u=0;if(a.some((function(t){return 0!==e[t]}))){for(r in l)o.o(l,r)&&(o.m[r]=l[r]);if(s)var d=s(o)}for(t&&t(i);u<a.length;u++)n=a[u],o.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return o.O(d)},i=self["webpackChunkTezkel"]=self["webpackChunkTezkel"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=o.O(void 0,[4998],(function(){return o(183)}));i=o.O(i)})();
//# sourceMappingURL=app-legacy.730e840d.js.map