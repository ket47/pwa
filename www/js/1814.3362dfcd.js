"use strict";(self["webpackChunktezkel"]=self["webpackChunktezkel"]||[]).push([[1814],{1814:function(t,e,i){i.r(e),i.d(e,{default:function(){return h}});var a=i(641),n=i(33);function s(t,e,i,s,r,o){const f=(0,a.g2)("ion-icon"),l=(0,a.g2)("ion-label"),u=(0,a.g2)("ion-item"),c=(0,a.g2)("ion-list"),d=(0,a.g2)("base-layout");return(0,a.uX)(),(0,a.Wv)(d,{pageDefaultBackLink:"/user","page-title":"Список тарифов"},{default:(0,a.k6)(()=>[(0,a.bF)(c,null,{default:(0,a.k6)(()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.tariffList,e=>((0,a.uX)(),(0,a.Wv)(u,{key:e.tariff_id,detail:"",button:"",onClick:i=>t.$go(`/user/admin-tariff-edit-${e.tariff_id}`)},{default:(0,a.k6)(()=>[(0,a.bF)(f,{icon:s.briefcaseOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,a.bF)(l,null,{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.tariff_name),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),(0,a.bF)(u,{detail:"",button:"",onClick:e[0]||(e[0]=t=>o.itemCreate())},{default:(0,a.k6)(()=>[(0,a.bF)(f,{icon:s.addOutline,slot:"start"},null,8,["icon"]),(0,a.bF)(l,null,{default:(0,a.k6)(()=>e[1]||(e[1]=[(0,a.eW)("Добавить тариф")])),_:1,__:[1]})]),_:1})]),_:1})]),_:1})}var r=i(5480),o=i(5634),f=i(2311),l=i.n(f),u={components:{IonItem:o.uz,IonLabel:o.he,IonList:o.nf,IonIcon:o.iq},setup(){return{briefcaseOutline:r.vOb,addOutline:r.EKF}},data(){return{tariffList:[]}},computed:{},methods:{async listLoad(){try{this.tariffList=await l().post(`${this.$heap.state.hostname}Admin/Tariff/listGet`)}catch{}},async itemCreate(){let t={tariff_name:"new tariff"};try{let e=await l().post(`${this.$heap.state.hostname}Admin/Tariff/itemCreate`,JSON.stringify(t));this.$go(`/user/admin-tariff-edit-${e}`)}catch(e){const t=e.responseJSON,i=t.messages.error;switch(i){case"forbidden":this.$flash("Не достаточно прав");break}return!1}},async itemDelete(t){if(!confirm("Вы уверены"))return;let e={tariff_id:t};try{await l().post(`${this.$heap.state.hostname}Admin/Tariff/itemDelete`,JSON.stringify(e)),this.listLoad()}catch(i){const t=i.responseJSON,e=t.messages.error;switch(e){case"forbidden":this.$flash("Не достаточно прав");break}}}},mounted(){this.listLoad()},ionViewDidEnter(){this.tariffList.length||this.listLoad()},ionViewDidLeave(){this.tariffList=[]}},c=i(6262);const d=(0,c.A)(u,[["render",s]]);var h=d}}]);
//# sourceMappingURL=1814.3362dfcd.js.map