{"version":3,"file":"js/738.40b2447d.js","mappings":"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","sources":["webpack://Tezkel/./src/views/UserSignUp.vue","webpack://Tezkel/./src/views/UserSignUp.vue?0e3d"],"sourcesContent":["<template>\r\n  <base-layout page-title=\"Регистрация нового пользователя\"  page-default-back-link=\"/home\">\r\n      <ion-card v-if=\"$heap.state.user.user_id>0\" style=\"background-color:var(--ion-color-success-tint)\">\r\n        <ion-card-header>\r\n          <ion-card-title color=\"primary\">\r\n            {{$heap.state.user.user_name}} {{$heap.state.user.user_surname}} {{$heap.state.user.user_middlename}}\r\n          </ion-card-title>\r\n        </ion-card-header>\r\n        <ion-card-content>\r\n          Вы уже вошли в систему с номером телефона <b>{{$heap.state.user.user_phone}}</b>\r\n        </ion-card-content>\r\n      </ion-card>\r\n      <ion-card v-else>\r\n        <ion-card-header>\r\n          <ion-card-title color=\"primary\">\r\n            Простая регистрация\r\n          </ion-card-title>\r\n        </ion-card-header>\r\n        <ion-card-content>\r\n          Для регистрации необходим только ваш номер мобильного телефона\r\n        </ion-card-content>\r\n      </ion-card>\r\n      \r\n      <form novalidate>\r\n        <ion-list>\r\n          <ion-item>\r\n            <ion-grid style=\"width:100%\">\r\n              <ion-row>\r\n                <ion-col size=\"5\">\r\n                  <ion-label position=\"stacked\" color=\"primary\">Код</ion-label>\r\n                  <ion-select :value=\"user_phone_prefix\">\r\n                    <ion-select-option value=\"7\" selected>+7 </ion-select-option>\r\n                  </ion-select>\r\n                </ion-col>\r\n                <ion-col size=\"7\">\r\n                  <ion-label position=\"stacked\" color=\"primary\">Мобильный телефон*</ion-label>\r\n                  <ion-input\r\n                    v-model=\"user_phone\"\r\n                    @ionChange=\"phoneFormat()\"\r\n                    name=\"phone\"\r\n                    type=\"tel\"\r\n                    inputmode=\"tel\"\r\n                    placeholder=\"(xxx)xxxxxxxxx\"\r\n                    required\r\n                  ></ion-input>\r\n                </ion-col>\r\n              </ion-row>\r\n            </ion-grid>\r\n            <ion-text color=\"danger\" slot=\"helper\">\r\n              <p v-show=\"!phoneValid && submitted == true\" padding-left>Неверный номер телефона</p>\r\n            </ion-text>\r\n          </ion-item>\r\n\r\n          <ion-item>\r\n            <ion-label position=\"stacked\" color=\"primary\">Пароль (Минимум 4 символа)*</ion-label>\r\n            <ion-input \r\n              v-model=\"user_pass\" \r\n              name=\"password\" \r\n              type=\"password\" \r\n              autocorrect=\"off\"\r\n              placeholder=\"Пароль (Минимум 4 символа)\"\r\n              required\r\n            ></ion-input>\r\n            <ion-text color=\"danger\" slot=\"helper\">\r\n              <p v-show=\"!passwordValid && submitted == true\" padding-left>Пароль должен содержать не менее 4 символов.</p>\r\n            </ion-text>\r\n          </ion-item>\r\n\r\n          <ion-item>\r\n            <ion-label position=\"stacked\" color=\"primary\">Повтор пароля*</ion-label>\r\n            <ion-input \r\n              v-model=\"user_pass_confirm\"\r\n              type=\"password\" \r\n              autocorrect=\"off\"\r\n              placeholder=\"Повтор пароля\"\r\n              required\r\n            ></ion-input>\r\n            <ion-text color=\"danger\" slot=\"helper\">\r\n              <p v-show=\"user_pass!=user_pass_confirm && submitted == true\" padding-left>Пароль не совпадает с подтверждением</p>\r\n            </ion-text>\r\n          </ion-item>\r\n\r\n          <ion-item>\r\n            <ion-label position=\"stacked\" color=\"primary\">Ваш псевдоним*</ion-label>\r\n            <ion-input \r\n              v-model=\"user_name\"\r\n              name=\"username\"\r\n              type=\"text\" \r\n              placeholder=\"как к вам обращаться?\"\r\n              required\r\n            ></ion-input>\r\n            <ion-text color=\"danger\" slot=\"helper\">\r\n              <p v-show=\"!usernameValid && submitted == true\" padding-left>Проверьте ваш псевдоним</p>\r\n            </ion-text>\r\n          </ion-item>\r\n\r\n          <ion-item>\r\n            <ion-label position=\"stacked\" color=\"primary\">Ваш е-маил (не обязательно)</ion-label>\r\n            <ion-input \r\n              v-model=\"user_email\"\r\n              name=\"email\"\r\n              type=\"email\" \r\n              placeholder=\"е-маил\"\r\n              required\r\n            ></ion-input>\r\n          </ion-item>\r\n        </ion-list>\r\n\r\n        <ion-row responsive-sm>\r\n          <ion-col>\r\n            <ion-button @click=\"onSubmit\" expand=\"block\">Зарегистрироваться</ion-button>\r\n          </ion-col>\r\n        </ion-row>\r\n        \r\n        <ion-row responsive-sm>\r\n          <ion-col>\r\n          <router-link to=\"/sign-in\">\r\n            <ion-button color=\"light\" expand=\"block\">Уже есть учетная запись?</ion-button>\r\n          </router-link>\r\n          </ion-col>\r\n        </ion-row>\r\n\r\n      </form>\r\n  </base-layout>\r\n</template>\r\n\r\n<script>\r\nimport { \r\n  IonGrid,\r\n  IonRow,\r\n  IonCol, \r\n  IonSelect, \r\n  IonSelectOption,\r\n  IonLabel,\r\n  IonInput,\r\n  IonItem,\r\n  IonText,\r\n  IonList,\r\n  IonButton,\r\n  IonCard,\r\n  IonCardHeader,\r\n  IonCardTitle,\r\n  IonCardContent,\r\n}                               from '@ionic/vue';\r\nimport User                     from '@/scripts/User.js'\r\nimport jQuery                   from \"jquery\";\r\n\r\nexport default  {\r\n  components: {\r\n  IonGrid,\r\n  IonRow,\r\n  IonCol, \r\n  IonSelect, \r\n  IonSelectOption,\r\n  IonLabel,\r\n  IonInput,\r\n  IonItem,\r\n  IonText,\r\n  IonList,\r\n  IonButton,\r\n  IonCard,\r\n  IonCardHeader,\r\n  IonCardTitle,\r\n  IonCardContent,\r\n  },\r\n  data(){\r\n    return {\r\n      submitted: false,\r\n      user_pass:null,\r\n      user_pass_confirm:null,\r\n      user_phone:null,\r\n      user_phone_prefix:'7',\r\n      user_name:null,\r\n      user_email:null\r\n    }\r\n  },\r\n  computed: {\r\n    phoneValid() {\r\n      return this.user_phone?.replace(/\\D/g,\"\").length == 10;\r\n    },\r\n    passwordValid() {\r\n      return this.user_pass?.length >= 4;\r\n    },\r\n    usernameValid() {\r\n      return this.user_name?.length > 0;\r\n    }\r\n  },\r\n  methods:{\r\n    async onSubmit() {\r\n      this.submitted = true;\r\n      if( this.user_pass!=this.user_pass_confirm || !this.phoneValid || !this.passwordValid || !this.usernameValid){\r\n        return\r\n      }\r\n      let requestData = {\r\n        user_phone: this.user_phone_prefix+this.user_phone,\r\n        user_pass: this.user_pass,\r\n        user_pass_confirm: this.user_pass_confirm,\r\n        user_name: this.user_name,\r\n        user_email:this.user_email\r\n      }\r\n      \r\n      try{\r\n        await User.signUp(requestData);\r\n        localStorage.signInData = JSON.stringify({user_phone: this.user_phone_prefix+this.user_phone,user_pass: this.user_pass});\r\n        this.phoneVerify()\r\n      } catch(err){\r\n        let exception_code='unknown';\r\n        try{\r\n          const invalid_field=Object.keys(JSON.parse(err.responseJSON.messages.error))[0]\r\n          const invalid_reason=Object.values(JSON.parse(err.responseJSON.messages.error))[0]\r\n          exception_code=invalid_field+'_'+invalid_reason\r\n        }catch{/** */}\r\n        \r\n        switch(exception_code){\r\n          case 'user_phone_notunique':\r\n            this.$flash(\"Пользователь с таким телефоном уже зарегистрирован\");\r\n            break;\r\n          case 'user_phone_required':\r\n          case 'user_phone_invalid':\r\n          case 'user_phone_short':\r\n            this.$flash(\"Проверьте номер телефона\");\r\n            break;\r\n          case 'user_name_required':\r\n          case 'user_name_short':\r\n            this.$flash(\"Проверьте ваш псевдоним\");\r\n            break;\r\n          case 'user_email_invalid':\r\n            this.$flash(\"Проверьте ваш е-маил\");\r\n            break;\r\n          case 'user_email_notunique':\r\n            this.$flash(\"Такой е-маил уже используется\");\r\n            break;\r\n          case 'user_pass_required':\r\n            this.$flash(\"Пароль обязателен для заполнения\");\r\n            break;\r\n          case 'user_pass_short':\r\n            this.$flash(\"Пароль слишком короткий\");\r\n            break;\r\n          case 'user_pass_notmatches':\r\n            this.$flash(\"Пароль не совпадает с подтверждением\");\r\n            break;\r\n          default:\r\n            this.$flash(\"Не удалось войти зарегистрироваться\");\r\n        }\r\n      }\r\n      \r\n    },\r\n    phoneFormat(){\r\n      if( !this.user_phone ){\r\n        this.user_phone='';\r\n      }\r\n      try{\r\n        let user_phone=this.user_phone.replace(/\\D/g,\"\")\r\n        if(user_phone.length>10){\r\n          user_phone=user_phone.substring(user_phone.length-10)\r\n        }\r\n        this.user_phone=user_phone\r\n      } catch{/** */}\r\n    },\r\n    async phoneVerify(){\r\n      let requestData = {\r\n        user_phone: this.user_phone_prefix+this.user_phone\r\n      }\r\n      try{\r\n        this.$router.push({name:'UserVerifyPhone',params:requestData})\r\n      } catch{\r\n        this.$flash(\"Не удалось выслать смс с подтверждением\")\r\n      }\r\n    },\r\n  }\r\n}\r\n</script>","import { render } from \"./UserSignUp.vue?vue&type=template&id=7e07b123\"\nimport script from \"./UserSignUp.vue?vue&type=script&lang=js\"\nexport * from \"./UserSignUp.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"W:\\\\Ionic\\\\Tezkel\\\\blank\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["novalidate","$heap","state","user","user_id","style","color","user_name","user_surname","user_middlename","user_phone","size","position","value","user_phone_prefix","selected","phoneFormat","name","type","inputmode","placeholder","required","slot","phoneValid","submitted","user_pass","autocorrect","passwordValid","user_pass_confirm","usernameValid","user_email","onSubmit","expand","to","components","IonGrid","IonRow","IonCol","IonSelect","IonSelectOption","IonLabel","IonInput","IonItem","IonText","IonList","IonButton","IonCard","IonCardHeader","IonCardTitle","IonCardContent","data","computed","this","replace","length","methods","async","requestData","User","localStorage","signInData","JSON","stringify","phoneVerify","err","exception_code","invalid_field","Object","keys","parse","responseJSON","messages","error","invalid_reason","values","$flash","substring","$router","push","params","__exports__","render"],"sourceRoot":""}