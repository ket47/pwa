{"version":3,"file":"js/3620.1147e1b0.js","mappings":"wdACEA,EAAAA,EAAAA,IA2BcC,EAAA,CA3BDC,UAAU,0BAA0BC,oBAAoB,S,kBACnE,IAWW,EAXXC,EAAAA,EAAAA,IAWWC,EAAA,M,iBAVP,IAIW,EAJXD,EAAAA,EAAAA,IAIWE,EAAA,M,iBAHP,IAAgD,EAAhDF,EAAAA,EAAAA,IAAgDG,EAAA,CAAtCC,KAAK,QAASC,KAAMC,EAAAC,iB,kBAC9BP,EAAAA,EAAAA,IAA0EQ,EAAA,CAA/DC,SAAS,UAAUC,MAAM,W,kBAAU,IAAgBC,EAAA,KAAAA,EAAA,K,QAAhB,uB,cAC9CX,EAAAA,EAAAA,IAAqEY,EAAA,C,WAAjDC,EAAAC,KAAKC,W,qCAALF,EAAAC,KAAKC,WAAUC,GAAEC,YAAY,oB,gCAErDjB,EAAAA,EAAAA,IAIWE,EAAA,M,iBAHP,IAA4C,EAA5CF,EAAAA,EAAAA,IAA4CG,EAAA,CAAlCC,KAAK,QAASC,KAAMC,EAAAY,a,kBAC9BlB,EAAAA,EAAAA,IAAwEQ,EAAA,CAA7DC,SAAS,UAAUC,MAAM,W,kBAAU,IAAcC,EAAA,KAAAA,EAAA,K,QAAd,qB,cAC9CX,EAAAA,EAAAA,IAAkEY,EAAA,C,WAA9CC,EAAAC,KAAKK,U,qCAALN,EAAAC,KAAKK,UAASH,GAAEC,YAAY,kB,wCAGxDjB,EAAAA,EAAAA,IAAyFoB,EAAA,CAA9EC,OAAQR,EAAAQ,O,WAAiBR,EAAAC,KAAKQ,a,qCAALT,EAAAC,KAAKQ,aAAYN,GAAGO,OAAQV,EAAAW,c,0CAChExB,EAAAA,EAAAA,IAYWyB,EAAA,CAZDC,MAAA,gBAAkB,C,iBACxB,IAUU,EAVV1B,EAAAA,EAAAA,IAUU2B,EAAA,M,iBATN,IAEU,EAFV3B,EAAAA,EAAAA,IAEU4B,EAAA,M,iBADN,IAAuF,EAAvF5B,EAAAA,EAAAA,IAAuF6B,EAAA,CAA1EC,QAAKnB,EAAA,KAAAA,EAAA,GAAAK,GAAEe,EAAAC,IAAI,oBAAoBtB,MAAM,S,kBAAQ,IAAgBC,EAAA,KAAAA,EAAA,K,QAAhB,uB,sBAE9DX,EAAAA,EAAAA,IAEU4B,EAAA,CAFDF,MAAA,wBAAwB,C,iBAC7B,IAAqE,EAArE1B,EAAAA,EAAAA,IAAqE6B,EAAA,CAAxDC,QAAKnB,EAAA,KAAAA,EAAA,GAAAK,GAAEiB,EAAAC,cAAcxB,MAAM,U,kBAAS,IAAOC,EAAA,KAAAA,EAAA,K,QAAP,c,sBAErDX,EAAAA,EAAAA,IAEU4B,EAAA,CAFDF,MAAA,wBAAwB,C,iBAC7B,IAAsD,EAAtD1B,EAAAA,EAAAA,IAAsD6B,EAAA,CAAzCC,QAAKnB,EAAA,KAAAA,EAAA,GAAAK,GAAEiB,EAAAE,a,kBAAY,IAASxB,EAAA,MAAAA,EAAA,M,QAAT,gB,mJA6BhD,GACEyB,WAAY,CACVC,SAAQ,KACRC,QAAO,KACPC,QAAO,KACPC,QAAO,KACPC,SAAQ,KACRC,UAAS,KACTC,QAAO,KACPC,OAAM,KACNC,OAAM,KACNC,SAAUC,IAAAA,WAEZC,KAAAA,GACE,MAAO,CAAEC,oBAAmB,MAAE/B,YAAW,MAAEX,gBAAeA,EAAAA,IAC5D,EACA2C,IAAAA,GACE,MAAO,CACL7B,OAAQ8B,IACRC,QAAQ,EACRtC,KAAM,CACFK,UAAU,GACVJ,WAAW,GACXO,aAAa,IAEjBE,aAAc,CACZ6B,SAAU,MAIhB,EACAC,OAAAA,G,EAGAC,eAAAA,GACOC,EAAAA,EAAKC,WACJC,KAAKN,QAAQM,KAAKC,OAAOC,OAAOC,IAAI,EACjCH,KAAKN,QAAQ,EACdM,KAAKI,UAEHJ,KAAK5C,KAAK,CACRK,UAAU,GACVJ,WAAW,GACXO,aAAa,MAInBoC,KAAKK,OAAO,gCACZL,KAAK1B,IAAI,YAEjB,EACAgC,QAAQ,CACJ,aAAMF,GACF,MAAMV,EAAQM,KAAKN,QACnB,IACEM,KAAK5C,WAAWmD,IAAAA,KAAYP,KAAKQ,MAAMC,MAAMC,SAAS,eAAe,CAAChB,WACxE,CAAC,MAAY,CACjB,EACA,cAAMjB,GACF,MAAMkC,EAAQ,CACVlD,UAAUuC,KAAK5C,KAAKK,UACpBJ,WAAW2C,KAAK5C,KAAKC,WACrBO,aAAaoC,KAAK5C,KAAKQ,cAE3B,IACKoC,KAAKN,QAAQ,GACZiB,EAAQjB,QAAQM,KAAKN,cACfa,IAAAA,KAAYP,KAAKQ,MAAMC,MAAMC,SAAS,kBAAkBE,KAAKC,UAAUF,IAC7EX,KAAKK,OAAO,uBAEZL,KAAKN,cAAca,IAAAA,KAAYP,KAAKQ,MAAMC,MAAMC,SAAS,kBAAkBE,KAAKC,UAAUF,GAEhG,CAAE,MAAY,CAClB,EACA,gBAAMnC,GACF,IAAIsC,QAAQ,qBAAqBd,KAAK5C,KAAKC,gBACvC,OAEJ,MAAMqC,EAAQM,KAAKN,QACnB,UACUa,IAAAA,KAAYP,KAAKQ,MAAMC,MAAMC,SAAS,kBAAkB,CAAChB,YAC/DM,KAAKK,OAAO,oBACZL,KAAK1B,IAAI,kBACb,CAAE,MAAY,CAClB,I,UCpIN,MAAMyC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O","sources":["webpack://tezkel/./src/views/TextPageEdit.vue","webpack://tezkel/./src/views/TextPageEdit.vue?fc93"],"sourcesContent":["<template>\r\n  <base-layout pageTitle=\"Редактирование страницы\" pageDefaultBackLink=\"/user\">\r\n    <ion-list>\r\n        <ion-item>\r\n            <ion-icon slot=\"start\" :icon=\"bookmarkOutline\"/>\r\n            <ion-label position=\"stacked\" color=\"primary\">Заголовок статьи</ion-label>\r\n            <ion-input v-model=\"page.page_title\" placeholder=\"Заголовок статьи\"/>\r\n        </ion-item>\r\n        <ion-item>\r\n            <ion-icon slot=\"start\" :icon=\"codeOutline\"/>\r\n            <ion-label position=\"stacked\" color=\"primary\">Код для ссылки</ion-label>\r\n            <ion-input v-model=\"page.page_name\" placeholder=\"Код для ссылки\"/>\r\n        </ion-item>\r\n    </ion-list>\r\n    <ckeditor :editor=\"editor\" v-model=\"page.page_content\" :config=\"editorConfig\"></ckeditor>\r\n    <ion-grid style=\"width:100%\">\r\n        <ion-row>\r\n            <ion-col>\r\n                <ion-button @click=\"$go('/user/text-list')\" color=\"light\">К списку страниц</ion-button>\r\n            </ion-col>\r\n            <ion-col style=\"text-align:right\">\r\n                <ion-button @click=\"itemDelete()\" color=\"danger\">Удалить</ion-button>\r\n            </ion-col>\r\n            <ion-col style=\"text-align:right\">\r\n                <ion-button @click=\"itemSave()\">Сохранить</ion-button>\r\n            </ion-col>\r\n        </ion-row>\r\n    </ion-grid>\r\n  </base-layout>\r\n</template>\r\n\r\n<script>\r\nimport CKEditor from \"@ckeditor/ckeditor5-vue\";\r\nimport ClassicEditor from \"@ckeditor/ckeditor5-build-classic\";\r\nimport \"@ckeditor/ckeditor5-build-classic/build/translations/ru\";\r\n//import SourceEditing from '@ckeditor/ckeditor5-source-editing/src/sourceediting';\r\nimport {documentTextOutline,codeOutline,bookmarkOutline} from 'ionicons/icons';\r\n\r\nimport { \r\n    IonLabel,\r\n    IonIcon,\r\n    IonList,\r\n    IonItem,\r\n    IonInput,\r\n    IonButton,\r\n    IonGrid,\r\n    IonRow,\r\n    IonCol,\r\n\r\n}               from '@ionic/vue'\r\nimport User     from '@/scripts/User.js';\r\nimport jQuery   from \"jquery\";\r\n\r\nexport default {\r\n  components: {     \r\n    IonLabel,\r\n    IonIcon,\r\n    IonList,\r\n    IonItem,\r\n    IonInput,\r\n    IonButton,\r\n    IonGrid,\r\n    IonRow,\r\n    IonCol,\r\n    ckeditor: CKEditor.component \r\n  },\r\n  setup() {\r\n    return { documentTextOutline, codeOutline, bookmarkOutline };\r\n  },\r\n  data() {\r\n    return {\r\n      editor: ClassicEditor,\r\n      page_id:0,\r\n      page: {\r\n          page_name:'',\r\n          page_title:'',\r\n          page_content:''\r\n      },\r\n      editorConfig: {\r\n        language: \"ru\",\r\n        //plugins: [ SourceEditing ],\r\n      },\r\n    };\r\n  },\r\n  created(){\r\n//\r\n  },\r\n  ionViewDidEnter() {\r\n      if(User.isAdmin()){\r\n          this.page_id=this.$route.params.id??0\r\n          if(this.page_id>0){\r\n            this.itemGet()\r\n          } else {\r\n              this.page={\r\n                page_name:'',\r\n                page_title:'',\r\n                page_content:''\r\n              };\r\n          }\r\n      } else {\r\n          this.$flash('Страница для администраторов')\r\n          this.$go(\"/catalog\")\r\n      }\r\n  },\r\n  methods:{\r\n      async itemGet(){\r\n          const page_id=this.page_id\r\n          try{\r\n            this.page=await jQuery.post(this.$heap.state.hostname+'Page/itemGet',{page_id})\r\n          }catch{/** */}\r\n      },\r\n      async itemSave(){\r\n          const request={\r\n              page_name:this.page.page_name,\r\n              page_title:this.page.page_title,\r\n              page_content:this.page.page_content\r\n          }\r\n          try{\r\n            if(this.page_id>0){\r\n                request.page_id=this.page_id\r\n                await jQuery.post(this.$heap.state.hostname+'Page/itemUpdate',JSON.stringify(request))\r\n                this.$flash(\"Страница сохранена\")\r\n            } else {\r\n                this.page_id=await jQuery.post(this.$heap.state.hostname+'Page/itemCreate',JSON.stringify(request))\r\n            }\r\n          } catch{/** */}\r\n      },\r\n      async itemDelete(){\r\n          if(!confirm(`Удалить страницу \"${this.page.page_title}\"?`)){\r\n              return\r\n          }\r\n          const page_id=this.page_id\r\n          try{\r\n              await jQuery.post(this.$heap.state.hostname+'Page/itemDelete',{page_id})\r\n              this.$flash(\"Страница удалена\")\r\n              this.$go('/user/text-list')\r\n          } catch{/** */}\r\n      }\r\n  }\r\n};\r\n</script>\r\n","import { render } from \"./TextPageEdit.vue?vue&type=template&id=748f5a68\"\nimport script from \"./TextPageEdit.vue?vue&type=script&lang=js\"\nexport * from \"./TextPageEdit.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createBlock","_component_base_layout","pageTitle","pageDefaultBackLink","_createVNode","_component_ion_list","_component_ion_item","_component_ion_icon","slot","icon","$setup","bookmarkOutline","_component_ion_label","position","color","_cache","_component_ion_input","$data","page","page_title","$event","placeholder","codeOutline","page_name","_component_ckeditor","editor","page_content","config","editorConfig","_component_ion_grid","style","_component_ion_row","_component_ion_col","_component_ion_button","onClick","_ctx","$go","$options","itemDelete","itemSave","components","IonLabel","IonIcon","IonList","IonItem","IonInput","IonButton","IonGrid","IonRow","IonCol","ckeditor","CKEditor","setup","documentTextOutline","data","ClassicEditor","page_id","language","created","ionViewDidEnter","User","isAdmin","this","$route","params","id","itemGet","$flash","methods","jQuery","$heap","state","hostname","request","JSON","stringify","confirm","__exports__","render"],"sourceRoot":""}