"use strict";(self["webpackChunktezkel"]=self["webpackChunktezkel"]||[]).push([[1847],{4405:function(e,t,n){n(4916),n(5306);var o=n(2008),r={deliveryCalculate(e){if(!e.locations||!e.locations[0]||!e.locations[0].distance)return null;var t=e.locations[0].distance,n=e.store_time_preparation||0;return r.deliveryTimeCalculate(t,n)},deliveryTimeCalculate(e,t){var n;t=parseInt(null!==(n=t)&&void 0!==n?n:o.Z.getters.settings.delivery.timePreparationDefault);var r=parseInt(o.Z.getters.settings.delivery.timeDelta),i=parseInt(o.Z.getters.settings.delivery.speed),a=5*Math.round(e/i*60/5)+t,l=a>r?a-r:a,s=l+r;return{time:a,timeMin:l,timeMax:s}},render(e,t){for(var n in t)e=e.replace(`{{${n}}}`,t[n]);return e=e.replace(/{{\.}}/,"-"),e}};t["Z"]=r},6181:function(e,t,n){n.d(t,{Z:function(){return y}});var o=n(6252),r=n(3577),i=(0,o.Uk)(" ◉ "),a={key:0},l=(0,o.Uk)(" ◉ "),s=(0,o.Uk)("Временно не работает"),u={key:1},c=(0,o.Uk)(" ◉ "),d={key:2},m=(0,o.Uk)(" ◉ "),f=(0,o.Uk)("Закрыт");function p(e,t,n,p,_,w){var v=(0,o.up)("ion-text"),h=(0,o.up)("ion-chip");return 1==n.storeItem.is_opened?((0,o.wg)(),(0,o.j4)(h,{key:0,color:"medium"},{default:(0,o.w5)((function(){return[(0,o._)("label",null,[(0,o.Wm)(v,{color:"success"},{default:(0,o.w5)((function(){return[i]})),_:1}),(0,o.Uk)("Открыт до "+(0,r.zw)(n.storeItem.store_time_closes)+":00",1)])]})),_:1})):((0,o.wg)(),(0,o.j4)(h,{key:1,color:"medium"},{default:(0,o.w5)((function(){return[0==n.storeItem.is_working?((0,o.wg)(),(0,o.iD)("label",a,[(0,o.Wm)(v,{color:"medium"},{default:(0,o.w5)((function(){return[l]})),_:1}),s])):n.storeItem.store_next_time_opens>0?((0,o.wg)(),(0,o.iD)("label",u,[(0,o.Wm)(v,{color:"danger"},{default:(0,o.w5)((function(){return[c]})),_:1}),(0,o.Uk)("Закрыт до "+(0,r.zw)(n.storeItem.store_next_time_opens)+":00",1)])):((0,o.wg)(),(0,o.iD)("label",d,[(0,o.Wm)(v,{color:"danger"},{default:(0,o.w5)((function(){return[m]})),_:1}),f]))]})),_:1}))}var _=n(8292),w=n(8903),v={props:["storeItem"],components:{IonChip:_.hM,IonText:_.yW},setup(){return{ellipse:w.Hpm}}},h=n(3744);const g=(0,h.Z)(v,[["render",p]]);var y=g},9064:function(e,t,n){n.d(t,{Z:function(){return Z}});var o=n(6252),r=n(3577),i={class:"delivery-adress",style:{"font-size":"1em"}},a={class:"center"},l=(0,o.Uk)("Адрес доставки заказа"),s={class:"center"},u={key:0,class:"delivery-time"},c=(0,o.Uk)("мин"),d=(0,o.Uk)(" Выбрать адрес доставки ");function m(e,t,n,m,f,p){var _=(0,o.up)("ion-text"),w=(0,o.up)("ion-icon"),v=(0,o.up)("ion-note"),h=(0,o.up)("ion-label"),g=(0,o.up)("ion-item"),y=(0,o.up)("ion-textarea");return(0,o.wg)(),(0,o.iD)(o.HY,null,[p.isMainLocationSet?((0,o.wg)(),(0,o.iD)("div",{key:0,onClick:t[0]||(t[0]=function(e){return p.selectDeliveryAddress()}),class:"selector"},[(0,o._)("div",i,[(0,o._)("div",a,[(0,o.Wm)(_,{size:"small",color:"medium"},{default:(0,o.w5)((function(){return[l]})),_:1}),(0,o.Wm)(w,{icon:m.chevronDownOutline,color:"medium"},null,8,["icon"])]),(0,o._)("div",s,[(0,o.Wm)(w,{slot:"start",color:"secondary",icon:m.location},null,8,["icon"]),(0,o.Wm)(_,{color:"dark"},{default:(0,o.w5)((function(){var t,n;return[(0,o._)("b",null,(0,r.zw)(null===(t=e.$heap.state.user)||void 0===t||null===(n=t.location_main)||void 0===n?void 0:n.location_address),1)]})),_:1})])]),n.deliveryTime?((0,o.wg)(),(0,o.iD)("div",u,[(0,o.Wm)(_,{style:{"font-size":"24px",color:"var(--ion-color-secondary-contrast)"}},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,r.zw)(n.deliveryTime.time),1)]})),_:1}),(0,o.Wm)(v,{style:{"font-size":"10px",color:"var(--ion-color-secondary-contrast)"}},{default:(0,o.w5)((function(){return[c]})),_:1})])):(0,o.kq)("",!0)])):((0,o.wg)(),(0,o.j4)(g,{key:1,detail:"",button:"",onClick:t[1]||(t[1]=function(e){return p.selectDeliveryAddress()}),class:"selector"},{default:(0,o.w5)((function(){return[(0,o.Wm)(w,{slot:"start",style:{color:"var(--ion-color-primary)"},icon:m.location},null,8,["icon"]),(0,o.Wm)(h,null,{default:(0,o.w5)((function(){return[d]})),_:1})]})),_:1})),n.showComment&&e.$heap.state.user.location_main?((0,o.wg)(),(0,o.j4)(g,{key:2},{default:(0,o.w5)((function(){return[(0,o.Wm)(y,{rows:"1",placeholder:"комментарий к адресу",onChange:t[2]||(t[2]=function(e){return p.locationCommentChanged()}),modelValue:e.$heap.state.user.location_main.location_comment,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.$heap.state.user.location_main.location_comment=t})},null,8,["modelValue"])]})),_:1})):(0,o.kq)("",!0)],64)}var f=n(6835),p=n(8534),_=(n(8862),n(8292)),w=n(8903),v=n(2008),h=n(6488),g=n(9042),y=n(9755),k=n.n(y),I={props:["deliveryTime","showComment"],components:{IonIcon:_.gu,IonTextarea:_.g2,IonText:_.yW,IonNote:_.uN,IonLabel:_.Q$,IonItem:_.Ie},setup(){return{location:w.xhW,chevronDownOutline:w.Y$3}},data(){return{location_main:v.Z.state.user.location_main}},created(){var e=this;g.Z.on("userMainLocationSet",(function(t){e.location_main=t})),g.Z.on("userGet",(function(t){e.location_main=t.location_main}))},methods:{selectDeliveryAddress(){h.Z.push("/user/user-addresses")},locationCommentChanged(){var e=this;return(0,p.Z)((0,f.Z)().mark((function t(){var n;return(0,f.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:n={location_id:v.Z.state.user.location_main.location_id,location_comment:v.Z.state.user.location_main.location_comment},k().post(e.$heap.state.hostname+"Location/itemUpdate",JSON.stringify(n));case 2:case"end":return t.stop()}}),t)})))()}},computed:{isSignedIn(){return v.Z.state.user.user_id&&v.Z.state.user.user_id>-1},isMainLocationSet(){return this.location_main?1:0}}},W=n(3744);const b=(0,W.Z)(I,[["render",m],["__scopeId","data-v-48384b7b"]]);var Z=b},1847:function(e,t,n){n.r(t),n.d(t,{default:function(){return G}});var o=n(6252);function r(e,t,n,r,i,a){var l=(0,o.up)("home-slider"),s=(0,o.up)("user-address-widget"),u=(0,o.up)("store-list"),c=(0,o.up)("base-layout");return(0,o.wg)(),(0,o.j4)(c,{pageLogo:r.mainLogo},{default:(0,o.w5)((function(){return[(0,o.Wm)(l),(0,o.Wm)(s,{deliveryTime:i.primaryDeliveryTime},null,8,["deliveryTime"]),(0,o.Wm)(u,{ref:"homeStoreList"},null,512)]})),_:1},8,["pageLogo"])}n(2526),n(1817);var i=n(3577),a={class:"home_slide"},l={style:{"font-size":"3em"}};function s(e,t,n,r,s,u){var c=(0,o.up)("ion-img"),d=(0,o.up)("swiper-slide"),m=(0,o.up)("swiper");return(0,o.wg)(),(0,o.j4)(m,{modules:e.modules,autoplay:{delay:6e3,disableOnInteraction:!1},loop:!0,class:"home-swiper"},{default:(0,o.w5)((function(){return[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.home_slides,(function(e){return(0,o.wg)(),(0,o.j4)(d,{key:e.title,style:(0,i.j5)(`background-color:${e.color};`)},{default:(0,o.w5)((function(){return[(0,o.Wm)(c,{src:e.image,class:"home_slide_img",alt:e.alt},null,8,["src","alt"]),(0,o._)("div",a,[(0,o._)("h1",l,(0,i.zw)(e.title),1),(0,o._)("p",null,(0,i.zw)(e.description),1)])]})),_:2},1032,["style"])})),128))]})),_:1},8,["modules"])}var u=n(9755),c=n.n(u),d=n(702),m=n(3181),f=n(8292),p=(0,o.aZ)({components:{Swiper:m.t,SwiperSlide:m.o,IonImg:f.Xz},setup(){return{modules:[d.pt]}},data(){return{home_slides:[],error:""}},created(){this.getSlideList()},methods:{getSlideList(){var e=this;c().get("/assets/homeslider/conf.json").done((function(t){e.home_slides=t.slides})).fail((function(t){e.error=t.responseJSON.messages.error}))}}}),_=n(3744);const w=(0,_.Z)(p,[["render",s],["__scopeId","data-v-40079abe"]]);var v=w,h=function(e){return(0,o.dD)("data-v-3397fa4c"),e=e(),(0,o.Cn)(),e},g=h((function(){return(0,o._)("div",{class:"crop-to-fit",style:{"background-color":"var(--ion-color-light)"}},null,-1)})),y=(0,o.Uk)("Вне зоны обслуживания"),k=(0,o.Uk)(" Поблизости к адресу "),I=(0,o.Uk)(", который вы выбрали, пока нет нет подходящих ресторанов и магазинов. Попробуйте другой адрес. "),W=h((function(){return(0,o._)("h5",{class:"section-title"},"Магазины и рестораны",-1)})),b={class:"crop-to-fit"};function Z(e,t,n,r,a,l){var s=(0,o.up)("ion-skeleton-text"),u=(0,o.up)("ion-chip"),c=(0,o.up)("ion-item"),d=(0,o.up)("ion-card"),m=(0,o.up)("ion-list"),f=(0,o.up)("ion-card-title"),p=(0,o.up)("ion-card-header"),_=(0,o.up)("ion-card-content"),w=(0,o.up)("ion-col"),v=(0,o.up)("ion-icon"),h=(0,o.up)("ion-row"),Z=(0,o.up)("ion-grid"),C=(0,o.up)("ion-img"),L=(0,o.up)("router-link"),x=(0,o.up)("store-opened-indicator");return(0,o.wg)(),(0,o.iD)(o.HY,null,[a.storeList?0==a.storeList.length?((0,o.wg)(),(0,o.j4)(d,{key:1,color:"warning"},{default:(0,o.w5)((function(){return[(0,o.Wm)(p,null,{default:(0,o.w5)((function(){return[(0,o.Wm)(f,null,{default:(0,o.w5)((function(){return[y]})),_:1})]})),_:1}),(0,o.Wm)(_,null,{default:(0,o.w5)((function(){var t;return[k,(0,o._)("b",null,(0,i.zw)(null!==(t=e.$heap.state.user.location_main.location_address)&&void 0!==t?t:"доставки заказа"),1),I]})),_:1})]})),_:1})):(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(m,{key:0,class:"store-list"},{default:(0,o.w5)((function(){return[((0,o.wg)(),(0,o.iD)(o.HY,null,(0,o.Ko)([1,1,1,1],(function(e){return(0,o.Wm)(d,{button:"",key:e},{default:(0,o.w5)((function(){return[g,(0,o.Wm)(u,{color:"medium"},{default:(0,o.w5)((function(){return[(0,o.Wm)(s,{style:{width:"130px"},animated:""})]})),_:1}),(0,o.Wm)(u,{color:"primary"},{default:(0,o.w5)((function(){return[(0,o.Wm)(s,{style:{width:"100px"},animated:""})]})),_:1}),(0,o.Wm)(c,{lines:"none"},{default:(0,o.w5)((function(){return[(0,o.Wm)(s,{style:{width:"70%",height:"1.5em"},animated:""})]})),_:1})]})),_:2},1024)})),64))]})),_:1})),a.storeList&&a.storeList.length>0?((0,o.wg)(),(0,o.j4)(Z,{key:2,class:"ion-justify-content-between ion-align-items-center",style:{padding:"0 16px"}},{default:(0,o.w5)((function(){return[(0,o.Wm)(h,null,{default:(0,o.w5)((function(){return[(0,o.Wm)(w,{size:"10"},{default:(0,o.w5)((function(){return[W]})),_:1}),(0,o.Wm)(w,{size:"2",class:"ion-align-self-end"},{default:(0,o.w5)((function(){return[(0,o.Wm)(v,{style:{"font-size":"20px"},icon:r.searchOutline},null,8,["icon"])]})),_:1})]})),_:1})]})),_:1})):(0,o.kq)("",!0),a.storeList&&a.storeList.length>0?((0,o.wg)(),(0,o.j4)(m,{key:3,class:"store-list"},{default:(0,o.w5)((function(){return[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.storeList,(function(t){return(0,o.wg)(),(0,o.j4)(d,{button:"",key:t.store_id,onClick:function(n){return e.$router.push(`/catalog/store-${t.store_id}`)},class:(0,i.C_)(0==t.is_opened?"closed":"")},{default:(0,o.w5)((function(){return[(0,o.Wm)(L,{to:`/catalog/store-${t.store_id}`},{default:(0,o.w5)((function(){return[(0,o._)("div",b,[t.image_hash?((0,o.wg)(),(0,o.j4)(C,{key:0,src:e.$heap.state.hostname+"/image/get.php/"+t.image_hash+".500.500.webp"},null,8,["src"])):(0,o.kq)("",!0)])]})),_:2},1032,["to"]),(0,o.Wm)(c,{lines:"none",class:"store-title"},{default:(0,o.w5)((function(){return[(0,o._)("b",null,(0,i.zw)(t.store_name),1)]})),_:2},1024),(0,o.Wm)(Z,null,{default:(0,o.w5)((function(){return[(0,o.Wm)(h,{class:"ion-justify-content-between"},{default:(0,o.w5)((function(){return[(0,o.Wm)(w,{size:"auto"},{default:(0,o.w5)((function(){return[(0,o.Wm)(x,{storeItem:t},null,8,["storeItem"])]})),_:2},1024),(0,o.Wm)(w,{size:"auto"},{default:(0,o.w5)((function(){return[t.deliveryTime.timeMin?((0,o.wg)(),(0,o.j4)(u,{key:0,color:"medium",background:"transparent"},{default:(0,o.w5)((function(){return[(0,o.Wm)(v,{icon:r.timeOutline},null,8,["icon"]),(0,o._)("label",null,(0,i.zw)(t.deliveryTime.timeMin)+"-"+(0,i.zw)(t.deliveryTime.timeMax)+"мин",1)]})),_:2},1024)):(0,o.kq)("",!0)]})),_:2},1024)]})),_:2},1024)]})),_:2},1024)]})),_:2},1032,["onClick","class"])})),128))]})),_:1})):(0,o.kq)("",!0)],64)}var C=n(6835),L=n(8534),x=n(8903),z=n(2008),D=n(4405),j=n(6181),S={components:{IonList:f.q_,IonImg:f.Xz,IonChip:f.hM,IonGrid:f.jY,IonRow:f.Nd,IonCol:f.wI,IonItem:f.Ie,IonCard:f.PM,IonIcon:f.gu,IonCardHeader:f.Zi,IonCardTitle:f.Dq,IonCardContent:f.FN,IonSkeletonText:f.CK,StoreOpenedIndicator:j.Z},setup(){return{timeOutline:x.bdY,searchOutline:x.W6I}},data(){return{storeList:null,can_reload_at:0}},methods:{listGet(){var e=this;return(0,L.Z)((0,C.Z)().mark((function t(){var n,o,r;return(0,C.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=z.Z.state.user.location_main,n){t.next=3;break}return t.abrupt("return");case 3:if(o=Date.now(),!(e.can_reload_at>o)){t.next=6;break}return t.abrupt("return");case 6:return e.can_reload_at=o+2e3,t.prev=7,t.next=10,c().post(z.Z.state.hostname+"Store/listNearGet",{location_id:n.location_id});case 10:r=t.sent,e.storeList=e.storeListCalculate(r),t.next=16;break;case 14:t.prev=14,t.t0=t["catch"](7);case 16:case"end":return t.stop()}}),t,null,[[7,14]])})))()},storeListCalculate(e){for(var t in e)e[t].deliveryTime=D.Z.deliveryTimeCalculate(e[t].distance,e[t].store_time_preparation);return e}},mounted(){var e=this;this.$topic.on("userGet",(function(){e.listGet()})),this.$topic.on("userMainLocationSet",(function(t){e.can_reload_at=0,e.listGet()})),this.listGet()}};const T=(0,_.Z)(S,[["render",Z],["__scopeId","data-v-3397fa4c"]]);var U=T,$=n(9064),M=n(94),O={setup(){return{mainLogo:M}},components:{HomeSlider:v,StoreList:U,UserAddressWidget:$.Z},data(){return{primaryDeliveryTime:null}},ionViewDidEnter(){this.$refs.homeStoreList.listGet()}};const q=(0,_.Z)(O,[["render",r]]);var G=q}}]);
//# sourceMappingURL=1847-legacy.0617bcae.js.map