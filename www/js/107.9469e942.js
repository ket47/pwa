"use strict";(self["webpackChunkTezkel"]=self["webpackChunkTezkel"]||[]).push([[107],{2107:function(e,t,a){a.r(t),a.d(t,{default:function(){return j}});var i=a(6252),o=a(3577);const r=e=>((0,i.dD)("data-v-6496917b"),e=e(),(0,i.Cn)(),e),l={key:0},s=(0,i.Uk)("Пока вы не курьер"),n=(0,i.Uk)(" Подавая заявку вы даете согласие на условия "),u=r((()=>(0,i._)("a",{href:"#/page-courier_contract"},"Договор о предоставлении услуг",-1))),d=(0,i.Uk)("Стать курьером"),c={key:1},m=(0,i.Uk)(" Анкета активна "),_=(0,i.Uk)("Загрузить фото"),p=(0,i.Uk)("Транспорт"),h=(0,i.Uk)("ИНН"),w=(0,i.Uk)("Коментарий"),f=(0,i.Uk)("Восстановить"),g=(0,i.Uk)("Удалить анкету"),k=(0,i.Uk)("Заблокировать анкету"),b=(0,i.Uk)("Утвердить анкету"),C=r((()=>(0,i._)("a",{href:"#/page-courier_contract"},"Договор о предоставлении услуг курьера",-1)));function y(e,t,a,r,y,W){const U=(0,i.up)("ion-label"),I=(0,i.up)("ion-item"),D=(0,i.up)("ion-text"),Z=(0,i.up)("ion-checkbox"),x=(0,i.up)("ion-button"),V=(0,i.up)("ion-card"),v=(0,i.up)("ion-card-content"),j=(0,i.up)("ion-img"),N=(0,i.up)("ion-thumbnail"),T=(0,i.up)("ion-input"),A=(0,i.up)("ion-textarea"),O=(0,i.up)("ion-list"),S=(0,i.up)("base-layout");return(0,i.wg)(),(0,i.j4)(S,{"page-title":"Анкета курьера","page-default-back-link":"/user-dashboard"},{default:(0,i.w5)((()=>[y.courier?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",l,[(0,i.Wm)(V,null,{default:(0,i.w5)((()=>[(0,i.Wm)(I,null,{default:(0,i.w5)((()=>[(0,i.Wm)(U,null,{default:(0,i.w5)((()=>[s])),_:1})])),_:1}),(0,i.Wm)(I,null,{default:(0,i.w5)((()=>[(0,i.Wm)(D,null,{default:(0,i.w5)((()=>[n,u])),_:1}),(0,i.Wm)(Z,{modelValue:y.contractAccepted,"onUpdate:modelValue":t[0]||(t[0]=e=>y.contractAccepted=e),slot:"end"},null,8,["modelValue"])])),_:1}),(0,i.Wm)(x,{expand:"full",onClick:t[1]||(t[1]=e=>W.itemCreate()),disabled:!y.contractAccepted},{default:(0,i.w5)((()=>[d])),_:1},8,["disabled"])])),_:1})])),y.courier?((0,i.wg)(),(0,i.iD)("div",c,[W.message?((0,i.wg)(),(0,i.j4)(V,{key:0,lines:"none"},{default:(0,i.w5)((()=>[(0,i.Wm)(v,{class:(0,o.C_)(W.messageClass)},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(W.message),1)])),_:1},8,["class"])])),_:1})):((0,i.wg)(),(0,i.j4)(V,{key:1,lines:"none"},{default:(0,i.w5)((()=>[(0,i.Wm)(v,{style:{"background-color":"var(--ion-color-success-tint)"}},{default:(0,i.w5)((()=>[m])),_:1})])),_:1})),(0,i._)("form",{onChange:t[11]||(t[11]=e=>W.updateCourier())},[(0,i.Wm)(O,null,{default:(0,i.w5)((()=>[(0,i.Wm)(I,{lines:"full"},{default:(0,i.w5)((()=>[y.courier?.images[0]?((0,i.wg)(),(0,i.j4)(N,{key:0,slot:"start"},{default:(0,i.w5)((()=>[(0,i.Wm)(j,{style:{"border-radius":"10px"},class:(0,o.C_)(W.imageClass),src:e.$heap.state.hostname+"image/get.php/"+y.courier.images[0].image_hash+".100.100.webp"},null,8,["class","src"])])),_:1})):(0,i.kq)("",!0),(0,i.Wm)(x,{slot:"end",onClick:t[2]||(t[2]=e=>W.uploadImageTrigger())},{default:(0,i.w5)((()=>[_])),_:1}),(0,i._)("input",{type:"file",id:"courier_foto_upload",accept:"image/*",onChange:t[3]||(t[3]=e=>W.uploadImage(e)),style:{display:"none"}},null,32)])),_:1}),(0,i.Wm)(I,{lines:"full"},{default:(0,i.w5)((()=>[(0,i.Wm)(U,{position:"stacked",color:"primary"},{default:(0,i.w5)((()=>[p])),_:1}),(0,i.Wm)(T,{modelValue:y.courier.courier_vehicle,"onUpdate:modelValue":t[4]||(t[4]=e=>y.courier.courier_vehicle=e)},null,8,["modelValue"])])),_:1}),(0,i.Wm)(I,{lines:"full"},{default:(0,i.w5)((()=>[(0,i.Wm)(U,{position:"stacked",color:"primary"},{default:(0,i.w5)((()=>[h])),_:1}),(0,i.Wm)(T,{modelValue:y.courier.courier_tax_num,"onUpdate:modelValue":t[5]||(t[5]=e=>y.courier.courier_tax_num=e)},null,8,["modelValue"])])),_:1}),(0,i.Wm)(I,{lines:"full"},{default:(0,i.w5)((()=>[(0,i.Wm)(U,{position:"stacked",color:"primary"},{default:(0,i.w5)((()=>[w])),_:1}),(0,i.Wm)(A,{modelValue:y.courier.courier_comment,"onUpdate:modelValue":t[6]||(t[6]=e=>y.courier.courier_comment=e)},null,8,["modelValue"])])),_:1}),y.courier.deleted_at?((0,i.wg)(),(0,i.j4)(I,{key:0,lines:"none"},{default:(0,i.w5)((()=>[(0,i.Wm)(x,{slot:"end",onClick:t[7]||(t[7]=e=>W.itemUnDelete()),color:"success"},{default:(0,i.w5)((()=>[f])),_:1})])),_:1})):((0,i.wg)(),(0,i.j4)(I,{key:1,lines:"none"},{default:(0,i.w5)((()=>[(0,i.Wm)(x,{slot:"end",color:"danger",onClick:t[8]||(t[8]=e=>W.itemDelete())},{default:(0,i.w5)((()=>[g])),_:1})])),_:1})),W.showDisable?((0,i.wg)(),(0,i.j4)(I,{key:2,lines:"none"},{default:(0,i.w5)((()=>[(0,i.Wm)(x,{slot:"end",onClick:t[9]||(t[9]=e=>W.itemDisable()),color:"dark"},{default:(0,i.w5)((()=>[k])),_:1})])),_:1})):(0,i.kq)("",!0),W.showEnable?((0,i.wg)(),(0,i.j4)(I,{key:3,lines:"none"},{default:(0,i.w5)((()=>[(0,i.Wm)(x,{slot:"end",onClick:t[10]||(t[10]=e=>W.itemEnable()),color:"success"},{default:(0,i.w5)((()=>[b])),_:1})])),_:1})):(0,i.kq)("",!0),(0,i.Wm)(I,{lines:"none"},{default:(0,i.w5)((()=>[(0,i.Wm)(D,null,{default:(0,i.w5)((()=>[C])),_:1})])),_:1})])),_:1})],32)])):(0,i.kq)("",!0)])),_:1})}var W=a(9095),U=a(9755),I=a.n(U),D=a(2008),Z=a(351),x={components:{IonTextarea:W.g2,IonInput:W.pK,IonCard:W.PM,IonCardContent:W.FN,IonLabel:W.Q$,IonItem:W.Ie,IonNote:W.uN,IonButton:W.YG,IonImg:W.Xz,IonThumbnail:W.Bs,IonList:W.q_,IonCheckbox:W.nz,IonText:W.yW},data(){return{courier:Z.Z.courier.data,isAdmin:Z.Z.isAdmin(),contractAccepted:0}},mounted(){},computed:{message(){return this.courier.deleted_at?"Анкета не активна и будет удалена. Вы можете еще отменить удаление":1==this.courier.is_disabled?"Анкета не активна и находится на рассмотрении у администратора":null},messageClass(){return this.courier.deleted_at?"deleted":1==this.courier.is_disabled?"disabled":null},imageClass(){return 1==this.courier?.images[0]?.is_disabled?"image_disabled":""},showDisable(){return!(0!=this.courier.is_disabled||!Z.Z.isAdmin())},showEnable(){return!(1!=this.courier.is_disabled||!Z.Z.isAdmin())},showDelete(){return!this.courier.deleted_at},showUnDelete(){return-1!=this.courier.deleted_at&&!this.courier.deleted_at}},methods:{async load(){try{this.courier=await Z.Z.courier.get()}catch(e){JSON.parse(e.responseJSON?.status)}},async itemCreate(){try{await I().post(D.Z.state.hostname+"Courier/itemCreate"),await Z.Z.get(),this.courier=Z.Z.courier.data}catch{this.$flash("Не удалось зарегистрироваться как курьер")}},async itemDelete(){try{await I().post(D.Z.state.hostname+"Courier/itemDelete",{courier_id:this.courier.courier_id}),this.load()}catch(e){const t=e.responseJSON?.messages?.error;"invalid_status"==t&&this.$flash("Надо сначала закрыть смену")}},itemUnDelete(){const e=this;I().post(D.Z.state.hostname+"Courier/itemUnDelete",{courier_id:this.courier.courier_id}).done((()=>{e.load()}))},itemDisable(){const e=this;I().post(D.Z.state.hostname+"Courier/itemDisable",{courier_id:this.courier.courier_id,is_disabled:1}).done((()=>{e.load()}))},itemEnable(){const e=this;I().post(D.Z.state.hostname+"Courier/itemDisable",{courier_id:this.courier.courier_id,is_disabled:0}).done((()=>{e.load()}))},async uploadImage(e){let t=new FormData;t.append("files[]",e.target.files[0]),t.set("image_holder_id",this.courier.courier_id);const a={url:D.Z.state.hostname+"Courier/fileUpload",type:"POST",data:t,processData:!1,contentType:!1};try{await I().ajax(a),this.load()}catch(i){this.$flash("Не удалось загрузить фото")}},uploadImageTrigger(){I()("#courier_foto_upload").trigger("click")},async updateCourier(){try{return await I().post(D.Z.state.hostname+"Courier/itemUpdate",JSON.stringify(this.courier))}catch(e){const t=JSON.parse(e.responseJSON?.messages?.error);t.courier_tax_num&&this.$flash("Неверный формат ИНН")}}}},V=a(3744);const v=(0,V.Z)(x,[["render",y],["__scopeId","data-v-6496917b"]]);var j=v}}]);
//# sourceMappingURL=107.9469e942.js.map