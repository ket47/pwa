{"version":3,"file":"js/9212.ec5ddc5b.js","mappings":"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","sources":["webpack://tezkel/./src/components/UserPasswordReset.vue","webpack://tezkel/./src/components/UserPasswordReset.vue?ef19","webpack://tezkel/./src/views/UserSignUp.vue","webpack://tezkel/./src/views/UserSignUp.vue?0d8a"],"sourcesContent":["<template>\r\n  <ion-header>\r\n      <ion-toolbar>\r\n        <ion-title>Восстановление пароля</ion-title>\r\n        <ion-icon slot=\"end\" @click=\"closeModal();\" :icon=\"closeOutline\" size=\"large\"></ion-icon>\r\n      </ion-toolbar>\r\n  </ion-header>\r\n  <ion-content>\r\n      <form validate>\r\n        <ion-list>\r\n          <ion-item>\r\n            <ion-input label=\"Ваш номер телефона\" label-placement=\"stacked\" v-model=\"userphone\" placeholder=\"Ваш телефон\" required/>\r\n          </ion-item>\r\n          <ion-item>\r\n            <ion-input label=\"Ваш ник\" label-placement=\"stacked\" v-model=\"username\" placeholder=\"Имя, указанное вами при регистрации\"/>\r\n          </ion-item>\r\n        </ion-list>\r\n        <ion-button @click=\"passwordReset()\" expand=\"block\">Создать новый пароль</ion-button>\r\n      </form>\r\n      <div style=\"padding: 15px;font-size:0.8em;color:#999\">\r\n        Рекомендуем сначала проверить СМС сообщение с паролем, которое было выслано вам при регистрации в сервисе.\r\n      </div>\r\n\r\n      <div style=\"padding: 15px;font-size:0.8em\" @click=\"$router.push('/page/contacts')\">\r\n        Если у вас возникли сложности с восстановлением пароля, обращайтесь в <u style=\"color:blue\">службу поддержки</u>\r\n      </div>\r\n      \r\n  </ion-content>\r\n</template>\r\n\r\n<script>\r\nimport { \r\n  IonContent, \r\n  IonHeader, \r\n  IonTitle, \r\n  IonToolbar, \r\n  IonList, \r\n  IonItem,\r\n  IonInput,\r\n  IonButton,\r\n  IonIcon,\r\n\r\n  modalController \r\n}                   from '@ionic/vue';\r\nimport {\r\n    closeOutline\r\n}                   from 'ionicons/icons';\r\nimport jQuery       from \"jquery\";\r\n\r\nexport default {\r\n  components: {\r\n  IonContent, \r\n  IonHeader, \r\n  IonTitle, \r\n  IonToolbar, \r\n  IonList, \r\n  IonItem,\r\n  IonInput,\r\n  IonButton,\r\n  IonIcon,\r\n  },\r\n  props: [ 'phone' ],\r\n  setup(){\r\n    return {closeOutline}\r\n  },\r\n  data() {\r\n    return {\r\n      username: '',\r\n      userphone:this.phone\r\n    }\r\n  },\r\n  methods: {\r\n    closeModal(){\r\n      return modalController.dismiss()\r\n    },\r\n    async passwordReset(){\r\n      if( this.userphone.replace(/\\D/g,\"\").length<11 ){\r\n        alert(\"Проверьте ваш номер телефона\")\r\n        return \r\n      }\r\n      if(!this.username){\r\n        alert(\"Введите ваше имя при регистрации\")\r\n        return \r\n      }\r\n      let requestData = {\r\n        user_phone: '+'+this.userphone.replace(/\\D/g,\"\"),\r\n        user_name:  this.username\r\n      }\r\n      try{\r\n        await jQuery.post(`${this.$heap.state.hostname}User/passwordReset`, requestData)\r\n        this.$flash(`Ваш новый пароль выслан на номер '${this.userphone}'`)\r\n        this.closeModal()\r\n      } catch(err){\r\n        const message=err?.responseJSON?.messages?.error\r\n        if(message=='user_notfound'){\r\n          this.$flash(`Пользователь с телефоном '${this.userphone}' и именем '${this.username}' не найден`)\r\n        }else{\r\n          this.$flash(`Не удалось восстановить пароль`)\r\n        }\r\n      }\r\n    },\r\n  },\r\n  mouted(){\r\n    this.$topic.on('dismissModal',()=>{\r\n      this.closeModal()\r\n    })\r\n  }\r\n};\r\n</script>","import { render } from \"./UserPasswordReset.vue?vue&type=template&id=0b07e06e\"\nimport script from \"./UserPasswordReset.vue?vue&type=script&lang=js\"\nexport * from \"./UserPasswordReset.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <base-layout page-title=\"Регистрация нового пользователя\" pageDefaultBackLink=\"/user\">\r\n      <ion-card v-if=\"$heap.state.user.user_id>0\" style=\"background-color:var(--ion-color-success-tint)\">\r\n        <ion-card-header>\r\n          <ion-card-title color=\"primary\">\r\n            {{$heap.state.user.user_name}} {{$heap.state.user.user_surname}} {{$heap.state.user.user_middlename}}\r\n          </ion-card-title>\r\n        </ion-card-header>\r\n        <ion-card-content>\r\n          Вы уже вошли в систему с номером телефона <b>{{$heap.state.user.user_phone}}</b>\r\n        </ion-card-content>\r\n      </ion-card>\r\n      <ion-card v-else color=\"light\">\r\n        <ion-card-header>\r\n          <ion-card-title color=\"primary\">\r\n            Простая регистрация\r\n          </ion-card-title>\r\n        </ion-card-header>\r\n        <ion-card-content>\r\n          Для регистрации необходим только ваш номер мобильного телефона и имя, чтобы мы знали как к вам обращаться. \r\n        </ion-card-content>\r\n      </ion-card>\r\n      \r\n      <form novalidate>\r\n      <ion-list>\r\n          <ion-item>\r\n            <ion-icon slot=\"start\" :src=\"phonePortraitOutline\"/>\r\n            <div style=\"display:grid;grid-template-columns:100px auto\">\r\n              <div>\r\n                  <ion-input readonly\r\n                  label=\"Код\"\r\n                  label-placement=\"stacked\"\r\n                  value=\"+7\"\r\n                  ></ion-input>\r\n              </div>\r\n              <div>\r\n                  <ion-input\r\n                    v-model=\"user_phone\"\r\n                    @ionChange=\"phoneFormat()\"\r\n                    name=\"phone\"\r\n                    type=\"tel\"\r\n                    inputmode=\"tel\"\r\n                    placeholder=\"(xxx)xxxxxxxxx\"\r\n                    required\r\n                    autocomplete=\"tel-national\"\r\n                    label=\"Мобильный телефон*\"\r\n                    label-placement=\"floating\"\r\n                  ></ion-input>            \r\n                  <ion-text color=\"danger\" slot=\"helperText\"><p v-show=\"!phoneValid && submitted == true\" padding-left>Проверьте номер телефона</p></ion-text>\r\n              </div>\r\n            </div>\r\n          </ion-item>\r\n          <ion-item>\r\n            <ion-icon slot=\"start\" :src=\"keyOutline\"/>\r\n            <ion-input \r\n              v-model=\"user_pass\" \r\n              name=\"password\" \r\n              type=\"password\" \r\n              autocorrect=\"off\"\r\n              placeholder=\"пароль (минимум 4 символа)\"\r\n              required\r\n              autocomplete=\"new-password\"\r\n              label=\"Пароль (минимум 4 символа)*\"\r\n              label-placement=\"floating\"\r\n            ></ion-input>\r\n            <ion-text color=\"danger\" slot=\"helperText\">\r\n              <p v-show=\"!passwordValid && submitted == true\" padding-left>Пароль должен содержать не менее 4 символов.</p>\r\n            </ion-text>\r\n          </ion-item>\r\n          <ion-item>\r\n            <ion-icon slot=\"start\" :src=\"keyOutline\"/>\r\n            <ion-input \r\n              v-model=\"user_pass_confirm\"\r\n              type=\"password\" \r\n              autocorrect=\"off\"\r\n              placeholder=\"пароль повтор\"\r\n              required\r\n              label=\"Пароль повтор*\"\r\n              label-placement=\"floating\"\r\n            ></ion-input>\r\n            <ion-text color=\"danger\" slot=\"helperText\">\r\n              <p v-show=\"user_pass!=user_pass_confirm && submitted == true\" padding-left>Пароль не совпадает с подтверждением</p>\r\n            </ion-text>\r\n          </ion-item>\r\n          <ion-item lines=\"none\">\r\n\r\n          </ion-item>\r\n          <ion-item>\r\n          <!-- <ion-card v-if=\"user_pass==genpass\" style=\"background-color:var(--ion-color-primary-tint)\">\r\n            <ion-card-content>\r\n              Мы придумали пароль <ion-chip style=\"font-family:monospace,serif\">{{user_pass}}</ion-chip> для вас, но вы можете использовать свой вариант. Пароль будет сохранен на этом устройстве.\r\n            </ion-card-content>\r\n          </ion-card> -->\r\n            <ion-icon slot=\"start\" :src=\"personOutline\"/>\r\n            <ion-input \r\n              v-model=\"user_name\"\r\n              name=\"username\"\r\n              type=\"text\" \r\n              placeholder=\"как к вам обращаться?\"\r\n              required\r\n              autocomplete=\"name\"\r\n              label=\"Ваше имя*\"\r\n              label-placement=\"floating\"\r\n            ></ion-input>\r\n            <ion-text color=\"danger\" slot=\"helperText\">\r\n              <p v-show=\"!usernameValid && submitted == true\" padding-left>Проверьте ваш псевдоним</p>\r\n            </ion-text>\r\n          </ion-item>\r\n          <ion-item>\r\n            <ion-icon slot=\"start\" :src=\"atOutline\"/>\r\n            <ion-input \r\n              v-model=\"user_email\"\r\n              name=\"email\"\r\n              type=\"email\" \r\n              placeholder=\"е-маил\"\r\n              required\r\n              autocomplete=\"email\"\r\n              label=\"Ваш е-маил (желательно заполнить)\"\r\n              label-placement=\"floating\"\r\n            ></ion-input>\r\n          </ion-item>\r\n        </ion-list>\r\n\r\n        <ion-grid>\r\n          <ion-row responsive-sm>\r\n            <ion-col>\r\n              <ion-button @click=\"onSubmit\" expand=\"block\">Зарегистрироваться</ion-button>\r\n            </ion-col>\r\n          </ion-row>\r\n          <ion-row responsive-sm>\r\n            <ion-col>\r\n              <ion-button color=\"light\" expand=\"block\" @click=\"$router.replace('/modal/user-authorize')\">Уже есть учетная запись?</ion-button>\r\n            </ion-col>\r\n          </ion-row>\r\n        </ion-grid>\r\n      </form>\r\n  </base-layout>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  modalController,\r\n  alertController,\r\n  IonInput,\r\n  IonText,\r\n  IonButton,\r\n  IonCard,\r\n  IonCardHeader,\r\n  IonCardTitle,\r\n  IonCardContent,\r\n  IonCol,\r\n  IonRow,\r\n  IonGrid,\r\n  IonList,\r\n  IonItem,\r\n  IonIcon,\r\n}                         from \"@ionic/vue\";\r\nimport { \r\n  phonePortraitOutline,\r\n  personOutline,\r\n  keyOutline,\r\n  atOutline,\r\n}                         from \"ionicons/icons\";\r\nimport User               from \"@/scripts/User.js\";\r\nimport UserPasswordReset  from \"@/components/UserPasswordReset.vue\";\r\n\r\n\r\nexport default{\r\n  components: {\r\n    IonInput,\r\n    IonText,\r\n    IonButton,\r\n    IonCard,\r\n    IonCardHeader,\r\n    IonCardTitle,\r\n    IonCardContent,\r\n    IonCol,\r\n    IonRow,\r\n    IonGrid,\r\n    IonList,\r\n    IonItem,\r\n    IonIcon,\r\n  },\r\n  setup(){\r\n    return {\r\n  phonePortraitOutline,\r\n  personOutline,\r\n  keyOutline,\r\n  atOutline,\r\n    }\r\n  },\r\n  data() {\r\n    //const genpass=this.passGenerate()\r\n    return {\r\n      submitted: false,\r\n      //genpass:genpass,\r\n      user_pass: null,\r\n      user_pass_confirm: null,\r\n      user_phone: null,\r\n      user_phone_prefix: \"7\",\r\n      user_name: null,\r\n      user_email: null,\r\n    };\r\n  },\r\n  computed: {\r\n    phoneValid() {\r\n      return this.user_phone?.replace(/\\D/g, \"\").length == 10;\r\n    },\r\n    passwordValid() {\r\n      return this.user_pass?.length >= 4;\r\n    },\r\n    usernameValid() {\r\n      return this.user_name?.length > 0;\r\n    },\r\n  },\r\n  methods: {\r\n    async onSubmit() {\r\n      this.submitted = true;\r\n      if (!this.phoneValid || !this.passwordValid || !this.usernameValid || this.user_pass!=this.user_pass_confirm) {\r\n        return;\r\n      }\r\n      let requestData = {\r\n        user_phone: this.user_phone_prefix + this.user_phone,\r\n        user_pass: this.user_pass,\r\n        user_pass_confirm: this.user_pass,\r\n        user_name: this.user_name.trim(),\r\n        user_email: this.user_email,\r\n        inviter_user_id: localStorage.inviter_user_id ?? 0,\r\n      };\r\n\r\n      try {\r\n        await User.signUp(requestData);\r\n        this.phoneVerify();\r\n        //localStorage.signInData = JSON.stringify({user_phone: this.user_phone_prefix+this.user_phone,user_pass: this.user_pass});\r\n      } catch (err) {\r\n        let exception_code = err?.responseJSON?.messages?.error;\r\n        if (exception_code == \"user_phone_unverified\") {\r\n          this.phoneVerify();\r\n          return;\r\n        }\r\n\r\n        exception_code = \"unknown\";\r\n        try {\r\n          const invalid_field = Object.keys(\r\n            JSON.parse(err.responseJSON.messages.error)\r\n          )[0];\r\n          const invalid_reason = Object.values(\r\n            JSON.parse(err.responseJSON.messages.error)\r\n          )[0];\r\n          exception_code = invalid_field + \"_\" + invalid_reason;\r\n        } catch {\r\n          /** */\r\n        }\r\n\r\n        switch (exception_code) {\r\n          case \"user_phone_notunique\":\r\n            this.$flash(\"Пользователь с таким телефоном уже зарегистрирован\");\r\n            if (await this.forgotPassConfirm()) {\r\n              this.forgotPassModal();\r\n            }\r\n            break;\r\n          case \"user_phone_required\":\r\n          case \"user_phone_invalid\":\r\n          case \"user_phone_short\":\r\n            this.$flash(\"Проверьте номер телефона\");\r\n            break;\r\n          case \"user_name_required\":\r\n          case \"user_name_short\":\r\n            this.$flash(\"Проверьте ваш псевдоним\");\r\n            break;\r\n          case \"user_email_invalid\":\r\n            this.$flash(\"Проверьте ваш е-маил\");\r\n            break;\r\n          case \"user_email_notunique\":\r\n            this.$flash(\"Такой е-маил уже используется\");\r\n            break;\r\n          case \"user_pass_required\":\r\n            this.$flash(\"Пароль обязателен для заполнения\");\r\n            break;\r\n          case \"user_pass_short\":\r\n            this.$flash(\"Пароль слишком короткий\");\r\n            break;\r\n          case \"user_pass_notmatches\":\r\n            this.$flash(\"Пароль не совпадает с подтверждением\");\r\n            break;\r\n          default:\r\n            this.$flash(\"Не удалось войти зарегистрироваться\");\r\n        }\r\n      }\r\n    },\r\n    passGenerate() {\r\n      let pass = \"\";\r\n      const length = 4;\r\n      const alphabet = \"abcdefghijklmnopqrstuvwxyz12345678901234567890\";\r\n      for (let i = 0; i < length; i++) {\r\n        const index = Math.floor(Math.random() * alphabet.length);\r\n        pass += alphabet[index];\r\n      }\r\n      return pass;\r\n    },\r\n    phoneFormat() {\r\n      if (!this.user_phone) {\r\n        this.user_phone = \"\";\r\n      }\r\n      try {\r\n        let user_phone = this.user_phone.replace(/\\D/g, \"\");\r\n        if (user_phone.length > 10) {\r\n          user_phone = user_phone.substring(user_phone.length - 10);\r\n        }\r\n        this.user_phone = user_phone;\r\n      } catch {\r\n        /** */\r\n      }\r\n    },\r\n    phoneVerify() {\r\n      // let requestData = {\r\n      //   user_phone: this.user_phone_prefix+this.user_phone\r\n      // }\r\n      try {\r\n        this.$heap.state.user.tmp_userphone =\r\n          this.user_phone_prefix + this.user_phone;\r\n        this.$go(\"/user/verify-phone\");\r\n        //this.$router.push({name:'UserVerifyPhone',query:requestData})\r\n      } catch {\r\n        this.$flash(\"Не удалось выслать смс с подтверждением\");\r\n      }\r\n    },\r\n    async forgotPassModal() {\r\n      this.modalOpen = true;\r\n      const phone = (this.user_phone_prefix ?? \"\") + (this.user_phone ?? \"\");\r\n      const modal = await modalController.create({\r\n        component: UserPasswordReset,\r\n        componentProps: { phone },\r\n        initialBreakpoint: 0.5,\r\n        breakpoints: [0.5, 0.75],\r\n      });\r\n      return modal.present();\r\n    },\r\n    async forgotPassConfirm() {\r\n      const phone = (this.user_phone_prefix ?? \"\") + (this.user_phone ?? \"\");\r\n      const alert = await alertController.create({\r\n        header: \"Восстановить пароль?\",\r\n        message: `Возможно вы уже регистрировались с телефоном ${phone}.\\n\\nМожем восстановить пароль.`,\r\n        buttons: [\r\n          {\r\n            text: \"Отменить\",\r\n            role: \"cancel\",\r\n          },\r\n          {\r\n            text: \"Восстановить\",\r\n            role: \"confirm\",\r\n          },\r\n        ],\r\n      });\r\n      await alert.present();\r\n      const { role } = await alert.onDidDismiss();\r\n      if (role == \"confirm\") {\r\n        return true;\r\n      }\r\n      return false;\r\n    },\r\n  },\r\n}\r\n</script>","import { render } from \"./UserSignUp.vue?vue&type=template&id=5a02b202\"\nimport script from \"./UserSignUp.vue?vue&type=script&lang=js\"\nexport * from \"./UserSignUp.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["validate","_createVNode","_component_ion_header","_component_ion_toolbar","_component_ion_title","_cache","_component_ion_icon","slot","onClick","$event","$options","closeModal","icon","$setup","closeOutline","size","_component_ion_content","_createElementVNode","_hoisted_1","_component_ion_list","_component_ion_item","_component_ion_input","label","$data","userphone","placeholder","required","username","_component_ion_button","passwordReset","expand","style","_ctx","$router","push","components","IonContent","IonHeader","IonTitle","IonToolbar","IonList","IonItem","IonInput","IonButton","IonIcon","props","setup","data","this","phone","methods","modalController","dismiss","replace","length","alert","requestData","user_phone","user_name","jQuery","$heap","state","hostname","$flash","err","_err$responseJSON","_err$responseJSON$mes","message","responseJSON","messages","error","mouted","$topic","on","__exports__","render","novalidate","_createBlock","_component_base_layout","pageDefaultBackLink","user","user_id","_component_ion_card","_component_ion_card_header","_component_ion_card_title","color","_toDisplayString","user_surname","user_middlename","_component_ion_card_content","src","phonePortraitOutline","_hoisted_2","readonly","value","onIonChange","phoneFormat","name","type","inputmode","autocomplete","_component_ion_text","_hoisted_3","phoneValid","submitted","keyOutline","user_pass","autocorrect","_hoisted_4","passwordValid","user_pass_confirm","_hoisted_5","lines","personOutline","_hoisted_6","usernameValid","atOutline","user_email","_component_ion_grid","_component_ion_row","_component_ion_col","onSubmit","IonText","IonCard","IonCardHeader","IonCardTitle","IonCardContent","IonCol","IonRow","IonGrid","user_phone_prefix","computed","_this$user_phone","_this$user_pass","_this$user_name","trim","inviter_user_id","localStorage","User","signUp","phoneVerify","exception_code","invalid_field","Object","keys","JSON","parse","invalid_reason","values","forgotPassConfirm","forgotPassModal","passGenerate","pass","alphabet","i","index","Math","floor","random","substring","tmp_userphone","$go","modalOpen","modal","create","component","UserPasswordReset","componentProps","initialBreakpoint","breakpoints","present","alertController","header","buttons","text","role","onDidDismiss"],"sourceRoot":""}