"use strict";(self["webpackChunkTezkel"]=self["webpackChunkTezkel"]||[]).push([[9487],{2562:function(e,t,l){l.d(t,{Z:function(){return h}});var i=l(6252),a=l(3577);const n={style:{position:"absolute",top:"30px",width:"100%","--ion-item-background":"#ffffffdd","border-radius":"10px"}},o={slot:"end",style:{color:"#666"}};function s(e,t,l,s,r,u){const c=(0,i.up)("ymap-marker"),d=(0,i.up)("yandex-map"),m=(0,i.up)("ion-searchbar"),p=(0,i.up)("ion-item"),g=(0,i.up)("ion-content"),h=(0,i.up)("ion-textarea"),_=(0,i.up)("ion-icon"),f=(0,i.up)("ion-button"),w=(0,i.up)("ion-toolbar");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(g,null,{default:(0,i.w5)((()=>[(0,i.Wm)(d,{onClick:t[0]||(t[0]=e=>u.onClick(e)),style:{height:"100%"},coords:r.coords,zoom:16,settings:r.settings,controls:["zoomControl"]},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{coords:r.coords,"marker-id":"1",properties:r.placemarkProperties},null,8,["coords","properties"])])),_:1},8,["coords","settings"]),(0,i._)("div",n,[(0,i.Wm)(m,{debounce:"500",modelValue:r.addressSearchQuery,"onUpdate:modelValue":t[1]||(t[1]=e=>r.addressSearchQuery=e),onIonInput:t[2]||(t[2]=e=>u.suggestionsGet()),placeholder:"–ø–æ–∏—Å–∫ –ø–æ –∞–¥—Ä–µ—Å—É",color:"light"},null,8,["modelValue"]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.suggestions,((e,t)=>((0,i.wg)(),(0,i.j4)(p,{key:t,onClick:t=>u.suggestionSelect(`${e.subtitle.text}, ${e.title.text}`,e.uri),style:{"margin-right":"10px","margin-left":"10px"}},{default:(0,i.w5)((()=>[(0,i.Uk)((0,a.zw)(e.subtitle.text)+" "+(0,a.zw)(e.title.text)+" ",1),(0,i._)("span",o,(0,a.zw)(e.distance.text),1)])),_:2},1032,["onClick"])))),128))])])),_:1}),(0,i.Wm)(w,null,{default:(0,i.w5)((()=>[(0,i.Wm)(h,{label:"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∞–¥—Ä–µ—Å—É","label-placement":"floating",modelValue:r.addressComment,"onUpdate:modelValue":t[3]||(t[3]=e=>r.addressComment=e)},null,8,["modelValue"]),(0,i.Wm)(f,{strong:!0,onClick:t[4]||(t[4]=e=>u.pickAddress()),color:"primary",expand:"block"},{default:(0,i.w5)((()=>[(0,i.Wm)(_,{src:s.checkmark,slot:"start"},null,8,["src"]),(0,i.Uk)(" –û–∫ ")])),_:1}),(0,i.Wm)(f,{onClick:t[5]||(t[5]=e=>s.closeModal()),color:"light",expand:"block"},{default:(0,i.w5)((()=>[(0,i.Uk)("–ó–∞–∫—Ä—ã—Ç—å")])),_:1})])),_:1})],64)}l(7658);var r=l(4929),u=l(5836),c=l(8903),d=l(351),m={components:{IonContent:r.W2,IonToolbar:r.sr,IonButton:r.YG,IonSearchbar:r.VI,IonIcon:r.gu,IonItem:r.Ie,IonTextarea:r.g2,yandexMap:u.xR,ymapMarker:u.Jk},setup(){const e=function(){r.Fy.dismiss()};return{closeModal:e,locationOutline:c.Iv7,closeOutline:c.fID,checkmark:c.d29}},props:{location_group_name_low:String,location_group_id:Number},data(){let e=this.location_group_name_low+" –∞–¥—Ä–µ—Å",t=this.$heap.state.settings.location,l=JSON.parse(t.mapCenter);return{settings:{apiKey:t.ymapApiKey,lang:"ru_RU",coordorder:"latlong",version:"2.1"},placemarkProperties:{iconCaption:e},suggestions:[],addressSearchQuery:null,markDeviceOnMap:!0,locationType:e,locSettings:t,selectedPlacemark:0,selectedAddress:"",selectedCoords:[],coords:l,addressComment:""}},methods:{async pickAddress(){try{if(!this.selectedAddress){var e;const t=await window.ymaps.geocode(this.coords);this.selectedAddress=null===(e=t.geoObjects.get(0))||void 0===e?void 0:e.getAddressLine()}}catch(l){}var t={location_address:this.filterAddress(this.selectedAddress),location_latitude:this.coords[0],location_longitude:this.coords[1],location_comment:this.addressComment};r.Fy.dismiss(t)},filterAddress(e){const t=this.locSettings.addressErase.split(", "),l=e.split(", ");let i=[];for(const a of l)t.find((e=>e==a))||i.push(a);return i.reverse().join(", ")},onClick(e){e&&e.get&&(this.markDeviceOnMap=!1,this.suggestions=[],this.selectedAddress=null,this.coords=e.get("coords"))},async suggestionsGet(){if(this.markDeviceOnMap=!1,this.addressSearchQuery)try{const e=this.$heap.state.settings.location.ymapSuggestionApiKey,t=this.coords.slice().reverse().join(","),l=await fetch(`https://suggest-maps.yandex.ru/v1/suggest?apikey=${e}&lang=ru_RU&ll=${t}&spn=1,1&attrs=uri&types=house&results=5&text=${this.addressSearchQuery}`),i=await l.json();this.suggestions=i.results||[]}catch{}else this.suggestions=[]},async suggestionSelect(e,t){this.selectedAddress=e,this.geocode(t)},async geocode(e){try{this.suggestions=[];const t=this.$heap.state.settings.location.ymapApiKey,l=await fetch(`https://geocode-maps.yandex.ru/1.x?apikey=${t}&format=json&results=1&uri=${e}`),i=await l.json(),a=i.response.GeoObjectCollection.featureMember[0].GeoObject;this.coords=a.Point.pos.split(" ").reverse()}catch(t){console.log(t)}}},async mounted(){await(0,u.xk)();const e=d.Z.geo.lastStoredGet();null!==e&&void 0!==e&&e.location_latitude&&(this.coords=[e.location_latitude,e.location_longitude]);const t=await d.Z.geo.get();if(this.markDeviceOnMap&&t){const{coords:e}=t;this.coords=[e.latitude,e.longitude],this.$flash("–ù–∞ –∫–∞—Ä—Ç–µ –æ—Ç–º–µ—á–µ–Ω–æ –≤–∞—à–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ")}}},p=l(3744);const g=(0,p.Z)(m,[["render",s]]);var h=g},9487:function(e,t,l){l.r(t),l.d(t,{default:function(){return f}});var i=l(6252),a=l(3577);const n={class:"ion-padding",slot:"content"};function o(e,t,l,o,s,r){const u=(0,i.up)("ion-icon"),c=(0,i.up)("ion-label"),d=(0,i.up)("ion-item"),m=(0,i.up)("ion-list"),p=(0,i.up)("ion-title"),g=(0,i.up)("ion-button"),h=(0,i.up)("ion-buttons"),_=(0,i.up)("ion-toolbar"),f=(0,i.up)("ion-header"),w=(0,i.up)("ion-input"),k=(0,i.up)("ion-textarea"),W=(0,i.up)("ion-select-option"),v=(0,i.up)("ion-select"),y=(0,i.up)("ion-accordion"),M=(0,i.up)("ion-chip"),b=(0,i.up)("image-tile-comp"),C=(0,i.up)("ion-accordion-group"),I=(0,i.up)("ion-col"),U=(0,i.up)("ion-row"),$=(0,i.up)("ion-grid"),V=(0,i.up)("ion-content"),O=(0,i.up)("ion-modal"),x=(0,i.up)("base-layout");return(0,i.wg)(),(0,i.j4)(x,{pageDefaultBackLink:"/user","page-title":"–†–∞—Å—Å—ã–ª–∫–∞"},{default:(0,i.w5)((()=>{var e;return[(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(d,{button:"",onClick:t[0]||(t[0]=e=>r.itemCreate())},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{slot:"start",src:o.addOutline},null,8,["src"]),(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[(0,i.Uk)("–î–æ–±–∞–≤–∏—Ç—å –†–∞—Å—Å—ã–ª–∫—É")])),_:1})])),_:1})])),_:1}),(null===(e=s.mailingList)||void 0===e?void 0:e.length)>0?((0,i.wg)(),(0,i.j4)(m,{key:0},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.mailingList,(e=>((0,i.wg)(),(0,i.j4)(d,{key:e.mailing_id,onClick:t=>r.itemGet(e.mailing_id)},{default:(0,i.w5)((()=>[(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[(0,i.Uk)("#"+(0,a.zw)(e.mailing_id)+" "+(0,a.zw)(e.subject_template),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):(0,i.kq)("",!0),(0,i.Wm)(O,{ref:"modal",onWillDismiss:t[18]||(t[18]=e=>s.isMailingOpen=!1),"is-open":s.isMailingOpen,"initial-breakpoint":.75,breakpoints:[.75,1]},{default:(0,i.w5)((()=>[(0,i.Wm)(f,null,{default:(0,i.w5)((()=>[(0,i.Wm)(_,null,{default:(0,i.w5)((()=>[(0,i.Wm)(p,null,{default:(0,i.w5)((()=>[(0,i.Uk)("–†–∞—Å—Å—ã–ª–∫–∞ #"+(0,a.zw)(s.currentMailing.mailing_id),1)])),_:1}),(0,i.Wm)(h,{slot:"end"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{onClick:t[1]||(t[1]=e=>s.isMailingOpen=!1)},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{src:o.closeOutline},null,8,["src"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,i.Wm)(V,{class:"ion-padding",onChange:t[17]||(t[17]=e=>r.itemSave(e))},{default:(0,i.w5)((()=>[(0,i.Wm)(C,{modelValue:s.openedAccordion,"onUpdate:modelValue":t[14]||(t[14]=e=>s.openedAccordion=e),style:{overflow:"hidden","border-radius":"10px"}},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{value:"message"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{slot:"header",color:"light"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[(0,i.Uk)("–°–æ–æ–±—â–µ–Ω–∏–µ")])),_:1})])),_:1}),(0,i.Wm)(m,{slot:"content"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Wm)(w,{modelValue:s.currentMailing.subject_template,"onUpdate:modelValue":t[2]||(t[2]=e=>s.currentMailing.subject_template=e),label:"–¢–µ–º–∞","label-placement":"stacked"},null,8,["modelValue"])])),_:1}),(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Wm)(k,{modelValue:s.currentMailing.text_template,"onUpdate:modelValue":t[3]||(t[3]=e=>s.currentMailing.text_template=e),label:"–°–æ–æ–±—â–µ–Ω–∏–µ","label-placement":"stacked"},null,8,["modelValue"])])),_:1}),(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Wm)(w,{modelValue:s.currentMailing.start_at,"onUpdate:modelValue":t[4]||(t[4]=e=>s.currentMailing.start_at=e),type:"datetime-local",label:"–ù–∞—á–∞–ª–æ –∑–∞–ø—É—Å–∫–∞","label-placement":"stacked"},null,8,["modelValue"])])),_:1}),(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Wm)(v,{label:"–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç","label-placement":"stacked",modelValue:s.currentMailing.transport,"onUpdate:modelValue":t[5]||(t[5]=e=>s.currentMailing.transport=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(W,{value:"-"},{default:(0,i.w5)((()=>[(0,i.Uk)("-")])),_:1}),(0,i.Wm)(W,{value:"push"},{default:(0,i.w5)((()=>[(0,i.Uk)("Push")])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,i.Wm)(y,{value:"recievers"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{slot:"header",color:"light"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[(0,i.Uk)("–ü–æ–ª—É—á–∞—Ç–µ–ª–∏ ("+(0,a.zw)(s.currentMailing.recieverCount.sent)+"/"+(0,a.zw)(s.currentMailing.recieverCount.all)+")",1)])),_:1})])),_:1}),(0,i._)("div",n,[(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Wm)(w,{modelValue:s.currentMailing.user_filter.phones,"onUpdate:modelValue":t[6]||(t[6]=e=>s.currentMailing.user_filter.phones=e),name:"user_filter.phones",label:"–¢–µ–ª–µ—Ñ–æ–Ω—ã –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π","label-placement":"stacked"},null,8,["modelValue"])])),_:1}),(0,i.Wm)(d,{lines:"none"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[(0,i.Uk)("–õ–æ–∫–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤")])),_:1})])),_:1}),s.currentMailing.user_filter.location?((0,i.wg)(),(0,i.j4)(d,{key:0,lines:"none"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{slot:"start",src:o.locationOutline},null,8,["src"]),(0,i.Wm)(c,{style:{"white-space":"normal",cursor:"pointer"}},{default:(0,i.w5)((()=>[(0,i.Uk)((0,a.zw)(s.currentMailing.user_filter.location.location_address),1)])),_:1}),(0,i.Wm)(u,{slot:"end",icon:o.trash,onClick:t[7]||(t[7]=e=>r.locationDelete(`${s.currentMailing.user_filter.location.location_id}`))},null,8,["icon"])])),_:1})):((0,i.wg)(),(0,i.j4)(g,{key:1,onClick:t[8]||(t[8]=e=>r.modalLocationCreate()),color:"light",expand:"block"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{src:o.locationOutline},null,8,["src"]),(0,i.Uk)(" –î–æ–±–∞–≤–∏—Ç—å –∞–¥—Ä–µ—Å ")])),_:1})),s.currentMailing.user_filter.location?((0,i.wg)(),(0,i.j4)(d,{key:2},{default:(0,i.w5)((()=>[(0,i.Wm)(w,{modelValue:s.currentMailing.user_filter.radius,"onUpdate:modelValue":t[9]||(t[9]=e=>s.currentMailing.user_filter.radius=e),name:"user_filter.radius",label:"–†–∞–¥–∏—É—Å –≤–æ–∫—Ä—É–≥ –ª–æ–∫–∞—Ü–∏–∏ –∫–º","label-placement":"stacked"},null,8,["modelValue"])])),_:1})):(0,i.kq)("",!0),(0,i.Wm)(d,{lines:"none"},{default:(0,i.w5)((()=>[s.currentMailing.recieverCount.all>0?((0,i.wg)(),(0,i.j4)(M,{key:0},{default:(0,i.w5)((()=>[(0,i.Uk)("–í—Å–µ–≥–æ "+(0,a.zw)(s.currentMailing.recieverCount.all),1)])),_:1})):(0,i.kq)("",!0),s.currentMailing.recieverCount.sent>0?((0,i.wg)(),(0,i.j4)(M,{key:1,color:"success"},{default:(0,i.w5)((()=>[(0,i.Uk)("–ü–æ—Å–ª–∞–Ω–æ "+(0,a.zw)(s.currentMailing.recieverCount.sent),1)])),_:1})):(0,i.kq)("",!0),s.currentMailing.recieverCount.failed>0?((0,i.wg)(),(0,i.j4)(M,{key:2,color:"danger"},{default:(0,i.w5)((()=>[(0,i.Uk)("–û—à–∏–±–∫–∞ "+(0,a.zw)(s.currentMailing.recieverCount.failed),1)])),_:1})):(0,i.kq)("",!0)])),_:1})])),_:1})])])),_:1}),"push"==s.currentMailing.transport?((0,i.wg)(),(0,i.j4)(y,{key:0,value:"push_options"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{slot:"header",color:"light"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[(0,i.Uk)("–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—É—à")])),_:1})])),_:1}),(0,i.Wm)(m,{slot:"content"},{default:(0,i.w5)((()=>{var e,l;return[(0,i.Wm)(b,{images:null===(e=s.currentMailing)||void 0===e?void 0:e.images,image_holder:"mailing",image_holder_id:null===(l=s.currentMailing)||void 0===l?void 0:l.mailing_id,hide_if_empty:"true",controller:"Admin/Mailing",ref:"mailingImgs"},null,8,["images","image_holder_id"]),(0,i.Wm)(d,{lines:"none",onClick:t[10]||(t[10]=e=>this.$refs.mailingImgs.take_photo())},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{src:o.addOutline,slot:"start"},null,8,["src"]),(0,i.Uk)(" –î–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ ")])),_:1}),(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Wm)(w,{modelValue:s.currentMailing.link,"onUpdate:modelValue":t[11]||(t[11]=e=>s.currentMailing.link=e),label:"Link","label-placement":"stacked"},null,8,["modelValue"])])),_:1}),(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Wm)(v,{onIonChange:t[12]||(t[12]=e=>r.itemSave()),label:"–†–∏–Ω–≥—Ç–æ–Ω","label-placement":"stacked",modelValue:s.currentMailing.sound,"onUpdate:modelValue":t[13]||(t[13]=e=>s.currentMailing.sound=e),value:"default"},{default:(0,i.w5)((()=>[(0,i.Wm)(W,{value:""},{default:(0,i.w5)((()=>[(0,i.Uk)("-")])),_:1}),(0,i.Wm)(W,{value:"default"},{default:(0,i.w5)((()=>[(0,i.Uk)("—Å—Ç–∞–Ω–¥–∞—Ä—Ç")])),_:1}),(0,i.Wm)(W,{value:"short.wav"},{default:(0,i.w5)((()=>[(0,i.Uk)("–ö–æ—Ä–æ—Ç–∫–∏–π")])),_:1}),(0,i.Wm)(W,{value:"medium.wav"},{default:(0,i.w5)((()=>[(0,i.Uk)("–°—Ä–µ–¥–Ω–∏–π")])),_:1}),(0,i.Wm)(W,{value:"long.wav"},{default:(0,i.w5)((()=>[(0,i.Uk)("–î–ª–∏–Ω–Ω—ã–π")])),_:1})])),_:1},8,["modelValue"])])),_:1})]})),_:1})])),_:1})):(0,i.kq)("",!0)])),_:1},8,["modelValue"]),(0,i.Wm)($,null,{default:(0,i.w5)((()=>[(0,i.Wm)(U,null,{default:(0,i.w5)((()=>[(0,i.Wm)(I,null,{default:(0,i.w5)((()=>[(0,i.Wm)(g,{onClick:t[15]||(t[15]=e=>r.itemDelete()),color:"danger",fill:"clear",expand:"block"},{default:(0,i.w5)((()=>[(0,i.Uk)("–£–¥–∞–ª–∏—Ç—å")])),_:1})])),_:1}),(0,i.Wm)(I,null,{default:(0,i.w5)((()=>[(0,i.Wm)(g,{onClick:t[16]||(t[16]=e=>r.itemStart()),expand:"block",color:"light"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{slot:"start",src:o.playOutline},null,8,["src"]),(0,i.Uk)(" –ó–∞–ø—É—Å—Ç–∏—Ç—å ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["is-open"])]})),_:1})}l(8862);var s=l(4929),r=l(8903),u=l(4405),c=l(9755),d=l.n(c),m=l(7950),p=l(2562),g={components:{ImageTileComp:m.Z,IonList:s.q_,IonItem:s.Ie,IonLabel:s.Q$,IonIcon:s.gu,IonModal:s.ki,IonHeader:s.Gu,IonToolbar:s.sr,IonButtons:s.Sm,IonTitle:s.wd,IonButton:s.YG,IonContent:s.W2,IonInput:s.pK,IonTextarea:s.g2,IonSelect:s.t9,IonSelectOption:s.n0,IonGrid:s.jY,IonRow:s.Nd,IonCol:s.wI,IonAccordionGroup:s.eh,IonAccordion:s.We,IonChip:s.hM},setup(){return{addOutline:r.s6O,refreshOutline:r.D3P,imageOutline:r.Eu9,closeOutline:r.fID,playOutline:r.AO3,locationOutline:r.Iv7,trash:r._Ij}},data(){return{openedAccordion:"message",currentMailing:{},mailingList:null,isMailingOpen:!1,saveClock:null}},computed:{},methods:{async itemCreate(){const e={subject_template:"new mailing"};try{const t=await d().post(`${this.$heap.state.hostname}Admin/Mailing/itemCreate`,e);this.itemGet(t)}catch{}},async itemGet(e){const t={mailing_id:e};try{var l;const e=await d().post(`${this.$heap.state.hostname}Admin/Mailing/itemGet`,t);null!==(l=e.user_filter)&&void 0!==l||(e.user_filter={}),this.currentMailing=e,this.isMailingOpen=!0}catch{}},async itemSave(e){clearTimeout(this.saveClock),this.saveClock=setTimeout((async()=>{var t,l;await this.itemUpdate(),e&&(null===(t=e.target)||void 0===t||null===(l=t.name)||void 0===l?void 0:l.indexOf("user_filter"))>-1&&this.recieverListCreate()}),500)},async itemUpdate(){const e=this.currentMailing;try{await d().post(`${this.$heap.state.hostname}Admin/Mailing/itemUpdate`,JSON.stringify(e)),this.$flash("üíæ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ")}catch{this.$flash("–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è")}},async itemDelete(){if(!confirm("–í—ã —É–≤–µ—Ä–µ–Ω–Ω—ã?"))return;const e={mailing_id:this.currentMailing.mailing_id};try{await d().post(`${this.$heap.state.hostname}Admin/Mailing/itemDelete`,e),this.isMailingOpen=!1,this.listGet()}catch{}},itemValidate(){if(this.currentMailing.start_at)if(this.currentMailing.user_filter.phones)if(this.currentMailing.subject_template)if(this.currentMailing.text_template){if(this.currentMailing.transport)return!0;alert("–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω")}else alert("–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ");else alert("–ó–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω");else alert("–ü–æ–ª—É—á–∞—Ç–µ–ª–∏ –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã");else alert("–ù–∞—á–∞–ª–æ —Ä–∞—Å—Å—ã–ª–∫–∏ –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ")},async itemStart(){if(!this.itemValidate()||!confirm(`–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ä–∞—Å—Å—ã–ª–∫—É –≤ ${this.currentMailing.start_at}?`))return;const e={mailing_id:this.currentMailing.mailing_id};try{await d().post(`${this.$heap.state.hostname}Admin/Mailing/itemStart`,e),this.listGet()}catch{}},async listGet(){this.mailingList=await u.Z.prePost(`${this.$heap.state.hostname}Admin/Mailing/listGet`,{});try{this.mailingList=await u.Z.post(`${this.$heap.state.hostname}Admin/Mailing/listGet`,{})}catch(e){console.log(e)}},async modalLocationCreate(){if(!this.$heap.state.user.user_id)return this.$flash("–ß—Ç–æ–±—ã –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –∞–¥—Ä–µ—Å–∞ —Å–æ—Ö—Ä–∞–Ω–∏–ª–∏—Å—å, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞ –≤–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É"),void this.$go({name:"UserSignIn"});var e="—Ä–∞–±–æ—á–∏–π";const t=await s.Fy.create({component:p.Z,showBackdrop:!0,backdropDismiss:!0,componentProps:{location_group_name_low:e}});await t.present();const l=await t.onDidDismiss();l&&(this.currentMailing.user_filter.location=l.data,this.recieverListCreate())},async locationDelete(e){try{this.currentMailing.user_filter.location=null,this.recieverListCreate()}catch{this.$flash("–£–¥–∞–ª–∏—Ç—å –∞–¥—Ä–µ—Å –Ω–µ —É–¥–∞–ª–æ—Å—å")}},async recieverListCreate(){try{const e={mailing_id:this.currentMailing.mailing_id};await this.itemUpdate();const t=await d().post(this.$heap.state.hostname+"Admin/Mailing/recieverListCreate",e);this.$flash(`–í —Å–ø–∏—Å–æ–∫ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π –¥–æ–±–∞–≤–ª–µ–Ω–æ ${t} –∑–∞–ø–∏—Å—å`),this.itemGet(this.currentMailing.mailing_id)}catch{this.$flash("–°–æ–∑–¥–∞—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π –Ω–µ —É–¥–∞–ª–æ—Å—å")}}},ionViewDidEnter(){this.listGet()},mounted(){this.listGet()}},h=l(3744);const _=(0,h.Z)(g,[["render",o],["__scopeId","data-v-7ae57d46"]]);var f=_}}]);
//# sourceMappingURL=9487.5a40b4c6.js.map