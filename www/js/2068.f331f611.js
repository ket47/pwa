"use strict";(self["webpackChunktezkel"]=self["webpackChunktezkel"]||[]).push([[2068],{5069:function(t,e,r){var o=r(2109),n=r(1702),i=r(3157),u=n([].reverse),l=[1,2];o({target:"Array",proto:!0,forced:String(l)===String(l.reverse())},{reverse:function(){return i(this)&&(this.length=this.length),u(this)}})},4242:function(t,e,r){r.d(e,{Z:function(){return h}});var o=r(6252),n=r(3577);const i={class:"blur-image"},u=["src"],l=["src"];function a(t,e,r,a,c,s){const d=(0,o.up)("swiper-slide"),p=(0,o.up)("swiper");return(0,o.wg)(),(0,o.j4)(p,{modules:a.modules,autoplay:{delay:3e3,disableOnInteraction:!1},loop:!0,effect:"fade",style:(0,n.j5)(`height: ${r.imgHeight||"100%"};`)},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.imageList,(e=>((0,o.wg)(),(0,o.j4)(d,{key:e.image_hash},{default:(0,o.w5)((()=>[(0,o._)("div",{class:(0,n.C_)(`${r.mode?r.mode:""} cropper`),style:(0,n.j5)(`height: ${r.imgHeight+"px"||0}`)},[(0,o._)("div",i,[(0,o._)("img",{src:`${t.$heap.state.hostname}image/get.php/${e.image_hash}.${4*r.imgHeight||1200}.${4*r.imgHeight||1200}.webp`},null,8,u)]),(0,o._)("img",{style:(0,n.j5)(`min-height: ${r.imgHeight+"px;"||0};max-height:50vh`),src:`${t.$heap.state.hostname}image/get.php/${e.image_hash}.${4*r.imgHeight||1200}.${4*r.imgHeight||1200}.webp`},null,12,l)],6)])),_:2},1024)))),128))])),_:1},8,["modules","style"])}var c=r(8903),s=r(8292),d=r(702),p=r(3181),m={components:{Swiper:p.t,SwiperSlide:p.o,IonFab:s.IJ,IonFabButton:s.W4,IonIcon:s.gu},props:["imageList","imgHeight","mode"],setup(){return{modules:[d.pt,d.xW],expand:c.jnR,contract:c.LJB}},data(){return{expanded:!1,vh:0,vw:0}},methods:{maximize(){this.expanded=!0,this.vh=document.getElementsByTagName("ion-content")[0].clientHeight,this.vw=document.getElementsByTagName("ion-content")[0].clientWidth},minimize(){this.expanded=!1,this.vh=document.getElementsByTagName("ion-content")[0].clientHeight,this.vw=document.getElementsByTagName("ion-content")[0].clientWidth}}},g=r(3744);const _=(0,g.Z)(m,[["render",a],["__scopeId","data-v-24bd79de"]]);var h=_},2068:function(t,e,r){r.r(e),r.d(e,{default:function(){return O}});r(4916),r(5306);var o=r(6252),n=r(3577);const i={key:0,class:"product-images"},u={style:{"font-size":"1.2em"}},l=(0,o.Uk)(),a={key:0},c=(0,o.Uk)(),s={key:1},d={key:2},p=(0,o.Uk)("Варианты"),m=(0,o.Uk)(" "),g={key:0,style:{color:"var(--ion-color-danger)","font-size":"0.75em"}},_=(0,o.Uk)("   "),h=(0,o.Uk)("Не заказан"),w=(0,o.Uk)("Итог");function y(t,e,r,y,f,I){var k;const v=(0,o.up)("image-slider-comp"),W=(0,o.up)("ion-list-header"),z=(0,o.up)("ion-text"),$=(0,o.up)("ion-item"),C=(0,o.up)("ion-list"),b=(0,o.up)("ion-accordion"),j=(0,o.up)("ion-accordion-group"),U=(0,o.up)("ion-icon"),H=(0,o.up)("ion-chip"),O=(0,o.up)("ion-label"),q=(0,o.up)("cart-add-buttons"),x=(0,o.up)("ion-textarea"),D=(0,o.up)("base-layout");return(0,o.wg)(),(0,o.j4)(D,{"page-title":null===(k=f.productItem)||void 0===k?void 0:k.product_name,pageDefaultBackLink:"/catalog",cartComponent:y.CartHeader},{default:(0,o.w5)((()=>[f.productItem?((0,o.wg)(),(0,o.iD)("div",i,[(0,o.Wm)(v,{imageList:f.productItem.images,imgHeight:400,mode:"save-aspect-ratio"},null,8,["imageList"])])):(0,o.kq)("",!0),f.productItem?((0,o.wg)(),(0,o.j4)(C,{key:1},{default:(0,o.w5)((()=>{var r;return[(0,o.Wm)(W,{style:{"font-size":"1.2em"}},{default:(0,o.w5)((()=>[(0,o._)("h3",u,[(0,o._)("b",null,(0,n.zw)(f.productItem.product_name),1),l,f.productItem.product_option?((0,o.wg)(),(0,o.iD)("b",a,"["+(0,n.zw)(f.productItem.product_option)+"]",1)):(0,o.kq)("",!0),c,I.isAvailable?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("span",s,"(Нет в наличии)"))])])),_:1}),f.productItem.product_description?((0,o.wg)(),(0,o.j4)(j,{key:0,style:{width:"100%"}},{default:(0,o.w5)((()=>[(0,o.Wm)(b,null,{default:(0,o.w5)((()=>[(0,o.Wm)($,{slot:"header",lines:"none"},{default:(0,o.w5)((()=>[(0,o.Wm)(z,{class:"product-description",color:"medium",innerHTML:I.itemDescription},null,8,["innerHTML"])])),_:1}),(0,o.Wm)(C,{slot:"content"},{default:(0,o.w5)((()=>[(0,o.Wm)($,{lines:"none"})])),_:1})])),_:1})])),_:1})):(0,o.kq)("",!0),f.productItem.is_writable?((0,o.wg)(),(0,o.j4)($,{key:1,lines:"none"},{default:(0,o.w5)((()=>[(0,o.Wm)(U,{slot:"end",color:"primary",src:y.settingsOutline,onClick:e[0]||(e[0]=e=>t.$router.push("/catalog/product-edit-"+f.productId))},null,8,["src"])])),_:1})):(0,o.kq)("",!0),(0,o.Wm)($,{lines:"none"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(I.categories,(t=>((0,o.wg)(),(0,o.j4)(H,{outline:!0,color:"primary",key:t.group_id},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(t.group_name),1)])),_:2},1024)))),128))])),_:1}),null!==(r=f.productItem)&&void 0!==r&&r.options?((0,o.wg)(),(0,o.iD)("div",d,[(0,o.Wm)($,{lines:"none"},{default:(0,o.w5)((()=>[(0,o.Wm)(U,{src:y.layersOutline,color:"primary",slot:"start"},null,8,["src"]),(0,o.Wm)(O,null,{default:(0,o.w5)((()=>[p])),_:1})])),_:1}),(0,o.Wm)($,{lines:"none"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(f.productItem.options,(e=>((0,o.wg)(),(0,o.j4)(H,{onClick:r=>t.$router.replace(`/catalog/product-${e.product_id}`),color:"primary",key:e.product_id},{default:(0,o.w5)((()=>[(0,o.Wm)(O,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(e.product_option),1)])),_:2},1024),m,e.product_final_price>0?((0,o.wg)(),(0,o.j4)(O,{key:0},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(e.product_final_price)+(0,n.zw)(t.$heap.state.currencySign),1)])),_:2},1024)):(0,o.kq)("",!0)])),_:2},1032,["onClick"])))),128))])),_:1})])):(0,o.kq)("",!0),f.productItem.product_price!=f.productItem.product_final_price?((0,o.wg)(),(0,o.j4)($,{key:3,lines:"none"},{default:(0,o.w5)((()=>[(0,o.Wm)(U,{slot:"start",color:"primary",src:y.giftOutline},null,8,["src"]),(0,o.Wm)(O,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Акция до "+(0,n.zw)(I.promoFinish),1)])),_:1}),(0,o.Wm)(O,{slot:"end",color:"success",style:{"font-size":"1.2em"}},{default:(0,o.w5)((()=>[(0,o.Uk)("-"+(0,n.zw)(I.promoPercent)+"%",1)])),_:1})])),_:1})):(0,o.kq)("",!0),(0,o.Wm)($,{lines:"none"},{default:(0,o.w5)((()=>[(0,o.Wm)(U,{slot:"start",color:"primary",src:y.pricetagOutline},null,8,["src"]),"порция"==f.productItem.product_unit?((0,o.wg)(),(0,o.j4)(O,{key:0},{default:(0,o.w5)((()=>[(0,o.Uk)("Цена за "+(0,n.zw)(I.weight_in_gramms)+"г",1)])),_:1})):"порция мл"==f.productItem.product_unit?((0,o.wg)(),(0,o.j4)(O,{key:1},{default:(0,o.w5)((()=>[(0,o.Uk)("Цена за "+(0,n.zw)(I.weight_in_gramms)+"мл",1)])),_:1})):((0,o.wg)(),(0,o.j4)(O,{key:2},{default:(0,o.w5)((()=>[(0,o.Uk)("Цена за "+(0,n.zw)(f.productItem.product_unit),1)])),_:1})),(0,o.Wm)(O,{slot:"end",color:"primary",style:{"font-size":"1.2em"}},{default:(0,o.w5)((()=>[f.productItem.product_price!=f.productItem.product_final_price?((0,o.wg)(),(0,o.iD)("span",g,[(0,o._)("s",null,(0,n.zw)(f.productItem.product_price)+(0,n.zw)(t.$heap.state.currencySign),1),_])):(0,o.kq)("",!0),(0,o.Uk)(" "+(0,n.zw)(f.productItem.product_final_price)+(0,n.zw)(t.$heap.state.currencySign),1)])),_:1})])),_:1}),(0,o.Wm)($,{lines:"none"},{default:(0,o.w5)((()=>[(0,o.Wm)(U,{slot:"start",color:"primary",src:y.cartOutline},null,8,["src"]),I.inCart?((0,o.wg)(),(0,o.j4)(O,{key:0},{default:(0,o.w5)((()=>[(0,o.Uk)("В корзине ("+(0,n.zw)(f.productItem.product_unit)+")",1)])),_:1})):((0,o.wg)(),(0,o.j4)(O,{key:1},{default:(0,o.w5)((()=>[h])),_:1})),(0,o.Wm)(q,{slot:"end",buttonLayout:"horizontal",display:"inline",productItem:f.productItem},null,8,["productItem"])])),_:1}),I.inCart?((0,o.wg)(),(0,o.j4)($,{key:4,lines:"none"},{default:(0,o.w5)((()=>[(0,o.Wm)(U,{slot:"start",color:"primary",src:y.walletOutline},null,8,["src"]),(0,o.Wm)(O,null,{default:(0,o.w5)((()=>[w])),_:1}),(0,o.Wm)(O,{slot:"end",color:"primary",style:{"font-size":"1.2em"}},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(I.inCart)+(0,n.zw)(t.$heap.state.currencySign),1)])),_:1})])),_:1})):(0,o.kq)("",!0),null!=I.inCartComment?((0,o.wg)(),(0,o.j4)($,{key:5,lines:"none"},{default:(0,o.w5)((()=>[(0,o.Wm)(U,{slot:"start",color:"primary",src:y.chatboxEllipsesOutline},null,8,["src"]),(0,o.Wm)(x,{value:I.inCartComment,onChange:e[1]||(e[1]=t=>I.cartCommentUpdate(t.target.value)),placeholder:"заметка для продавца"},null,8,["value"])])),_:1})):(0,o.kq)("",!0)]})),_:1})):(0,o.kq)("",!0)])),_:1},8,["page-title","cartComponent"])}r(5069);var f=r(9755),I=r.n(f),k=r(2008),v=r(8903),W=r(8292),z=r(4242),$=r(3991),C=r(9052),b=r(7782),j={components:{ImageSliderComp:z.Z,CartAddButtons:$.Z,IonTextarea:W.g2,IonListHeader:W.yh,IonText:W.yW,IonIcon:W.gu,IonItem:W.Ie,IonChip:W.hM,IonLabel:W.Q$,IonList:W.q_,IonAccordion:W.We,IonAccordionGroup:W.eh},setup(){return{CartHeader:C.Z,compassOutline:v.gmD,cartOutline:v.Ox0,pricetagOutline:v.TuG,giftOutline:v._$o,walletOutline:v.S5P,chatboxEllipsesOutline:v._Pt,settingsOutline:v.C$N,layersOutline:v.Y1P}},data(){return{productId:this.$route.params.id,productItem:null,is_loading:0}},mounted(){this.getProduct()},computed:{categories(){var t,e,r,o,n,i;if(null===(t=this.productItem)||void 0===t||null===(e=t.member_of_groups)||void 0===e||!e.group_ids)return[];const u=null===(r=this.productItem)||void 0===r||null===(o=r.member_of_groups)||void 0===o?void 0:o.group_ids.split(","),l=null===(n=this.productItem)||void 0===n||null===(i=n.member_of_groups)||void 0===i?void 0:i.group_names.split(",");let a=[];for(let c in u)a.push({group_id:u[c],group_name:l[c]});return a},promoFinish(){try{return this.productItem.product_promo_finish.split(" ")[0].split("-").reverse().join(".")}catch(t){return null}},promoPercent(){return Math.round(100-this.productItem.product_final_price/this.productItem.product_price*100)},inCart(){const t=b.Z.cart.entryGet(this.productId);return t?t.data.entry_quantity*t.data.entry_price:0},inCartComment(){var t;const e=b.Z.cart.entryGet(this.productId);return e?null!==(t=e.data.entry_comment)&&void 0!==t?t:"":null},isAvailable(){return 1!=this.productItem.is_counted||this.productItem.product_quantity-this.productItem.product_quantity_reserved>0},weight_in_gramms(){return 1e3*this.productItem.product_weight},itemDescription(){var t,e;return null===(t=this.productItem)||void 0===t||null===(e=t.product_description)||void 0===e?void 0:e.replace(/<\/?[^>]+(>|$)/g,"").replace(/[\n\r]/g,"<br>")}},methods:{async getProduct(){if(1!=this.is_loading){try{this.is_loading=1,this.productItem=await I().post(k.Z.state.hostname+"Product/itemGet",{product_id:this.productId})}catch(r){var t,e;const o=null===r||void 0===r||null===(t=r.responseJSON)||void 0===t||null===(e=t.messages)||void 0===e?void 0:e.error;switch(o){case"notfound":this.$flash("Товар не найден"),this.$router.replace("/catalog");break}return!1}this.is_loading=0}},cartCommentUpdate(t){const e={product_id:this.productId,entry_comment:t};b.Z.cart.entryUpdate(e)}}},U=r(3744);const H=(0,U.Z)(j,[["render",y]]);var O=H}}]);
//# sourceMappingURL=2068.f331f611.js.map