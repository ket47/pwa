{"version":3,"file":"js/2812-legacy.dd305ff5.js","mappings":"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","sources":["webpack://Tezkel/./src/components/UserPasswordReset.vue","webpack://Tezkel/./src/components/UserPasswordReset.vue?ef19","webpack://Tezkel/./src/views/UserSignUp.vue","webpack://Tezkel/./src/views/UserSignUp.vue?0d8a"],"sourcesContent":["<template>\n  <ion-header>\n      <ion-toolbar>\n        <ion-title>Восстановление пароля</ion-title>\n        <ion-icon slot=\"end\" @click=\"closeModal();\" :icon=\"closeOutline\" size=\"large\"></ion-icon>\n      </ion-toolbar>\n  </ion-header>\n  <ion-content>\n      <form validate>\n        <ion-list>\n          <ion-item>\n            <ion-input label=\"Ваш номер телефона\" label-placement=\"stacked\" v-model=\"userphone\" placeholder=\"Ваш телефон\" required/>\n          </ion-item>\n          <ion-item>\n            <ion-input label=\"Ваш ник\" label-placement=\"stacked\" v-model=\"username\" placeholder=\"Имя, указанное вами при регистрации\"/>\n          </ion-item>\n        </ion-list>\n        <ion-button @click=\"passwordReset()\" expand=\"block\">Создать новый пароль</ion-button>\n      </form>\n      <div style=\"padding: 15px;font-size:0.8em;color:#999\">\n        Рекомендуем сначала проверить СМС сообщение с паролем, которое было выслано вам при регистрации в сервисе.\n      </div>\n\n      <div style=\"padding: 15px;font-size:0.8em\" @click=\"$router.push('/page/contacts')\">\n        Если у вас возникли сложности с восстановлением пароля, обращайтесь в <u style=\"color:blue\">службу поддержки</u>\n      </div>\n      \n  </ion-content>\n</template>\n\n<script>\nimport { \n  IonContent, \n  IonHeader, \n  IonTitle, \n  IonToolbar, \n  IonList, \n  IonItem,\n  IonInput,\n  IonButton,\n  IonIcon,\n\n  modalController \n}                   from '@ionic/vue';\nimport {\n    closeOutline\n}                   from 'ionicons/icons';\nimport jQuery       from \"jquery\";\n\nexport default {\n  components: {\n  IonContent, \n  IonHeader, \n  IonTitle, \n  IonToolbar, \n  IonList, \n  IonItem,\n  IonInput,\n  IonButton,\n  IonIcon,\n  },\n  props: [ 'phone' ],\n  setup(){\n    return {closeOutline}\n  },\n  data() {\n    return {\n      username: '',\n      userphone:this.phone\n    }\n  },\n  methods: {\n    closeModal(){\n      return modalController.dismiss()\n    },\n    async passwordReset(){\n      if( this.userphone.replace(/\\D/g,\"\").length<11 ){\n        alert(\"Проверьте ваш номер телефона\")\n        return \n      }\n      if(!this.username){\n        alert(\"Введите ваше имя при регистрации\")\n        return \n      }\n      let requestData = {\n        user_phone: '+'+this.userphone.replace(/\\D/g,\"\"),\n        user_name:  this.username\n      }\n      try{\n        await jQuery.post(`${this.$heap.state.hostname}User/passwordReset`, requestData)\n        this.$flash(`Ваш новый пароль выслан на номер '${this.userphone}'`)\n        this.closeModal()\n      } catch(err){\n        const message=err?.responseJSON?.messages?.error\n        if(message=='user_notfound'){\n          this.$flash(`Пользователь с телефоном '${this.userphone}' и именем '${this.username}' не найден`)\n        }else{\n          this.$flash(`Не удалось восстановить пароль`)\n        }\n      }\n    },\n  },\n  mouted(){\n    this.$topic.on('dismissModal',()=>{\n      this.closeModal()\n    })\n  }\n};\n</script>","import { render } from \"./UserPasswordReset.vue?vue&type=template&id=0b07e06e\"\nimport script from \"./UserPasswordReset.vue?vue&type=script&lang=js\"\nexport * from \"./UserPasswordReset.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <base-layout page-title=\"Регистрация нового пользователя\" pageDefaultBackLink=\"/user\">\n      <ion-card v-if=\"$heap.state.user.user_id>0\" style=\"background-color:var(--ion-color-success-tint)\">\n        <ion-card-header>\n          <ion-card-title color=\"primary\">\n            {{$heap.state.user.user_name}} {{$heap.state.user.user_surname}} {{$heap.state.user.user_middlename}}\n          </ion-card-title>\n        </ion-card-header>\n        <ion-card-content>\n          Вы уже вошли в систему с номером телефона <b>{{$heap.state.user.user_phone}}</b>\n        </ion-card-content>\n      </ion-card>\n      <ion-card v-else color=\"light\">\n        <ion-card-header>\n          <ion-card-title color=\"primary\">\n            Простая регистрация\n          </ion-card-title>\n        </ion-card-header>\n        <ion-card-content>\n          Для регистрации необходим только ваш номер мобильного телефона и имя, чтобы мы знали как к вам обращаться. \n        </ion-card-content>\n      </ion-card>\n      \n      <form novalidate>\n        <ion-list>\n          <ion-item lines=\"full\">\n            <div style=\"display:grid;grid-template-columns:100px auto\">\n              <div>\n                  <ion-label position=\"stacked\">Код</ion-label>\n                  <ion-input readonly>+7</ion-input>\n              </div>\n              <div>\n                  <ion-label position=\"stacked\">Мобильный телефон*</ion-label>\n                  <ion-input\n                    v-model=\"user_phone\"\n                    @ionChange=\"phoneFormat()\"\n                    name=\"phone\"\n                    type=\"tel\"\n                    inputmode=\"tel\"\n                    placeholder=\"(xxx)xxxxxxxxx\"\n                    required\n                    autocomplete=\"tel-national\"\n                  ></ion-input>            \n                  <ion-text color=\"danger\" slot=\"helper\"><p v-show=\"!phoneValid && submitted == true\" padding-left>Неверный номер телефона</p></ion-text>\n              </div>\n            </div>\n          </ion-item>\n          <ion-item lines=\"full\">\n            <ion-label position=\"stacked\">Ваш псевдоним*</ion-label>\n            <ion-input \n              v-model=\"user_name\"\n              name=\"username\"\n              type=\"text\" \n              placeholder=\"как к вам обращаться?\"\n              required\n              autocomplete=\"name\"\n            ></ion-input>\n            <ion-text color=\"danger\" slot=\"helper\">\n              <p v-show=\"!usernameValid && submitted == true\" padding-left>Проверьте ваш псевдоним</p>\n            </ion-text>\n          </ion-item>\n          <ion-item lines=\"full\">\n            <ion-label position=\"stacked\">Ваш е-маил (желательно заполнить)</ion-label>\n            <ion-input \n              v-model=\"user_email\"\n              name=\"email\"\n              type=\"email\" \n              placeholder=\"е-маил\"\n              required\n              autocomplete=\"email\"\n            ></ion-input>\n          </ion-item>\n        </ion-list>\n\n          <ion-card v-if=\"user_pass==genpass\" style=\"background-color:var(--ion-color-primary-tint)\">\n            <ion-card-content>\n              Мы придумали пароль <ion-chip style=\"font-family:monospace,serif\">{{user_pass}}</ion-chip> для вас, но вы можете использовать свой вариант. Пароль будет сохранен на этом устройстве.\n            </ion-card-content>\n          </ion-card>\n          <ion-item lines=\"full\">\n            <ion-label position=\"stacked\">Пароль (минимум 4 символа)*</ion-label>\n            <ion-input \n              v-model=\"user_pass\" \n              name=\"password\" \n              type=\"text\" \n              autocorrect=\"off\"\n              placeholder=\"пароль (минимум 4 символа)\"\n              required\n              style=\"font-family:monospace,serif\"\n              autocomplete=\"new-password\"\n            ></ion-input>\n            <ion-text color=\"danger\" slot=\"helper\">\n              <p v-show=\"!passwordValid && submitted == true\" padding-left>Пароль должен содержать не менее 4 символов.</p>\n            </ion-text>\n          </ion-item>\n<!--\n          <ion-item>\n            <ion-label position=\"stacked\" color=\"primary\">Пароль повтор*</ion-label>\n            <ion-input \n              v-model=\"user_pass_confirm\"\n              type=\"password\" \n              autocorrect=\"off\"\n              placeholder=\"пароль повтор\"\n              required\n            ></ion-input>\n            <ion-text color=\"danger\" slot=\"helper\">\n              <p v-show=\"user_pass!=user_pass_confirm && submitted == true\" padding-left>Пароль не совпадает с подтверждением</p>\n            </ion-text>\n          </ion-item>\n-->\n\n        <ion-row responsive-sm>\n          <ion-col>\n            <ion-button @click=\"onSubmit\" expand=\"block\">Зарегистрироваться</ion-button>\n          </ion-col>\n        </ion-row>\n        \n        <ion-row responsive-sm>\n          <ion-col>\n            <ion-button color=\"light\" expand=\"block\" @click=\"$router.replace('/user/sign-in')\">Уже есть учетная запись?</ion-button>\n          </ion-col>\n        </ion-row>\n\n      </form>\n  </base-layout>\n</template>\n\n<script>\nimport { \n  modalController,\n  alertController,\n  IonLabel,\n  IonInput,\n  IonItem,\n  IonText,\n  IonList,\n  IonButton,\n  IonCard,\n  IonCardHeader,\n  IonCardTitle,\n  IonCardContent,\n  IonChip,\n  IonCol,\n  IonRow,\n}                               from '@ionic/vue';\nimport User                     from '@/scripts/User.js'\nimport jQuery                   from \"jquery\";\nimport UserPasswordReset        from '@/components/UserPasswordReset.vue'\n\nexport default  {\n  components: {\n  IonLabel,\n  IonInput,\n  IonItem,\n  IonText,\n  IonList,\n  IonButton,\n  IonCard,\n  IonCardHeader,\n  IonCardTitle,\n  IonCardContent,\n  IonChip,\n  IonCol,\n  IonRow,\n  },\n  data(){\n    const genpass=this.passGenerate()\n    return {\n      submitted: false,\n      genpass:genpass,\n      user_pass:genpass,\n      user_pass_confirm:null,\n      user_phone:null,\n      user_phone_prefix:'7',\n      user_name:null,\n      user_email:null,\n    }\n  },\n  computed: {\n    phoneValid() {\n      return this.user_phone?.replace(/\\D/g,\"\").length == 10;\n    },\n    passwordValid() {\n      return this.user_pass?.length >= 4;\n    },\n    usernameValid() {\n      return this.user_name?.length > 0;\n    }\n  },\n  methods:{\n    async onSubmit() {\n      this.submitted = true;\n      if( !this.phoneValid || !this.passwordValid || !this.usernameValid){//this.user_pass!=this.user_pass_confirm || \n        return\n      }\n      let requestData = {\n        user_phone: this.user_phone_prefix+this.user_phone,\n        user_pass: this.user_pass,\n        user_pass_confirm: this.user_pass,\n        user_name: this.user_name.trim(),\n        user_email:this.user_email,\n        inviter_user_id:localStorage.inviter_user_id??0\n      }\n      \n      try{\n        await User.signUp(requestData);\n        this.phoneVerify()\n        //localStorage.signInData = JSON.stringify({user_phone: this.user_phone_prefix+this.user_phone,user_pass: this.user_pass});\n      } catch(err){\n        let exception_code=err?.responseJSON?.messages?.error;\n        if(exception_code=='user_phone_unverified'){\n          this.phoneVerify();\n          return\n        }\n        \n        exception_code='unknown';\n        try{\n          const invalid_field=Object.keys(JSON.parse(err.responseJSON.messages.error))[0]\n          const invalid_reason=Object.values(JSON.parse(err.responseJSON.messages.error))[0]\n          exception_code=invalid_field+'_'+invalid_reason\n        }catch{/** */}\n        \n        switch(exception_code){\n          case 'user_phone_notunique':\n            this.$flash(\"Пользователь с таким телефоном уже зарегистрирован\")\n            if( await this.forgotPassConfirm() ){\n              this.forgotPassModal()\n            }\n            break;\n          case 'user_phone_required':\n          case 'user_phone_invalid':\n          case 'user_phone_short':\n            this.$flash(\"Проверьте номер телефона\");\n            break;\n          case 'user_name_required':\n          case 'user_name_short':\n            this.$flash(\"Проверьте ваш псевдоним\");\n            break;\n          case 'user_email_invalid':\n            this.$flash(\"Проверьте ваш е-маил\");\n            break;\n          case 'user_email_notunique':\n            this.$flash(\"Такой е-маил уже используется\");\n            break;\n          case 'user_pass_required':\n            this.$flash(\"Пароль обязателен для заполнения\");\n            break;\n          case 'user_pass_short':\n            this.$flash(\"Пароль слишком короткий\");\n            break;\n          case 'user_pass_notmatches':\n            this.$flash(\"Пароль не совпадает с подтверждением\");\n            break;\n          default:\n            this.$flash(\"Не удалось войти зарегистрироваться\");\n        }\n      }\n    },\n    passGenerate(){\n      let pass=''\n      const length=4\n      const alphabet = 'abcdefghijklmnopqrstuvwxyz12345678901234567890'\n      for(let i=0;i<length;i++){\n        const index=Math.floor(Math.random()*alphabet.length)\n        pass+=alphabet[index]\n      }\n      return pass\n    },\n    phoneFormat(){\n      if( !this.user_phone ){\n        this.user_phone='';\n      }\n      try{\n        let user_phone=this.user_phone.replace(/\\D/g,\"\")\n        if(user_phone.length>10){\n          user_phone=user_phone.substring(user_phone.length-10)\n        }\n        this.user_phone=user_phone\n      } catch{/** */}\n    },\n    phoneVerify(){\n      // let requestData = {\n      //   user_phone: this.user_phone_prefix+this.user_phone\n      // }\n      try{\n        this.$heap.state.user.tmp_userphone=this.user_phone_prefix+this.user_phone\n        this.$go('/user/verify-phone')\n        //this.$router.push({name:'UserVerifyPhone',query:requestData})\n      } catch{\n        this.$flash(\"Не удалось выслать смс с подтверждением\")\n      }\n    },\n    async forgotPassModal() {\n      this.modalOpen = true\n      const phone=(this.user_phone_prefix??'')+(this.user_phone??'')\n      const modal = await modalController\n        .create({\n          component: UserPasswordReset,\n          componentProps: {phone},\n          initialBreakpoint: 0.5,\n          breakpoints: [0.5, 0.75]\n        })\n      return modal.present();\n    },\n    async forgotPassConfirm(){\n        const phone=(this.user_phone_prefix??'')+(this.user_phone??'')\n        const alert = await alertController.create({\n            header: 'Восстановить пароль?',\n            message:`Возможно вы уже регистрировались с телефоном ${phone}.\\n\\nМожем восстановить пароль.`,\n            buttons: [\n              {\n                text: 'Отменить',\n                role: 'cancel',\n              },\n              {\n                text: 'Восстановить',\n                role: 'confirm',\n              },\n            ],\n        });\n        await alert.present();\n        const { role } = await alert.onDidDismiss();\n        if( role=='confirm' ){\n            return true\n        }\n        return false\n    },\n  },\n}\n</script>","import { render } from \"./UserSignUp.vue?vue&type=template&id=5fd90626\"\nimport script from \"./UserSignUp.vue?vue&type=script&lang=js\"\nexport * from \"./UserSignUp.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["validate","_createElementVNode","style","_createVNode","_component_ion_header","_component_ion_toolbar","_component_ion_title","_component_ion_icon","slot","onClick","_cache","$event","$options","closeModal","icon","$setup","closeOutline","size","_component_ion_content","_hoisted_1","_component_ion_list","_component_ion_item","_component_ion_input","label","$data","userphone","placeholder","required","username","_component_ion_button","passwordReset","expand","_hoisted_2","_ctx","$router","push","_hoisted_3","components","IonContent","IonHeader","IonTitle","IonToolbar","IonList","IonItem","IonInput","IonButton","IonIcon","props","setup","data","this","phone","methods","modalController","dismiss","replace","length","alert","requestData","user_phone","user_name","jQuery","$heap","state","hostname","$flash","err","_err$responseJSON","_err$responseJSON$mes","message","responseJSON","messages","error","mouted","$topic","on","__exports__","render","novalidate","_createBlock","_component_base_layout","pageDefaultBackLink","user","user_id","_component_ion_card","_component_ion_card_header","_component_ion_card_title","color","_toDisplayString","user_surname","user_middlename","_component_ion_card_content","lines","_component_ion_label","position","readonly","onIonChange","phoneFormat","name","type","inputmode","autocomplete","_component_ion_text","phoneValid","submitted","_hoisted_4","usernameValid","user_email","user_pass","genpass","_component_ion_chip","autocorrect","_hoisted_5","passwordValid","_component_ion_row","_component_ion_col","onSubmit","IonLabel","IonText","IonCard","IonCardHeader","IonCardTitle","IonCardContent","IonChip","IonCol","IonRow","passGenerate","user_pass_confirm","user_phone_prefix","computed","_this$user_phone","_this$user_pass","_this$user_name","_localStorage$inviter","trim","inviter_user_id","localStorage","User","signUp","phoneVerify","exception_code","invalid_field","Object","keys","JSON","parse","invalid_reason","values","_unused","forgotPassConfirm","forgotPassModal","pass","alphabet","i","index","Math","floor","random","substring","_unused2","tmp_userphone","$go","_unused3","_this$user_phone_pref","_this$user_phone2","modalOpen","modal","create","component","UserPasswordReset","componentProps","initialBreakpoint","breakpoints","present","_this$user_phone_pref2","_this$user_phone3","alertController","header","buttons","text","role","onDidDismiss"],"sourceRoot":""}