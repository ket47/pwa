"use strict";(self["webpackChunktezkel"]=self["webpackChunktezkel"]||[]).push([[119],{132:function(n,t,o){o.d(t,{Z:function(){return f}});var l=o(6252);const i=(0,l.Uk)("Фискальный чек"),e=["src"],u={key:0,style:{position:"fixed",top:"200px",left:"calc( 50% - 50px )"}},a=["src"];function s(n,t,o,s,r,d){const c=(0,l.up)("ion-icon"),p=(0,l.up)("ion-title"),m=(0,l.up)("ion-toolbar"),w=(0,l.up)("ion-header"),f=(0,l.up)("ion-content");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l.Wm)(m,{color:"secondary"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{icon:s.receiptOutline,slot:"start"},null,8,["icon"]),(0,l.Wm)(p,{slot:"start"},{default:(0,l.w5)((()=>[i])),_:1}),(0,l.Wm)(c,{icon:s.closeOutline,onClick:t[0]||(t[0]=n=>{s.closeModal()}),slot:"end",size:"large"},null,8,["icon"])])),_:1})])),_:1})])),_:1}),(0,l.Wm)(f,null,{default:(0,l.w5)((()=>[(0,l._)("iframe",{src:o.billLink,style:{width:"100%",height:"85%",border:"none"},onLoad:t[1]||(t[1]=n=>d.onLoad())},null,40,e),r.loadAnimation?((0,l.wg)(),(0,l.iD)("div",u,[(0,l._)("img",{src:s.loading},null,8,a)])):(0,l.kq)("",!0)])),_:1})],64)}var r=o(2066),d=o(659),c=o(8903),p={components:{IonTitle:r.wd,IonIcon:r.gu,IonToolbar:r.sr,IonHeader:r.Gu,IonContent:r.W2},props:["billLink"],setup(){const n=function(){r.Fy.dismiss()};return{closeModal:n,closeOutline:c.fID,receiptOutline:c.d71,loading:d}},data(){return{loadAnimation:1}},methods:{onLoad(){this.loadAnimation=0}}},m=o(3744);const w=(0,m.Z)(p,[["render",s]]);var f=w},3119:function(n,t,o){o.r(t),o.d(t,{default:function(){return f}});var l=o(6252),i=o(3577);const e=(0,l.Uk)("Чеков нет");function u(n,t,o,u,a,s){const r=(0,l.up)("ion-icon"),d=(0,l.up)("ion-row"),c=(0,l.up)("ion-col"),p=(0,l.up)("ion-grid"),m=(0,l.up)("ion-label"),w=(0,l.up)("ion-item"),f=(0,l.up)("ion-list"),k=(0,l.up)("ion-skeleton-text"),v=(0,l.up)("base-layout");return(0,l.wg)(),(0,l.j4)(v,{pageTitle:"Мои чеки",pageDefaultBackLink:"/user"},{default:(0,l.w5)((()=>{var t,o;return[(null===(t=a.invoiceList)||void 0===t?void 0:t.length)>0?((0,l.wg)(),(0,l.j4)(f,{key:0},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.invoiceList,(t=>((0,l.wg)(),(0,l.j4)(w,{key:t.order_id,button:"",onClick:n=>s.billOpen(null===t||void 0===t?void 0:t.invoice_link)},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{icon:u.receiptOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Фискальный чек от "+(0,i.zw)(null===t||void 0===t?void 0:t.invoice_date),1)])),_:2},1024),(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Uk)(" заказ №"+(0,i.zw)(null===t||void 0===t?void 0:t.order_id),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),(0,l.Wm)(m,{slot:"end"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(null===t||void 0===t?void 0:t.order_sum_total)+(0,i.zw)(n.$heap.state.currencySign),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):(0,l.kq)("",!0),0==(null===(o=a.invoiceList)||void 0===o?void 0:o.length)?((0,l.wg)(),(0,l.j4)(f,{key:1},{default:(0,l.w5)((()=>[(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[e])),_:1})])),_:1})])),_:1})):(0,l.kq)("",!0),null==a.invoiceList?((0,l.wg)(),(0,l.j4)(f,{key:2},{default:(0,l.w5)((()=>[((0,l.wg)(),(0,l.iD)(l.HY,null,(0,l.Ko)([1,2,3],(n=>(0,l.Wm)(w,{key:n},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{style:{"background-color":"var(--ion-color-light)"}}),(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(k,{animated:"",style:{width:"100%"}})])),_:1}),(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(m,{color:"primary"},{default:(0,l.w5)((()=>[(0,l.Wm)(k,{animated:"",style:{width:"100px"}})])),_:1})])),_:1})])),_:1})])),_:1})])),_:2},1024))),64))])),_:1})):(0,l.kq)("",!0)]})),_:1})}o(5306);var a=o(2066),s=o(8903),r=o(132),d=o(9755),c=o.n(d),p={components:{IonList:a.q_,IonItem:a.Ie,IonGrid:a.jY,IonRow:a.Nd,IonCol:a.wI,IonSkeletonText:a.CK,IonLabel:a.Q$,IonIcon:a.gu},setup(){return{receiptOutline:s.d71}},data(){return{invoiceList:null,isOpen:!1,billLink:""}},methods:{async listGet(){try{const n={has_invoice:"1"};this.invoiceList=await c().post(this.$heap.state.hostname+"Order/listGet",n),console.log(this.invoiceList)}catch{}},async billOpen(n){if(!n)return void this.$flash("Невозможно открыть чек");n=n.replace(/"/g,"");const t=await a.Fy.create({component:r.Z,componentProps:{billLink:n},initialBreakpoint:.85,breakpoints:[0,.85,1]}),o=function(){t.dismiss()};return this.$topic.on("dismissModal",o),t.present()}},mounted(){this.listGet()}},m=o(3744);const w=(0,m.Z)(p,[["render",u]]);var f=w},659:function(n,t,o){n.exports=o.p+"img/loading.30880178.svg"}}]);
//# sourceMappingURL=119.a5f9294a.js.map