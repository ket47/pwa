"use strict";(self["webpackChunktezkel"]=self["webpackChunktezkel"]||[]).push([[1163],{2927:function(e,t,r){r.d(t,{Z:function(){return g}});var n=r(6252),o=r(3577),i=function(e){return(0,n.dD)("data-v-0e00b8d4"),e=e(),(0,n.Cn)(),e},u={class:"slide-title"},s=i((function(){return(0,n._)("div",{id:"hcat_widget_grid"},null,-1)}));function a(e,t,r,i,a,l){var d=(0,n.up)("ion-img"),c=(0,n.up)("ion-thumbnail"),p=(0,n.up)("swiper-slide"),m=(0,n.up)("swiper");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(m,{id:"hcat_widget_grid","slides-per-view":4.5,"space-between":10},{default:(0,n.w5)((function(){return[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.groupList,(function(t){return(0,n.wg)(),(0,n.j4)(p,{key:t.group_id,onClick:function(){return e.onClick(t.group_id)}},{default:(0,n.w5)((function(){return[(0,n.Wm)(c,{style:{width:"70px",height:"70px"}},{default:(0,n.w5)((function(){return[t.image_hash?((0,n.wg)(),(0,n.j4)(d,{key:0,style:{"border-radius":"10px",border:"1px solid #ddd"},src:`${e.$heap.state.hostname}image/get.php/${t.image_hash}.150.150.webp`},null,8,["src"])):(0,n.kq)("",!0)]})),_:2},1024),(0,n._)("div",u,(0,o.zw)(t.group_name),1)]})),_:2},1032,["onClick"])})),128))]})),_:1},8,["slides-per-view"]),s],64)}var l=r(8292),d=r(3181),c=(0,n.aZ)({components:{IonImg:l.Xz,IonThumbnail:l.Bs,Swiper:d.t,SwiperSlide:d.o},props:["groupList","onClick"]}),p=r(3744);const m=(0,p.Z)(c,[["render",a],["__scopeId","data-v-0e00b8d4"]]);var g=m},4966:function(e,t,r){r.d(t,{Z:function(){return f}});var n=r(6252),o=r(3577),i={key:0,style:{position:"relative"}},u=["src"],s=["src"];function a(e,t,r,a,l,d){var c=(0,n.up)("ion-icon"),p=(0,n.up)("ion-fab-button"),m=(0,n.up)("ion-fab"),g=(0,n.up)("swiper-slide"),_=(0,n.up)("swiper");return l.expanded?((0,n.wg)(),(0,n.iD)("div",i,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.imageList,(function(t){return(0,n.wg)(),(0,n.iD)("div",{key:t.image_hash,style:{border:"2px solid var(--ion-color-primary)"}},[(0,n._)("img",{src:`${e.$heap.state.hostname}image/get.php/${t.image_hash}.1000.1000.webp`},null,8,u)])})),128)),(0,n.Wm)(m,{horizontal:"end",vertical:"top",slot:"fixed"},{default:(0,n.w5)((function(){return[(0,n.Wm)(p,{color:"light"},{default:(0,n.w5)((function(){return[(0,n.Wm)(c,{src:a.contract,size:"large",onClick:t[0]||(t[0]=function(e){return d.minimize()})},null,8,["src"])]})),_:1})]})),_:1})])):((0,n.wg)(),(0,n.j4)(_,{key:1,modules:a.modules,autoplay:{delay:3e3,disableOnInteraction:!1},loop:!0,effect:"fade",style:(0,o.j5)(`height: ${r.imgHeight||"100%"};`)},{default:(0,n.w5)((function(){return[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.imageList,(function(t){return(0,n.wg)(),(0,n.j4)(g,{key:t.image_hash},{default:(0,n.w5)((function(){return[(0,n._)("div",{class:(0,o.C_)(`${r.mode?r.mode:""} cropper`),style:(0,o.j5)(`height: ${r.imgHeight+"px"||0};`)},[(0,n._)("img",{style:(0,o.j5)(`min-height: ${r.imgHeight+"px;"||0}`),src:`${e.$heap.state.hostname}image/get.php/${t.image_hash}.${4*r.imgHeight||1200}.${4*r.imgHeight||1200}.webp`},null,12,s)],6)]})),_:2},1024)})),128))]})),_:1},8,["modules","style"]))}var l=r(8903),d=r(8292),c=r(702),p=r(3181),m={components:{Swiper:p.t,SwiperSlide:p.o,IonFab:d.IJ,IonFabButton:d.W4,IonIcon:d.gu},props:["imageList","imgHeight","mode"],setup(){return{modules:[c.pt,c.xW],expand:l.jnR,contract:l.LJB}},data(){return{expanded:!1,vh:0,vw:0}},methods:{maximize(){this.expanded=!0,this.vh=document.getElementsByTagName("ion-content")[0].clientHeight,this.vw=document.getElementsByTagName("ion-content")[0].clientWidth},minimize(){this.expanded=!1,this.vh=document.getElementsByTagName("ion-content")[0].clientHeight,this.vw=document.getElementsByTagName("ion-content")[0].clientWidth}}},g=r(3744);const _=(0,g.Z)(m,[["render",a],["__scopeId","data-v-57ad0950"]]);var f=_},1301:function(e,t,r){r.r(t),r.d(t,{default:function(){return J}});var n=r(6252),o=r(3577),i=function(e){return(0,n.dD)("data-v-2a3297a9"),e=e(),(0,n.Cn)(),e},u={class:"store-info-container"},s={key:0,slot:"start",class:"avatar-container"},a={class:"avatar"},l=["src"],d=(0,n.Uk)("подробнее"),c=(0,n.Uk)("ИНН"),p=(0,n.Uk)("Телефон"),m={style:{"scrollbar-width":"none","overflow-x":"scroll",display:"flex"}},g={key:0,class:"delivery-variant"},_=i((function(){return(0,n._)("br",null,null,-1)})),f={key:1,class:"delivery-variant"},h=i((function(){return(0,n._)("br",null,null,-1)})),w={key:2,class:"delivery-variant"},v=(0,n.Uk)("Самовывоз"),k=i((function(){return(0,n._)("br",null,null,-1)})),I=i((function(){return(0,n._)("b",null,"0₽",-1)})),y={key:0,class:"group-fixed-block hidden-block"},b=i((function(){return(0,n._)("h4",{style:{margin:"8px 16px"}},[(0,n._)("b",null,"Категории")],-1)})),x={style:{margin:"0"}},W=(0,n.Uk)("добавить ");function S(e,t,r,i,S,q){var $,G=(0,n.up)("image-slider-comp"),P=(0,n.up)("ion-text"),j=(0,n.up)("ion-icon"),C=(0,n.up)("ion-item"),Z=(0,n.up)("ion-label"),z=(0,n.up)("ion-list"),D=(0,n.up)("ion-accordion"),L=(0,n.up)("ion-accordion-group"),H=(0,n.up)("store-opened-indicator"),T=(0,n.up)("ion-col"),U=(0,n.up)("ion-chip"),O=(0,n.up)("ion-row"),B=(0,n.up)("ion-grid"),V=(0,n.up)("ion-segment-button"),Y=(0,n.up)("ion-segment"),K=(0,n.up)("ion-searchbar"),M=(0,n.up)("group-list"),N=(0,n.up)("product-list"),A=(0,n.up)("swiper-slide"),R=(0,n.up)("swiper"),E=(0,n.up)("base-layout");return(0,n.wg)(),(0,n.j4)(E,{pageDefaultBackLink:"/catalog","page-class":"store-page","page-title":null!==($=this.storeItem.store_name)&&void 0!==$?$:"Магазин"},{default:(0,n.w5)((function(){var r,$;return[(0,n._)("div",null,[(0,n._)("div",u,[(0,n.Wm)(G,{imageList:S.storeItem.images,imgHeight:300,mode:"crop-to-fit"},null,8,["imageList"]),(0,n.Wm)(z,{class:"store-info"},{default:(0,n.w5)((function(){return[(0,n.Wm)(C,{lines:"none"},{default:(0,n.w5)((function(){return[S.storeItem.avatarImage?((0,n.wg)(),(0,n.iD)("div",s,[(0,n._)("div",a,[(0,n._)("img",{src:e.$heap.state.hostname+"image/get.php/"+S.storeItem.avatarImage+".200.200.webp"},null,8,l)])])):(0,n.kq)("",!0),(0,n.Wm)(P,{style:{"font-size":"1.2em"}},{default:(0,n.w5)((function(){return[(0,n._)("b",null,(0,o.zw)(S.storeItem.store_name),1)]})),_:1}),S.storeItem.is_writable?((0,n.wg)(),(0,n.j4)(j,{key:1,slot:"end",color:"primary",onClick:t[0]||(t[0]=function(t){return e.$router.push(`/catalog/store-edit-${S.storeItem.store_id}`)}),icon:i.settingsOutline,style:{"font-size":"24px"}},null,8,["icon"])):(0,n.kq)("",!0)]})),_:1}),(0,n.Wm)(L,{style:{width:"100%"}},{default:(0,n.w5)((function(){return[(0,n.Wm)(D,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(C,{slot:"header",lines:"none"},{default:(0,n.w5)((function(){return[S.storeItem.store_description?((0,n.wg)(),(0,n.j4)(P,{key:0,class:"store-description",color:"medium"},{default:(0,n.w5)((function(){return[(0,n.Uk)((0,o.zw)(S.storeItem.store_description),1)]})),_:1})):((0,n.wg)(),(0,n.j4)(P,{key:1,color:"medium"},{default:(0,n.w5)((function(){return[d]})),_:1}))]})),_:1}),(0,n.Wm)(z,{slot:"content"},{default:(0,n.w5)((function(){return[S.storeItem.store_company_name?((0,n.wg)(),(0,n.j4)(C,{key:0,lines:"none"},{default:(0,n.w5)((function(){return[(0,n.Wm)(P,null,{default:(0,n.w5)((function(){return[(0,n._)("b",null,(0,o.zw)(S.storeItem.store_company_name),1)]})),_:1})]})),_:1})):(0,n.kq)("",!0),S.storeItem.store_tax_num?((0,n.wg)(),(0,n.j4)(C,{key:1,lines:"none"},{default:(0,n.w5)((function(){return[(0,n.Wm)(Z,{color:"medium"},{default:(0,n.w5)((function(){return[c]})),_:1}),(0,n.Wm)(P,{color:"dark"},{default:(0,n.w5)((function(){return[(0,n.Uk)((0,o.zw)(S.storeItem.store_tax_num),1)]})),_:1})]})),_:1})):(0,n.kq)("",!0),S.storeItem.store_phone?((0,n.wg)(),(0,n.j4)(C,{key:2,lines:"none"},{default:(0,n.w5)((function(){return[(0,n.Wm)(Z,{color:"medium"},{default:(0,n.w5)((function(){return[p]})),_:1}),(0,n.Wm)(P,{color:"dark"},{default:(0,n.w5)((function(){return[(0,n.Uk)((0,o.zw)(S.storeItem.store_phone),1)]})),_:1})]})),_:1})):(0,n.kq)("",!0),S.storeItem.locations?((0,n.wg)(),(0,n.j4)(C,{key:3,lines:"none"},{default:(0,n.w5)((function(){return[(0,n.Wm)(P,{color:"dark"},{default:(0,n.w5)((function(){var e;return[(0,n.Uk)((0,o.zw)(null===(e=S.storeItem.locations)||void 0===e?void 0:e[0].location_address),1)]})),_:1})]})),_:1})):(0,n.kq)("",!0)]})),_:1})]})),_:1})]})),_:1}),(0,n.Wm)(B,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(O,{class:"ion-justify-content-between"},{default:(0,n.w5)((function(){return[(0,n.Wm)(T,{size:"auto"},{default:(0,n.w5)((function(){return[(0,n.Wm)(H,{storeItem:S.storeItem},null,8,["storeItem"])]})),_:1}),(0,n.Wm)(T,{size:"auto"},{default:(0,n.w5)((function(){return[S.storeItem.store_group_names?((0,n.wg)(),(0,n.j4)(U,{key:0,color:"medium",background:"transparent"},{default:(0,n.w5)((function(){return[(0,n._)("label",null,(0,o.zw)(S.storeItem.store_group_names),1)]})),_:1})):(0,n.kq)("",!0)]})),_:1})]})),_:1})]})),_:1})]})),_:1}),(0,n._)("div",m,[S.storeItem.delivery_cost>0?((0,n.wg)(),(0,n.iD)("div",g,[(0,n._)("div",null,[(0,n.Wm)(Z,null,{default:(0,n.w5)((function(){return[(0,n.Uk)("Доставит "+(0,o.zw)(e.$heap.getters.settings.app_title),1)]})),_:1}),_,null!==(r=S.storeItem)&&void 0!==r&&null!==($=r.deliveryTime)&&void 0!==$&&$.timeMin?((0,n.wg)(),(0,n.j4)(P,{key:0},{default:(0,n.w5)((function(){return[(0,n.Uk)((0,o.zw)(S.storeItem.deliveryTime.timeMin)+"-"+(0,o.zw)(S.storeItem.deliveryTime.timeMax)+"мин",1)]})),_:1})):(0,n.kq)("",!0)]),(0,n._)("div",null,[S.storeItem.delivery_cost>0?((0,n.wg)(),(0,n.j4)(P,{key:0},{default:(0,n.w5)((function(){return[(0,n._)("b",null,(0,o.zw)(S.storeItem.delivery_cost)+"₽",1)]})),_:1})):(0,n.kq)("",!0)])])):(0,n.kq)("",!0),1==S.storeItem.store_delivery_allow?((0,n.wg)(),(0,n.iD)("div",f,[(0,n._)("div",null,[(0,n.Wm)(Z,null,{default:(0,n.w5)((function(){return[(0,n.Uk)("Доставит "+(0,o.zw)(S.storeItem.member_of_groups.group_names),1)]})),_:1}),h]),(0,n._)("div",null,[S.storeItem.delivery_cost>0?((0,n.wg)(),(0,n.j4)(P,{key:0},{default:(0,n.w5)((function(){return[(0,n._)("b",null,(0,o.zw)(S.storeItem.store_delivery_cost)+"₽",1)]})),_:1})):(0,n.kq)("",!0)])])):(0,n.kq)("",!0),1==S.storeItem.store_pickup_allow?((0,n.wg)(),(0,n.iD)("div",w,[(0,n._)("div",null,[(0,n.Wm)(Z,null,{default:(0,n.w5)((function(){return[v]})),_:1}),k]),(0,n._)("div",null,[(0,n.Wm)(P,null,{default:(0,n.w5)((function(){return[I]})),_:1})])])):(0,n.kq)("",!0)])]),S.storeGroups?((0,n.wg)(),(0,n.iD)("div",y,[(0,n.Wm)(Y,{modelValue:S.groupSelectedParentId,"onUpdate:modelValue":t[1]||(t[1]=function(e){return S.groupSelectedParentId=e}),scrollable:"",style:{"scrollbar-width":"none"},class:"groups-container"},{default:(0,n.w5)((function(){return[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(S.storeGroups,(function(e){return(0,n.wg)(),(0,n.j4)(V,{key:e.group_id,value:e.group_id,onClick:function(t){return q.groupSelectParent(e.group_id,1)},ref_for:!0,ref:"group-tab-"+e.group_id},{default:(0,n.w5)((function(){return[(0,n.Wm)(Z,null,{default:(0,n.w5)((function(){return[(0,n.Uk)((0,o.zw)(e.group_name),1)]})),_:2},1024)]})),_:2},1032,["value","onClick"])})),128))]})),_:1},8,["modelValue"])])):(0,n.kq)("",!0),(0,n.Wm)(K,{class:"search-container",modelValue:S.searchRequest,"onUpdate:modelValue":t[2]||(t[2]=function(e){return S.searchRequest=e}),placeholder:"Поиск у этого продавца",onInput:t[3]||(t[3]=function(e){return q.productListGet({name_query:e.target.value,name_query_fields:"product_name,product_code"})})},null,8,["modelValue"]),b,S.storeGroups?((0,n.wg)(),(0,n.j4)(M,{key:1,groupList:S.storeGroups,onClick:function(e){q.groupSelectParent(e,!0)}},null,8,["groupList","onClick"])):(0,n.kq)("",!0),S.storeGroups?((0,n.wg)(),(0,n.j4)(R,{key:2,pager:"true",initialSlide:0,speed:400,watchSlidesProgress:!1,grabCursor:!0,touchStartForcePreventDefault:!0,slidesPerView:1.1,pagination:!1,centeredSlides:!1,class:"product-list-slider",onSlideChange:t[4]||(t[4]=function(e){return q.groupSliderChanged(e)})},{default:(0,n.w5)((function(){return[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(S.storeGroups,(function(e){return(0,n.wg)(),(0,n.j4)(A,{key:e.group_id},{default:(0,n.w5)((function(){return[(0,n.Wm)(B,{class:"product-list"},{default:(0,n.w5)((function(){return[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.children,(function(e){return(0,n.wg)(),(0,n.j4)(O,{key:e.group_id,ref_for:!0,ref:"group-"+e.group_id,"data-group_id":e.group_id},{default:(0,n.w5)((function(){return[(0,n.Wm)(T,{class:"group-title",size:"12"},{default:(0,n.w5)((function(){return[(0,n._)("h5",x,[(0,n.Uk)((0,o.zw)(e.group_name)+" ",1),1==S.storeItem.is_writable?((0,n.wg)(),(0,n.j4)(U,{key:0,onClick:function(t){return q.productItemCreate(e.group_id)}},{default:(0,n.w5)((function(){return[(0,n.Wm)(j,{src:i.addOutline},null,8,["src"]),W]})),_:2},1032,["onClick"])):(0,n.kq)("",!0)])]})),_:2},1024),(0,n.Wm)(T,{size:"12"},{default:(0,n.w5)((function(){return[(0,n.Wm)(N,{productList:S.storeProducts[e.group_id]},null,8,["productList"])]})),_:2},1024)]})),_:2},1032,["data-group_id"])})),128))]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1},8,["slidesPerView"])):(0,n.kq)("",!0)])]})),_:1},8,["page-title"])}var q=r(8439),$=r(6835),G=r(8534),P=(r(4916),r(5306),r(8292)),j=r(702),C=r(3181),Z=r(8903),z=r(4966),D=r(2927),L={class:"product_list_widget_grid"};function H(e,t,r,o,i,u){var s=(0,n.up)("product-item");return(0,n.wg)(),(0,n.iD)("div",L,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.productList,(function(e){return(0,n.wg)(),(0,n.iD)("div",{key:e.product_id},[(0,n.Wm)(s,{productItem:e},null,8,["productItem"])])})),128))])}var T=r(8336),U={props:["productList"],components:{ProductItem:T.Z}},O=r(3744);const B=(0,O.Z)(U,[["render",H],["__scopeId","data-v-fcf4f40a"]]);var V=B,Y=r(6181),K=r(9755),M=r.n(K),N=r(2008),A=r(4405),R={components:{IonText:P.yW,IonCol:P.wI,IonIcon:P.gu,IonRow:P.Nd,IonGrid:P.jY,IonLabel:P.Q$,IonSegmentButton:P.GO,IonSegment:P.cJ,IonChip:P.hM,IonSearchbar:P.VI,IonAccordion:P.We,IonAccordionGroup:P.eh,IonList:P.q_,IonItem:P.Ie,ImageSliderComp:z.Z,StoreOpenedIndicator:Y.Z,Swiper:C.t,SwiperSlide:C.o,GroupList:D.Z,ProductList:V},setup(){return{search:Z.yC4,settingsOutline:Z.C$N,rocketOutline:Z.G$D,compassOutline:Z.gmD,addOutline:Z.s6O,slideModules:[j.pt]}},data(){return{storeId:this.$route.params.id,query:this.$route.query,searchRequest:"",storeItem:[],storeProducts:{},storeGroups:null,groupSelectedParentId:-1,sliderMaxHeight:500,offsetModificator:150,can_reload_at:0}},methods:{itemGet(){var e=this;return(0,G.Z)((0,$.Z)().mark((function t(){var r,n,o,i,u;return(0,$.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=Date.now(),!(e.can_reload_at>r)){t.next=3;break}return t.abrupt("return");case 3:return e.can_reload_at=r+1e4,t.prev=4,t.next=7,M().post(`${N.Z.state.hostname}Store/itemGet`,{store_id:e.storeId,distance_include:1});case 7:n=t.sent,e.storeItem=e.itemPrepare(n),e.storeId=n.store_id,e.groupTreeGet({store_id:e.storeId}),N.Z.commit("setCurrentStore",e.storeItem),t.next=24;break;case 14:t.prev=14,t.t0=t["catch"](4),u=null===t.t0||void 0===t.t0||null===(o=t.t0.responseJSON)||void 0===o||null===(i=o.messages)||void 0===i?void 0:i.error,t.t1=u,t.next="notfound"===t.t1?20:23;break;case 20:return e.$flash("Продавец не найден"),e.$router.replace("/catalog"),t.abrupt("break",23);case 23:return t.abrupt("return",!1);case 24:case"end":return t.stop()}}),t,null,[[4,14]])})))()},itemPrepare(e){var t;return e.member_of_groups.group_names&&(e.store_group_names=e.member_of_groups.group_names),e.deliveryTime={},null!==(t=e.locations[0])&&void 0!==t&&t.distance&&(e.deliveryTime=A.Z.deliveryTimeCalculate(e.locations[0].distance,e.store_time_preparation)),e.avatarImage="",e.avatar.length>0&&(e.avatarImage=e.avatar[0].image_hash),e},productListGet(){var e=arguments,t=this;return(0,G.Z)((0,$.Z)().mark((function r(){var n,o,i;return(0,$.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=e.length>0&&void 0!==e[0]?e[0]:{},n.store_id=t.storeId,n.is_active=1,!n.name_query||""!=n.name_query){r.next=6;break}return t.groupTreeGet({store_id:t.storeId}),r.abrupt("return");case 6:return n.limit=200,o={},r.prev=8,r.next=11,M().post(N.Z.state.hostname+"Product/listGet",n);case 11:o=r.sent,r.next=16;break;case 14:r.prev=14,r.t0=r["catch"](8);case 16:t.productListPrepare(o.product_list),t.groupOtherAdd(),i=t,setTimeout((function(){i.groupSelect()}),0);case 20:case"end":return r.stop()}}),r,null,[[8,14]])})))()},productListPrepare(e){var t=1;this.storeProducts={};var r,n=(0,q.Z)(e);try{for(n.s();!(r=n.n()).done;){var o,i,u,s,a=r.value;if(this.storeGroups)if(!this.storeProducts[null!==(i=a.group_id)&&void 0!==i?i:0])this.storeProducts[null!==(u=a.group_id)&&void 0!==u?u:0]=[],this.storeProducts[null!==(s=a.group_id)&&void 0!==s?s:0].category_order=t++;this.storeProducts[null!==(o=a.group_id)&&void 0!==o?o:0].push(a)}}catch(l){n.e(l)}finally{n.f()}},productItemCreate(e){var t=this;return(0,G.Z)((0,$.Z)().mark((function r(){var n,o;return(0,$.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,n={store_id:t.storeId,product_name:"Новый товар",product_price:1e3,product_promo_price:1e3},r.next=4,M().post(`${N.Z.state.hostname}Product/itemCreate`,n);case 4:if(o=r.sent,!e){r.next=8;break}return r.next=8,M().post(`${N.Z.state.hostname}Product/itemUpdateGroup`,{product_id:o,group_id:e,is_joined:1});case 8:t.$router.push(`/catalog/product-edit-${o}`),t.$flash("Добавлен 'Новый товар'"),r.next=15;break;case 12:r.prev=12,r.t0=r["catch"](0),t.$flash("Не удалось создать товар");case 15:case"end":return r.stop()}}),r,null,[[0,12]])})))()},groupTreeGet(e){var t=this;return(0,G.Z)((0,$.Z)().mark((function r(){var n,o,i;return(0,$.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,M().get(`${N.Z.state.hostname}Product/groupTreeGet`,{store_id:e.store_id});case 3:for(i in n=r.sent,o=[],n)o[n[i].order]=n[i];t.storeGroups=o,t.productListGet(),r.next=12;break;case 10:r.prev=10,r.t0=r["catch"](0);case 12:case"end":return r.stop()}}),r,null,[[0,10]])})))()},groupOtherAdd(){this.storeProducts[0]&&this.storeGroups.push({group_id:"other",group_name:"Другое",image_hash:"",children:{0:{group_id:0,group_name:"другое",group_parent_id:0,group_path:"",image_hash:""}}})},groupSelect(){var e,t=this.query.parent_group_id,r=this.query.sub_group_id;if(r)e:for(var n in this.storeGroups)for(var o in this.storeGroups[n].children)if(o==r){t=n;break e}t||(t=null===(e=this.storeGroups[0])||void 0===e?void 0:e.group_id);var i=!1;this.groupSelectParent(t,i)},groupSelectParent(e){if(this.groupSelectedParentId!=e&&document.querySelector(".product-list-slider")){this.groupSelectedParentId=e;var t=document.querySelector(".product-list-slider").swiper,r=this.storeGroups.findIndex((function(t){return t.group_id==e}));r>=0&&(t.slideTo(r,100,!1),this.groupSliderAdjustHeight())}},groupSliderChanged(e){var t=e.activeIndex,r=this.storeGroups[t].group_id;this.groupSelectParent(r,1)},groupSliderAdjustHeight(){var e,t=null===(e=document.querySelector(".product-list-slider .swiper-slide.swiper-slide-active"))||void 0===e?void 0:e.scrollHeight;document.querySelector(".product-list-slider.swiper").style.maxHeight=t>0?t+"px":""}},mounted(){this.query=this.$route.query,this.itemGet()},watch:{$route(e){this.storeId=e.params.id}}};const E=(0,O.Z)(R,[["render",S],["__scopeId","data-v-2a3297a9"]]);var J=E}}]);
//# sourceMappingURL=1163-legacy.fa0ae819.js.map