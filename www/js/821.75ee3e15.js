"use strict";(self["webpackChunktezkel"]=self["webpackChunktezkel"]||[]).push([[821],{821:function(n,t,e){e.r(t),e.d(t,{default:function(){return L}});var o=e(6252),i=e(3577);const l=(0,o.Uk)("Чеков нет");function a(n,t,e,a,s,u){const r=(0,o.up)("ion-icon"),c=(0,o.up)("ion-row"),d=(0,o.up)("ion-col"),p=(0,o.up)("ion-grid"),m=(0,o.up)("ion-label"),w=(0,o.up)("ion-item"),f=(0,o.up)("ion-list"),k=(0,o.up)("ion-skeleton-text"),_=(0,o.up)("base-layout");return(0,o.wg)(),(0,o.j4)(_,{pageTitle:"Мои чеки",pageDefaultBackLink:"/user"},{default:(0,o.w5)((()=>[s.invoiceList?.length>0?((0,o.wg)(),(0,o.j4)(f,{key:0},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.invoiceList,(t=>((0,o.wg)(),(0,o.j4)(w,{key:t.trans_id,button:"",onClick:n=>u.billOpen(t?.trans_data?.Registration?.Link)},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{icon:a.receiptOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Фискальный чек от "+(0,i.zw)(t?.trans_data?.Registration?.FiscalData?.Date),1)])),_:2},1024),(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Uk)(" заказ №"+(0,i.zw)(t?.trans_data?.Check?.CheckId),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),(0,o.Wm)(m,{slot:"end"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(t?.trans_amount)+(0,i.zw)(n.$heap.state.currencySign),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):(0,o.kq)("",!0),0==s.invoiceList?.length?((0,o.wg)(),(0,o.j4)(f,{key:1},{default:(0,o.w5)((()=>[(0,o.Wm)(w,null,{default:(0,o.w5)((()=>[(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[l])),_:1})])),_:1})])),_:1})):(0,o.kq)("",!0),null==s.invoiceList?((0,o.wg)(),(0,o.j4)(f,{key:2},{default:(0,o.w5)((()=>[((0,o.wg)(),(0,o.iD)(o.HY,null,(0,o.Ko)([1,2,3],(n=>(0,o.Wm)(w,{key:n},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{style:{"background-color":"var(--ion-color-light)"}}),(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(k,{animated:"",style:{width:"100%"}})])),_:1}),(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(m,{color:"primary"},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{animated:"",style:{width:"100px"}})])),_:1})])),_:1})])),_:1})])),_:1})])),_:2},1024))),64))])),_:1})):(0,o.kq)("",!0)])),_:1})}var s=e(3741),u=e(8903);const r=(0,o.Uk)("Фискальный чек"),c=["src"],d={key:0,style:{position:"fixed",top:"200px",left:"calc( 50% - 50px )"}},p=["src"];function m(n,t,e,i,l,a){const s=(0,o.up)("ion-icon"),u=(0,o.up)("ion-title"),m=(0,o.up)("ion-toolbar"),w=(0,o.up)("ion-header"),f=(0,o.up)("ion-content");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(w,null,{default:(0,o.w5)((()=>[(0,o.Wm)(w,null,{default:(0,o.w5)((()=>[(0,o.Wm)(m,{color:"secondary"},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{icon:i.receiptOutline,slot:"start"},null,8,["icon"]),(0,o.Wm)(u,{slot:"start"},{default:(0,o.w5)((()=>[r])),_:1}),(0,o.Wm)(s,{icon:i.closeOutline,onClick:t[0]||(t[0]=n=>{i.closeModal()}),slot:"end",size:"large"},null,8,["icon"])])),_:1})])),_:1})])),_:1}),(0,o.Wm)(f,null,{default:(0,o.w5)((()=>[(0,o._)("iframe",{src:e.billLink,style:{width:"100%",height:"85%",border:"none"},onLoad:t[1]||(t[1]=n=>a.onLoad())},null,40,c),l.loadAnimation?((0,o.wg)(),(0,o.iD)("div",d,[(0,o._)("img",{src:i.loading},null,8,p)])):(0,o.kq)("",!0)])),_:1})],64)}var w=e(659),f={components:{IonTitle:s.wd,IonIcon:s.gu,IonToolbar:s.sr,IonHeader:s.Gu,IonContent:s.W2},props:["billLink"],setup(){const n=function(){s.Fy.dismiss()};return{closeModal:n,closeOutline:u.fID,receiptOutline:u.d71,loading:w}},data(){return{loadAnimation:1}},methods:{onLoad(){this.loadAnimation=0}}},k=e(3744);const _=(0,k.Z)(f,[["render",m]]);var g=_,h=e(9755),W=e.n(h),y={components:{IonList:s.q_,IonItem:s.Ie,IonGrid:s.jY,IonRow:s.Nd,IonCol:s.wI,IonSkeletonText:s.CK,IonLabel:s.Q$,IonIcon:s.gu},setup(){return{receiptOutline:u.d71}},data(){return{invoiceList:null,isOpen:!1,billLink:""}},methods:{async listGet(){try{const n={trans_tags:"#orderInvoice"};this.invoiceList=await W().post(this.$heap.state.hostname+"Transaction/itemFind",n),console.log(this.invoiceList)}catch{}},async billOpen(n){if(!n)return void this.$flash("Невозможно открыть чек");const t=await s.Fy.create({component:g,componentProps:{billLink:n},initialBreakpoint:.85,breakpoints:[0,.85,1]}),e=function(){t.dismiss()};return this.$topic.on("dismissModal",e),t.present()}},mounted(){this.listGet()}};const I=(0,k.Z)(y,[["render",a]]);var L=I},659:function(n,t,e){n.exports=e.p+"img/loading.30880178.svg"}}]);
//# sourceMappingURL=821.75ee3e15.js.map