"use strict";(self["webpackChunktezkel"]=self["webpackChunktezkel"]||[]).push([[328],{328:function(e,l,a){a.r(l),a.d(l,{default:function(){return m}});var t=a(641),o=a(33);const n={style:{"overflow-x":"scroll"}};function d(e,l,a,d,u,i){const f=(0,t.g2)("ion-input"),r=(0,t.g2)("ion-item"),s=(0,t.g2)("ion-toggle"),_=(0,t.g2)("ion-label"),b=(0,t.g2)("ion-icon"),m=(0,t.g2)("ion-item-divider"),c=(0,t.g2)("ion-list"),h=(0,t.g2)("ion-col"),p=(0,t.g2)("ion-row"),F=(0,t.g2)("ion-grid"),k=(0,t.g2)("base-layout");return(0,t.uX)(),(0,t.Wv)(k,{pageDefaultBackLink:"/user","page-title":"Редактирование тарифа"},{default:(0,t.k6)(()=>[(0,t.bF)(c,null,{default:(0,t.k6)(()=>[(0,t.bF)(r,null,{default:(0,t.k6)(()=>[(0,t.bF)(f,{label:"Название тарифа","label-placement":"floating",modelValue:u.tariff.tariff_name,"onUpdate:modelValue":l[0]||(l[0]=e=>u.tariff.tariff_name=e),placeholder:"название",debounce:"600",onIonInput:l[1]||(l[1]=e=>i.itemUpdate())},null,8,["modelValue"])]),_:1}),(0,t.bF)(r,{lines:"full"},{default:(0,t.k6)(()=>[(0,t.bF)(s,{modelValue:u.tariff.is_disabled,"onUpdate:modelValue":l[2]||(l[2]=e=>u.tariff.is_disabled=e),onIonChange:l[3]||(l[3]=e=>i.itemUpdate())},{default:(0,t.k6)(()=>l[22]||(l[22]=[(0,t.eW)("Отключен")])),_:1,__:[22]},8,["modelValue"])]),_:1}),(0,t.bF)(r,{lines:"full"},{default:(0,t.k6)(()=>[(0,t.bF)(_,null,{default:(0,t.k6)(()=>l[23]||(l[23]=[(0,t.eW)("Удалить")])),_:1,__:[23]}),(0,t.bF)(b,{icon:d.trashOutline,color:"danger",onClick:l[4]||(l[4]=e=>i.itemDelete())},null,8,["icon"])]),_:1}),(0,t.bF)(m,null,{default:(0,t.k6)(()=>l[24]||(l[24]=[(0,t.eW)(" Настройки тарифа ")])),_:1,__:[24]})]),_:1}),(0,t.Lk)("div",n,[(0,t.bF)(F,{onChange:l[19]||(l[19]=e=>i.itemUpdate()),style:{"min-width":"470px"}},{default:(0,t.k6)(()=>[(0,t.bF)(p,null,{default:(0,t.k6)(()=>[(0,t.bF)(h),(0,t.bF)(h,null,{default:(0,t.k6)(()=>l[25]||(l[25]=[(0,t.eW)("Разрешено")])),_:1,__:[25]}),(0,t.bF)(h,null,{default:(0,t.k6)(()=>l[26]||(l[26]=[(0,t.eW)("Комиссия%")])),_:1,__:[26]}),(0,t.bF)(h,null,{default:(0,t.k6)(()=>[(0,t.eW)("Плата "+(0,o.v_)(e.$heap.state.currencySign),1)]),_:1})]),_:1}),(0,t.bF)(p,null,{default:(0,t.k6)(()=>[(0,t.bF)(h,null,{default:(0,t.k6)(()=>[(0,t.bF)(_,null,{default:(0,t.k6)(()=>l[27]||(l[27]=[(0,t.eW)("Заказ")])),_:1,__:[27]})]),_:1}),(0,t.bF)(h,null,{default:(0,t.k6)(()=>[(0,t.bF)(s,{"aria-label":"",modelValue:u.tariff.order_allow,"onUpdate:modelValue":l[5]||(l[5]=e=>u.tariff.order_allow=e),onIonChange:l[6]||(l[6]=e=>i.itemUpdate())},null,8,["modelValue"])]),_:1}),(0,t.bF)(h,null,{default:(0,t.k6)(()=>[(0,t.bF)(f,{label:"",modelValue:u.tariff.order_fee,"onUpdate:modelValue":l[7]||(l[7]=e=>u.tariff.order_fee=e),placeholder:"%"},null,8,["modelValue"])]),_:1}),(0,t.bF)(h,null,{default:(0,t.k6)(()=>[(0,t.bF)(f,{label:"",modelValue:u.tariff.order_cost,"onUpdate:modelValue":l[8]||(l[8]=e=>u.tariff.order_cost=e),placeholder:e.$heap.state.currencySign},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),(0,t.bF)(p,null,{default:(0,t.k6)(()=>[(0,t.bF)(h,null,{default:(0,t.k6)(()=>[(0,t.bF)(_,null,{default:(0,t.k6)(()=>l[28]||(l[28]=[(0,t.eW)("Опл. картой")])),_:1,__:[28]})]),_:1}),(0,t.bF)(h,null,{default:(0,t.k6)(()=>[(0,t.bF)(s,{"aria-label":"",modelValue:u.tariff.card_allow,"onUpdate:modelValue":l[9]||(l[9]=e=>u.tariff.card_allow=e),onIonChange:l[10]||(l[10]=e=>i.itemUpdate())},null,8,["modelValue"])]),_:1}),(0,t.bF)(h,null,{default:(0,t.k6)(()=>[(0,t.bF)(f,{label:"",modelValue:u.tariff.card_fee,"onUpdate:modelValue":l[11]||(l[11]=e=>u.tariff.card_fee=e),placeholder:"%"},null,8,["modelValue"])]),_:1}),(0,t.bF)(h)]),_:1}),(0,t.bF)(p,null,{default:(0,t.k6)(()=>[(0,t.bF)(h,null,{default:(0,t.k6)(()=>[(0,t.bF)(_,null,{default:(0,t.k6)(()=>l[29]||(l[29]=[(0,t.eW)("Опл. наличными")])),_:1,__:[29]})]),_:1}),(0,t.bF)(h,null,{default:(0,t.k6)(()=>[(0,t.bF)(s,{"aria-label":"",modelValue:u.tariff.cash_allow,"onUpdate:modelValue":l[12]||(l[12]=e=>u.tariff.cash_allow=e),onIonChange:l[13]||(l[13]=e=>i.itemUpdate())},null,8,["modelValue"])]),_:1}),(0,t.bF)(h,null,{default:(0,t.k6)(()=>[(0,t.bF)(f,{label:"",modelValue:u.tariff.cash_fee,"onUpdate:modelValue":l[14]||(l[14]=e=>u.tariff.cash_fee=e),placeholder:"%"},null,8,["modelValue"])]),_:1}),(0,t.bF)(h)]),_:1}),(0,t.bF)(p,null,{default:(0,t.k6)(()=>[(0,t.bF)(h,null,{default:(0,t.k6)(()=>[(0,t.bF)(_,null,{default:(0,t.k6)(()=>l[30]||(l[30]=[(0,t.eW)("Доставка")])),_:1,__:[30]})]),_:1}),(0,t.bF)(h,null,{default:(0,t.k6)(()=>[(0,t.bF)(s,{"aria-label":"",modelValue:u.tariff.delivery_allow,"onUpdate:modelValue":l[15]||(l[15]=e=>u.tariff.delivery_allow=e),onIonChange:l[16]||(l[16]=e=>i.itemUpdate())},null,8,["modelValue"])]),_:1}),(0,t.bF)(h,null,{default:(0,t.k6)(()=>[(0,t.bF)(f,{label:"",modelValue:u.tariff.delivery_fee,"onUpdate:modelValue":l[17]||(l[17]=e=>u.tariff.delivery_fee=e),placeholder:"%"},null,8,["modelValue"])]),_:1}),(0,t.bF)(h,null,{default:(0,t.k6)(()=>[(0,t.bF)(f,{label:"",modelValue:u.tariff.delivery_cost,"onUpdate:modelValue":l[18]||(l[18]=e=>u.tariff.delivery_cost=e),placeholder:e.$heap.state.currencySign},null,8,["modelValue","placeholder"])]),_:1})]),_:1})]),_:1})]),(0,t.bF)(m,null,{default:(0,t.k6)(()=>l[31]||(l[31]=[(0,t.eW)(" Другие настройки ")])),_:1,__:[31]}),(0,t.bF)(r,null,{default:(0,t.k6)(()=>[(0,t.bF)(f,{label:"Кэшбэк",modelValue:u.tariff.cash_back,"onUpdate:modelValue":l[20]||(l[20]=e=>u.tariff.cash_back=e),placeholder:"%",debounce:"600",onIonInput:l[21]||(l[21]=e=>i.itemUpdate())},null,8,["modelValue"])]),_:1})]),_:1})}var u=a(5634),i=a(5480),f=a(2311),r=a.n(f),s={components:{IonInput:u.$w,IonIcon:u.iq,IonList:u.nf,IonItem:u.uz,IonToggle:u.BY,IonGrid:u.lO,IonRow:u.ln,IonCol:u.hU,IonLabel:u.he,IonItemDivider:u.Dg},setup(){return{trashOutline:i.P1A}},data(){return{tariffId:this.$route.params.id,tariff:{}}},computed:{},methods:{async itemGet(){let e={tariff_id:this.tariffId};try{this.tariff=await r().post(`${this.$heap.state.hostname}Admin/Tariff/itemGet`,e);const l=this;setTimeout(()=>l.updateallow=!0,100),this.tariff.is_disabled*=1,this.tariff.order_allow*=1,this.tariff.card_allow*=1,this.tariff.cash_allow*=1,this.tariff.delivery_allow*=1}catch(l){const e=l.responseJSON,a=e.messages.error;switch(a){case"forbidden":this.$flash("Не достаточно прав");break}return!1}},async itemUpdate(){let e=this.tariff;try{await r().post(`${this.$heap.state.hostname}Admin/Tariff/itemUpdate`,JSON.stringify(e)),this.$flash("сохранено")}catch(l){const e=l.responseJSON,a=e.messages.error;switch(a){case"forbidden":this.$flash("Не достаточно прав");break}return!1}},async itemDelete(){if(confirm("Вы уверены?"))try{await r().post(`${this.$heap.state.hostname}Admin/Tariff/itemDelete`,{tariff_id:this.tariffId}),this.$router.go(-1)}catch{}}},mounted(){this.itemGet()}},_=a(6262);const b=(0,_.A)(s,[["render",d]]);var m=b}}]);
//# sourceMappingURL=328.fb8d6736.js.map