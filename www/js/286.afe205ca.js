"use strict";(self["webpackChunktezkel"]=self["webpackChunktezkel"]||[]).push([[286],{8417:function(e,t,l){l.d(t,{Z:function(){return v}});var a=l(6252),n=l(3577);const u=(0,a.Uk)("Баланс"),o=(0,a.Uk)("Настройки"),s=(0,a.Uk)("Начальная дата"),i={slot:"end",style:{display:"grid","grid-template-columns":"110px 110px"}},r=(0,a.Uk)("Обороты"),d={slot:"end",style:{display:"grid","grid-template-columns":"110px 110px"}},c=(0,a.Uk)("Конечная дата"),m={slot:"end",style:{display:"grid","grid-template-columns":"110px 110px"}},g=(0,a.Uk)(" Нет операций в данном периоде ");function p(e,t,l,p,w,_){const h=(0,a.up)("ion-title"),f=(0,a.up)("ion-text"),y=(0,a.up)("ion-item"),k=(0,a.up)("ion-list"),W=(0,a.up)("ion-icon"),v=(0,a.up)("ion-input"),b=(0,a.up)("ion-accordion"),$=(0,a.up)("ion-accordion-group"),I=(0,a.up)("ion-skeleton-text"),x=(0,a.up)("ion-label");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(k,null,{default:(0,a.w5)((()=>[(0,a.Wm)(y,null,{default:(0,a.w5)((()=>[(0,a.Wm)(h,null,{default:(0,a.w5)((()=>[u])),_:1}),w.balance>0?((0,a.wg)(),(0,a.j4)(f,{key:0,slot:"end",color:"success"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(w.balance)+(0,n.zw)(e.$heap.state.currencySign),1)])),_:1})):((0,a.wg)(),(0,a.j4)(f,{key:1,slot:"end"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(w.balance)+(0,n.zw)(e.$heap.state.currencySign),1)])),_:1}))])),_:1})])),_:1}),(0,a.Wm)($,null,{default:(0,a.w5)((()=>[(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[(0,a.Wm)(y,{slot:"header"},{default:(0,a.w5)((()=>[(0,a.Wm)(W,{icon:p.settingsOutline,slot:"start"},null,8,["icon"]),(0,a.Wm)(f,null,{default:(0,a.w5)((()=>[o])),_:1})])),_:1}),(0,a.Wm)(k,{slot:"content"},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{color:"light"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,null,{default:(0,a.w5)((()=>[s])),_:1}),(0,a._)("div",i,[(0,a.Wm)(v,{type:"date",modelValue:w.start_at,"onUpdate:modelValue":t[0]||(t[0]=e=>w.start_at=e),onIonChange:t[1]||(t[1]=e=>_.listGet())},null,8,["modelValue"]),w.meta.sum_start?((0,a.wg)(),(0,a.j4)(v,{key:0,type:"text",style:{"text-align":"right"},color:"medium",value:`${w.meta.sum_start}${e.$heap.state.currencySign}`,readonly:""},null,8,["value"])):(0,a.kq)("",!0)])])),_:1}),(0,a.Wm)(y,{color:"light"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,null,{default:(0,a.w5)((()=>[r])),_:1}),(0,a._)("div",d,[w.meta.sum_debit?((0,a.wg)(),(0,a.j4)(v,{key:0,type:"text",style:{"text-align":"right"},color:"medium",value:`+${w.meta.sum_debit}${e.$heap.state.currencySign}`,readonly:""},null,8,["value"])):(0,a.kq)("",!0),w.meta.sum_credit?((0,a.wg)(),(0,a.j4)(v,{key:1,type:"text",style:{"text-align":"right"},color:"medium",value:`-${w.meta.sum_credit}${e.$heap.state.currencySign}`,readonly:""},null,8,["value"])):(0,a.kq)("",!0)])])),_:1}),(0,a.Wm)(y,{color:"light"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,null,{default:(0,a.w5)((()=>[c])),_:1}),(0,a._)("div",m,[(0,a.Wm)(v,{type:"date",modelValue:w.finish_at,"onUpdate:modelValue":t[2]||(t[2]=e=>w.finish_at=e)},null,8,["modelValue"]),w.meta.sum_finish?((0,a.wg)(),(0,a.j4)(v,{key:0,type:"text",style:{"text-align":"right"},color:"medium",value:`${w.meta.sum_finish}${e.$heap.state.currencySign}`,readonly:""},null,8,["value"])):(0,a.kq)("",!0)])])),_:1})])),_:1})])),_:1})])),_:1}),null==w.ledger?((0,a.wg)(),(0,a.j4)(k,{key:0},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)([1,2,3],(e=>(0,a.Wm)(y,{key:e},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{slot:"start"},{default:(0,a.w5)((()=>[(0,a.Wm)(I,{animated:"",style:{width:"50px"}})])),_:1}),(0,a.Wm)(x,null,{default:(0,a.w5)((()=>[(0,a.Wm)(I,{animated:"",style:{width:"100%"}})])),_:1}),(0,a.Wm)(x,{slot:"end",color:"success"},{default:(0,a.w5)((()=>[(0,a.Wm)(I,{animated:"",style:{width:"50px"}})])),_:1})])),_:2},1024))),64))])),_:1})):w.ledger.length>0?((0,a.wg)(),(0,a.j4)(k,{key:1},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(_.ledgerCalc,(e=>((0,a.wg)(),(0,a.j4)(y,{key:e.trans_id},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{slot:"start"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.date),1)])),_:2},1024),(0,a.Wm)(f,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.trans_description),1)])),_:2},1024),1==e.is_debit?((0,a.wg)(),(0,a.j4)(x,{key:0,slot:"end",color:"success"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.trans_amount),1)])),_:2},1024)):((0,a.wg)(),(0,a.j4)(x,{key:1,slot:"end",color:"danger"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.trans_amount),1)])),_:2},1024))])),_:2},1024)))),128))])),_:1})):((0,a.wg)(),(0,a.j4)(k,{key:2},{default:(0,a.w5)((()=>[(0,a.Wm)(y,null,{default:(0,a.w5)((()=>[g])),_:1})])),_:1}))],64)}var w=l(2066),_=l(8903),h=l(9755),f=l.n(h),y={components:{IonIcon:w.gu,IonTitle:w.wd,IonLabel:w.Q$,IonItem:w.Ie,IonInput:w.pK,IonList:w.q_,IonAccordion:w.We,IonAccordionGroup:w.eh,IonText:w.yW,IonSkeletonText:w.CK},props:["account"],setup(){return{settingsOutline:_.C$N}},data(){const e=new Date,t=new Date(Date.parse(`${e.getFullYear()}-${e.getMonth()+1}-1`));return{balance:"-",start_at:t.toISOString().slice(0,10),finish_at:e.toISOString().slice(0,10),ledger:null,meta:{},today:e}},computed:{ledgerCalc(){if(null==this.ledger)return null;let e=[];for(let t of this.ledger)t.date=this.toLocDate(t.trans_date),e.push(t);return e}},methods:{async listGet(){try{const e={start_at:this.start_at,finish_at:this.finish_at,account:this.account},t=await f().post(`${this.$heap.state.hostname}Transaction/listGet`,e);this.ledger=t.ledger,this.meta=t.meta,this.finish_at==this.today.toISOString().slice(0,10)&&(this.balance=t.meta.sum_finish)}catch(e){const t=e.responseJSON,l=t.messages.error;switch(l){case"no_account":this.$flash("Ошибка получения выписки");break;case"large_interval":this.$flash("Период должен быть не больше 3 месяцев");break}return this.ledger=[],!1}},toLocDate(e){const t=new Date(Date.parse(e)),l={month:"short",day:"numeric"};return t.toLocaleDateString(void 0,l)}},mounted(){this.listGet()}},k=l(3744);const W=(0,k.Z)(y,[["render",p]]);var v=W},1286:function(e,t,l){l.r(t),l.d(t,{default:function(){return m}});var a=l(6252);const n=(0,a.Uk)(" Баланс ");function u(e,t,l,u,o,s){const i=(0,a.up)("ion-segment-button"),r=(0,a.up)("ion-segment"),d=(0,a.up)("ledger-comp"),c=(0,a.up)("base-layout");return(0,a.wg)(),(0,a.j4)(c,{pageTitle:"Статистика продавца",pageDefaultBackLink:"/user"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{"swipe-gesture":"true",modelValue:o.activeTab,"onUpdate:modelValue":t[0]||(t[0]=e=>o.activeTab=e),onIonChange:t[1]||(t[1]=e=>s.activeTabChanged(e))},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{value:"ledger"},{default:(0,a.w5)((()=>[n])),_:1})])),_:1},8,["modelValue"]),"ledger"==o.activeTab?((0,a.wg)(),(0,a.j4)(d,{key:0,account:"supplier"})):(0,a.kq)("",!0)])),_:1})}var o=l(2066),s=l(8903),i=l(8417),r={components:{IonSegment:o.cJ,IonSegmentButton:o.GO,ledgerComp:i.Z},setup(){return{receiptOutline:s.d71}},data(){return{activeTab:"ledger"}},methods:{async activeTabChanged(){}}},d=l(3744);const c=(0,d.Z)(r,[["render",u]]);var m=c}}]);
//# sourceMappingURL=286.afe205ca.js.map