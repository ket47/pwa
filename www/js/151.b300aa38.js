"use strict";(self["webpackChunkTezkel"]=self["webpackChunkTezkel"]||[]).push([[151],{4813:function(e,t,o){o.d(t,{Z:function(){return U}});var l=o(6252),s=o(3577);const a=(0,l.Uk)("Фотографии"),i={key:0,class:"image_grid"},n={key:0,class:"image_controls"};function r(e,t,o,r,m,d){const u=(0,l.up)("ion-label"),c=(0,l.up)("ion-icon"),_=(0,l.up)("ion-item"),p=(0,l.up)("ion-img"),h=(0,l.up)("ion-avatar");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",null,[(0,l.Wm)(_,{lines:"none"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[a])),_:1}),m.editMode?((0,l.wg)(),(0,l.j4)(c,{key:0,slot:"end",icon:r.settingsSharp,color:"primary",onClick:t[0]||(t[0]=e=>m.editMode=0)},null,8,["icon"])):((0,l.wg)(),(0,l.j4)(c,{key:1,slot:"end",icon:r.settingsOutline,onClick:t[1]||(t[1]=e=>m.editMode=1)},null,8,["icon"]))])),_:1}),d.imageList?.length?((0,l.wg)(),(0,l.iD)("div",i,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(d.imageList,(t=>((0,l.wg)(),(0,l.iD)("div",{key:t.image_id},[(0,l.Wm)(h,{onClick:e=>d.imagePreview(t.image_hash),class:(0,s.C_)(t.class)},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{src:e.$heap.state.hostname+"image/get.php/"+t.image_hash+".100.100.webp"},null,8,["src"])])),_:2},1032,["onClick","class"]),m.editMode?((0,l.wg)(),(0,l.iD)("div",n,[(0,l.Wm)(c,{icon:r.chevronBackCircleOutline,onClick:e=>d.back(t)},null,8,["icon","onClick"]),d.isAdmin&&1==t.is_disabled?((0,l.wg)(),(0,l.j4)(c,{key:0,icon:r.checkmarkCircle,color:"success",onClick:e=>d.enable(t)},null,8,["icon","onClick"])):(0,l.kq)("",!0),t.deleted_at?((0,l.wg)(),(0,l.j4)(c,{key:1,icon:r.trash,color:"success",onClick:e=>d.restore(t)},null,8,["icon","onClick"])):((0,l.wg)(),(0,l.j4)(c,{key:2,icon:r.trashBin,color:"danger",onClick:e=>d.remove(t)},null,8,["icon","onClick"])),(0,l.Wm)(c,{icon:r.chevronForwardCircleOutline,onClick:e=>d.forward(t)},null,8,["icon","onClick"])])):(0,l.kq)("",!0)])))),128))])):(0,l.kq)("",!0)]),(0,l._)("input",{type:"file",id:"foto_upload",accept:"image/*",onChange:t[2]||(t[2]=e=>d.uploadImage(e)),style:{display:"none"}},null,32)],64)}var m=o(8903),d=o(5731);const u=(0,l.Uk)("Просмотр фотографии");function c(e,t,o,s,a,i){const n=(0,l.up)("ion-label"),r=(0,l.up)("ion-icon"),m=(0,l.up)("ion-toolbar"),d=(0,l.up)("ion-header"),c=(0,l.up)("ion-img"),_=(0,l.up)("ion-content");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l.Wm)(n,null,{default:(0,l.w5)((()=>[u])),_:1}),(0,l.Wm)(r,{icon:s.closeOutline,onClick:t[0]||(t[0]=e=>{s.closeModal()}),slot:"end"},null,8,["icon"])])),_:1})])),_:1}),(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,{src:e.$heap.state.hostname+"image/get.php/"+o.image_hash+".1000.1000.webp"},null,8,["src"])])),_:1})],64)}var _={props:["image_hash"],components:{IonLabel:d.Q$,IonIcon:d.gu,IonToolbar:d.sr,IonHeader:d.Gu,IonImg:d.Xz,IonContent:d.W2},setup(){const e=function(){d.Fy.dismiss()};return{closeModal:e,closeOutline:m.fID}}},p=o(3744);const h=(0,p.Z)(_,[["render",c]]);var w=h,g=o(9755),k=o.n(g),f=o(9042),I=o(351),W={props:["images","image_holder_id","controller"],components:{IonLabel:d.Q$,IonIcon:d.gu,IonItem:d.Ie,IonImg:d.Xz,IonAvatar:d.BJ},setup(){return{settingsOutline:m.C$N,settingsSharp:m.kiF,chevronBackCircleOutline:m.CK0,chevronForwardCircleOutline:m.esm,trashBin:m.UQi,trash:m._Ij,checkmarkCircle:m.I1A}},data(){return{images_loaded:null,editMode:!1}},computed:{imageList(){let e=this.images_loaded||this.images,t=[];for(let o in e)e[o].deleted_at?(e[o].class=" deleted",this.editMode&&t.push(e[o])):1==e[o].is_disabled?(e[o].class=" disabled",this.editMode&&t.push(e[o])):t.push(e[o]);return t},isAdmin(){return I.Z.isAdmin()}},methods:{async back(e){try{await k().post(this.$heap.state.hostname+"Image/itemUpdateOrder",{image_id:e.image_id,dir:"up"}),this.load()}catch{}},async forward(e){try{await k().post(this.$heap.state.hostname+"Image/itemUpdateOrder",{image_id:e.image_id,dir:"down"}),this.load()}catch{}},async remove(e){try{await k().post(this.$heap.state.hostname+"Image/itemDelete",{image_id:e.image_id}),this.load(),this.$flash("Фото перемещено в корзину и будет удалено")}catch{}},async restore(e){try{await k().post(this.$heap.state.hostname+"Image/itemUnDelete",{image_id:e.image_id}),this.load(),this.$flash("Фото перемещено извлечено из корзины")}catch{}},async enable(e){try{await k().post(this.$heap.state.hostname+"Image/itemDisable",{image_id:e.image_id,is_disabled:0}),this.load()}catch{}},async load(){const e={image_holder_id:this.image_holder_id,image_holder:this.controller,is_disabled:1,is_deleted:1,is_active:1};this.images_loaded=await k().post(this.$heap.state.hostname+"Image/listGet",e)},async imagePreview(e){const t=await d.Fy.create({component:w,componentProps:{image_hash:e},initialBreakpoint:.5,breakpoints:[0,.5,1]}),o=function(){t.dismiss()};return f.Z.on("dismissModal",o),t.present()},async uploadImage(e){let t=new FormData;t.append("files[]",e.target.files[0]),t.set("image_holder_id",this.image_holder_id);const o={url:this.$heap.state.hostname+this.controller+"/fileUpload",type:"POST",data:t,processData:!1,contentType:!1};try{await k().ajax(o),this.load()}catch(l){if("limit_exeeded"==l?.responseJSON?.messages?.error)return void this.$flash("Уже загружено максимальное количество фото");this.$flash("Не удалось загрузить фото")}},take_photo(){k()("#foto_upload").trigger("click"),this.editMode=!0}}};const y=(0,p.Z)(W,[["render",r],["__scopeId","data-v-e9cf9380"]]);var U=y},9151:function(e,t,o){o.r(t),o.d(t,{default:function(){return J}});var l=o(6252),s=o(3577);const a=(0,l.Uk)(" Готово к заказам "),i=(0,l.Uk)(" Удалено "),n=(0,l.Uk)(" Опорное "),r=(0,l.Uk)(" На модерации "),m=(0,l.Uk)("Основные настройки"),d=(0,l.Uk)("Название действующее"),u=(0,l.Uk)("Название новое"),c=(0,l.Uk)("Описание действующее"),_=(0,l.Uk)("Описание новое"),p=(0,l.Uk)("Название предприятия действующее"),h=(0,l.Uk)("Название предприятия новое"),w=(0,l.Uk)("Телефон"),g=(0,l.Uk)("Электронная почта"),k=(0,l.Uk)("Подготовка (минут)"),f=(0,l.Uk)("Категории товаров и услуг"),I=(0,l.Uk)("Адрес"),W=(0,l.Uk)("Пока адреса не добавлены"),y=(0,l.Uk)(" Добавить "),U=(0,l.Uk)("Изображения магазина в приложении"),V=(0,l.Uk)(" Добавить "),C=(0,l.Uk)("Время работы"),b=(0,l.Uk)("Понедельник"),v=(0,l.Uk)("Вторник"),$=(0,l.Uk)("Среда"),G=(0,l.Uk)("Четверг"),O=(0,l.Uk)("Пятница"),D=(0,l.Uk)("Суббота"),S=(0,l.Uk)("Воскресенье"),j=(0,l.Uk)("Адинистраторы"),x=(0,l.Uk)("Добавить администратора");function L(e,t,o,L,Z,A){const z=(0,l.up)("ion-card-content"),M=(0,l.up)("ion-card"),F=(0,l.up)("ion-icon"),q=(0,l.up)("ion-toggle"),P=(0,l.up)("ion-item"),B=(0,l.up)("ion-list"),T=(0,l.up)("ion-label"),H=(0,l.up)("ion-item-divider"),N=(0,l.up)("ion-text"),J=(0,l.up)("ion-input"),Y=(0,l.up)("ion-textarea"),K=(0,l.up)("ion-col"),Q=(0,l.up)("ion-row"),X=(0,l.up)("ion-item-group"),R=(0,l.up)("ion-img"),E=(0,l.up)("ion-avatar"),ee=(0,l.up)("ion-checkbox"),te=(0,l.up)("ion-button"),oe=(0,l.up)("image-tile-comp"),le=(0,l.up)("base-layout");return(0,l.wg)(),(0,l.j4)(le,{"page-title":"Мой магазин","page-default-back-link":"/store-"+this.storeId},{default:(0,l.w5)((()=>[A.message?((0,l.wg)(),(0,l.j4)(M,{key:0},{default:(0,l.w5)((()=>[(0,l.Wm)(z,{class:(0,s.C_)(A.messageClass)},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(A.message),1)])),_:1},8,["class"])])),_:1})):(0,l.kq)("",!0),Z.storeItem?((0,l.wg)(),(0,l.j4)(B,{key:1},{default:(0,l.w5)((()=>[(0,l.Wm)(P,null,{default:(0,l.w5)((()=>[(0,l.Wm)(F,{src:L.storefrontOutline,color:"primary",slot:"start"},null,8,["src"]),a,(0,l.Wm)(q,{slot:"end",modelValue:Z.is_working,"onUpdate:modelValue":t[0]||(t[0]=e=>Z.is_working=e),onIonChange:t[1]||(t[1]=e=>A.save("is_working",e.target.checked?1:0))},null,8,["modelValue"])])),_:1}),(0,l.Wm)(P,null,{default:(0,l.w5)((()=>[(0,l.Wm)(F,{src:L.trashOutline,color:"primary",slot:"start"},null,8,["src"]),i,(0,l.Wm)(q,{slot:"end",modelValue:Z.is_deleted,"onUpdate:modelValue":t[2]||(t[2]=e=>Z.is_deleted=e),color:"danger",onIonChange:t[3]||(t[3]=e=>A.itemDelete(e.target.checked?1:0))},null,8,["modelValue"])])),_:1}),(0,l.Wm)(P,null,{default:(0,l.w5)((()=>[(0,l.Wm)(F,{src:L.flagOutline,color:"primary",slot:"start"},null,8,["src"]),n,(0,l.Wm)(q,{slot:"end",modelValue:Z.is_primary,"onUpdate:modelValue":t[4]||(t[4]=e=>Z.is_primary=e),onIonChange:t[5]||(t[5]=e=>A.save("is_primary",e.target.checked?1:0))},null,8,["modelValue"])])),_:1}),(0,l.Wm)(P,null,{default:(0,l.w5)((()=>[(0,l.Wm)(F,{src:L.searchOutline,color:"primary",slot:"start"},null,8,["src"]),r,(0,l.Wm)(q,{slot:"end",modelValue:Z.is_disabled,"onUpdate:modelValue":t[6]||(t[6]=e=>Z.is_disabled=e),onIonChange:t[7]||(t[7]=e=>A.itemDisable(e.target.checked?1:0))},null,8,["modelValue"])])),_:1})])),_:1})):(0,l.kq)("",!0),Z.storeItem?((0,l.wg)(),(0,l.iD)("form",{key:2,onChange:t[34]||(t[34]=(...e)=>A.saveForm&&A.saveForm(...e))},[(0,l.Wm)(B,{lines:"full"},{default:(0,l.w5)((()=>[(0,l.Wm)(X,null,{default:(0,l.w5)((()=>[(0,l.Wm)(H,null,{default:(0,l.w5)((()=>[(0,l.Wm)(T,null,{default:(0,l.w5)((()=>[m])),_:1})])),_:1}),(0,l.Wm)(P,null,{default:(0,l.w5)((()=>[(0,l.Wm)(T,{position:"stacked",color:"primary"},{default:(0,l.w5)((()=>[d])),_:1}),(0,l.Wm)(N,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(Z.storeItem.store_name),1)])),_:1})])),_:1}),(0,l.Wm)(P,null,{default:(0,l.w5)((()=>[(0,l.Wm)(T,{position:"stacked",color:"primary"},{default:(0,l.w5)((()=>[u])),_:1}),(0,l.Wm)(J,{modelValue:Z.storeItem.store_name_new,"onUpdate:modelValue":t[8]||(t[8]=e=>Z.storeItem.store_name_new=e),name:"store_name_new"},null,8,["modelValue"]),A.isAdmin?((0,l.wg)(),(0,l.j4)(F,{key:0,icon:L.checkmarkCircleOutline,slot:"end",color:"success",onClick:t[9]||(t[9]=e=>A.fieldApprove("store_name"))},null,8,["icon"])):(0,l.kq)("",!0)])),_:1}),(0,l.Wm)(P,null,{default:(0,l.w5)((()=>[(0,l.Wm)(T,{position:"stacked",color:"primary"},{default:(0,l.w5)((()=>[c])),_:1}),(0,l.Wm)(N,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(Z.storeItem.store_description),1)])),_:1})])),_:1}),(0,l.Wm)(P,null,{default:(0,l.w5)((()=>[(0,l.Wm)(T,{position:"stacked",color:"primary"},{default:(0,l.w5)((()=>[_])),_:1}),(0,l.Wm)(Y,{modelValue:Z.storeItem.store_description_new,"onUpdate:modelValue":t[10]||(t[10]=e=>Z.storeItem.store_description_new=e),name:"store_description_new"},null,8,["modelValue"]),A.isAdmin?((0,l.wg)(),(0,l.j4)(F,{key:0,icon:L.checkmarkCircleOutline,slot:"end",color:"success",onClick:t[11]||(t[11]=e=>A.fieldApprove("store_description"))},null,8,["icon"])):(0,l.kq)("",!0)])),_:1}),(0,l.Wm)(P,null,{default:(0,l.w5)((()=>[(0,l.Wm)(T,{position:"stacked",color:"primary"},{default:(0,l.w5)((()=>[p])),_:1}),(0,l.Wm)(N,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(Z.storeItem.store_company_name),1)])),_:1})])),_:1}),(0,l.Wm)(P,null,{default:(0,l.w5)((()=>[(0,l.Wm)(T,{position:"stacked",color:"primary"},{default:(0,l.w5)((()=>[h])),_:1}),(0,l.Wm)(Y,{modelValue:Z.storeItem.store_company_name_new,"onUpdate:modelValue":t[12]||(t[12]=e=>Z.storeItem.store_company_name_new=e),name:"store_company_name_new"},null,8,["modelValue"]),A.isAdmin?((0,l.wg)(),(0,l.j4)(F,{key:0,icon:L.checkmarkCircleOutline,slot:"end",color:"success",onClick:t[13]||(t[13]=e=>A.fieldApprove("store_company_name"))},null,8,["icon"])):(0,l.kq)("",!0)])),_:1}),(0,l.Wm)(P,null,{default:(0,l.w5)((()=>[(0,l.Wm)(T,{position:"stacked",color:"primary"},{default:(0,l.w5)((()=>[w])),_:1}),(0,l.Wm)(J,{modelValue:Z.storeItem.store_phone,"onUpdate:modelValue":t[14]||(t[14]=e=>Z.storeItem.store_phone=e),name:"store_phone",type:"tel",inputmode:"tel",placeholder:"x(xxx)-xxx-xx-xx",spellcheck:"false",autocapitalize:"off"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(P,null,{default:(0,l.w5)((()=>[(0,l.Wm)(T,{position:"stacked",color:"primary"},{default:(0,l.w5)((()=>[g])),_:1}),(0,l.Wm)(J,{modelValue:Z.storeItem.store_email,"onUpdate:modelValue":t[15]||(t[15]=e=>Z.storeItem.store_email=e),name:"store_email"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(P,null,{default:(0,l.w5)((()=>[(0,l.Wm)(Q,null,{default:(0,l.w5)((()=>[(0,l.Wm)(K,null,{default:(0,l.w5)((()=>[(0,l.Wm)(T,{position:"stacked",color:"primary"},{default:(0,l.w5)((()=>[(0,l.Uk)("Мин. заказ ("+(0,s.zw)(e.$heap.state.currencySign)+")",1)])),_:1}),(0,l.Wm)(J,{modelValue:Z.storeItem.store_minimal_order,"onUpdate:modelValue":t[16]||(t[16]=e=>Z.storeItem.store_minimal_order=e),name:"store_minimal_order"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(K,null,{default:(0,l.w5)((()=>[(0,l.Wm)(T,{position:"stacked",color:"primary"},{default:(0,l.w5)((()=>[k])),_:1}),(0,l.Wm)(J,{modelValue:Z.storeItem.store_time_preparation,"onUpdate:modelValue":t[17]||(t[17]=e=>Z.storeItem.store_time_preparation=e),name:"store_time_preparation"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,l.Wm)(H,null,{default:(0,l.w5)((()=>[(0,l.Wm)(T,null,{default:(0,l.w5)((()=>[f])),_:1})])),_:1}),Z.is_groups_marked?((0,l.wg)(),(0,l.j4)(B,{key:0},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(Z.storeGroupList,(t=>((0,l.wg)(),(0,l.j4)(P,{key:t.group_id},{default:(0,l.w5)((()=>[(0,l.Wm)(E,{slot:"start"},{default:(0,l.w5)((()=>[(0,l.Wm)(R,{src:`${e.$heap.state.hostname}image/get.php/${t.image_hash}.50.50.webp`},null,8,["src"])])),_:2},1024),(0,l.Uk)(" "+(0,s.zw)(t.group_name)+" ",1),(0,l.Wm)(ee,{color:"primary",slot:"end",checked:t.is_marked,onIonChange:e=>A.itemUpdateGroup(e.target.checked?1:0,t.group_id)},null,8,["checked","onIonChange"])])),_:2},1024)))),128))])),_:1})):(0,l.kq)("",!0),(0,l.Wm)(H,null,{default:(0,l.w5)((()=>[(0,l.Wm)(T,null,{default:(0,l.w5)((()=>[I])),_:1})])),_:1}),Z.storeItem?.locations?.length?((0,l.wg)(),(0,l.j4)(B,{key:1},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(Z.storeItem.locations,(t=>((0,l.wg)(),(0,l.j4)(P,{key:t.location_id},{default:(0,l.w5)((()=>[(0,l.Wm)(R,{slot:"start",src:`${e.$heap.state.hostname}/image/get.php/${t.image_hash}.32.32.png`},null,8,["src"]),(0,l.Wm)(T,{style:{"white-space":"normal",cursor:"pointer"}},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(t.location_address),1)])),_:2},1024),(0,l.Wm)(F,{slot:"end",icon:L.trash,onClick:e=>A.locationDelete(`${t.location_id}`)},null,8,["icon","onClick"])])),_:2},1024)))),128))])),_:1})):((0,l.wg)(),(0,l.j4)(B,{key:2},{default:(0,l.w5)((()=>[(0,l.Wm)(P,null,{default:(0,l.w5)((()=>[(0,l.Wm)(N,null,{default:(0,l.w5)((()=>[W])),_:1})])),_:1}),(0,l.Wm)(te,{onClick:t[18]||(t[18]=e=>A.modalLocationCreate()),size:"small",expand:"full",color:"medium"},{default:(0,l.w5)((()=>[(0,l.Wm)(F,{src:L.locationOutline},null,8,["src"]),y])),_:1})])),_:1})),(0,l.Wm)(B,null,{default:(0,l.w5)((()=>[(0,l.Wm)(H,null,{default:(0,l.w5)((()=>[(0,l.Wm)(T,null,{default:(0,l.w5)((()=>[U])),_:1})])),_:1}),(0,l.Wm)(oe,{images:Z.storeItem.images,image_holder_id:Z.storeItem.store_id,controller:"Store",ref:"storeImgs"},null,8,["images","image_holder_id"]),(0,l.Wm)(te,{onClick:t[19]||(t[19]=t=>e.$refs.storeImgs.take_photo()),size:"small",expand:"full",color:"medium"},{default:(0,l.w5)((()=>[(0,l.Wm)(F,{src:L.cameraOutline},null,8,["src"]),V])),_:1})])),_:1}),(0,l.Wm)(B,null,{default:(0,l.w5)((()=>[(0,l.Wm)(X,{class:"schedule"},{default:(0,l.w5)((()=>[(0,l.Wm)(H,null,{default:(0,l.w5)((()=>[(0,l.Wm)(T,null,{default:(0,l.w5)((()=>[C])),_:1})])),_:1}),(0,l.Wm)(P,null,{default:(0,l.w5)((()=>[(0,l.Wm)(T,{slot:"start"},{default:(0,l.w5)((()=>[b])),_:1}),(0,l.Wm)(J,{placeholder:"от",modelValue:Z.storeItem.store_time_opens_0,"onUpdate:modelValue":t[20]||(t[20]=e=>Z.storeItem.store_time_opens_0=e),name:"store_time_opens_0"},null,8,["modelValue"]),(0,l.Wm)(J,{placeholder:"до",modelValue:Z.storeItem.store_time_closes_0,"onUpdate:modelValue":t[21]||(t[21]=e=>Z.storeItem.store_time_closes_0=e),name:"store_time_closes_0"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(P,null,{default:(0,l.w5)((()=>[(0,l.Wm)(T,{slot:"start"},{default:(0,l.w5)((()=>[v])),_:1}),(0,l.Wm)(J,{placeholder:"от",modelValue:Z.storeItem.store_time_opens_1,"onUpdate:modelValue":t[22]||(t[22]=e=>Z.storeItem.store_time_opens_1=e),name:"store_time_opens_1"},null,8,["modelValue"]),(0,l.Wm)(J,{placeholder:"до",modelValue:Z.storeItem.store_time_closes_1,"onUpdate:modelValue":t[23]||(t[23]=e=>Z.storeItem.store_time_closes_1=e),name:"store_time_closes_1"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(P,null,{default:(0,l.w5)((()=>[(0,l.Wm)(T,{slot:"start"},{default:(0,l.w5)((()=>[$])),_:1}),(0,l.Wm)(J,{placeholder:"от",modelValue:Z.storeItem.store_time_opens_2,"onUpdate:modelValue":t[24]||(t[24]=e=>Z.storeItem.store_time_opens_2=e),name:"store_time_opens_2"},null,8,["modelValue"]),(0,l.Wm)(J,{placeholder:"до",modelValue:Z.storeItem.store_time_closes_2,"onUpdate:modelValue":t[25]||(t[25]=e=>Z.storeItem.store_time_closes_2=e),name:"store_time_closes_2"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(P,null,{default:(0,l.w5)((()=>[(0,l.Wm)(T,{slot:"start"},{default:(0,l.w5)((()=>[G])),_:1}),(0,l.Wm)(J,{placeholder:"от",modelValue:Z.storeItem.store_time_opens_3,"onUpdate:modelValue":t[26]||(t[26]=e=>Z.storeItem.store_time_opens_3=e),name:"store_time_opens_3"},null,8,["modelValue"]),(0,l.Wm)(J,{placeholder:"до",modelValue:Z.storeItem.store_time_closes_3,"onUpdate:modelValue":t[27]||(t[27]=e=>Z.storeItem.store_time_closes_3=e),name:"store_time_closes_3"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(P,null,{default:(0,l.w5)((()=>[(0,l.Wm)(T,{slot:"start"},{default:(0,l.w5)((()=>[O])),_:1}),(0,l.Wm)(J,{placeholder:"от",modelValue:Z.storeItem.store_time_opens_4,"onUpdate:modelValue":t[28]||(t[28]=e=>Z.storeItem.store_time_opens_4=e),name:"store_time_opens_4"},null,8,["modelValue"]),(0,l.Wm)(J,{placeholder:"до",modelValue:Z.storeItem.store_time_closes_4,"onUpdate:modelValue":t[29]||(t[29]=e=>Z.storeItem.store_time_closes_4=e),name:"store_time_closes_4"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(P,null,{default:(0,l.w5)((()=>[(0,l.Wm)(T,{slot:"start"},{default:(0,l.w5)((()=>[D])),_:1}),(0,l.Wm)(J,{placeholder:"от",modelValue:Z.storeItem.store_time_opens_5,"onUpdate:modelValue":t[30]||(t[30]=e=>Z.storeItem.store_time_opens_5=e),name:"store_time_opens_5"},null,8,["modelValue"]),(0,l.Wm)(J,{placeholder:"до",modelValue:Z.storeItem.store_time_closes_5,"onUpdate:modelValue":t[31]||(t[31]=e=>Z.storeItem.store_time_closes_5=e),name:"store_time_closes_5"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(P,null,{default:(0,l.w5)((()=>[(0,l.Wm)(T,{slot:"start"},{default:(0,l.w5)((()=>[S])),_:1}),(0,l.Wm)(J,{placeholder:"от",modelValue:Z.storeItem.store_time_opens_6,"onUpdate:modelValue":t[32]||(t[32]=e=>Z.storeItem.store_time_opens_6=e),name:"store_time_opens_6"},null,8,["modelValue"]),(0,l.Wm)(J,{placeholder:"до",modelValue:Z.storeItem.store_time_closes_6,"onUpdate:modelValue":t[33]||(t[33]=e=>Z.storeItem.store_time_closes_6=e),name:"store_time_closes_6"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})],32)):(0,l.kq)("",!0),Z.storeItem?((0,l.wg)(),(0,l.j4)(B,{key:3},{default:(0,l.w5)((()=>[(0,l.Wm)(H,null,{default:(0,l.w5)((()=>[(0,l.Wm)(T,null,{default:(0,l.w5)((()=>[j])),_:1})])),_:1}),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(Z.ownerList,(e=>((0,l.wg)(),(0,l.j4)(P,{key:e.user_id},{default:(0,l.w5)((()=>[(0,l.Wm)(F,{src:L.personOutline,slot:"start",color:"primary"},null,8,["src"]),(0,l.Wm)(T,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(e.user_phone),1)])),_:2},1024),(0,l.Wm)(F,{src:L.trashOutline,slot:"end",onClick:t=>A.ownerDelete(e.user_id)},null,8,["src","onClick"])])),_:2},1024)))),128)),(0,l.Wm)(P,{button:"",onClick:t[35]||(t[35]=e=>A.ownerAdd())},{default:(0,l.w5)((()=>[(0,l.Wm)(F,{src:L.addOutline,slot:"start",color:"primary"},null,8,["src"]),(0,l.Wm)(T,null,{default:(0,l.w5)((()=>[x])),_:1})])),_:1})])),_:1})):(0,l.kq)("",!0)])),_:1},8,["page-default-back-link"])}var Z=o(5731),A=o(8903),z=o(4813),M=o(8883),F=o(2008),q=o(9755),P=o.n(q),B=o(351),T={components:{IonInput:Z.pK,IonTextarea:Z.g2,IonToggle:Z.ho,IonCard:Z.PM,IonCardContent:Z.FN,IonCheckbox:Z.nz,IonIcon:Z.gu,IonItem:Z.Ie,IonList:Z.q_,IonLabel:Z.Q$,IonItemDivider:Z.rH,IonText:Z.yW,IonCol:Z.wI,IonRow:Z.Nd,IonItemGroup:Z.Ub,IonImg:Z.Xz,IonAvatar:Z.BJ,IonButton:Z.YG,imageTileComp:z.Z},setup(){return{cameraOutline:A.kuq,trash:A._Ij,trashOutline:A.gtu,locationOutline:A.Iv7,storefrontOutline:A.qRG,flagOutline:A.FMn,searchOutline:A.W6I,personOutline:A.QJ7,addOutline:A.s6O,checkmarkCircleOutline:A.Nwd}},data(){return{config:{phoneMask:"+0(000)-000-00-00"},storeId:this.$route.params.id,storeItem:null,storeGroupList:null,ownerList:null,is_groups_marked:0,is_deleted:0,is_disabled:0,is_working:0,is_primary:0}},computed:{isPhoneValid(){return[11,12].includes(this.storeItem.user_phone.replace(/\D/g,"").length)},isAdmin(){return B.Z.isAdmin()},message(){return this.storeItem?.deleted_at?"Предприятие не активно и будет удалено. Вы еще можете отменить удаление":1==this.storeItem?.is_disabled?"Предприятие не активно и находится на рассмотрении у администратора":1!=this.storeItem?.is_working?"Предприятие отмечено вами как времено не готовое к заказам. Например, в связи с праздниками":1==this.storeItem?.is_primary?"Предприятие активно и готово принимать заказы в рабочее время. Является опорным":"Предприятие активно и готово принимать заказы в рабочее время."},messageClass(){return this.storeItem?.deleted_at?"deleted":1==this.storeItem?.is_disabled?"disabled":1==this.storeItem?.is_primary?"primary":1!=this.storeItem?.is_working?"notworking":"active"}},created(){this.listGroupGet(),this.itemGet(),this.ownerListGet()},methods:{async itemGet(){try{this.storeItem=await P().post(F.Z.state.hostname+"Store/itemGet",{store_id:this.storeId}),this.itemParseFlags(),this.itemMarkGroups()}catch{}},itemMarkGroups(){if(this.storeItem&&this.storeGroupList)try{const e=this.storeItem.member_of_groups.group_ids.split(",");for(let t of this.storeGroupList)t.is_marked=e.includes(t.group_id);this.is_groups_marked=1}catch{}else this.is_groups_marked=0},itemParseFlags(){this.is_deleted=null==this.storeItem.deleted_at?0:1,this.is_disabled=0==this.storeItem.is_disabled?0:1,this.is_working=0==this.storeItem.is_working?0:1,this.is_primary=1==this.storeItem.is_primary?1:0},async itemDelete(e){const t=e?"itemDelete":"itemUnDelete";try{await P().post(F.Z.state.hostname+"Store/"+t,{store_id:this.storeId}),this.storeItem.deleted_at=e?1:null}catch{this.itemGet()}},async itemDisable(e){if(this.storeItem.is_disabled!=e)try{await P().post(F.Z.state.hostname+"Store/itemDisable",{store_id:this.storeId,is_disabled:e}),this.storeItem.is_disabled=e}catch{this.itemGet()}},saveForm(e){const t=e.target.name,o=this.storeItem[t];this.save(t,o)},async save(e,t){if("user_phone"==e){if(!this.isPhoneValid)return!1;t=t.replace(/\D/g,"")}if(!e)return;let o={store_id:this.storeId,[e]:t};try{await P().post(F.Z.state.hostname+"Store/itemUpdate",JSON.stringify(o)),this.storeItem[e]=t,this.itemParseFlags()}catch(l){this.$flash("Не удалось сохранить изменение"),this.itemGet()}},async fieldApprove(e){let t={store_id:this.storeId,field_name:e};try{await P().post(F.Z.state.hostname+"Store/fieldApprove",t)}catch(o){const e=o.responseJSON.messages.error;e?.includes("store_description")?this.$flash("Описание слишком короткое"):e?.includes("store_name")?this.$flash("Название слишком короткое"):this.$flash("Не удалось сохранить изменение")}this.itemGet()},async itemUpdateGroup(e,t){const o={store_id:this.storeId,is_joined:e,group_id:t};try{await P().post(F.Z.state.hostname+"Store/itemUpdateGroup",o)}catch(l){this.$flash("Не удалось сохранить изменение"),this.itemGet()}},async listGroupGet(){try{this.storeGroupList=await P().get(F.Z.state.hostname+"Store/listGroupGet"),this.itemMarkGroups()}catch{}},async ownerListGet(){try{this.ownerList=await P().post(F.Z.state.hostname+"Store/ownerListGet",{store_id:this.storeId})}catch{}},async ownerAdd(){let e=prompt("Введите номер телефона нового администратора");if(e)if(e=e.replace(/\D/g,""),[11,12].includes(e.length))try{await P().post(F.Z.state.hostname+"Store/ownerSave",{store_id:this.storeId,action:"add",owner_phone:e}),this.ownerListGet()}catch{this.$flash("Не удалось добавить администратора")}else this.$flash("Проверьте правильность телефона")},async ownerDelete(e){if(confirm("Удалить этого пользователя из администраторов магазина?"))try{await P().post(F.Z.state.hostname+"Store/ownerSave",{store_id:this.storeId,action:"delete",owner_id:e}),this.ownerListGet()}catch{this.$flash("Не удалось удалить администратора")}},async modalLocationCreate(){if(!F.Z.state.user.user_id)return this.$flash("Чтобы добавленные адреса сохранились, пожалуйста войдите в систему"),void this.$router.push({name:"UserSignIn"});var e="рабочий";const t=await Z.Fy.create({component:M.Z,showBackdrop:!0,backdropDismiss:!0,componentProps:{location_group_name_low:e}});return t.onDidDismiss().then((e=>{this.locationCreate(e.data)})),t.present()},async locationCreate(e){if(!e)return;const t={location_holder:"store",location_holder_id:this.storeId,location_group_type:"address_work",location_address:e.location_address,location_latitude:e.location_latitude,location_longitude:e.location_longitude};try{await P().post(F.Z.state.hostname+"Store/locationCreate",t),this.itemGet()}catch(o){const e=o.responseJSON?.messages?.error;"limit_exeeded"==e&&this.$flash("Больше адресов добавить нельзя")}},async locationDelete(e){try{await P().post(F.Z.state.hostname+"Store/locationDelete",{location_id:e}),this.itemGet()}catch{}}}},H=o(3744);const N=(0,H.Z)(T,[["render",L],["__scopeId","data-v-0e72e19f"]]);var J=N}}]);
//# sourceMappingURL=151.b300aa38.js.map