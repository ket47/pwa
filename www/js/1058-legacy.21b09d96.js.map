{"version":3,"file":"js/1058-legacy.21b09d96.js","mappings":"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","sources":["webpack://tezkel/./node_modules/core-js/modules/es.array.filter.js","webpack://tezkel/./src/components/ImagePreviewModal.vue","webpack://tezkel/./src/components/ImagePreviewModal.vue?3d73","webpack://tezkel/./src/views/AdminModeration.vue","webpack://tezkel/./src/views/AdminModeration.vue?3d5d"],"sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar $filter = require('../internals/array-iteration').filter;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('filter');\n\n// `Array.prototype.filter` method\n// https://tc39.es/ecma262/#sec-array.prototype.filter\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  filter: function filter(callbackfn /* , thisArg */) {\n    return $filter(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","\n<template>\n  <ion-header>\n      <ion-toolbar color=\"secondary\">\n          <ion-title>Просмотр фотографии</ion-title>\n          <ion-icon :icon=\"closeOutline\" @click=\"closeModal();\" slot=\"end\" size=\"large\"></ion-icon>\n      </ion-toolbar>\n  </ion-header>\n  <ion-content>\n\n    <ion-grid v-if=\"actions\">\n      <ion-row>\n          <ion-col  v-for=\"(action, action_code) in actions\" :key=\"action_code\" >\n              <ion-button \n              v-if=\"action[0]\" \n              @click=\"actionCreate(action_code, action[1])\" \n              expand=\"block\" \n              :color=\"action[1]??'primary'\"\n              >\n                  {{ action[0] }}\n              </ion-button>\n          </ion-col>\n      </ion-row>\n    </ion-grid>\n    \n    <ion-img :src=\"$heap.state.hostname + 'image/get.php/'+image_hash+'.1000.1000.webp'\"/>\n  </ion-content>\n</template>\n\n<script>\nimport {closeOutline}      from 'ionicons/icons';\nimport {\n  modalController,\n  IonIcon,\n  IonToolbar,\n  IonHeader,\n  IonImg,\n  IonContent,\n  IonTitle,\n  IonButton,\n  IonCol,\n  IonRow,\n  IonGrid,\n  }  from \"@ionic/vue\";\n\nexport default{\n  props:['image_hash','actions'],\n  components:{\n  IonIcon,\n  IonToolbar,\n  IonHeader,\n  IonImg,\n  IonContent,\n  IonTitle,\n  IonButton,\n  IonCol,\n  IonRow,\n  IonGrid,\n\n  },\n  setup() {\n      const closeModal = function(){\n          modalController.dismiss();\n      };\n      return { closeModal, closeOutline };\n  },\n  methods:{\n    actionCreate(action_role, severity){\n      if( severity=='danger' ){\n          if(!confirm(\"Вы уверены?\")){\n              return\n          }\n      }\n      modalController.dismiss(null,action_role);\n    }\n  }\n};\n</script>","import { render } from \"./ImagePreviewModal.vue?vue&type=template&id=67560d0a\"\nimport script from \"./ImagePreviewModal.vue?vue&type=script&lang=js\"\nexport * from \"./ImagePreviewModal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"W:\\\\Ionic\\\\Tezkel\\\\blank\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<style scoped>\r\n.deleted{\r\n    border: 3px red solid;\r\n}\r\n</style>\r\n<template>\r\n    <base-layout pageDefaultBackLink=\"/user\" page-title=\"Модерация\">\r\n        <ion-segment swipe-gesture=\"true\" v-model=\"moderationType\" @ionChange=\"listTypeChanged($event)\">\r\n            <ion-segment-button value=\"images\">\r\n                Картинки\r\n            </ion-segment-button>\r\n            <ion-segment-button value=\"products\">\r\n                Товары\r\n            </ion-segment-button>\r\n            <ion-segment-button value=\"stores\">\r\n                Магазины\r\n            </ion-segment-button>\r\n            <ion-segment-button value=\"couriers\">\r\n                Курьеры\r\n            </ion-segment-button>\r\n        </ion-segment>\r\n        <div>\r\n            <ion-searchbar v-if=\"moderationType=='stores' || moderationType=='products' || moderationType=='couriers'\" placeholder=\"Фильтр\" v-model=\"filter\"/>\r\n            <ion-list v-if=\"listComputed.length>0\">\r\n                <ion-item v-for=\"item in listComputed\" :key=\"item.item_id\" button detail @click=\"itemEdit(item)\">\r\n                    <ion-thumbnail slot=\"start\" :class=\"item.class\">\r\n                        <ion-img :src=\"`${$heap.state.hostname}image/get.php/${item.image_hash}.50.50.webp`\"/>\r\n                    </ion-thumbnail>\r\n                    <ion-text>{{item.item_name}}</ion-text>\r\n                    <ion-label slot=\"end\">{{item.date_time}}</ion-label>\r\n                </ion-item>\r\n            </ion-list>\r\n            <ion-list v-else-if=\"is_loading==1\">\r\n                <ion-item v-for=\"item in [1,2,3]\" :key=\"item\" button detail>\r\n                    <ion-thumbnail slot=\"start\" style=\"background-color:lightgray\"></ion-thumbnail>\r\n                    <ion-skeleton-text animated></ion-skeleton-text>\r\n                </ion-item>\r\n            </ion-list>\r\n            <ion-card v-else color=\"light\">\r\n                <ion-card-content>\r\n                Ничего не найдено\r\n                </ion-card-content>\r\n            </ion-card>\r\n            <ion-infinite-scroll @ionInfinite=\"listLoadMore($event)\" id=\"moderation-infinite-scroll\">\r\n                <ion-infinite-scroll-content loading-spinner=\"bubbles\" loading-text=\"Loading more data...\"></ion-infinite-scroll-content>\r\n            </ion-infinite-scroll>\r\n        </div>\r\n    </base-layout>\r\n</template>\r\n<script>\r\nimport {\r\n  IonInfiniteScroll, \r\n  IonInfiniteScrollContent,\r\n  IonItem,\r\n  IonLabel,\r\n  IonList,\r\n  IonSegmentButton,\r\n  IonSegment,\r\n  IonImg,\r\n  modalController,\r\n  IonThumbnail,\r\n  IonText,\r\n  IonSkeletonText,\r\n  IonCard,\r\n  IonCardContent,\r\n  IonSearchbar,\r\n }                          from '@ionic/vue';\r\nimport jquery               from 'jquery'\r\nimport ImagePreviewModal    from '@/components/ImagePreviewModal'\r\n\r\nexport default {\r\n    components: {\r\n        IonInfiniteScroll, \r\n        IonInfiniteScrollContent,\r\n        IonItem,\r\n        IonLabel,\r\n        IonList,\r\n        IonSegmentButton,\r\n        IonSegment,\r\n        IonImg,\r\n        IonThumbnail,\r\n        IonText,\r\n        IonSkeletonText,\r\n        IonCard,\r\n        IonCardContent,\r\n        IonSearchbar\r\n    },\r\n    data(){\r\n        return{\r\n            items:[],\r\n            filter:'',\r\n            is_loading:0,\r\n            moderationType:'images',\r\n            holders:{\r\n                'store':'Поставщик',\r\n                'courier':'Курьер',\r\n                'product':'Товар',\r\n                'order':'Заказ',\r\n                'product_group_list':'Категория товара',\r\n                'location_group_list':'Категория местоп.',\r\n                'store_group_list':'Категория поставщ.',\r\n                'user_group_list':'Категория пользователя',\r\n            }\r\n        }\r\n    },\r\n    computed:{\r\n        listComputed(){\r\n            for(let item of this.items){\r\n                item.image_hash=item.image_hash||item.courier_photo_image_hash\r\n                item.item_id=item.image_id||item.store_id||item.courier_id||item.product_id\r\n                item.item_name=this.holders[item.image_holder]||item.store_name||item.user_name||item.product_name\r\n                item.date_time=this.toLocDateTime(item.updated_at)\r\n                item.class=item.deleted_at?'deleted':''\r\n            }\r\n            return this.items\r\n        }\r\n    },\r\n    methods:{\r\n        async listLoadMore(ev){\r\n            await this.listLoad()\r\n            ev.target.complete();\r\n        },\r\n        async listReload(){\r\n            this.items=[]\r\n            this.listLoad()\r\n        },\r\n        async listLoad(){\r\n            let request={\r\n                is_disabled:1,\r\n                is_active:0,\r\n                name_query:this.filter,\r\n                offset:this.items.length,\r\n                limit:15,\r\n                order:'updated_at'\r\n            }\r\n            try{\r\n                this.is_loading=1\r\n                let items\r\n                if(this.moderationType=='images'){\r\n                    items=await jquery.post(`${this.$heap.state.hostname}Image/listGet`,request)\r\n                } else \r\n                if(this.moderationType=='products'){\r\n                    request.name_query_fields='product_name,product_description,product_barcode,product_code'\r\n                    request.reverse='validity'\r\n                    const products=await jquery.post(`${this.$heap.state.hostname}Product/listGet`,request)\r\n                    items=products.product_list\r\n                } else\r\n                if(this.moderationType=='stores'){\r\n                    request.name_query_fields='store_name,store_description'\r\n                    request.reverse='validity'\r\n                    items=await jquery.post(`${this.$heap.state.hostname}Store/listGet`,request)\r\n                } else \r\n                if(this.moderationType=='couriers'){\r\n                    request.name_query_fields='courier_vehicle,user_phone,user_name'\r\n                    request.order='courier_list.updated_at'\r\n                    items=await jquery.post(`${this.$heap.state.hostname}Courier/listGet`,request)\r\n                }\r\n                this.is_loading=0\r\n                this.items=this.items.concat(items)\r\n            } catch(err){\r\n                //console.log(err)\r\n            }\r\n        },\r\n        listTypeChanged(e){\r\n            const listType=e.target.value;\r\n            this.items=[]\r\n            this.listLoad();\r\n        },\r\n        listFilter(){\r\n            clearTimeout(this.clock)\r\n            const self=this\r\n            this.clock=setTimeout(()=>{\r\n                self.listReload()\r\n            },300)\r\n        },\r\n        toLocDate( iso ){\r\n            const event = new Date(Date.parse(iso));\r\n            const options = { month: 'short', day: 'numeric' };\r\n\r\n            return event.toLocaleDateString(undefined, options);\r\n        },\r\n        toLocDateTime( iso ){\r\n            const event = new Date(Date.parse(iso));\r\n            const options = { month: 'short', day: 'numeric',hour:'numeric',minute:'numeric' };\r\n\r\n            return event.toLocaleDateString(undefined, options);\r\n        },\r\n        itemEdit(item){\r\n            if( this.moderationType=='images' ){\r\n                this.imageEdit(item)\r\n            }\r\n            if( this.moderationType=='products' ){\r\n                this.$router.push('/catalog/product-edit-'+item.product_id)\r\n            }\r\n            if( this.moderationType=='stores' ){\r\n                this.$router.push('/catalog/store-edit-'+item.store_id)\r\n            }\r\n            if( this.moderationType=='couriers' ){\r\n                this.$router.push('/user/courier-dashboard?courier_id='+item.courier_id)\r\n            }\r\n        },\r\n        async imageEdit(item){\r\n            const actions={\r\n                'delete':['Удалить','danger'],\r\n                'postpone':['Потом','primary'],\r\n                'enable':['Ок','success'],\r\n            }\r\n            const modal = await modalController.create({\r\n                component: ImagePreviewModal,\r\n                componentProps:{image_hash:item.image_hash,actions},\r\n                initialBreakpoint: 0.75,\r\n                breakpoints: [0.75, 1]\r\n                });\r\n            this.$topic.on('dismissModal',()=>{\r\n                modal.dismiss();\r\n            });\r\n            modal.present();\r\n            const action=await modal.onDidDismiss()\r\n            if( action.role=='delete' ){\r\n                await this.imageDelete(item)\r\n            }\r\n            if( action.role=='enable' ){\r\n                await this.imageEnable(item)\r\n            }\r\n            if( action.role=='postpone' ){\r\n                await this.imagePostpone(item)\r\n            }\r\n            this.listReload()\r\n        },\r\n        async imageEnable(item){\r\n            await jquery.post(`${this.$heap.state.hostname}Image/itemDisable`,{image_id:item.image_id,is_disabled:0})\r\n        },\r\n        async imagePostpone(item){\r\n            //only to change updated_at db field\r\n            await jquery.post(`${this.$heap.state.hostname}Image/itemDisable`,{image_id:item.image_id,is_disabled:0})\r\n            await jquery.post(`${this.$heap.state.hostname}Image/itemDisable`,{image_id:item.image_id,is_disabled:1})\r\n        },\r\n        async imageDelete(item){\r\n            await jquery.post(`${this.$heap.state.hostname}Image/itemDelete`,{image_id:item.image_id})\r\n        },\r\n    },\r\n    mounted(){\r\n        this.listLoad();\r\n    },\r\n    watch:{\r\n        'filter':function(){\r\n            this.listFilter()\r\n        }\r\n    }\r\n}\r\n</script>","import { render } from \"./AdminModeration.vue?vue&type=template&id=0d87ad34&scoped=true\"\nimport script from \"./AdminModeration.vue?vue&type=script&lang=js\"\nexport * from \"./AdminModeration.vue?vue&type=script&lang=js\"\n\nimport \"./AdminModeration.vue?vue&type=style&index=0&id=0d87ad34&scoped=true&lang=css\"\n\nimport exportComponent from \"W:\\\\Ionic\\\\Tezkel\\\\blank\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0d87ad34\"]])\n\nexport default __exports__"],"names":["$","$filter","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","target","proto","forced","filter","callbackfn","this","arguments","length","undefined","_createVNode","_component_ion_header","_component_ion_toolbar","color","_component_ion_title","_component_ion_icon","icon","$setup","onClick","slot","size","_component_ion_content","$props","_createBlock","_component_ion_grid","key","_component_ion_row","_createElementBlock","_Fragment","action","action_code","_component_ion_col","_component_ion_button","$options","expand","_component_ion_img","src","_ctx","state","hostname","props","components","IonIcon","IonToolbar","IonHeader","IonImg","IonContent","IonTitle","IonButton","IonCol","IonRow","IonGrid","setup","closeModal","modalController","closeOutline","methods","actionCreate","action_role","severity","confirm","__exports__","render","_component_base_layout","pageDefaultBackLink","_component_ion_segment","$data","onIonChange","$event","_component_ion_segment_button","value","_createElementVNode","_component_ion_searchbar","placeholder","_component_ion_list","item","_component_ion_item","item_id","button","detail","_component_ion_thumbnail","class","image_hash","_component_ion_text","item_name","_component_ion_label","date_time","style","_component_ion_skeleton_text","animated","_component_ion_card","_component_ion_card_content","_component_ion_infinite_scroll","onIonInfinite","id","_component_ion_infinite_scroll_content","IonInfiniteScroll","IonInfiniteScrollContent","IonItem","IonLabel","IonList","IonSegmentButton","IonSegment","IonThumbnail","IonText","IonSkeletonText","IonCard","IonCardContent","IonSearchbar","data","items","is_loading","moderationType","holders","computed","listComputed","courier_photo_image_hash","image_id","store_id","courier_id","product_id","image_holder","store_name","user_name","product_name","toLocDateTime","updated_at","deleted_at","listLoadMore","ev","listLoad","complete","listReload","request","is_disabled","is_active","name_query","offset","limit","order","jquery","$heap","name_query_fields","reverse","products","product_list","concat","listTypeChanged","e","listFilter","clearTimeout","clock","self","setTimeout","toLocDate","iso","event","Date","parse","options","month","day","toLocaleDateString","hour","minute","itemEdit","imageEdit","$router","push","actions","component","ImagePreviewModal","componentProps","initialBreakpoint","breakpoints","modal","$topic","on","dismiss","present","onDidDismiss","role","imageDelete","imageEnable","imagePostpone","mounted","watch"],"sourceRoot":""}