{"version":3,"file":"js/4217.13509029.js","mappings":"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","sources":["webpack://Tezkel/./src/views/UserEdit.vue","webpack://Tezkel/./src/views/UserEdit.vue?0119"],"sourcesContent":["<template>\r\n  <base-layout page-title=\"Мой профиль\">\r\n        <ion-list>\r\n          <ion-radio-group v-model=\"fields.user_avatar_name\">\r\n          <ion-item>\r\n            <ion-thumbnail slot=\"start\"><img :src=\"$heap.state.hostname+'img/avatar/man.png'\" /></ion-thumbnail>\r\n            <ion-radio value=\"man\" @ionFocus=\"save('user_avatar_name', $event.target.value)\">аватар 1</ion-radio>\r\n          </ion-item>\r\n          <ion-item>\r\n            <ion-thumbnail slot=\"start\"><img :src=\"$heap.state.hostname+'img/avatar/woman.png'\" /></ion-thumbnail>\r\n            <ion-radio value=\"woman\" @ionFocus=\"save('user_avatar_name', $event.target.value)\">аватар 2</ion-radio>\r\n          </ion-item>\r\n          </ion-radio-group>\r\n          <ion-item-divider>\r\n            <ion-label>Данные пользователя</ion-label>\r\n          </ion-item-divider>\r\n          <ion-item>\r\n            <ion-input \r\n              v-model=\"fields.user_name\" \r\n              name=\"user_name\" \r\n              type=\"text\" \r\n              @change=\"save('user_name', $event.target.value)\" \r\n              placeholder=\"как к вам обращаться?\"\r\n              label=\"Ваш псевдоним\"\r\n              label-placement=\"stacked\"\r\n              required\r\n            ></ion-input>\r\n          </ion-item>\r\n\r\n          <ion-item>\r\n            <ion-input \r\n              v-model=\"fields.user_surname\" \r\n              placeholder=\"Фамилия (не обязательно)\"\r\n              label=\"Фамилия (не обязательно)\"\r\n              label-placement=\"stacked\"\r\n              name=\"user_surname\" \r\n              type=\"text\" \r\n              @change=\"save('user_surname', $event.target.value)\" \r\n            ></ion-input>\r\n          </ion-item>\r\n          <ion-item>\r\n            <ion-input readonly\r\n              v-model=\"fields.user_phone\"\r\n              label=\"Телефон\"\r\n              label-placement=\"stacked\"\r\n            ></ion-input>\r\n            <ion-button slot=\"end\" v-if=\"fields.user_phone && (!fields.user_phone_verified || fields.user_phone_verified === '0')\" @click=\"phoneVerify\" expand=\"block\">Подтвердить</ion-button>\r\n            <ion-button slot=\"end\" v-if=\"fields.user_phone && fields.user_phone_verified && fields.user_phone_verified !== '0'\" expand=\"block\" disabled=\"true\">Подтверждено</ion-button>\r\n          </ion-item>\r\n\r\n          <ion-item>\r\n            <ion-input \r\n              v-model=\"fields.user_email\" \r\n              name=\"user_email\" \r\n              type=\"email\" \r\n              @change =\"save('user_email', $event.target.value)\" \r\n              placeholder=\"Электронная почта\"\r\n              label=\"Электронная почта\"\r\n              label-placement=\"stacked\"\r\n            ></ion-input>\r\n          </ion-item>\r\n\r\n        </ion-list>\r\n\r\n\r\n        <ion-item-divider>\r\n          <ion-label>Пароль пользователя</ion-label>\r\n        </ion-item-divider>\r\n        <ion-row responsive-sm>\r\n          <ion-col>\r\n            <ion-button @click=\"passwordReset()\" expand=\"block\"><ion-icon :icon=\"keyOutline\" slot=\"start\"/>Сбросить</ion-button>\r\n          </ion-col>\r\n          <ion-col>\r\n            <ion-button @click=\"passwordPromptShow=true\" expand=\"block\"><ion-icon :icon=\"keyOutline\" slot=\"start\"/>Изменить</ion-button>\r\n          </ion-col>\r\n        </ion-row>\r\n\r\n        <ion-item-divider>\r\n          <ion-label>Удаление учетной записи</ion-label>\r\n        </ion-item-divider>\r\n        <ion-row responsive-sm>\r\n          <ion-col>\r\n            <ion-button @click=\"deletePromptShow=true\" expand=\"block\"  fill=\"outline\" color=\"danger\"><ion-icon :icon=\"trashOutline\" slot=\"start\"/>Удалить аккаунт</ion-button>\r\n          </ion-col>\r\n          <ion-col>\r\n            \r\n          </ion-col>\r\n        </ion-row>\r\n\r\n\r\n      <ion-modal :isOpen=\"passwordPromptShow\" :initial-breakpoint=\"0.40\" :breakpoints=\"[0, 0.40, 0.8]\">\r\n        <ion-header>\r\n          <ion-toolbar>\r\n            <ion-title>Новый пароль</ion-title>\r\n            <ion-icon :icon=\"closeOutline\" @click=\"passwordPromptShow=false\" slot=\"end\" size=\"large\"></ion-icon>\r\n          </ion-toolbar>\r\n        </ion-header>\r\n        <ion-content class=\"ion-padding\">\r\n          <ion-item>\r\n            <ion-input v-model=\"fields.user_pass_current\" type=\"password\" placeholder=\"пароль\" label=\"Действующий пароль\" label-placement=\"stacked\"></ion-input>\r\n          </ion-item>\r\n          <ion-item>\r\n            <ion-input v-model=\"fields.user_pass\" type=\"text\" placeholder=\"пароль\" label=\"Новый пароль\" label-placement=\"stacked\"></ion-input>\r\n          </ion-item>\r\n          <ion-item>\r\n            <ion-input v-model=\"fields.user_pass_confirm\" type=\"text\" placeholder=\"пароль (повтор)\" label=\"Новый пароль (повтор)\" label-placement=\"stacked\"></ion-input>\r\n          </ion-item>\r\n          <ion-button @click=\"passwordSave()\" expand=\"block\">Изменить</ion-button>\r\n        </ion-content>\r\n      </ion-modal>\r\n\r\n    <ion-modal :isOpen=\"deletePromptShow\" :initial-breakpoint=\"0.40\" :breakpoints=\"[0, 0.40, 0.8]\">\r\n      <ion-header>\r\n        <ion-toolbar color=\"danger\">\r\n          <ion-title>Удаление учетной записи</ion-title>\r\n          <ion-icon :icon=\"closeOutline\" @click=\"deletePromptShow=false\" slot=\"end\" size=\"large\"></ion-icon>\r\n        </ion-toolbar>\r\n      </ion-header>\r\n      <ion-content class=\"ion-padding\">\r\n        <ion-item lines=\"none\" style=\"margin-bottom:15px;\">\r\n          <div>\r\n            <p>Ваши персональные данные будут безвозвратно удалены.</p>\r\n            <p>Повторная регистрация по этому номеру телефона будет невозможна!</p>\r\n          </div>\r\n        </ion-item>\r\n        <ion-item>\r\n          <ion-input v-model=\"fields.user_pass_current\" type=\"password\" placeholder=\"пароль\" label=\"Действующий пароль\" label-placement=\"stacked\"></ion-input>\r\n        </ion-item>\r\n        <ion-button @click=\"deleteAccount()\" expand=\"block\" color=\"danger\">Удалить аккаунт</ion-button>\r\n      </ion-content>\r\n    </ion-modal>\r\n\r\n  </base-layout>\r\n</template>\r\n\r\n<script>\r\n\r\nimport {\r\n  IonList,\r\n  IonItem,\r\n  IonLabel,\r\n  IonThumbnail,\r\n  IonRadio,\r\n  IonRadioGroup,\r\n  IonInput,\r\n  IonCol,\r\n  IonRow,\r\n  IonItemDivider,\r\n  IonButton,\r\n  IonModal,\r\n  IonHeader,\r\n  IonTitle,\r\n  IonContent,\r\n  IonIcon,\r\n  IonToolbar,\r\n\r\n}                   from '@ionic/vue'\r\nimport {\r\n  closeOutline,\r\n  keyOutline,\r\n  trashOutline,\r\n}                   from 'ionicons/icons';\r\nimport jQuery       from \"jquery\";\r\nimport User         from '@/scripts/User'\r\n\r\nexport default  {\r\n  components:{\r\n  IonList,\r\n  IonItem,\r\n  IonLabel,\r\n  IonThumbnail,\r\n  IonRadio,\r\n  IonRadioGroup,\r\n  IonInput,\r\n  IonCol,\r\n  IonRow,\r\n  IonItemDivider,\r\n  IonButton,\r\n  IonModal,\r\n  IonHeader,\r\n  IonTitle,\r\n  IonContent,\r\n  IonIcon,\r\n  IonToolbar,\r\n  },\r\n  setup(){\r\n    return {closeOutline,keyOutline,trashOutline}\r\n  },\r\n  data(){\r\n    return {\r\n      config: {\r\n        phoneMask: '+0(000)-000-00-00'\r\n      },\r\n      fields: this.$heap.state.user,\r\n      passwordPromptShow:false,\r\n      deletePromptShow:false\r\n    }\r\n  },\r\n  computed: {\r\n    isPhoneValid() {\r\n      return this.fields.user_phone.replace(/\\D/g,\"\").length == 11;\r\n    }\r\n  },\r\n  methods:{\r\n    async save(field_name, field_value) {\r\n      if(field_name == 'user_phone'){\r\n        if(!this.isPhoneValid){\r\n          return false;\r\n        }\r\n        field_value = field_value.replace(/\\D/g,\"\");\r\n      }\r\n      var requestData = {};\r\n      requestData.user_id = this.$heap.state.user.user_id;\r\n      requestData[field_name] = field_value;\r\n      await this.itemUpdate(requestData)\r\n      this.fields[field_name] = field_value\r\n    },\r\n    async itemUpdate(requestData) {\r\n      try{\r\n        await jQuery.post( `${this.$heap.state.hostname}User/itemUpdate`, JSON.stringify(requestData))\r\n        //User.get()\r\n        return true\r\n      }catch(err){\r\n        let exception_code='unknown';\r\n        try{\r\n          const invalid_field=Object.keys(JSON.parse(err.responseJSON.messages.error))[0]\r\n          const invalid_reason=Object.values(JSON.parse(err.responseJSON.messages.error))[0]\r\n          exception_code=invalid_field+'_'+invalid_reason\r\n        }catch{/** */}\r\n          switch(exception_code){\r\n            case 'user_phone_notunique':\r\n              this.$flash(\"Пользователь с таким телефоном уже зарегистрирован\");\r\n              break;\r\n            case 'user_phone_required':\r\n            case 'user_phone_invalid':\r\n            case 'user_phone_short':\r\n              this.$flash(\"Проверьте номер телефона\");\r\n              break;\r\n            case 'user_name_required':\r\n            case 'user_name_short':\r\n              this.$flash(\"Проверьте ваш псевдоним\");\r\n              break;\r\n            case 'user_email_invalid':\r\n              this.$flash(\"Проверьте ваш е-маил\");\r\n              break;\r\n            case 'user_email_notunique':\r\n              this.$flash(\"Такой е-маил уже используется\");\r\n              break;\r\n            case 'user_pass_short':\r\n              this.$flash(\"Пароль слишком короткий\");\r\n              break;\r\n            case 'user_pass_notmatches':\r\n              this.$flash(\"Пароль не совпадает с подтверждением\");\r\n              break;\r\n          }\r\n          return false\r\n        }\r\n    },\r\n    phoneVerify(){\r\n      const user_phone=this.fields.user_phone.replace(/\\D/g,\"\")\r\n      try{\r\n        jQuery.post( `${this.$heap.state.hostname}User/phoneVerificationSend`, {user_phone})\r\n        this.$go({name: 'UserVerifyPhone', params: {phone: user_phone}});\r\n      }catch{/** */}\r\n    },\r\n    async passwordSave(){\r\n      if(this.fields.user_pass!=this.fields.user_pass_confirm){\r\n        this.$flash(\"Пароль и подтверждение не совпадают\")\r\n        return\r\n      }\r\n      if(!this.fields.user_pass_current || !this.fields.user_pass || !this.fields.user_pass_confirm){\r\n        this.$flash(\"Все поля обязательны для заполнения\")\r\n        return\r\n      }\r\n      const requestData={\r\n        user_id:this.$heap.state.user.user_id,\r\n        user_pass:this.fields.user_pass,\r\n        user_pass_current:this.fields.user_pass_current,\r\n      }\r\n      const updated=await this.itemUpdate(requestData)\r\n      if( updated ){\r\n        this.passwordPromptShow=false\r\n        this.$flash(\"Пароль изменен\")\r\n      }\r\n    },\r\n    async passwordReset(){\r\n      if(!confirm(\"Выслать новый пароль на телефон и электронную почту?\")){\r\n        return\r\n      }\r\n      const request={\r\n        user_phone:this.fields.user_phone,\r\n        user_email:this.fields.user_email,\r\n        user_name:this.fields.user_name\r\n      }\r\n      try{\r\n        await jQuery.post( `${this.$heap.state.hostname}User/passwordReset`, request)\r\n        this.$alert(\"Вам был выслан новый пароль\",\"Пароль сброшен\")\r\n      }catch{/** */}\r\n    },\r\n    async deleteAccount(){\r\n      try{\r\n        if(!this.fields.user_pass_current){\r\n          this.$flash(\"Действующий пароль обязателен\")\r\n          return\r\n        }\r\n        const requestData={\r\n          user_id:this.$heap.state.user.user_id,\r\n          user_pass:this.fields.user_pass_current,\r\n        }\r\n        await jQuery.post( `${this.$heap.state.hostname}User/itemDelete`, requestData)\r\n        this.deletePromptShow=false\r\n        await User.signOut()\r\n        await this.$go('/user');\r\n      }catch{\r\n        this.$flash(\"Не удалось удалить аккаунт. Проверьте пароль\")\r\n      }\r\n    },\r\n    isPhoneValidate(ev) {\r\n      this.fields.user_phone = ev.target.value;\r\n      this.fields.user_phone = this.fields.user_phone.replace(/\\D/g,\"\");\r\n      if(this.fields.user_phone.length > 11){\r\n        this.fields.user_phone = this.fields.user_phone.substring(0, 11);\r\n      }\r\n      let result = '';\r\n      let numberIndex = 0; \r\n      for(let index in this.config.phoneMask){\r\n        if(!this.fields.user_phone[numberIndex]){\r\n          break;\r\n        }\r\n        let character = this.config.phoneMask[index];\r\n        if(character == '0'){\r\n          result += this.fields.user_phone[numberIndex];\r\n          numberIndex++;\r\n        } else {\r\n          result += character\r\n        }\r\n      }\r\n      this.fields.user_phone = result;\r\n      return this.fields.user_phone;\r\n    },\r\n  },\r\n  created(){\r\n    const self=this\r\n    this.$topic.on('userGet',user=>{\r\n      self.fields=user\r\n    })\r\n  },\r\n}\r\n</script>","import { render } from \"./UserEdit.vue?vue&type=template&id=230631f1\"\nimport script from \"./UserEdit.vue?vue&type=script&lang=js\"\nexport * from \"./UserEdit.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementVNode","_createBlock","_component_base_layout","_createVNode","_component_ion_list","_component_ion_radio_group","$data","fields","user_avatar_name","$event","_component_ion_item","_component_ion_thumbnail","slot","src","_ctx","$heap","state","hostname","_component_ion_radio","value","onIonFocus","_cache","$options","save","target","_component_ion_item_divider","_component_ion_label","_component_ion_input","user_name","name","type","onChange","placeholder","label","required","user_surname","readonly","user_phone","user_phone_verified","_component_ion_button","onClick","phoneVerify","expand","disabled","user_email","_component_ion_row","_component_ion_col","passwordReset","_component_ion_icon","icon","$setup","keyOutline","passwordPromptShow","deletePromptShow","fill","color","trashOutline","_component_ion_modal","isOpen","breakpoints","_component_ion_header","_component_ion_toolbar","_component_ion_title","closeOutline","size","_component_ion_content","class","user_pass_current","user_pass","user_pass_confirm","passwordSave","lines","style","_hoisted_3","deleteAccount","components","IonList","IonItem","IonLabel","IonThumbnail","IonRadio","IonRadioGroup","IonInput","IonCol","IonRow","IonItemDivider","IonButton","IonModal","IonHeader","IonTitle","IonContent","IonIcon","IonToolbar","setup","data","config","phoneMask","this","user","computed","isPhoneValid","replace","length","methods","field_name","field_value","requestData","user_id","itemUpdate","jQuery","JSON","stringify","err","exception_code","invalid_field","Object","keys","parse","responseJSON","messages","error","invalid_reason","values","$flash","$go","params","phone","updated","confirm","request","$alert","User","signOut","isPhoneValidate","ev","substring","result","numberIndex","index","character","created","self","$topic","on","__exports__","render"],"sourceRoot":""}