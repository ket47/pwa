"use strict";(self["webpackChunkTezkel"]=self["webpackChunkTezkel"]||[]).push([[9378],{9378:function(e,t,a){a.r(t),a.d(t,{default:function(){return f}});var i=a(6252);function n(e,t,a,n,o,l){const p=(0,i.up)("ion-icon"),s=(0,i.up)("ion-label"),u=(0,i.up)("ion-input"),g=(0,i.up)("ion-item"),d=(0,i.up)("ion-list"),r=(0,i.up)("ckeditor"),m=(0,i.up)("ion-button"),c=(0,i.up)("ion-col"),h=(0,i.up)("ion-row"),_=(0,i.up)("ion-grid"),f=(0,i.up)("base-layout");return(0,i.wg)(),(0,i.j4)(f,{pageTitle:"Редактирование страницы",pageDefaultBackLink:"/user"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Wm)(g,null,{default:(0,i.w5)((()=>[(0,i.Wm)(p,{slot:"start",icon:n.bookmarkOutline},null,8,["icon"]),(0,i.Wm)(s,{position:"stacked",color:"primary"},{default:(0,i.w5)((()=>[(0,i.Uk)("Заголовок статьи")])),_:1}),(0,i.Wm)(u,{modelValue:o.page.page_title,"onUpdate:modelValue":t[0]||(t[0]=e=>o.page.page_title=e),placeholder:"Заголовок статьи"},null,8,["modelValue"])])),_:1}),(0,i.Wm)(g,null,{default:(0,i.w5)((()=>[(0,i.Wm)(p,{slot:"start",icon:n.codeOutline},null,8,["icon"]),(0,i.Wm)(s,{position:"stacked",color:"primary"},{default:(0,i.w5)((()=>[(0,i.Uk)("Код для ссылки")])),_:1}),(0,i.Wm)(u,{modelValue:o.page.page_name,"onUpdate:modelValue":t[1]||(t[1]=e=>o.page.page_name=e),placeholder:"Код для ссылки"},null,8,["modelValue"])])),_:1})])),_:1}),(0,i.Wm)(r,{editor:o.editor,modelValue:o.page.page_content,"onUpdate:modelValue":t[2]||(t[2]=e=>o.page.page_content=e),config:o.editorConfig},null,8,["editor","modelValue","config"]),(0,i.Wm)(_,{style:{width:"100%"}},{default:(0,i.w5)((()=>[(0,i.Wm)(h,null,{default:(0,i.w5)((()=>[(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[(0,i.Wm)(m,{onClick:t[3]||(t[3]=t=>e.$go("/user/text-list")),color:"light"},{default:(0,i.w5)((()=>[(0,i.Uk)("К списку страниц")])),_:1})])),_:1}),(0,i.Wm)(c,{style:{"text-align":"right"}},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{onClick:t[4]||(t[4]=e=>l.itemDelete()),color:"danger"},{default:(0,i.w5)((()=>[(0,i.Uk)("Удалить")])),_:1})])),_:1}),(0,i.Wm)(c,{style:{"text-align":"right"}},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{onClick:t[5]||(t[5]=e=>l.itemSave())},{default:(0,i.w5)((()=>[(0,i.Uk)("Сохранить")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}a(8862);var o=a(4e3),l=a.n(o),p=a(5234),s=a.n(p),u=(a(7825),a(8903)),g=a(4929),d=a(351),r=a(9755),m=a.n(r),c={components:{IonLabel:g.Q$,IonIcon:g.gu,IonList:g.q_,IonItem:g.Ie,IonInput:g.pK,IonButton:g.YG,IonGrid:g.jY,IonRow:g.Nd,IonCol:g.wI,ckeditor:l().component},setup(){return{documentTextOutline:u.L82,codeOutline:u.Zpo,bookmarkOutline:u.eZy}},data(){return{editor:s(),page_id:0,page:{page_name:"",page_title:"",page_content:""},editorConfig:{language:"ru"}}},created(){},ionViewDidEnter(){var e;d.Z.isAdmin()?(this.page_id=null!==(e=this.$route.params.id)&&void 0!==e?e:0,this.page_id>0?this.itemGet():this.page={page_name:"",page_title:"",page_content:""}):(this.$flash("Страница для администраторов"),this.$go("/catalog"))},methods:{async itemGet(){const e=this.page_id;try{this.page=await m().post(this.$heap.state.hostname+"Page/itemGet",{page_id:e})}catch{}},async itemSave(){const e={page_name:this.page.page_name,page_title:this.page.page_title,page_content:this.page.page_content};try{this.page_id>0?(e.page_id=this.page_id,await m().post(this.$heap.state.hostname+"Page/itemUpdate",JSON.stringify(e)),this.$flash("Страница сохранена")):this.page_id=await m().post(this.$heap.state.hostname+"Page/itemCreate",JSON.stringify(e))}catch{}},async itemDelete(){if(!confirm(`Удалить страницу "${this.page.page_title}"?`))return;const e=this.page_id;try{await m().post(this.$heap.state.hostname+"Page/itemDelete",{page_id:e}),this.$flash("Страница удалена"),this.$go("/user/text-list")}catch{}}}},h=a(3744);const _=(0,h.Z)(c,[["render",n]]);var f=_}}]);
//# sourceMappingURL=9378.df29431b.js.map