"use strict";(self["webpackChunkTezkel"]=self["webpackChunkTezkel"]||[]).push([[638],{8638:function(e,n,t){t.r(n),t.d(n,{default:function(){return I}});var o=t(6252),i=t(3577);const u=(0,o.Uk)(" Подтверждение номера телефона "),a=(0,o.Uk)(" Мы выслали вам смс с кодом подтверждения на номер "),r=(0,o.Uk)(". Введите 4 цифры из смс ниже "),l={novalidate:""},s=(0,o.Uk)("Код подтверждения из смс"),c=(0,o.Uk)("Подтвердить");function h(e,n,t,h,d,p){const f=(0,o.up)("ion-card-title"),m=(0,o.up)("ion-card-header"),_=(0,o.up)("ion-card-content"),w=(0,o.up)("ion-card"),k=(0,o.up)("ion-label"),I=(0,o.up)("ion-input"),v=(0,o.up)("ion-col"),b=(0,o.up)("ion-row"),W=(0,o.up)("ion-item"),y=(0,o.up)("ion-list"),$=(0,o.up)("ion-button"),g=(0,o.up)("base-layout");return(0,o.wg)(),(0,o.j4)(g,{"page-title":"Подтверждение телефона","page-default-back-link":"/home"},{default:(0,o.w5)((()=>[(0,o.Wm)(w,null,{default:(0,o.w5)((()=>[(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Wm)(f,{color:"primary"},{default:(0,o.w5)((()=>[u])),_:1})])),_:1}),(0,o.Wm)(_,null,{default:(0,o.w5)((()=>[a,(0,o._)("b",null,(0,i.zw)(d.user_phone),1),r])),_:1})])),_:1}),(0,o._)("form",l,[(0,o.Wm)(y,null,{default:(0,o.w5)((()=>[(0,o.Wm)(W,null,{default:(0,o.w5)((()=>[(0,o.Wm)(b,null,{default:(0,o.w5)((()=>[(0,o.Wm)(v,null,{default:(0,o.w5)((()=>[(0,o.Wm)(k,{position:"stacked",color:"primary"},{default:(0,o.w5)((()=>[s])),_:1}),(0,o.Wm)(I,{modelValue:d.verification_code,"onUpdate:modelValue":n[0]||(n[0]=e=>d.verification_code=e),type:"numeric",inputmode:"numeric",placeholder:"- - - -",onIonInput:n[1]||(n[1]=e=>{d.verification_code=e.target.value,p.onSubmit()}),enterkeyhint:"go",required:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,o.Wm)(b,{"responsive-sm":""},{default:(0,o.w5)((()=>[(0,o.Wm)(v,null,{default:(0,o.w5)((()=>[(0,o.Wm)($,{onClick:n[2]||(n[2]=e=>p.onSubmit()),expand:"block"},{default:(0,o.w5)((()=>[c])),_:1})])),_:1})])),_:1})])])),_:1})}var d=t(4508),p=t(9755),f=t.n(p),m=t(351),_={name:"UserVerifyPhone",components:{IonLabel:d.Q$,IonCol:d.wI,IonInput:d.pK,IonRow:d.Nd,IonButton:d.YG,IonCard:d.PM,IonCardHeader:d.Zi,IonCardTitle:d.Dq,IonCardContent:d.FN,IonItem:d.Ie,IonList:d.q_},data(){return{verification_code:null,user_phone:this.$route.query.user_phone||""}},async mounted(){if(this.user_phone=this.$route.query.user_phone||"",!this.user_phone)return;let e={user_phone:this.user_phone};try{await f().post(`${this.$heap.state.hostname}User/phoneVerificationSend`,e)}catch{}},methods:{async onSubmit(){if(this.verification_code&&4==String(this.verification_code).length)try{await f().post(`${this.$heap.state.hostname}/User/phoneVerificationCheck`,{user_phone:this.user_phone,verification_code:this.verification_code}),m.Z.autoSignIn(),this.$router.push("/home"),this.$flash("Номер телефона верифицирован")}catch(e){const n=e.responseJSON.messages.error;switch(n){case"verification_not_found":this.$flash("Код верификации устарел"),this.$router.push("sign-in");break}this.$flash("Не удалось верифицировать телефон")}}}},w=t(3744);const k=(0,w.Z)(_,[["render",h]]);var I=k}}]);
//# sourceMappingURL=638.194f9266.js.map