"use strict";(self["webpackChunktezkel"]=self["webpackChunktezkel"]||[]).push([[5730],{5730:function(t,e,i){i.r(e),i.d(e,{default:function(){return m}});var a=i(6252),n=i(3577);function s(t,e,i,s,r,o){const f=(0,a.up)("ion-icon"),l=(0,a.up)("ion-label"),u=(0,a.up)("ion-item"),c=(0,a.up)("ion-list"),d=(0,a.up)("base-layout");return(0,a.wg)(),(0,a.j4)(d,{pageDefaultBackLink:"/user","page-title":"Список тарифов"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.tariffList,(e=>((0,a.wg)(),(0,a.j4)(u,{key:e.tariff_id,detail:"",button:"",onClick:i=>t.$go(`/user/admin-tariff-edit-${e.tariff_id}`)},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{icon:s.briefcaseOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,a.Wm)(l,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.tariff_name),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128)),(0,a.Wm)(u,{detail:"",button:"",onClick:e[0]||(e[0]=t=>o.itemCreate())},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{icon:s.addOutline,slot:"start"},null,8,["icon"]),(0,a.Wm)(l,null,{default:(0,a.w5)((()=>[(0,a.Uk)("Добавить тариф")])),_:1})])),_:1})])),_:1})])),_:1})}i(8862);var r=i(8903),o=i(2824),f=i(9755),l=i.n(f),u={components:{IonItem:o.Ie,IonLabel:o.Q$,IonList:o.q_,IonIcon:o.gu},setup(){return{briefcaseOutline:r.SVL,addOutline:r.s6O}},data(){return{tariffList:[]}},computed:{},methods:{async listLoad(){try{this.tariffList=await l().post(`${this.$heap.state.hostname}Admin/Tariff/listGet`)}catch(t){}},async itemCreate(){let t={tariff_name:"new tariff"};try{let e=await l().post(`${this.$heap.state.hostname}Admin/Tariff/itemCreate`,JSON.stringify(t));this.$go(`/user/admin-tariff-edit-${e}`)}catch(e){const t=e.responseJSON,i=t.messages.error;switch(i){case"forbidden":this.$flash("Не достаточно прав");break}return!1}},async itemDelete(t){if(!confirm("Вы уверенны"))return;let e={tariff_id:t};try{await l().post(`${this.$heap.state.hostname}Admin/Tariff/itemDelete`,JSON.stringify(e)),this.listLoad()}catch(i){const t=i.responseJSON,e=t.messages.error;switch(e){case"forbidden":this.$flash("Не достаточно прав");break}}}},mounted(){this.listLoad()},ionViewDidEnter(){this.tariffList.length||this.listLoad()},ionViewDidLeave(){this.tariffList=[]}},c=i(3744);const d=(0,c.Z)(u,[["render",s]]);var m=d}}]);
//# sourceMappingURL=5730-legacy.1de7a8c5.js.map