"use strict";(self["webpackChunktezkel_delivery"]=self["webpackChunktezkel_delivery"]||[]).push([[525],{525:function(e,a,l){l.r(a),l.d(a,{default:function(){return b}});var s=l(6252);const t=(0,s.Uk)("Аватар"),u=["src"],n=(0,s.Uk)("Муж."),r=["src"],o=(0,s.Uk)("Жен."),i=(0,s.Uk)("Имя"),d=(0,s.Uk)("Фамилия"),m=(0,s.Uk)("Отчество"),p=(0,s.Uk)("Телефон"),f=(0,s.Uk)("Подтвердить"),h=(0,s.Uk)("Подтверждено"),_=(0,s.Uk)("Электронная почта"),c=(0,s.Uk)("Сбросить пароль");function v(e,a,l,v,g,k){const w=(0,s.up)("ion-label"),W=(0,s.up)("ion-thumbnail"),U=(0,s.up)("ion-radio"),y=(0,s.up)("ion-item"),V=(0,s.up)("ion-list"),b=(0,s.up)("ion-radio-group"),C=(0,s.up)("ion-input"),Z=(0,s.up)("ion-button"),x=(0,s.up)("ion-col"),D=(0,s.up)("ion-row"),M=(0,s.up)("base-layout");return(0,s.wg)(),(0,s.j4)(M,{"page-title":"Мой профиль","page-default-back-link":"/user-dashboard",errorMessage:g.error},{default:(0,s.w5)((()=>[(0,s.Wm)(V,null,{default:(0,s.w5)((()=>[(0,s.Wm)(y,null,{default:(0,s.w5)((()=>[(0,s.Wm)(w,{position:"stacked",color:"primary"},{default:(0,s.w5)((()=>[t])),_:1}),(0,s.Wm)(b,{value:g.fields.user_avatar_name},{default:(0,s.w5)((()=>[(0,s.Wm)(V,{style:{"margin-top":"5px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(y,null,{default:(0,s.w5)((()=>[(0,s.Wm)(W,null,{default:(0,s.w5)((()=>[(0,s._)("img",{src:e.$heap.state.hostname+"img/avatar/man.png"},null,8,u)])),_:1}),(0,s.Wm)(w,null,{default:(0,s.w5)((()=>[n])),_:1}),(0,s.Wm)(U,{value:"man",onIonFocus:a[0]||(a[0]=e=>k.save("user_avatar_name",e.target.value))})])),_:1}),(0,s.Wm)(y,null,{default:(0,s.w5)((()=>[(0,s.Wm)(W,null,{default:(0,s.w5)((()=>[(0,s._)("img",{src:e.$heap.state.hostname+"img/avatar/woman.png"},null,8,r)])),_:1}),(0,s.Wm)(w,null,{default:(0,s.w5)((()=>[o])),_:1}),(0,s.Wm)(U,{value:"woman",onIonFocus:a[1]||(a[1]=e=>k.save("user_avatar_name",e.target.value))})])),_:1})])),_:1})])),_:1},8,["value"])])),_:1}),(0,s.Wm)(y,null,{default:(0,s.w5)((()=>[(0,s.Wm)(w,{position:"stacked",color:"primary"},{default:(0,s.w5)((()=>[i])),_:1}),(0,s.Wm)(C,{modelValue:g.fields.user_name,"onUpdate:modelValue":a[2]||(a[2]=e=>g.fields.user_name=e),name:"user_name",type:"text",value:g.fields.user_name,onChange:a[3]||(a[3]=e=>k.save("user_name",e.target.value)),placeholder:"Имя",required:""},null,8,["modelValue","value"])])),_:1}),(0,s.Wm)(y,null,{default:(0,s.w5)((()=>[(0,s.Wm)(w,{position:"stacked",color:"primary"},{default:(0,s.w5)((()=>[d])),_:1}),(0,s.Wm)(C,{modelValue:g.fields.user_surname,"onUpdate:modelValue":a[4]||(a[4]=e=>g.fields.user_surname=e),name:"user_surname",type:"text",value:g.fields.user_surname,onChange:a[5]||(a[5]=e=>k.save("user_surname",e.target.value)),placeholder:"Фамилия"},null,8,["modelValue","value"])])),_:1}),(0,s.Wm)(y,null,{default:(0,s.w5)((()=>[(0,s.Wm)(w,{position:"stacked",color:"primary"},{default:(0,s.w5)((()=>[m])),_:1}),(0,s.Wm)(C,{modelValue:g.fields.user_middlename,"onUpdate:modelValue":a[6]||(a[6]=e=>g.fields.user_middlename=e),name:"user_middlename",type:"text",value:g.fields.user_middlename,onChange:a[7]||(a[7]=e=>k.save("user_middlename",e.target.value)),placeholder:"Отчество"},null,8,["modelValue","value"])])),_:1}),(0,s.Wm)(y,null,{default:(0,s.w5)((()=>[(0,s.Wm)(w,{position:"stacked",color:"primary"},{default:(0,s.w5)((()=>[p])),_:1}),(0,s.Wm)(C,{modelValue:g.fields.user_phone,"onUpdate:modelValue":a[8]||(a[8]=e=>g.fields.user_phone=e),name:"user_phone",type:"numeric",inputmode:"tel",value:g.fields.user_phone,onInput:a[9]||(a[9]=e=>{e.target.value=k.phoneValidate(e)}),onChange:a[10]||(a[10]=e=>k.save("user_phone",e.target.value)),placeholder:"7(978)-000-00-00",spellcheck:"false",autocapitalize:"off",required:""},null,8,["modelValue","value"]),!g.fields.user_phone||g.fields.user_phone_verified&&"0"!==g.fields.user_phone_verified?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(Z,{key:0,slot:"end",onClick:k.phoneVerify,expand:"block"},{default:(0,s.w5)((()=>[f])),_:1},8,["onClick"])),g.fields.user_phone&&g.fields.user_phone_verified&&"0"!==g.fields.user_phone_verified?((0,s.wg)(),(0,s.j4)(Z,{key:1,slot:"end",expand:"block",disabled:"true"},{default:(0,s.w5)((()=>[h])),_:1})):(0,s.kq)("",!0)])),_:1}),(0,s.Wm)(y,null,{default:(0,s.w5)((()=>[(0,s.Wm)(w,{position:"stacked",color:"primary"},{default:(0,s.w5)((()=>[_])),_:1}),(0,s.Wm)(C,{modelValue:g.fields.user_email,"onUpdate:modelValue":a[11]||(a[11]=e=>g.fields.user_email=e),name:"user_email",type:"email",value:g.fields.user_email,onChange:a[12]||(a[12]=e=>k.save("user_email",e.target.value)),placeholder:"Электронная почта"},null,8,["modelValue","value"])])),_:1})])),_:1}),(0,s.Wm)(D,{"responsive-sm":""},{default:(0,s.w5)((()=>[(0,s.Wm)(x,null,{default:(0,s.w5)((()=>[(0,s.Wm)(Z,{onClick:e.passwordReset,expand:"block"},{default:(0,s.w5)((()=>[c])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["errorMessage"])}var g=l(9023),k=l(9755),w=l.n(k),W=l(2008),U={name:"SignIn",data(){return{error:"",submitted:!1,config:{phoneMask:"+0(000)-000-00-00"},fields:W.Z.state.user,modalOpen:!1}},computed:{phoneValid(){return 11==this.fields.user_phone.replace(/\D/g,"").length}},methods:{async save(e,a){if(this.submitted=!0,"user_phone"==e){if(!this.phoneValid)return!1;a=a.replace(/\D/g,"")}var l={};l.user_id=W.Z.state.user.user_id,l[e]=a;try{await w().post(W.Z.state.hostname+"User/itemUpdate",JSON.stringify(l)),this.getUserData()}catch{}},getUserData(){var e=this;w().post(W.Z.state.hostname+"User/itemGet").done((function(a){W.Z.commit("setUser",a),e.fields=a})).fail((function(a){e.error=a.responseJSON.messages.error}))},phoneVerify(){var e=this;w().post(W.Z.state.hostname+"User/phoneVerificationSend",{user_phone:this.fields.user_phone.replace(/\D/g,"")}).done((function(){g.Z.push({name:"UserVerifyPhone",params:{phone:e.fields.user_phone.replace(/\D/g,"")}})})).fail((function(a){e.error=a.responseJSON.messages.error}))},phoneValidate(e){this.fields.user_phone=e.target.value,this.fields.user_phone=this.fields.user_phone.replace(/\D/g,""),this.fields.user_phone.length>11&&(this.fields.user_phone=this.fields.user_phone.substring(0,11));let a="",l=0;for(let s in this.config.phoneMask){if(!this.fields.user_phone[l])break;let e=this.config.phoneMask[s];"0"==e?(a+=this.fields.user_phone[l],l++):a+=e}return this.fields.user_phone=a,this.fields.user_phone}},watch:{$route(e,a){e.path!=a.path&&(this.fields=W.Z.state.user)}}},y=l(3744);const V=(0,y.Z)(U,[["render",v]]);var b=V}}]);
//# sourceMappingURL=525.a16722ce.js.map