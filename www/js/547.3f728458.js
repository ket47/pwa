"use strict";(self["webpackChunkTezkel"]=self["webpackChunkTezkel"]||[]).push([[547],{547:function(t,l,e){e.r(l),e.d(l,{default:function(){return R}});var n=e(6252),u=e(3577);const i={key:0,class:"user-dashboard-header"},o=(0,n.Uk)("Пользователь"),a=(0,n.Uk)("Войти"),r=(0,n.Uk)("Зарегистрироваться"),s={key:2},d=(0,n.Uk)("Выйти"),c=(0,n.Uk)("Мои адреса"),m=(0,n.Uk)("Мои заказы"),w=(0,n.Uk)("Администратор"),f=(0,n.Uk)("Редактирование страниц"),_=(0,n.Uk)("Курьер"),k={key:0},W=(0,n.Uk)("Смена активна"),p=(0,n.Uk)("Вы можете брать задания на доставку"),g=(0,n.Uk)("Завершить смену"),h={key:1},y=(0,n.Uk)("Смена закрыта"),O=(0,n.Uk)("Начните смену для начала работы"),b=(0,n.Uk)("Начать смену"),v={key:2},U=(0,n.Uk)("Выполняется задание"),I=(0,n.Uk)("В процессе доставки заказа"),C={key:3},S=(0,n.Uk)("Пока вы не курьер"),$=(0,n.Uk)("Подайте заявку, чтобы стать курьером"),q=(0,n.Uk)("Заполнить анкету"),Z=(0,n.Uk)("Анкета курьера"),j=(0,n.Uk)("Поставщик"),x={key:0},L=(0,n.Uk)("Пока вы не поставщик"),D=(0,n.Uk)("Зарегистрируйте свой магазин или ресторан"),z=(0,n.Uk)("Стать поставщиком"),N=(0,n.Uk)("Информация"),T=(0,n.Uk)("О нас"),G=(0,n.Uk)("Правила пользования"),A=(0,n.Uk)("Политика конфиденциальности");function B(t,l,e,B,H,X){const J=(0,n.up)("ion-img"),Y=(0,n.up)("ion-avatar"),F=(0,n.up)("ion-label"),K=(0,n.up)("ion-icon"),M=(0,n.up)("router-link"),Q=(0,n.up)("ion-item"),R=(0,n.up)("ion-thumbnail"),E=(0,n.up)("ion-list"),P=(0,n.up)("ion-item-divider"),V=(0,n.up)("ion-item-group"),tt=(0,n.up)("ion-note"),lt=(0,n.up)("ion-text"),et=(0,n.up)("ion-button"),nt=(0,n.up)("base-layout");return(0,n.wg)(),(0,n.j4)(nt,{"page-title":"Личный кабинет","page-default-back-link":"/home"},{default:(0,n.w5)((()=>[X.isSignedIn?((0,n.wg)(),(0,n.iD)("div",i,[(0,n.Wm)(E,null,{default:(0,n.w5)((()=>[(0,n.Wm)(Q,{lines:"full",class:"avatar-row"},{default:(0,n.w5)((()=>[(0,n.Wm)(Y,{slot:"start"},{default:(0,n.w5)((()=>[H.user.user_avatar_name?((0,n.wg)(),(0,n.j4)(J,{key:0,src:t.$heap.state.hostname+"img/avatar/"+H.user.user_avatar_name+".png"},null,8,["src"])):(0,n.kq)("",!0)])),_:1}),(0,n.Wm)(F,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,u.zw)(H.user.user_name),1)])),_:1}),(0,n.Wm)(F,{slot:"end"},{default:(0,n.w5)((()=>[(0,n.Wm)(M,{class:"section-button",to:"/user-edit",slot:"end"},{default:(0,n.w5)((()=>[(0,n.Wm)(K,{icon:B.settingsOutline},null,8,["icon"])])),_:1})])),_:1})])),_:1}),H.user.user_phone?((0,n.wg)(),(0,n.j4)(Q,{key:0,lines:"full"},{default:(0,n.w5)((()=>[(0,n.Wm)(K,{slot:"start",icon:B.callOutline,color:"primary"},null,8,["icon"]),(0,n.Wm)(F,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,u.zw)(H.user.user_phone),1)])),_:1})])),_:1})):(0,n.kq)("",!0),H.user.user_emailOutline&&""!==H.user.user_emailOutline?((0,n.wg)(),(0,n.j4)(Q,{key:1},{default:(0,n.w5)((()=>[(0,n.Wm)(R,null,{default:(0,n.w5)((()=>[(0,n.Wm)(K,{icon:B.mailOutline},null,8,["icon"])])),_:1}),(0,n.Wm)(F,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,u.zw)(H.user.user_emailOutline),1)])),_:1})])),_:1})):(0,n.kq)("",!0)])),_:1})])):(0,n.kq)("",!0),(0,n.Wm)(E,null,{default:(0,n.w5)((()=>[(0,n.Wm)(V,null,{default:(0,n.w5)((()=>[(0,n.Wm)(P,null,{default:(0,n.w5)((()=>[(0,n.Wm)(F,null,{default:(0,n.w5)((()=>[o])),_:1})])),_:1}),X.isSignedIn?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(Q,{key:0,lines:"full",button:"",detail:"",onClick:l[0]||(l[0]=l=>t.$router.push("sign-in"))},{default:(0,n.w5)((()=>[(0,n.Wm)(K,{icon:B.logInOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,n.Wm)(F,null,{default:(0,n.w5)((()=>[a])),_:1})])),_:1})),X.isSignedIn?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(Q,{key:1,lines:"full",button:"",detail:"",onClick:l[1]||(l[1]=l=>t.$router.push("sign-up"))},{default:(0,n.w5)((()=>[(0,n.Wm)(K,{icon:B.personCircleOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,n.Wm)(F,null,{default:(0,n.w5)((()=>[r])),_:1})])),_:1})),X.isSignedIn?((0,n.wg)(),(0,n.iD)("div",s,[(0,n.Wm)(Q,{onClick:X.signOut,lines:"full",button:"",detail:""},{default:(0,n.w5)((()=>[(0,n.Wm)(K,{icon:B.exitOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,n.Wm)(F,null,{default:(0,n.w5)((()=>[d])),_:1})])),_:1},8,["onClick"]),(0,n.Wm)(Q,{lines:"full",button:"",detail:"",onClick:l[2]||(l[2]=l=>t.$router.push("user-addresses"))},{default:(0,n.w5)((()=>[(0,n.Wm)(K,{icon:B.locationOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,n.Wm)(F,null,{default:(0,n.w5)((()=>[c])),_:1})])),_:1}),(0,n.Wm)(Q,{lines:"full",button:"",detail:"",onClick:l[3]||(l[3]=l=>t.$router.push("order-list"))},{default:(0,n.w5)((()=>[(0,n.Wm)(K,{icon:B.cartOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,n.Wm)(F,null,{default:(0,n.w5)((()=>[m])),_:1})])),_:1})])):(0,n.kq)("",!0),X.isAdmin?((0,n.wg)(),(0,n.j4)(V,{key:3},{default:(0,n.w5)((()=>[(0,n.Wm)(P,null,{default:(0,n.w5)((()=>[(0,n.Wm)(F,null,{default:(0,n.w5)((()=>[w])),_:1})])),_:1}),(0,n.Wm)(Q,{onClick:l[4]||(l[4]=l=>t.$router.push("text-list")),lines:"full",button:"",detail:""},{default:(0,n.w5)((()=>[(0,n.Wm)(K,{icon:B.documentTextOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,n.Wm)(F,null,{default:(0,n.w5)((()=>[f])),_:1})])),_:1})])),_:1})):(0,n.kq)("",!0)])),_:1}),X.isSignedIn?((0,n.wg)(),(0,n.j4)(V,{key:0},{default:(0,n.w5)((()=>[(0,n.Wm)(P,null,{default:(0,n.w5)((()=>[(0,n.Wm)(F,null,{default:(0,n.w5)((()=>[_])),_:1})])),_:1}),"ready"==H.courierStatus?((0,n.wg)(),(0,n.iD)("div",k,[(0,n.Wm)(Q,{style:{"--background":"var(--ion-color-success-tint)"},lines:"none"},{default:(0,n.w5)((()=>[(0,n.Wm)(lt,null,{default:(0,n.w5)((()=>[(0,n.Wm)(F,null,{default:(0,n.w5)((()=>[W])),_:1}),(0,n.Wm)(tt,null,{default:(0,n.w5)((()=>[p])),_:1})])),_:1})])),_:1}),(0,n.Wm)(Q,{style:{"--background":"var(--ion-color-success-tint)"},button:"",lines:"full",onClick:l[5]||(l[5]=t=>X.courierStatusSet("idle"))},{default:(0,n.w5)((()=>[(0,n.Wm)(K,{src:"./assets/icon/delivery-man.svg",slot:"start"}),(0,n.Wm)(et,{slot:"end"},{default:(0,n.w5)((()=>[g])),_:1})])),_:1})])):"idle"==H.courierStatus?((0,n.wg)(),(0,n.iD)("div",h,[(0,n.Wm)(Q,{style:{"--background":"var(--ion-color-warning-tint)"},lines:"none"},{default:(0,n.w5)((()=>[(0,n.Wm)(lt,null,{default:(0,n.w5)((()=>[(0,n.Wm)(F,null,{default:(0,n.w5)((()=>[y])),_:1}),(0,n.Wm)(tt,null,{default:(0,n.w5)((()=>[O])),_:1})])),_:1})])),_:1}),(0,n.Wm)(Q,{style:{"--background":"var(--ion-color-warning-tint)"},button:"",lines:"full",onClick:l[6]||(l[6]=t=>X.courierStatusSet("ready"))},{default:(0,n.w5)((()=>[(0,n.Wm)(K,{src:"./assets/icon/delivery-man.svg",slot:"start"}),(0,n.Wm)(et,{slot:"end"},{default:(0,n.w5)((()=>[b])),_:1})])),_:1})])):"busy"==H.courierStatus?((0,n.wg)(),(0,n.iD)("div",v,[(0,n.Wm)(Q,{style:{"--background":"var(--ion-color-warning-tint)"},lines:"none"},{default:(0,n.w5)((()=>[(0,n.Wm)(lt,null,{default:(0,n.w5)((()=>[(0,n.Wm)(F,null,{default:(0,n.w5)((()=>[U])),_:1}),(0,n.Wm)(tt,null,{default:(0,n.w5)((()=>[I])),_:1})])),_:1})])),_:1}),(0,n.Wm)(Q,{style:{"--background":"var(--ion-color-warning-tint)"},button:"",lines:"full"},{default:(0,n.w5)((()=>[(0,n.Wm)(K,{src:"./assets/icon/delivery-man.svg",slot:"start"})])),_:1})])):(0,n.kq)("",!0),"notcourier"==H.courierStatus?((0,n.wg)(),(0,n.iD)("div",C,[(0,n.Wm)(Q,{lines:"none"},{default:(0,n.w5)((()=>[(0,n.Wm)(lt,null,{default:(0,n.w5)((()=>[(0,n.Wm)(F,null,{default:(0,n.w5)((()=>[S])),_:1}),(0,n.Wm)(tt,null,{default:(0,n.w5)((()=>[$])),_:1})])),_:1})])),_:1}),(0,n.Wm)(Q,{button:"",lines:"full",onClick:l[7]||(l[7]=l=>t.$router.push("courier-dashboard"))},{default:(0,n.w5)((()=>[(0,n.Wm)(K,{src:"./assets/icon/delivery-man.svg",slot:"start"}),(0,n.Wm)(et,{slot:"end",color:"light"},{default:(0,n.w5)((()=>[q])),_:1})])),_:1})])):((0,n.wg)(),(0,n.j4)(Q,{key:4,lines:"full",button:"",detail:"",onClick:l[8]||(l[8]=l=>t.$router.push("courier-dashboard"))},{default:(0,n.w5)((()=>[(0,n.Wm)(K,{icon:B.documentTextOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,n.Wm)(F,null,{default:(0,n.w5)((()=>[Z])),_:1})])),_:1}))])),_:1})):(0,n.kq)("",!0),X.isSignedIn?((0,n.wg)(),(0,n.j4)(V,{key:1},{default:(0,n.w5)((()=>[(0,n.Wm)(P,null,{default:(0,n.w5)((()=>[(0,n.Wm)(F,null,{default:(0,n.w5)((()=>[j])),_:1})])),_:1}),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(H.storeList,(l=>((0,n.wg)(),(0,n.j4)(Q,{key:l.store_id,detail:"",button:"",onClick:e=>t.$router.push(`store-edit-${l.store_id}`)},{default:(0,n.w5)((()=>[(0,n.Wm)(K,{icon:B.storefrontOutline,slot:"start"},null,8,["icon"]),(0,n.Uk)(" "+(0,u.zw)(l.store_name),1)])),_:2},1032,["onClick"])))),128)),H.storeList?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",x,[(0,n.Wm)(Q,{lines:"none"},{default:(0,n.w5)((()=>[(0,n.Wm)(lt,null,{default:(0,n.w5)((()=>[(0,n.Wm)(F,null,{default:(0,n.w5)((()=>[L])),_:1}),(0,n.Wm)(tt,null,{default:(0,n.w5)((()=>[D])),_:1})])),_:1})])),_:1}),(0,n.Wm)(Q,{onClick:l[9]||(l[9]=t=>X.storeItemCreate()),lines:"full"},{default:(0,n.w5)((()=>[(0,n.Wm)(K,{icon:B.storefrontOutline,slot:"start"},null,8,["icon"]),(0,n.Wm)(et,{slot:"end",color:"light"},{default:(0,n.w5)((()=>[z])),_:1})])),_:1})]))])),_:1})):(0,n.kq)("",!0),(0,n.Wm)(V,null,{default:(0,n.w5)((()=>[(0,n.Wm)(P,null,{default:(0,n.w5)((()=>[(0,n.Wm)(F,null,{default:(0,n.w5)((()=>[N])),_:1})])),_:1}),(0,n.Wm)(Q,{lines:"full",button:"",detail:"",onClick:l[10]||(l[10]=l=>t.$router.push("page-about"))},{default:(0,n.w5)((()=>[(0,n.Wm)(K,{icon:B.informationCircleOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,n.Wm)(F,null,{default:(0,n.w5)((()=>[T])),_:1})])),_:1}),(0,n.Wm)(Q,{lines:"full",button:"",detail:"",onClick:l[11]||(l[11]=l=>t.$router.push("page-rules"))},{default:(0,n.w5)((()=>[(0,n.Wm)(K,{icon:B.informationCircleOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,n.Wm)(F,null,{default:(0,n.w5)((()=>[G])),_:1})])),_:1}),(0,n.Wm)(Q,{lines:"full",button:"",detail:"",onClick:l[12]||(l[12]=l=>t.$router.push("page-privacy_policy"))},{default:(0,n.w5)((()=>[(0,n.Wm)(K,{icon:B.informationCircleOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,n.Wm)(F,null,{default:(0,n.w5)((()=>[A])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}var H=e(8973),X=e(8903),J=e(351),Y=e(9042),F=e(2008),K={components:{IonIcon:H.gu,IonAvatar:H.BJ,IonImg:H.Xz,IonLabel:H.Q$,IonItem:H.Ie,IonThumbnail:H.Bs,IonList:H.q_,IonItemDivider:H.rH,IonItemGroup:H.Ub,IonNote:H.uN,IonText:H.yW,IonButton:H.YG},setup(){return{settingsOutline:X.C$N,logInOutline:X.Ohu,personCircleOutline:X.XMB,exitOutline:X.NmL,locationOutline:X.Iv7,heartOutline:X.gjX,helpCircle:X.pvH,callOutline:X.H7N,mailOutline:X.xOl,cardOutline:X.pvm,cartOutline:X.Ox0,notifications:X.N9d,chevronForwardOutline:X.Dji,documentTextOutline:X.L82,informationCircleOutline:X.yo2,storefrontOutline:X.qRG}},data(){return{user:F.Z.state.user,courierStatus:J.Z.courier.status,storeList:null}},created(){const t=this;Y.Z.on("courierStatusChange",(l=>{t.courierStatus=l})),this.storeOwnedListGet()},computed:{isSignedIn(){return F.Z.state.user.user_id>-1},isAdmin(){return J.Z.isAdmin()}},methods:{async signOut(){await J.Z.signOut(),this.user=await J.Z.get()},async courierStatusSet(t){try{await J.Z.courier.updateStatus(t)}catch(l){409==l.status&&this.$flash("Анкета удалена или не активна")}},async storeOwnedListGet(){this.isSignedIn&&(this.storeList=await J.Z.supplier.storeListGet())},async storeItemCreate(){try{const t=prompt("Название магазина или ресторана");if(!t)return;const l=await J.Z.supplier.storeItemCreate(t);if(!l)return void this.$flash("Не удалось создать магазин или ресторан");this.$router.push(`store-edit-${l}`)}catch(t){const l=t.responseJSON?.messages?.error;"limit_exeeded"==l&&this.$flash("У вас зарегистрировано максимальное количество магазинов"),this.$flash("Не удалось создать магазин или ресторан")}}},watch:{$route(t,l){t.path!=l.path&&(this.user=F.Z.state.user)},courierStatus(t){"ready"==t||"busy"==t?J.Z.geo.trackingStart():J.Z.geo.trackingStop()}}},M=e(3744);const Q=(0,M.Z)(K,[["render",B],["__scopeId","data-v-6dd1d5b4"]]);var R=Q}}]);
//# sourceMappingURL=547.3f728458.js.map