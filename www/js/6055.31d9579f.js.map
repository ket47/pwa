{"version":3,"file":"js/6055.31d9579f.js","mappings":"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","sources":["webpack://Tezkel/./src/views/admin/TransactionEdit.vue","webpack://Tezkel/./src/views/admin/TransactionEdit.vue?5133"],"sourcesContent":["<template>\r\n    <base-layout pageDefaultBackLink=\"/user\" page-title=\"Редактирование проводки\">\r\n        <ion-list v-if=\"transaction\">\r\n            <ion-item>\r\n                <ion-input v-model=\"transaction.trans_date\" label=\"Дата\" labelPlacement=\"floating\" placeholder=\"дата\" type=\"date\"></ion-input>\r\n            </ion-item>\r\n            <ion-item>\r\n                <ion-select interface=\"popover\" placeholder=\"Выберите тип проводки\" v-model=\"transaction.trans_role\" label=\"Тип проводки\" labelPlacement=\"floating\" required @ionChange=\"itemUpdateRole(1)\">\r\n                    <ion-select-option v-for=\"trans in transTypes\" :key=\"trans.trans_role\" :value=\"trans.trans_role\">{{trans.trans_name}}</ion-select-option>\r\n                </ion-select>\r\n            </ion-item>\r\n            <ion-item lines=\"none\">\r\n                <ion-label position=\"stacked\" color=\"medium\">Родительские элементы</ion-label>\r\n                <ion-text>\r\n                    <ion-chip v-for=\"(tagLabel,tag) in tagDict\" :key=\"tag\" color=\"primary\">#{{tagLabel}} <ion-icon v-if=\"tag.indexOf('acc')==-1\" :src=\"closeCircle\" @click=\"tagDictRemove(tag)\"></ion-icon></ion-chip>\r\n                </ion-text>\r\n            </ion-item>\r\n            <ion-item>\r\n                <ion-text>\r\n                    <ion-chip v-for=\"tagHolder in tagMissingNames\" :key=\"tagHolder\" @click=\"tagDictPick(tagHolder)\" color=\"medium\">\r\n                        <ion-icon :src=\"addOutline\"/><ion-label>Добавить #{{tagHolderNames[tagHolder]}}</ion-label>\r\n                    </ion-chip>\r\n                </ion-text>\r\n            </ion-item>\r\n            <ion-item>\r\n                <ion-input @keyup.enter=\"itemSave()\" v-model=\"transaction.trans_amount\" label=\"Сумма\" labelPlacement=\"floating\" placeholder=\"сумма\" inputmode=\"decimal\" autocomplete=\"transaction-amount\" min=\"1\"></ion-input>\r\n            </ion-item>\r\n            <ion-item>\r\n                <ion-textarea v-model=\"transaction.trans_description\" label=\"Комментарий\" labelPlacement=\"floating\"></ion-textarea>\r\n            </ion-item>\r\n            <ion-item lines=\"full\">\r\n                <ion-toggle v-model=\"transaction.is_disabled\">Отключена</ion-toggle>\r\n            </ion-item>\r\n            <ion-item lines=\"none\" v-if=\"transaction.created_at\">\r\n                <ion-label color=\"medium\">Создано <b>{{transaction.created_user_name}}</b></ion-label>\r\n                <ion-text color=\"medium\">{{transaction.created_at}}</ion-text>\r\n            </ion-item>\r\n            <ion-item lines=\"none\" v-if=\"transaction.updated_at\">\r\n                <ion-label color=\"medium\">Изменено <b>{{transaction.updated_user_name}}</b></ion-label>\r\n                <ion-text color=\"medium\">{{transaction.updated_at}}</ion-text>\r\n            </ion-item>\r\n        </ion-list>\r\n        <ion-grid v-if=\"transaction\">\r\n            <ion-row>\r\n                <ion-col><ion-button color=\"medium\" @click=\"itemDelete()\" expand=\"block\" fill=\"outline\">Удалить</ion-button></ion-col>\r\n                <ion-col><ion-button color=\"primary\" @click=\"itemSave()\" expand=\"block\">Сохранить</ion-button></ion-col>\r\n            </ion-row>\r\n        </ion-grid>\r\n    </base-layout>\r\n</template>\r\n<script >\r\nimport {\r\n  IonInput,\r\n  IonIcon,\r\n  IonList,\r\n  IonItem,\r\n  IonToggle,\r\n  IonLabel,\r\n  IonSelect,\r\n  IonSelectOption,\r\n  IonTextarea,\r\n  IonButton,\r\n  IonGrid,\r\n  IonRow,\r\n  IonCol,\r\n  IonChip,\r\n  IonText,\r\n  modalController,\r\n}                          from '@ionic/vue';\r\nimport {\r\n    trashOutline,\r\n    searchOutline,\r\n    addOutline,\r\n    closeCircle,\r\n}                          from 'ionicons/icons'\r\nimport jquery              from 'jquery'\r\nimport User                from '@/scripts/User.js'\r\nimport Utils               from '@/scripts/Utils.js'\r\nimport ItemPicker          from '@/components/ItemPicker.vue'\r\n\r\nconst transTypes=[\r\n    {\r\n        'trans_role':'profit->site',\r\n        'holder':['order','store','courier'],\r\n        'trans_name':'Сайт Доход от доставки',\r\n        'trans_description':'Доход от доставки. Заказ №{{order_id}}',\r\n    },\r\n    {\r\n        'trans_role':'site->profit',\r\n        'holder':[],\r\n        'trans_name':'Сайт Списание месячной прибыли',\r\n        'trans_description':'Списание месячной прибыли',\r\n    },\r\n    {\r\n        'trans_role':'site->supplier',\r\n        'holder':['store'],\r\n        'trans_name':'Продавец Выплата',\r\n        'trans_description':'Выплата по договору за выполненные заказы',\r\n    },\r\n    {\r\n        'trans_role':'site.->supplier',\r\n        'holder':['order','store'],\r\n        'trans_name':'Продавец Штраф',\r\n        'trans_description':'Средства взимаемые с Продавца для воврата оплаты Покупателю. Заказ №{{order_id}}',\r\n    },\r\n    {\r\n        'trans_role':'supplier->site',\r\n        'holder':['order','store'],\r\n        'trans_name':'Продавец Отгрузка заказа',\r\n        'trans_description':'Стоимость товара, отгруженного Покупателю. Заказ №{{order_id}}',\r\n    },\r\n    {\r\n        'trans_role':'supplier->site.',\r\n        'holder':['store'],\r\n        'trans_name':'Продавец Получение аванса',\r\n        'trans_description':'Аванс за услуги сайта',\r\n    },\r\n    {\r\n        'trans_role':'profit->supplier',\r\n        'holder':['order','store'],\r\n        'trans_name':'Продавец Комиссия сайта',\r\n        'trans_description':'Комиссия сайта за предоставленные услуги. Заказ №{{order_id}}',\r\n    },\r\n    {\r\n        'trans_role':'supplier->profit',\r\n        'holder':['store'],\r\n        'trans_name':'Продавец Начисление бонуса при регистрации',\r\n        'trans_description':'Начисление бонуса на услуги при регистрации на сайте',\r\n    },\r\n    {\r\n        'trans_role':'site->courier',\r\n        'holder':['courier'],\r\n        'trans_name':'Курьер Выплата',\r\n        'trans_description':'Выплата по договору за оказанные услуги',\r\n    },\r\n    {\r\n        'trans_role':'courier->profit',\r\n        'holder':['order','courier'],\r\n        'trans_name':'Курьер Начисление бонуса',\r\n        'trans_description':'Начисление бонуса за Заказ №{{order_id}}',\r\n    },\r\n    {\r\n        'trans_role':'profit->courier',\r\n        'holder':['order','courier'],\r\n        'trans_name':'Курьер Штраф',\r\n        'trans_description':'Штраф за не выполнение Заказа №{{order_id}}',\r\n    },\r\n]\r\n\r\nexport default {\r\n    components: {\r\n        IonInput,\r\n        IonIcon,\r\n        IonList,\r\n        IonItem,\r\n        IonToggle,\r\n        IonLabel,\r\n        IonSelect,\r\n        IonSelectOption,\r\n        IonTextarea,\r\n        IonButton,\r\n        IonGrid,\r\n        IonRow,\r\n        IonCol,\r\n        IonChip,\r\n        IonText,\r\n    },\r\n    setup(){\r\n        return {\r\n            trashOutline,\r\n            searchOutline,\r\n            addOutline,\r\n            closeCircle,\r\n            }\r\n    },\r\n    data(){\r\n        return{\r\n            transactionId: this.$route.params.id,\r\n            transaction:null,\r\n            transTypes,\r\n            tagDict:{},\r\n            tagHolderNames:{\r\n                order:'заказ',\r\n                store:'продавец',\r\n                courier:'курьер',\r\n                acc:'счет',\r\n            },\r\n            tagOptionNames:{\r\n                debit:\"(+)\",\r\n                credit:\"(-)\",\r\n            },\r\n        }\r\n    },\r\n    computed:{\r\n        tagRequired(){\r\n            return this.transTypeCurrent?.holder||[]\r\n        },\r\n        tagMissingNames(){\r\n            return this.tagRequired?.filter(holder=>!Object.keys(this.tagDict).join(':').includes(holder))||''\r\n        },\r\n        transTypeCurrent(){\r\n            return this.transTypes.find(trans_type => trans_type.trans_role==this.transaction.trans_role)||[];\r\n        }\r\n    },\r\n    created(){\r\n        const self=this\r\n        this.$topic.on('userGet',()=>{\r\n            self.init()\r\n        })\r\n        if( User.isAdmin() ){\r\n            this.init()\r\n        }\r\n    },\r\n    methods:{\r\n        init(){\r\n            if( !User.isAdmin() ){\r\n                this.$router.replace('/')\r\n            }\r\n            this.itemGet();\r\n        },\r\n        async itemGet(){\r\n            if(this.transactionId==0){\r\n                this.transaction={\r\n                    trans_date:Utils.date.toIso(Utils.date.today())\r\n                }\r\n                return\r\n            }\r\n            let request={\r\n                trans_id:this.transactionId\r\n            };\r\n            try{\r\n                this.transaction=await Utils.prePost(`${this.$heap.state.hostname}Transaction/itemGet`,request)\r\n                if(this.transaction){\r\n                    this.transaction.trans_date=this.transaction.trans_date?.substring(0,10)\r\n                    this.transaction.is_disabled=this.transaction.is_disabled*1\r\n                    this.tagDictFill(this.transaction.tags)\r\n                }\r\n\r\n                this.transaction=await Utils.post(`${this.$heap.state.hostname}Transaction/itemGet`,request)\r\n                this.transaction.trans_date=this.transaction.trans_date?.substring(0,10)\r\n                this.transaction.is_disabled=this.transaction.is_disabled*1\r\n                this.tagDictFill(this.transaction.tags)\r\n            }\r\n            catch(err){\r\n                const exception_code=err?.responseJSON?.messages?.error;\r\n                switch(exception_code){\r\n                    case 'forbidden':\r\n                        this.$flash(\"Не достаточно прав\");\r\n                        break;\r\n                    case 'notfound':\r\n                        this.$flash(\"Проводка не найдена\");\r\n                        break;\r\n                }\r\n                return false\r\n            }\r\n        },\r\n        validate(){\r\n            if( this.tagMissingNames.length>0 ){\r\n                this.$flash(\"Не выбраны все родительские элементы\")\r\n                return false\r\n            }\r\n            if( !(this.transaction.trans_role) ){\r\n                this.$flash(\"Тип проводки не выбран\")\r\n                return false\r\n            }\r\n            if( !(this.transaction.trans_date) ){\r\n                this.$flash(\"Дата не выбрана\")\r\n                return false\r\n            }\r\n            if( !(this.transaction.trans_amount) ){\r\n                this.$flash(\"Сумма должна не равняться нулю\")\r\n                return false\r\n            }\r\n            return true\r\n        },\r\n        async itemSave(){\r\n            if(!this.validate()){\r\n                return;\r\n            }\r\n            const tags=Object.keys(this.tagDict??{}).join(' ')\r\n            const request={\r\n                tags,\r\n                trans_id:this.transaction.trans_id,\r\n                trans_date:this.transaction.trans_date,\r\n                trans_amount:this.transaction.trans_amount,\r\n                trans_role:this.transaction.trans_role,\r\n                trans_description:this.transaction.trans_description,\r\n                is_disabled:this.transaction.is_disabled?1:0,\r\n            }\r\n            try{\r\n                const remoteFunction=request.trans_id?'itemUpdate':'itemCreate'\r\n                await jquery.post(`${this.$heap.state.hostname}Transaction/${remoteFunction}`,request)\r\n                this.$flash(\"💾 сохранено\")\r\n                this.$router.go(-1);\r\n            }\r\n            catch(err){\r\n                const exception_code=err?.responseJSON?.messages?.error;\r\n                switch(exception_code){\r\n                    case 'forbidden':\r\n                        this.$flash(\"Не достаточно прав\");\r\n                        break;\r\n                }\r\n                this.$flash(\"Не удалось сохранить проводку\")\r\n                return false\r\n            }\r\n        },\r\n        async itemUpdateRole(){\r\n            if( !this.transTypeCurrent ){\r\n                this.$flash(\"Неверный тип проводки\")\r\n                return\r\n            }\r\n            this.tagDictTruncate()\r\n        },\r\n        itemDescriptionRender(){\r\n            if(!this.transTypeCurrent.trans_description){\r\n                return\r\n            }\r\n            const template=this.transTypeCurrent.trans_description\r\n            let context=this.transaction\r\n            for(let tag in this.tagDict){\r\n                const tag_label=this.tagDict[tag]\r\n                const tag_array=tag.split(':');\r\n                const tag_name=tag_array[0]\r\n                context[`${tag_name}_id`]=tag_array[1]//order_id,courier_id etc\r\n            }\r\n            this.transaction.trans_description=Utils.render(template,context)\r\n        },\r\n        async itemDelete(){\r\n            if(!confirm(\"Вы уверенны?\")){\r\n                return\r\n            }\r\n            try{\r\n                await jquery.post(`${this.$heap.state.hostname}Transaction/itemDelete`,{trans_id:this.transactionId})\r\n                this.$router.go(-1);\r\n            }catch{/** */}\r\n        },\r\n        async tagDictPick( itemType ){\r\n            const modal = await modalController.create({\r\n                component: ItemPicker,\r\n                componentProps:{itemType},\r\n                initialBreakpoint: 0.75,\r\n                breakpoints: [0.75, 1],\r\n                canDissmiss:true,\r\n            });\r\n            modal.present()\r\n            this.$topic.on('dismissModal',()=>{\r\n                modal.dismiss()\r\n            });\r\n            const item=await modal.onDidDismiss();\r\n            if(!item.data){\r\n                return\r\n            }\r\n            if(item.data.order_id??0){\r\n                this.tagDictAdd([`order:${item.data.order_id}`,`заказ ${item.data.order_id}`])\r\n                const order=await jquery.post(`${this.$heap.state.hostname}Order/itemGet`,{order_id:item.data.order_id})\r\n                if( this.tagRequired.includes('store') && order.order_store_id ){\r\n                    this.tagDictNameRemove('store')\r\n                    item.data.store_id=order.order_store_id\r\n                    item.data.store_name=order?.store?.store_name\r\n                }\r\n                if( this.tagRequired.includes('courier') && order.order_courier_id ){\r\n                    const courier=await jquery.post(`${this.$heap.state.hostname}Courier/itemGet`,{courier_id:order.order_courier_id})\r\n                    this.tagDictNameRemove('courier')\r\n                    item.data.courier_id=courier.courier_id\r\n                    item.data.courier_name=courier.courier_name\r\n                }\r\n            }\r\n            if(item.data.store_id??0){\r\n                this.tagDictAdd([`store:${item.data.store_id}`,`продавец ${item.data.store_name??'?'}`])\r\n            }\r\n            if(item.data.courier_id??0){\r\n                this.tagDictAdd([`courier:${item.data.courier_id}`,`курьер ${item.data.courier_name??'?'}`])\r\n            }\r\n            if(item.data.type??0){\r\n                this.tagDictAdd([`acc::${item.data.type}`,`счет ${item.data.name??'?'}`])\r\n            }\r\n        },\r\n        tagDictAdd(tag){\r\n            let dict=this.tagDict??{}\r\n            dict[tag[0]]=tag[1]\r\n            this.tagDict=dict\r\n            this.itemDescriptionRender()\r\n        },\r\n        tagDictRemove(tag){\r\n            let dict=this.tagDict??{}\r\n            dict[tag] && delete dict[tag]\r\n            const size = Object.keys(dict).length\r\n            this.tagDict=size?dict:{}\r\n            this.itemDescriptionRender()\r\n        },\r\n        tagDictNameRemove(tag_name){\r\n            let dict=this.tagDict??{}\r\n            const tag=Object.keys(dict)?.find(tag=>tag.indexOf(tag_name)>-1)\r\n            this.tagDictRemove(tag)\r\n        },\r\n        tagDictTruncate(){\r\n            this.tagDict={}\r\n            this.itemDescriptionRender()\r\n        },\r\n        tagDictFill(tags){\r\n            let dict={}\r\n            if(tags){\r\n                for(let tag of tags){\r\n                    dict[`${tag.tag_name}:${tag.tag_id}:${tag.tag_type}:${tag.tag_option}`]=`${this.tagHolderNames[tag.tag_name]} ${this.tagOptionNames[tag.tag_option]??''} ${tag.tag_label??'(?)'}`\r\n                }\r\n            }\r\n            this.tagDict=dict\r\n            this.itemDescriptionRender()\r\n        }\r\n    },\r\n}\r\n</script>","import { render } from \"./TransactionEdit.vue?vue&type=template&id=089860f6\"\nimport script from \"./TransactionEdit.vue?vue&type=script&lang=js\"\nexport * from \"./TransactionEdit.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createBlock","_component_base_layout","pageDefaultBackLink","$data","transaction","_component_ion_list","key","_createVNode","_component_ion_item","_component_ion_input","trans_date","$event","label","labelPlacement","placeholder","type","_component_ion_select","interface","trans_role","required","onIonChange","_cache","$options","itemUpdateRole","_createElementBlock","_Fragment","_renderList","transTypes","trans","_component_ion_select_option","value","trans_name","lines","_component_ion_label","position","color","_component_ion_text","tagDict","tagLabel","tag","_component_ion_chip","_toDisplayString","indexOf","_component_ion_icon","src","$setup","closeCircle","onClick","tagDictRemove","tagMissingNames","tagHolder","tagDictPick","addOutline","tagHolderNames","onKeyup","_withKeys","itemSave","trans_amount","inputmode","autocomplete","min","_component_ion_textarea","trans_description","_component_ion_toggle","is_disabled","created_at","_createElementVNode","created_user_name","updated_at","updated_user_name","_component_ion_grid","_component_ion_row","_component_ion_col","_component_ion_button","itemDelete","expand","fill","components","IonInput","IonIcon","IonList","IonItem","IonToggle","IonLabel","IonSelect","IonSelectOption","IonTextarea","IonButton","IonGrid","IonRow","IonCol","IonChip","IonText","setup","trashOutline","searchOutline","data","transactionId","this","$route","params","id","order","store","courier","acc","tagOptionNames","debit","credit","computed","tagRequired","_this$transTypeCurren","transTypeCurrent","holder","_this$tagRequired","filter","Object","keys","join","includes","find","trans_type","created","self","$topic","on","init","User","isAdmin","methods","$router","replace","itemGet","Utils","date","toIso","today","request","trans_id","_this$transaction$tra2","_this$transaction$tra","prePost","$heap","state","hostname","substring","tagDictFill","tags","post","err","_err$responseJSON","_err$responseJSON$mes","exception_code","responseJSON","messages","error","$flash","validate","length","_this$tagDict","remoteFunction","jquery","go","_err$responseJSON2","_err$responseJSON2$me","tagDictTruncate","itemDescriptionRender","template","context","tag_array","split","tag_name","render","confirm","itemType","_item$data$order_id","_item$data$store_id","_item$data$courier_id","_item$data$type","modal","modalController","create","component","ItemPicker","componentProps","initialBreakpoint","breakpoints","canDissmiss","present","dismiss","item","onDidDismiss","order_id","tagDictAdd","_order$store","order_store_id","tagDictNameRemove","store_id","store_name","order_courier_id","courier_id","courier_name","_item$data$store_name","_item$data$courier_na","_item$data$name","name","_this$tagDict2","dict","_this$tagDict3","size","_this$tagDict4","_Object$keys","_this$tagOptionNames$","_tag$tag_label","tag_id","tag_type","tag_option","tag_label","__exports__"],"sourceRoot":""}