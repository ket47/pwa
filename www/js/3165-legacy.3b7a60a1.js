"use strict";(self["webpackChunktezkel"]=self["webpackChunktezkel"]||[]).push([[3165],{5043:function(t,e,l){l.r(e),l.d(e,{default:function(){return G}});var i=l(6252),n=l(3577);const o={key:0},a=(0,i.Uk)("Найденные товары"),u={style:{"font-size":"1.1em"}},d={style:{display:"grid","grid-template-columns":"repeat(auto-fit, 150px)"}},r={key:1},s=(0,i.Uk)("Найденные товары"),c={style:{display:"grid","grid-template-columns":"repeat(auto-fit, 150px)"}},m={key:2},p=(0,i.Uk)("Ничего не найдено."),h=(0,i.Uk)("Возможно у нас нет того что вы ищите или вы находитель за пределами зоны доставки");function _(t,e,l,_,f,w){const y=(0,i.up)("ion-searchbar"),W=(0,i.up)("ion-title"),g=(0,i.up)("ion-img"),I=(0,i.up)("ion-thumbnail"),k=(0,i.up)("ion-note"),v=(0,i.up)("ion-item"),x=(0,i.up)("ion-card-header"),C=(0,i.up)("store-opened-indicator"),G=(0,i.up)("product-item"),b=(0,i.up)("ion-card-content"),$=(0,i.up)("ion-card"),D=(0,i.up)("ion-skeleton-text"),q=(0,i.up)("ion-chip"),T=(0,i.up)("ion-card-title"),z=(0,i.up)("base-layout");return(0,i.wg)(),(0,i.j4)(z,{"page-title":"Поиск товаров"},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{class:"search-container",modelValue:f.query,"onUpdate:modelValue":e[0]||(e[0]=t=>f.query=t),onInput:e[1]||(e[1]=t=>w.delayedListGet()),placeholder:"начните искать"},null,8,["modelValue"]),f.found?((0,i.wg)(),(0,i.iD)("div",o,[(0,i.Wm)(W,null,{default:(0,i.w5)((()=>[a])),_:1}),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(f.found.product_matches,(e=>((0,i.wg)(),(0,i.j4)($,{key:e.store_id},{default:(0,i.w5)((()=>[(0,i.Wm)(x,null,{default:(0,i.w5)((()=>[(0,i.Wm)(v,{detail:"",button:"",onClick:l=>t.$router.push(`/search/store-${e.store_id}`),lines:"full"},{default:(0,i.w5)((()=>[(0,i.Wm)(I,{slot:"start"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{style:{"border-radius":"10px"},src:`${t.$heap.state.hostname}image/get.php/${e.image_hash}.150.150.webp`},null,8,["src"])])),_:2},1024),(0,i._)("p",u,(0,n.zw)(null===e||void 0===e?void 0:e.store_name),1),(0,i.Wm)(k,{slot:"helper"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(e.store_description),1)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1024),(0,i.Wm)(b,null,{default:(0,i.w5)((()=>[(0,i._)("div",null,[(0,i.Wm)(C,{storeItem:e},null,8,["storeItem"])]),(0,i._)("div",d,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.matches,(t=>((0,i.wg)(),(0,i.iD)("div",{key:t.product_id},[(0,i.Wm)(G,{productItem:t,storeName:e.store_name},null,8,["productItem","storeName"])])))),128))])])),_:2},1024)])),_:2},1024)))),128))])):null==f.found?((0,i.wg)(),(0,i.iD)("div",r,[(0,i.Wm)(W,null,{default:(0,i.w5)((()=>[s])),_:1}),(0,i.Wm)($,null,{default:(0,i.w5)((()=>[(0,i.Wm)(x,null,{default:(0,i.w5)((()=>[(0,i.Wm)(v,{detail:"",lines:"full"},{default:(0,i.w5)((()=>[(0,i.Wm)(I,{slot:"start"},{default:(0,i.w5)((()=>[(0,i.Wm)(D,{style:{width:"50px",height:"50px"},animated:""})])),_:1}),(0,i.Wm)(D,{style:{width:"300px",height:"30px"},animated:""}),(0,i.Wm)(k,{slot:"helper"},{default:(0,i.w5)((()=>[(0,i.Wm)(D,{style:{width:"300px"}})])),_:1})])),_:1})])),_:1}),(0,i.Wm)(b,null,{default:(0,i.w5)((()=>[(0,i.Wm)(q,null,{default:(0,i.w5)((()=>[(0,i.Wm)(D,{style:{width:"100px"}})])),_:1}),(0,i._)("div",c,[((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)([1,2,3,4],(t=>(0,i._)("div",{key:t},[(0,i.Wm)(D,{style:{width:"120px",height:"120px"},animated:""}),(0,i.Wm)(D,{style:{width:"120px",height:"30px"},animated:""})]))),64))])])),_:1})])),_:1})])):((0,i.wg)(),(0,i.iD)("div",m,[(0,i.Wm)($,{color:"light"},{default:(0,i.w5)((()=>[(0,i.Wm)(x,null,{default:(0,i.w5)((()=>[(0,i.Wm)(T,null,{default:(0,i.w5)((()=>[p])),_:1})])),_:1}),(0,i.Wm)(b,null,{default:(0,i.w5)((()=>[h])),_:1})])),_:1})]))])),_:1})}var f=l(8534),w=l(8292),y=l(9755),W=l.n(y),g=l(4405),I=l(8336),k=l(6181),v={components:{StoreOpenedIndicator:k.Z,IonSearchbar:w.VI,IonTitle:w.wd,IonImg:w.Xz,IonThumbnail:w.Bs,IonNote:w.uN,IonItem:w.Ie,IonCard:w.PM,IonCardContent:w.FN,IonCardTitle:w.Dq,IonCardHeader:w.Zi,IonSkeletonText:w.CK,IonChip:w.hM,ProductItem:I.Z},data(){return{query:this.$route.query.q||"",found:null}},ionViewDidEnter(){this.delayedListGet()},created(){this.delayedListGet();let t=this;this.$topic.on("userGet",(e=>{this.found||t.listGet()}))},methods:{listGet(){var t=this;return(0,f.Z)((function*(){const e={query:t.query,in_products:1,in_stores:0,location_id:t.locMainGet()};if(e.location_id)try{const l=yield W().get(t.$heap.state.hostname+"Search/listGet",e);t.found=t.storeListCalculate(l)}catch(l){t.found=null}}))()},storeListCalculate(t){var e;if(null===(e=t.product_matches)||void 0===e||!e.length)return null;for(let l in t.product_matches)t.product_matches[l].deliveryTime=g.Z.deliveryTimeCalculate(t.product_matches[l].distance,t.product_matches[l].store_time_preparation);return t},locMainGet(){return this.$heap.state.user.location_main?this.$heap.state.user.location_main.location_id:null},delayedListGet(){clearTimeout(this.clock);const t=this;this.clock=setTimeout((()=>{t.listGet()}),200)}}},x=l(3744);const C=(0,x.Z)(v,[["render",_],["__scopeId","data-v-a2c630cc"]]);var G=C}}]);
//# sourceMappingURL=3165-legacy.3b7a60a1.js.map