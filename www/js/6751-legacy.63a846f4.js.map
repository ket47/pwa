{"version":3,"file":"js/6751-legacy.63a846f4.js","mappings":"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","sources":["webpack://tezkel/./node_modules/core-js/internals/object-to-array.js","webpack://tezkel/./node_modules/core-js/modules/es.object.values.js","webpack://tezkel/./src/views/UserEdit.vue","webpack://tezkel/./src/views/UserEdit.vue?0119"],"sourcesContent":["var DESCRIPTORS = require('../internals/descriptors');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar objectKeys = require('../internals/object-keys');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar $propertyIsEnumerable = require('../internals/object-property-is-enumerable').f;\n\nvar propertyIsEnumerable = uncurryThis($propertyIsEnumerable);\nvar push = uncurryThis([].push);\n\n// `Object.{ entries, values }` methods implementation\nvar createMethod = function (TO_ENTRIES) {\n  return function (it) {\n    var O = toIndexedObject(it);\n    var keys = objectKeys(O);\n    var length = keys.length;\n    var i = 0;\n    var result = [];\n    var key;\n    while (length > i) {\n      key = keys[i++];\n      if (!DESCRIPTORS || propertyIsEnumerable(O, key)) {\n        push(result, TO_ENTRIES ? [key, O[key]] : O[key]);\n      }\n    }\n    return result;\n  };\n};\n\nmodule.exports = {\n  // `Object.entries` method\n  // https://tc39.es/ecma262/#sec-object.entries\n  entries: createMethod(true),\n  // `Object.values` method\n  // https://tc39.es/ecma262/#sec-object.values\n  values: createMethod(false)\n};\n","var $ = require('../internals/export');\nvar $values = require('../internals/object-to-array').values;\n\n// `Object.values` method\n// https://tc39.es/ecma262/#sec-object.values\n$({ target: 'Object', stat: true }, {\n  values: function values(O) {\n    return $values(O);\n  }\n});\n","<template>\r\n  <base-layout page-title=\"Мой профиль\" pageDefaultBackLink=\"/user\">\r\n        <ion-list>\r\n          <ion-radio-group v-model=\"fields.user_avatar_name\">\r\n          <ion-item>\r\n            <ion-thumbnail slot=\"start\"><img :src=\"$heap.state.hostname+'img/avatar/man.png'\" /></ion-thumbnail>\r\n            <ion-label>аватар 1</ion-label>\r\n            <ion-radio slot=\"end\" value=\"man\" @ionFocus=\"save('user_avatar_name', $event.target.value)\"></ion-radio>\r\n          </ion-item>\r\n          <ion-item>\r\n            <ion-thumbnail slot=\"start\"><img :src=\"$heap.state.hostname+'img/avatar/woman.png'\" /></ion-thumbnail>\r\n            <ion-label>аватар 2</ion-label>\r\n            <ion-radio slot=\"end\" value=\"woman\" @ionFocus=\"save('user_avatar_name', $event.target.value)\"></ion-radio>\r\n          </ion-item>\r\n          </ion-radio-group>\r\n          <ion-item-divider>\r\n            <ion-label>Данные пользователя</ion-label>\r\n          </ion-item-divider>\r\n          <ion-item>\r\n            <ion-label position=\"stacked\" color=\"primary\">Ваш псевдоним</ion-label>\r\n            <ion-input \r\n              v-model=\"fields.user_name\" \r\n              name=\"user_name\" \r\n              type=\"text\" \r\n              @change=\"save('user_name', $event.target.value)\" \r\n              placeholder=\"как к вам обращаться?\"\r\n              required\r\n            ></ion-input>\r\n          </ion-item>\r\n\r\n          <ion-item>\r\n            <ion-label position=\"stacked\" color=\"primary\">Фамилия (не обязательно)</ion-label>\r\n            <ion-input \r\n              v-model=\"fields.user_surname\" \r\n              name=\"user_surname\" \r\n              type=\"text\" \r\n              @change=\"save('user_surname', $event.target.value)\" \r\n              placeholder=\"Фамилия (не обязательно)\"\r\n            ></ion-input>\r\n          </ion-item>\r\n          <!--\r\n          <ion-item>\r\n            <ion-label position=\"stacked\" color=\"primary\">Отчество</ion-label>\r\n            <ion-input \r\n              v-model=\"fields.user_middlename\" \r\n              name=\"user_middlename\" \r\n              type=\"text\" \r\n              @change=\"save('user_middlename', $event.target.value)\" \r\n              placeholder=\"Отчество\"\r\n            ></ion-input>\r\n          </ion-item>\r\n          -->\r\n          <ion-item>\r\n            <ion-label position=\"stacked\" color=\"primary\">Телефон</ion-label>\r\n            <ion-input readonly\r\n              v-model=\"fields.user_phone\"\r\n            ></ion-input>\r\n            <ion-button slot=\"end\" v-if=\"fields.user_phone && (!fields.user_phone_verified || fields.user_phone_verified === '0')\" @click=\"phoneVerify\" expand=\"block\">Подтвердить</ion-button>\r\n            <ion-button slot=\"end\" v-if=\"fields.user_phone && fields.user_phone_verified && fields.user_phone_verified !== '0'\" expand=\"block\" disabled=\"true\">Подтверждено</ion-button>\r\n          </ion-item>\r\n\r\n          <ion-item>\r\n            <ion-label position=\"stacked\" color=\"primary\">Электронная почта</ion-label>\r\n            <ion-input \r\n              v-model=\"fields.user_email\" \r\n              name=\"user_email\" \r\n              type=\"email\" \r\n              @change =\"save('user_email', $event.target.value)\" \r\n              placeholder=\"Электронная почта\"\r\n            ></ion-input>\r\n          </ion-item>\r\n\r\n        </ion-list>\r\n\r\n\r\n          <ion-item-divider>\r\n            <ion-label>Пароль пользователя</ion-label>\r\n          </ion-item-divider>\r\n        <ion-row responsive-sm>\r\n          <ion-col>\r\n            <ion-button @click=\"passwordReset()\" expand=\"block\"><ion-icon :icon=\"keyOutline\" slot=\"start\"/>Сбросить</ion-button>\r\n          </ion-col>\r\n          <ion-col>\r\n            <ion-button id=\"passwordPromptButton\" expand=\"block\"><ion-icon :icon=\"keyOutline\" slot=\"start\"/>Изменить</ion-button>\r\n          </ion-col>\r\n        </ion-row>\r\n\r\n\r\n    <ion-modal ref=\"passwordPrompt\" trigger=\"passwordPromptButton\" :initial-breakpoint=\"0.40\" :breakpoints=\"[0, 0.40, 0.8]\">\r\n      <ion-header>\r\n        <ion-toolbar color=\"secondary\">\r\n          <ion-title>Новый пароль</ion-title>\r\n          <ion-icon :icon=\"closeOutline\" @click=\"()=>{this.$refs.passwordPrompt.$el.dismiss();}\" slot=\"end\" size=\"large\"></ion-icon>\r\n        </ion-toolbar>\r\n      </ion-header>\r\n      <ion-content class=\"ion-padding\">\r\n        <ion-item>\r\n          <ion-label position=\"stacked\">Новый пароль</ion-label>\r\n          <ion-input v-model=\"fields.user_pass\" type=\"text\" placeholder=\"пароль\"></ion-input>\r\n        </ion-item>\r\n        <ion-item>\r\n          <ion-label position=\"stacked\">Новый пароль (повтор)</ion-label>\r\n          <ion-input v-model=\"fields.user_pass_confirm\" type=\"text\" placeholder=\"пароль (повтор)\"></ion-input>\r\n        </ion-item>\r\n        <ion-button @click=\"passwordSave()\" expand=\"full\">Изменить</ion-button>\r\n      </ion-content>\r\n    </ion-modal>\r\n\r\n  </base-layout>\r\n</template>\r\n\r\n<script>\r\n\r\nimport {\r\n  IonList,\r\n  IonItem,\r\n  IonLabel,\r\n  IonThumbnail,\r\n  IonRadio,\r\n  IonRadioGroup,\r\n  IonInput,\r\n  IonCol,\r\n  IonRow,\r\n  IonItemDivider,\r\n  IonButton,\r\n  IonModal,\r\n  IonHeader,\r\n  IonTitle,\r\n  IonContent,\r\n  IonIcon,\r\n  IonToolbar,\r\n\r\n}                   from '@ionic/vue'\r\nimport {\r\n  closeOutline,\r\n  keyOutline\r\n}                   from 'ionicons/icons';\r\nimport jQuery       from \"jquery\";\r\n//import User         from '@/scripts/User'\r\n\r\nexport default  {\r\n  components:{\r\n  IonList,\r\n  IonItem,\r\n  IonLabel,\r\n  IonThumbnail,\r\n  IonRadio,\r\n  IonRadioGroup,\r\n  IonInput,\r\n  IonCol,\r\n  IonRow,\r\n  IonItemDivider,\r\n  IonButton,\r\n  IonModal,\r\n  IonHeader,\r\n  IonTitle,\r\n  IonContent,\r\n  IonIcon,\r\n  IonToolbar,\r\n  },\r\n  setup(){\r\n    return {closeOutline,keyOutline}\r\n  },\r\n  data(){\r\n    return {\r\n      config: {\r\n        phoneMask: '+0(000)-000-00-00'\r\n      },\r\n      fields: this.$heap.state.user,\r\n      passwordPromptShow:false\r\n    }\r\n  },\r\n  computed: {\r\n    isPhoneValid() {\r\n      return this.fields.user_phone.replace(/\\D/g,\"\").length == 11;\r\n    }\r\n  },\r\n  methods:{\r\n    async save(field_name, field_value) {\r\n      if(field_name == 'user_phone'){\r\n        if(!this.isPhoneValid){\r\n          return false;\r\n        }\r\n        field_value = field_value.replace(/\\D/g,\"\");\r\n      }\r\n      var requestData = {};\r\n      requestData.user_id = this.$heap.state.user.user_id;\r\n      requestData[field_name] = field_value;\r\n      await this.itemUpdate(requestData)\r\n      this.fields[field_name] = field_value\r\n    },\r\n    async itemUpdate(requestData) {\r\n      try{\r\n        await jQuery.post( `${this.$heap.state.hostname}User/itemUpdate`, JSON.stringify(requestData))\r\n        //User.get()\r\n        return true\r\n      }catch(err){\r\n        let exception_code='unknown';\r\n        try{\r\n          const invalid_field=Object.keys(JSON.parse(err.responseJSON.messages.error))[0]\r\n          const invalid_reason=Object.values(JSON.parse(err.responseJSON.messages.error))[0]\r\n          exception_code=invalid_field+'_'+invalid_reason\r\n        }catch{/** */}\r\n          switch(exception_code){\r\n            case 'user_phone_notunique':\r\n              this.$flash(\"Пользователь с таким телефоном уже зарегистрирован\");\r\n              break;\r\n            case 'user_phone_required':\r\n            case 'user_phone_invalid':\r\n            case 'user_phone_short':\r\n              this.$flash(\"Проверьте номер телефона\");\r\n              break;\r\n            case 'user_name_required':\r\n            case 'user_name_short':\r\n              this.$flash(\"Проверьте ваш псевдоним\");\r\n              break;\r\n            case 'user_email_invalid':\r\n              this.$flash(\"Проверьте ваш е-маил\");\r\n              break;\r\n            case 'user_email_notunique':\r\n              this.$flash(\"Такой е-маил уже используется\");\r\n              break;\r\n            case 'user_pass_short':\r\n              this.$flash(\"Пароль слишком короткий\");\r\n              break;\r\n            case 'user_pass_notmatches':\r\n              this.$flash(\"Пароль не совпадает с подтверждением\");\r\n              break;\r\n          }\r\n          return false\r\n        }\r\n    },\r\n    phoneVerify(){\r\n      const user_phone=this.fields.user_phone.replace(/\\D/g,\"\")\r\n      try{\r\n        jQuery.post( `${this.$heap.state.hostname}User/phoneVerificationSend`, {user_phone})\r\n        this.$router.push({name: 'UserVerifyPhone', params: {phone: user_phone}});\r\n      }catch{/** */}\r\n    },\r\n    async passwordSave(){\r\n      if(this.fields.user_pass!=this.fields.user_pass_confirm){\r\n        this.$flash(\"Пароль и подтверждение не совпадают\")\r\n        return\r\n      }\r\n      const requestData={\r\n        user_id:this.$heap.state.user.user_id,\r\n        user_pass:this.fields.user_pass,\r\n      }\r\n      const updated=await this.itemUpdate(requestData)\r\n      if( updated ){\r\n        this.$refs.passwordPrompt.$el.dismiss()\r\n        this.$flash(\"Пароль изменен\")\r\n      }\r\n    },\r\n    async passwordReset(){\r\n      const request={\r\n        user_phone:this.fields.user_phone,\r\n        user_email:this.fields.user_email,\r\n        user_name:this.fields.user_name\r\n      }\r\n      try{\r\n        await jQuery.post( `${this.$heap.state.hostname}User/passwordReset`, request)\r\n        this.$alert(\"Вам был выслан новый пароль\",\"Пароль сброшен\")\r\n      }catch{/** */}\r\n    },\r\n    isPhoneValidate(ev) {\r\n      this.fields.user_phone = ev.target.value;\r\n      this.fields.user_phone = this.fields.user_phone.replace(/\\D/g,\"\");\r\n      if(this.fields.user_phone.length > 11){\r\n        this.fields.user_phone = this.fields.user_phone.substring(0, 11);\r\n      }\r\n      let result = '';\r\n      let numberIndex = 0; \r\n      for(let index in this.config.phoneMask){\r\n        if(!this.fields.user_phone[numberIndex]){\r\n          break;\r\n        }\r\n        let character = this.config.phoneMask[index];\r\n        if(character == '0'){\r\n          result += this.fields.user_phone[numberIndex];\r\n          numberIndex++;\r\n        } else {\r\n          result += character\r\n        }\r\n      }\r\n      this.fields.user_phone = result;\r\n      return this.fields.user_phone;\r\n    },\r\n  },\r\n  created(){\r\n    const self=this\r\n    this.$topic.on('userGet',user=>{\r\n      self.fields=user\r\n    })\r\n  },\r\n}\r\n</script>","import { render } from \"./UserEdit.vue?vue&type=template&id=043af273\"\nimport script from \"./UserEdit.vue?vue&type=script&lang=js\"\nexport * from \"./UserEdit.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"W:\\\\Ionic\\\\Tezkel\\\\blank\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["DESCRIPTORS","uncurryThis","objectKeys","toIndexedObject","$propertyIsEnumerable","propertyIsEnumerable","push","createMethod","TO_ENTRIES","it","key","O","keys","length","i","result","module","exports","entries","values","$","$values","target","stat","_createBlock","_component_base_layout","pageDefaultBackLink","_createVNode","_component_ion_list","_component_ion_radio_group","$data","user_avatar_name","_component_ion_item","_component_ion_thumbnail","slot","_createElementVNode","src","_ctx","state","hostname","_component_ion_label","_component_ion_radio","value","onIonFocus","$options","$event","_component_ion_item_divider","position","color","_component_ion_input","user_name","name","type","onChange","placeholder","required","user_surname","readonly","user_phone","user_phone_verified","_component_ion_button","onClick","expand","disabled","user_email","_component_ion_row","_component_ion_col","_component_ion_icon","icon","$setup","id","_component_ion_modal","ref","trigger","breakpoints","_component_ion_header","_component_ion_toolbar","_component_ion_title","$refs","passwordPrompt","$el","dismiss","size","_component_ion_content","class","user_pass","user_pass_confirm","components","IonList","IonItem","IonLabel","IonThumbnail","IonRadio","IonRadioGroup","IonInput","IonCol","IonRow","IonItemDivider","IonButton","IonModal","IonHeader","IonTitle","IonContent","IonIcon","IonToolbar","setup","closeOutline","keyOutline","data","config","phoneMask","fields","this","$heap","user","passwordPromptShow","computed","isPhoneValid","replace","methods","save","field_name","field_value","requestData","user_id","itemUpdate","jQuery","JSON","stringify","err","exception_code","invalid_field","Object","parse","responseJSON","messages","error","invalid_reason","$flash","phoneVerify","$router","params","phone","passwordSave","updated","passwordReset","request","$alert","isPhoneValidate","ev","substring","numberIndex","index","character","created","self","$topic","on","__exports__","render"],"sourceRoot":""}