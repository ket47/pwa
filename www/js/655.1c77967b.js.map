{"version":3,"file":"js/655.1c77967b.js","mappings":"+KAEYA,WAAA,I,WAKkD,O,WAkBL,e,6OAxBvD,QA4Bc,GA5BD,aAAW,yBAAyB,yBAAuB,QAASC,aAAc,EAAAC,OAA/F,C,kBACI,IA0BO,EA1BP,OA0BO,OA1BP,EA0BO,EAzBL,QAkBW,Q,kBAjBT,IAgBW,EAhBX,QAgBW,Q,kBAfT,IAcU,EAdV,QAcU,Q,kBAbR,IAYU,EAZV,QAYU,Q,kBAXR,IAA6D,EAA7D,QAA6D,GAAlDC,SAAS,UAAUC,MAAM,WAApC,C,kBAA8C,IAAG,M,OACjD,QASa,G,WARF,EAAAC,OAAOC,K,qCAAP,EAAAD,OAAOC,KAAI,GACpBC,KAAK,OACLC,KAAK,UACLC,UAAU,MACTC,MAAO,EAAAL,OAAOC,KACd,QAAK,eAAE,EAAAD,OAAOC,KAAOK,EAAOC,OAAOF,OACpCG,YAAY,UACZC,SAAA,IARF,kC,kCAeR,QAIU,GAJD,oBAAa,C,kBACpB,IAEU,EAFV,QAEU,Q,kBADR,IAAqE,EAArE,QAAqE,GAAxD,QAAO,EAAAC,SAAUC,OAAO,SAArC,C,kBAA6C,IAAW,M,KAAxD,kB,yBAxBV,oB,2CAoCF,GACET,KAAM,kBACNU,MAAO,CAAC,QAAS,YACjBC,OACE,MAAO,CACLhB,MAAO,GACPiB,WAAW,EACXd,OAAQ,CACNC,KAAM,MAIZc,SAAU,GACVC,QAAQ,CACNN,WACE,IAAIO,EAAOC,KACXA,KAAKJ,WAAY,EACjB,SAAa,qDAAsD,CAACK,WAAYD,KAAKE,MAAOC,kBAAmBH,KAAKlB,OAAOC,OAC1HqB,MAAK,WACFL,EAAKM,YAERC,MAAK,SAASC,GACbR,EAAKpB,MAAQ4B,EAAIC,aAAaC,SAAS9B,UAG3C0B,SACE,IAAIN,EAAOC,KACX,IAAIU,EAAc,CAChBT,WAAYD,KAAKE,MACjBS,UAAWX,KAAKY,SAChBC,kBAAmBb,KAAKY,UAE1B,SAAaE,EAAA,iBAAsB,cAAeJ,GAC/CN,MAAK,WACFL,EAAKgB,kBAGbA,cACE,IAAIhB,EAAOC,KACX,SAAac,EAAA,iBAAsB,gBAChCV,MAAK,SAASY,EAAUC,EAAYC,GACnC,IAAIC,EAAID,EAAQE,kBAAkB,SAClCN,EAAA,SAAY,eAAgBK,GAC5BL,EAAA,SAAY,UAAWE,GACvB,cAAiB,CACfK,WAAY,SAASC,GACjBA,EAAIC,iBAAiB,QAAUJ,MAGrCK,EAAA,OAAY,CAACC,KAAM,uBAEpBnB,MAAK,SAASC,GACXR,EAAKpB,MAAQ4B,EAAIC,aAAaC,SAAS9B,WAIjD+C,UACE,GAAGZ,EAAA,kCAA+E,MAAxCA,EAAA,iCACxC,OAAOU,EAAA,OAAY,qB,UC1FzB,MAAMG,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE","sources":["webpack://Tezkel/./src/views/UserVerifyPhone.vue","webpack://Tezkel/./src/views/UserVerifyPhone.vue?52b8"],"sourcesContent":["<template>\r\n  <base-layout page-title=\"Подтверждение телефона\" page-default-back-link=\"/home\" :errorMessage=\"error\">\r\n      <form novalidate>\r\n        <ion-list>\r\n          <ion-item>\r\n            <ion-row>\r\n              <ion-col>\r\n                <ion-label position=\"stacked\" color=\"primary\">Код</ion-label>\r\n                <ion-input\r\n                  v-model=\"fields.code\"\r\n                  name=\"code\"\r\n                  type=\"numeric\"\r\n                  inputmode=\"tel\"\r\n                  :value=\"fields.code\"\r\n                  @input=\"fields.code = $event.target.value\"\r\n                  placeholder=\"- - - -\"\r\n                  required\r\n                ></ion-input>\r\n              </ion-col>\r\n            </ion-row>\r\n          </ion-item>\r\n        </ion-list>\r\n\r\n        <ion-row responsive-sm>\r\n          <ion-col>\r\n            <ion-button @click=\"onSubmit\" expand=\"block\">Подтвердить</ion-button>\r\n          </ion-col>\r\n        </ion-row>\r\n      </form>\r\n  </base-layout>\r\n</template>\r\n\r\n<script>\r\nimport jQuery from \"jquery\";\r\nimport router from '../router';\r\nimport heap from '../heap';\r\n\r\nexport default  {\r\n  name: 'UserVerifyPhone',\r\n  props: ['phone', 'password'],\r\n  data(){\r\n    return {\r\n      error: '',\r\n      submitted: false,\r\n      fields: {\r\n        code: ''\r\n      }\r\n    }\r\n  },\r\n  computed: {},\r\n  methods:{\r\n    onSubmit() {\r\n      var self = this;\r\n      this.submitted = true;\r\n      jQuery.post( \"https://api.tezkel.com/User/phoneVerificationCheck\", {user_phone: this.phone, verification_code: this.fields.code})\r\n      .done(function() {\r\n          self.signIn();\r\n      })\r\n      .fail(function(err) {\r\n        self.error = err.responseJSON.messages.error;\r\n      });\r\n    },\r\n    signIn() {\r\n      var self = this;\r\n      let requestData = {\r\n        user_phone: this.phone,\r\n        user_pass: this.password,\r\n        user_pass_confirm: this.password\r\n      }\r\n      jQuery.post( heap.state.hostname + \"User/signIn\", requestData)\r\n        .done(function() {\r\n            self.getUserData();\r\n        })\r\n    },\r\n    getUserData(){\r\n      var self = this;\r\n      jQuery.post( heap.state.hostname + \"User/itemGet\")\r\n        .done(function(response, textStatus, request) {\r\n          var sid=request.getResponseHeader('x-sid');\r\n          heap.commit('setSessionId', sid);\r\n          heap.commit('setUser', response);\r\n          jQuery.ajaxSetup({\r\n            beforeSend: function(xhr) {\r\n                xhr.setRequestHeader('x-sid',  sid);\r\n            }\r\n          })\r\n          router.push({path: '/user-dashboard'});\r\n        })\r\n        .fail(function(err) {\r\n            self.error = err.responseJSON.messages.error;\r\n        });\r\n    },\r\n  },\r\n  created(){\r\n    if(heap.state.user.user_phone_verified && heap.state.user.user_phone_verified !== '0'){\r\n      return router.push('/user-dashboard');\r\n    } \r\n  }\r\n}\r\n</script>","import { render } from \"./UserVerifyPhone.vue?vue&type=template&id=3b33a8e9\"\nimport script from \"./UserVerifyPhone.vue?vue&type=script&lang=js\"\nexport * from \"./UserVerifyPhone.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"W:\\\\Ionic\\\\Tezkel\\\\blank\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["novalidate","errorMessage","error","position","color","fields","code","name","type","inputmode","value","$event","target","placeholder","required","onSubmit","expand","props","data","submitted","computed","methods","self","this","user_phone","phone","verification_code","done","signIn","fail","err","responseJSON","messages","requestData","user_pass","password","user_pass_confirm","heap","getUserData","response","textStatus","request","sid","getResponseHeader","beforeSend","xhr","setRequestHeader","router","path","created","__exports__","render"],"sourceRoot":""}