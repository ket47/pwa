{"version":3,"file":"js/432.62238474.js","mappings":"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","sources":["webpack://Tezkel/./src/views/OrderList.vue","webpack://Tezkel/./src/components/CourierJobPreview.vue","webpack://Tezkel/./src/components/CourierJobPreview.vue?8e41","webpack://Tezkel/./src/views/OrderList.vue?4c42"],"sourcesContent":["<style scoped>\r\n    ion-icon{\r\n        font-size:40px;\r\n        color:var(--ion-color-medium);\r\n    }\r\n</style>\r\n<template>\r\n  <base-layout page-default-back-link=\"/home\" page-title=\"Заказы\">\r\n        <ion-segment swipe-gesture=\"true\" v-model=\"orderType\" @ionChange=\"listTypeChanged($event)\">\r\n            <ion-segment-button value=\"jobs\" v-if=\"courierJobsInclude\">\r\n                Задания\r\n            </ion-segment-button>\r\n            <ion-segment-button value=\"active\">\r\n                Активные\r\n            </ion-segment-button>\r\n            <ion-segment-button value=\"done\">\r\n                Исполненые\r\n            </ion-segment-button>\r\n        </ion-segment>\r\n        <ion-list v-if=\"orderList.length\">\r\n            <ion-item v-for=\"order in orderListComputed\" :key=\"order.order_id\" @click=\"itemClick(order)\" detail lines=\"full\">\r\n                <ion-avatar slot1=\"start\">\r\n                    <ion-icon v-if=\"order.user_role=='customer'\" src=\"./assets/icon/box-delivery.svg\"/>\r\n                    <ion-icon v-if=\"order.user_role=='delivery'\" src=\"./assets/icon/delivery_staying.svg\"/>\r\n                    <ion-icon v-if=\"order.user_role=='admin'\" src=\"./assets/icon/crown.svg\"/>\r\n                    <ion-icon v-if=\"order.user_role=='supplier'\" :icon=\"storefrontOutline\" style=\"font-size:24px;\"/>\r\n                </ion-avatar>\r\n                <ion-label>\r\n                    <ion-text color=\"primary\">{{order.store_name}} #{{order.order_id}} ({{order.order_sum_total}}{{$heap.state.currencySign}})</ion-text>\r\n                    <p><b>{{order.distance_km}}</b>{{order.location_address}}</p>\r\n                    <h4>{{order.stage_current_name}}</h4>\r\n                </ion-label>\r\n                <!--\r\n                <ion-thumbnail slot=\"end\" v-if=\"order.image_hash\">\r\n                    <ion-img style=\"border-radius:10px;\" :src=\"`${$heap.state.hostname}image/get.php/${order.image_hash}.150.150.webp`\"/>\r\n                </ion-thumbnail>\r\n                -->\r\n            </ion-item>\r\n        </ion-list>\r\n        <div v-else style=\"display:flex;align-items:center;justify-content:center;height:100%\">\r\n            <div style=\"width:max-content;text-align:center\">\r\n                <ion-icon :icon=\"sparklesOutline\" size=\"large\"></ion-icon>\r\n                <ion-label>Заказов нет</ion-label><br>\r\n            </div>\r\n        </div>\r\n\r\n  </base-layout>\r\n</template>\r\n<script>\r\nimport { IonSegment, IonSegmentButton } from '@ionic/vue';\r\nimport {storefrontOutline,sparklesOutline,timeOutline}      from 'ionicons/icons';\r\nimport Order from '@/scripts/Order.js';\r\nimport User  from '@/scripts/User.js';\r\nimport Topic from '@/scripts/Topic.js';\r\nimport router from '@/router';\r\nimport { modalController }  from '@ionic/vue';\r\nimport CourierJobPreview    from '@/components/CourierJobPreview.vue';\r\n\r\nexport default {\r\n    components: { IonSegment, IonSegmentButton },\r\n    setup() {\r\n      return { sparklesOutline,storefrontOutline,timeOutline };\r\n    },\r\n    data(){\r\n        return {\r\n            orderList:[],\r\n            orderType:'active',\r\n            courierJobsInclude:0,\r\n            clock:null\r\n        };\r\n    },\r\n    computed:{\r\n        orderListComputed(){\r\n            for(let order of this.orderList){\r\n                if( !order.location_address ){\r\n                    order.location_address='';\r\n                }\r\n                order.location_address=order.location_address.split(',').reverse().join(',');\r\n                if( order.distance ){\r\n                    order.distance_km=Math.round(order.distance/1000)+'км';\r\n                } else {\r\n                    order.distance_km='';\r\n                }\r\n            }\r\n            return this.orderList;\r\n        }\r\n    },\r\n    created(){\r\n        let self=this;\r\n        Topic.on('courierStatusChange',function(){\r\n            self.courierReadinessCheck();\r\n        });\r\n        self.courierReadinessCheck();\r\n    },\r\n    methods:{\r\n        async listLoad(listType){\r\n            this.autoReload(listType);\r\n            if( listType=='jobs' ){\r\n                this.listJobLoad();\r\n                return;\r\n            }\r\n            let order_group_type='customer_finish';\r\n            if( listType=='active' ){\r\n                order_group_type='!customer_finish';\r\n            }\r\n            this.orderList=await Order.api.listLoad(order_group_type);\r\n        },\r\n        listTypeChanged(e){\r\n            const listType=e.target.value;\r\n            this.listLoad(listType);\r\n        },\r\n        courierReadinessCheck(){\r\n            this.courierJobsInclude=User.courier.status=='ready'?1:0;\r\n            if(this.courierJobsInclude==0){\r\n                this.orderType='active';\r\n            }\r\n        },\r\n        async listJobLoad(){\r\n            try{\r\n                const courier_id=User.courier?.data?.courier_id;\r\n                this.orderList=await Order.api.listJobGet(courier_id);\r\n            } catch(err){\r\n                const message=err.responseJSON?.messages?.error;\r\n                if(message=='notready'){\r\n                    User.courier.status='notready';\r\n                    this.courierReadinessCheck();\r\n                }\r\n            }\r\n        },\r\n        autoReload(listType){\r\n            clearTimeout(this.clock);\r\n            const self=this;\r\n            const timeout=1000*60*2;\r\n            if(listType=='jobs' || listType=='active'){\r\n                this.clock=setTimeout(()=>{\r\n                    self.listLoad(listType);\r\n                },timeout);\r\n            }\r\n        },\r\n        ionViewDidEnter() {\r\n            this.courierReadinessCheck();\r\n            if(this.orderType=='active'){\r\n                this.listLoad('active');\r\n            } else {\r\n                this.orderType='active'\r\n            }\r\n        },\r\n        ionViewDidLeave() {\r\n            clearTimeout(this.clock);\r\n        },\r\n        async itemClick(order){\r\n            if( order.is_courier_job ){\r\n                const modal = await modalController.create({\r\n                    component: CourierJobPreview,\r\n                    componentProps:{order},\r\n                    initialBreakpoint: 0.5,\r\n                    breakpoints: [0, 0.5, 0.75]\r\n                    });\r\n                const dismissFn=function(){\r\n                    modal.dismiss();\r\n                };\r\n                Topic.on('dismissModal',dismissFn);\r\n                return modal.present();\r\n            }\r\n            this.itemOpen(order.order_id);\r\n        },\r\n        itemOpen(order_id){\r\n            router.push(`order-${order_id}`);\r\n        }\r\n    }\r\n}\r\n</script>","<style scoped>\r\n    ion-icon{\r\n        font-size:40px;\r\n        color:var(--ion-color-medium);\r\n    }\r\n    .center_chip{\r\n        text-align:center;\r\n        width: 100%;\r\n    }\r\n</style>\r\n<template>\r\n    <ion-list>\r\n        <ion-item lines=\"none\">\r\n            <ion-avatar slot=\"start\">\r\n                <ion-icon :icon=\"locationOutline\" style=\"font-size:30px\"/>\r\n            </ion-avatar>\r\n            <ion-label>\r\n                <ion-text color=\"primary\">Текущее место</ion-text>\r\n            </ion-label>            \r\n        </ion-item>\r\n\r\n        <ion-item lines=\"none\">\r\n            <div class=\"center_chip\">\r\n                <ion-chip color=\"success\">\r\n                    <ion-text>{{order.distance_km}}</ion-text>\r\n                </ion-chip>\r\n            </div>      \r\n        </ion-item>\r\n\r\n        <ion-item lines=\"none\">\r\n            <ion-avatar slot=\"start\">\r\n                <ion-icon :icon=\"storefrontOutline\" style=\"font-size:30px;\"/>\r\n            </ion-avatar>\r\n            <ion-text color=\"primary\">\r\n                <ion-text>{{order.store_name}}</ion-text>\r\n                <ion-note>{{order.location_address}}</ion-note>\r\n            </ion-text>\r\n        </ion-item>\r\n\r\n        <ion-item v-if=\"start_finish_distance_km\" lines=\"none\">\r\n            <div class=\"center_chip\">\r\n                <ion-chip color=\"success\">\r\n                    <ion-text>{{start_finish_distance_km}}</ion-text>\r\n                </ion-chip>\r\n            </div>      \r\n        </ion-item>\r\n        <ion-item v-else lines=\"none\">\r\n            <div class=\"center_chip\">\r\n                <ion-chip color=\"success\">\r\n                    <ion-skeleton-text animated style=\"width: 100%\"></ion-skeleton-text>\r\n                </ion-chip>\r\n            </div>      \r\n        </ion-item>\r\n\r\n\r\n        <ion-item v-if=\"job\">\r\n            <ion-avatar slot=\"start\">\r\n                <ion-icon :icon=\"flagOutline\" style=\"font-size:30px;\"/>\r\n            </ion-avatar>\r\n            <ion-label>\r\n                <ion-text color=\"primary\">Покупатель</ion-text>\r\n                <p>{{job.finish_location_address}}</p>\r\n            </ion-label>           \r\n        </ion-item>\r\n        <ion-item v-else>\r\n            <ion-avatar slot=\"start\">\r\n                <ion-icon :icon=\"flagOutline\" style=\"font-size:30px;\"/>\r\n            </ion-avatar>\r\n            <ion-label>\r\n                <ion-text color=\"primary\">Покупатель</ion-text>\r\n                <ion-skeleton-text animated style=\"width: 60%\"></ion-skeleton-text>\r\n                <ion-skeleton-text animated style=\"width: 80%\"></ion-skeleton-text>\r\n            </ion-label>           \r\n        </ion-item>\r\n\r\n        <ion-item-group v-if=\"job\">\r\n            <ion-item>\r\n                <ion-title style=\"text-align:center\">\r\n                    <ion-button @click=\"deliveryStart()\">Начать доставку</ion-button>\r\n                </ion-title> \r\n            </ion-item>\r\n            <ion-item>\r\n                <ion-text>\r\n                    Бонус {{job.order_sum_shipping}}\r\n                </ion-text>\r\n            </ion-item>\r\n        </ion-item-group>\r\n    </ion-list>\r\n</template>\r\n<script>\r\n\r\nimport {storefrontOutline,locationOutline,flagOutline}      from 'ionicons/icons';\r\nimport User from '@/scripts/User.js';\r\nimport Order from '@/scripts/Order.js';\r\nimport Topic from '@/scripts/Topic.js';\r\nimport router from '@/router';\r\n\r\nexport default({\r\n    setup() {\r\n        return { storefrontOutline,locationOutline,flagOutline }\r\n    },\r\n    props:{\r\n        order:{}\r\n    },\r\n    data(){\r\n        return {\r\n            job:null\r\n        };\r\n    },\r\n    mounted(){\r\n        this.jobGet()\r\n    },\r\n    computed:{\r\n        start_finish_distance_km(){\r\n            if(!this.job?.start_finish_distance){\r\n                return '-';\r\n            }\r\n            return Math.round(this.job?.start_finish_distance/1000)+'км';\r\n        }\r\n    },\r\n    methods:{\r\n        async jobGet(){\r\n            try{\r\n                let job=await Order.api.itemJobGet(this.order.order_id);\r\n                job.finish_location_address=job.finish_location_address.split(',').reverse().join(',');\r\n                this.job=job;\r\n            } catch(err){\r\n                const message=err.responseJSON?.messages?.error;\r\n                if(message=='notfound'){\r\n                    this.$flash(\"Задание не найдено\");\r\n                }\r\n                if(message=='notready'){\r\n                    this.$flash(\"Смена курьера не открыта\");\r\n                }\r\n            }\r\n        },\r\n        async deliveryStart(){\r\n            const courier_id=User.courier?.data?.courier_id;\r\n            try{\r\n                await Order.api.itemJobStart(this.order.order_id,courier_id);\r\n                router.push('order-'+this.order.order_id);\r\n\r\n            } catch(err){\r\n                const message=err.responseJSON?.messages?.error;\r\n                if(message=='notfound'){\r\n                    this.$flash(\"Задание не найдено\");\r\n                }\r\n                if(message=='notready'){\r\n                    this.$flash(\"Смена курьера не открыта\");\r\n                }\r\n                if(message=='notsearching' || message=='idle'){\r\n                    this.$flash(\"Заданию уже назначен курьер\");\r\n                }\r\n            }\r\n            Topic.publish('dismissModal');\r\n        }\r\n    }\r\n})\r\n</script>\r\n","import { render } from \"./CourierJobPreview.vue?vue&type=template&id=651c3f9a&scoped=true\"\nimport script from \"./CourierJobPreview.vue?vue&type=script&lang=js\"\nexport * from \"./CourierJobPreview.vue?vue&type=script&lang=js\"\n\nimport \"./CourierJobPreview.vue?vue&type=style&index=0&id=651c3f9a&scoped=true&lang=css\"\n\nimport exportComponent from \"W:\\\\Ionic\\\\Tezkel\\\\blank\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-651c3f9a\"]])\n\nexport default __exports__","import { render } from \"./OrderList.vue?vue&type=template&id=58f82856&scoped=true\"\nimport script from \"./OrderList.vue?vue&type=script&lang=js\"\nexport * from \"./OrderList.vue?vue&type=script&lang=js\"\n\nimport \"./OrderList.vue?vue&type=style&index=0&id=58f82856&scoped=true&lang=css\"\n\nimport exportComponent from \"W:\\\\Ionic\\\\Tezkel\\\\blank\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-58f82856\"]])\n\nexport default __exports__"],"names":["style","orderType","listTypeChanged","$event","courierJobsInclude","value","orderList","length","orderListComputed","order","key","order_id","itemClick","detail","lines","slot1","user_role","src","icon","storefrontOutline","color","store_name","order_sum_total","$heap","state","currencySign","distance_km","location_address","stage_current_name","sparklesOutline","size","class","slot","locationOutline","start_finish_distance_km","animated","job","flagOutline","finish_location_address","deliveryStart","order_sum_shipping","setup","props","data","mounted","this","jobGet","computed","start_finish_distance","Math","round","methods","async","Order","split","reverse","join","err","message","responseJSON","messages","error","$flash","courier_id","User","router","Topic","__exports__","components","IonSegment","IonSegmentButton","timeOutline","clock","distance","created","self","courierReadinessCheck","listType","autoReload","listJobLoad","order_group_type","e","target","listLoad","clearTimeout","timeout","setTimeout","ionViewDidEnter","ionViewDidLeave","is_courier_job","modal","component","CourierJobPreview","componentProps","initialBreakpoint","breakpoints","dismissFn","dismiss","present","itemOpen","render"],"sourceRoot":""}