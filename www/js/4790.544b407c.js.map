{"version":3,"file":"js/4790.544b407c.js","mappings":"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","sources":["webpack://tezkel/./src/views/admin/UserMetricView.vue","webpack://tezkel/./src/views/admin/UserMetricView.vue?3370"],"sourcesContent":["<style>\r\n#printPage {\r\n    display: none;\r\n}\r\n.print-nonbreakable {\r\n    page-break-after: avoid;\r\n    break-inside: avoid;\r\n}\r\n@media print {\r\n    body #app {\r\n        display: none;\r\n    }\r\n    body #printPage{\r\n        display: contents !important;\r\n    } \r\n    body #printPage .block{\r\n        flex: 0 0 47% !important;\r\n    }\r\n}\r\n</style>\r\n<template>\r\n    <base-layout pageTitle=\"Общая статистика\" pageDefaultBackLink=\"/user\">\r\n        <div class=\"horizontalScroller\">\r\n            <ion-chip @click=\"reportPrint()\" color=\"medium\"><ion-icon :src=\"printOutline\"/><ion-label>Напечатать</ion-label></ion-chip> \r\n            <ion-chip @click=\"listGet()\" color=\"medium\"><ion-icon :src=\"reloadOutline\"/><ion-label>Обновить</ion-label></ion-chip> \r\n        </div>\r\n        <ion-list>\r\n            <ion-item>\r\n                <ion-text color=\"medium\">Дата</ion-text>\r\n                <div slot=\"end\" style=\"display:grid;grid-template-columns:120px 100px;\">\r\n                    <ion-input @ionInput=\"listGet\" type=\"date\" v-model=\"finish_at\"/>\r\n                </div>\r\n            </ion-item>\r\n            <ion-item>\r\n                <ion-select v-model=\"user_group\" @ionChange=\"listGet\" label=\"Группа пользователей\" placeholder=\"Выберите группу...\" :multiple=\"true\">\r\n                    <ion-select-option value=\"guest\">Гость</ion-select-option>\r\n                    <ion-select-option value=\"customer\">Покупатель</ion-select-option>\r\n                    <ion-select-option value=\"courier\">Курьер</ion-select-option>\r\n                    <ion-select-option value=\"supplier\">Продавец</ion-select-option>\r\n                    <ion-select-option value=\"admin\">Администратор</ion-select-option>\r\n                </ion-select>\r\n            </ion-item>\r\n            <ion-item>\r\n                <ion-toggle @ionChange=\"order_only = $event.target.checked; listGet()\" justify=\"space-between\">Только заказавшие</ion-toggle>\r\n            </ion-item>\r\n        </ion-list>\r\n        <div id=\"userMetricPage\">\r\n            <div v-if=\"data.length > 0\">\r\n                <div v-html=\"data\"></div>\r\n                <ion-infinite-scroll @ionInfinite=\"listLoadMore($event)\" id=\"user-metric-infinite-scroll\">\r\n                    <ion-infinite-scroll-content loading-spinner=\"bubbles\" loading-text=\"Загрузка...\"></ion-infinite-scroll-content>\r\n                </ion-infinite-scroll>\r\n            </div>\r\n            <div v-else>\r\n                <div style=\"padding: 1em 2em;\">\r\n                    <h4>Ничего не найдено</h4>\r\n                    <p style=\"font-size: 14px; margin: 0;\">Нет активности за выбранный период</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </base-layout>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n    IonChip,\r\n    IonLabel,\r\n    IonIcon,\r\n    IonList,\r\n    IonItem,\r\n    IonInput,\r\n    IonText,\r\n    IonSelect,\r\n    IonSelectOption,\r\n    IonInfiniteScroll,\r\n    IonInfiniteScrollContent,\r\n    IonToggle\r\n}                             from \"@ionic/vue\";\r\nimport { \r\n  calendarOutline,\r\n  addOutline,\r\n  calculatorOutline,\r\n  printOutline,\r\n  reloadOutline,\r\n}                             from \"ionicons/icons\";\r\n\r\n\r\nimport jQuery                 from \"jquery\";\r\nimport Utils                  from '@/scripts/Utils.js'\r\nimport User                   from '@/scripts/User.js'\r\n\r\nexport default {\r\n    components:{\r\n        IonChip,\r\n        IonLabel,\r\n        IonIcon,\r\n        IonList,\r\n        IonItem,\r\n        IonInput,\r\n        IonText,\r\n        IonSelect,\r\n        IonSelectOption,\r\n        IonInfiniteScroll,\r\n        IonInfiniteScrollContent,\r\n        IonToggle\r\n    },\r\n    setup(){\r\n        return {\r\n            printOutline,\r\n            calendarOutline,\r\n            addOutline,\r\n            calculatorOutline,\r\n            reloadOutline,\r\n        }\r\n    },\r\n    data(){\r\n        const today=Utils.date.today()\r\n        return {\r\n            data: [],\r\n            finish_at: Utils.date.toIso(today),\r\n            user_group: ['guest','customer','supplier'],\r\n            order_only: false,\r\n            currentPage: 0\r\n        }\r\n    },\r\n    computed:{\r\n        is_admin(){\r\n            return User.isAdmin()\r\n        },\r\n        finish_at_dmy(){\r\n            return Utils.date.isoToDmy(this.finish_at)\r\n        },\r\n    },\r\n    async mounted (){\r\n        this.listGet()\r\n    },\r\n    methods:{\r\n        async listLoadMore(ev){\r\n            await this.listGet('append')\r\n            ev.target.complete();\r\n        },\r\n        async listGet(mode = ''){\r\n            const request={\r\n                finish_at: this.finish_at,\r\n                user_group: this.user_group,\r\n                order_only: this.order_only\r\n            }\r\n            if(mode == 'append'){\r\n                this.currentPage++;\r\n            } else {\r\n                this.currentPage = 0;\r\n            }\r\n            request.page = this.currentPage\r\n            const response = await jQuery.post(this.$heap.state.hostname + 'Metric/buildView', request)\r\n            if(!response){\r\n                return\r\n            }\r\n            if(mode == 'append'){\r\n                this.data += response\r\n            } else {\r\n                this.data = response\r\n            }\r\n        },\r\n        reportPrint(){\r\n            document.getElementById('printPage')?.remove();\r\n            document.body.setAttribute('class', 'print')\r\n            let page = document.getElementById('userMetricPage');\r\n            let newElement = document.createElement('DIV');\r\n            newElement.setAttribute('id', 'printPage');\r\n            newElement.innerHTML = page.innerHTML;\r\n            document.body.appendChild(newElement)\r\n            setTimeout(window.print(), 500)\r\n        }\r\n    },\r\n}\r\n</script>","import { render } from \"./UserMetricView.vue?vue&type=template&id=736e9a89\"\nimport script from \"./UserMetricView.vue?vue&type=script&lang=js\"\nexport * from \"./UserMetricView.vue?vue&type=script&lang=js\"\n\nimport \"./UserMetricView.vue?vue&type=style&index=0&id=736e9a89&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","slot","style","id","_createBlock","_component_base_layout","pageTitle","pageDefaultBackLink","_createElementVNode","_hoisted_1","_createVNode","_component_ion_chip","onClick","_cache","$event","$options","reportPrint","color","_component_ion_icon","src","$setup","printOutline","_component_ion_label","listGet","reloadOutline","_component_ion_list","_component_ion_item","_component_ion_text","_hoisted_2","_component_ion_input","onIonInput","type","$data","finish_at","_component_ion_select","user_group","onIonChange","label","placeholder","multiple","_component_ion_select_option","value","_component_ion_toggle","order_only","target","checked","justify","_hoisted_3","data","length","_createElementBlock","_hoisted_4","innerHTML","_hoisted_5","_component_ion_infinite_scroll","onIonInfinite","listLoadMore","_component_ion_infinite_scroll_content","_hoisted_6","components","IonChip","IonLabel","IonIcon","IonList","IonItem","IonInput","IonText","IonSelect","IonSelectOption","IonInfiniteScroll","IonInfiniteScrollContent","IonToggle","setup","calendarOutline","addOutline","calculatorOutline","today","Utils","date","toIso","currentPage","computed","is_admin","User","isAdmin","finish_at_dmy","isoToDmy","this","mounted","methods","ev","complete","mode","request","page","response","jQuery","$heap","state","hostname","_document$getElementB","document","getElementById","remove","body","setAttribute","newElement","createElement","appendChild","setTimeout","window","print","__exports__","render"],"sourceRoot":""}