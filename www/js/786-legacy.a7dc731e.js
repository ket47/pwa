"use strict";(self["webpackChunktezkel"]=self["webpackChunktezkel"]||[]).push([[786],{7786:function(e,l,a){a.r(l),a.d(l,{default:function(){return c}});var t=a(6252),o=a(3577);const u={style:{"overflow-x":"scroll"}};function n(e,l,a,n,d,f){const r=(0,t.up)("ion-label"),i=(0,t.up)("ion-input"),m=(0,t.up)("ion-item"),s=(0,t.up)("ion-toggle"),p=(0,t.up)("ion-icon"),_=(0,t.up)("ion-item-divider"),c=(0,t.up)("ion-list"),w=(0,t.up)("ion-col"),W=(0,t.up)("ion-row"),h=(0,t.up)("ion-grid"),V=(0,t.up)("base-layout");return(0,t.wg)(),(0,t.j4)(V,{pageDefaultBackLink:"/user","page-title":"Редактирование тарифа"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,null,{default:(0,t.w5)((()=>[(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[(0,t.Wm)(r,{position:"floating"},{default:(0,t.w5)((()=>[(0,t.Uk)("Название тарифа")])),_:1}),(0,t.Wm)(i,{modelValue:d.tariff.tariff_name,"onUpdate:modelValue":l[0]||(l[0]=e=>d.tariff.tariff_name=e),placeholder:"название",color:"primary",style:{"font-size":"1.5em"}},null,8,["modelValue"])])),_:1}),(0,t.Wm)(m,{lines:"full"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[(0,t.Uk)("Отключен")])),_:1}),(0,t.Wm)(s,{modelValue:d.tariff.is_disabled,"onUpdate:modelValue":l[1]||(l[1]=e=>d.tariff.is_disabled=e),onIonChange:l[2]||(l[2]=e=>f.itemUpdate())},null,8,["modelValue"])])),_:1}),(0,t.Wm)(m,{lines:"full"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[(0,t.Uk)("Удалить")])),_:1}),(0,t.Wm)(p,{icon:n.trashOutline,color:"danger",onClick:l[3]||(l[3]=e=>f.itemDelete())},null,8,["icon"])])),_:1}),(0,t.Wm)(_,null,{default:(0,t.w5)((()=>[(0,t.Uk)(" Настройки тарифа ")])),_:1})])),_:1}),(0,t._)("div",u,[(0,t.Wm)(h,{onChange:l[18]||(l[18]=e=>f.itemUpdate()),style:{"min-width":"470px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(W,null,{default:(0,t.w5)((()=>[(0,t.Wm)(w),(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[(0,t.Uk)("Разрешено")])),_:1}),(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[(0,t.Uk)("Комиссия%")])),_:1}),(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[(0,t.Uk)("Плата "+(0,o.zw)(e.$heap.state.currencySign),1)])),_:1})])),_:1}),(0,t.Wm)(W,null,{default:(0,t.w5)((()=>[(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[(0,t.Uk)("Заказ")])),_:1})])),_:1}),(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[(0,t.Wm)(s,{modelValue:d.tariff.order_allow,"onUpdate:modelValue":l[4]||(l[4]=e=>d.tariff.order_allow=e),onIonChange:l[5]||(l[5]=e=>f.itemUpdate())},null,8,["modelValue"])])),_:1}),(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[(0,t.Wm)(i,{modelValue:d.tariff.order_fee,"onUpdate:modelValue":l[6]||(l[6]=e=>d.tariff.order_fee=e),placeholder:"%"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[(0,t.Wm)(i,{modelValue:d.tariff.order_cost,"onUpdate:modelValue":l[7]||(l[7]=e=>d.tariff.order_cost=e),placeholder:e.$heap.state.currencySign},null,8,["modelValue","placeholder"])])),_:1})])),_:1}),(0,t.Wm)(W,null,{default:(0,t.w5)((()=>[(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[(0,t.Uk)("Опл. картой")])),_:1})])),_:1}),(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[(0,t.Wm)(s,{modelValue:d.tariff.card_allow,"onUpdate:modelValue":l[8]||(l[8]=e=>d.tariff.card_allow=e),onIonChange:l[9]||(l[9]=e=>f.itemUpdate())},null,8,["modelValue"])])),_:1}),(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[(0,t.Wm)(i,{modelValue:d.tariff.card_fee,"onUpdate:modelValue":l[10]||(l[10]=e=>d.tariff.card_fee=e),placeholder:"%"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(w)])),_:1}),(0,t.Wm)(W,null,{default:(0,t.w5)((()=>[(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[(0,t.Uk)("Опл. наличными")])),_:1})])),_:1}),(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[(0,t.Wm)(s,{modelValue:d.tariff.cash_allow,"onUpdate:modelValue":l[11]||(l[11]=e=>d.tariff.cash_allow=e),onIonChange:l[12]||(l[12]=e=>f.itemUpdate())},null,8,["modelValue"])])),_:1}),(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[(0,t.Wm)(i,{modelValue:d.tariff.cash_fee,"onUpdate:modelValue":l[13]||(l[13]=e=>d.tariff.cash_fee=e),placeholder:"%"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(w)])),_:1}),(0,t.Wm)(W,null,{default:(0,t.w5)((()=>[(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[(0,t.Uk)("Доставка")])),_:1})])),_:1}),(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[(0,t.Wm)(s,{modelValue:d.tariff.delivery_allow,"onUpdate:modelValue":l[14]||(l[14]=e=>d.tariff.delivery_allow=e),onIonChange:l[15]||(l[15]=e=>f.itemUpdate())},null,8,["modelValue"])])),_:1}),(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[(0,t.Wm)(i,{modelValue:d.tariff.delivery_fee,"onUpdate:modelValue":l[16]||(l[16]=e=>d.tariff.delivery_fee=e),placeholder:"%"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[(0,t.Wm)(i,{modelValue:d.tariff.delivery_cost,"onUpdate:modelValue":l[17]||(l[17]=e=>d.tariff.delivery_cost=e),placeholder:e.$heap.state.currencySign},null,8,["modelValue","placeholder"])])),_:1})])),_:1})])),_:1})])])),_:1})}var d=a(8534),f=(a(8862),a(6964)),r=a(8903),i=a(9755),m=a.n(i),s={components:{IonInput:f.pK,IonIcon:f.gu,IonList:f.q_,IonItem:f.Ie,IonToggle:f.ho,IonGrid:f.jY,IonRow:f.Nd,IonCol:f.wI,IonLabel:f.Q$,IonItemDivider:f.rH},setup(){return{trashOutline:r.gtu}},data(){return{tariffId:this.$route.params.id,tariff:{},updateallow:!1}},computed:{},methods:{itemGet(){var e=this;return(0,d.Z)((function*(){let l={tariff_id:e.tariffId};try{e.tariff=yield m().post(`${e.$heap.state.hostname}Admin/Tariff/itemGet`,l);const a=e;setTimeout((()=>a.updateallow=!0),100),e.tariff.is_disabled*=1,e.tariff.order_allow*=1,e.tariff.card_allow*=1,e.tariff.cash_allow*=1,e.tariff.delivery_allow*=1}catch(a){const l=a.responseJSON,t=l.messages.error;switch(t){case"forbidden":e.$flash("Не достаточно прав");break}return!1}}))()},itemUpdate(){var e=this;return(0,d.Z)((function*(){if(!e.updateallow)return;let l=e.tariff;try{yield m().post(`${e.$heap.state.hostname}Admin/Tariff/itemUpdate`,JSON.stringify(l)),e.$flash("сохранено")}catch(a){const l=a.responseJSON,t=l.messages.error;switch(t){case"forbidden":e.$flash("Не достаточно прав");break}return!1}}))()},itemDelete(){var e=this;return(0,d.Z)((function*(){if(confirm("Вы уверенны?"))try{yield m().post(`${e.$heap.state.hostname}Admin/Tariff/itemDelete`,{tariff_id:e.tariffId}),e.$router.go(-1)}catch(l){}}))()}},mounted(){this.itemGet()}},p=a(3744);const _=(0,p.Z)(s,[["render",n]]);var c=_}}]);
//# sourceMappingURL=786-legacy.a7dc731e.js.map