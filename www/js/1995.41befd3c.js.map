{"version":3,"file":"js/1995.41befd3c.js","mappings":"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","sources":["webpack://tezkel/./src/views/UserAuthorize.vue","webpack://tezkel/./src/views/UserAuthorize.vue?16ea"],"sourcesContent":["<style scoped>\n  .vspace{\n    height: 15px;\n  }\n  h4,p{\n    -text-align:center;\n  }\n  ion-breadcrumb{\n    font-size:0.9em\n  }\n</style>\n<template>\n  <base-layout page-title=\"Вход в профиль\" pageDefaultBackLink=\"/user\">\n    \n\n    <form novalidate onsubmit=\"return false\">\n    <div style=\"display:grid;grid-template-columns:auto minmax(330px,400px) auto;width:100%;min-height:80vh\">\n      <div></div>\n      <!--PHONE ENTRY SCREEN-->\n      <section v-if=\"screen=='enter_phone'\" class=\"ion-padding\">\n        <h4>Введите номер телефона</h4>\n        <p style=\"color:var(--ion-color-medium);font-size:0.9em;\">\n          Для входа в профиль или регистрации\n        </p>\n\n        <div class=\"vspace\"></div>\n        <ion-input \n          ref=\"uphone\"\n          fill=\"outline\" \n          mode=\"md\"\n          placeholder=\"+7(___)___ __ __\"\n          name=\"phone\"\n          type=\"tel\"\n          inputmode=\"tel\"\n          autocomplete=\"tel-national\"\n          v-model=\"user_phone\"\n          @ionInput=\"phoneFormat($event)\"\n          @keyup.enter=\"phoneSubmit()\"\n          label=\"Номер телефона\"\n          label-placement=\"stacked\"\n        ></ion-input>\n\n        <div class=\"vspace\"></div>\n        <ion-text color=\"danger\" v-show=\"!phoneIsValid && phoneSubmitted == 1\">\n          Проверьте номер телефона\n        </ion-text>\n        <ion-button v-if=\"phoneIsValid\" @click=\"phoneSubmit\" expand=\"block\">Продолжить</ion-button>\n        <ion-button v-else @click=\"$refs.uphone.$el.setFocus()\" expand=\"block\" color=\"light\">Заполнить номер</ion-button>\n\n        <div class=\"vspace\"></div>\n        <ion-text  color=\"medium\" style=\"text-align:center;color:var(--ion-color-medium);font-size:0.7em;\">\n          Нажатием кнопки Продолжить, вы соглашаетесь с <b @click=\"$go('/page/rules-customer')\"><u>Правилами пользования</u></b> и <b @click=\"$go('/page/privacy_policy')\"><u>Политикой конфиденциальности</u></b>\n        </ion-text>\n      </section>\n\n\n      <!--PASS ENTRY SCREEN-->\n      <section v-if=\"screen=='enter_pass'\" class=\"ion-padding\">\n        <h4>Введите пароль</h4>\n        <p style=\"color:var(--ion-color-medium);font-size:0.9em;\">\n          Если вы не знаете пароль, войдите с помошью смс кода.\n        </p>\n        <ion-input \n          ref=\"uphone\"\n          fill=\"outline\" \n          mode=\"md\"\n          placeholder=\"+7(___)___ __ __\"\n          name=\"phone\"\n          type=\"tel\"\n          inputmode=\"tel\"\n          autocomplete=\"tel-national\"\n          v-model=\"user_phone\"\n          @ionInput=\"phoneFormat($event)\"\n          @ionChange=\"phoneSubmit()\"\n          label=\"Номер телефона\"\n          label-placement=\"stacked\"\n        ></ion-input>\n\n        <div class=\"vspace\"></div>\n        <ion-input\n          ref=\"upass\"\n          fill=\"outline\" \n          mode=\"md\"\n          v-model=\"user_pass\"\n          name=\"password\" \n          type=\"password\"\n          required\n          label=\"Пароль\"\n          label-placement=\"stacked\"\n          @keyup.enter=\"passSubmit()\"\n        ></ion-input>\n\n        <div class=\"vspace\"></div>\n        <ion-button @click=\"passSubmit\" expand=\"block\" :disabled=\"!passwordIsValid\">Вход</ion-button>\n\n        <div class=\"vspace\"></div>\n        <ion-button @click=\"codeSend\" expand=\"block\" color=\"success\"><ion-icon :src=\"chatboxEllipsesOutline\" slot=\"start\"/>Войти СМС кодом</ion-button>\n      </section>\n\n\n      <!--CODE ENTRY SCREEN-->\n      <section v-if=\"screen=='enter_code'\" class=\"ion-padding\">\n        <h4>Введите код из смс</h4>\n        <p style=\"color:var(--ion-color-medium);font-size:0.9em;\">\n          Смс с кодом подтверждения отправлен на телефон\n        </p>\n        <p style=\"color:var(--ion-color-medium);\">\n           <b>{{user_phone}}</b>\n        </p>\n\n        <div class=\"vspace\"></div>\n        <ion-input\n          ref=\"ucode\"\n          fill=\"outline\" \n          mode=\"md\"\n          v-model=\"codeValue\"\n          type=\"numeric\"\n          inputmode=\"numeric\"\n          maxlength=\"4\"\n          pattern=\"\\d{4}\"\n          placeholder=\"- - - -\"\n          enterkeyhint=\"go\"\n          required\n          autocomplete=\"one-time-code\"\n          label=\"Код подтверждения из смс\"\n          label-placement=\"stacked\"\n          @ionInput=\"codeSubmit($event)\"\n        ></ion-input>\n\n        <div class=\"vspace\"></div>\n        <ion-button @click=\"codeSubmit()\" expand=\"block\" :disabled=\"!codeIsValid\">Продолжить</ion-button>\n\n        <div class=\"vspace\"></div>\n        <ion-item v-if=\"codeResendTime>0\" lines=\"none\">\n          <p>Вы получите код в течение {{codeArriveAt}}. <b v-if=\"codeResendTime<90\">Может позвонить 🤖 робот и продиктовать код.</b></p>\n        </ion-item>\n        <ion-item v-else lines=\"none\">\n          Смс с кодом не пришла? <ion-chip slot=\"end\" @click=\"codeSend\" color=\"primary\">Послать еще раз</ion-chip>\n        </ion-item>\n        <div class=\"vspace\"></div>\n        <ion-button @click=\"screen='enter_phone'\" expand=\"block\" fill=\"outline\" color=\"medium\">Изменить номер телефона</ion-button>\n      </section>\n\n      <!--USER CREATE PASS-->\n      <section v-if=\"screen=='enter_createpass'\" class=\"ion-padding\">\n        <h4>Пароль</h4>\n        <p style=\"color:var(--ion-color-medium);font-size:0.9em;\">\n          Вы можете быстрее входить в профиль, если создадите пароль.\n        </p>\n\n        <div class=\"vspace\"></div>\n        <ion-list>\n          <ion-item lines=\"none\">\n            <ion-icon slot=\"start\" :src=\"keyOutline\"/>\n            <ion-checkbox v-model=\"registerWithPass\" value=\"1\">Создать пароль</ion-checkbox>\n          </ion-item>\n          <ion-item v-if=\"registerWithPass\" lines=\"none\">\n            <ion-input\n              v-model=\"user_pass\"\n              name=\"password\"\n              type=\"password\"\n              placeholder=\"напишите пароль\"\n              required\n              label=\"Пароль\"\n              label-placement=\"stacked\"\n            ></ion-input>\n          </ion-item>\n          <ion-item v-if=\"registerWithPass && user_pass\">\n            <ion-input\n              v-model=\"user_pass_confirm\"\n              type=\"password\"\n              placeholder=\"напишите повтор\"\n              required\n              label=\"Пароль повтор\"\n              label-placement=\"stacked\"\n            ></ion-input>\n          </ion-item>\n          <p v-if=\"user_pass && user_pass!=user_pass_confirm\" class=\"ion-padding\">\n            Пароли должны совпадать\n          </p>\n\n        </ion-list>\n        <div class=\"vspace\"></div>\n        <ion-button @click=\"userformOpen()\" expand=\"block\" v-if=\"user_pass\">Продолжить</ion-button>\n\n        <ion-button @click=\"userformOpen()\" expand=\"block\" v-if=\"!user_pass\">Пропустить</ion-button>\n        <p style=\"color:var(--ion-color-medium);font-size:0.9em;text-align:center\" v-if=\"!user_pass\">\n          Вы зарегистрируетесь без пароля\n        </p>\n        <div class=\"vspace\"></div>\n        <ion-button @click=\"screen='enter_phone'\" expand=\"block\" fill=\"outline\" color=\"medium\">Изменить номер телефона</ion-button>\n      </section>\n\n      <!--USER DATA-->\n      <section v-if=\"screen=='enter_data'\" class=\"ion-padding\">\n        <h4>Анкета пользователя</h4>\n        <div class=\"vspace\"></div>\n        <ion-list>\n          <ion-item>\n            <ion-input\n              v-model=\"user_name\"\n              placeholder=\"напишите имя\"\n              required\n              label=\"Как к вам обращаться *\"\n              label-placement=\"stacked\"\n              ref=\"uname\"\n            ></ion-input>\n          </ion-item>\n          <ion-item>\n            <ion-input\n              v-model=\"user_birthday\"\n              type=\"date\"\n              placeholder=\"\"\n              required\n              label=\"День рождения (желательно заполнить)\"\n              label-placement=\"stacked\"\n            ></ion-input>\n          </ion-item>\n          <ion-item>\n            <ion-input\n              v-model=\"user_email\"\n              type=\"email\"\n              placeholder=\"@\"\n              required\n              label=\"Ваш e-mail (желательно заполнить)\"\n              label-placement=\"stacked\"\n            ></ion-input>\n          </ion-item>\n        </ion-list>\n\n        <h4>Ваш аватар</h4>\n        <ion-segment mode=\"ios\" v-model=\"user_avatar_name\">\n          <ion-segment-button value=\"man\">\n            <ion-avatar><img :src=\"$heap.state.hostname+'img/avatar/man.png'\" /></ion-avatar>\n          </ion-segment-button>\n          <ion-segment-button value=\"woman\">\n            <ion-avatar><img :src=\"$heap.state.hostname+'img/avatar/woman.png'\" /></ion-avatar>\n          </ion-segment-button>\n        </ion-segment>\n<!--\n        <h4>Код из смс</h4>\n        <div class=\"vspace\"></div>\n        <ion-item>\n          <ion-input\n            ref=\"ucode\"\n            v-model=\"codeValue\"\n            type=\"numeric\"\n            inputmode=\"numeric\"\n            maxlength=\"4\"\n            pattern=\"\\d{4}\"\n            placeholder=\"- - - -\"\n            enterkeyhint=\"go\"\n            required\n            autocomplete=\"one-time-code\"\n            label=\"Код подтверждения из смс*\"\n            label-placement=\"stacked\"\n          ></ion-input>\n        </ion-item>\n        <div class=\"vspace\"></div>\n        <ion-item v-if=\"codeResendTime>0\" lines=\"none\">\n          Вы получите код в течение {{codeArriveAt}}\n        </ion-item>\n        <ion-item v-else lines=\"none\">\n          Смс с кодом не пришла? <ion-chip slot=\"end\" @click=\"phoneSubmit\" color=\"primary\">Послать еще раз</ion-chip>\n        </ion-item>\n-->\n\n\n        <div class=\"vspace\"></div>\n        <ion-button @click=\"registrationSubmit\" expand=\"block\" v-if=\"user_name\">Готово</ion-button>\n        <ion-button  @click=\"$refs.uname.$el.setFocus()\" expand=\"block\" v-else color=\"light\">Заполнить имя</ion-button>\n        <div class=\"vspace\"></div>\n      </section>\n\n\n\n      \n      <div></div>\n    </div>\n    </form>\n  </base-layout>\n</template>\n\n<script>\nimport { \n  IonText,\n  IonButton,\n  IonItem,\n  IonList,\n  IonInput,\n  IonCheckbox,\n  IonSegment,\n  IonSegmentButton,\n  IonAvatar,\n  IonIcon,\n  IonChip,\n}                               from '@ionic/vue';\nimport jQuery                   from 'jquery'\nimport User                     from '@/scripts/User.js'\n\n\n\nimport { \n  giftOutline,\n  personOutline,\n  keyOutline,\n  atOutline,\n  chatboxEllipsesOutline,\n}                         from \"ionicons/icons\";\n\nexport default{\n  components:{\n  IonText,\n  IonButton,\n  IonItem,\n  IonList,\n  IonInput,\n  IonCheckbox,\n  IonSegment,\n  IonSegmentButton,\n  IonAvatar,\n  IonIcon,\n  IonChip,\n  },\n  setup(){\n    return {\n      giftOutline,\n      personOutline,\n      keyOutline,\n      atOutline,\n      chatboxEllipsesOutline,\n    }\n  },\n  data(){\n    return {\n      user_phone:'',\n      user_name:null,\n      user_email:null,\n      user_avatar_name:'man',\n      user_birthday:null,\n      user_pass:null,\n      user_pass_confirm:null,\n\n      screen:'enter_phone',\n      codeValue:null,\n      passValue:null,\n      codeResendTime:0,\n      phoneSubmitted:0,\n      signinOptions:{},\n      registerWithPass:0,\n    }\n  },\n  computed: {\n    phoneIsValid() {\n      return this.user_phone?.replace(/\\D/g,\"\").length == 11;\n    },\n    passwordIsValid() {\n      return this.user_pass?.length >= 4;\n    },\n    codeIsValid(){\n      return this.codeValue?.replace(/\\D/g,\"\").length == 4;\n    },\n    codeArriveAt(){\n      const min=Math.floor(this.codeResendTime/60);\n      const sec=this.codeResendTime-60*min;\n      return (min>0?`${min} мин `:'') + (`${sec} сек`)\n    },\n\n  },\n  methods:{\n    phoneFormat(ev){\n      const value = ev.target?.value\n      let filteredValue = value.replace(/[^0-9]+/g, '') || ''\n      if(filteredValue.substring(0,1)!='7'){\n        filteredValue='7'+filteredValue\n      }\n      if(filteredValue.length>11){\n        filteredValue=filteredValue.substring(filteredValue.length-11)\n      }\n      setTimeout(()=>{\n        this.user_phone='+'+filteredValue\n      },50)\n    },\n    async phoneSubmit(){\n      this.phoneSubmitted=1\n      if( !this.phoneIsValid ){\n        return false\n      }\n      const request={\n        user_phone:this.user_phone\n      }\n      try{\n        this.signinOptions=await jQuery.post( `${this.$heap.state.hostname}User/signInOptionsGet`, request)\n        if( this.signinOptions.is_signedin==1 ){\n          this.$flash(\"Вы вошли в профиль\");\n          this.$router.go(-1);\n          return\n        }\n        if( this.signinOptions.is_deleted==1 ){\n          this.$flash(\"Ваш профиль удален\");\n          return\n        }\n        if( this.signinOptions.is_disabled==1 ){\n          this.$flash(\"Ваш профиль заблокирован\");\n          return\n        }\n        if( this.signinOptions.by_pass==1 ){\n          this.screen='enter_pass'\n          setTimeout(()=>{\n            this.$refs.upass.$el.setFocus()\n          },100)\n          return\n        }\n        if( this.signinOptions.by_code==1 ){\n          this.codeSend()\n          return\n        }\n      } catch(err){\n        const exception_code=err?.responseJSON?.messages?.error;\n        switch(exception_code){\n            case 'notfound'://new user\n              /**\n               * This is a new User. So confirm its phone number, then collect data\n               */\n              this.signinOptions={is_newuser:1}\n              this.codeSend()\n              break;\n            default:\n              this.$flash(\"Не удалось отправить код\")\n              break;\n        }\n      }\n    },\n\n    async passSubmit() {\n      this.submitted = true;\n      if(!this.phoneIsValid || !this.passwordIsValid){\n        return false;\n      }\n      let request = {\n        user_phone: this.user_phone,\n        user_pass: this.user_pass,\n        user_pass_confirm: this.user_pass\n      }\n      try{\n        await jQuery.post( `${this.$heap.state.hostname}User/signIn`, request)\n        const user=await User.get();\n        this.$flash(`Добро пожаловать ${user.user_name}`)\n        this.$router.go(-1)\n      } catch(err){\n        const exception_code=err?.responseJSON?.messages?.error\n        switch(exception_code){\n          case 'user_not_found':\n            this.$flash(\"Пользователь не найден. Пройдите регистрацию.\");\n            break;\n          case 'user_pass_wrong':\n            this.$flash(\"Неверный пароль\");\n            break;\n          case 'user_code_wrong':\n            this.$flash(\"Неверный код подтверждения\");\n            break;\n          case 'user_is_disabled':\n            this.$flash(\"Пользователь отключен. Обратитесь к администратору\");\n            break;\n          case 'user_is_deleted':\n            this.$flash(\"Пользователь удален. Обратитесь к администратору\");\n            break;\n          case 'user_phone_unverified':\n            this.$flash(\"Номер телефона не подтвержден\");\n            this.codeSend();\n            break;\n          default:\n            this.$flash(\"Не удалось войти в профиль\");\n        }\n      }\n    },\n    \n    async codeSend(){\n      this.phoneSubmitted=1\n      if( !this.phoneIsValid ){\n        return false\n      }\n      const request={\n        user_phone:this.user_phone\n      }\n      try{\n        this.screen='enter_code'\n        await jQuery.post( `${this.$heap.state.hostname}User/phoneVerificationSend`, request)\n        this.codeCapture()\n        this.codeClockTick(120)\n        this.$refs.ucode.$el.setFocus()\n      } catch(err){\n        const exception_code=err?.responseJSON?.messages?.error;\n        switch(exception_code){\n            case 'verification_target_invalid':\n              this.$flash(\"Неверный формат номера телефона\")\n              break;\n            case 'verification_already_sent':\n              this.$flash(\"Код уже послан\")\n              break;\n            default:\n              this.$flash(\"Не удалось отправить код\")\n              break;\n        }\n      }\n    },\n\n    async codeCapture(){\n      if( navigator.credentials ){\n        try{\n          const otp=await navigator.credentials.get({\n            otp: {transport:[\"sms\"]}\n          })\n          this.codeValue = otp.code\n          this.codeSubmit()\n        } catch (err){/** */}\n      }\n    },\n\n    codeClockTick( timeLeft ){\n      if(timeLeft<0){\n        return\n      }\n      this.codeResendTime=timeLeft\n      setTimeout(()=>this.codeClockTick(this.codeResendTime-1),1000)\n    },\n\n    async codeSubmit( ev ) {\n      if( ev ){\n        this.codeValue = ev.target?.value\n      }\n      if(!this.phoneIsValid || !this.codeIsValid){\n        return false;\n      }\n        /**\n         * User can't sign in by code\n         * Perhaps he is not signed up yet\n         */\n      if( this.signinOptions.is_newuser==1 || this.signinOptions.by_code!=1 ){\n        this.codeVerify()\n        return\n      }\n      this.codeSignIn()\n    },\n\n    async codeVerify(){\n      try{\n        const request={\n          verification_type:'phone',\n          verification_target:this.user_phone,\n          verification_value:this.codeValue,\n        }\n        await jQuery.post( `${this.$heap.state.hostname}User/verificationCheck`, request)\n        this.screen='enter_createpass'\n      } catch(err){\n        const exception_code=err?.responseJSON?.messages?.error;\n        switch(exception_code){\n            default:\n              this.$flash(\"Не верный код подтверждения\")\n              break;\n        }\n      }\n    },\n\n    async codeSignIn(){\n      let request = {\n        user_phone: this.user_phone,\n        user_ota_code: this.codeValue,\n      }\n      try{\n        await jQuery.post( `${this.$heap.state.hostname}User/signInByCode`, request)\n        const user=await User.get();\n        this.$flash(`Добро пожаловать ${user.user_name}`)\n        if(this.$heap.state.next_route){\n          this.$go(this.$heap.state.next_route)\n          this.$heap.state.next_route=null\n        } else {\n          this.$router.go(-1);\n        }\n      } catch(err){\n        const exception_code=err?.responseJSON?.messages?.error\n        switch(exception_code){\n          case 'user_not_found':\n            this.$flash(\"Пользователь не найден. Пройдите регистрацию.\");\n            break;\n          case 'user_pass_wrong':\n            this.$flash(\"Неверный пароль\");\n            break;\n          case 'user_code_wrong':\n            this.$flash(\"Не верный код подтверждения\");\n            break;\n          case 'user_is_disabled':\n            this.$flash(\"Пользователь отключен. Обратитесь к администратору\");\n            break;\n          case 'user_is_deleted':\n            this.$flash(\"Пользователь удален. Обратитесь к администратору\");\n            break;\n          case 'user_phone_unverified':\n            this.$flash(\"Номер телефона не подтвержден\");\n            this.codeSend();\n            break;\n          default:\n            this.$flash(\"Не удалось войти в профиль\");\n        }\n      }\n\n    },\n    async userformOpen(){\n      this.phoneSubmitted=1\n      if( !this.phoneIsValid ){\n        return false\n      }\n      this.screen='enter_data'\n      setTimeout(()=>{\n        this.$refs.uname && this.$refs.uname.$el.setFocus()\n      },100)\n    },\n    async registrationSubmit(){\n      if(!this.user_name){\n        this.$flash(\"Имя не должно быть пустым\")\n        return \n      }\n      try{\n        const request={\n          user_phone:this.user_phone,\n          user_name:this.user_name,\n          user_birthday:this.user_birthday||null,\n          user_avatar_name:this.user_avatar_name,\n\n          user_email:this.user_email,\n          user_pass:this.user_pass,\n          user_pass_confirm:this.user_pass_confirm,\n          user_ota_code:this.codeValue,\n\n          inviter_user_id: localStorage.inviter_user_id ?? 0,\n          /**\n           * @todo handle this\n           */\n          metric_id:0,//\n        }\n        const response=await jQuery.post( `${this.$heap.state.hostname}User/signUp`, request)\n        const user=await User.get();\n        this.$flash(`Добро пожаловать ${user.user_name}`)\n        this.$router.go(-1);\n      } catch(err){\n        let exception_code = \"unknown\";\n        try {\n          const invalid_field = Object.keys(\n            JSON.parse(err.responseJSON.messages.error)\n          )[0];\n          const invalid_reason = Object.values(\n            JSON.parse(err.responseJSON.messages.error)\n          )[0];\n          exception_code = invalid_field + \"_\" + invalid_reason;\n        } catch {\n          /** */\n        }\n\n        switch (exception_code) {\n          case \"user_phone_notunique\":\n            this.$flash(\"Пользователь с таким телефоном уже зарегистрирован\");\n            break;\n          case \"user_phone_required\":\n          case \"user_phone_invalid\":\n          case \"user_phone_short\":\n            this.$flash(\"Проверьте номер телефона\");\n            break;\n          case \"user_name_required\":\n          case \"user_name_short\":\n            this.$flash(\"Проверьте ваш псевдоним\");\n            break;\n          case \"user_email_invalid\":\n            this.$flash(\"Проверьте ваш е-маил\");\n            break;\n          case \"user_email_notunique\":\n            this.$flash(\"Такой е-маил уже используется\");\n            break;\n          case \"user_pass_required\":\n            this.$flash(\"Пароль обязателен для заполнения\");\n            break;\n          case \"user_pass_short\":\n            this.$flash(\"Пароль слишком короткий\");\n            break;\n          case \"user_pass_notmatches\":\n            this.$flash(\"Пароль не совпадает с подтверждением\");\n            break;\n          default:\n            this.$flash(\"Не удалось зарегистрироваться\");\n        }\n      }\n\n    }\n  },\n  mounted(){\n    setTimeout(()=>{\n      this.$refs.uphone && this.$refs.uphone.$el.setFocus()\n    },100)\n  }\n}\n</script>","import { render } from \"./UserAuthorize.vue?vue&type=template&id=480bdbaf&scoped=true\"\nimport script from \"./UserAuthorize.vue?vue&type=script&lang=js\"\nexport * from \"./UserAuthorize.vue?vue&type=script&lang=js\"\n\nimport \"./UserAuthorize.vue?vue&type=style&index=0&id=480bdbaf&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-480bdbaf\"]])\n\nexport default __exports__"],"names":["novalidate","onsubmit","style","class","_createBlock","_component_base_layout","pageDefaultBackLink","_createElementVNode","_hoisted_1","_hoisted_2","$data","screen","_createElementBlock","_hoisted_3","_createVNode","_component_ion_input","ref","fill","mode","placeholder","name","type","inputmode","autocomplete","user_phone","$event","onIonInput","_cache","$options","phoneFormat","onKeyup","_withKeys","phoneSubmit","label","_component_ion_text","color","phoneIsValid","phoneSubmitted","_component_ion_button","onClick","expand","_ctx","$refs","uphone","$el","setFocus","$go","_hoisted_4","onIonChange","user_pass","required","passSubmit","disabled","passwordIsValid","codeSend","_component_ion_icon","src","$setup","chatboxEllipsesOutline","slot","_hoisted_5","_hoisted_6","_toDisplayString","codeValue","maxlength","pattern","enterkeyhint","codeSubmit","codeIsValid","codeResendTime","_component_ion_item","lines","codeArriveAt","_hoisted_7","_component_ion_chip","_hoisted_8","_component_ion_list","keyOutline","_component_ion_checkbox","registerWithPass","value","key","user_pass_confirm","_hoisted_9","userformOpen","_hoisted_10","_hoisted_11","user_name","user_birthday","user_email","_component_ion_segment","user_avatar_name","_component_ion_segment_button","_component_ion_avatar","$heap","state","hostname","registrationSubmit","uname","components","IonText","IonButton","IonItem","IonList","IonInput","IonCheckbox","IonSegment","IonSegmentButton","IonAvatar","IonIcon","IonChip","setup","giftOutline","personOutline","atOutline","data","passValue","signinOptions","computed","_this$user_phone","this","replace","length","_this$user_pass","_this$codeValue","min","Math","floor","sec","methods","ev","_ev$target","target","filteredValue","substring","setTimeout","request","jQuery","is_signedin","$flash","$router","go","is_deleted","is_disabled","by_pass","upass","by_code","err","_err$responseJSON","_err$responseJSON$mes","exception_code","responseJSON","messages","error","is_newuser","submitted","user","User","get","_err$responseJSON2","_err$responseJSON2$me","codeCapture","codeClockTick","ucode","_err$responseJSON3","_err$responseJSON3$me","navigator","credentials","otp","transport","code","timeLeft","_ev$target2","codeSignIn","codeVerify","verification_type","verification_target","verification_value","_err$responseJSON4","_err$responseJSON4$me","user_ota_code","next_route","_err$responseJSON5","_err$responseJSON5$me","inviter_user_id","localStorage","metric_id","invalid_field","Object","keys","JSON","parse","invalid_reason","values","mounted","__exports__","render"],"sourceRoot":""}