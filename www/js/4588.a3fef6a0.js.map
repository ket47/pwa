{"version":3,"file":"js/4588.a3fef6a0.js","mappings":"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","sources":["webpack://Tezkel/./src/views/PostEdit.vue","webpack://Tezkel/./src/views/PostEdit.vue?22f0"],"sourcesContent":["<style scoped>\r\n  .pdisabled{\r\n    background-color: var(--ion-color-light-shade);\r\n  }\r\n  .pdeleted{\r\n    background-color: var(--ion-color-danger-tint);\r\n  }\r\n  .phidden{\r\n    background-color: var(--ion-color-warning-shade);\r\n  }\r\n  .pactive{\r\n    background-color: var(--ion-color-success-shade);\r\n  }\r\n</style>\r\n\r\n<template>\r\n  <base-layout :page-title=\"postItem?.post_title??'Пост'\">\r\n  <div v-if=\"postItem\">\r\n    <ion-card>\r\n      <ion-card-content :class=\"messageClass\">\r\n        <ion-text color=\"dark\">{{message}}</ion-text>\r\n      </ion-card-content>\r\n    </ion-card>\r\n\r\n\r\n    <ion-list>\r\n      <ion-item>\r\n        <ion-icon :src=\"trashOutline\" color=\"primary\" slot=\"start\"/>\r\n        <ion-toggle v-model=\"is_deleted\" color=\"danger\" @ionChange=\"itemDelete($event.target.checked?1:0)\">Удален</ion-toggle>\r\n      </ion-item>\r\n      <ion-item>\r\n        <ion-icon :src=\"ribbonOutline\" color=\"primary\" slot=\"start\"/>\r\n        <ion-toggle v-model=\"is_disabled\" @ionChange=\"itemDisable($event.target.checked?1:0)\">На модерации</ion-toggle>\r\n      </ion-item>\r\n    </ion-list>\r\n\r\n    <form @change=\"saveForm\">\r\n      <ion-list lines=\"full\">\r\n        <ion-item-group>\r\n          <ion-item-divider>\r\n            <ion-label>Основные настройки</ion-label>\r\n          </ion-item-divider>\r\n          <ion-item>\r\n            <ion-input v-model=\"postItem.post_title\" label=\"Заголовок*\" labelPlacement=\"stacked\" name=\"post_title\" placeholder=\"заголовок\" clearInput=\"true\"/>\r\n          </ion-item>\r\n          <ion-item>\r\n            <ion-textarea v-model=\"postItem.post_content\" label=\"Содержание*\" labelPlacement=\"stacked\" name=\"post_content\" rows=\"6\" placeholder=\"текст\"></ion-textarea>\r\n          </ion-item>\r\n          <ion-item>\r\n            <ion-input v-model=\"postItem.post_route\" label=\"Ссылка*\" labelPlacement=\"stacked\" name=\"post_route\" placeholder=\"ссылка\" clearInput=\"true\"/>\r\n          </ion-item>\r\n        </ion-item-group>\r\n      </ion-list>\r\n\r\n      <ion-list lines=\"full\">\r\n        <ion-item-group>\r\n          <ion-item-divider>\r\n            <ion-label>Время действия</ion-label>\r\n          </ion-item-divider>\r\n        </ion-item-group>\r\n        <ion-item>\r\n          <ion-input type=\"date\" v-model=\"postItem.started_at\" label=\"Начало показа\" labelPlacement=\"stacked\" name=\"started_at\"/>\r\n        </ion-item>\r\n        <ion-item>\r\n          <ion-input type=\"date\" v-model=\"postItem.finished_at\" label=\"Конец показа\" labelPlacement=\"stacked\" name=\"finished_at\"/>\r\n        </ion-item>\r\n      </ion-list>\r\n\r\n      <ion-item-divider>\r\n        <ion-label>Тип поста</ion-label>\r\n      </ion-item-divider>\r\n      <ion-list>\r\n        <ion-radio-group v-model=\"postItem.post_type\" @ionChange=\"saveForm\" name=\"post_type\">\r\n          <ion-item v-for=\"type in postTypes\" :key=\"type.post_type\" @click=\"itemImageParamsSet()\">\r\n            {{type.post_type_name}}\r\n            <ion-radio color=\"primary\" slot=\"end\" :value=\"type.post_type\"></ion-radio>\r\n          </ion-item>\r\n        </ion-radio-group>\r\n      </ion-list>\r\n    </form>\r\n\r\n    <ion-list v-if=\"imageParams\">\r\n      <ion-item-divider>\r\n        <ion-label>Изображения*</ion-label>\r\n      </ion-item-divider>\r\n      <image-tile-comp :images=\"postItem.images\" :image_holder_id=\"postItem.post_id\" :params=\"imageParams\" title=\"Фото поста\" controller=\"Post\" ref=\"postImgs\"></image-tile-comp>\r\n      <ion-button @click=\"$refs.postImgs.take_photo()\" color=\"light\" expand=\"block\">\r\n        <ion-icon :src=\"cameraOutline\" slot=\"start\"/> Добавить фото в пост\r\n      </ion-button>\r\n    </ion-list>\r\n\r\n\r\n    <ion-list v-if=\"postItem && postItem.updated_user\">\r\n      <ion-item-divider>\r\n          <ion-label></ion-label>\r\n      </ion-item-divider>\r\n      <ion-item lines=\"none\">\r\n        Изменен {{postItem.updated_at}}\r\n        <a slot=\"end\" :href=\"`tel:+${postItem.updated_user.user_phone}`\">{{postItem.updated_user.user_name}}</a>\r\n      </ion-item>\r\n    </ion-list>\r\n\r\n\r\n\r\n  </div>\r\n  <div v-else>\r\n    loading\r\n  </div>\r\n  </base-layout>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  IonInput,\r\n  IonTextarea,\r\n  IonCard,\r\n  IonCardContent,\r\n  IonToggle,\r\n  IonIcon,\r\n  IonItem,\r\n  IonList,\r\n  IonLabel,\r\n  IonItemDivider,\r\n  IonItemGroup,\r\n  IonButton,\r\n  IonText,\r\n  IonRadio,\r\n  IonRadioGroup,\r\n  }                   from '@ionic/vue'\r\nimport {\r\n  cameraOutline,\r\n  trashOutline,\r\n  banOutline,\r\n  personOutline,\r\n  addOutline,\r\n  calculatorOutline,\r\n  compassOutline,\r\n  chevronBack,\r\n  layersOutline,\r\n  ribbonOutline,\r\n  eyeOffOutline,\r\n}                     from 'ionicons/icons'\r\nimport imageTileComp  from '@/components/ImageTileComp.vue'\r\nimport jQuery         from \"jquery\";\r\n\r\nexport default  {\r\n  components: { \r\n    IonInput,\r\n    IonTextarea,\r\n    IonCard,\r\n    IonCardContent,\r\n    IonToggle,\r\n    IonIcon,\r\n    IonItem,\r\n    IonList,\r\n    IonLabel,\r\n    IonItemDivider,\r\n    IonItemGroup,\r\n    IonButton,\r\n    IonText,\r\n    imageTileComp,\r\n    IonRadio,\r\n    IonRadioGroup,\r\n    },\r\n  setup(){\r\n    return {\r\n      cameraOutline,\r\n      trashOutline,\r\n      banOutline,\r\n      personOutline,\r\n      addOutline,\r\n      calculatorOutline,\r\n      compassOutline,\r\n      chevronBack,\r\n      layersOutline,\r\n      ribbonOutline,\r\n      eyeOffOutline,\r\n      }\r\n  },\r\n  data(){\r\n    return {\r\n      postId: this.$route.params.id,\r\n      postItem: null,\r\n      imageParams:null,\r\n      postTypes:[\r\n        {\r\n          post_type:'homeslide',\r\n          post_type_name:'Главная-слайд 1920x700',\r\n          image_height:700,\r\n          image_width:1920,\r\n        },\r\n        {\r\n          post_type:'wellcomeslide',\r\n          post_type_name:'Приветствие-слайд 1500x3200',\r\n          image_height:3200,\r\n          image_width:1500,\r\n        },\r\n      ],\r\n      is_deleted:0,\r\n      is_disabled:0,\r\n    }\r\n  },\r\n  computed: {\r\n    messageCardSeverity(){\r\n      if(this.postItem?.validity<50){\r\n        return 'danger';\r\n      }\r\n      if(this.postItem?.validity<this.validity_min){\r\n        return 'warning';\r\n      }\r\n      return 'primary';\r\n    },\r\n    message(){\r\n      if( !this.postItem ){\r\n        return ''\r\n      }\r\n      if(this.postItem.deleted_at){\r\n        return \"Пост не активен и будет удален. Вы еще можете отменить удаление\"\r\n      }\r\n      if(this.postItem.is_disabled==1){\r\n        return \"Пост не активен и находится на рассмотрении у администратора\"\r\n      }\r\n      if(this.postItem.is_hidden==1){\r\n        return \"Пост скрыт со стены.\"\r\n      }\r\n      return \"Пост активен\"\r\n    },\r\n    messageClass(){\r\n      if( !this.postItem ){\r\n        return ''\r\n      }\r\n      if(this.postItem?.deleted_at){\r\n        return \"pdeleted\";\r\n      }\r\n      if(this.postItem?.is_disabled==1){\r\n        return \"pdisabled\";\r\n      }\r\n      return 'pactive';\r\n    },\r\n    categoryList(){\r\n      let categories=[];\r\n      try{\r\n        let member_of_ids=this.postItem.member_of_groups.group_ids.split(',');\r\n        let member_of_names=this.postItem.member_of_groups.group_names.split(',');\r\n        for( let i in member_of_ids){\r\n          categories.push({group_id:member_of_ids[i],group_name:member_of_names[i]})\r\n        }\r\n      }catch{/** */}\r\n      return categories;\r\n    }\r\n  },\r\n  created(){\r\n    this.itemGet()\r\n  },\r\n  methods:{\r\n    async itemGet(){\r\n      try{\r\n        if( this.postId==0 ){\r\n          await this.itemCreate()\r\n          return\r\n        }\r\n        let postItem=await jQuery.post(`${this.$heap.state.hostname}Post/itemGet`, { post_id: this.postId })\r\n        this.postItem=this.itemPrepare(postItem)\r\n        this.itemParseFlags()\r\n        this.itemImageParamsSet()\r\n      }catch(err){\r\n        //console.log(err);\r\n      }\r\n    },\r\n    itemImageParamsSet(){\r\n        if(this.postItem.post_type){\r\n          for(let type of this.postTypes){\r\n            if(type.post_type==this.postItem.post_type){\r\n              this.imageParams={image_width:type.image_width,image_height:type.image_height}\r\n            }\r\n          }\r\n        }\r\n    },\r\n    itemPrepare(postItem){\r\n      if(postItem.started_at){\r\n        postItem.started_at=postItem.started_at.split(' ')[0]\r\n      }\r\n      if(postItem.finished_at){\r\n        postItem.finished_at=postItem.finished_at.split(' ')[0]\r\n      }\r\n      return postItem\r\n    },\r\n    itemParseFlags(){\r\n      this.is_deleted   = this.postItem.deleted_at==null?0:1\r\n      this.is_disabled  = this.postItem.is_disabled==0?0:1\r\n    },\r\n    async itemCreate(){\r\n      const draft={\r\n        post_title:'Черновик'\r\n      }\r\n      try{\r\n        const post_id=await jQuery.post(`${this.$heap.state.hostname}Post/itemCreate`, draft)\r\n        if( post_id ){\r\n          this.$router.replace(`/wall/post-edit-${post_id}`)\r\n        }\r\n      } catch{/** */}\r\n    },\r\n    async itemDelete( is_deleted ){\r\n      const remoteFunction=is_deleted?'itemDelete':'itemUnDelete'\r\n      try{\r\n        await jQuery.post( `${this.$heap.state.hostname}Post/${remoteFunction}`, { post_id: this.postId })\r\n        this.postItem.deleted_at=is_deleted?1:null;\r\n      }catch{\r\n        this.itemGet()\r\n      }\r\n    },\r\n    async itemDisable( is_disabled ){\r\n      if(this.postItem.is_disabled==is_disabled){\r\n        return\r\n      }\r\n      try{\r\n        await jQuery.post( `${this.$heap.state.hostname}Post/itemDisable`, { post_id: this.postId, is_disabled })\r\n        this.postItem.is_disabled=is_disabled;\r\n      }catch{\r\n        this.$flash(\"Изменение не сохранено\")\r\n        this.itemGet()\r\n      }\r\n    },\r\n    async itemUpdate(request){\r\n      try{\r\n        await jQuery.post( `${this.$heap.state.hostname}Post/itemUpdate`, JSON.stringify(request))\r\n        this.$flash(\"💾 сохранено\")\r\n        return true\r\n      } catch(err){\r\n        const validationErrors=err.responseJSON.messages.error\r\n        if(validationErrors?.includes('post_content')){\r\n          this.$flash(\"Описание слишком короткое\")\r\n        } else\r\n        if(validationErrors?.includes('post_title')){\r\n          this.$flash(\"Заголовок слишком короткий\")\r\n        } else \r\n        this.$flash(\"Изменение не сохранено\")\r\n        this.itemGet()\r\n        return false\r\n      }\r\n    },\r\n\r\n    saveForm(ev){\r\n      const field_name=ev.target.name;\r\n      const field_value=this.postItem[field_name]=ev.target.value\r\n      this.save(field_name,field_value)\r\n    },\r\n    async save(field_name, field_value) {\r\n      if( !this.postItem.post_id ){//product not loaded yet\r\n        return\r\n      }\r\n      let request = {\r\n        post_id:this.postItem.post_id,\r\n        [field_name]:field_value\r\n      }\r\n      if( this.itemUpdate(request) ){\r\n        this.postItem[field_name] = field_value;\r\n        this.itemParseFlags()\r\n      }\r\n    },\r\n    categoryDelete(group_id,group_name){\r\n      if(!confirm(\"Исключить товар из категории \"+group_name+\"?\")){\r\n        return\r\n      }\r\n      try{\r\n        this.itemUpdateGroup(0,group_id)\r\n      } catch{/** */}\r\n    },\r\n    \r\n  },\r\n}\r\n</script>","import { render } from \"./PostEdit.vue?vue&type=template&id=e9b979b8&scoped=true\"\nimport script from \"./PostEdit.vue?vue&type=script&lang=js\"\nexport * from \"./PostEdit.vue?vue&type=script&lang=js\"\n\nimport \"./PostEdit.vue?vue&type=style&index=0&id=e9b979b8&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-e9b979b8\"]])\n\nexport default __exports__"],"names":["key","_createBlock","_component_base_layout","_$data$postItem$post_","_$data$postItem","$data","postItem","post_title","default","_withCtx","_createElementBlock","_hoisted_1","_createVNode","_component_ion_card","_component_ion_card_content","class","_normalizeClass","$options","messageClass","_component_ion_text","color","_createTextVNode","_toDisplayString","message","_","_component_ion_list","_component_ion_item","_component_ion_icon","src","$setup","trashOutline","slot","_component_ion_toggle","modelValue","is_deleted","_cache","$event","onIonChange","itemDelete","target","checked","ribbonOutline","is_disabled","itemDisable","_createElementVNode","onChange","args","saveForm","lines","_component_ion_item_group","_component_ion_item_divider","_component_ion_label","_component_ion_input","label","labelPlacement","name","placeholder","clearInput","_component_ion_textarea","post_content","rows","post_route","type","started_at","finished_at","_component_ion_radio_group","post_type","_Fragment","_renderList","postTypes","onClick","itemImageParamsSet","post_type_name","_component_ion_radio","value","imageParams","_component_image_tile_comp","images","image_holder_id","post_id","params","title","controller","ref","_component_ion_button","_ctx","$refs","postImgs","take_photo","expand","cameraOutline","_createCommentVNode","updated_user","updated_at","href","user_phone","user_name","_hoisted_2","_hoisted_3","components","IonInput","IonTextarea","IonCard","IonCardContent","IonToggle","IonIcon","IonItem","IonList","IonLabel","IonItemDivider","IonItemGroup","IonButton","IonText","imageTileComp","IonRadio","IonRadioGroup","setup","banOutline","personOutline","addOutline","calculatorOutline","compassOutline","chevronBack","layersOutline","eyeOffOutline","data","postId","this","$route","id","image_height","image_width","computed","messageCardSeverity","_this$postItem","_this$postItem2","validity","validity_min","deleted_at","is_hidden","_this$postItem3","_this$postItem4","categoryList","categories","member_of_ids","member_of_groups","group_ids","split","member_of_names","group_names","i","push","group_id","group_name","created","itemGet","methods","itemCreate","jQuery","$heap","state","hostname","itemPrepare","itemParseFlags","err","draft","$router","replace","remoteFunction","$flash","itemUpdate","request","JSON","stringify","validationErrors","responseJSON","messages","error","includes","ev","field_name","field_value","save","categoryDelete","confirm","itemUpdateGroup","__exports__","render"],"sourceRoot":""}