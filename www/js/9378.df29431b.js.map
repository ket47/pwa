{"version":3,"file":"js/9378.df29431b.js","mappings":"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","sources":["webpack://Tezkel/./src/views/TextPageEdit.vue","webpack://Tezkel/./src/views/TextPageEdit.vue?fc93"],"sourcesContent":["<template>\r\n  <base-layout pageTitle=\"Редактирование страницы\" pageDefaultBackLink=\"/user\">\r\n    <ion-list>\r\n        <ion-item>\r\n            <ion-icon slot=\"start\" :icon=\"bookmarkOutline\"/>\r\n            <ion-label position=\"stacked\" color=\"primary\">Заголовок статьи</ion-label>\r\n            <ion-input v-model=\"page.page_title\" placeholder=\"Заголовок статьи\"/>\r\n        </ion-item>\r\n        <ion-item>\r\n            <ion-icon slot=\"start\" :icon=\"codeOutline\"/>\r\n            <ion-label position=\"stacked\" color=\"primary\">Код для ссылки</ion-label>\r\n            <ion-input v-model=\"page.page_name\" placeholder=\"Код для ссылки\"/>\r\n        </ion-item>\r\n    </ion-list>\r\n    <ckeditor :editor=\"editor\" v-model=\"page.page_content\" :config=\"editorConfig\"></ckeditor>\r\n    <ion-grid style=\"width:100%\">\r\n        <ion-row>\r\n            <ion-col>\r\n                <ion-button @click=\"$go('/user/text-list')\" color=\"light\">К списку страниц</ion-button>\r\n            </ion-col>\r\n            <ion-col style=\"text-align:right\">\r\n                <ion-button @click=\"itemDelete()\" color=\"danger\">Удалить</ion-button>\r\n            </ion-col>\r\n            <ion-col style=\"text-align:right\">\r\n                <ion-button @click=\"itemSave()\">Сохранить</ion-button>\r\n            </ion-col>\r\n        </ion-row>\r\n    </ion-grid>\r\n  </base-layout>\r\n</template>\r\n\r\n<script>\r\nimport CKEditor from \"@ckeditor/ckeditor5-vue\";\r\nimport ClassicEditor from \"@ckeditor/ckeditor5-build-classic\";\r\nimport \"@ckeditor/ckeditor5-build-classic/build/translations/ru\";\r\n//import SourceEditing from '@ckeditor/ckeditor5-source-editing/src/sourceediting';\r\nimport {documentTextOutline,codeOutline,bookmarkOutline} from 'ionicons/icons';\r\n\r\nimport { \r\n    IonLabel,\r\n    IonIcon,\r\n    IonList,\r\n    IonItem,\r\n    IonInput,\r\n    IonButton,\r\n    IonGrid,\r\n    IonRow,\r\n    IonCol,\r\n\r\n}               from '@ionic/vue'\r\nimport User     from '@/scripts/User.js';\r\nimport jQuery   from \"jquery\";\r\n\r\nexport default {\r\n  components: {     \r\n    IonLabel,\r\n    IonIcon,\r\n    IonList,\r\n    IonItem,\r\n    IonInput,\r\n    IonButton,\r\n    IonGrid,\r\n    IonRow,\r\n    IonCol,\r\n    ckeditor: CKEditor.component \r\n  },\r\n  setup() {\r\n    return { documentTextOutline, codeOutline, bookmarkOutline };\r\n  },\r\n  data() {\r\n    return {\r\n      editor: ClassicEditor,\r\n      page_id:0,\r\n      page: {\r\n          page_name:'',\r\n          page_title:'',\r\n          page_content:''\r\n      },\r\n      editorConfig: {\r\n        language: \"ru\",\r\n        //plugins: [ SourceEditing ],\r\n      },\r\n    };\r\n  },\r\n  created(){\r\n//\r\n  },\r\n  ionViewDidEnter() {\r\n      if(User.isAdmin()){\r\n          this.page_id=this.$route.params.id??0\r\n          if(this.page_id>0){\r\n            this.itemGet()\r\n          } else {\r\n              this.page={\r\n                page_name:'',\r\n                page_title:'',\r\n                page_content:''\r\n              };\r\n          }\r\n      } else {\r\n          this.$flash('Страница для администраторов')\r\n          this.$go(\"/catalog\")\r\n      }\r\n  },\r\n  methods:{\r\n      async itemGet(){\r\n          const page_id=this.page_id\r\n          try{\r\n            this.page=await jQuery.post(this.$heap.state.hostname+'Page/itemGet',{page_id})\r\n          }catch{/** */}\r\n      },\r\n      async itemSave(){\r\n          const request={\r\n              page_name:this.page.page_name,\r\n              page_title:this.page.page_title,\r\n              page_content:this.page.page_content\r\n          }\r\n          try{\r\n            if(this.page_id>0){\r\n                request.page_id=this.page_id\r\n                await jQuery.post(this.$heap.state.hostname+'Page/itemUpdate',JSON.stringify(request))\r\n                this.$flash(\"Страница сохранена\")\r\n            } else {\r\n                this.page_id=await jQuery.post(this.$heap.state.hostname+'Page/itemCreate',JSON.stringify(request))\r\n            }\r\n          } catch{/** */}\r\n      },\r\n      async itemDelete(){\r\n          if(!confirm(`Удалить страницу \"${this.page.page_title}\"?`)){\r\n              return\r\n          }\r\n          const page_id=this.page_id\r\n          try{\r\n              await jQuery.post(this.$heap.state.hostname+'Page/itemDelete',{page_id})\r\n              this.$flash(\"Страница удалена\")\r\n              this.$go('/user/text-list')\r\n          } catch{/** */}\r\n      }\r\n  }\r\n};\r\n</script>\r\n","import { render } from \"./TextPageEdit.vue?vue&type=template&id=748f5a68\"\nimport script from \"./TextPageEdit.vue?vue&type=script&lang=js\"\nexport * from \"./TextPageEdit.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createBlock","_component_base_layout","pageTitle","pageDefaultBackLink","_createVNode","_component_ion_list","_component_ion_item","_component_ion_icon","slot","icon","$setup","bookmarkOutline","_component_ion_label","position","color","_component_ion_input","$data","page","page_title","$event","placeholder","codeOutline","page_name","_component_ckeditor","editor","page_content","config","editorConfig","_component_ion_grid","style","_component_ion_row","_component_ion_col","_component_ion_button","onClick","_cache","_ctx","$go","$options","itemDelete","itemSave","components","IonLabel","IonIcon","IonList","IonItem","IonInput","IonButton","IonGrid","IonRow","IonCol","ckeditor","CKEditor","setup","documentTextOutline","data","ClassicEditor","page_id","language","created","ionViewDidEnter","_this$$route$params$i","User","isAdmin","this","$route","params","id","itemGet","$flash","methods","jQuery","$heap","state","hostname","request","JSON","stringify","confirm","__exports__","render"],"sourceRoot":""}