{"version":3,"file":"js/620.d44966e6.js","mappings":"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","sources":["webpack://tezkel/./src/components/LedgerComp.vue","webpack://tezkel/./src/components/LedgerComp.vue?a865","webpack://tezkel/./src/views/user/CourierStatistics.vue","webpack://tezkel/./src/views/user/CourierStatistics.vue?0c1e"],"sourcesContent":["<template>\r\n  <ion-list>\r\n    <ion-item>\r\n      <ion-title>Баланс</ion-title>\r\n      <ion-text slot=\"end\" v-if=\"balance>0\" color=\"success\">{{ balance }}{{ $heap.state.currencySign }}</ion-text>\r\n      <ion-text slot=\"end\" v-else>{{ balance }}{{ $heap.state.currencySign }}</ion-text>\r\n    </ion-item>\r\n  </ion-list>\r\n\r\n  <ion-accordion-group>\r\n    <ion-accordion>\r\n      <ion-item slot=\"header\">\r\n        <ion-icon :icon=\"settingsOutline\" slot=\"start\"/>\r\n        <ion-text>Настройки</ion-text>\r\n      </ion-item>\r\n      <ion-list slot=\"content\">\r\n        <ion-item color=\"light\">\r\n          <ion-text>Начальная дата</ion-text>\r\n          <div slot=\"end\" style=\"display:grid;grid-template-columns:110px 110px;\">\r\n            <ion-input type=\"date\" v-model=\"start_at\"  @ionChange=\"listGet()\"/>\r\n            <ion-input type=\"text\" style=\"text-align:right\" color=\"medium\" v-if=\"meta.sum_start\" :value=\"`${meta.sum_start}${$heap.state.currencySign}`\" readonly />\r\n          </div>\r\n        </ion-item>\r\n        <ion-item color=\"light\">\r\n          <ion-text>Обороты</ion-text>\r\n          <div slot=\"end\" style=\"display:grid;grid-template-columns:110px 110px;\">\r\n            <ion-input type=\"text\" style=\"text-align:right\" color=\"medium\" v-if=\"meta.sum_debit\" :value=\"`+${meta.sum_debit}${$heap.state.currencySign}`\" readonly />\r\n            <ion-input type=\"text\" style=\"text-align:right\" color=\"medium\" v-if=\"meta.sum_credit\" :value=\"`-${meta.sum_credit}${$heap.state.currencySign}`\" readonly />\r\n          </div>\r\n        </ion-item>\r\n        <ion-item color=\"light\">\r\n          <ion-text>Конечная дата</ion-text>\r\n          <div slot=\"end\" style=\"display:grid;grid-template-columns:110px 110px;\">\r\n            <ion-input type=\"date\" v-model=\"finish_at\" />\r\n            <ion-input type=\"text\" style=\"text-align:right\" color=\"medium\" v-if=\"meta.sum_finish\" :value=\"`${meta.sum_finish}${$heap.state.currencySign}`\" readonly />\r\n          </div>\r\n        </ion-item>\r\n      </ion-list>\r\n    </ion-accordion>\r\n  </ion-accordion-group>\r\n\r\n  <ion-list v-if=\"ledger==null\">\r\n    <ion-item v-for=\"i in [1,2,3]\" :key=\"i\">\r\n        <ion-text slot=\"start\"><ion-skeleton-text animated style=\"width:50px\" /></ion-text>\r\n        <ion-label><ion-skeleton-text animated style=\"width:100%\" /></ion-label>\r\n        <ion-label slot=\"end\" color=\"success\"><ion-skeleton-text animated style=\"width:50px\" /></ion-label>\r\n    </ion-item>\r\n  </ion-list>\r\n  <ion-list v-else-if=\"ledger.length>0\">\r\n    <ion-item v-for=\"trans in ledgerCalc\" :key=\"trans.trans_id\">\r\n        <ion-text slot=\"start\">{{trans.date}}</ion-text>\r\n        <ion-text>{{trans.trans_description}}</ion-text>\r\n        <ion-label slot=\"end\" v-if=\"trans.is_debit==1\" color=\"success\">{{trans.trans_amount}}</ion-label>\r\n        <ion-label slot=\"end\" v-else  color=\"danger\">{{trans.trans_amount}}</ion-label>\r\n    </ion-item>\r\n  </ion-list>\r\n  <ion-list v-else>\r\n    <ion-item>\r\n        Нет операций в данном периоде\r\n    </ion-item>\r\n  </ion-list>\r\n\r\n\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  IonIcon,\r\n  IonTitle,\r\n  IonLabel,\r\n  IonItem,\r\n  IonInput,\r\n  IonList,\r\n  IonAccordion,\r\n  IonAccordionGroup,\r\n  IonText,\r\n  IonSkeletonText,\r\n} from \"@ionic/vue\";\r\nimport { settingsOutline } from \"ionicons/icons\";\r\nimport jquery from \"jquery\";\r\n\r\nexport default {\r\n  components: {\r\n    IonIcon,\r\n    IonTitle,\r\n    IonLabel,\r\n    IonItem,\r\n    IonInput,\r\n    IonList,\r\n    IonAccordion,\r\n    IonAccordionGroup,\r\n    IonText,\r\n    IonSkeletonText,\r\n  },\r\n  props:['account'],\r\n  setup(){\r\n    return {\r\n        settingsOutline\r\n    }\r\n  },\r\n  data() {\r\n    const today = new Date();\r\n    const firstDay = new Date(Date.parse(`${today.getFullYear()}-${today.getMonth()+1}-1`));\r\n    return {\r\n      balance: '-',\r\n      start_at: firstDay.toISOString().slice(0, 10),\r\n      finish_at: today.toISOString().slice(0, 10),\r\n      ledger:null,\r\n      meta:{},\r\n      today:today,\r\n    };\r\n  },\r\n  computed:{\r\n    ledgerCalc(){\r\n        if( this.ledger==null ){\r\n            return null;\r\n        }\r\n        let lcalc=[];\r\n        for(let trans of this.ledger){\r\n            trans.date=this.toLocDate(trans.trans_date)\r\n            lcalc.push(trans)\r\n        }\r\n        return lcalc\r\n    }\r\n  },\r\n  methods: {\r\n    async listGet() {\r\n      try {\r\n        const request={\r\n            start_at:this.start_at,\r\n            finish_at:this.finish_at,\r\n            account:this.account,\r\n        }\r\n        const response= await jquery.post(`${this.$heap.state.hostname}Transaction/listGet`,request);\r\n        this.ledger=response.ledger\r\n        this.meta=response.meta\r\n        if( this.finish_at==this.today.toISOString().slice(0, 10) ){\r\n            this.balance=response.meta.sum_finish;\r\n        }\r\n      } catch (err) {\r\n        const exception = err.responseJSON;\r\n        const exception_code = exception.messages.error;\r\n        switch (exception_code) {\r\n          case \"no_account\":\r\n            this.$flash(\"Ошибка получения выписки\");\r\n            break;\r\n          case \"large_interval\":\r\n            this.$flash(\"Период должен быть не больше 3 месяцев\");\r\n            break;\r\n        }\r\n        this.ledger=[];\r\n        return false;\r\n      }\r\n    },\r\n    toLocDate( iso ){\r\n        const event = new Date(Date.parse(iso));\r\n        const options = { month: 'short', day: 'numeric' };\r\n\r\n        return event.toLocaleDateString(undefined, options);\r\n    },\r\n\r\n  },\r\n  mounted() {\r\n    this.listGet();\r\n  },\r\n};\r\n</script>","import { render } from \"./LedgerComp.vue?vue&type=template&id=6f5ef750\"\nimport script from \"./LedgerComp.vue?vue&type=script&lang=js\"\nexport * from \"./LedgerComp.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"W:\\\\Ionic\\\\Tezkel\\\\blank\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n    <base-layout pageTitle=\"Статистика курьера\" pageDefaultBackLink=\"/user\">\n        <ion-segment swipe-gesture=\"true\" v-model=\"activeTab\" @ionChange=\"activeTabChanged($event)\">\n            <ion-segment-button value=\"ledger\" >\n                Баланс\n            </ion-segment-button>\n        </ion-segment>\n        <ledger-comp account=\"courier\" v-if=\"activeTab=='ledger'\"/>\n    </base-layout>\n</template>\n\n<script>\nimport {\n    IonSegment,\n    IonSegmentButton,\n}                   from '@ionic/vue';\n\nimport {\n      receiptOutline\n}                   from \"ionicons/icons\";\n\nimport ledgerComp from \"@/components/LedgerComp.vue\";\nexport default {\n    components:{\n    IonSegment,\n    IonSegmentButton,\n    ledgerComp,\n    },\n    setup(){\n        return {\n            receiptOutline,\n        }\n    },\n    data(){\n        return {\n            activeTab:'ledger'\n        }\n    },\n    methods:{\n        async activeTabChanged(){\n            //\n        },\n    },\n}\n</script>","import { render } from \"./CourierStatistics.vue?vue&type=template&id=30fbc99c\"\nimport script from \"./CourierStatistics.vue?vue&type=script&lang=js\"\nexport * from \"./CourierStatistics.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"W:\\\\Ionic\\\\Tezkel\\\\blank\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["slot","style","_createVNode","_component_ion_list","_component_ion_item","_component_ion_title","$data","_createBlock","_component_ion_text","color","_toDisplayString","_ctx","state","currencySign","_component_ion_accordion_group","_component_ion_accordion","_component_ion_icon","icon","$setup","_createElementVNode","_component_ion_input","type","$event","onIonChange","$options","sum_start","value","readonly","sum_debit","sum_credit","sum_finish","key","_createElementBlock","_Fragment","_renderList","i","_component_ion_skeleton_text","animated","_component_ion_label","length","trans","trans_id","date","trans_description","is_debit","trans_amount","components","IonIcon","IonTitle","IonLabel","IonItem","IonInput","IonList","IonAccordion","IonAccordionGroup","IonText","IonSkeletonText","props","setup","settingsOutline","data","today","Date","firstDay","parse","getFullYear","getMonth","balance","start_at","toISOString","slice","finish_at","ledger","meta","computed","ledgerCalc","this","lcalc","toLocDate","trans_date","push","methods","async","request","account","response","jquery","$heap","hostname","err","exception","responseJSON","exception_code","messages","error","$flash","iso","event","options","month","day","toLocaleDateString","undefined","mounted","listGet","__exports__","render","_component_base_layout","pageTitle","pageDefaultBackLink","_component_ion_segment","_component_ion_segment_button","_component_ledger_comp","IonSegment","IonSegmentButton","ledgerComp","receiptOutline","activeTab"],"sourceRoot":""}