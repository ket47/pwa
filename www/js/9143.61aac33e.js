"use strict";(self["webpackChunktezkel"]=self["webpackChunktezkel"]||[]).push([[9143],{7138:function(t,e,o){t.exports=o.p+"img/tezkel_logo.f7e29fe1.svg"},9143:function(t,e,o){o.r(e),o.d(e,{default:function(){return ct}});var r=o(641),i=o(33);const s={style:{"background-color":"#1380c1","padding-bottom":"15px"}},u={class:"store-info-container"},n={class:"store-image-slider-container"},d={key:0,class:"avatar"},a=["alt","src"],c={key:1},l={key:2,class:"group-fixed-block hidden-block"},p={class:"product-container"},_={style:{margin:"0"}},g={class:"product_list_widget_grid"},m=["onClick"],h=["id"],k={class:"product_list_item_img"},f=["src"],v={class:"product-data"},I={class:"product-title"},y={class:"product-description"},b={key:0},C={class:"product-price"},w={key:0,style:{"font-weight":"bold",margin:"5px","font-size":"1.8em"}},S={key:1,style:{"font-weight":"bold",margin:"5px","font-size":"1.8em"}},L={style:{"font-weight":"bold",margin:"0","font-size":"1.5em"}},X={key:0,style:{color:"var(--ion-color-light)"}},$={key:1,style:{color:"var(--ion-color-light)"}},q={key:0},E={key:1},P={key:2},G={key:3};function x(t,e,o,x,F,W){const M=(0,r.g2)("ion-icon"),A=(0,r.g2)("ion-toolbar"),z=(0,r.g2)("image-slider-comp"),H=(0,r.g2)("ion-label"),O=(0,r.g2)("ion-segment-button"),T=(0,r.g2)("ion-segment"),B=(0,r.g2)("group-list"),K=(0,r.g2)("ion-col"),Q=(0,r.g2)("ion-img"),R=(0,r.g2)("ion-chip"),D=(0,r.g2)("ion-row"),Z=(0,r.g2)("ion-grid"),N=(0,r.g2)("swiper-slide"),V=(0,r.g2)("swiper"),j=(0,r.g2)("ion-button"),J=(0,r.g2)("router-link"),U=(0,r.g2)("ion-footer"),Y=(0,r.g2)("ion-content"),tt=(0,r.g2)("ion-page");return(0,r.uX)(),(0,r.Wv)(tt,null,{default:(0,r.k6)(()=>[(0,r.bF)(Y,{class:(0,i.C4)("store-menu-page"),scrollEvents:!0,onIonScroll:W.onScroll},{default:(0,r.k6)(()=>[(0,r.bF)(A,null,{default:(0,r.k6)(()=>[x.mainLogo?((0,r.uX)(),(0,r.Wv)(M,{key:0,class:"toolbar_svg_logo",style:{color:"white"},icon:x.mainLogo},null,8,["icon"])):(0,r.Q3)("",!0)]),_:1}),(0,r.Lk)("div",s,[(0,r.Lk)("div",u,[(0,r.Lk)("div",n,[(0,r.bF)(z,{imageList:F.storeItem.images,imgHeight:250,mode:"crop-to-fit"},null,8,["imageList"]),e[2]||(e[2]=(0,r.Lk)("div",{class:"overlay",style:{"background-image":"url(/img/store_menu_background_full.png)"}},null,-1))]),F.storeItem.avatarImage?((0,r.uX)(),(0,r.CE)("div",d,[(0,r.Lk)("img",{alt:F.storeItem.store_name,src:t.$heap.state.hostname+"image/get.php/"+F.storeItem.avatarImage+".200.200.webp"},null,8,a)])):((0,r.uX)(),(0,r.CE)("div",c,[(0,r.Lk)("h2",null,(0,i.v_)(F.storeItem.store_name),1)])),F.storeGroups?((0,r.uX)(),(0,r.CE)("div",l,[(0,r.bF)(T,{modelValue:F.groupSelectedParentId,"onUpdate:modelValue":e[0]||(e[0]=t=>F.groupSelectedParentId=t),scrollable:"",class:"groups-container"},{default:(0,r.k6)(()=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(F.storeGroups,t=>((0,r.uX)(),(0,r.Wv)(O,{key:t.group_id,value:t.group_id,onClick:e=>W.groupSelectParent(t.group_id,1),ref_for:!0,ref:"group-tab-"+t.group_id},{default:(0,r.k6)(()=>[(0,r.bF)(H,null,{default:(0,r.k6)(()=>[(0,r.eW)((0,i.v_)(t.group_name),1)]),_:2},1024)]),_:2},1032,["value","onClick"]))),128))]),_:1},8,["modelValue"])])):(0,r.Q3)("",!0),e[3]||(e[3]=(0,r.Lk)("h4",{style:{margin:"16px 16px 20px"}},[(0,r.Lk)("b",null,"Онлайн меню")],-1)),F.storeGroups?((0,r.uX)(),(0,r.Wv)(B,{key:3,groupList:F.storeGroups,onClick:t=>{W.groupSelectParent(t,!0)}},null,8,["groupList","onClick"])):(0,r.Q3)("",!0)]),(0,r.Lk)("div",p,[F.storeGroups?((0,r.uX)(),(0,r.Wv)(V,{key:0,pager:"true",initialSlide:0,speed:400,watchSlidesProgress:!1,grabCursor:!0,touchStartForcePreventDefault:!0,slidesPerView:1.1,pagination:!1,centeredSlides:!1,ref:"productListSlider",class:"product-list-slider",onSlideChange:e[1]||(e[1]=t=>W.groupSliderChanged(t)),style:(0,i.Tr)(`max-height: ${F.sliderMaxHeight}`)},{default:(0,r.k6)(()=>[(0,r.eW)((0,i.v_)(F.storeGroups)+" ",1),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(F.storeGroups,o=>((0,r.uX)(),(0,r.Wv)(N,{key:o.group_id},{default:(0,r.k6)(()=>[(0,r.bF)(Z,{class:"product-list"},{default:(0,r.k6)(()=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.children,o=>((0,r.uX)(),(0,r.Wv)(D,{key:o.group_id,ref_for:!0,ref:"group-"+o.group_id,"data-group_id":o.group_id},{default:(0,r.k6)(()=>[(0,r.bF)(K,{class:"group-title",size:"12"},{default:(0,r.k6)(()=>[(0,r.Lk)("h5",_,(0,i.v_)(o.group_name),1)]),_:2},1024),(0,r.bF)(K,{size:"12"},{default:(0,r.k6)(()=>[(0,r.Lk)("div",g,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(F.storeProducts[o.group_id],o=>((0,r.uX)(),(0,r.CE)("div",{key:o.product_id,onClick:t=>W.showProductModal(o)},[(0,r.Lk)("div",{class:(0,i.C4)(o.item_class+" product-item"),id:`product_list_item${o.product_id}`},[(0,r.Lk)("div",k,[(0,r.Lk)("img",{class:"blur-image",src:`${t.$heap.state.hostname}image/get.php/${o.image_hash}.200.200.webp`},null,8,f),(0,r.bF)(Q,{src:`${t.$heap.state.hostname}image/get.php/${o.image_hash}.200.200.webp`},null,8,["src"])]),(0,r.Lk)("div",v,[(0,r.Lk)("h4",I,(0,i.v_)(o.product_name),1),(0,r.Lk)("p",y,(0,i.v_)(o.product_description),1),o.options?((0,r.uX)(),(0,r.CE)("div",b,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.options,o=>((0,r.uX)(),(0,r.Wv)(R,{key:o.product_id,color:"primary"},{default:(0,r.k6)(()=>[(0,r.bF)(H,null,{default:(0,r.k6)(()=>[(0,r.eW)((0,i.v_)(o.product_option),1)]),_:2},1024),e[4]||(e[4]=(0,r.eW)("  ")),o.product_net_price>0?((0,r.uX)(),(0,r.Wv)(H,{key:0},{default:(0,r.k6)(()=>[(0,r.eW)((0,i.v_)(o.product_net_price)+(0,i.v_)(t.$heap.state.currencySign),1)]),_:2},1024)):o.product_final_price>0?((0,r.uX)(),(0,r.Wv)(H,{key:1},{default:(0,r.k6)(()=>[(0,r.eW)((0,i.v_)(o.product_final_price)+(0,i.v_)(t.$heap.state.currencySign),1)]),_:2},1024)):(0,r.Q3)("",!0)]),_:2,__:[4]},1024))),128))])):(0,r.Q3)("",!0),(0,r.Lk)("div",C,[(0,r.Lk)("span",null,[o.product_net_price>0?((0,r.uX)(),(0,r.CE)("b",w,(0,i.v_)(o.product_net_price),1)):((0,r.uX)(),(0,r.CE)("b",S,(0,i.v_)(o.product_final_price),1)),(0,r.Lk)("b",L,(0,i.v_)(t.$heap.state.currencySign),1)]),"порция"==o.product_unit?((0,r.uX)(),(0,r.CE)("span",X," /"+(0,i.v_)(o.weight_in_gramms)+"г ",1)):((0,r.uX)(),(0,r.CE)("span",$,[e[5]||(e[5]=(0,r.eW)(" / ")),"порция"==o.product_unit?((0,r.uX)(),(0,r.CE)("span",q,(0,i.v_)(o.weight_in_gramms)+"г",1)):"порция мл"==o.product_unit?((0,r.uX)(),(0,r.CE)("span",E,(0,i.v_)(o.weight_in_gramms)+"мл",1)):"кг"==o.product_unit&&o.product_quantity_min<1?((0,r.uX)(),(0,r.CE)("span",P,(0,i.v_)(o.unit_in_gramms)+"г",1)):((0,r.uX)(),(0,r.CE)("span",G,(0,i.v_)(o.product_unit),1))]))])])],10,h)],8,m))),128))])]),_:2},1024)]),_:2},1032,["data-group_id"]))),128))]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["style"])):(0,r.Q3)("",!0)])]),(0,r.bF)(U,{style:{"background-image":"url(/img/bg3.ce15f59d.png)"}},{default:(0,r.k6)(()=>[e[7]||(e[7]=(0,r.Lk)("div",null,[(0,r.Lk)("h6",null,"НУЖНА ДОСТАВКА?"),(0,r.Lk)("h4",null,"ВЫБИРАЙ TEZKEL")],-1)),(0,r.Lk)("div",null,[(0,r.bF)(J,{to:`/catalog/store-${F.storeId}`},{default:(0,r.k6)(()=>[(0,r.bF)(j,null,{default:(0,r.k6)(()=>e[6]||(e[6]=[(0,r.eW)("Перейти в приложение")])),_:1,__:[6]})]),_:1},8,["to"])])]),_:1,__:[7]})]),_:1},8,["onIonScroll"])]),_:1})}o(4114);var F=o(5634),W=o(5680),M=o(8935),A=o(5480),z=o(7138),H=o(5648),O=o(9163),T=o(2311),B=o.n(T),K=o(5538),Q=o(3201);const R=["alt","src"],D={key:0},Z={class:"product-price ion-text-right"},N={key:0,style:{"font-weight":"bold",margin:"5px","font-size":"1.8em"}},V={key:1,style:{"font-weight":"bold",margin:"5px","font-size":"1.8em"}},j={style:{"font-weight":"bold",margin:"0","font-size":"1.5em"}},J={key:0,style:{color:"var(--ion-color-medium)"}},U={key:1,style:{color:"var(--ion-color-medium)"}},Y={key:0},tt={key:1},et={key:2},ot={key:3};function rt(t,e,o,s,u,n){const d=(0,r.g2)("ion-card-title"),a=(0,r.g2)("ion-card-header"),c=(0,r.g2)("ion-label"),l=(0,r.g2)("ion-chip"),p=(0,r.g2)("ion-card-content"),_=(0,r.g2)("ion-card"),g=(0,r.g2)("ion-icon"),m=(0,r.g2)("ion-button");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.Lk)("div",{class:(0,i.C4)(n.item_class)},[(0,r.bF)(_,{class:"ion-text-center"},{default:(0,r.k6)(()=>[(0,r.Lk)("img",{class:"product_item_img",alt:o.productItem.product_name,src:`${t.$heap.state.hostname}image/get.php/${o.productItem.image_hash}.380.380.webp`},null,8,R),(0,r.bF)(a,{class:"ion-text-left"},{default:(0,r.k6)(()=>[(0,r.bF)(d,null,{default:(0,r.k6)(()=>[(0,r.eW)((0,i.v_)(o.productItem.product_name),1)]),_:1})]),_:1}),(0,r.bF)(p,{class:"ion-text-left"},{default:(0,r.k6)(()=>[(0,r.eW)((0,i.v_)(o.productItem.product_description)+" ",1),(0,r.Lk)("div",null,[o.productItem.options?((0,r.uX)(),(0,r.CE)("div",D,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.productItem.options,o=>((0,r.uX)(),(0,r.Wv)(l,{key:o.product_id,color:"primary"},{default:(0,r.k6)(()=>[(0,r.bF)(c,null,{default:(0,r.k6)(()=>[(0,r.eW)((0,i.v_)(o.product_option),1)]),_:2},1024),e[1]||(e[1]=(0,r.eW)(" ")),o.product_final_price>0?((0,r.uX)(),(0,r.Wv)(c,{key:0},{default:(0,r.k6)(()=>[(0,r.eW)((0,i.v_)(o.product_final_price)+(0,i.v_)(t.$heap.state.currencySign),1)]),_:2},1024)):(0,r.Q3)("",!0)]),_:2,__:[1]},1024))),128))])):(0,r.Q3)("",!0),(0,r.Lk)("div",Z,[(0,r.Lk)("span",null,[o.productItem.product_net_price>0?((0,r.uX)(),(0,r.CE)("b",N,(0,i.v_)(o.productItem.product_net_price),1)):((0,r.uX)(),(0,r.CE)("b",V,(0,i.v_)(o.productItem.product_final_price),1)),(0,r.Lk)("b",j,(0,i.v_)(t.$heap.state.currencySign),1)]),"порция"==o.productItem.product_unit?((0,r.uX)(),(0,r.CE)("span",J," / "+(0,i.v_)(o.productItem.weight_in_gramms)+"г ",1)):((0,r.uX)(),(0,r.CE)("span",U,[e[2]||(e[2]=(0,r.eW)(" / ")),"порция"==o.productItem.product_unit?((0,r.uX)(),(0,r.CE)("span",Y,(0,i.v_)(o.productItem.weight_in_gramms)+"г",1)):"порция мл"==o.productItem.product_unit?((0,r.uX)(),(0,r.CE)("span",tt,(0,i.v_)(o.productItem.weight_in_gramms)+"мл",1)):"кг"==o.productItem.product_unit&&o.productItem.product_quantity_min<1?((0,r.uX)(),(0,r.CE)("span",et,(0,i.v_)(o.productItem.unit_in_gramms)+"г",1)):((0,r.uX)(),(0,r.CE)("span",ot,(0,i.v_)(o.productItem.product_unit),1))]))])])]),_:1})]),_:1})],2),(0,r.bF)(m,{fill:"clear",expand:"block",onClick:e[0]||(e[0]=t=>{n.closeModal()}),color:"light",size:"large"},{default:(0,r.k6)(()=>[(0,r.bF)(g,{slot:"icon-only",icon:s.closeOutline},null,8,["icon"])]),_:1})],64)}var it={components:{IonIcon:F.iq,IonChip:F.ZB,IonCard:F.b_,IonCardContent:F.I9,IonCardTitle:F.tN,IonCardHeader:F.ME,IonLabel:F.he,IonButton:F.Jm},props:["productItem"],setup(){return{layersOutline:A.z8i,closeOutline:A.xfX}},computed:{item_class(){return this.productItem.deleted_at?"deleted":this.productItem.product_final_price!=this.productItem.product_price?"promo":1==this.productItem.is_disabled?"disabled":1!=this.productItem.is_counted||this.productItem.product_quantity-this.productItem.product_quantity_reserved>0?"":"absent"},discount(){return Math.round(this.productItem.product_final_price/this.productItem.product_price*100-100)},weight_in_gramms(){return 1e3*this.productItem.product_weight},unit_in_gramms(){return Math.round(1e3*this.productItem.product_quantity_min)},product_price(){return"кг"==this.productItem.product_unit&&this.productItem.product_quantity_min<1?Math.round(this.productItem.product_price*this.productItem.product_quantity_min):this.productItem.product_price},product_final_price(){return"кг"==this.productItem.product_unit&&this.productItem.product_quantity_min<1?Math.round(this.productItem.product_final_price*this.productItem.product_quantity_min):this.productItem.product_final_price}},methods:{closeModal(){F.OZ.dismiss()}}},st=o(6262);const ut=(0,st.A)(it,[["render",rt],["__scopeId","data-v-088db628"]]);var nt=ut,dt={components:{IonPage:F.AO,IonToolbar:F.ai,IonContent:F.W9,IonFooter:F.M0,IonCol:F.hU,IonIcon:F.iq,IonImg:F.KW,IonRow:F.ln,IonGrid:F.lO,ImageSliderComp:H.A,IonLabel:F.he,IonSegmentButton:F.eP,IonSegment:F.Gp,IonButton:F.Jm,Swiper:M.R,SwiperSlide:M.q,GroupList:O.A,IonChip:F.ZB},setup(){return{mainLogo:z,search:A.$P,settingsOutline:A.s8q,rocketOutline:A.hGQ,compassOutline:A.Hy9,slideModules:[W.Ij]}},data(){return{storeId:this.$route.params.id,query:this.$route.query,searchRequest:"",storeItem:[],storeProducts:{},storeGroups:null,groupSelectedParentId:-1,offsetModificator:80,sliderMaxHeight:500,can_reload_at:0}},computed:{weight_in_gramms(){return 1e3*this.productItem.product_weight},unit_in_gramms(){return Math.round(1e3*this.productItem.product_quantity_min)}},methods:{async itemGet(){const t=Date.now();if(!(this.can_reload_at>t)){this.can_reload_at=t+1e4;try{const t=await B().post(`${K.A.state.hostname}Store/itemGet`,{store_id:this.storeId,distance_include:1});this.storeItem=this.itemPrepare(t),this.storeId=t.store_id,this.groupTreeGet({store_id:this.storeId}),K.A.commit("setCurrentStore",this.storeItem)}catch(r){var e,o;const t=null===r||void 0===r||null===(e=r.responseJSON)||void 0===e||null===(o=e.messages)||void 0===o?void 0:o.error;switch(t){case"notfound":this.$flash("Продавец не найден"),this.$go("/catalog");break}return!1}}},itemPrepare(t){t.member_of_groups.group_names&&(t.store_group_names=t.member_of_groups.group_names);try{t.deliveryTime=Q.A.deliveryTimeCalculate(t.locations[0].distance,t.store_time_preparation)}catch{}return t.avatarImage="",t.avatar.length>0&&(t.avatarImage=t.avatar[0].image_hash),t},async productListGet(t={}){if(t.store_id=this.storeId,t.is_active=1,t.name_query&&""==t.name_query)return void this.groupTreeGet({store_id:this.storeId});t.limit=200;let e={};try{e=await B().post(K.A.state.hostname+"Product/listGet",t)}catch(r){}this.productListPrepare(e.product_list),this.groupOtherAdd();let o=this;setTimeout(()=>{o.groupSelect()},0)},productListPrepare(t){for(var e of(this.storeProducts={},t))this.storeGroups&&(this.storeProducts[e.group_id??0]||(this.storeProducts[e.group_id??0]=[])),e.item_class="",e.deleted_at&&(e.item_class="deleted"),1==e.is_disabled&&(e.item_class="disabled"),1!=e.is_counted||e.product_quantity-e.product_quantity_reserved>0||(e.item_class="absent"),e.weight_in_gramms=1e3*e.product_weight,e.unit_in_gramms=Math.round(1e3*e.product_quantity_min),this.storeProducts[e.group_id??0].push(e)},async groupTreeGet(t){try{const e=await B().get(`${K.A.state.hostname}Product/groupTreeGet`,{store_id:t.store_id});let o=[];for(let t in e)o[e[t].order]=e[t];this.storeGroups=o,this.productListGet()}catch(e){}},groupOtherAdd(){this.storeProducts[0]&&this.storeGroups.push({group_id:"other",group_name:"Другое",image_hash:"",children:{0:{group_id:0,group_name:"другое",group_parent_id:0,group_path:"",image_hash:""}}})},groupSelect(){if(this.groupSelectedParentId>-1)return;let t=this.query.parent_group_id,e=this.query.sub_group_id;if(e)t:for(let i in this.storeGroups)for(let o in this.storeGroups[i].children)if(o==e){t=i;break t}var o;t||(t=null===(o=this.storeGroups[0])||void 0===o?void 0:o.group_id);const r=!1;this.groupSelectParent(t,r)},groupSelectParent(t){if(this.groupSelectedParentId==t)return;if(this.groupSelectedParentId=t,void 0==this.$refs.productListSlider)return;const e=this.$refs.productListSlider.$el.swiper,o=this.storeGroups.findIndex(e=>e.group_id==t);o>=0&&(e.slideTo(o,100,!1),this.groupSliderAdjustHeight())},groupSliderChanged(t){const e=t.activeIndex,o=this.storeGroups[e].group_id;this.groupSelectParent(o,1)},groupSliderAdjustHeight(){var t;const e=null===(t=this.$refs.productListSlider.$el.querySelector(".swiper-slide-active"))||void 0===t?void 0:t.scrollHeight;this.$refs.productListSlider.$el.style.maxHeight=e>0?e+"px":""},onScroll(t){var e;const o=null===(e=document.querySelector("#hcat_widget_grid"))||void 0===e?void 0:e.getBoundingClientRect().top;o<0?document.querySelector(".group-fixed-block")&&(document.querySelector(".group-fixed-block").className="group-fixed-block"):document.querySelector(".group-fixed-block")&&(document.querySelector(".group-fixed-block").className="group-fixed-block hidden-block");var r=document.querySelectorAll(".swiper-slide-active .product-list ion-row");for(var i of r)if(i.getBoundingClientRect().top-this.offsetModificator<=window.innerHeight-window.innerHeight/4&&i.getBoundingClientRect().bottom+this.offsetModificator>=window.innerHeight-window.innerHeight/4&&i.dataset.group_id)break},async showProductModal(t){const e=await F.OZ.create({component:nt,id:"product-modal",componentProps:{productItem:t},handleBehavior:"cycle",canDissmiss:!0});e.present(),this.$topic.on("dismissModal",()=>e.dismiss());const o=await e.onDidDismiss();this.$emit("react",o.data)}},mounted(){this.query=this.$route.query,this.itemGet()},watch:{$route(t){this.storeId=t.params.id}}};const at=(0,st.A)(dt,[["render",x]]);var ct=at}}]);
//# sourceMappingURL=9143.61aac33e.js.map