{"version":3,"file":"js/41.e0560bc6.js","mappings":"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","sources":["webpack://tezkel/./src/scripts/Utils.js","webpack://tezkel/./src/components/ItemPicker.vue","webpack://tezkel/./src/components/ItemPicker.vue?9ba5","webpack://tezkel/./src/views/admin/TransactionEdit.vue","webpack://tezkel/./src/views/admin/TransactionEdit.vue?5133"],"sourcesContent":["import heap from '@/heap';\nconst Utils={\n    deliveryCalculate(Store){\n        if( !Store.locations || !Store.locations[0] || !Store.locations[0].distance){\n            return null;\n        }\n        const distance=Store.locations[0].distance;\n        const preparation=Store.store_time_preparation||0;\n        return Utils.deliveryTimeCalculate(distance,preparation);\n    },\n    deliveryTimeCalculate(distance,preparation){\n        preparation=parseInt(preparation??heap.getters.settings.delivery.timePreparationDefault)\n        const delta=parseInt(heap.getters.settings.delivery.timeDelta)\n        const speed=parseInt(heap.getters.settings.delivery.speed)\n        const time=Math.round(distance/speed*60/5)*5+preparation\n        const timeMin=time>delta?time-delta:time\n        const timeMax=timeMin+delta\n        return {time,timeMin,timeMax}\n    },\n    render(template,context){\n        for(let i in context){\n            template=template.replace(`{{${i}}}`,context[i])\n        }\n        template=template.replace(/{{\\.}}/,'-')\n        return template\n    }\n  };\n  export default Utils;","<style scoped>\r\n\r\n</style>\r\n<template>\r\n<div class=\"ion-page\">\r\n  <ion-header>\r\n      <ion-toolbar color=\"secondary\">\r\n          <ion-title>Выбрать {{itemTypeName}}</ion-title>\r\n          <ion-icon :icon=\"closeOutline\" @click=\"closeModal();\" slot=\"end\" size=\"large\"></ion-icon>\r\n      </ion-toolbar>\r\n  </ion-header>\r\n  <ion-content>\r\n    <ion-searchbar v-if=\"itemTypeLabel!='acc'\" v-model=\"query\" placeholder=\"поиск\" :debounce=\"100\" @ionChange=\"listGet()\" />\r\n    <ion-list v-if=\"!itemList\">\r\n        <ion-item v-for=\"i in [0,1,2,3,4,5,6,7,8,9]\" :key=\"i\" button detail>\r\n            <ion-skeleton-text style=\"height:35px;width:40px\" animated/>\r\n             <ion-skeleton-text style=\"width:100%\" animated/>\r\n        </ion-item>\r\n    </ion-list>\r\n    <ion-list v-else-if=\"itemList?.length\">\r\n        <ion-item v-for=\"item in itemList\" :key=\"item.id\" button detail @click=\"itemPick(item)\">\r\n            <ion-avatar slot=\"start\">\r\n                <ion-img v-if=\"item.image_hash\" :src=\"`${$heap.state.hostname}image/get.php/${item.image_hash}.50.50.webp`\"/>\r\n            </ion-avatar>\r\n            {{item.name}}\r\n        </ion-item>\r\n    </ion-list>\r\n    <ion-list v-else>\r\n        <ion-item>\r\n            Ничего не найдено\r\n        </ion-item>\r\n    </ion-list>\r\n  </ion-content>\r\n</div>\r\n</template>\r\n<script>\r\nimport \r\n{\r\n  closeOutline\r\n}                         from 'ionicons/icons';\r\nimport {\r\n    modalController,\r\n    IonContent,\r\n    IonHeader,\r\n    IonToolbar,\r\n    IonTitle,\r\n    IonIcon,\r\n    IonImg,\r\n    IonList,\r\n    IonItem,\r\n    IonSearchbar,\r\n    IonSkeletonText,\r\n    IonAvatar,\r\n}                         from \"@ionic/vue\";\r\nimport jQuery             from 'jquery'\r\n\r\nexport default {\r\n    props:['itemType'],\r\n    components:{\r\n        IonContent,\r\n        IonHeader,\r\n        IonToolbar,\r\n        IonTitle,\r\n        IonIcon,\r\n        IonImg,\r\n        IonList,\r\n        IonItem,\r\n        IonSearchbar,\r\n        IonSkeletonText,\r\n        IonAvatar,\r\n    },\r\n    setup(){\r\n        return {closeOutline}\r\n    },\r\n    data(){\r\n        const itemTypeLabel=this.itemType?this.itemType:'order'\r\n        return {\r\n            query:null,\r\n            itemList:null,\r\n            itemTypeLabel,\r\n            itemTypeName:''\r\n        }\r\n    },\r\n    mounted(){\r\n        this.listGet()\r\n    },\r\n    methods:{\r\n        async listGet(){\r\n            if( this.itemTypeLabel=='order' ){\r\n                this.itemTypeName='Заказ'\r\n                this.ordersGet()\r\n            } else\r\n            if( this.itemTypeLabel=='store' ){\r\n                this.itemTypeName='Продавец'\r\n                this.storesGet()\r\n            } else\r\n            if( this.itemTypeLabel=='courier' ){\r\n                this.itemTypeName='Курьер'\r\n                this.couriersGet()\r\n            } else \r\n            if( this.itemTypeLabel=='acc' ){\r\n                this.itemTypeName='Счет'\r\n                this.accountsGet()\r\n            } else {\r\n                this.$flash('unknown item type '+this.itemTypeLabel)\r\n            }\r\n        },\r\n        async storesGet(){\r\n            const request={\r\n                name_query:this.query,\r\n                name_query_fields:'store_name',\r\n                limit:10\r\n            }\r\n            try{\r\n                let result=await jQuery.post(`${this.$heap.state.hostname}Store/listGet`,request)\r\n                this.itemList=result.map(item=>{\r\n                    item.name=`продавец ${item.store_name}`;\r\n                    item.id=item.store_id\r\n                    return item\r\n                    })\r\n            }catch{/** */}\r\n        },\r\n        async couriersGet(){\r\n            const request={\r\n                name_query:this.query,\r\n                name_query_fields:'user_name,user_phone',\r\n                limit:10\r\n            }\r\n            try{\r\n                let result=await jQuery.post(`${this.$heap.state.hostname}Courier/listGet`,request)\r\n                this.itemList=result.map(item=>{\r\n                    item.name=`курьер ${item.user_name} ${item.user_phone}`;\r\n                    item.id=item.courier_id\r\n                    item.image_hash=item.courier_photo_image_hash\r\n                    return item\r\n                    })\r\n            }catch{/** */}\r\n        },\r\n        async ordersGet(){\r\n            const request={\r\n                name_query:this.query,\r\n                name_query_fields:'store_name,order_id,user_name',\r\n                limit:10\r\n            }\r\n            try{\r\n                let result=await jQuery.post(`${this.$heap.state.hostname}Order/listGet`,request)\r\n                this.itemList=result.map(item=>{\r\n                    item.name=`заказ#${item.order_id} ${item.store_name} > ${item.user_name}`;\r\n                    item.id=item.order_id\r\n                    return item\r\n                    })\r\n            }catch{/** */}\r\n        },\r\n        async accountsGet(){\r\n            const request={\r\n                group_table:'transaction_account_list'\r\n            }\r\n            try{\r\n                let result=await jQuery.post(`${this.$heap.state.hostname}Admin/GroupManager/listGet`,request)\r\n                this.itemList=result.map(item=>{\r\n                    item.name=`${item.group_name}`;\r\n                    item.type=item.group_type\r\n                    return item\r\n                    })\r\n            }catch{/** */}\r\n        },\r\n        itemPick(item){\r\n            modalController.dismiss(item);\r\n        },\r\n        closeModal(){\r\n            modalController.dismiss();\r\n        }\r\n    }\r\n}\r\n</script>","import { render } from \"./ItemPicker.vue?vue&type=template&id=747b8bbc\"\nimport script from \"./ItemPicker.vue?vue&type=script&lang=js\"\nexport * from \"./ItemPicker.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"W:\\\\Ionic\\\\Tezkel\\\\blank\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n    <base-layout pageDefaultBackLink=\"/user\" page-title=\"Редактирование проводки\">    \r\n        <ion-list v-if=\"transaction\">\r\n            <ion-item>\r\n                <ion-label position=\"floating\">Дата</ion-label>\r\n                <ion-input v-model=\"transaction.trans_date\" placeholder=\"дата\" type=\"date\"></ion-input>\r\n            </ion-item>\r\n            <ion-item>\r\n                <ion-label position=\"floating\">Тип проводки</ion-label>\r\n                <ion-select interface=\"popover\" placeholder=\"Выберите тип проводки\" v-model=\"transaction.trans_role\" required @ionChange=\"itemUpdateRole(1)\">\r\n                    <ion-select-option v-for=\"trans in transTypes\" :key=\"trans.trans_role\" :value=\"trans.trans_role\">{{trans.trans_name}}</ion-select-option>\r\n                </ion-select>\r\n            </ion-item>\r\n            <ion-item lines=\"none\">\r\n                <ion-label position=\"stacked\">Родительские элементы</ion-label>\r\n                <ion-text>\r\n                    <ion-chip v-for=\"(tagLabel,tag) in tagDict\" :key=\"tag\" color=\"primary\">#{{tagLabel}} <ion-icon v-if=\"tag.indexOf('acc')==-1\" :src=\"closeCircle\" @click=\"tagDictRemove(tag)\"></ion-icon></ion-chip>\r\n                </ion-text>\r\n            </ion-item>\r\n            <ion-item>\r\n                <ion-text>\r\n                    <ion-chip v-for=\"tagHolder in tagMissingNames\" :key=\"tagHolder\" @click=\"tagDictPick(tagHolder)\" color=\"medium\">\r\n                        <ion-icon :src=\"addOutline\"/><ion-label>Добавить #{{tagHolderNames[tagHolder]}}</ion-label>\r\n                    </ion-chip>\r\n                </ion-text>\r\n            </ion-item>\r\n            <ion-item>\r\n                <ion-label position=\"floating\">Сумма</ion-label>\r\n                <ion-input v-model=\"transaction.trans_amount\" placeholder=\"сумма\" inputmode=\"decimal\" autocomplete=\"transaction-amount\" min=\"1\"></ion-input>\r\n            </ion-item>\r\n            <ion-item>\r\n                <ion-label position=\"floating\">Комментарий</ion-label>\r\n                <ion-textarea v-model=\"transaction.trans_description\"></ion-textarea>\r\n            </ion-item>\r\n            <ion-item lines=\"full\">\r\n                <ion-label>Отключена</ion-label>\r\n                <ion-toggle v-model=\"transaction.is_disabled\" />\r\n            </ion-item>\r\n            <ion-item lines=\"none\">\r\n                <ion-note v-if=\"transaction.created_at\">\r\n                Создано {{transaction.created_user_name}} {{transaction.created_at}}\r\n                </ion-note>\r\n                <ion-note v-if=\"transaction.created_at\">\r\n                Изменено {{transaction.updated_user_name}} {{transaction.updated_at}}\r\n                </ion-note>\r\n            </ion-item>\r\n        </ion-list>\r\n        <ion-grid v-if=\"transaction\">\r\n            <ion-row>\r\n                <ion-col><ion-button color=\"medium\" @click=\"itemDelete()\" expand=\"block\">Удалить</ion-button></ion-col>\r\n                <ion-col><ion-button color=\"primary\" @click=\"itemSave()\" expand=\"block\">Сохранить</ion-button></ion-col>\r\n            </ion-row>\r\n        </ion-grid>\r\n    </base-layout>\r\n</template>\r\n<script>\r\nimport {\r\n  IonInput,\r\n  IonIcon,\r\n  IonList,\r\n  IonItem,\r\n  IonToggle,\r\n  IonLabel,\r\n  IonSelect,\r\n  IonSelectOption,\r\n  IonTextarea,\r\n  IonButton,\r\n  IonGrid,\r\n  IonRow,\r\n  IonCol,\r\n  IonNote,\r\n  IonChip,\r\n  IonText,\r\n  modalController,\r\n}                          from '@ionic/vue';\r\nimport {\r\n    trashOutline,\r\n    searchOutline,\r\n    addOutline,\r\n    closeCircle,\r\n}                          from 'ionicons/icons'\r\nimport jquery              from 'jquery'\r\nimport User                from '@/scripts/User.js'\r\nimport Utils               from '@/scripts/Utils.js'\r\nimport ItemPicker          from '@/components/ItemPicker.vue'\r\n\r\nconst transTypes=[\r\n    {\r\n        'trans_role':'profit->site',\r\n        'holder':['order','store','courier'],\r\n        'trans_name':'Сайт Доход от доставки',\r\n        'trans_description':'Доход от доставки. Заказ №{{order_id}}',\r\n    },\r\n    {\r\n        'trans_role':'site->profit',\r\n        'holder':[],\r\n        'trans_name':'Сайт Списание месячной прибыли',\r\n        'trans_description':'Списание месячной прибыли',\r\n    },\r\n    {\r\n        'trans_role':'site->supplier',\r\n        'holder':['store'],\r\n        'trans_name':'Продавец Выплата',\r\n        'trans_description':'Выплата по договору за выполненные заказы',\r\n    },\r\n    {\r\n        'trans_role':'site.->supplier',\r\n        'holder':['order','store'],\r\n        'trans_name':'Продавец Штраф',\r\n        'trans_description':'Средства взимаемые с Продавца для воврата оплаты Покупателю. Заказ №{{order_id}}',\r\n    },\r\n    {\r\n        'trans_role':'supplier->site',\r\n        'holder':['order','store'],\r\n        'trans_name':'Продавец Отгрузка заказа',\r\n        'trans_description':'Стоимость товара, отгруженного Покупателю. Заказ №{{order_id}}',\r\n    },\r\n    {\r\n        'trans_role':'profit->supplier',\r\n        'holder':['order','store'],\r\n        'trans_name':'Продавец Комиссия сайта',\r\n        'trans_description':'Комиссия сайта за предоставленные услуги. Заказ №{{order_id}}',\r\n    },\r\n    {\r\n        'trans_role':'supplier->site',\r\n        'holder':['store'],\r\n        'trans_name':'Продавец Получение аванса',\r\n        'trans_description':'Аванс за услуги сайта',\r\n    },\r\n    {\r\n        'trans_role':'supplier->profit',\r\n        'holder':['store'],\r\n        'trans_name':'Продавец Начисление бонуса при регистрации',\r\n        'trans_description':'Начисление бонуса на услуги при регистрации на сайте',\r\n    },\r\n    {\r\n        'trans_role':'site->courier',\r\n        'holder':['courier'],\r\n        'trans_name':'Курьер Выплата',\r\n        'trans_description':'Выплата по договору за оказанные услуги',\r\n    },\r\n    {\r\n        'trans_role':'courier->profit',\r\n        'holder':['order','courier'],\r\n        'trans_name':'Курьер Начисление бонуса',\r\n        'trans_description':'Начисление бонуса за Заказ №{{order_id}}',\r\n    },\r\n    {\r\n        'trans_role':'profit->courier',\r\n        'holder':['order','courier'],\r\n        'trans_name':'Курьер Штраф',\r\n        'trans_description':'Штраф за не выполнение Заказа №{{order_id}}',\r\n    },\r\n]\r\n\r\nexport default {\r\n    components: {\r\n        IonInput,\r\n        IonIcon,\r\n        IonList,\r\n        IonItem,\r\n        IonToggle,\r\n        IonLabel,\r\n        IonSelect,\r\n        IonSelectOption,\r\n        IonTextarea,\r\n        IonButton,\r\n        IonGrid,\r\n        IonRow,\r\n        IonCol,\r\n        IonNote,\r\n        IonChip,\r\n        IonText,\r\n    },\r\n    setup(){\r\n        return {\r\n            trashOutline,\r\n            searchOutline,\r\n            addOutline,\r\n            closeCircle,\r\n            }\r\n    },\r\n    data(){\r\n        return{\r\n            transactionId: this.$route.params.id,\r\n            transaction:null,\r\n            transTypes,\r\n            tagDict:{},\r\n            tagHolderNames:{\r\n                order:'заказ',\r\n                store:'продавец',\r\n                courier:'курьер',\r\n                acc:'счет',\r\n            },\r\n            tagOptionNames:{\r\n                debit:\"(+)\",\r\n                credit:\"(-)\",\r\n            },\r\n        }\r\n    },\r\n    computed:{\r\n        tagRequired(){\r\n            return this.transTypeCurrent?.holder||[]\r\n        },\r\n        tagMissingNames(){\r\n            return this.tagRequired?.filter(holder=>!Object.keys(this.tagDict).join(':').includes(holder))||''\r\n        },\r\n        transTypeCurrent(){\r\n            return this.transTypes.find(trans_type => trans_type.trans_role==this.transaction.trans_role)||[];\r\n        }\r\n    },\r\n    created(){\r\n        const self=this\r\n        this.$topic.on('userGet',()=>{\r\n            self.init()\r\n        })\r\n        if( User.isAdmin() ){\r\n            this.init()\r\n        }\r\n    },\r\n    methods:{\r\n        init(){\r\n            if( !User.isAdmin() ){\r\n                this.$router.replace('/')\r\n            }\r\n            this.itemGet();\r\n        },\r\n        async itemGet(){\r\n            if(this.transactionId==0){\r\n                this.transaction={}\r\n                return\r\n            }\r\n            let request={\r\n                trans_id:this.transactionId\r\n            };\r\n            try{\r\n                this.transaction=await jquery.post(`${this.$heap.state.hostname}Transaction/itemGet`,request)\r\n                this.transaction.trans_date=this.transaction.trans_date?.substring(0,10)\r\n                this.transaction.is_disabled=this.transaction.is_disabled*1\r\n                this.tagDictFill(this.transaction.tags)\r\n            }\r\n            catch(err){\r\n                const exception_code=err?.responseJSON?.messages?.error;\r\n                switch(exception_code){\r\n                    case 'forbidden':\r\n                        this.$flash(\"Не достаточно прав\");\r\n                        break;\r\n                    case 'notfound':\r\n                        this.$flash(\"Проводка не найдена\");\r\n                        break;\r\n                }\r\n                return false\r\n            }\r\n        },\r\n        // async holderLabelGet(){\r\n        //     try{\r\n        //         this.transaction.trans_holder_label=''\r\n        //         if( this.transaction.trans_holder=='order' ){\r\n        //             const request={\r\n        //                 name_query:this.transaction.trans_holder_id,\r\n        //                 name_query_fields:'order_id'\r\n        //             }\r\n        //             const result=await jquery.post(`${this.$heap.state.hostname}Order/listGet`,request)\r\n        //             const item=result[0]\r\n        //             this.transaction.trans_holder_label=`заказ#${item.order_id} ${item.store_name} > ${item.user_name}`\r\n        //         }\r\n        //         if( this.transaction.trans_holder=='store' ){\r\n        //             const request={\r\n        //                 name_query:this.transaction.trans_holder_id,\r\n        //                 name_query_fields:'store_id'\r\n        //             }\r\n        //             const result=await jquery.post(`${this.$heap.state.hostname}Store/listGet`,request)\r\n        //             const item=result[0]\r\n        //             this.transaction.trans_holder_label=`продавец ${item.store_name}`\r\n        //         }\r\n        //         if( this.transaction.trans_holder=='courier' ){\r\n        //             const request={\r\n        //                 name_query:this.transaction.trans_holder_id,\r\n        //                 name_query_fields:'courier_id'\r\n        //             }\r\n        //             const result=await jquery.post(`${this.$heap.state.hostname}Courier/listGet`,request)\r\n        //             const item=result[0]\r\n        //             this.transaction.trans_holder_label=`курьер ${item.user_name} ${item.user_phone}`\r\n        //         }\r\n        //     }catch{/** */}\r\n        // },\r\n        // async holderIdPick(){\r\n        //     if(!this.transaction.trans_holder){\r\n        //         return\r\n        //     }\r\n        //     const itemType=this.transaction.trans_holder\r\n        //     const modal = await modalController.create({\r\n        //         component: ItemPicker,\r\n        //         componentProps:{itemType},\r\n        //         initialBreakpoint: 0.75,\r\n        //         breakpoints: [0.75, 1],\r\n        //         canDissmiss:true,\r\n        //     });\r\n        //     modal.present()\r\n        //     this.$topic.on('dismissModal',()=>{\r\n        //         modal.dismiss()\r\n        //     });\r\n        //     const item=await modal.onDidDismiss();\r\n        //     if(!item.data){\r\n        //         return\r\n        //     }\r\n        //     this.transaction.trans_holder_id=item.data.id\r\n        //     this.transaction.trans_holder_label=item.data.name\r\n        //     this.itemRender()\r\n        // },\r\n        validate(){\r\n            if( this.tagMissingNames.length>0 ){\r\n                this.$flash(\"Не выбраны все родительские элементы\")\r\n                return false\r\n            }\r\n            if( !(this.transaction.trans_role) ){\r\n                this.$flash(\"Тип проводки не выбран\")\r\n                return false\r\n            }\r\n            if( !(this.transaction.trans_date) ){\r\n                this.$flash(\"Дата не выбрана\")\r\n                return false\r\n            }\r\n            if( (this.transaction.trans_amount==0) ){\r\n                this.$flash(\"Сумма должна не равняться нулю\")\r\n                return false\r\n            }\r\n            return true\r\n        },\r\n        async itemSave(){\r\n            if(!this.validate()){\r\n                return;\r\n            }\r\n            const tags=Object.keys(this.tagDict??{}).join(' ')\r\n            const request={\r\n                tags,\r\n                trans_id:this.transaction.trans_id,\r\n                trans_date:this.transaction.trans_date,\r\n                trans_amount:this.transaction.trans_amount,\r\n                trans_role:this.transaction.trans_role,\r\n                trans_description:this.transaction.trans_description,\r\n                is_disabled:this.transaction.is_disabled,\r\n            }\r\n            try{\r\n                const remoteFunction=request.trans_id?'itemUpdate':'itemCreate'\r\n                await jquery.post(`${this.$heap.state.hostname}Transaction/${remoteFunction}`,JSON.stringify(request))\r\n                this.$flash(\"💾 сохранено\")\r\n                this.$router.go(-1);\r\n            }\r\n            catch(err){\r\n                const exception_code=err?.responseJSON?.messages?.error;\r\n                switch(exception_code){\r\n                    case 'forbidden':\r\n                        this.$flash(\"Не достаточно прав\");\r\n                        break;\r\n                }\r\n                this.$flash(\"Не удалось сохранить проводку\")\r\n                return false\r\n            }\r\n        },\r\n        async itemUpdateRole(){\r\n            if( !this.transTypeCurrent ){\r\n                this.$flash(\"Неверный тип проводки\")\r\n                return\r\n            }\r\n            this.tagDictTruncate()\r\n        },\r\n        itemDescriptionRender(){\r\n            if(!this.transTypeCurrent.trans_description){\r\n                return\r\n            }\r\n            const template=this.transTypeCurrent.trans_description\r\n            let context=this.transaction\r\n            for(let tag in this.tagDict){\r\n                const tag_label=this.tagDict[tag]\r\n                const tag_array=tag.split(':');\r\n                const tag_name=tag_array[0]\r\n                context[`${tag_name}_id`]=tag_array[1]//order_id,courier_id etc\r\n            }\r\n            this.transaction.trans_description=Utils.render(template,context)\r\n        },\r\n        async itemDelete(){\r\n            if(!confirm(\"Вы уверенны?\")){\r\n                return\r\n            }\r\n            try{\r\n                await jquery.post(`${this.$heap.state.hostname}Transaction/itemDelete`,{trans_id:this.transactionId})\r\n                this.$router.go(-1);\r\n            }catch{/** */}\r\n        },\r\n        async tagDictPick( itemType ){\r\n            const modal = await modalController.create({\r\n                component: ItemPicker,\r\n                componentProps:{itemType},\r\n                initialBreakpoint: 0.75,\r\n                breakpoints: [0.75, 1],\r\n                canDissmiss:true,\r\n            });\r\n            modal.present()\r\n            this.$topic.on('dismissModal',()=>{\r\n                modal.dismiss()\r\n            });\r\n            const item=await modal.onDidDismiss();\r\n            if(!item.data){\r\n                return\r\n            }\r\n            if(item.data.order_id??0){\r\n                this.tagDictAdd([`order:${item.data.order_id}`,`заказ ${item.data.order_id}`])\r\n                const order=await jquery.post(`${this.$heap.state.hostname}Order/itemGet`,{order_id:item.data.order_id})\r\n                if( this.tagRequired.includes('store') && order.order_store_id ){\r\n                    this.tagDictNameRemove('store')\r\n                    item.data.store_id=order.order_store_id\r\n                    item.data.store_name=order?.store?.store_name\r\n                }\r\n                if( this.tagRequired.includes('courier') && order.order_courier_id ){\r\n                    const courier=await jquery.post(`${this.$heap.state.hostname}Courier/itemGet`,{courier_id:order.order_courier_id})\r\n                    this.tagDictNameRemove('courier')\r\n                    item.data.courier_id=courier.courier_id\r\n                    item.data.courier_name=courier.courier_name\r\n                }\r\n            }\r\n            if(item.data.store_id??0){\r\n                this.tagDictAdd([`store:${item.data.store_id}`,`продавец ${item.data.store_name??'?'}`])\r\n            }\r\n            if(item.data.courier_id??0){\r\n                this.tagDictAdd([`courier:${item.data.courier_id}`,`курьер ${item.data.courier_name??'?'}`])\r\n            }\r\n            if(item.data.type??0){\r\n                this.tagDictAdd([`acc::${item.data.type}`,`счет ${item.data.name??'?'}`])\r\n            }\r\n        },\r\n        tagDictAdd(tag){\r\n            let dict=this.tagDict??{}\r\n            dict[tag[0]]=tag[1]\r\n            this.tagDict=dict\r\n            this.itemDescriptionRender()\r\n        },\r\n        tagDictRemove(tag){\r\n            let dict=this.tagDict??{}\r\n            dict[tag] && delete dict[tag]\r\n            const size = Object.keys(dict).length\r\n            this.tagDict=size?dict:{}\r\n            this.itemDescriptionRender()\r\n        },\r\n        tagDictNameRemove(tag_name){\r\n            let dict=this.tagDict??{}\r\n            const tag=Object.keys(dict)?.find(tag=>tag.indexOf(tag_name)>-1)\r\n            this.tagDictRemove(tag)\r\n        },\r\n        tagDictTruncate(){\r\n            this.tagDict={}\r\n            this.itemDescriptionRender()\r\n        },\r\n        tagDictFill(tags){\r\n            let dict={}\r\n            if(tags){\r\n                for(let tag of tags){\r\n                    dict[`${tag.tag_name}:${tag.tag_id}:${tag.tag_type}:${tag.tag_option}`]=`${this.tagHolderNames[tag.tag_name]} ${this.tagOptionNames[tag.tag_option]??''} ${tag.tag_label??'(?)'}`\r\n                }\r\n            }\r\n            this.tagDict=dict\r\n            this.itemDescriptionRender()\r\n        }\r\n    },\r\n}\r\n</script>","import { render } from \"./TransactionEdit.vue?vue&type=template&id=8750b54c\"\nimport script from \"./TransactionEdit.vue?vue&type=script&lang=js\"\nexport * from \"./TransactionEdit.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"W:\\\\Ionic\\\\Tezkel\\\\blank\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["Utils","deliveryCalculate","Store","locations","distance","preparation","store_time_preparation","deliveryTimeCalculate","parseInt","heap","delta","speed","time","Math","round","timeMin","timeMax","render","template","context","i","replace","class","_createElementBlock","_hoisted_1","_createVNode","_component_ion_header","_component_ion_toolbar","color","_component_ion_title","$data","_component_ion_icon","icon","$setup","onClick","$options","slot","size","_component_ion_content","_createBlock","_component_ion_searchbar","placeholder","debounce","onIonChange","length","_component_ion_list","key","_Fragment","item","_component_ion_item","id","button","detail","_component_ion_avatar","image_hash","_component_ion_img","src","_ctx","state","hostname","name","_component_ion_skeleton_text","style","animated","props","components","IonContent","IonHeader","IonToolbar","IonTitle","IonIcon","IonImg","IonList","IonItem","IonSearchbar","IonSkeletonText","IonAvatar","setup","closeOutline","data","itemTypeLabel","this","itemType","query","itemList","itemTypeName","mounted","listGet","methods","async","ordersGet","storesGet","couriersGet","accountsGet","$flash","request","name_query","name_query_fields","limit","result","jQuery","$heap","map","store_name","store_id","user_name","user_phone","courier_id","courier_photo_image_hash","order_id","group_table","group_name","type","group_type","itemPick","modalController","closeModal","__exports__","_component_base_layout","pageDefaultBackLink","_component_ion_label","position","_component_ion_input","trans_date","_component_ion_select","interface","trans_role","required","trans","_component_ion_select_option","value","trans_name","lines","_component_ion_text","tagLabel","tag","_component_ion_chip","indexOf","tagHolder","trans_amount","inputmode","autocomplete","min","_component_ion_textarea","trans_description","_component_ion_toggle","is_disabled","created_at","_component_ion_note","created_user_name","updated_user_name","updated_at","_component_ion_grid","_component_ion_row","_component_ion_col","_component_ion_button","expand","transTypes","IonInput","IonToggle","IonLabel","IonSelect","IonSelectOption","IonTextarea","IonButton","IonGrid","IonRow","IonCol","IonNote","IonChip","IonText","trashOutline","searchOutline","addOutline","closeCircle","transactionId","$route","params","transaction","tagDict","tagHolderNames","order","store","courier","acc","tagOptionNames","debit","credit","computed","tagRequired","transTypeCurrent","holder","tagMissingNames","filter","Object","keys","join","includes","find","trans_type","created","self","$topic","on","init","User","$router","itemGet","trans_id","jquery","substring","tagDictFill","tags","err","exception_code","responseJSON","messages","error","validate","remoteFunction","JSON","stringify","go","tagDictTruncate","itemDescriptionRender","tag_array","split","tag_name","confirm","modal","component","ItemPicker","componentProps","initialBreakpoint","breakpoints","canDissmiss","present","dismiss","onDidDismiss","tagDictAdd","order_store_id","tagDictNameRemove","order_courier_id","courier_name","dict","tagDictRemove","tag_id","tag_type","tag_option","tag_label"],"sourceRoot":""}