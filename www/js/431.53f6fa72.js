"use strict";(self["webpackChunktezkel"]=self["webpackChunktezkel"]||[]).push([[431],{132:function(n,t,l){l.d(t,{Z:function(){return w}});var o=l(6252);const e=["src"],i={key:0,style:{position:"fixed",top:"200px",left:"calc( 50% - 50px )"}},u=["src"];function a(n,t,l,a,r,s){const d=(0,o.up)("ion-icon"),c=(0,o.up)("ion-title"),p=(0,o.up)("ion-toolbar"),m=(0,o.up)("ion-header"),w=(0,o.up)("ion-content");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p,{color:"secondary"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{icon:a.receiptOutline,slot:"start"},null,8,["icon"]),(0,o.Wm)(c,{slot:"start"},{default:(0,o.w5)((()=>[(0,o.Uk)("Фискальный чек")])),_:1}),(0,o.Wm)(d,{icon:a.closeOutline,onClick:t[0]||(t[0]=n=>{a.closeModal()}),slot:"end",size:"large"},null,8,["icon"])])),_:1})])),_:1})])),_:1}),(0,o.Wm)(w,null,{default:(0,o.w5)((()=>[(0,o._)("iframe",{src:l.billLink,style:{width:"100%",height:"85%",border:"none"},onLoad:t[1]||(t[1]=n=>s.onLoad())},null,40,e),r.loadAnimation?((0,o.wg)(),(0,o.iD)("div",i,[(0,o._)("img",{src:a.loading},null,8,u)])):(0,o.kq)("",!0)])),_:1})],64)}var r=l(6964),s=l(659),d=l(8903),c={components:{IonTitle:r.wd,IonIcon:r.gu,IonToolbar:r.sr,IonHeader:r.Gu,IonContent:r.W2},props:["billLink"],setup(){const n=function(){r.Fy.dismiss()};return{closeModal:n,closeOutline:d.fID,receiptOutline:d.d71,loading:s}},data(){return{loadAnimation:1}},methods:{onLoad(){this.loadAnimation=0}}},p=l(3744);const m=(0,p.Z)(c,[["render",a]]);var w=m},4431:function(n,t,l){l.r(t),l.d(t,{default:function(){return w}});var o=l(6252),e=l(3577);function i(n,t,l,i,u,a){const r=(0,o.up)("ion-icon"),s=(0,o.up)("ion-row"),d=(0,o.up)("ion-col"),c=(0,o.up)("ion-grid"),p=(0,o.up)("ion-label"),m=(0,o.up)("ion-item"),w=(0,o.up)("ion-list"),f=(0,o.up)("ion-skeleton-text"),k=(0,o.up)("base-layout");return(0,o.wg)(),(0,o.j4)(k,{pageTitle:"Мои чеки",pageDefaultBackLink:"/user"},{default:(0,o.w5)((()=>{var t,l;return[(null===(t=u.invoiceList)||void 0===t?void 0:t.length)>0?((0,o.wg)(),(0,o.j4)(w,{key:0},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(u.invoiceList,(t=>((0,o.wg)(),(0,o.j4)(m,{key:t.order_id,button:"",onClick:n=>a.billOpen(null===t||void 0===t?void 0:t.invoice_link)},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{icon:i.receiptOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Фискальный чек от "+(0,e.zw)(null===t||void 0===t?void 0:t.invoice_date),1)])),_:2},1024),(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Uk)(" заказ №"+(0,e.zw)(null===t||void 0===t?void 0:t.order_id),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),(0,o.Wm)(p,{slot:"end"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,e.zw)(null===t||void 0===t?void 0:t.order_sum_total)+(0,e.zw)(n.$heap.state.currencySign),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):(0,o.kq)("",!0),0==(null===(l=u.invoiceList)||void 0===l?void 0:l.length)?((0,o.wg)(),(0,o.j4)(w,{key:1},{default:(0,o.w5)((()=>[(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Чеков нет")])),_:1})])),_:1})])),_:1})):(0,o.kq)("",!0),null==u.invoiceList?((0,o.wg)(),(0,o.j4)(w,{key:2},{default:(0,o.w5)((()=>[((0,o.wg)(),(0,o.iD)(o.HY,null,(0,o.Ko)([1,2,3],(n=>(0,o.Wm)(m,{key:n},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{style:{"background-color":"var(--ion-color-light)"}}),(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Wm)(f,{animated:"",style:{width:"100%"}})])),_:1}),(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p,{color:"primary"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{animated:"",style:{width:"100px"}})])),_:1})])),_:1})])),_:1})])),_:1})])),_:2},1024))),64))])),_:1})):(0,o.kq)("",!0)]})),_:1})}l(5306);var u=l(6964),a=l(8903),r=l(132),s=l(9755),d=l.n(s),c={components:{IonList:u.q_,IonItem:u.Ie,IonGrid:u.jY,IonRow:u.Nd,IonCol:u.wI,IonSkeletonText:u.CK,IonLabel:u.Q$,IonIcon:u.gu},setup(){return{receiptOutline:a.d71}},data(){return{invoiceList:null,isOpen:!1,billLink:""}},methods:{async listGet(){try{const n={has_invoice:"1"};this.invoiceList=await d().post(this.$heap.state.hostname+"Order/listGet",n)}catch{}},async billOpen(n){if(!n)return void this.$flash("Невозможно открыть чек");n=n.replace(/"/g,"");const t=await u.Fy.create({component:r.Z,componentProps:{billLink:n},initialBreakpoint:.85,breakpoints:[0,.85,1]}),l=function(){t.dismiss()};return this.$topic.on("dismissModal",l),t.present()}},mounted(){this.listGet()}},p=l(3744);const m=(0,p.Z)(c,[["render",i]]);var w=m},659:function(n,t,l){n.exports=l.p+"img/loading.30880178.svg"}}]);
//# sourceMappingURL=431.53f6fa72.js.map