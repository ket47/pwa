"use strict";(self["webpackChunktezkel"]=self["webpackChunktezkel"]||[]).push([[96],{2927:function(e,t,o){o.d(t,{Z:function(){return m}});var i=o(6252),r=o(3577);const s=e=>((0,i.dD)("data-v-0e00b8d4"),e=e(),(0,i.Cn)(),e),a={class:"slide-title"},n=s((()=>(0,i._)("div",{id:"hcat_widget_grid"},null,-1)));function l(e,t,o,s,l,d){const u=(0,i.up)("ion-img"),c=(0,i.up)("ion-thumbnail"),p=(0,i.up)("swiper-slide"),g=(0,i.up)("swiper");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(g,{id:"hcat_widget_grid","slides-per-view":4.5,"space-between":10},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.groupList,(t=>((0,i.wg)(),(0,i.j4)(p,{key:t.group_id,onClick:()=>e.onClick(t.group_id)},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{style:{width:"70px",height:"70px"}},{default:(0,i.w5)((()=>[t.image_hash?((0,i.wg)(),(0,i.j4)(u,{key:0,style:{"border-radius":"10px",border:"1px solid #ddd"},src:`${e.$heap.state.hostname}image/get.php/${t.image_hash}.150.150.webp`},null,8,["src"])):(0,i.kq)("",!0)])),_:2},1024),(0,i._)("div",a,(0,r.zw)(t.group_name),1)])),_:2},1032,["onClick"])))),128))])),_:1},8,["slides-per-view"]),n],64)}var d=o(5618),u=o(3181),c=(0,i.aZ)({components:{IonImg:d.Xz,IonThumbnail:d.Bs,Swiper:u.t,SwiperSlide:u.o},props:["groupList","onClick"]}),p=o(3744);const g=(0,p.Z)(c,[["render",l],["__scopeId","data-v-0e00b8d4"]]);var m=g},7526:function(e,t,o){o.d(t,{Z:function(){return h}});var i=o(6252),r=o(3577);const s={class:"blur-image"},a=["src"],n=["src"];function l(e,t,o,l,d,u){const c=(0,i.up)("swiper-slide"),p=(0,i.up)("swiper");return(0,i.wg)(),(0,i.j4)(p,{modules:l.modules,autoplay:{delay:3e3,disableOnInteraction:!1},loop:!0,effect:"fade",style:(0,r.j5)(`height: ${o.imgHeight||"100%"};`)},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.imageList,(t=>((0,i.wg)(),(0,i.j4)(c,{key:t.image_hash},{default:(0,i.w5)((()=>[(0,i._)("div",{class:(0,r.C_)(`${o.mode?o.mode:""} cropper`),style:(0,r.j5)(`height: ${o.imgHeight+"px"||0}`)},[(0,i._)("div",s,[(0,i._)("img",{src:`${e.$heap.state.hostname}image/get.php/${t.image_hash}.${4*o.imgHeight||1200}.${4*o.imgHeight||1200}.webp`},null,8,a)]),(0,i._)("img",{style:(0,r.j5)(`min-height: ${o.imgHeight+"px;"||0};max-height:50vh`),src:`${e.$heap.state.hostname}image/get.php/${t.image_hash}.${4*o.imgHeight||1200}.${4*o.imgHeight||1200}.webp`},null,12,n)],6)])),_:2},1024)))),128))])),_:1},8,["modules","style"])}var d=o(8903),u=o(702),c=o(3181),p={components:{Swiper:c.t,SwiperSlide:c.o},props:["imageList","imgHeight","mode"],setup(){return{modules:[u.pt,u.xW],expand:d.jnR,contract:d.LJB}},data(){return{expanded:!1,vh:0,vw:0}},methods:{maximize(){this.expanded=!0,this.vh=document.getElementsByTagName("ion-content")[0].clientHeight,this.vw=document.getElementsByTagName("ion-content")[0].clientWidth},minimize(){this.expanded=!1,this.vh=document.getElementsByTagName("ion-content")[0].clientHeight,this.vw=document.getElementsByTagName("ion-content")[0].clientWidth}}},g=o(3744);const m=(0,g.Z)(p,[["render",l],["__scopeId","data-v-8c3c7a70"]]);var h=m},9096:function(e,t,o){o.r(t),o.d(t,{default:function(){return V}});var i=o(6252),r=o(3577);const s={style:{"background-color":"#1380c1","padding-bottom":"15px"}},a={class:"store-info-container"},n={class:"store-image-slider-container"},l=(0,i._)("div",{class:"overlay",style:{"background-image":"url(/img/store_menu_background_full.png)"}},null,-1),d={key:0,class:"avatar"},u=["alt","src"],c={key:1},p={key:2,class:"group-fixed-block hidden-block"},g=(0,i._)("h4",{style:{margin:"16px 16px 20px"}},[(0,i._)("b",null,"Онлайн меню")],-1),m={class:"product-container"},h={style:{margin:"0"}},_={class:"product_list_widget_grid"},w=["id"],f={class:"product_list_item_img"},v=["src"],y={class:"product-data"},k={class:"product-title"},b={key:0,style:{color:"var(--ion-color-medium)"}},I={key:1,style:{color:"var(--ion-color-medium)"}},S={class:"product-description"},$={key:2},x=(0,i.Uk)(" "),C={class:"product-price"},G={style:{color:"var(--ion-color-primary)"}},P={key:0,style:{"font-weight":"bold",margin:"5px","font-size":"1.8em"}},H={key:1,style:{"font-weight":"bold",margin:"5px","font-size":"1.8em"}},q={style:{"font-weight":"bold",margin:"0","font-size":"1.5em"}},z=(0,i._)("div",null,[(0,i._)("h6",null,"НУЖНА ДОСТАВКА?"),(0,i._)("h4",null,"ВЫБИРАЙ TEZKEL")],-1),j=(0,i.Uk)("Перейти в приложение");function D(e,t,o,D,L,W){const T=(0,i.up)("ion-icon"),Z=(0,i.up)("ion-toolbar"),O=(0,i.up)("image-slider-comp"),B=(0,i.up)("ion-label"),Y=(0,i.up)("ion-segment-button"),N=(0,i.up)("ion-segment"),K=(0,i.up)("group-list"),U=(0,i.up)("ion-col"),E=(0,i.up)("ion-img"),M=(0,i.up)("ion-chip"),R=(0,i.up)("ion-row"),A=(0,i.up)("ion-grid"),V=(0,i.up)("swiper-slide"),J=(0,i.up)("swiper"),F=(0,i.up)("ion-button"),X=(0,i.up)("router-link"),Q=(0,i.up)("ion-footer"),ee=(0,i.up)("ion-content"),te=(0,i.up)("ion-page");return(0,i.wg)(),(0,i.j4)(te,null,{default:(0,i.w5)((()=>[(0,i.Wm)(ee,{class:(0,r.C_)("store-menu-page"),scrollEvents:!0,onIonScroll:W.onScroll},{default:(0,i.w5)((()=>[(0,i.Wm)(Z,null,{default:(0,i.w5)((()=>[D.mainLogo?((0,i.wg)(),(0,i.j4)(T,{key:0,class:"toolbar_svg_logo",style:{color:"white"},icon:D.mainLogo},null,8,["icon"])):(0,i.kq)("",!0)])),_:1}),(0,i._)("div",s,[(0,i._)("div",a,[(0,i._)("div",n,[(0,i.Wm)(O,{imageList:L.storeItem.images,imgHeight:250,mode:"crop-to-fit"},null,8,["imageList"]),l]),L.storeItem.avatarImage?((0,i.wg)(),(0,i.iD)("div",d,[(0,i._)("img",{alt:L.storeItem.store_name,src:e.$heap.state.hostname+"image/get.php/"+L.storeItem.avatarImage+".200.200.webp"},null,8,u)])):((0,i.wg)(),(0,i.iD)("div",c,[(0,i._)("h2",null,(0,r.zw)(L.storeItem.store_name),1)])),L.storeGroups?((0,i.wg)(),(0,i.iD)("div",p,[(0,i.Wm)(N,{modelValue:L.groupSelectedParentId,"onUpdate:modelValue":t[0]||(t[0]=e=>L.groupSelectedParentId=e),scrollable:"",class:"groups-container"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(L.storeGroups,(e=>((0,i.wg)(),(0,i.j4)(Y,{key:e.group_id,value:e.group_id,onClick:t=>W.groupSelectParent(e.group_id,1),ref_for:!0,ref:"group-tab-"+e.group_id},{default:(0,i.w5)((()=>[(0,i.Wm)(B,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(e.group_name),1)])),_:2},1024)])),_:2},1032,["value","onClick"])))),128))])),_:1},8,["modelValue"])])):(0,i.kq)("",!0),g,L.storeGroups?((0,i.wg)(),(0,i.j4)(K,{key:3,groupList:L.storeGroups,onClick:e=>{W.groupSelectParent(e,!0)}},null,8,["groupList","onClick"])):(0,i.kq)("",!0)]),(0,i._)("div",m,[L.storeGroups?((0,i.wg)(),(0,i.j4)(J,{key:0,pager:"true",initialSlide:0,speed:400,watchSlidesProgress:!1,grabCursor:!0,touchStartForcePreventDefault:!0,slidesPerView:1.1,pagination:!1,centeredSlides:!1,class:"product-list-slider",onSlideChange:t[1]||(t[1]=e=>W.groupSliderChanged(e)),style:(0,r.j5)(`max-height: ${L.sliderMaxHeight}`)},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(L.storeGroups)+" ",1),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(L.storeGroups,(t=>((0,i.wg)(),(0,i.j4)(V,{key:t.group_id},{default:(0,i.w5)((()=>[(0,i.Wm)(A,{class:"product-list"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.children,(t=>((0,i.wg)(),(0,i.j4)(R,{key:t.group_id,ref_for:!0,ref:"group-"+t.group_id,"data-group_id":t.group_id},{default:(0,i.w5)((()=>[(0,i.Wm)(U,{class:"group-title",size:"12"},{default:(0,i.w5)((()=>[(0,i._)("h5",h,(0,r.zw)(t.group_name),1)])),_:2},1024),(0,i.Wm)(U,{size:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",_,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(L.storeProducts[t.group_id],(t=>((0,i.wg)(),(0,i.iD)("div",{key:t.product_id},[(0,i._)("div",{class:(0,r.C_)(t.item_class+" product-item"),id:`product_list_item${t.product_id}`},[(0,i._)("div",f,[(0,i._)("img",{class:"blur-image",src:`${e.$heap.state.hostname}image/get.php/${t.image_hash}.200.200.webp`},null,8,v),(0,i.Wm)(E,{src:`${e.$heap.state.hostname}image/get.php/${t.image_hash}.200.200.webp`},null,8,["src"])]),(0,i._)("div",y,[(0,i._)("div",k,[(0,i.Uk)((0,r.zw)(t.product_name)+" ",1),"порция"==t.product_unit?((0,i.wg)(),(0,i.iD)("span",b," ("+(0,r.zw)(t.weight_in_gramms)+"г) ",1)):((0,i.wg)(),(0,i.iD)("span",I," ("+(0,r.zw)(t.product_unit)+") ",1)),(0,i._)("div",S,(0,r.zw)(t.product_description),1),t.options?((0,i.wg)(),(0,i.iD)("div",$,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.options,(t=>((0,i.wg)(),(0,i.j4)(M,{key:t.product_id,color:"primary"},{default:(0,i.w5)((()=>[(0,i.Wm)(B,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(t.product_option),1)])),_:2},1024),x,t.product_final_price>0?((0,i.wg)(),(0,i.j4)(B,{key:0},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(t.product_final_price)+(0,r.zw)(e.$heap.state.currencySign),1)])),_:2},1024)):(0,i.kq)("",!0)])),_:2},1024)))),128))])):(0,i.kq)("",!0)]),(0,i._)("div",C,[(0,i._)("span",G,[t.product_net_price>0?((0,i.wg)(),(0,i.iD)("b",P,(0,r.zw)(t.product_net_price),1)):((0,i.wg)(),(0,i.iD)("b",H,(0,r.zw)(t.product_final_price),1)),(0,i._)("b",q,(0,r.zw)(e.$heap.state.currencySign),1)])])])],10,w)])))),128))])])),_:2},1024)])),_:2},1032,["data-group_id"])))),128))])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["slidesPerView","style"])):(0,i.kq)("",!0)])]),(0,i.Wm)(Q,{style:{"background-image":"url(/img/bg3.ce15f59d.png)"}},{default:(0,i.w5)((()=>[z,(0,i._)("div",null,[(0,i.Wm)(X,{to:`/catalog/store-${L.storeId}`},{default:(0,i.w5)((()=>[(0,i.Wm)(F,null,{default:(0,i.w5)((()=>[j])),_:1})])),_:1},8,["to"])])])),_:1})])),_:1},8,["onIonScroll"])])),_:1})}o(3948);var L=o(5618),W=o(702),T=o(3181),Z=o(8903),O=o(94),B=o(7526),Y=o(2927),N=o(9755),K=o.n(N),U=o(2008),E=o(4405),M={components:{IonPage:L._i,IonToolbar:L.sr,IonContent:L.W2,IonFooter:L.fr,IonCol:L.wI,IonIcon:L.gu,IonImg:L.Xz,IonRow:L.Nd,IonGrid:L.jY,ImageSliderComp:B.Z,IonLabel:L.Q$,IonSegmentButton:L.GO,IonSegment:L.cJ,IonButton:L.YG,Swiper:T.t,SwiperSlide:T.o,GroupList:Y.Z,IonChip:L.hM},setup(){return{mainLogo:O,search:Z.yC4,settingsOutline:Z.C$N,rocketOutline:Z.G$D,compassOutline:Z.gmD,slideModules:[W.pt]}},data(){return{storeId:this.$route.params.id,query:this.$route.query,searchRequest:"",storeItem:[],storeProducts:{},storeGroups:null,groupSelectedParentId:-1,offsetModificator:80,sliderMaxHeight:500,can_reload_at:0}},methods:{async itemGet(){const e=Date.now();if(!(this.can_reload_at>e)){this.can_reload_at=e+1e4;try{const e=await K().post(`${U.Z.state.hostname}Store/itemGet`,{store_id:this.storeId,distance_include:1});this.storeItem=this.itemPrepare(e),this.storeId=e.store_id,this.groupTreeGet({store_id:this.storeId}),U.Z.commit("setCurrentStore",this.storeItem)}catch(i){var t,o;const e=null===i||void 0===i||null===(t=i.responseJSON)||void 0===t||null===(o=t.messages)||void 0===o?void 0:o.error;switch(e){case"notfound":this.$flash("Продавец не найден"),this.$go("/catalog");break}return!1}}},itemPrepare(e){e.member_of_groups.group_names&&(e.store_group_names=e.member_of_groups.group_names);try{e.deliveryTime=E.Z.deliveryTimeCalculate(e.locations[0].distance,e.store_time_preparation)}catch{}return e.avatarImage="",e.avatar.length>0&&(e.avatarImage=e.avatar[0].image_hash),e},async productListGet(e={}){if(e.store_id=this.storeId,e.is_active=1,e.name_query&&""==e.name_query)return void this.groupTreeGet({store_id:this.storeId});e.limit=200;let t={};try{t=await K().post(U.Z.state.hostname+"Product/listGet",e)}catch(i){}this.productListPrepare(t.product_list),this.groupOtherAdd();let o=this;setTimeout((()=>{o.groupSelect()}),0)},productListPrepare(e){for(var t of(this.storeProducts={},e)){var o,i,r;if(this.storeGroups)if(!this.storeProducts[null!==(i=t.group_id)&&void 0!==i?i:0])this.storeProducts[null!==(r=t.group_id)&&void 0!==r?r:0]=[];t.item_class="",t.deleted_at&&(t.item_class="deleted"),1==t.is_disabled&&(t.item_class="disabled"),1==t.is_counted&&t.product_quantity-t.product_quantity_reserved<1&&(t.item_class="absent"),t.weight_in_gramms=1e3*t.product_weight,this.storeProducts[null!==(o=t.group_id)&&void 0!==o?o:0].push(t)}},async productItemCreate(){try{const e={store_id:this.storeId,product_name:"Новый товар",product_price:1e3,product_promo_price:1e3},t=await K().post(`${U.Z.state.hostname}Product/itemCreate`,e);this.$go(`/catalog/product-edit-${t}`),this.$flash("Добавлен 'Новый товар' в категорию 'Другое'")}catch{this.$flash("Не удалось создать товар")}},async groupTreeGet(e){try{const t=await K().get(`${U.Z.state.hostname}Product/groupTreeGet`,{store_id:e.store_id});let o=[];for(let e in t)o[t[e].order]=t[e];this.storeGroups=o,this.productListGet()}catch(t){}},groupOtherAdd(){this.storeProducts[0]&&this.storeGroups.push({group_id:"other",group_name:"Другое",image_hash:"",children:{0:{group_id:0,group_name:"другое",group_parent_id:0,group_path:"",image_hash:""}}})},groupSelect(){let e=this.query.parent_group_id,t=this.query.sub_group_id;if(t)e:for(let o in this.storeGroups)for(let i in this.storeGroups[o].children)if(i==t){e=o;break e}if(e||(e=Object.keys(this.storeGroups)[0]),this.groupSelectParent(e),t){}},groupSelectParent(e){if(this.groupSelectedParentId==e)return;this.groupSelectedParentId=e;const t=document.querySelector(".product-list-slider").swiper,o=Object.keys(this.storeGroups).indexOf(this.groupSelectedParentId);t.slideTo(o,100,!1),this.groupSliderAdjustHeight()},groupSliderChanged(e){const t=e.activeIndex,o=Object.keys(this.storeGroups)[t];this.groupSelectParent(o,1)},groupSliderAdjustHeight(){var e;const t=null===(e=document.querySelector(".product-list-slider .swiper-slide.swiper-slide-active"))||void 0===e?void 0:e.scrollHeight;document.querySelector(".product-list-slider.swiper").style.maxHeight=t>0?t+"px":""},onScroll(e){var t;const o=null===(t=document.querySelector("#hcat_widget_grid"))||void 0===t?void 0:t.getBoundingClientRect().top;o<0?document.querySelector(".group-fixed-block")&&(document.querySelector(".group-fixed-block").className="group-fixed-block"):document.querySelector(".group-fixed-block")&&(document.querySelector(".group-fixed-block").className="group-fixed-block hidden-block");var i=document.querySelectorAll(".swiper-slide-active .product-list ion-row");for(var r of i)if(r.getBoundingClientRect().top-this.offsetModificator<=window.innerHeight-window.innerHeight/4&&r.getBoundingClientRect().bottom+this.offsetModificator>=window.innerHeight-window.innerHeight/4&&r.dataset.group_id)break}},mounted(){this.query=this.$route.query,this.itemGet()},watch:{$route(e){this.storeId=e.params.id}}},R=o(3744);const A=(0,R.Z)(M,[["render",D]]);var V=A}}]);
//# sourceMappingURL=96.b2655852.js.map