"use strict";(self["webpackChunktezkel"]=self["webpackChunktezkel"]||[]).push([[194],{4405:function(e,t,o){o(5306);var r=o(2008);const i={deliveryCalculate(e){if(!e.locations||!e.locations[0]||!e.locations[0].distance)return null;const t=e.locations[0].distance,o=e.store_time_preparation||0;return i.deliveryTimeCalculate(t,o)},deliveryTimeCalculate(e,t){var o;t=parseInt(null!==(o=t)&&void 0!==o?o:r.Z.getters.settings.delivery.timePreparationDefault);const i=parseInt(r.Z.getters.settings.delivery.timeDelta),s=parseInt(r.Z.getters.settings.delivery.speed),l=5*Math.round(e/s*60/5)+t,n=l>i?l-i:l,u=n+i;return{time:l,timeMin:n,timeMax:u}},render(e,t){for(let o in t)e=e.replace(`{{${o}}}`,t[o]);return e=e.replace(/{{\.}}/,"-"),e}};t["Z"]=i},2927:function(e,t,o){o.d(t,{Z:function(){return _}});var r=o(6252),i=o(3577);const s=e=>((0,r.dD)("data-v-0e00b8d4"),e=e(),(0,r.Cn)(),e),l={class:"slide-title"},n=s((()=>(0,r._)("div",{id:"hcat_widget_grid"},null,-1)));function u(e,t,o,s,u,d){const a=(0,r.up)("ion-img"),c=(0,r.up)("ion-thumbnail"),p=(0,r.up)("swiper-slide"),m=(0,r.up)("swiper");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(m,{id:"hcat_widget_grid","slides-per-view":4.5,"space-between":10},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.groupList,(t=>((0,r.wg)(),(0,r.j4)(p,{key:t.group_id,onClick:()=>e.onClick(t.group_id)},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{style:{width:"70px",height:"70px"}},{default:(0,r.w5)((()=>[t.image_hash?((0,r.wg)(),(0,r.j4)(a,{key:0,style:{"border-radius":"10px",border:"1px solid #ddd"},src:`${e.$heap.state.hostname}image/get.php/${t.image_hash}.150.150.webp`},null,8,["src"])):(0,r.kq)("",!0)])),_:2},1024),(0,r._)("div",l,(0,i.zw)(t.group_name),1)])),_:2},1032,["onClick"])))),128))])),_:1},8,["slides-per-view"]),n],64)}var d=o(5618),a=o(3181),c=(0,r.aZ)({components:{IonImg:d.Xz,IonThumbnail:d.Bs,Swiper:a.t,SwiperSlide:a.o},props:["groupList","onClick"]}),p=o(3744);const m=(0,p.Z)(c,[["render",u],["__scopeId","data-v-0e00b8d4"]]);var _=m},7526:function(e,t,o){o.d(t,{Z:function(){return g}});var r=o(6252),i=o(3577);const s={class:"blur-image"},l=["src"],n=["src"];function u(e,t,o,u,d,a){const c=(0,r.up)("swiper-slide"),p=(0,r.up)("swiper");return(0,r.wg)(),(0,r.j4)(p,{modules:u.modules,autoplay:{delay:3e3,disableOnInteraction:!1},loop:!0,effect:"fade",style:(0,i.j5)(`height: ${o.imgHeight||"100%"};`)},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.imageList,(t=>((0,r.wg)(),(0,r.j4)(c,{key:t.image_hash},{default:(0,r.w5)((()=>[(0,r._)("div",{class:(0,i.C_)(`${o.mode?o.mode:""} cropper`),style:(0,i.j5)(`height: ${o.imgHeight+"px"||0}`)},[(0,r._)("div",s,[(0,r._)("img",{src:`${e.$heap.state.hostname}image/get.php/${t.image_hash}.${4*o.imgHeight||1200}.${4*o.imgHeight||1200}.webp`},null,8,l)]),(0,r._)("img",{style:(0,i.j5)(`min-height: ${o.imgHeight+"px;"||0};max-height:50vh`),src:`${e.$heap.state.hostname}image/get.php/${t.image_hash}.${4*o.imgHeight||1200}.${4*o.imgHeight||1200}.webp`},null,12,n)],6)])),_:2},1024)))),128))])),_:1},8,["modules","style"])}var d=o(8903),a=o(702),c=o(3181),p={components:{Swiper:c.t,SwiperSlide:c.o},props:["imageList","imgHeight","mode"],setup(){return{modules:[a.pt,a.xW],expand:d.jnR,contract:d.LJB}},data(){return{expanded:!1,vh:0,vw:0}},methods:{maximize(){this.expanded=!0,this.vh=document.getElementsByTagName("ion-content")[0].clientHeight,this.vw=document.getElementsByTagName("ion-content")[0].clientWidth},minimize(){this.expanded=!1,this.vh=document.getElementsByTagName("ion-content")[0].clientHeight,this.vw=document.getElementsByTagName("ion-content")[0].clientWidth}}},m=o(3744);const _=(0,m.Z)(p,[["render",u],["__scopeId","data-v-8c3c7a70"]]);var g=_},9716:function(e,t,o){o.d(t,{Z:function(){return C}});var r=o(6252),i=o(3577);const s=e=>((0,r.dD)("data-v-6b6db2a5"),e=e(),(0,r.Cn)(),e),l=["id"],n={key:0,style:{position:"relative"}},u=s((()=>(0,r._)("div",{class:"product_list_item_img",style:{position:"absolute",border:"#9ac solid 2px",top:"-8px",left:"8px","z-index":"-1"}},null,-1))),d=s((()=>(0,r._)("div",{class:"product_list_item_img",style:{position:"absolute",border:"#cde solid 2px",top:"-4px",left:"4px","z-index":"-1"}},null,-1))),a=[u,d],c={key:0,style:{position:"relative",top:"-50%"}},p={style:{height:"5em",overflow:"hidden"}},m={key:0,style:{color:"var(--ion-color-danger)"}},_=(0,r.Uk)("   "),g={style:{color:"var(--ion-color-primary)"}},h={style:{"font-weight":"bold",margin:"0","font-size":"1.4em"}},w={style:{"font-weight":"bold",margin:"0","font-size":"1.2em"}},y=(0,r.Uk)(" / "),v={key:1,style:{color:"var(--ion-color-medium)"}},f={key:2,style:{color:"var(--ion-color-medium)"}},I={key:3,style:{color:"var(--ion-color-medium)"}};function k(e,t,o,s,u,d){const k=(0,r.up)("cart-add-buttons"),b=(0,r.up)("ion-chip"),x=(0,r.up)("ion-img"),W=(0,r.up)("ion-icon");return(0,r.wg)(),(0,r.iD)("div",{class:(0,i.C_)(d.item_class),id:`product_list_item${o.productItem.product_id}`},[o.productItem.options?((0,r.wg)(),(0,r.iD)("div",n,a)):(0,r.kq)("",!0),(0,r._)("div",{class:"product_list_item_img",style:(0,i.j5)(o.productItem.options?"border:#def solid 2px;":"")},["0"!=o.productItem.is_disabled||o.productItem.deleted_at?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",c,[(0,r.Wm)(k,{buttonLayout:"vertical",productItem:o.productItem},null,8,["productItem"])])),d.discount<0?((0,r.wg)(),(0,r.j4)(b,{key:1,style:{position:"absolute",right:"0px",top:"0px","background-color":"var(--ion-color-success-tint)"},outline:"",color:"success"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(d.discount)+"%",1)])),_:1})):(0,r.kq)("",!0),(0,r.Wm)(x,{class:"blur-image",src:`${e.$heap.state.hostname}image/get.php/${o.productItem.image_hash}.200.200.webp`},null,8,["src"]),(0,r.Wm)(x,{onClick:t[0]||(t[0]=t=>e.$router.push(`/catalog/product-${o.productItem.product_id}`)),src:`${e.$heap.state.hostname}image/get.php/${o.productItem.image_hash}.200.200.webp`},null,8,["src"]),o.productItem.options?((0,r.wg)(),(0,r.j4)(W,{key:2,src:s.layersOutline,color:"primary",size:"large",style:{position:"absolute",bottom:"3px",right:"3px"}},null,8,["src"])):(0,r.kq)("",!0)],4),(0,r._)("div",p,[(0,r._)("div",{style:{color:"black",height:"3em","font-size":"1em",overflow:"hidden","line-height":"1.4em","font-weight":"bold"},onClick:t[1]||(t[1]=t=>e.$router.push(`/catalog/product-${o.productItem.product_id}`))},(0,i.zw)(o.productItem.product_name),1),o.productItem.product_price!=o.productItem.product_final_price?((0,r.wg)(),(0,r.iD)("span",m,[(0,r._)("s",null,(0,i.zw)(o.productItem.product_price)+(0,i.zw)(e.$heap.state.currencySign),1),_])):(0,r.kq)("",!0),(0,r._)("span",g,[(0,r._)("b",h,(0,i.zw)(o.productItem.product_final_price),1),(0,r._)("b",w,(0,i.zw)(e.$heap.state.currencySign),1)]),y,"порция"==o.productItem.product_unit?((0,r.wg)(),(0,r.iD)("span",v,(0,i.zw)(d.weight_in_gramms)+"г",1)):"порция мл"==o.productItem.product_unit?((0,r.wg)(),(0,r.iD)("span",f,(0,i.zw)(d.weight_in_gramms)+"мл",1)):((0,r.wg)(),(0,r.iD)("span",I,(0,i.zw)(o.productItem.product_unit),1))])],10,l)}var b=o(5618),x=o(3991),W=o(8903),$={components:{IonImg:b.Xz,IonIcon:b.gu,IonChip:b.hM,CartAddButtons:x.Z},props:["productItem"],setup(){return{layersOutline:W.Y1P}},computed:{item_class(){return this.productItem.deleted_at?"deleted":this.productItem.product_final_price!=this.productItem.product_price?"promo":1==this.productItem.is_disabled?"disabled":1==this.productItem.is_counted&&this.productItem.product_quantity-this.productItem.product_quantity_reserved<1?"absent":""},discount(){return Math.round(this.productItem.product_final_price/this.productItem.product_price*100-100)},weight_in_gramms(){return 1e3*this.productItem.product_weight}}},z=o(3744);const S=(0,z.Z)($,[["render",k],["__scopeId","data-v-6b6db2a5"]]);var C=S},6181:function(e,t,o){o.d(t,{Z:function(){return f}});var r=o(6252),i=o(3577);const s=(0,r.Uk)(" ◉ "),l={key:0},n=(0,r.Uk)(" ◉ "),u=(0,r.Uk)("Временно не работает"),d={key:1},a=(0,r.Uk)(" ◉ "),c={key:2},p=(0,r.Uk)(" ◉ "),m=(0,r.Uk)("Закрыт");function _(e,t,o,_,g,h){const w=(0,r.up)("ion-text"),y=(0,r.up)("ion-chip");return 1==o.storeItem.is_opened?((0,r.wg)(),(0,r.j4)(y,{key:0,color:"medium"},{default:(0,r.w5)((()=>[(0,r._)("label",null,[(0,r.Wm)(w,{color:"success"},{default:(0,r.w5)((()=>[s])),_:1}),(0,r.Uk)("Открыт до "+(0,i.zw)(o.storeItem.store_time_closes)+":00",1)])])),_:1})):((0,r.wg)(),(0,r.j4)(y,{key:1,color:"medium"},{default:(0,r.w5)((()=>[0==o.storeItem.is_working?((0,r.wg)(),(0,r.iD)("label",l,[(0,r.Wm)(w,{color:"medium"},{default:(0,r.w5)((()=>[n])),_:1}),u])):o.storeItem.store_next_time_opens>0?((0,r.wg)(),(0,r.iD)("label",d,[(0,r.Wm)(w,{color:"danger"},{default:(0,r.w5)((()=>[a])),_:1}),(0,r.Uk)("Закрыт до "+(0,i.zw)(o.storeItem.store_next_time_opens)+":00",1)])):((0,r.wg)(),(0,r.iD)("label",c,[(0,r.Wm)(w,{color:"danger"},{default:(0,r.w5)((()=>[p])),_:1}),m]))])),_:1}))}var g=o(5618),h=o(8903),w={props:["storeItem"],components:{IonChip:g.hM,IonText:g.yW},setup(){return{ellipse:h.Hpm}}},y=o(3744);const v=(0,y.Z)(w,[["render",_]]);var f=v},194:function(e,t,o){o.r(t),o.d(t,{default:function(){return oe}});var r=o(6252),i=o(3577);const s=e=>((0,r.dD)("data-v-4d8533d9"),e=e(),(0,r.Cn)(),e),l={class:"store-info-container"},n={key:0,slot:"start",class:"avatar-container"},u={class:"avatar"},d=["src"],a=(0,r.Uk)("подробнее"),c=(0,r.Uk)("ИНН"),p={style:{"scrollbar-width":"none","overflow-x":"scroll",display:"flex"}},m={key:0,class:"delivery-variant"},_=s((()=>(0,r._)("br",null,null,-1))),g={key:1,class:"delivery-variant"},h=s((()=>(0,r._)("br",null,null,-1))),w={key:2,class:"delivery-variant"},y=(0,r.Uk)("Самовывоз"),v=s((()=>(0,r._)("br",null,null,-1))),f=s((()=>(0,r._)("b",null,"0₽",-1))),I={key:0,class:"group-fixed-block hidden-block"},k={key:1},b=s((()=>(0,r._)("h4",{style:{margin:"8px 16px"}},[(0,r._)("b",null,"Категории")],-1))),x={style:{margin:"0"}},W=(0,r.Uk)("добавить "),$=(0,r.Uk)(" К сожалению, в "),z=(0,r.Uk)(" по запросу "),S=(0,r.Uk)(" ничего не найдено. "),C=(0,r.Uk)("Сбросить фильтр"),G=(0,r.Uk)(" К сожалению, в "),D=(0,r.Uk)(" пока нет доступных товаров. "),q={key:4},j={style:{margin:"8px 16px"}},U={style:{margin:"0"}};function P(e,t,o,s,P,L){var Z;const H=(0,r.up)("image-slider-comp"),T=(0,r.up)("ion-text"),O=(0,r.up)("ion-icon"),F=(0,r.up)("ion-item"),M=(0,r.up)("ion-label"),Y=(0,r.up)("ion-list"),B=(0,r.up)("ion-accordion"),K=(0,r.up)("ion-accordion-group"),Q=(0,r.up)("store-opened-indicator"),V=(0,r.up)("ion-col"),E=(0,r.up)("ion-chip"),A=(0,r.up)("ion-row"),N=(0,r.up)("ion-grid"),J=(0,r.up)("ion-segment-button"),R=(0,r.up)("ion-segment"),X=(0,r.up)("ion-searchbar"),ee=(0,r.up)("group-list"),te=(0,r.up)("product-list"),oe=(0,r.up)("swiper-slide"),re=(0,r.up)("swiper"),ie=(0,r.up)("ion-skeleton-text"),se=(0,r.up)("base-layout");return(0,r.wg)(),(0,r.j4)(se,{pageDefaultBackLink:"/catalog","page-class":"store-page","page-title":null!==(Z=this.storeItem.store_name)&&void 0!==Z?Z:"Магазин"},{default:(0,r.w5)((()=>{var o,Z;return[(0,r._)("div",null,[(0,r._)("div",l,[(0,r.Wm)(H,{imageList:P.storeItem.images,imgHeight:300,mode:"crop-to-fit"},null,8,["imageList"]),(0,r.Wm)(Y,{class:"store-info"},{default:(0,r.w5)((()=>[(0,r.Wm)(F,{lines:"none"},{default:(0,r.w5)((()=>[P.storeItem.avatarImage?((0,r.wg)(),(0,r.iD)("div",n,[(0,r._)("div",u,[(0,r._)("img",{src:e.$heap.state.hostname+"image/get.php/"+P.storeItem.avatarImage+".200.200.webp"},null,8,d)])])):(0,r.kq)("",!0),(0,r.Wm)(T,{style:{"font-size":"1.2em"}},{default:(0,r.w5)((()=>[(0,r._)("b",null,(0,i.zw)(P.storeItem.store_name),1)])),_:1}),P.storeItem.is_writable?((0,r.wg)(),(0,r.j4)(O,{key:1,slot:"end",color:"primary",onClick:t[0]||(t[0]=t=>e.$router.push(`/catalog/store-edit-${P.storeItem.store_id}`)),icon:s.settingsOutline,style:{"font-size":"24px"}},null,8,["icon"])):(0,r.kq)("",!0)])),_:1}),(0,r.Wm)(K,{style:{width:"100%"}},{default:(0,r.w5)((()=>[(0,r.Wm)(B,null,{default:(0,r.w5)((()=>[(0,r.Wm)(F,{slot:"header",lines:"none"},{default:(0,r.w5)((()=>[P.storeItem.store_description?((0,r.wg)(),(0,r.j4)(T,{key:0,class:"store-description",color:"medium"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(P.storeItem.store_description),1)])),_:1})):((0,r.wg)(),(0,r.j4)(T,{key:1,color:"medium"},{default:(0,r.w5)((()=>[a])),_:1}))])),_:1}),(0,r.Wm)(Y,{slot:"content"},{default:(0,r.w5)((()=>{var e;return[P.storeItem.store_company_name?((0,r.wg)(),(0,r.j4)(F,{key:0,lines:"none"},{default:(0,r.w5)((()=>[(0,r.Wm)(T,null,{default:(0,r.w5)((()=>[(0,r._)("b",null,(0,i.zw)(P.storeItem.store_company_name),1)])),_:1})])),_:1})):(0,r.kq)("",!0),P.storeItem.store_tax_num?((0,r.wg)(),(0,r.j4)(F,{key:1,lines:"none"},{default:(0,r.w5)((()=>[(0,r.Wm)(M,{color:"medium"},{default:(0,r.w5)((()=>[c])),_:1}),(0,r.Wm)(T,{color:"dark"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(P.storeItem.store_tax_num),1)])),_:1})])),_:1})):(0,r.kq)("",!0),(P.storeItem.store_phone,(0,r.kq)("",!0)),(null===(e=P.storeItem.locations)||void 0===e?void 0:e.length)>0?((0,r.wg)(),(0,r.j4)(F,{key:3,lines:"none"},{default:(0,r.w5)((()=>[(0,r.Wm)(T,{color:"dark"},{default:(0,r.w5)((()=>{var e;return[(0,r.Uk)((0,i.zw)(null===(e=P.storeItem.locations)||void 0===e?void 0:e[0].location_address),1)]})),_:1})])),_:1})):(0,r.kq)("",!0)]})),_:1})])),_:1})])),_:1}),(0,r.Wm)(N,null,{default:(0,r.w5)((()=>[(0,r.Wm)(A,{class:"ion-justify-content-between"},{default:(0,r.w5)((()=>[(0,r.Wm)(V,{size:"auto"},{default:(0,r.w5)((()=>[(0,r.Wm)(Q,{storeItem:P.storeItem},null,8,["storeItem"])])),_:1}),(0,r.Wm)(V,{size:"auto"},{default:(0,r.w5)((()=>[P.storeItem.store_group_names?((0,r.wg)(),(0,r.j4)(E,{key:0,color:"medium",background:"transparent"},{default:(0,r.w5)((()=>[(0,r._)("label",null,(0,i.zw)(P.storeItem.store_group_names),1)])),_:1})):(0,r.kq)("",!0)])),_:1})])),_:1})])),_:1})])),_:1}),(0,r._)("div",p,[P.storeItem.delivery_cost>0?((0,r.wg)(),(0,r.iD)("div",m,[(0,r._)("div",null,[(0,r.Wm)(M,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Доставит "+(0,i.zw)(e.$heap.getters.settings.app_title),1)])),_:1}),_,null!==(o=P.storeItem)&&void 0!==o&&null!==(Z=o.deliveryTime)&&void 0!==Z&&Z.timeMin?((0,r.wg)(),(0,r.j4)(T,{key:0},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(P.storeItem.deliveryTime.timeMin)+"-"+(0,i.zw)(P.storeItem.deliveryTime.timeMax)+"мин",1)])),_:1})):(0,r.kq)("",!0)]),(0,r._)("div",null,[P.storeItem.delivery_cost>0?((0,r.wg)(),(0,r.j4)(T,{key:0},{default:(0,r.w5)((()=>[(0,r._)("b",null,(0,i.zw)(P.storeItem.delivery_cost)+"₽",1)])),_:1})):(0,r.kq)("",!0)])])):(0,r.kq)("",!0),1==P.storeItem.store_delivery_allow?((0,r.wg)(),(0,r.iD)("div",g,[(0,r._)("div",null,[(0,r.Wm)(M,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Доставит "+(0,i.zw)(P.storeItem.member_of_groups.group_names),1)])),_:1}),h]),(0,r._)("div",null,[P.storeItem.delivery_cost>0?((0,r.wg)(),(0,r.j4)(T,{key:0},{default:(0,r.w5)((()=>[(0,r._)("b",null,(0,i.zw)(P.storeItem.store_delivery_cost)+"₽",1)])),_:1})):(0,r.kq)("",!0)])])):(0,r.kq)("",!0),1==P.storeItem.store_pickup_allow?((0,r.wg)(),(0,r.iD)("div",w,[(0,r._)("div",null,[(0,r.Wm)(M,null,{default:(0,r.w5)((()=>[y])),_:1}),v]),(0,r._)("div",null,[(0,r.Wm)(T,null,{default:(0,r.w5)((()=>[f])),_:1})])])):(0,r.kq)("",!0)])]),L.storeGroupsFiltered?((0,r.wg)(),(0,r.iD)("div",I,[(0,r.Wm)(R,{modelValue:P.groupSelectedParentId,"onUpdate:modelValue":t[1]||(t[1]=e=>P.groupSelectedParentId=e),scrollable:"",style:{"scrollbar-width":"none"},class:"groups-container"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(L.storeGroupsFiltered,(e=>((0,r.wg)(),(0,r.j4)(J,{key:e.group_id,value:e.group_id,onClick:t=>L.groupSelectParent(e.group_id,1),ref_for:!0,ref:"group-tab-"+e.group_id},{default:(0,r.w5)((()=>[(0,r.Wm)(M,null,{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(e.group_name),1)])),_:2},1024)])),_:2},1032,["value","onClick"])))),128))])),_:1},8,["modelValue"])])):(0,r.kq)("",!0),(0,r.Wm)(X,{class:"search-container",modelValue:P.searchQuery,"onUpdate:modelValue":t[2]||(t[2]=e=>P.searchQuery=e),placeholder:"Поиск у этого продавца"},null,8,["modelValue"]),L.storeGroupsFiltered?((0,r.wg)(),(0,r.iD)("div",k,[b,(0,r.Wm)(ee,{groupList:L.storeGroupsFiltered,onClick:e=>{L.groupSelectParent(e,!0)}},null,8,["groupList","onClick"]),(0,r.Wm)(re,{pager:"true",initialSlide:0,speed:400,watchSlidesProgress:!1,grabCursor:!0,touchStartForcePreventDefault:!0,slidesPerView:1.1,pagination:!1,centeredSlides:!1,class:"product-list-slider",onSlideChange:t[3]||(t[3]=e=>L.groupSliderChanged(e))},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(L.storeGroupsFiltered,(e=>((0,r.wg)(),(0,r.j4)(oe,{key:e.group_id},{default:(0,r.w5)((()=>[(0,r.Wm)(N,{class:"product-list"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.children,(e=>((0,r.wg)(),(0,r.j4)(A,{key:e.group_id,ref_for:!0,ref:"group-"+e.group_id,"data-group_id":e.group_id},{default:(0,r.w5)((()=>[(0,r.Wm)(V,{class:"group-title",size:"12"},{default:(0,r.w5)((()=>[(0,r._)("h5",x,[(0,r.Uk)((0,i.zw)(e.group_name)+" ",1),1==P.storeItem.is_writable?((0,r.wg)(),(0,r.j4)(E,{key:0,onClick:t=>L.productItemCreate(e.group_id)},{default:(0,r.w5)((()=>[(0,r.Wm)(O,{src:s.addOutline},null,8,["src"]),W])),_:2},1032,["onClick"])):(0,r.kq)("",!0)])])),_:2},1024),(0,r.Wm)(V,{size:"12"},{default:(0,r.w5)((()=>[(0,r.Wm)(te,{productList:L.storeProductsFiltered[e.group_id]},null,8,["productList"])])),_:2},1024)])),_:2},1032,["data-group_id"])))),128))])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["slidesPerView"])])):P.searchQuery?((0,r.wg)(),(0,r.j4)(M,{key:2},{default:(0,r.w5)((()=>[$,(0,r._)("b",null,(0,i.zw)(P.storeItem.store_name),1),z,(0,r._)("b",null,'"'+(0,i.zw)(P.searchQuery)+'"',1),S,(0,r.Wm)(E,{onClick:t[4]||(t[4]=e=>this.searchQuery=null)},{default:(0,r.w5)((()=>[C])),_:1})])),_:1})):P.productListIsEmpty?((0,r.wg)(),(0,r.j4)(M,{key:3},{default:(0,r.w5)((()=>[G,(0,r._)("b",null,(0,i.zw)(P.storeItem.store_name),1),D])),_:1})):L.storeGroupsFiltered?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",q,[(0,r._)("h4",j,[(0,r._)("b",null,[(0,r.Wm)(ie,{style:{height:"30px",width:"150px"}})])]),(0,r._)("div",null,[((0,r.wg)(),(0,r.iD)(r.HY,null,(0,r.Ko)([1,2,3,4],(e=>(0,r._)("div",{key:e,style:{display:"inline-block",margin:"10px"}},[(0,r.Wm)(ie,{style:{height:"70px",width:"70px"},animated:""})]))),64))]),(0,r.Wm)(N,{class:"product-list"},{default:(0,r.w5)((()=>[(0,r.Wm)(A,null,{default:(0,r.w5)((()=>[(0,r.Wm)(V,{class:"group-title",size:"12"},{default:(0,r.w5)((()=>[(0,r._)("h5",U,[(0,r.Wm)(ie,{style:{height:"20px",width:"120px"}})])])),_:1}),(0,r.Wm)(V,{size:"12"},{default:(0,r.w5)((()=>[((0,r.wg)(),(0,r.iD)(r.HY,null,(0,r.Ko)([1,2,3,4],(e=>(0,r._)("div",{key:e,style:{display:"inline-block",margin:"10px"}},[(0,r.Wm)(ie,{style:{height:"120px",width:"120px"},animated:""})]))),64))])),_:1})])),_:1})])),_:1})]))])]})),_:1},8,["page-title"])}o(3948),o(5306);var L=o(5618),Z=o(702),H=o(3181),T=o(8903),O=o(7526),F=o(2927);const M={class:"product_list_widget_grid"};function Y(e,t,o,i,s,l){const n=(0,r.up)("product-item");return(0,r.wg)(),(0,r.iD)("div",M,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.productList,(e=>((0,r.wg)(),(0,r.iD)("div",{key:e.product_id},[(0,r.Wm)(n,{productItem:e},null,8,["productItem"])])))),128))])}var B=o(9716),K={props:["productList"],components:{ProductItem:B.Z}},Q=o(3744);const V=(0,Q.Z)(K,[["render",Y],["__scopeId","data-v-fcf4f40a"]]);var E=V,A=o(6181),N=o(9755),J=o.n(N),R=o(2008),X=o(4405),ee={components:{IonText:L.yW,IonCol:L.wI,IonIcon:L.gu,IonRow:L.Nd,IonGrid:L.jY,IonLabel:L.Q$,IonSegmentButton:L.GO,IonSegment:L.cJ,IonChip:L.hM,IonSearchbar:L.VI,IonAccordion:L.We,IonAccordionGroup:L.eh,IonList:L.q_,IonItem:L.Ie,ImageSliderComp:O.Z,StoreOpenedIndicator:A.Z,Swiper:H.t,SwiperSlide:H.o,GroupList:F.Z,ProductList:E,IonSkeletonText:L.CK},setup(){return{search:T.yC4,settingsOutline:T.C$N,rocketOutline:T.G$D,compassOutline:T.gmD,addOutline:T.s6O,slideModules:[Z.pt]}},data(){return{storeId:this.$route.params.id,query:this.$route.query,searchQuery:null,storeItem:[],productList:[],productListIsEmpty:0,storeGroups:null,groupSelectedParentId:-1,sliderMaxHeight:500,offsetModificator:150,can_reload_at:0}},computed:{storeGroupsFiltered(){if(!this.storeProductsFiltered||!this.storeGroups)return null;const e=Object.keys(this.storeProductsFiltered);let t=null;for(let o in this.storeGroups)for(let r in this.storeGroups[o].children){const i=this.storeGroups[o].children[r];e.includes(r)&&(t||(t={}),t[o]||(t[o]={group_id:this.storeGroups[o].group_id,group_name:this.storeGroups[o].group_name,image_hash:this.storeGroups[o].image_hash,children:[]}),t[o].children.push(i))}return t},storeProductsFiltered(){let e=1,t={};for(let l of this.productList){var o;if(this.searchQuery)try{var r,i,s;const e=new RegExp(this.searchQuery.replace(/^[\w\d\s]/,"").replace(/\s/g,".*"),"im");if((null===(r=l.product_name)||void 0===r||!r.match(e))&&(null===(i=l.product_code)||void 0===i||!i.match(e))&&(null===(s=l.product_description)||void 0===s||!s.match(e)))continue}catch{}const n=null!==(o=l.group_id)&&void 0!==o?o:0;this.storeGroups&&(t[n]||(t[n]=[],t[n].category_order=e++)),t[n].push(l)}return t}},methods:{async itemGet(){const e=Date.now();if(!(this.can_reload_at>e)){this.can_reload_at=e+1e4;try{const e=await J().post(`${R.Z.state.hostname}Store/itemGet`,{store_id:this.storeId,distance_include:1});this.storeItem=this.itemPrepare(e),this.storeId=e.store_id,this.groupTreeGet({store_id:this.storeId}),R.Z.commit("setCurrentStore",this.storeItem)}catch(r){var t,o;const e=null===r||void 0===r||null===(t=r.responseJSON)||void 0===t||null===(o=t.messages)||void 0===o?void 0:o.error;switch(e){case"notfound":this.$flash("Продавец не найден"),this.$router.replace("/catalog");break}return!1}}},itemPrepare(e){var t;return e.member_of_groups.group_names&&(e.store_group_names=e.member_of_groups.group_names),e.deliveryTime={},null!==(t=e.locations[0])&&void 0!==t&&t.distance&&(e.deliveryTime=X.Z.deliveryTimeCalculate(e.locations[0].distance,e.store_time_preparation)),e.avatarImage="",e.avatar.length>0&&(e.avatarImage=e.avatar[0].image_hash),e},async productListGet(e={}){if(e.store_id=this.storeId,e.is_active=1,e.name_query&&""==e.name_query)return void this.groupTreeGet({store_id:this.storeId});e.limit=200;let t={};try{var o,r;t=await J().post(R.Z.state.hostname+"Product/listGet",e),this.productListIsEmpty=(null===(o=t)||void 0===o||null===(r=o.product_list)||void 0===r?void 0:r.length)>0?0:1}catch(i){}this.productList=t.product_list,this.groupOtherAdd(),setTimeout((()=>{this.groupSelect()}),0)},async productItemCreate(e){try{const t={store_id:this.storeId,product_name:"Новый товар",product_price:1e3,product_promo_price:1e3},o=await J().post(`${R.Z.state.hostname}Product/itemCreate`,t);e&&await J().post(`${R.Z.state.hostname}Product/itemUpdateGroup`,{product_id:o,group_id:e,is_joined:1}),this.$router.push(`/catalog/product-edit-${o}`),this.$flash("Добавлен 'Новый товар'")}catch{this.$flash("Не удалось создать товар")}},async groupTreeGet(e){try{const t=await J().get(`${R.Z.state.hostname}Product/groupTreeGet`,{store_id:e.store_id});let o=[];for(let e in t)o[t[e].order]=t[e];this.storeGroups=o,this.productListGet()}catch(t){}},groupOtherAdd(){if(this.storeProductsFiltered[0]){const e=this.storeGroups.filter((e=>"other"==e.group_id));if(e.length>0)return;this.storeGroups.push({group_id:"other",group_name:"Другое",image_hash:"",children:{0:{group_id:0,group_name:"другое",group_parent_id:0,group_path:"",image_hash:""}}})}},groupSelect(){let e=this.query.parent_group_id,t=this.query.sub_group_id;if(t)e:for(let i in this.storeGroups)for(let o in this.storeGroups[i].children)if(o==t){e=i;break e}var o;e||(e=null===(o=this.storeGroups[0])||void 0===o?void 0:o.group_id);const r=!1;this.groupSelectParent(e,r)},groupSelectParent(e,t=!1){if(this.groupSelectedParentId==e||!document.querySelector(".product-list-slider"))return;this.groupSelectedParentId=e;const o=document.querySelector(".product-list-slider").swiper,r=this.storeGroups.findIndex((t=>t.group_id==e));r>=0&&(o.slideTo(r,100,!1),this.groupSliderAdjustHeight())},groupSliderChanged(e){const t=e.activeIndex,o=this.storeGroups[t].group_id;this.groupSelectParent(o,1)},groupSliderAdjustHeight(){try{var e;const t=null===(e=document.querySelector(".product-list-slider .swiper-slide.swiper-slide-active"))||void 0===e?void 0:e.scrollHeight;document.querySelector(".product-list-slider.swiper").style.maxHeight=t>0?t+"px":""}catch{}}},mounted(){this.query=this.$route.query,this.itemGet()},watch:{$route(e){this.storeId=e.params.id}}};const te=(0,Q.Z)(ee,[["render",P],["__scopeId","data-v-4d8533d9"]]);var oe=te}}]);
//# sourceMappingURL=194.b7dea4b4.js.map