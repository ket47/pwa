"use strict";(self["webpackChunktezkel"]=self["webpackChunktezkel"]||[]).push([[5284],{5284:function(e,n,t){t.r(n),t.d(n,{default:function(){return b}});var r=t(6252),u=t(3577),o=(0,r.Uk)(" Подтверждение номера телефона "),i=(0,r.Uk)(" Мы выслали вам смс с кодом подтверждения на номер "),a=(0,r.Uk)(". Введите 4 цифры из смс ниже "),s={novalidate:""},c=(0,r.Uk)("Код подтверждения из смс"),l=(0,r.Uk)("Подтвердить");function p(e,n,t,p,f,d){var h=(0,r.up)("ion-card-title"),m=(0,r.up)("ion-card-header"),_=(0,r.up)("ion-card-content"),w=(0,r.up)("ion-card"),k=(0,r.up)("ion-label"),v=(0,r.up)("ion-input"),I=(0,r.up)("ion-col"),b=(0,r.up)("ion-row"),$=(0,r.up)("ion-item"),W=(0,r.up)("ion-list"),g=(0,r.up)("ion-button"),C=(0,r.up)("base-layout");return(0,r.wg)(),(0,r.j4)(C,{"page-title":"Подтверждение телефона",pageDefaultBackLink:"/user"},{default:(0,r.w5)((function(){return[(0,r.Wm)(w,{color:"light"},{default:(0,r.w5)((function(){return[(0,r.Wm)(m,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(h,{color:"primary"},{default:(0,r.w5)((function(){return[o]})),_:1})]})),_:1}),(0,r.Wm)(_,null,{default:(0,r.w5)((function(){return[i,(0,r._)("b",null,(0,u.zw)(f.user_phone),1),a]})),_:1})]})),_:1}),(0,r._)("form",s,[(0,r.Wm)(W,null,{default:(0,r.w5)((function(){return[(0,r.Wm)($,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(b,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(I,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(k,{position:"stacked",color:"primary"},{default:(0,r.w5)((function(){return[c]})),_:1}),(0,r.Wm)(v,{modelValue:f.verification_code,"onUpdate:modelValue":n[0]||(n[0]=function(e){return f.verification_code=e}),type:"numeric",inputmode:"numeric",placeholder:"- - - -",onIonInput:n[1]||(n[1]=function(e){f.verification_code=e.target.value,d.onSubmit()}),enterkeyhint:"go",required:""},null,8,["modelValue"])]})),_:1})]})),_:1})]})),_:1})]})),_:1}),(0,r.Wm)(b,{"responsive-sm":""},{default:(0,r.w5)((function(){return[(0,r.Wm)(I,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(g,{onClick:n[2]||(n[2]=function(e){return d.onSubmit()}),expand:"block"},{default:(0,r.w5)((function(){return[l]})),_:1})]})),_:1})]})),_:1})])]})),_:1})}var f=t(6835),d=t(8534),h=(t(4916),t(5306),t(8292)),m=t(9755),_=t.n(m),w=t(351),k={name:"UserVerifyPhone",components:{IonLabel:h.Q$,IonCol:h.wI,IonInput:h.pK,IonRow:h.Nd,IonButton:h.YG,IonCard:h.PM,IonCardHeader:h.Zi,IonCardTitle:h.Dq,IonCardContent:h.FN,IonItem:h.Ie,IonList:h.q_},data(){return{verification_code:null,user_phone:this.$route.params.user_phone||this.$route.query.user_phone||"",is_sent:!1}},created(){this.smsSend()},ionViewDidEnter(){this.smsSend()},methods:{smsSend(){if(!this.is_sent&&(this.user_phone=this.$route.params.user_phone||this.$route.query.user_phone||"",this.user_phone)){var e={user_phone:this.user_phone};try{this.is_sent=!0,_().post(`${this.$heap.state.hostname}User/phoneVerificationSend`,e)}catch(n){}}},onSubmit(){var e=this;return(0,d.Z)((0,f.Z)().mark((function n(){var t;return(0,f.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.verification_code&&4==String(e.verification_code).length){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,n.next=5,_().post(`${e.$heap.state.hostname}/User/phoneVerificationCheck`,{user_phone:e.user_phone,verification_code:e.verification_code});case 5:w.Z.autoSignIn(),e.$router.replace("/user/user-edit"),e.$router.push("/home"),e.$flash("Номер телефона верифицирован"),n.next=21;break;case 11:n.prev=11,n.t0=n["catch"](2),t=n.t0.responseJSON.messages.error,n.t1=t,n.next="verification_not_found"===n.t1?17:20;break;case 17:return e.$flash("Код верификации устарел"),e.$router.push("sign-in"),n.abrupt("break",20);case 20:e.$flash("Не удалось верифицировать телефон");case 21:case"end":return n.stop()}}),n,null,[[2,11]])})))()}}},v=t(3744);const I=(0,v.Z)(k,[["render",p]]);var b=I}}]);
//# sourceMappingURL=5284-legacy.8b7904a4.js.map