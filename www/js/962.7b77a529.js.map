{"version":3,"file":"js/962.7b77a529.js","mappings":"iMAI0C,mC,WAIhB,uD,WACuD,kC,GAIrEA,WAAA,I,WAKkD,4B,WAiBH,e,8VAlCzD,QAsCc,GAtCD,aAAW,yBAAyB,yBAAuB,SAAxE,C,kBACI,IASW,EATX,QASW,Q,kBART,IAIkB,EAJlB,QAIkB,Q,kBAHhB,IAEiB,EAFjB,QAEiB,GAFDC,MAAM,WAAS,C,kBAAC,IAEhC,M,gBAEF,QAEmB,Q,kBAFD,IACkC,WAAqB,kBAAhB,EAAAC,YAAU,GAAf,K,gBAItD,OAyBO,OAzBP,EAyBO,EAxBL,QAiBW,Q,kBAhBT,IAeW,EAfX,QAeW,Q,kBAdT,IAaU,EAbV,QAaU,Q,kBAZR,IAWU,EAXV,QAWU,Q,kBAVR,IAAkF,EAAlF,QAAkF,GAAvEC,SAAS,UAAUF,MAAM,WAApC,C,kBAA8C,IAAwB,M,OACtE,QAQa,G,WAPF,EAAAG,kB,qCAAA,EAAAA,kBAAiB,GAC1BC,KAAK,UACLC,UAAU,UACVC,YAAY,UACX,WAAQ,gBAAE,EAAAH,kBAAkBI,EAAOC,OAAOC,MAAM,EAAAC,aACjDC,aAAa,KACbC,SAAA,IAPF,0B,kCAcR,QAIU,GAJD,oBAAa,C,kBACpB,IAEU,EAFV,QAEU,Q,kBADR,IAAuE,EAAvE,QAAuE,GAA1D,QAAK,eAAE,EAAAF,YAAYG,OAAO,SAAvC,C,kBAA+C,IAAW,M,6EA0BtE,GACEC,KAAK,kBACLC,WAAW,CACXC,SADW,KAEXC,OAFW,KAGXC,SAHW,KAIXC,OAJW,KAKXC,QALW,KAMXC,UANW,KAOXC,QAPW,KAQXC,QARW,KASXC,cATW,KAUXC,aAVW,KAWXC,eAXW,KAYXC,QAZW,KAaXC,QAAO,MAEPC,OACE,MAAO,CACL1B,kBAAkB,KAClBF,WAAW6B,KAAKC,OAAOC,MAAM/B,YAAY,KAG7CgC,gBAEE,GADAH,KAAK7B,WAAW6B,KAAKC,OAAOC,MAAM/B,YAAY,IAC1C6B,KAAK7B,WACP,OAEF,IAAIiC,EAAc,CAChBjC,WAAY6B,KAAK7B,YAEnB,UACQ,SAAc,GAAE6B,KAAKK,MAAMC,MAAMC,qCAAsCH,GAC9E,SAEHI,QAAQ,CACNL,iBACE,GAAKH,KAAK3B,mBAA4D,GAAvCoC,OAAOT,KAAK3B,mBAAmBqC,OAG9D,UACQ,SAAc,GAAEV,KAAKK,MAAMC,MAAMC,uCAAwC,CAACpC,WAAY6B,KAAK7B,WAAYE,kBAAmB2B,KAAK3B,oBACrIsC,EAAA,eACAX,KAAKY,QAAQC,KAAK,SAClBb,KAAKc,OAAO,gCACZ,MAAMC,GACN,MAAMC,EAAQD,EAAIE,aAAaC,SAASC,MACxC,OAAOH,GACL,IAAK,yBACHhB,KAAKc,OAAO,2BACZd,KAAKY,QAAQC,KAAK,WAClB,MAEJb,KAAKc,OAAO,yC,UC7GpB,MAAMM,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE","sources":["webpack://Tezkel/./src/views/UserVerifyPhone.vue","webpack://Tezkel/./src/views/UserVerifyPhone.vue?52b8"],"sourcesContent":["<template>\r\n  <base-layout page-title=\"Подтверждение телефона\" page-default-back-link=\"/home\">\r\n      <ion-card>\r\n        <ion-card-header>\r\n          <ion-card-title color=\"primary\">\r\n            Подтверждение номера телефона\r\n          </ion-card-title>\r\n        </ion-card-header>\r\n        <ion-card-content>\r\n          Мы выслали вам смс с кодом подтверждения на номер <b>{{user_phone}}</b>. Введите 4 цифры из смс ниже\r\n        </ion-card-content>\r\n      </ion-card>\r\n\r\n      <form novalidate>\r\n        <ion-list>\r\n          <ion-item>\r\n            <ion-row>\r\n              <ion-col>\r\n                <ion-label position=\"stacked\" color=\"primary\">Код подтверждения из смс</ion-label>\r\n                <ion-input\r\n                  v-model=\"verification_code\"\r\n                  type=\"numeric\"\r\n                  inputmode=\"numeric\"\r\n                  placeholder=\"- - - -\"\r\n                  @ionInput=\"verification_code=$event.target.value;onSubmit()\"\r\n                  enterkeyhint=\"go\"\r\n                  required\r\n                ></ion-input>\r\n              </ion-col>\r\n            </ion-row>\r\n          </ion-item>\r\n        </ion-list>\r\n\r\n        <ion-row responsive-sm>\r\n          <ion-col>\r\n            <ion-button @click=\"onSubmit()\" expand=\"block\">Подтвердить</ion-button>\r\n          </ion-col>\r\n        </ion-row>\r\n      </form>\r\n  </base-layout>\r\n</template>\r\n\r\n<script>\r\nimport { \r\n  IonLabel,\r\n  IonCol,\r\n  IonInput,\r\n  IonRow,\r\n  IonText,\r\n  IonButton,\r\n  IonGrid,\r\n  IonCard,\r\n  IonCardHeader,\r\n  IonCardTitle,\r\n  IonCardContent,\r\n  IonItem,\r\n  IonList,\r\n}                     from '@ionic/vue';\r\nimport jQuery         from \"jquery\";\r\nimport User           from '@/scripts/User.js';\r\n\r\nexport default  {\r\n  name:'UserVerifyPhone',\r\n  components:{\r\n  IonLabel,\r\n  IonCol,\r\n  IonInput,\r\n  IonRow,\r\n  IonText,\r\n  IonButton,\r\n  IonGrid,\r\n  IonCard,\r\n  IonCardHeader,\r\n  IonCardTitle,\r\n  IonCardContent,\r\n  IonItem,\r\n  IonList,\r\n  },\r\n  data(){\r\n    return {\r\n      verification_code:null,\r\n      user_phone:this.$route.query.user_phone||''\r\n    }\r\n  },\r\n  async mounted(){\r\n    this.user_phone=this.$route.query.user_phone||'';\r\n    if(!this.user_phone){\r\n      return;\r\n    }\r\n    let requestData = {\r\n      user_phone: this.user_phone\r\n    }\r\n    try{\r\n      await jQuery.post( `${this.$heap.state.hostname}User/phoneVerificationSend`, requestData)\r\n    }catch{/** */}\r\n  },\r\n  methods:{\r\n    async onSubmit() {\r\n      if( !this.verification_code || String(this.verification_code).length!=4 ){\r\n        return\r\n      }\r\n      try{\r\n        await jQuery.post( `${this.$heap.state.hostname}/User/phoneVerificationCheck`, {user_phone: this.user_phone, verification_code: this.verification_code})\r\n        User.autoSignIn()\r\n        this.$router.push('/home')\r\n        this.$flash(\"Номер телефона верифицирован\")\r\n      } catch(err){\r\n        const message=err.responseJSON.messages.error\r\n        switch(message){\r\n          case 'verification_not_found':\r\n            this.$flash(\"Код верификации устарел\")\r\n            this.$router.push('sign-in')\r\n            break;\r\n        }\r\n        this.$flash(\"Не удалось верифицировать телефон\")\r\n      }\r\n    },\r\n  },\r\n}\r\n</script>","import { render } from \"./UserVerifyPhone.vue?vue&type=template&id=c5098824\"\nimport script from \"./UserVerifyPhone.vue?vue&type=script&lang=js\"\nexport * from \"./UserVerifyPhone.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"W:\\\\Ionic\\\\Tezkel\\\\blank\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["novalidate","color","user_phone","position","verification_code","type","inputmode","placeholder","$event","target","value","onSubmit","enterkeyhint","required","expand","name","components","IonLabel","IonCol","IonInput","IonRow","IonText","IonButton","IonGrid","IonCard","IonCardHeader","IonCardTitle","IonCardContent","IonItem","IonList","data","this","$route","query","async","requestData","$heap","state","hostname","methods","String","length","User","$router","push","$flash","err","message","responseJSON","messages","error","__exports__","render"],"sourceRoot":""}