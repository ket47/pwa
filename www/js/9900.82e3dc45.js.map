{"version":3,"file":"js/9900.82e3dc45.js","mappings":"0LASgBA,EAAAA,EAAAA,GAA8F,SAA3F,2FAAuF,G,GAC1FA,EAAAA,EAAAA,GAAoE,SAAjE,iEAA6D,G,GAMxDA,EAAAA,EAAAA,GAEI,KAFDC,KAAK,UAAUC,MAAA,kBAAqB,2MAEvC,G,qfAjBpBC,EAAAA,EAAAA,IA6FcC,EAAA,CA7FDC,UAAU,cAAcC,oBAAoB,S,mBACrD,SAAAC,EAAA,MAuBW,EAvBXC,EAAAA,EAAAA,IAuBWC,EAAA,CAvBDC,MAAM,SAAO,C,kBACnB,IAIkB,EAJlBF,EAAAA,EAAAA,IAIkBG,EAAA,M,kBAHd,IAEiB,EAFjBH,EAAAA,EAAAA,IAEiBI,EAAA,M,kBAFD,IAEhB,UAFgB,wB,gBAIpBJ,EAAAA,EAAAA,IAgBmBK,EAAA,M,kBAff,IAA8F,CAA9FC,EACAC,GACAP,EAAAA,EAAAA,IASsBQ,EAAA,M,kBARlB,IAOgB,EAPhBR,EAAAA,EAAAA,IAOgBS,EAAA,M,kBANZ,IAEW,EAFXT,EAAAA,EAAAA,IAEWU,EAAA,CAFDjB,KAAK,SAASS,MAAM,S,mBAC1B,IAAwD,EAAxDF,EAAAA,EAAAA,IAAwDW,EAAA,CAA9ClB,KAAK,MAAMS,MAAM,U,mBAAS,IAAS,UAAT,gB,eAExCU,K,gBAKRpB,EAAAA,EAAAA,GAEI,WADAQ,EAAAA,EAAAA,IAAsHa,EAAA,CAAzGC,QAAKC,EAAA,KAAAA,EAAA,GAAAC,GAAEC,EAAAC,mBAAmBC,OAAO,S,mBAAQ,IAAmC,EAAnCnB,EAAAA,EAAAA,IAAmCoB,EAAA,CAAxBC,IAAKC,EAAAC,kBAAgB,yBAAG,uB,2BAIrGvB,EAAAA,EAAAA,IAAuBwB,IACvBxB,EAAAA,EAAAA,IAAqBW,IAMrBX,EAAAA,EAAAA,IAOcyB,EAAA,CAPD,gBAAc,O,WAAgBC,EAAAC,U,qCAAAD,EAAAC,UAASX,GAAGY,YAASb,EAAA,KAAAA,EAAA,GAAAC,GAAEC,EAAAY,gBAAgBb,K,mBAC9E,IAEqB,EAFrBhB,EAAAA,EAAAA,IAEqB8B,EAAA,CAFDC,MAAM,UAAQ,C,kBAAC,IAEnC,UAFmC,kB,OAGnC/B,EAAAA,EAAAA,IAEqB8B,EAAA,CAFDC,MAAM,YAAU,C,kBAAC,IAErC,UAFqC,mB,gCAKhB,UAATL,EAAAC,YAAS,WAAzBhC,EAAAA,EAAAA,IAWWqC,EAAA,CAAAC,IAAA,I,kBAVF,IAA8B,gBAAnCC,EAAAA,EAAAA,IASMC,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IATenB,EAAAoB,eAATC,K,WAAZJ,EAAAA,EAAAA,IASM,OAT+BD,IAAKK,EAAMC,U,EAC5CvC,EAAAA,EAAAA,IAIWU,EAAA,CAJD8B,MAAM,QAAM,C,kBAClB,IAA4D,EAA5DxC,EAAAA,EAAAA,IAA4DoB,EAAA,CAAlD3B,KAAK,QAASgD,KAAMnB,EAAAoB,YAAaxC,MAAM,W,kBACjDF,EAAAA,EAAAA,IAAyCW,EAAA,M,kBAA/B,IAAoB,mBAAlB2B,EAAMK,YAAU,M,YAC5B3C,EAAAA,EAAAA,IAAwGW,EAAA,CAA9FlB,KAAK,MAAMS,MAAM,W,mBAAU,IAAwD,EAAxDV,EAAAA,EAAAA,GAAwD,UAAAoD,EAAAA,EAAAA,IAAnDN,EAAMO,cAAWD,EAAAA,EAAAA,IAAIE,EAAAC,MAAMC,MAAMC,cAAY,M,0BAE3FjD,EAAAA,EAAAA,IAEWU,EAAA,M,kBADP,IAA8D,EAA9DV,EAAAA,EAAAA,IAA8DW,EAAA,M,kBAApD,IAAkB,UAAlB,sBAAkBiC,EAAAA,EAAAA,IAAEN,EAAMY,eAAa,M,8DAKpC,YAATxB,EAAAC,YAAS,WAAzBhC,EAAAA,EAAAA,IAkBWqC,EAAA,CAAAC,IAAA,I,kBAjBF,IAA8B,gBAAnCC,EAAAA,EAAAA,IAgBMC,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAhBenB,EAAAoB,eAATC,K,WAAZJ,EAAAA,EAAAA,IAgBM,OAhB+BD,IAAKK,EAAMC,U,EAC5CvC,EAAAA,EAAAA,IAIWU,EAAA,CAJD8B,MAAM,QAAM,C,kBAClB,IAA2D,EAA3DxC,EAAAA,EAAAA,IAA2DoB,EAAA,CAAjD3B,KAAK,QAASgD,KAAMnB,EAAAoB,YAAaxC,MAAM,U,kBACjDF,EAAAA,EAAAA,IAAoEW,EAAA,M,kBAA1D,IAAoB,mBAAlB2B,EAAMK,YAAY,QAAIC,EAAAA,EAAAA,IAAEN,EAAMY,eAAa,M,YACvDlD,EAAAA,EAAAA,IAAwFW,EAAA,CAA9ElB,KAAK,OAAK,C,kBAAC,IAAwD,EAAxDD,EAAAA,EAAAA,GAAwD,UAAAoD,EAAAA,EAAAA,IAAnDN,EAAMO,cAAWD,EAAAA,EAAAA,IAAIE,EAAAC,MAAMC,MAAMC,cAAY,M,0BAE3EjD,EAAAA,EAAAA,IASWU,EAAA,M,kBARP,IAEM,CAFqB,GAAhB4B,EAAMa,aAAU,WAA3BjB,EAAAA,EAAAA,IAEM,MAAAkB,EAAA,EADFpD,EAAAA,EAAAA,IAA8CW,EAAA,CAApCT,MAAM,UAAQ,C,kBAAC,IAAU,UAAV,iB,SAEI,GAAjBoC,EAAMe,cAAW,WAAjCnB,EAAAA,EAAAA,IAGM,MAAAoB,EAAA,EAFFtD,EAAAA,EAAAA,IAAoGW,EAAA,CAA1FT,MAAM,UAAUR,MAAA,mBAAwBoB,QAAKC,EAAA,KAAAA,EAAA,GAAAC,GAAEC,EAAAsC,kB,mBAAiB,IAAe,UAAf,sB,OAC1EvD,EAAAA,EAAAA,IAA8FoB,EAAA,CAApFlB,MAAM,UAAWuC,KAAMnB,EAAAkC,WAAa1C,QAAKC,EAAA,KAAAA,EAAA,GAAAC,GAAEC,EAAAsC,iBAAiB7D,MAAA,oB,oCAE1D4C,EAAMmB,iBAAc,WAApC9D,EAAAA,EAAAA,IAAgGgB,EAAA,CAAAsB,IAAA,I,kBAA1D,IAAuB,UAAvB,2BAAuBW,EAAAA,EAAAA,IAAEN,EAAMmB,gBAAc,M,+EAKtE,MAAT/B,EAAAgC,YAAS,WAAzB/D,EAAAA,EAAAA,IAWWqC,EAAA,CAAAC,IAAA,I,kBAVF,IAA2B,cAAhCC,EAAAA,EAAAA,IASMC,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IATkB,CAAC,EAAD,MAAZuB,IAAZnE,EAAAA,EAAAA,GASM,OAT4ByC,IAAK0B,GAAQ,EAC/C3D,EAAAA,EAAAA,IAIWU,EAAA,CAJD8B,MAAM,QAAM,C,kBAClB,IAA2D,EAA3DxC,EAAAA,EAAAA,IAA2DoB,EAAA,CAAjD3B,KAAK,QAASgD,KAAMnB,EAAAoB,YAAaxC,MAAM,U,kBACjDF,EAAAA,EAAAA,IAAyD4D,EAAA,CAAtClE,MAAA,iBACnBM,EAAAA,EAAAA,IAAqE4D,EAAA,CAAlDnE,KAAK,MAAMC,MAAA,oB,OAElCM,EAAAA,EAAAA,IAEWU,EAAA,M,kBADP,IAAyD,EAAzDV,EAAAA,EAAAA,IAAyD4D,EAAA,CAAtClE,MAAA,mB,yCAKM,KAAR,QAATK,EAAA2B,EAAAgC,iBAAS,IAAA3D,OAAA,EAATA,EAAW8D,UAAM,WAAjClE,EAAAA,EAAAA,IAIWqC,EAAA,CAAAC,IAAA,I,kBAHP,IAEW,EAFXjC,EAAAA,EAAAA,IAEWU,EAAA,CAFD8B,MAAM,QAAM,C,kBAAC,IAEvB,UAFuB,6D,uGAmCnC,GACIsB,WAAW,CACbC,QAAO,KACPC,SAAQ,KACRC,QAAO,KACPC,QAAO,KACPC,QAAO,KACPC,WAAU,KACVC,iBAAgB,KAChBC,QAAO,KACPC,cAAa,KACbC,aAAY,KACZC,eAAc,KACdC,UAAS,KACTC,gBAAe,KACfC,aAAY,KACZC,kBAAiBA,EAAAA,IAEfC,KAAAA,GACI,MAAO,CACXpC,YAAW,MACXqC,aAAY,MACZC,WAAU,MACVxB,WAAU,MACVjC,iBAAgBA,EAAAA,IAEhB,EACA0D,IAAAA,GACI,MAAO,CACHtD,UAAU,SACV+B,UAAU,KAElB,EACAwB,OAAAA,GACIC,KAAKC,SACT,EACAC,SAAS,CACLhD,aAAAA,GACI,IAAIiD,EAAO,GACX,GAAIH,KAAKzB,UACL,IAAI,IAAIpB,KAAS6C,KAAKzB,UAClBpB,EAAMY,cAAciC,KAAKI,UAAUjD,EAAMkD,YACzClD,EAAMmD,UAAUN,KAAKI,UAAUjD,EAAMoD,YACrCJ,EAAOK,KAAKrD,GAGpB,OAAOgD,CACX,GAEJM,QAAQ,CACJ,aAAMR,GACF,IACID,KAAKzB,UAAU,GACf,MAAMmC,EAAQ,CACVC,QAAQX,KAAKpC,MAAMC,MAAM+C,KAAKD,QAC9BE,KAAKb,KAAKxD,WAEdwD,KAAKzB,gBAAgBuC,IAAAA,KAAa,GAAEd,KAAKpC,MAAMC,MAAMkD,wBAAwBL,EACjF,CAAC,MAAY,CACjB,EACAhE,eAAAA,CAAgBsE,GACZ,MAAMC,EAASD,EAAEE,OAAOtE,MACxBoD,KAAKC,QAAQgB,EACjB,EACAb,SAAAA,CAAWe,GACP,MAAMC,EAAQ,IAAIC,KAAKA,KAAKC,MAAMH,IAC5BI,EAAU,CAAEC,MAAO,QAASC,IAAK,UAAWC,KAAM,WACxD,OAAON,EAAMO,wBAAmBC,EAAWL,EAC/C,EACA,qBAAMxF,GACF,IACI,MAAM8F,EAAY7B,KAAKpC,MAAMC,MAAMiE,SAASC,UACtCC,EAAW,sDACXC,QAAeC,EAAAA,EAAMC,WACrBC,EAAS,GAAEpC,KAAKpC,MAAMyE,QAAQP,SAASQ,IAAIC,8CAA8CvC,KAAKpC,MAAMC,MAAM+C,KAAKD,UAClHsB,QACOC,EAAAA,EAAMM,MAAM,CACdC,MAAOZ,EACPa,KAAMV,EACNW,IAAKP,EACLQ,YAAaf,IAEXgB,UAAUC,iBACVD,UAAUC,UAAUC,UAAUX,GACpCpC,KAAKgD,OAAO,iFAAiF,mCAE7FhD,KAAKgD,OAAO,gDAAgD,GAEpE,CAAC,MAAMC,GACH,CAER,EACA7E,aAAAA,GACI4B,KAAKgD,OAAO,6HAChB,I,UCrNR,MAAME,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O","sources":["webpack://Tezkel/./src/views/UserPromoList.vue","webpack://Tezkel/./src/views/UserPromoList.vue?73b6"],"sourcesContent":["<template>\r\n    <base-layout pageTitle=\"Ваши скидки\" pageDefaultBackLink=\"/user\">\r\n        <ion-card color=\"light\">\r\n            <ion-card-header>\r\n                <ion-card-title>\r\n                    Получите скидку\r\n                </ion-card-title>\r\n            </ion-card-header>\r\n            <ion-card-content>\r\n                <p>Новый пользователь, зарегистриванный по вашему приглашению, получит 5 скидок по 200руб.</p>\r\n                <p>В качестве благодарности, мы начислим вам 5 скидок по 100руб.</p>\r\n                <ion-accordion-group>\r\n                    <ion-accordion>\r\n                        <ion-item slot=\"header\" color=\"light\">\r\n                            <ion-text slot=\"end\" color=\"medium\">подробнее</ion-text>\r\n                        </ion-item>\r\n                        <p slot=\"content\" style=\"padding:10px\">\r\n                            После регистрации нового клиента по вашему приглашению, мы начислим вам 5 скидок по 100руб. Эти скидки будут активироваться по мере того, как приглашённый вами друг, будет использовать свои скидки.\r\n                        </p>\r\n                    </ion-accordion>\r\n                </ion-accordion-group>\r\n                <p>\r\n                    <ion-button @click=\"shareInvitation()\" expand=\"block\"><ion-icon :src=\"arrowRedoOutline\"/>Пригласить друга</ion-button>\r\n                </p>\r\n            </ion-card-content>\r\n        </ion-card>\r\n        <ion-title></ion-title>\r\n        <ion-text></ion-text>\r\n\r\n\r\n\r\n\r\n\r\n        <ion-segment swipe-gesture=\"true\" v-model=\"promoType\" @ionChange=\"listTypeChanged($event)\">\r\n            <ion-segment-button value=\"active\">\r\n                Доступные\r\n            </ion-segment-button>\r\n            <ion-segment-button value=\"inactive\">\r\n                Неактивные\r\n            </ion-segment-button>\r\n        </ion-segment>\r\n\r\n        <ion-list v-if=\"promoType=='active'\">\r\n            <div v-for=\"promo in compPromoList\" :key=\"promo.promo_id\">\r\n                <ion-item lines=\"none\">\r\n                    <ion-icon slot=\"start\" :icon=\"giftOutline\" color=\"primary\"/>\r\n                    <ion-text>{{promo.promo_name}}</ion-text>\r\n                    <ion-text slot=\"end\" color=\"success\"><b>{{promo.promo_value}}{{$heap.state.currencySign}}</b></ion-text>\r\n                </ion-item>\r\n                <ion-item>\r\n                    <ion-text>действительна до: {{promo.exp_date_time}}</ion-text>\r\n                </ion-item>\r\n            </div>\r\n        </ion-list>\r\n\r\n        <ion-list v-if=\"promoType=='inactive'\">\r\n            <div v-for=\"promo in compPromoList\" :key=\"promo.promo_id\">\r\n                <ion-item lines=\"none\">\r\n                    <ion-icon slot=\"start\" :icon=\"giftOutline\" color=\"medium\"/>\r\n                    <ion-text>{{promo.promo_name}} до {{promo.exp_date_time}}</ion-text>\r\n                    <ion-text slot=\"end\"><b>{{promo.promo_value}}{{$heap.state.currencySign}}</b></ion-text>\r\n                </ion-item>\r\n                <ion-item>\r\n                    <div v-if=\"promo.is_expired==1\">\r\n                        <ion-text color=\"danger\">просрочена</ion-text>\r\n                    </div>\r\n                    <div v-else-if=\"promo.is_disabled==1\">\r\n                        <ion-text color=\"warning\" style=\"cursor:pointer\" @click=\"helpNotActive()\">не активирована</ion-text>\r\n                        <ion-icon color=\"warning\" :icon=\"helpCircle\" @click=\"helpNotActive()\" style=\"cursor:pointer\"/>\r\n                    </div>\r\n                    <ion-text v-if=\"promo.promo_order_id\">использована в заказе #{{promo.promo_order_id}}</ion-text>\r\n                </ion-item>\r\n            </div>\r\n        </ion-list>\r\n\r\n        <ion-list v-if=\"promoList==null\">\r\n            <div v-for=\"skeleton in [1,2,3]\" :key=\"skeleton\">\r\n            <ion-item lines=\"none\">\r\n                <ion-icon slot=\"start\" :icon=\"giftOutline\" color=\"medium\"/>\r\n                <ion-skeleton-text style=\"width:70%\"></ion-skeleton-text>\r\n                <ion-skeleton-text slot=\"end\" style=\"width:50px\"></ion-skeleton-text>\r\n            </ion-item>\r\n            <ion-item>\r\n                <ion-skeleton-text style=\"width:70%\"></ion-skeleton-text>\r\n            </ion-item>\r\n            </div>\r\n        </ion-list>\r\n\r\n        <ion-list v-if=\"promoList?.length===0\">\r\n            <ion-item lines=\"none\">\r\n                Скидок нет, но вы можете получить их пригласив друга\r\n            </ion-item>\r\n        </ion-list>\r\n\r\n    </base-layout>\r\n</template>\r\n<script>\r\nimport {\r\n  IonIcon,\r\n  IonTitle,\r\n  IonList,\r\n  IonItem,\r\n  IonText,\r\n  IonSegment,\r\n  IonSegmentButton,\r\n  IonCard,\r\n  IonCardHeader,\r\n  IonCardTitle,\r\n  IonCardContent,\r\n  IonButton,\r\n  IonSkeletonText,\r\n  IonAccordion,\r\n  IonAccordionGroup,\r\n}                       from '@ionic/vue'\r\nimport {\r\n    giftOutline,\r\n    closeOutline,\r\n    banOutline,\r\n    helpCircle,\r\n    arrowRedoOutline,\r\n}                       from 'ionicons/icons'\r\nimport jQuery           from 'jquery'\r\nimport { Share }        from '@capacitor/share';\r\n\r\nexport default {\r\n    components:{\r\n  IonIcon,\r\n  IonTitle,\r\n  IonList,\r\n  IonItem,\r\n  IonText,\r\n  IonSegment,\r\n  IonSegmentButton,\r\n  IonCard,\r\n  IonCardHeader,\r\n  IonCardTitle,\r\n  IonCardContent,\r\n  IonButton,\r\n  IonSkeletonText,\r\n  IonAccordion,\r\n  IonAccordionGroup,\r\n    },\r\n    setup(){\r\n        return {\r\n    giftOutline,\r\n    closeOutline,\r\n    banOutline,\r\n    helpCircle,\r\n    arrowRedoOutline,\r\n        }\r\n    },\r\n    data(){\r\n        return {\r\n            promoType:'active',\r\n            promoList:null\r\n        }\r\n    },\r\n    mounted(){\r\n        this.listGet()\r\n    },\r\n    computed:{\r\n        compPromoList(){\r\n            let promos=[]\r\n            if( this.promoList ){\r\n                for(let promo of this.promoList){\r\n                    promo.exp_date_time=this.toLocDate(promo.expired_at)\r\n                    promo.date_time=this.toLocDate(promo.created_at)\r\n                    promos.push(promo)\r\n                }\r\n            }\r\n            return promos;\r\n        },\r\n    },\r\n    methods:{\r\n        async listGet(){\r\n            try{\r\n                this.promoList=[]\r\n                const request={\r\n                    user_id:this.$heap.state.user.user_id,\r\n                    type:this.promoType\r\n                }\r\n                this.promoList=await jQuery.post(`${this.$heap.state.hostname}Promo/listGet`,request)\r\n            }catch{/** */}\r\n        },\r\n        listTypeChanged(e){\r\n            const listType=e.target.value;\r\n            this.listGet(listType);\r\n        },\r\n        toLocDate( iso ){\r\n            const event = new Date(Date.parse(iso));\r\n            const options = { month: 'short', day: 'numeric', year: 'numeric' };\r\n            return event.toLocaleDateString(undefined, options);\r\n        },\r\n        async shareInvitation(){\r\n            try{\r\n                const targetTitle=this.$heap.state.settings.app_title\r\n                const targetText='Присоединяйтесь и получите 5 сертификатов по 200руб'\r\n                const canshare=await Share.canShare()\r\n                const fullUrl=`${this.$heap.getters.settings.app.frontendUrl}invitation.html?inviter_user_id=${this.$heap.state.user.user_id}`\r\n                if(canshare){\r\n                    await Share.share({\r\n                        title: targetTitle,\r\n                        text: targetText,\r\n                        url: fullUrl,\r\n                        dialogTitle: targetTitle,\r\n                    });\r\n                } else if(navigator.clipboard){\r\n                    await navigator.clipboard.writeText(fullUrl);\r\n                    this.$alert(\"Теперь вы можете поделиться ей с друзьями в социальных сетях или мессенджерах.\",\"Ссылка на страницу скопирована\");\r\n                } else {\r\n                    this.$alert(\"Устройство не поддерживает функцию поделиться\",\"\"); \r\n                }\r\n            }catch(err){\r\n                //console.log(err)\r\n            }\r\n        },\r\n        helpNotActive(){\r\n            this.$alert(\"Эта скидка будет активирована, когда приглашённый вами друг воспользуется начисленной ему скидкой. Не забудьте напомнить😉\")\r\n        }\r\n    }\r\n}\r\n</script>","import { render } from \"./UserPromoList.vue?vue&type=template&id=6489b584\"\nimport script from \"./UserPromoList.vue?vue&type=script&lang=js\"\nexport * from \"./UserPromoList.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementVNode","slot","style","_createBlock","_component_base_layout","pageTitle","pageDefaultBackLink","_$data$promoList","_createVNode","_component_ion_card","color","_component_ion_card_header","_component_ion_card_title","_component_ion_card_content","_hoisted_1","_hoisted_2","_component_ion_accordion_group","_component_ion_accordion","_component_ion_item","_component_ion_text","_hoisted_3","_component_ion_button","onClick","_cache","$event","$options","shareInvitation","expand","_component_ion_icon","src","$setup","arrowRedoOutline","_component_ion_title","_component_ion_segment","$data","promoType","onIonChange","listTypeChanged","_component_ion_segment_button","value","_component_ion_list","key","_createElementBlock","_Fragment","_renderList","compPromoList","promo","promo_id","lines","icon","giftOutline","promo_name","_toDisplayString","promo_value","_ctx","$heap","state","currencySign","exp_date_time","is_expired","_hoisted_4","is_disabled","_hoisted_5","helpNotActive","helpCircle","promo_order_id","promoList","skeleton","_component_ion_skeleton_text","length","components","IonIcon","IonTitle","IonList","IonItem","IonText","IonSegment","IonSegmentButton","IonCard","IonCardHeader","IonCardTitle","IonCardContent","IonButton","IonSkeletonText","IonAccordion","IonAccordionGroup","setup","closeOutline","banOutline","data","mounted","this","listGet","computed","promos","toLocDate","expired_at","date_time","created_at","push","methods","request","user_id","user","type","jQuery","hostname","e","listType","target","iso","event","Date","parse","options","month","day","year","toLocaleDateString","undefined","targetTitle","settings","app_title","targetText","canshare","Share","canShare","fullUrl","getters","app","frontendUrl","share","title","text","url","dialogTitle","navigator","clipboard","writeText","$alert","err","__exports__","render"],"sourceRoot":""}