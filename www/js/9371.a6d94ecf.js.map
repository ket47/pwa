{"version":3,"file":"js/9371.a6d94ecf.js","mappings":"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","sources":["webpack://tezkel/./src/components/ItemPicker.vue","webpack://tezkel/./src/components/ItemPicker.vue?9ba5","webpack://tezkel/./src/views/admin/TransactionEdit.vue","webpack://tezkel/./src/views/admin/TransactionEdit.vue?5133"],"sourcesContent":["<style scoped>\r\n\r\n</style>\r\n<template>\r\n<div class=\"ion-page\">\r\n  <ion-header>\r\n      <ion-toolbar>\r\n          <ion-title>Выбрать {{itemTypeName}}</ion-title>\r\n          <ion-icon :icon=\"closeOutline\" @click=\"closeModal();\" slot=\"end\" size=\"large\"></ion-icon>\r\n      </ion-toolbar>\r\n  </ion-header>\r\n  <ion-content>\r\n    <ion-searchbar v-if=\"itemTypeLabel!='acc'\" v-model=\"query\" placeholder=\"поиск\" :debounce=\"100\" @ionInput=\"listGet()\" />\r\n    <ion-list v-if=\"!itemList\">\r\n        <ion-item v-for=\"i in [0,1,2,3,4,5,6,7,8,9]\" :key=\"i\" button detail>\r\n            <ion-skeleton-text style=\"height:35px;width:40px\" animated/>\r\n             <ion-skeleton-text style=\"width:100%\" animated/>\r\n        </ion-item>\r\n    </ion-list>\r\n    <ion-list v-else-if=\"itemList?.length\">\r\n        <ion-item v-for=\"item in itemList\" :key=\"item.id\" button detail @click=\"itemPick(item)\">\r\n            <ion-avatar slot=\"start\">\r\n                <ion-img v-if=\"item.image_hash\" :src=\"`${$heap.state.hostname}image/get.php/${item.image_hash}.100.100.webp`\"/>\r\n            </ion-avatar>\r\n            {{item.name}}\r\n        </ion-item>\r\n    </ion-list>\r\n    <ion-list v-else>\r\n        <ion-item>\r\n            Ничего не найдено\r\n        </ion-item>\r\n    </ion-list>\r\n  </ion-content>\r\n</div>\r\n</template>\r\n<script>\r\nimport \r\n{\r\n  closeOutline\r\n}                         from 'ionicons/icons';\r\nimport {\r\n    modalController,\r\n    IonContent,\r\n    IonHeader,\r\n    IonToolbar,\r\n    IonTitle,\r\n    IonIcon,\r\n    IonImg,\r\n    IonList,\r\n    IonItem,\r\n    IonSearchbar,\r\n    IonSkeletonText,\r\n    IonAvatar,\r\n}                         from \"@ionic/vue\";\r\nimport jQuery             from 'jquery'\r\n\r\nexport default {\r\n    props:['itemType'],\r\n    components:{\r\n        IonContent,\r\n        IonHeader,\r\n        IonToolbar,\r\n        IonTitle,\r\n        IonIcon,\r\n        IonImg,\r\n        IonList,\r\n        IonItem,\r\n        IonSearchbar,\r\n        IonSkeletonText,\r\n        IonAvatar,\r\n    },\r\n    setup(){\r\n        return {closeOutline}\r\n    },\r\n    data(){\r\n        const itemTypeLabel=this.itemType?this.itemType:'order'\r\n        return {\r\n            query:null,\r\n            itemList:null,\r\n            itemTypeLabel,\r\n            itemTypeName:''\r\n        }\r\n    },\r\n    mounted(){\r\n        this.listGet()\r\n    },\r\n    methods:{\r\n        async listGet(){\r\n            if( this.itemTypeLabel=='order' ){\r\n                this.itemTypeName='Заказ'\r\n                this.ordersGet()\r\n            } else\r\n            if( this.itemTypeLabel=='store' ){\r\n                this.itemTypeName='Продавец'\r\n                this.storesGet()\r\n            } else\r\n            if( this.itemTypeLabel=='courier' ){\r\n                this.itemTypeName='Курьер'\r\n                this.couriersGet()\r\n            } else \r\n            if( this.itemTypeLabel=='acc' ){\r\n                this.itemTypeName='Счет'\r\n                this.accountsGet()\r\n            } else {\r\n                this.$flash('unknown item type '+this.itemTypeLabel)\r\n            }\r\n        },\r\n        async storesGet(){\r\n            const request={\r\n                name_query:this.query,\r\n                name_query_fields:'store_name',\r\n                limit:10\r\n            }\r\n            try{\r\n                let result=await jQuery.post(`${this.$heap.state.hostname}Store/listGet`,request)\r\n                this.itemList=result.map(item=>{\r\n                    item.name=`продавец ${item.store_name}`;\r\n                    item.id=item.store_id\r\n                    return item\r\n                    })\r\n            }catch{/** */}\r\n        },\r\n        async couriersGet(){\r\n            const request={\r\n                name_query:this.query,\r\n                name_query_fields:'user_name,user_phone',\r\n                limit:10\r\n            }\r\n            try{\r\n                let result=await jQuery.post(`${this.$heap.state.hostname}Courier/listGet`,request)\r\n                this.itemList=result.map(item=>{\r\n                    item.name=`курьер ${item.user_name} ${item.user_phone}`;\r\n                    item.id=item.courier_id\r\n                    item.image_hash=item.courier_photo_image_hash\r\n                    return item\r\n                    })\r\n            }catch{/** */}\r\n        },\r\n        async ordersGet(){\r\n            const request={\r\n                name_query:this.query,\r\n                name_query_fields:'store_name,order_id,user_name',\r\n                limit:10\r\n            }\r\n            try{\r\n                let result=await jQuery.post(`${this.$heap.state.hostname}Order/listGet`,request)\r\n                this.itemList=result.map(item=>{\r\n                    item.name=`заказ#${item.order_id} ${item.store_name} > ${item.user_name}`;\r\n                    item.id=item.order_id\r\n                    return item\r\n                    })\r\n            }catch{/** */}\r\n        },\r\n        async accountsGet(){\r\n            const request={\r\n                group_table:'transaction_account_list'\r\n            }\r\n            try{\r\n                let result=await jQuery.post(`${this.$heap.state.hostname}Admin/GroupManager/listGet`,request)\r\n                this.itemList=result.map(item=>{\r\n                    item.name=`${item.group_name}`;\r\n                    item.type=item.group_type\r\n                    return item\r\n                    })\r\n            }catch{/** */}\r\n        },\r\n        itemPick(item){\r\n            modalController.dismiss(item);\r\n        },\r\n        closeModal(){\r\n            modalController.dismiss();\r\n        }\r\n    }\r\n}\r\n</script>","import { render } from \"./ItemPicker.vue?vue&type=template&id=6cfff72a\"\nimport script from \"./ItemPicker.vue?vue&type=script&lang=js\"\nexport * from \"./ItemPicker.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n    <base-layout pageDefaultBackLink=\"/user\" page-title=\"Редактирование проводки\">\r\n        <ion-list v-if=\"transaction\">\r\n            <ion-item>\r\n                <ion-input v-model=\"transaction.trans_date\" label=\"Дата\" labelPlacement=\"floating\" placeholder=\"дата\" type=\"date\"></ion-input>\r\n            </ion-item>\r\n            <ion-item>\r\n                <ion-select interface=\"popover\" placeholder=\"Выберите тип проводки\" v-model=\"transaction.trans_role\" label=\"Тип проводки\" labelPlacement=\"floating\" required @ionChange=\"itemUpdateRole(1)\">\r\n                    <ion-select-option v-for=\"trans in transTypes\" :key=\"trans.trans_role\" :value=\"trans.trans_role\">{{trans.trans_name}}</ion-select-option>\r\n                </ion-select>\r\n            </ion-item>\r\n            <ion-item lines=\"none\">\r\n                <ion-label position=\"stacked\" color=\"medium\">Родительские элементы</ion-label>\r\n                <ion-text>\r\n                    <ion-chip v-for=\"(tagLabel,tag) in tagDict\" :key=\"tag\" color=\"primary\">#{{tagLabel}} <ion-icon v-if=\"tag.indexOf('acc')==-1\" :src=\"closeCircle\" @click=\"tagDictRemove(tag)\"></ion-icon></ion-chip>\r\n                </ion-text>\r\n            </ion-item>\r\n            <ion-item>\r\n                <ion-text>\r\n                    <ion-chip v-for=\"tagHolder in tagMissingNames\" :key=\"tagHolder\" @click=\"tagDictPick(tagHolder)\" color=\"medium\">\r\n                        <ion-icon :src=\"addOutline\"/><ion-label>Добавить #{{tagHolderNames[tagHolder]}}</ion-label>\r\n                    </ion-chip>\r\n                </ion-text>\r\n            </ion-item>\r\n            <ion-item>\r\n                <ion-input @keyup.enter=\"itemSave()\" v-model=\"transaction.trans_amount\" label=\"Сумма\" labelPlacement=\"floating\" placeholder=\"сумма\" inputmode=\"decimal\" autocomplete=\"transaction-amount\" min=\"1\"></ion-input>\r\n            </ion-item>\r\n            <ion-item>\r\n                <ion-textarea v-model=\"transaction.trans_description\" label=\"Комментарий\" labelPlacement=\"floating\"></ion-textarea>\r\n            </ion-item>\r\n            <ion-item lines=\"full\">\r\n                <ion-toggle v-model=\"transaction.is_disabled\">Отключена</ion-toggle>\r\n            </ion-item>\r\n            <ion-item lines=\"none\" v-if=\"transaction.created_at\">\r\n                <ion-label color=\"medium\">Создано <b>{{transaction.created_user_name}}</b></ion-label>\r\n                <ion-text color=\"medium\">{{transaction.created_at}}</ion-text>\r\n            </ion-item>\r\n            <ion-item lines=\"none\" v-if=\"transaction.updated_at\">\r\n                <ion-label color=\"medium\">Изменено <b>{{transaction.updated_user_name}}</b></ion-label>\r\n                <ion-text color=\"medium\">{{transaction.updated_at}}</ion-text>\r\n            </ion-item>\r\n        </ion-list>\r\n        <ion-grid v-if=\"transaction\">\r\n            <ion-row>\r\n                <ion-col><ion-button color=\"medium\" @click=\"itemDelete()\" expand=\"block\" fill=\"outline\">Удалить</ion-button></ion-col>\r\n                <ion-col><ion-button color=\"primary\" @click=\"itemSave()\" expand=\"block\">Сохранить</ion-button></ion-col>\r\n            </ion-row>\r\n        </ion-grid>\r\n    </base-layout>\r\n</template>\r\n<script >\r\nimport {\r\n  IonInput,\r\n  IonIcon,\r\n  IonList,\r\n  IonItem,\r\n  IonToggle,\r\n  IonLabel,\r\n  IonSelect,\r\n  IonSelectOption,\r\n  IonTextarea,\r\n  IonButton,\r\n  IonGrid,\r\n  IonRow,\r\n  IonCol,\r\n  IonChip,\r\n  IonText,\r\n  modalController,\r\n}                          from '@ionic/vue';\r\nimport {\r\n    trashOutline,\r\n    searchOutline,\r\n    addOutline,\r\n    closeCircle,\r\n}                          from 'ionicons/icons'\r\nimport jquery              from 'jquery'\r\nimport User                from '@/scripts/User.js'\r\nimport Utils               from '@/scripts/Utils.js'\r\nimport ItemPicker          from '@/components/ItemPicker.vue'\r\n\r\nconst transTypes=[\r\n    {\r\n        'trans_role':'profit->site',\r\n        'holder':['order','store','courier'],\r\n        'trans_name':'Сайт Доход от доставки',\r\n        'trans_description':'Доход от доставки. Заказ №{{order_id}}',\r\n    },\r\n    {\r\n        'trans_role':'site->profit',\r\n        'holder':[],\r\n        'trans_name':'Сайт Списание месячной прибыли',\r\n        'trans_description':'Списание месячной прибыли',\r\n    },\r\n    {\r\n        'trans_role':'site->supplier',\r\n        'holder':['store'],\r\n        'trans_name':'Продавец Выплата',\r\n        'trans_description':'Выплата по договору за выполненные заказы',\r\n    },\r\n    {\r\n        'trans_role':'site.->supplier',\r\n        'holder':['order','store'],\r\n        'trans_name':'Продавец Штраф',\r\n        'trans_description':'Средства взимаемые с Продавца для воврата оплаты Покупателю. Заказ №{{order_id}}',\r\n    },\r\n    {\r\n        'trans_role':'supplier->site',\r\n        'holder':['order','store'],\r\n        'trans_name':'Продавец Отгрузка заказа',\r\n        'trans_description':'Стоимость товара, отгруженного Покупателю. Заказ №{{order_id}}',\r\n    },\r\n    {\r\n        'trans_role':'profit->supplier',\r\n        'holder':['order','store'],\r\n        'trans_name':'Продавец Комиссия сайта',\r\n        'trans_description':'Комиссия сайта за предоставленные услуги. Заказ №{{order_id}}',\r\n    },\r\n    {\r\n        'trans_role':'supplier->site',\r\n        'holder':['store'],\r\n        'trans_name':'Продавец Получение аванса',\r\n        'trans_description':'Аванс за услуги сайта',\r\n    },\r\n    {\r\n        'trans_role':'supplier->profit',\r\n        'holder':['store'],\r\n        'trans_name':'Продавец Начисление бонуса при регистрации',\r\n        'trans_description':'Начисление бонуса на услуги при регистрации на сайте',\r\n    },\r\n    {\r\n        'trans_role':'site->courier',\r\n        'holder':['courier'],\r\n        'trans_name':'Курьер Выплата',\r\n        'trans_description':'Выплата по договору за оказанные услуги',\r\n    },\r\n    {\r\n        'trans_role':'courier->profit',\r\n        'holder':['order','courier'],\r\n        'trans_name':'Курьер Начисление бонуса',\r\n        'trans_description':'Начисление бонуса за Заказ №{{order_id}}',\r\n    },\r\n    {\r\n        'trans_role':'profit->courier',\r\n        'holder':['order','courier'],\r\n        'trans_name':'Курьер Штраф',\r\n        'trans_description':'Штраф за не выполнение Заказа №{{order_id}}',\r\n    },\r\n]\r\n\r\nexport default {\r\n    components: {\r\n        IonInput,\r\n        IonIcon,\r\n        IonList,\r\n        IonItem,\r\n        IonToggle,\r\n        IonLabel,\r\n        IonSelect,\r\n        IonSelectOption,\r\n        IonTextarea,\r\n        IonButton,\r\n        IonGrid,\r\n        IonRow,\r\n        IonCol,\r\n        IonChip,\r\n        IonText,\r\n    },\r\n    setup(){\r\n        return {\r\n            trashOutline,\r\n            searchOutline,\r\n            addOutline,\r\n            closeCircle,\r\n            }\r\n    },\r\n    data(){\r\n        return{\r\n            transactionId: this.$route.params.id,\r\n            transaction:null,\r\n            transTypes,\r\n            tagDict:{},\r\n            tagHolderNames:{\r\n                order:'заказ',\r\n                store:'продавец',\r\n                courier:'курьер',\r\n                acc:'счет',\r\n            },\r\n            tagOptionNames:{\r\n                debit:\"(+)\",\r\n                credit:\"(-)\",\r\n            },\r\n        }\r\n    },\r\n    computed:{\r\n        tagRequired(){\r\n            return this.transTypeCurrent?.holder||[]\r\n        },\r\n        tagMissingNames(){\r\n            return this.tagRequired?.filter(holder=>!Object.keys(this.tagDict).join(':').includes(holder))||''\r\n        },\r\n        transTypeCurrent(){\r\n            return this.transTypes.find(trans_type => trans_type.trans_role==this.transaction.trans_role)||[];\r\n        }\r\n    },\r\n    created(){\r\n        const self=this\r\n        this.$topic.on('userGet',()=>{\r\n            self.init()\r\n        })\r\n        if( User.isAdmin() ){\r\n            this.init()\r\n        }\r\n    },\r\n    methods:{\r\n        init(){\r\n            if( !User.isAdmin() ){\r\n                this.$router.replace('/')\r\n            }\r\n            this.itemGet();\r\n        },\r\n        async itemGet(){\r\n            if(this.transactionId==0){\r\n                this.transaction={\r\n                    trans_date:Utils.date.toIso(Utils.date.today())\r\n                }\r\n                return\r\n            }\r\n            let request={\r\n                trans_id:this.transactionId\r\n            };\r\n            try{\r\n                this.transaction=await Utils.prePost(`${this.$heap.state.hostname}Transaction/itemGet`,request)\r\n                if(this.transaction){\r\n                    this.transaction.trans_date=this.transaction.trans_date?.substring(0,10)\r\n                    this.transaction.is_disabled=this.transaction.is_disabled*1\r\n                    this.tagDictFill(this.transaction.tags)\r\n                }\r\n\r\n                this.transaction=await Utils.post(`${this.$heap.state.hostname}Transaction/itemGet`,request)\r\n                this.transaction.trans_date=this.transaction.trans_date?.substring(0,10)\r\n                this.transaction.is_disabled=this.transaction.is_disabled*1\r\n                this.tagDictFill(this.transaction.tags)\r\n            }\r\n            catch(err){\r\n                const exception_code=err?.responseJSON?.messages?.error;\r\n                switch(exception_code){\r\n                    case 'forbidden':\r\n                        this.$flash(\"Не достаточно прав\");\r\n                        break;\r\n                    case 'notfound':\r\n                        this.$flash(\"Проводка не найдена\");\r\n                        break;\r\n                }\r\n                return false\r\n            }\r\n        },\r\n        validate(){\r\n            if( this.tagMissingNames.length>0 ){\r\n                this.$flash(\"Не выбраны все родительские элементы\")\r\n                return false\r\n            }\r\n            if( !(this.transaction.trans_role) ){\r\n                this.$flash(\"Тип проводки не выбран\")\r\n                return false\r\n            }\r\n            if( !(this.transaction.trans_date) ){\r\n                this.$flash(\"Дата не выбрана\")\r\n                return false\r\n            }\r\n            if( !(this.transaction.trans_amount) ){\r\n                this.$flash(\"Сумма должна не равняться нулю\")\r\n                return false\r\n            }\r\n            return true\r\n        },\r\n        async itemSave(){\r\n            if(!this.validate()){\r\n                return;\r\n            }\r\n            const tags=Object.keys(this.tagDict??{}).join(' ')\r\n            const request={\r\n                tags,\r\n                trans_id:this.transaction.trans_id,\r\n                trans_date:this.transaction.trans_date,\r\n                trans_amount:this.transaction.trans_amount,\r\n                trans_role:this.transaction.trans_role,\r\n                trans_description:this.transaction.trans_description,\r\n                is_disabled:this.transaction.is_disabled?1:0,\r\n            }\r\n            try{\r\n                const remoteFunction=request.trans_id?'itemUpdate':'itemCreate'\r\n                await jquery.post(`${this.$heap.state.hostname}Transaction/${remoteFunction}`,request)\r\n                this.$flash(\"💾 сохранено\")\r\n                this.$router.go(-1);\r\n            }\r\n            catch(err){\r\n                const exception_code=err?.responseJSON?.messages?.error;\r\n                switch(exception_code){\r\n                    case 'forbidden':\r\n                        this.$flash(\"Не достаточно прав\");\r\n                        break;\r\n                }\r\n                this.$flash(\"Не удалось сохранить проводку\")\r\n                return false\r\n            }\r\n        },\r\n        async itemUpdateRole(){\r\n            if( !this.transTypeCurrent ){\r\n                this.$flash(\"Неверный тип проводки\")\r\n                return\r\n            }\r\n            this.tagDictTruncate()\r\n        },\r\n        itemDescriptionRender(){\r\n            if(!this.transTypeCurrent.trans_description){\r\n                return\r\n            }\r\n            const template=this.transTypeCurrent.trans_description\r\n            let context=this.transaction\r\n            for(let tag in this.tagDict){\r\n                const tag_label=this.tagDict[tag]\r\n                const tag_array=tag.split(':');\r\n                const tag_name=tag_array[0]\r\n                context[`${tag_name}_id`]=tag_array[1]//order_id,courier_id etc\r\n            }\r\n            this.transaction.trans_description=Utils.render(template,context)\r\n        },\r\n        async itemDelete(){\r\n            if(!confirm(\"Вы уверенны?\")){\r\n                return\r\n            }\r\n            try{\r\n                await jquery.post(`${this.$heap.state.hostname}Transaction/itemDelete`,{trans_id:this.transactionId})\r\n                this.$router.go(-1);\r\n            }catch{/** */}\r\n        },\r\n        async tagDictPick( itemType ){\r\n            const modal = await modalController.create({\r\n                component: ItemPicker,\r\n                componentProps:{itemType},\r\n                initialBreakpoint: 0.75,\r\n                breakpoints: [0.75, 1],\r\n                canDissmiss:true,\r\n            });\r\n            modal.present()\r\n            this.$topic.on('dismissModal',()=>{\r\n                modal.dismiss()\r\n            });\r\n            const item=await modal.onDidDismiss();\r\n            if(!item.data){\r\n                return\r\n            }\r\n            if(item.data.order_id??0){\r\n                this.tagDictAdd([`order:${item.data.order_id}`,`заказ ${item.data.order_id}`])\r\n                const order=await jquery.post(`${this.$heap.state.hostname}Order/itemGet`,{order_id:item.data.order_id})\r\n                if( this.tagRequired.includes('store') && order.order_store_id ){\r\n                    this.tagDictNameRemove('store')\r\n                    item.data.store_id=order.order_store_id\r\n                    item.data.store_name=order?.store?.store_name\r\n                }\r\n                if( this.tagRequired.includes('courier') && order.order_courier_id ){\r\n                    const courier=await jquery.post(`${this.$heap.state.hostname}Courier/itemGet`,{courier_id:order.order_courier_id})\r\n                    this.tagDictNameRemove('courier')\r\n                    item.data.courier_id=courier.courier_id\r\n                    item.data.courier_name=courier.courier_name\r\n                }\r\n            }\r\n            if(item.data.store_id??0){\r\n                this.tagDictAdd([`store:${item.data.store_id}`,`продавец ${item.data.store_name??'?'}`])\r\n            }\r\n            if(item.data.courier_id??0){\r\n                this.tagDictAdd([`courier:${item.data.courier_id}`,`курьер ${item.data.courier_name??'?'}`])\r\n            }\r\n            if(item.data.type??0){\r\n                this.tagDictAdd([`acc::${item.data.type}`,`счет ${item.data.name??'?'}`])\r\n            }\r\n        },\r\n        tagDictAdd(tag){\r\n            let dict=this.tagDict??{}\r\n            dict[tag[0]]=tag[1]\r\n            this.tagDict=dict\r\n            this.itemDescriptionRender()\r\n        },\r\n        tagDictRemove(tag){\r\n            let dict=this.tagDict??{}\r\n            dict[tag] && delete dict[tag]\r\n            const size = Object.keys(dict).length\r\n            this.tagDict=size?dict:{}\r\n            this.itemDescriptionRender()\r\n        },\r\n        tagDictNameRemove(tag_name){\r\n            let dict=this.tagDict??{}\r\n            const tag=Object.keys(dict)?.find(tag=>tag.indexOf(tag_name)>-1)\r\n            this.tagDictRemove(tag)\r\n        },\r\n        tagDictTruncate(){\r\n            this.tagDict={}\r\n            this.itemDescriptionRender()\r\n        },\r\n        tagDictFill(tags){\r\n            let dict={}\r\n            if(tags){\r\n                for(let tag of tags){\r\n                    dict[`${tag.tag_name}:${tag.tag_id}:${tag.tag_type}:${tag.tag_option}`]=`${this.tagHolderNames[tag.tag_name]} ${this.tagOptionNames[tag.tag_option]??''} ${tag.tag_label??'(?)'}`\r\n                }\r\n            }\r\n            this.tagDict=dict\r\n            this.itemDescriptionRender()\r\n        }\r\n    },\r\n}\r\n</script>","import { render } from \"./TransactionEdit.vue?vue&type=template&id=4d7674c6\"\nimport script from \"./TransactionEdit.vue?vue&type=script&lang=js\"\nexport * from \"./TransactionEdit.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_createVNode","_component_ion_header","_component_ion_toolbar","_component_ion_title","_toDisplayString","$data","itemTypeName","_component_ion_icon","icon","$setup","closeOutline","onClick","_cache","$event","$options","closeModal","slot","size","_component_ion_content","_$data$itemList","itemTypeLabel","_createBlock","_component_ion_searchbar","query","placeholder","debounce","onIonInput","listGet","itemList","length","_component_ion_list","key","_Fragment","_renderList","item","_component_ion_item","id","button","detail","itemPick","_component_ion_avatar","image_hash","_component_ion_img","src","_ctx","$heap","state","hostname","name","i","_component_ion_skeleton_text","style","animated","props","components","IonContent","IonHeader","IonToolbar","IonTitle","IonIcon","IonImg","IonList","IonItem","IonSearchbar","IonSkeletonText","IonAvatar","setup","data","this","itemType","mounted","methods","ordersGet","storesGet","couriersGet","accountsGet","$flash","request","name_query","name_query_fields","limit","result","jQuery","map","store_name","store_id","_unused","user_name","user_phone","courier_id","courier_photo_image_hash","_unused2","order_id","_unused3","group_table","group_name","type","group_type","_unused4","modalController","dismiss","__exports__","render","_component_base_layout","pageDefaultBackLink","transaction","_component_ion_input","trans_date","label","labelPlacement","_component_ion_select","interface","trans_role","required","onIonChange","itemUpdateRole","transTypes","trans","_component_ion_select_option","value","trans_name","lines","_component_ion_label","position","color","_component_ion_text","tagDict","tagLabel","tag","_component_ion_chip","indexOf","closeCircle","tagDictRemove","tagMissingNames","tagHolder","tagDictPick","addOutline","tagHolderNames","onKeyup","_withKeys","itemSave","trans_amount","inputmode","autocomplete","min","_component_ion_textarea","trans_description","_component_ion_toggle","is_disabled","created_at","_createElementVNode","created_user_name","updated_at","updated_user_name","_component_ion_grid","_component_ion_row","_component_ion_col","_component_ion_button","itemDelete","expand","fill","IonInput","IonToggle","IonLabel","IonSelect","IonSelectOption","IonTextarea","IonButton","IonGrid","IonRow","IonCol","IonChip","IonText","trashOutline","searchOutline","transactionId","$route","params","order","store","courier","acc","tagOptionNames","debit","credit","computed","tagRequired","_this$transTypeCurren","transTypeCurrent","holder","_this$tagRequired","filter","Object","keys","join","includes","find","trans_type","created","self","$topic","on","init","User","isAdmin","$router","replace","itemGet","Utils","date","toIso","today","trans_id","_this$transaction$tra2","_this$transaction$tra","prePost","substring","tagDictFill","tags","post","err","_err$responseJSON","_err$responseJSON$mes","exception_code","responseJSON","messages","error","validate","_this$tagDict","remoteFunction","jquery","go","_err$responseJSON2","_err$responseJSON2$me","tagDictTruncate","itemDescriptionRender","template","context","tag_array","split","tag_name","confirm","_item$data$order_id","_item$data$store_id","_item$data$courier_id","_item$data$type","modal","create","component","ItemPicker","componentProps","initialBreakpoint","breakpoints","canDissmiss","present","onDidDismiss","tagDictAdd","_order$store","order_store_id","tagDictNameRemove","order_courier_id","courier_name","_item$data$store_name","_item$data$courier_na","_item$data$name","_this$tagDict2","dict","_this$tagDict3","_this$tagDict4","_Object$keys","_this$tagOptionNames$","_tag$tag_label","tag_id","tag_type","tag_option","tag_label"],"sourceRoot":""}