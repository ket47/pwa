"use strict";(self["webpackChunktezkel"]=self["webpackChunktezkel"]||[]).push([[986],{7986:function(t,e,o){o.r(e),o.d(e,{default:function(){return L}});o(3948),o(4916),o(5306);var l=o(6252),r=o(3577);const u=t=>((0,l.dD)("data-v-476c46c6"),t=t(),(0,l.Cn)(),t),d={key:0},i={key:0},a=u((()=>(0,l._)("ul",null,[(0,l._)("li",null,"–ù–∞–∑–≤–∞–Ω–∏–µ (–±–æ–ª—å—à–µ 5 –±—É–∫–≤), "),(0,l._)("li",null,"–¶–µ–Ω–∞, "),(0,l._)("li",null,"–ê–∫—Ç—É–∞–ª—å–Ω—ã–π –æ—Å—Ç–∞—Ç–æ–∫ (–µ—Å–ª–∏ –≤–µ–¥–µ—Ç—Å—è —É—á–µ—Ç), "),(0,l._)("li",null,"–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞")],-1))),n=["src"],c={style:{display:"grid","grid-template-columns":"1fr 1fr"}},p={key:0},m={key:2},s={key:0};function _(t,e,o,u,_,h){var g,f;const I=(0,l.up)("ion-progress-bar"),k=(0,l.up)("ion-card-title"),w=(0,l.up)("ion-card-header"),v=(0,l.up)("ion-text"),y=(0,l.up)("ion-card-content"),W=(0,l.up)("ion-card"),b=(0,l.up)("ion-icon"),U=(0,l.up)("ion-toggle"),V=(0,l.up)("ion-item"),O=(0,l.up)("ion-card-subtitle"),G=(0,l.up)("ion-label"),C=(0,l.up)("ion-input"),D=(0,l.up)("ion-button"),L=(0,l.up)("ion-item-divider"),P=(0,l.up)("ion-list"),$=(0,l.up)("ion-textarea"),q=(0,l.up)("ion-select-option"),j=(0,l.up)("ion-select"),Z=(0,l.up)("ion-item-group"),F=(0,l.up)("image-tile-comp"),x=(0,l.up)("base-layout");return(0,l.wg)(),(0,l.j4)(x,{"page-title":null!==(g=null===(f=_.productItem)||void 0===f?void 0:f.product_name)&&void 0!==g?g:"–¢–æ–≤–∞—Ä",pageDefaultBackLink:"/catalog"},{default:(0,l.w5)((()=>{var o,g;return[_.is_option_child?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",d,[(0,l.Wm)(W,{color:(null===(o=_.productItem)||void 0===o?void 0:o.validity)<_.validity_min?"danger":""},{default:(0,l.w5)((()=>{var t;return[(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l.Wm)(k,null,{default:(0,l.w5)((()=>{var t,e,o;return[(0,l.Uk)(" –§–æ—Ä–º–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∞ –Ω–∞ "+(0,r.zw)(null!==(t=null===(e=_.productItem)||void 0===e?void 0:e.validity)&&void 0!==t?t:0)+"% ",1),(0,l.Wm)(I,{value:(null===(o=_.productItem)||void 0===o?void 0:o.validity)/100},null,8,["value"])]})),_:1})])),_:1}),(null===(t=_.productItem)||void 0===t?void 0:t.validity)<_.validity_min?((0,l.wg)(),(0,l.j4)(y,{key:0},{default:(0,l.w5)((()=>[(0,l.Wm)(v,null,{default:(0,l.w5)((()=>{var t;return[(0,l.Uk)(" –í–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –∞–Ω–∫–µ—Ç—É –Ω–µ –º–µ–Ω—å—à–µ —á–µ–º –Ω–∞ "+(0,r.zw)(_.validity_min)+"% –¥–ª—è —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏—è –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–º ",1),0==(null===(t=_.productItem)||void 0===t?void 0:t.validity)?((0,l.wg)(),(0,l.iD)("p",i,[(0,l.Uk)("–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Ç–æ, —á—Ç–æ –ø–æ–ª—è "),a,(0,l.Uk)(" –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ ")])):(0,l.kq)("",!0)]})),_:1})])),_:1})):(0,l.kq)("",!0)]})),_:1},8,["color"]),h.message&&(null===(g=_.productItem)||void 0===g?void 0:g.validity)>_.validity_min?((0,l.wg)(),(0,l.j4)(W,{key:0},{default:(0,l.w5)((()=>[(0,l.Wm)(y,{class:(0,r.C_)(h.messageClass)},{default:(0,l.w5)((()=>[(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,r.zw)(h.message),1)])),_:1})])),_:1},8,["class"])])),_:1})):(0,l.kq)("",!0)])),_.productItem?((0,l.wg)(),(0,l.j4)(P,{key:1},{default:(0,l.w5)((()=>[(0,l.Wm)(V,null,{default:(0,l.w5)((()=>[(0,l.Wm)(b,{src:u.trashOutline,color:"primary",slot:"start"},null,8,["src"]),(0,l.Wm)(U,{modelValue:_.is_deleted,"onUpdate:modelValue":e[0]||(e[0]=t=>_.is_deleted=t),color:"danger",onIonChange:e[1]||(e[1]=t=>h.itemDelete(t.target.checked?1:0))},{default:(0,l.w5)((()=>[(0,l.Uk)("–£–¥–∞–ª–µ–Ω–æ")])),_:1},8,["modelValue"])])),_:1}),(0,l.Wm)(V,null,{default:(0,l.w5)((()=>[(0,l.Wm)(b,{src:u.calculatorOutline,color:"primary",slot:"start"},null,8,["src"]),_.productItem?((0,l.wg)(),(0,l.j4)(U,{key:0,modelValue:_.is_counted,"onUpdate:modelValue":e[2]||(e[2]=t=>_.is_counted=t),onIonChange:e[3]||(e[3]=t=>h.save("is_counted",t.target.checked?1:0))},{default:(0,l.w5)((()=>[(0,l.Uk)("–í–µ—Å—Ç–∏ —É—á–µ—Ç –æ—Å—Ç–∞—Ç–∫–æ–≤")])),_:1},8,["modelValue"])):(0,l.kq)("",!0)])),_:1}),_.is_option_child?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(V,{key:0},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{src:u.layersOutline,color:"primary",slot:"start"},null,8,["src"]),_.productItem?((0,l.wg)(),(0,l.j4)(U,{key:0,modelValue:_.is_option_parent,"onUpdate:modelValue":e[4]||(e[4]=t=>_.is_option_parent=t),onIonChange:e[5]||(e[5]=t=>{h.itemOptionSet(t.target.checked)})},{default:(0,l.w5)((()=>[(0,l.Uk)("–ò–º–µ–µ—Ç –≤–∞—Ä–∏–∞–Ω—Ç—ã")])),_:1},8,["modelValue"])):(0,l.kq)("",!0)])),_:1})),(0,l.Wm)(V,null,{default:(0,l.w5)((()=>[(0,l.Wm)(b,{src:u.ribbonOutline,color:"primary",slot:"start"},null,8,["src"]),(0,l.Wm)(U,{modelValue:_.is_disabled,"onUpdate:modelValue":e[6]||(e[6]=t=>_.is_disabled=t),onIonChange:e[7]||(e[7]=t=>h.itemDisable(t.target.checked?1:0))},{default:(0,l.w5)((()=>[(0,l.Uk)("–ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏")])),_:1},8,["modelValue"])])),_:1}),_.optionData?((0,l.wg)(),(0,l.iD)("div",{key:1,onChange:e[12]||(e[12]=(...t)=>h.saveForm&&h.saveForm(...t))},[(0,l.Wm)(W,{onClick:e[9]||(e[9]=e=>t.$router.replace(`product-edit-${_.optionData.parent.product_id}?refreshOptions=1`)),color:_.is_option_parent?"primary":"light"},{default:(0,l.w5)((()=>[(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l.Wm)(O,null,{default:(0,l.w5)((()=>[(0,l.Uk)(" –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π —Ç–æ–≤–∞—Ä ")])),_:1})])),_:1}),(0,l.Wm)(y,null,{default:(0,l.w5)((()=>[(0,l.Wm)(V,{color:"light",lines:"none"},{default:(0,l.w5)((()=>[(0,l._)("img",{slot:"start",style:{height:"70px","border-radius":"10px",margin:"3px"},src:`${t.$heap.state.hostname}image/get.php/${_.optionData.parent.image_hash}.70.70.webp`},null,8,n),(0,l.Wm)(G,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,r.zw)(_.optionData.parent.product_name),1)])),_:1})])),_:1}),_.productId==_.optionData.parent.product_id?((0,l.wg)(),(0,l.j4)(V,{key:0,color:"light"},{default:(0,l.w5)((()=>[(0,l.Wm)(C,{label:"–í–∞—Ä–∏–∞–Ω—Ç*","label-placement":"stacked",placeholder:"–Ω–∞–ø–∏—à–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç",name:"product_option",modelValue:_.productItem.product_option,"onUpdate:modelValue":e[8]||(e[8]=t=>_.productItem.product_option=t)},null,8,["modelValue"])])),_:1})):((0,l.wg)(),(0,l.j4)(V,{key:1,lines:"none",color:"light"},{default:(0,l.w5)((()=>[(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Uk)("["+(0,r.zw)(_.optionData.parent.product_option)+"]",1)])),_:1})])),_:1}))])),_:1})])),_:1},8,["color"]),(0,l._)("div",c,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(_.optionData.children,(o=>((0,l.wg)(),(0,l.j4)(W,{onClick:e=>t.$router.replace(`product-edit-${o.product_id}?refreshOptions=1`),key:o.product_id,color:_.productItem.product_id==o.product_id?"primary":""},{default:(0,l.w5)((()=>[(0,l.Wm)(y,null,{default:(0,l.w5)((()=>[_.productItem.product_id==o.product_id?((0,l.wg)(),(0,l.iD)("div",p,[(0,l.Wm)(V,{color:_.productItem.deleted_at?"danger":""},{default:(0,l.w5)((()=>[(0,l.Wm)(C,{label:"–í–∞—Ä–∏–∞–Ω—Ç*","label-placement":"stacked",placeholder:"–Ω–∞–ø–∏—à–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç",name:"product_option",modelValue:_.productItem.product_option,"onUpdate:modelValue":e[10]||(e[10]=t=>_.productItem.product_option=t)},null,8,["modelValue"])])),_:1},8,["color"]),_.productItem.image_hash?((0,l.wg)(),(0,l.j4)(V,{key:0},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{src:u.cameraOutline},null,8,["src"])])),_:1})):(0,l.kq)("",!0)])):((0,l.wg)(),(0,l.j4)(V,{key:1,lines:"none"},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{color:o.deleted_at?"danger":"medium"},{default:(0,l.w5)((()=>[(0,l.Uk)("["+(0,r.zw)(o.product_option)+"]",1)])),_:2},1032,["color"])])),_:2},1024))])),_:2},1024)])),_:2},1032,["onClick","color"])))),128)),(0,l.Wm)(W,null,{default:(0,l.w5)((()=>[(0,l.Wm)(y,null,{default:(0,l.w5)((()=>[(0,l.Wm)(D,{color:"light",expand:"block",onClick:e[11]||(e[11]=t=>h.itemOptionCreate())},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{src:u.addOutline},null,8,["src"]),(0,l.Uk)("–¥–æ–±–∞–≤–∏—Ç—å")])),_:1})])),_:1})])),_:1})])],32)):(0,l.kq)("",!0),_.is_option_child?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",m,[(0,l.Wm)(L),(0,l.Wm)(V,{button:"",onClick:e[13]||(e[13]=e=>t.$go("/catalog/product-"+_.productItem.product_id)),detail:"false"},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{src:u.chevronBack,slot:"start"},null,8,["src"]),(0,l.Uk)(" –ü–æ–∫–∞–∑–∞—Ç—å —Ç–æ–≤–∞—Ä ")])),_:1}),(0,l.Wm)(V,{button:"",onClick:e[14]||(e[14]=t=>h.showProductInStore()),detail:"false"},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{src:u.chevronBack,slot:"start"},null,8,["src"]),(0,l.Uk)(" –ü–æ–∫–∞–∑–∞—Ç—å –≤ –º–∞–≥–∞–∑–∏–Ω–µ ")])),_:1}),(0,l.Wm)(V,{button:"",onClick:e[15]||(e[15]=e=>t.$go("/catalog/store-edit-"+_.productItem.store_id)),detail:"false"},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{src:u.chevronBack,slot:"start"},null,8,["src"]),(0,l.Uk)(" –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–æ–º ")])),_:1})]))])),_:1})):(0,l.kq)("",!0),_.productItem?((0,l.wg)(),(0,l.iD)("form",{key:2,onChange:e[29]||(e[29]=(...t)=>h.saveForm&&h.saveForm(...t))},[(0,l.Wm)(P,{lines:"full"},{default:(0,l.w5)((()=>[(0,l.Wm)(Z,null,{default:(0,l.w5)((()=>[(0,l.Wm)(L,null,{default:(0,l.w5)((()=>[(0,l.Wm)(G,null,{default:(0,l.w5)((()=>[(0,l.Uk)("–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏")])),_:1})])),_:1}),_.is_option_child?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(V,{key:0},{default:(0,l.w5)((()=>[(0,l.Wm)(C,{modelValue:_.productItem.product_name,"onUpdate:modelValue":e[16]||(e[16]=t=>_.productItem.product_name=t),label:"–ù–∞–∑–≤–∞–Ω–∏–µ*",labelPlacement:"stacked",name:"product_name",placeholder:"–ø–æ–ª–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞",clearInput:"true"},null,8,["modelValue"])])),_:1})),_.is_option_child?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(V,{key:1},{default:(0,l.w5)((()=>[(0,l.Wm)($,{modelValue:_.productItem.product_description,"onUpdate:modelValue":e[17]||(e[17]=t=>_.productItem.product_description=t),label:"–û–ø–∏—Å–∞–Ω–∏–µ*",labelPlacement:"stacked",name:"product_description",rows:"6",placeholder:"—Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏, —Å–≤–æ–π—Å—Ç–≤–∞, —Å–æ—Å—Ç–∞–≤ —Ç–æ–≤–∞—Ä–∞"},null,8,["modelValue"])])),_:1})),(0,l.Wm)(V,null,{default:(0,l.w5)((()=>[(0,l.Wm)(C,{modelValue:_.productItem.product_code,"onUpdate:modelValue":e[18]||(e[18]=t=>_.productItem.product_code=t),label:"–ê—Ä—Ç–∏–∫—É–ª",labelPlacement:"stacked",name:"product_code",placeholder:"–∫–æ–¥ —Ç–æ–≤–∞—Ä–∞"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(V,null,{default:(0,l.w5)((()=>[(0,l.Wm)(C,{modelValue:_.productItem.product_barcode,"onUpdate:modelValue":e[19]||(e[19]=t=>_.productItem.product_barcode=t),label:"–®—Ç—Ä–∏—Ö–∫–æ–¥",labelPlacement:"stacked",name:"product_barcode",placeholder:"—à—Ç—Ä–∏—Ö–∫–æ–¥"},null,8,["modelValue"])])),_:1}),_.is_counted?((0,l.wg)(),(0,l.j4)(V,{key:2},{default:(0,l.w5)((()=>[(0,l.Wm)(C,{modelValue:_.productItem.product_quantity,"onUpdate:modelValue":e[20]||(e[20]=t=>_.productItem.product_quantity=t),label:`–û—Å—Ç–∞—Ç–æ–∫ ${_.productItem.product_unit}`,labelPlacement:"stacked",name:"product_quantity",placeholder:"–≤ –Ω–∞–ª–∏—á–∏–∏"},null,8,["modelValue","label"])])),_:1})):(0,l.kq)("",!0),(0,l.Wm)(V,null,{default:(0,l.w5)((()=>[(0,l.Wm)(C,{modelValue:_.productItem.product_quantity_min,"onUpdate:modelValue":e[21]||(e[21]=t=>_.productItem.product_quantity_min=t),label:`–ú–∏–Ω. –∑–∞–∫–∞–∑* ${_.productItem.product_unit}`,labelPlacement:"stacked",name:"product_quantity_min",type:"number",inputmode:"numeric",pattern:"\\d\\."},null,8,["modelValue","label"])])),_:1}),_.is_option_child?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(V,{key:3},{default:(0,l.w5)((()=>[(0,l.Wm)(j,{modelValue:_.productItem.product_unit,"onUpdate:modelValue":e[22]||(e[22]=t=>_.productItem.product_unit=t),label:"–ï–¥–∏–Ω–∏—Ü–∞*",labelPlacement:"stacked",name:"product_unit",onIonChange:h.saveForm},{default:(0,l.w5)((()=>[(0,l.Wm)(q,{value:"—à—Ç"},{default:(0,l.w5)((()=>[(0,l.Uk)("—à—Ç—É–∫–∞")])),_:1}),(0,l.Wm)(q,{value:"–ø–æ—Ä—Ü–∏—è"},{default:(0,l.w5)((()=>[(0,l.Uk)("–ø–æ—Ä—Ü–∏—è –≤–µ—Å")])),_:1}),(0,l.Wm)(q,{value:"–ø–æ—Ä—Ü–∏—è –º–ª"},{default:(0,l.w5)((()=>[(0,l.Uk)("–ø–æ—Ä—Ü–∏—è –æ–±—ä–µ–º")])),_:1}),(0,l.Wm)(q,{value:"–∫–≥"},{default:(0,l.w5)((()=>[(0,l.Uk)("–∫–∏–ª–æ–≥—Ä–∞–º–º")])),_:1}),(0,l.Wm)(q,{value:"–º"},{default:(0,l.w5)((()=>[(0,l.Uk)("–º–µ—Ç—Ä")])),_:1}),(0,l.Wm)(q,{value:"–ª"},{default:(0,l.w5)((()=>[(0,l.Uk)("–ª–∏—Ç—Ä")])),_:1})])),_:1},8,["modelValue","onIonChange"])])),_:1})),"–∫–≥"!=_.productItem.product_unit?((0,l.wg)(),(0,l.j4)(V,{key:4},{default:(0,l.w5)((()=>[(0,l.Wm)(C,{modelValue:_.productItem.product_weight,"onUpdate:modelValue":e[23]||(e[23]=t=>_.productItem.product_weight=t),label:"–ø–æ—Ä—Ü–∏—è –º–ª"==_.productItem.product_unit?"–û–±—ä–µ–º –ª*":`–í–µ—Å 1${_.productItem.product_unit} –≤ –∫–≥*`,labelPlacement:"stacked",name:"product_weight",type:"number",step:"0.1",inputmode:"numeric",pattern:"\\d\\."},null,8,["modelValue","label"])])),_:1})):(0,l.kq)("",!0)])),_:1})])),_:1}),(0,l.Wm)(P,{lines:"full"},{default:(0,l.w5)((()=>[(0,l.Wm)(Z,null,{default:(0,l.w5)((()=>[(0,l.Wm)(L,null,{default:(0,l.w5)((()=>[(0,l.Wm)(G,null,{default:(0,l.w5)((()=>[(0,l.Uk)("–¶–µ–Ω–∞")])),_:1})])),_:1})])),_:1}),t.is_option_same_price?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",s,[(0,l.Wm)(V,null,{default:(0,l.w5)((()=>[(0,l.Wm)(C,{modelValue:_.productItem.product_price,"onUpdate:modelValue":e[24]||(e[24]=t=>_.productItem.product_price=t),label:"–¶–µ–Ω–∞*",labelPlacement:"stacked",name:"product_price",type:"number",inputmode:"numeric"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(V,null,{default:(0,l.w5)((()=>[(0,l.Wm)(C,{modelValue:_.productItem.product_net_price,"onUpdate:modelValue":e[25]||(e[25]=t=>_.productItem.product_net_price=t),label:"–¶–µ–Ω–∞ –≤ –º–µ–Ω—é/–Ω–∞ –ø–æ–ª–∫–µ",labelPlacement:"stacked",name:"product_net_price",type:"number",inputmode:"numeric"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(V,null,{default:(0,l.w5)((()=>[(0,l.Wm)(C,{modelValue:_.productItem.product_promo_price,"onUpdate:modelValue":e[26]||(e[26]=t=>_.productItem.product_promo_price=t),label:"–¶–µ–Ω–∞ –∞–∫—Ü–∏–æ–Ω–Ω–∞—è",labelPlacement:"stacked",name:"product_promo_price",type:"number",inputmode:"numeric",color:"success"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(V,null,{default:(0,l.w5)((()=>[(0,l.Wm)(C,{type:"date",modelValue:_.productItem.product_promo_start,"onUpdate:modelValue":e[27]||(e[27]=t=>_.productItem.product_promo_start=t),label:"–ù–∞—á–∞–ª–æ –∞–∫—Ü–∏–∏",labelPlacement:"stacked",name:"product_promo_start"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(V,null,{default:(0,l.w5)((()=>[(0,l.Wm)(C,{type:"date",modelValue:_.productItem.product_promo_finish,"onUpdate:modelValue":e[28]||(e[28]=t=>_.productItem.product_promo_finish=t),label:"–ö–æ–Ω–µ—Ü –∞–∫—Ü–∏–∏",labelPlacement:"stacked",name:"product_promo_finish"},null,8,["modelValue"])])),_:1})]))])),_:1})],32)):(0,l.kq)("",!0),_.productItem&&!_.is_option_child?((0,l.wg)(),(0,l.j4)(P,{key:3},{default:(0,l.w5)((()=>[(0,l.Wm)(L,null,{default:(0,l.w5)((()=>[(0,l.Wm)(G,null,{default:(0,l.w5)((()=>[(0,l.Uk)("–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞*")])),_:1})])),_:1}),(0,l.Wm)(F,{images:_.productItem.images,image_holder_id:_.productItem.product_id,title:"–í–∏—Ç—Ä–∏–Ω–∞ —Ç–æ–≤–∞—Ä–∞ 5 —Ñ–æ—Ç–æ",controller:"Product",ref:"productImgs"},null,8,["images","image_holder_id"]),(0,l.Wm)(D,{onClick:e[30]||(e[30]=e=>t.$refs.productImgs.take_photo()),color:"light",expand:"block"},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{src:u.cameraOutline,slot:"start"},null,8,["src"]),(0,l.Uk)(" –î–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ –Ω–∞ –≤–∏—Ç—Ä–∏–Ω—É ")])),_:1})])),_:1})):(0,l.kq)("",!0),_.productItem&&h.categoryList&&!_.is_option_child?((0,l.wg)(),(0,l.j4)(P,{key:4},{default:(0,l.w5)((()=>[(0,l.Wm)(L,null,{default:(0,l.w5)((()=>[(0,l.Wm)(G,null,{default:(0,l.w5)((()=>[(0,l.Uk)("–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–∞*")])),_:1})])),_:1}),0==h.categoryList.length?((0,l.wg)(),(0,l.j4)(V,{key:0,color:"light"},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{src:u.compassOutline,slot:"start",color:"danger"},null,8,["src"]),(0,l.Wm)(G,{color:"danger"},{default:(0,l.w5)((()=>[(0,l.Uk)("–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–≤ —Ä–∞–∑–¥–µ–ª–µ '–î—Ä—É–≥–æ–µ')")])),_:1})])),_:1})):(0,l.kq)("",!0),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(h.categoryList,(t=>((0,l.wg)(),(0,l.j4)(V,{key:t.group_id},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{src:u.compassOutline,slot:"start",color:"primary"},null,8,["src"]),(0,l.Wm)(G,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,r.zw)(t.group_name),1)])),_:2},1024),(0,l.Wm)(b,{src:u.trashOutline,slot:"end",onClick:e=>h.categoryDelete(t.group_id,t.group_name)},null,8,["src","onClick"])])),_:2},1024)))),128)),(0,l.Wm)(V,{button:"",onClick:e[31]||(e[31]=t=>h.categoryAdd())},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{src:u.addOutline,slot:"start",color:"primary"},null,8,["src"]),(0,l.Wm)(G,null,{default:(0,l.w5)((()=>[(0,l.Uk)("–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏—é")])),_:1})])),_:1})])),_:1})):(0,l.kq)("",!0)]})),_:1},8,["page-title"])}var h=o(8534),g=(o(3123),o(8862),o(6699),o(6964)),f=o(8903),I=o(3914);const k={class:"ion-padding",slot:"content"};function w(t,e,o,u,d,i){const a=(0,l.up)("ion-title"),n=(0,l.up)("ion-icon"),c=(0,l.up)("ion-toolbar"),p=(0,l.up)("ion-header"),m=(0,l.up)("ion-searchbar"),s=(0,l.up)("ion-img"),_=(0,l.up)("ion-avatar"),h=(0,l.up)("ion-label"),g=(0,l.up)("ion-item"),f=(0,l.up)("ion-checkbox"),I=(0,l.up)("ion-list"),w=(0,l.up)("ion-accordion"),v=(0,l.up)("ion-accordion-group"),y=(0,l.up)("ion-skeleton-text"),W=(0,l.up)("ion-content");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,{color:"secondary"},{default:(0,l.w5)((()=>[(0,l.Wm)(a,null,{default:(0,l.w5)((()=>[(0,l.Uk)("–ö–∞—Ç–µ–≥–æ—Ä–∏–∏")])),_:1}),(0,l.Wm)(n,{slot:"end",onClick:e[0]||(e[0]=t=>{i.closeModal()}),icon:u.closeOutline,size:"large",color:"medium"},null,8,["icon"])])),_:1})])),_:1}),(0,l.Wm)(W,null,{default:(0,l.w5)((()=>[(0,l.Wm)(m,{placeholder:"–§–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º",modelValue:d.searchQuery,"onUpdate:modelValue":e[1]||(e[1]=t=>d.searchQuery=t)},null,8,["modelValue"]),i.groupListFiltered.length>0?((0,l.wg)(),(0,l.j4)(v,{key:0},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.groupListTree,(e=>((0,l.wg)(),(0,l.j4)(w,{key:e.group_id},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{slot:"header"},{default:(0,l.w5)((()=>[e.image_hash?((0,l.wg)(),(0,l.j4)(_,{key:0,slot:"start"},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{src:t.$heap.state.hostname+"image/get.php/"+e.image_hash+".50.50.webp"},null,8,["src"])])),_:2},1024)):(0,l.kq)("",!0),(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,r.zw)(e.group_name),1)])),_:2},1024)])),_:2},1024),(0,l._)("div",k,[(0,l.Wm)(I,null,{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.children,(e=>((0,l.wg)(),(0,l.iD)("div",{key:e.group_id},[(0,l.Wm)(g,null,{default:(0,l.w5)((()=>[e.image_hash?((0,l.wg)(),(0,l.j4)(_,{key:0,slot:"start"},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{src:t.$heap.state.hostname+"image/get.php/"+e.image_hash+".50.50.webp"},null,8,["src"])])),_:2},1024)):(0,l.kq)("",!0),(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,r.zw)(e.group_name),1)])),_:2},1024),(0,l.Wm)(f,{slot:"end",checked:e.is_marked,onClick:t=>i.mimickChage(t.target,e.group_id)},null,8,["checked","onClick"])])),_:2},1024)])))),128))])),_:2},1024)])])),_:2},1024)))),128))])),_:1})):((0,l.wg)(),(0,l.j4)(I,{key:1},{default:(0,l.w5)((()=>[((0,l.wg)(),(0,l.iD)(l.HY,null,(0,l.Ko)([1,2,3,4],(t=>(0,l.Wm)(g,{key:t},{default:(0,l.w5)((()=>[(0,l.Wm)(y,{style:{width:"100%"}})])),_:2},1024))),64))])),_:1}))])),_:1})],64)}o(4603),o(8450);var v=o(9755),y=o.n(v),W={props:["controller","memberId","memberOfIds","memberLimit"],components:{IonCheckbox:g.nz,IonContent:g.W2,IonHeader:g.Gu,IonToolbar:g.sr,IonTitle:g.wd,IonIcon:g.gu,IonImg:g.Xz,IonAvatar:g.BJ,IonLabel:g.Q$,IonList:g.q_,IonItem:g.Ie,IonAccordion:g.We,IonAccordionGroup:g.eh,IonSearchbar:g.VI,IonSkeletonText:g.CK},setup(){return{closeOutline:f.fID}},data(){return{searchQuery:"",groupList:null,checkedGroupList:[]}},created(){this.listGroupGet(),this.checkedGroupList=this.memberOfIds||[]},computed:{groupListFiltered(){var t,e;if(!this.searchQuery)return null!==(e=this.groupList)&&void 0!==e?e:[];const o=new RegExp(this.searchQuery.replace(/^[\w\d\s]/,"").replace(/\s/g,".*"),"im");return null!==(t=this.groupList.filter((t=>{var e;return null===(e=t.group_path)||void 0===e?void 0:e.match(o)})))&&void 0!==t?t:[]},groupListTree(){let t=[];for(let e of this.groupListFiltered){let o=t.findIndex((t=>e.group_parent_id==t.group_id));if(o<0){let l=this.groupList.find((t=>t.group_id==e.group_parent_id));if(!l)continue;l.children=[],o=t.push(l)-1}t[o].children.push(e)}return t},parentGroupList(){var t;return null===(t=this.groupListFiltered)||void 0===t?void 0:t.filter((t=>0==t.group_parent_id))},childGroupList(){let t={};for(let e of this.parentGroupList)t[e.group_id]=this.groupListFiltered.filter((t=>t.group_parent_id==e.group_id));return t}},methods:{listGroupGet(){var t=this;return(0,h.Z)((function*(){t.groupList=yield y().get(t.$heap.state.hostname+t.controller+"/listGroupGet"),t.itemMarkGroups()}))()},itemMarkGroups(){if(this.groupList)try{for(let t of this.groupList)t.is_marked=this.checkedGroupList.includes(t.group_id)?1:0}catch(t){}},itemUpdateGroup(t,e){var o=this;return(0,h.Z)((function*(){const l={[o.controller.toLowerCase()+"_id"]:o.memberId,is_joined:t,group_id:e};try{yield y().post(o.$heap.state.hostname+o.controller+"/itemUpdateGroup",l)}catch(r){o.$flash("–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ")}}))()},mimickChage(t,e){const o=this;setTimeout((()=>{o.groupChanged(t,e)}),0)},groupChanged(t,e){var o=this;return(0,h.Z)((function*(){const l=t.checked?1:0;if(l){if(o.checkedGroupList.length>=o.memberLimit)return o.$flash(`–ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –Ω–µ –±–æ–ª—å—à–µ ${o.memberLimit} –∫–∞—Ç–µ–≥–æ—Ä–∏–π`),void(t.checked=0);1==o.memberLimit&&o.closeModal(),o.checkedGroupList.push(e)}else o.checkedGroupList=o.checkedGroupList.filter((function(t,o,l){return t!=e}));o.itemUpdateGroup(l,e)}))()},closeModal(){g.Fy.dismiss(this.checkedGroupList)}}},b=o(3744);const U=(0,b.Z)(W,[["render",w]]);var V=U,O=o(2008),G=o(9042),C={components:{IonInput:g.pK,IonTextarea:g.g2,IonContent:g.W2,IonCard:g.PM,IonCardContent:g.FN,IonCardHeader:g.Zi,IonToggle:g.ho,IonIcon:g.gu,IonItem:g.Ie,IonList:g.q_,IonLabel:g.Q$,IonItemDivider:g.rH,IonItemGroup:g.Ub,IonButton:g.YG,IonProgressBar:g.X7,IonText:g.yW,IonSelect:g.t9,IonSelectOption:g.n0,IonImg:g.Xz,IonChip:g.hM,IonCardTitle:g.Dq,IonCardSubtitle:g.tO,IonCheckbox:g.nz,imageTileComp:I.Z},setup(){return{cameraOutline:f.kuq,trashOutline:f.gtu,banOutline:f.L6S,personOutline:f.QJ7,addOutline:f.s6O,calculatorOutline:f.ABu,compassOutline:f.gmD,chevronBack:f.Mny,layersOutline:f.Y1P,ribbonOutline:f.Muk}},data(){return{productId:this.$route.params.id,productItem:null,productGroupList:null,validity:0,validity_min:80,optionData:null,refreshOptions:this.$route.query.refreshOptions,is_option_parent:!1,is_option_child:!1,is_option_menu_open:!1,is_groups_marked:0,is_deleted:0,is_disabled:0,is_counted:0}},computed:{message(){var t,e,o;return null!==(t=this.productItem)&&void 0!==t&&t.deleted_at?"–¢–æ–≤–∞—Ä –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω –∏ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω. –í—ã –µ—â–µ –º–æ–∂–µ—Ç–µ –æ—Ç–º–µ–Ω–∏—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ":1==(null===(e=this.productItem)||void 0===e?void 0:e.is_disabled)?"–¢–æ–≤–∞—Ä –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω –∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏ —É –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞":1!=(null===(o=this.productItem)||void 0===o?void 0:o.is_counted)?"–¢–æ–≤–∞—Ä –∞–∫—Ç–∏–≤–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥–∞–∂–µ. –£—á–µ—Ç –æ—Å—Ç–∞—Ç–∫–æ–≤ —Ç–æ–≤–∞—Ä–∞ –Ω–µ –≤–µ–¥–µ—Ç—Å—è":"–¢–æ–≤–∞—Ä –∞–∫—Ç–∏–≤–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥–∞–∂–µ."},messageClass(){var t,e,o;return null!==(t=this.productItem)&&void 0!==t&&t.deleted_at?"deleted":1==(null===(e=this.productItem)||void 0===e?void 0:e.is_disabled)?"disabled":1!=(null===(o=this.productItem)||void 0===o?void 0:o.is_counted)?"primary":"active"},categoryList(){let t=[];try{let e=this.productItem.member_of_groups.group_ids.split(","),o=this.productItem.member_of_groups.group_names.split(",");for(let l in e)t.push({group_id:e[l],group_name:o[l]})}catch(e){}return t}},created(){this.listGroupGet(),this.itemGet()},ionViewDidEnter(){var t;this.refreshOptions&&null!==(t=this.productItem)&&void 0!==t&&t.product_parent_id&&this.itemOptionGet()},methods:{itemGet(){var t=this;return(0,h.Z)((function*(){try{let e=yield y().post(O.Z.state.hostname+"Product/itemGet",{product_id:t.productId});t.productItem=t.itemPrepare(e),t.itemParseFlags(),t.is_option_child=t.productItem.product_parent_id&&t.productItem.product_parent_id!=t.productItem.product_id,t.is_option_parent=t.productItem.product_parent_id&&t.productItem.product_parent_id==t.productItem.product_id,yield t.itemOptionGet()}catch(e){}}))()},itemPrepare(t){return t.product_promo_start&&(t.product_promo_start=t.product_promo_start.split(" ")[0]),t.product_promo_finish&&(t.product_promo_finish=t.product_promo_finish.split(" ")[0]),t},itemParseFlags(){this.is_deleted=null==this.productItem.deleted_at?0:1,this.is_disabled=0==this.productItem.is_disabled?0:1,this.is_counted=0==this.productItem.is_counted?0:1},itemDelete(t){var e=this;return(0,h.Z)((function*(){const o=t?"itemDelete":"itemUnDelete";try{yield y().post(O.Z.state.hostname+"Product/"+o,{product_id:e.productId}),e.productItem.deleted_at=t?1:null,(e.is_option_child||e.is_option_parent)&&e.itemOptionGet()}catch(l){e.itemGet()}}))()},itemDisable(t){var e=this;return(0,h.Z)((function*(){if(e.productItem.is_disabled!=t)try{yield y().post(O.Z.state.hostname+"Product/itemDisable",{product_id:e.productId,is_disabled:t}),e.productItem.is_disabled=t}catch(o){e.$flash("–ò–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ"),e.itemGet()}}))()},itemUpdate(t){var e=this;return(0,h.Z)((function*(){try{return yield y().post(O.Z.state.hostname+"Product/itemUpdate",JSON.stringify(t)),e.$flash("üíæ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ"),!0}catch(o){const t=o.responseJSON.messages.error;return null!==t&&void 0!==t&&t.includes("product_description")?e.$flash("–û–ø–∏—Å–∞–Ω–∏–µ —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–æ–µ"):null!==t&&void 0!==t&&t.includes("product_name")?e.$flash("–ù–∞–∑–≤–∞–Ω–∏–µ —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–æ–µ"):e.$flash("–ò–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ"),e.itemGet(),!1}}))()},itemOptionGet(){var t=this;return(0,h.Z)((function*(){t.productItem.product_parent_id||(t.optionData=null);const e={product_parent_id:t.productItem.product_parent_id};let o=yield y().post(`${t.$heap.state.hostname}Product/itemOptionGet`,e);t.optionData={parent:o[0],children:o.slice(1)}}))()},itemOptionCreate(){var t=this;return(0,h.Z)((function*(){var e,o,l;const r=null!==(e=null===(o=t.optionData)||void 0===o||null===(l=o.children)||void 0===l?void 0:l.length)&&void 0!==e?e:0,u={is_disabled:1,store_id:t.productItem.store_id,product_parent_id:t.productItem.product_parent_id,product_name:"OPTION",product_price:0,product_option:`–í–∞—Ä–∏–∞–Ω—Ç#${r}`};try{yield y().post(`${t.$heap.state.hostname}Product/itemCreate`,u),t.itemOptionGet()}catch(d){}}))()},itemOptionSet(t){var e=this;return(0,h.Z)((function*(){t?yield e.itemOptionSave(e.productId,e.productId):yield e.itemOptionDelete(e.productId),e.itemGet()}))()},itemOptionUpdate(t){return(0,h.Z)((function*(){}))()},itemOptionSave(t,e){var o=this;return(0,h.Z)((function*(){try{yield y().post(`${o.$heap.state.hostname}Product/itemOptionSave`,{product_id:t,product_parent_id:e})}catch(l){}}))()},itemOptionDelete(t){var e=this;return(0,h.Z)((function*(){if(confirm("–£–¥–∞–ª–∏—Ç—å —Ä–∞–∑–Ω–æ–≤–∏–¥–Ω–æ—Å—Ç–∏ —Ç–æ–≤–∞—Ä–∞?"))try{yield y().post(`${e.$heap.state.hostname}Product/itemOptionDelete`,{product_id:t}),e.itemOptionGet()}catch(o){}}))()},checkPromoPrice(t){const e=parseFloat(this.productItem.product_promo_price),o=parseFloat(this.productItem.product_price);if(o>0&&e>0&&o<=e){"product_promo_price"==t&&(this.productItem.product_price=e+1),"product_price"==t&&(this.productItem.product_promo_price=o-1);const l={product_id:this.productId,product_promo_price:this.productItem.product_promo_price,product_price:this.productItem.product_price};return this.itemUpdate(l),this.$flash("–ê–∫—Ü–∏–æ–Ω–Ω–∞—è —Ü–µ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –Ω–∏–∂–µ –æ—Å–Ω–æ–≤–Ω–æ–π. –í–Ω–∏–º–∞–Ω–∏–µ —Ü–µ–Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∞!"),!1}return!0},saveForm(t){const e=t.target.name,o=this.productItem[e]=t.target.value;this.checkPromoPrice(e)&&this.save(e,o)},save(t,e){var o=this;return(0,h.Z)((function*(){if(!o.productItem.product_id)return;let l={product_id:o.productItem.product_id,[t]:e};o.itemUpdate(l)&&(o.productItem[t]=e,o.itemParseFlags())}))()},categoryDelete(t,e){if(confirm("–ò—Å–∫–ª—é—á–∏—Ç—å —Ç–æ–≤–∞—Ä –∏–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "+e+"?"))try{this.itemUpdateGroup(0,t)}catch(o){}},categoryAdd(){var t=this;return(0,h.Z)((function*(){var e,o,l;const r=(null===(e=t.productItem)||void 0===e||null===(o=e.member_of_groups)||void 0===o||null===(l=o.group_ids)||void 0===l?void 0:l.split(","))||[],u=yield g.Fy.create({component:V,componentProps:{controller:"Product",memberId:t.productId,memberOfIds:r,memberLimit:1},initialBreakpoint:.75,breakpoints:[.75,1],canDissmiss:!0});u.present(),G.Z.on("dismissModal",(()=>{u.dismiss()})),yield u.onDidDismiss(),t.itemGet()}))()},itemUpdateGroup(t,e){var o=this;return(0,h.Z)((function*(){const l={product_id:o.productId,is_joined:t,group_id:e};try{yield y().post(O.Z.state.hostname+"Product/itemUpdateGroup",l)}catch(r){o.$flash("–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ")}o.itemGet()}))()},listGroupGet(){var t=this;return(0,h.Z)((function*(){try{t.productGroupList=yield y().get(O.Z.state.hostname+"Product/listGroupGet"),t.itemMarkGroups()}catch(e){}}))()},showProductInStore(){let t=0;try{t=this.productItem.member_of_groups.group_ids.split(",")[0]}catch(e){}this.$go({path:"store-"+this.productItem.store_id,query:{sub_group_id:t}})}}};const D=(0,b.Z)(C,[["render",_],["__scopeId","data-v-476c46c6"]]);var L=D}}]);
//# sourceMappingURL=986-legacy.878bcb59.js.map