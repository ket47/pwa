{"version":3,"file":"js/525.1a637ae2.js","mappings":"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","sources":["webpack://tezkel-delivery/./src/views/UserEdit.vue","webpack://tezkel-delivery/./src/views/UserEdit.vue?0119"],"sourcesContent":["<template>\r\n  <base-layout page-title=\"Мой профиль\"  page-default-back-link=\"/user-dashboard\" :errorMessage=\"error\">\r\n        <ion-list>\r\n          <ion-item>\r\n            <ion-label position=\"stacked\" color=\"primary\">Аватар</ion-label>\r\n            <ion-radio-group :value=\"fields.user_avatar_name\">\r\n              <ion-list style=\"margin-top:5px\">\r\n                <ion-item>\r\n                  <ion-thumbnail>\r\n                    <img :src=\"$heap.state.hostname+'img/avatar/man.png'\" />\r\n                  </ion-thumbnail>\r\n                  <ion-label>Муж.</ion-label>\r\n                  <ion-radio value=\"man\" @ionFocus=\"save('user_avatar_name', $event.target.value)\"></ion-radio>\r\n                </ion-item>\r\n                <ion-item>\r\n                  <ion-thumbnail>\r\n                    <img :src=\"$heap.state.hostname+'img/avatar/woman.png'\" />\r\n                  </ion-thumbnail>\r\n                  <ion-label>Жен.</ion-label>\r\n                  <ion-radio value=\"woman\" @ionFocus=\"save('user_avatar_name', $event.target.value)\"></ion-radio>\r\n                </ion-item>\r\n              </ion-list>\r\n            </ion-radio-group>\r\n          </ion-item>\r\n\r\n          <ion-item>\r\n            <ion-label position=\"stacked\" color=\"primary\">Имя</ion-label>\r\n            <ion-input \r\n              v-model=\"fields.user_name\" \r\n              name=\"user_name\" \r\n              type=\"text\" \r\n              :value=\"fields.user_name\"\r\n              @change=\"save('user_name', $event.target.value)\" \r\n              placeholder=\"Имя\"\r\n              required\r\n            ></ion-input>\r\n          </ion-item>\r\n\r\n          <ion-item>\r\n            <ion-label position=\"stacked\" color=\"primary\">Фамилия</ion-label>\r\n            <ion-input \r\n              v-model=\"fields.user_surname\" \r\n              name=\"user_surname\" \r\n              type=\"text\" \r\n              :value=\"fields.user_surname\"\r\n              @change=\"save('user_surname', $event.target.value)\" \r\n              placeholder=\"Фамилия\"\r\n            ></ion-input>\r\n          </ion-item>\r\n\r\n          <ion-item>\r\n            <ion-label position=\"stacked\" color=\"primary\">Отчество</ion-label>\r\n            <ion-input \r\n              v-model=\"fields.user_middlename\" \r\n              name=\"user_middlename\" \r\n              type=\"text\" \r\n              :value=\"fields.user_middlename\"\r\n              @change=\"save('user_middlename', $event.target.value)\" \r\n              placeholder=\"Отчество\"\r\n            ></ion-input>\r\n          </ion-item>\r\n          \r\n          <ion-item>\r\n            <ion-label position=\"stacked\" color=\"primary\">Телефон</ion-label>\r\n            <ion-input\r\n              v-model=\"fields.user_phone\"\r\n              name=\"user_phone\"\r\n              type=\"numeric\"\r\n              inputmode=\"tel\"\r\n              :value=\"fields.user_phone\"\r\n              @input=\"$event.target.value = phoneValidate($event);\"\r\n              @change=\"save('user_phone', $event.target.value)\"\r\n              placeholder=\"7(978)-000-00-00\"\r\n              spellcheck=\"false\"\r\n              autocapitalize=\"off\"\r\n              required\r\n            ></ion-input>\r\n            <ion-button slot=\"end\" v-if=\"fields.user_phone && (!fields.user_phone_verified || fields.user_phone_verified === '0')\" @click=\"phoneVerify\" expand=\"block\">Подтвердить</ion-button>\r\n            <ion-button slot=\"end\" v-if=\"fields.user_phone && fields.user_phone_verified && fields.user_phone_verified !== '0'\" expand=\"block\" disabled=\"true\">Подтверждено</ion-button>\r\n          </ion-item>\r\n\r\n          <ion-item>\r\n            <ion-label position=\"stacked\" color=\"primary\">Электронная почта</ion-label>\r\n            <ion-input \r\n              v-model=\"fields.user_email\" \r\n              name=\"user_email\" \r\n              type=\"email\" \r\n              :value=\"fields.user_email\"\r\n              @change =\"save('user_email', $event.target.value)\" \r\n              placeholder=\"Электронная почта\"\r\n            ></ion-input>\r\n          </ion-item>\r\n\r\n        </ion-list>\r\n\r\n        <ion-row responsive-sm>\r\n          <ion-col>\r\n            <ion-button @click=\"passwordReset\" expand=\"block\">Сбросить пароль</ion-button>\r\n          </ion-col>\r\n        </ion-row>\r\n  </base-layout>\r\n</template>\r\n\r\n<script>\r\nimport router from '../router';\r\nimport jQuery from \"jquery\";\r\nimport heap from '../heap';\r\n\r\n\r\n\r\nexport default  {\r\n  name: 'SignIn',\r\n  data(){\r\n    return {\r\n      error: '',\r\n      submitted: false,\r\n      config: {\r\n        phoneMask: '+0(000)-000-00-00'\r\n      },\r\n      fields: heap.state.user,\r\n      modalOpen: false\r\n    }\r\n  },\r\n  computed: {\r\n    phoneValid() {\r\n      return this.fields.user_phone.replace(/\\D/g,\"\").length == 11;\r\n    }\r\n  },\r\n  methods:{\r\n    async save(field_name, field_value) {\r\n      this.submitted = true;\r\n      if(field_name == 'user_phone'){\r\n        if(!this.phoneValid){\r\n          return false;\r\n        }\r\n        field_value = field_value.replace(/\\D/g,\"\");\r\n      }\r\n      var requestData = {};\r\n      requestData.user_id = heap.state.user.user_id;\r\n      requestData[field_name] = field_value;\r\n      try{\r\n        await jQuery.post( heap.state.hostname + \"User/itemUpdate\", JSON.stringify(requestData))\r\n        this.getUserData()\r\n      }catch{/** */}\r\n    },\r\n    getUserData(){\r\n      var self = this;\r\n      jQuery.post( heap.state.hostname + \"User/itemGet\")\r\n        .done(function(response) {\r\n            heap.commit('setUser', response);\r\n            self.fields = response;\r\n        })\r\n        .fail(function(err) {\r\n            self.error = err.responseJSON.messages.error;\r\n        });\r\n    },\r\n    phoneVerify(){\r\n      var self = this;\r\n      jQuery.post( heap.state.hostname + \"User/phoneVerificationSend\", {user_phone: this.fields.user_phone.replace(/\\D/g,\"\")})\r\n        .done(function() {\r\n            router.push({name: 'UserVerifyPhone', params: {phone: self.fields.user_phone.replace(/\\D/g,\"\")}});\r\n        })\r\n        .fail(function(err) {\r\n            self.error = err.responseJSON.messages.error;\r\n        });\r\n    },\r\n    phoneValidate(ev) {\r\n      this.fields.user_phone = ev.target.value;\r\n      this.fields.user_phone = this.fields.user_phone.replace(/\\D/g,\"\");\r\n      if(this.fields.user_phone.length > 11){\r\n        this.fields.user_phone = this.fields.user_phone.substring(0, 11);\r\n      }\r\n      let result = '';\r\n      let numberIndex = 0; \r\n      for(let index in this.config.phoneMask){\r\n        if(!this.fields.user_phone[numberIndex]){\r\n          break;\r\n        }\r\n        let character = this.config.phoneMask[index];\r\n        if(character == '0'){\r\n          result += this.fields.user_phone[numberIndex];\r\n          numberIndex++;\r\n        } else {\r\n          result += character\r\n        }\r\n      }\r\n      this.fields.user_phone = result;\r\n      return this.fields.user_phone;\r\n    },\r\n  },\r\n  watch: {\r\n    '$route' (to, from) {\r\n      if(to.path != from.path) { \r\n        this.fields = heap.state.user\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>","import { render } from \"./UserEdit.vue?vue&type=template&id=30592aa4\"\nimport script from \"./UserEdit.vue?vue&type=script&lang=js\"\nexport * from \"./UserEdit.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"W:\\\\Ionic\\\\Tezkel\\\\blank\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createBlock","_component_base_layout","errorMessage","$data","_createVNode","_component_ion_list","_component_ion_item","_component_ion_label","position","color","_component_ion_radio_group","value","user_avatar_name","style","_component_ion_thumbnail","_createElementVNode","src","_ctx","state","hostname","_component_ion_radio","onIonFocus","$options","$event","target","_component_ion_input","user_name","name","type","onChange","placeholder","required","user_surname","user_middlename","user_phone","inputmode","onInput","spellcheck","autocapitalize","user_phone_verified","_component_ion_button","slot","onClick","expand","disabled","user_email","_component_ion_row","_component_ion_col","data","error","submitted","config","phoneMask","fields","heap","modalOpen","computed","phoneValid","this","replace","length","methods","async","field_name","field_value","requestData","user_id","jQuery","JSON","stringify","getUserData","self","done","response","fail","err","responseJSON","messages","phoneVerify","router","params","phone","phoneValidate","ev","substring","result","numberIndex","index","character","watch","to","from","path","__exports__","render"],"sourceRoot":""}