"use strict";(self["webpackChunktezkel"]=self["webpackChunktezkel"]||[]).push([[222],{6222:function(e,t,l){l.r(t),l.d(t,{default:function(){return p}});var o=l(6252),n=l(3577);function a(e,t,l,a,u,i){const s=(0,o.up)("ion-card-title"),r=(0,o.up)("ion-card-header"),d=(0,o.up)("ion-label"),c=(0,o.up)("ion-input"),p=(0,o.up)("ion-item"),m=(0,o.up)("router-link"),f=(0,o.up)("ion-text"),_=(0,o.up)("ion-checkbox"),w=(0,o.up)("ion-button"),k=(0,o.up)("ion-card-content"),h=(0,o.up)("ion-card"),g=(0,o.up)("ion-icon"),W=(0,o.up)("base-layout");return(0,o.wg)(),(0,o.j4)(W,{"page-title":"Панель управления продавца"},{default:(0,o.w5)((()=>{var l;return[e.$heap.state.user.user_id>1?((0,o.wg)(),(0,o.j4)(h,{key:0,color:"light"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Регистрация нового магазина")])),_:1})])),_:1}),(0,o.Wm)(k,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p,{lines:"full"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{position:"stacked",color:"primary"},{default:(0,o.w5)((()=>[(0,o.Uk)("Название магазина или ресторана*")])),_:1}),(0,o.Wm)(c,{modelValue:u.store_name,"onUpdate:modelValue":t[0]||(t[0]=e=>u.store_name=e),placeholder:"Название*"},null,8,["modelValue"])])),_:1}),(0,o.Wm)(p,{lines:"none"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,null,{default:(0,o.w5)((()=>[(0,o.Uk)(" Подавая заявку вы даете согласие на условия "),(0,o.Wm)(m,{to:"/page/rules-supplier"},{default:(0,o.w5)((()=>[(0,o.Uk)("Договор поставки товаров и услуг")])),_:1})])),_:1}),(0,o.Wm)(_,{slot:"end",modelValue:u.contractAccepted,"onUpdate:modelValue":t[1]||(t[1]=e=>u.contractAccepted=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(w,{expand:"block",onClick:t[2]||(t[2]=e=>i.itemCreate()),disabled:!u.contractAccepted||!u.store_name},{default:(0,o.w5)((()=>[(0,o.Uk)("Стать продавцом")])),_:1},8,["disabled"])])),_:1})])),_:1})):((0,o.wg)(),(0,o.j4)(h,{key:1,color:"light"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Необходимо зарегистрироваться")])),_:1})])),_:1}),(0,o.Wm)(k,null,{default:(0,o.w5)((()=>[(0,o.Uk)(" Чтобы стать продавцом, нужно быть зарегистрированным пользователем. Вы можете зарегистрироваться за 2 минуты. "),(0,o.Wm)(w,{expand:"block",onClick:t[3]||(t[3]=t=>e.$go("/user/sign-up"))},{default:(0,o.w5)((()=>[(0,o.Uk)("Зарегистрироваться")])),_:1})])),_:1})])),_:1})),(null===(l=u.storeList)||void 0===l?void 0:l.length)>0?((0,o.wg)(),(0,o.j4)(h,{key:2,color:"light"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Зарегистрированые магазины")])),_:1})])),_:1}),(0,o.Wm)(k,null,{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(u.storeList,(t=>((0,o.wg)(),(0,o.j4)(p,{key:t.store_id,detail:"",button:"",onClick:l=>e.$go(`/catalog/store-edit-${t.store_id}`)},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{icon:a.storefrontOutline,slot:"start"},null,8,["icon"]),(0,o.Uk)(" "+(0,n.zw)(t.store_name||t.store_name_new||"- - -"),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})):(0,o.kq)("",!0)]})),_:1})}var u=l(6038),i=l(8903),s=(l(9755),l(2008),l(351)),r={components:{IonInput:u.pK,IonCard:u.PM,IonCardHeader:u.Zi,IonCardTitle:u.Dq,IonCardContent:u.FN,IonLabel:u.Q$,IonItem:u.Ie,IonButton:u.YG,IonCheckbox:u.nz,IonText:u.yW,IonIcon:u.gu},setup(){return{storefrontOutline:i.qRG}},data(){return{supprier:s.Z.supplier.status,store_name:null,contractAccepted:0,storeList:null}},mounted(){const e=this;this.listGet(),this.$topic.on("userGet",(function(){e.storeList||e.listGet()}))},methods:{async itemCreate(){try{if(!this.store_name)return void this.$flash("Название обязательно");const e=await s.Z.supplier.storeItemCreate(this.store_name);if(!e)return void this.$flash("Не удалось создать магазин или ресторан");this.$go(`/catalog/store-edit-${e}`)}catch(l){var e,t;const o=null===(e=l.responseJSON)||void 0===e||null===(t=e.messages)||void 0===t?void 0:t.error;"limit_exeeded"==o&&this.$flash("У вас зарегистрировано максимальное количество магазинов"),this.$flash("Не удалось создать магазин или ресторан")}},async listGet(){this.storeList=await s.Z.supplier.listGet()}}},d=l(3744);const c=(0,d.Z)(r,[["render",a],["__scopeId","data-v-6f97a1ac"]]);var p=c}}]);
//# sourceMappingURL=222-legacy.266f0f9c.js.map