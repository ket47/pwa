"use strict";(self["webpackChunktezkel"]=self["webpackChunktezkel"]||[]).push([[263],{1263:function(e,t,n){n.r(t),n.d(t,{default:function(){return I}});var o=n(6252),i=n(3577);const r=(0,o.Uk)(" Подтверждение номера телефона "),u=(0,o.Uk)(" Мы выслали вам смс с кодом подтверждения на номер "),a=(0,o.Uk)(". Введите 4 цифры из смс ниже "),s={novalidate:""},l=(0,o.Uk)("Код подтверждения из смс"),h=(0,o.Uk)("Подтвердить");function c(e,t,n,c,d,p){const m=(0,o.up)("ion-card-title"),f=(0,o.up)("ion-card-header"),_=(0,o.up)("ion-card-content"),w=(0,o.up)("ion-card"),k=(0,o.up)("ion-label"),I=(0,o.up)("ion-input"),v=(0,o.up)("ion-col"),$=(0,o.up)("ion-row"),b=(0,o.up)("ion-item"),W=(0,o.up)("ion-list"),g=(0,o.up)("ion-button"),y=(0,o.up)("base-layout");return(0,o.wg)(),(0,o.j4)(y,{"page-title":"Подтверждение телефона","page-default-back-link":"/home"},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{color:"light"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,null,{default:(0,o.w5)((()=>[(0,o.Wm)(m,{color:"primary"},{default:(0,o.w5)((()=>[r])),_:1})])),_:1}),(0,o.Wm)(_,null,{default:(0,o.w5)((()=>[u,(0,o._)("b",null,(0,i.zw)(d.user_phone),1),a])),_:1})])),_:1}),(0,o._)("form",s,[(0,o.Wm)(W,null,{default:(0,o.w5)((()=>[(0,o.Wm)(b,null,{default:(0,o.w5)((()=>[(0,o.Wm)($,null,{default:(0,o.w5)((()=>[(0,o.Wm)(v,null,{default:(0,o.w5)((()=>[(0,o.Wm)(k,{position:"stacked",color:"primary"},{default:(0,o.w5)((()=>[l])),_:1}),(0,o.Wm)(I,{modelValue:d.verification_code,"onUpdate:modelValue":t[0]||(t[0]=e=>d.verification_code=e),type:"numeric",inputmode:"numeric",placeholder:"- - - -",onIonInput:t[1]||(t[1]=e=>{d.verification_code=e.target.value,p.onSubmit()}),enterkeyhint:"go",required:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,o.Wm)($,{"responsive-sm":""},{default:(0,o.w5)((()=>[(0,o.Wm)(v,null,{default:(0,o.w5)((()=>[(0,o.Wm)(g,{onClick:t[2]||(t[2]=e=>p.onSubmit()),expand:"block"},{default:(0,o.w5)((()=>[h])),_:1})])),_:1})])),_:1})])])),_:1})}var d=n(3741),p=n(9755),m=n.n(p),f=n(351),_={name:"UserVerifyPhone",components:{IonLabel:d.Q$,IonCol:d.wI,IonInput:d.pK,IonRow:d.Nd,IonButton:d.YG,IonCard:d.PM,IonCardHeader:d.Zi,IonCardTitle:d.Dq,IonCardContent:d.FN,IonItem:d.Ie,IonList:d.q_},data(){return{verification_code:null,user_phone:this.$route.params.user_phone||this.$route.query.user_phone||""}},created(){this.smsSend()},ionViewDidEnter(){this.smsSend()},methods:{smsSend(){if(this.user_phone=this.$route.params.user_phone||this.$route.query.user_phone||"",!this.user_phone)return;let e={user_phone:this.user_phone};try{m().post(`${this.$heap.state.hostname}User/phoneVerificationSend`,e)}catch{}},async onSubmit(){if(this.verification_code&&4==String(this.verification_code).length)try{await m().post(`${this.$heap.state.hostname}/User/phoneVerificationCheck`,{user_phone:this.user_phone,verification_code:this.verification_code}),f.Z.autoSignIn(),this.$router.push("/home"),this.$flash("Номер телефона верифицирован")}catch(e){const t=e.responseJSON.messages.error;switch(t){case"verification_not_found":this.$flash("Код верификации устарел"),this.$router.push("sign-in");break}this.$flash("Не удалось верифицировать телефон")}}}},w=n(3744);const k=(0,w.Z)(_,[["render",c]]);var I=k}}]);
//# sourceMappingURL=263.a24f99ad.js.map