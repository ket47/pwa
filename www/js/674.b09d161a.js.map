{"version":3,"file":"js/674.b09d161a.js","mappings":"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","sources":["webpack://tezkel/./src/views/ShipmentCheckout.vue","webpack://tezkel/./src/views/ShipmentCheckout.vue?45d4"],"sourcesContent":["<style scoped>\r\n    ion-segment{\r\n        --background: var(--ion-color-light);\r\n    }\r\n    ion-segment ion-segment-button{\r\n        padding: 10px;\r\n        --color: var(--ion-color-medium);\r\n        --color-checked: #fff;\r\n        --indicator-color: var(--ion-color-primary-shade);\r\n    }\r\n    ion-segment ion-segment-button ion-label{\r\n        font-weight: bold;\r\n        --color:#000\r\n    }\r\n    ion-segment ion-segment-button span{\r\n        font-size:0.8em;\r\n    }\r\n</style>\r\n\r\n<template>\r\n    <base-layout pageTitle=\"Оформление доставки посылки\" :pageDefaultBackLink=\"`/order/shipment-${order_id}`\" ref=\"page\">\r\n\r\n        <ion-list  lines=\"none\">\r\n            <ion-item-divider style=\"margin-top:0px;margin-bottom:10px;box-shadow:none;\">Доставка</ion-item-divider>\r\n            <!-- <ion-item>\r\n                Курьер отвезет вашу посылку\r\n            </ion-item>\r\n            <ion-item>\r\n                {{order?.order_description}}\r\n            </ion-item> -->\r\n            <ion-card v-if=\"tariffRule.routePlan?.start_plan_mode=='scheduled'\" color=\"light\">\r\n                <ion-card-content>\r\n                    <div style=\"display:grid;grid-template-columns:30% 70%\">\r\n                        <div><img src=\"../assets/icons/sleeping_wolf.png\" style=\"height:60px\"/></div>\r\n                        <div>\r\n                            Курьерская служба сейчас не работает. \r\n                            Доставим, когда Вам будет удобно.\r\n                        </div>\r\n                    </div>\r\n                </ion-card-content>\r\n            </ion-card>\r\n            <ion-item>\r\n                <ion-segment mode=\"ios\" v-model=\"deliveryPlanMode\">\r\n                    <ion-segment-button v-if=\"isAtonceEnabled\" value=\"inited\" @click=\"deliveryFinishScheduled=null\">\r\n                        <ion-icon :icon=\"rocketOutline\"></ion-icon>\r\n                        <ion-label>Отвезти сразу</ion-label>\r\n                        <span>как можно скорее</span>\r\n                    </ion-segment-button>\r\n                    <ion-segment-button v-else value=\"awaited\" @click=\"deliveryFinishScheduled=null\">\r\n                        <ion-icon :icon=\"timeOutline\"></ion-icon>\r\n                        <ion-label>Подождать</ion-label>\r\n                        <span>заказ в очереди</span>\r\n                    </ion-segment-button>\r\n                    <ion-segment-button value=\"scheduled\" @click=\"datetimePick()\">\r\n                        <ion-icon :icon=\"alarmOutline\"></ion-icon>\r\n                        <ion-label><b>Запланировать</b></ion-label>\r\n                        <span v-if=\"deliveryFinishLocal\">{{deliveryFinishLocal}}</span>\r\n                        <span v-else>выберите день и время</span>\r\n                    </ion-segment-button>\r\n                </ion-segment>\r\n            </ion-item>\r\n            <ion-item-divider>Оплата</ion-item-divider>\r\n            <ion-radio-group v-model=\"paymentType\">\r\n                <div>\r\n\r\n                <ion-item v-if=\"tariffRule.paymentByCreditStore==1\" button detail=\"false\" @click=\"paymentType='use_credit_store'\">\r\n                    <ion-icon :icon=\"businessOutline\" slot=\"start\" color=\"medium\"></ion-icon>\r\n                    <ion-radio value=\"use_credit_store\">\r\n                        Со счета предприятия\r\n                        <div style=\"font-size:0.7em;color:var(--ion-color-medium)\">{{tariffRule.storeCreditName}} {{tariffRule.storeCreditBalance}}{{$heap.state.currencySign}}</div>                        \r\n                    </ion-radio>\r\n                </ion-item>                    \r\n                </div>\r\n\r\n<!-- \r\n                NODE INSERT ERROR OCCURS <ion-item v-if=\"tariffRule.paymentByCash==1\" button detail=\"false\" @click=\"paymentType='use_cash'\">\r\n                    <ion-icon :icon=\"cashOutline\" slot=\"start\" color=\"medium\"></ion-icon>\r\n                    <ion-radio value=\"use_cash\">\r\n                        Оплата наличными\r\n                    </ion-radio>\r\n                </ion-item> -->\r\n\r\n                <div v-if=\"tariffRule.paymentByCard==1\">\r\n                    <ion-item v-if=\"sbpPaymentAllow\" detail=\"false\" button>\r\n                        <ion-img style=\"width:22px;height: auto;\" :src=\"`/img/icons/card-sbp.svg`\" slot=\"start\"/>\r\n                        <ion-radio value=\"use_card_sbp\">\r\n                            СБП быстрая оплата\r\n                        </ion-radio>\r\n                    </ion-item>\r\n                    <ion-item detail=\"false\" button>\r\n                        <ion-icon :icon=\"cardOutline\" slot=\"start\" color=\"medium\"></ion-icon>\r\n                        <ion-radio value=\"use_card\">\r\n                            Банковская карта\r\n                        </ion-radio>\r\n                    </ion-item>\r\n                    <ion-item v-if=\"bankCardCalc?.card_type\" button detail=\"false\">\r\n                        <ion-img v-if=\"bankCardCalc.card_type\" style=\"width:22px;height: auto;\" :src=\"`/img/icons/card-${bankCardCalc.card_type.toLowerCase()}.svg`\" slot=\"start\"/>\r\n                        <ion-icon v-else :src=\"cardOutline\" slot=\"start\" color=\"medium\"/>\r\n                        <ion-radio value=\"use_card_recurrent\">\r\n                            Сохраненная карта {{bankCardCalc.label}}\r\n                        </ion-radio>\r\n                    </ion-item>\r\n                    <ion-item v-if=\"bankCardCalc?.card_type\" button detail @click=\"$go('/user/user-cards')\">\r\n                        <ion-label color=\"medium\">Выбрать другую карту</ion-label>\r\n                    </ion-item>\r\n                    <ion-item v-else-if=\"recurrentPaymentAllow\" button detail @click=\"$go('/user/user-cards')\">\r\n                        <ion-icon :icon=\"addOutline\" slot=\"start\" color=\"medium\"></ion-icon>\r\n                        <ion-label color=\"medium\">Добавить карту</ion-label>\r\n                    </ion-item>\r\n                </div>\r\n            </ion-radio-group>\r\n\r\n            <ion-item-divider>Итог</ion-item-divider>\r\n            <ion-accordion-group value=\"total\">\r\n                <ion-accordion value=\"total\">\r\n                    <ion-item slot=\"header\" >\r\n                        <ion-icon :icon=\"walletOutline\" slot=\"start\" color=\"medium\"></ion-icon>\r\n                        <ion-text color=\"medium\">Итого: </ion-text>\r\n                        <ion-label slot=\"end\" color=\"primary\">{{ tariffRule.deliverySum }}{{$heap.state.currencySign}}</ion-label>\r\n                    </ion-item>\r\n                    <ion-list slot=\"content\">\r\n                        <ion-item lines=\"none\">\r\n                            <ion-icon :icon=\"rocketOutline\" slot=\"start\" color=\"medium\"></ion-icon>\r\n                            <ion-text color=\"medium\">Вызов курьера</ion-text>\r\n                            <ion-label slot=\"end\" color=\"medium\">{{ tariffRule.deliveryCost }}{{$heap.state.currencySign}}</ion-label>\r\n                        </ion-item>\r\n                        <ion-item lines=\"none\">\r\n                            <ion-icon :icon=\"mapOutline\" slot=\"start\" color=\"medium\"></ion-icon>\r\n                            <ion-text color=\"medium\">Расстояние по карте {{ deliveryDistanceKm }}км</ion-text>\r\n                            <ion-label slot=\"end\" color=\"medium\">{{ deliveryFeeTotal }}{{$heap.state.currencySign}}</ion-label>\r\n                        </ion-item>\r\n                    </ion-list>\r\n                </ion-accordion>\r\n            </ion-accordion-group>\r\n\r\n            <ion-item>\r\n                <ion-text style=\"font-size:0.9em\">\r\n                    Я согласен(на) с <router-link to=\"/page/rules-customer\">офертой об оказании услуг доставки</router-link>\r\n                </ion-text>\r\n                <ion-checkbox slot=\"end\" v-model=\"termsAccepted\" aria-label=\"\"></ion-checkbox>\r\n            </ion-item>\r\n\r\n        </ion-list>\r\n\r\n        <ion-card v-if=\"checkoutError\" color=\"warning\">\r\n            <ion-card-content>{{checkoutError}}</ion-card-content>\r\n        </ion-card>\r\n        <!-- <ion-card v-else-if=\"deliveryPlanMode=='awaited'\" color=\"light\" @click=\"heavyLoadInfo()\">\r\n            <ion-card-content>\r\n                <p v-if=\"deliveryPlanMode=='awaited'\">Высокая загруженность</p>\r\n                 Планируемое время доставки {{deliveryFinishRange}} <ion-icon :src=\"alertCircleOutline\" color=\"warning\"/>.\r\n            </ion-card-content>\r\n        </ion-card> -->\r\n        <ion-button v-if=\"paymentType=='use_card' || paymentType=='use_card_recurrent'\" expand=\"block\" @click=\"proceed()\" :disabled=\"checkoutError\">Оплатить картой</ion-button>\r\n        <ion-button v-else expand=\"block\" @click=\"proceed()\" :disabled=\"checkoutError\">Вызвать курьера</ion-button>\r\n    </base-layout>\r\n</template>\r\n<script>\r\nimport {\r\n    alertController,\r\n    modalController,\r\n    IonText,\r\n    IonList,\r\n    IonItem,\r\n    IonIcon,\r\n    IonLabel,\r\n    IonSegment,\r\n    IonSegmentButton,\r\n    IonImg,\r\n    IonCard,\r\n    IonCardContent,\r\n    IonCardHeader,\r\n    IonCardTitle,\r\n    IonButton,\r\n    IonCheckbox,\r\n    IonItemDivider,\r\n    IonRadioGroup,\r\n    IonRadio,\r\n    IonAccordion,\r\n    IonAccordionGroup,\r\n}                               from '@ionic/vue'\r\nimport {\r\n    cubeOutline,\r\n    locationOutline,\r\n    flagOutline,\r\n    chevronDown,\r\n    addOutline,\r\n    checkmark,\r\n    cardOutline,\r\n    cashOutline,\r\n    businessOutline,\r\n    walletOutline,\r\n    alertCircleOutline,\r\n    mapOutline,\r\n    rocketOutline,\r\n    alarmOutline,\r\n    timeOutline,\r\n}                               from 'ionicons/icons';\r\nimport Utils                    from '@/scripts/Utils'\r\nimport jQuery                   from 'jquery'\r\nimport DateRangePicker          from '@/components/DateRangePicker.vue'\r\nimport OrderPaymentCardModal    from '@/components/OrderPaymentCardModal.vue'\r\n\r\nexport default {\r\n    components:{\r\n    // yandexMap,\r\n    // ymapMarker,\r\n    IonText,\r\n    IonList,\r\n    IonItem,\r\n    IonIcon,\r\n    IonLabel,\r\n    IonSegment,\r\n    IonSegmentButton,\r\n    IonImg,\r\n    IonCard,\r\n    IonCardContent,\r\n    IonCardHeader,\r\n    IonCardTitle,\r\n    IonButton,\r\n    IonCheckbox,\r\n    IonItemDivider,\r\n    IonRadioGroup,\r\n    IonRadio,\r\n    IonAccordion,\r\n    IonAccordionGroup,\r\n    },\r\n    setup(){\r\n        return {\r\n            cubeOutline,\r\n            locationOutline,\r\n            flagOutline,\r\n            chevronDown,\r\n            addOutline,\r\n            checkmark,\r\n            cardOutline,\r\n            cashOutline,\r\n            businessOutline,\r\n            walletOutline,\r\n            alertCircleOutline,\r\n            mapOutline,\r\n            rocketOutline,\r\n            alarmOutline,\r\n            timeOutline,\r\n        };\r\n    },\r\n    data(){\r\n        return {\r\n            order_id:this.$route.params.id,\r\n            order:null,\r\n            finishPlanSchedule:null,\r\n            bankCard:null,\r\n            routePlan:{\r\n                start_plan_mode:'inited'\r\n            },\r\n            tariffRule:{},\r\n            tariffRuleList:[],\r\n            errorCode:null,\r\n            paymentType:'use_card',\r\n\r\n            shipAutoloadClock:null,\r\n            termsAccepted:1,\r\n            iplocation:null,\r\n            recurrentPaymentAllow:this.$heap.state.settings?.other?.recurrentPaymentAllow==1?1:0,\r\n            sbpPaymentAllow:this.$heap.state.settings?.other?.sbpPaymentAllow==1?1:0,\r\n\r\n            deliveryFinishScheduled:null,\r\n            deliveryPlanMode:'inited',\r\n\r\n            is_checkout_data_loaded:0,\r\n        }\r\n    },\r\n    computed:{\r\n        deliveryFinishLocal(){\r\n            if(!this.deliveryFinishScheduled){\r\n                return null\r\n            }\r\n            const options = { month: 'short', day: 'numeric', hour:'numeric', minute:'numeric' };\r\n            const d = new Date(Date.parse(this.deliveryFinishScheduled));\r\n            return d.toLocaleDateString(undefined, options);\r\n        },\r\n        deliveryFinishRange(){\r\n            const finish_plan=this.routePlan.start_plan*1+this.routePlan.finish_arrival*1\r\n            if( !finish_plan ){\r\n                return null\r\n            }\r\n            const delta=900//round to 15 minutes\r\n            const finish_plan_from=Math.floor(finish_plan/delta)*delta\r\n            const finish_plan_to=finish_plan_from+delta\r\n            const from = new Date(finish_plan_from*1000);\r\n            const to   = new Date(finish_plan_to*1000);\r\n            try{\r\n                return `${from.getHours()}:${String(from.getMinutes()).padStart(2, '0')}-${to.getHours()}:${String(to.getMinutes()).padStart(2, '0')}`\r\n            } catch{/***/}\r\n            return null\r\n        },\r\n        isAtonceEnabled(){\r\n            return ['inited'].includes(this.routePlan.start_plan_mode)\r\n        },\r\n        deliveryFeeTotal(){\r\n            return Math.round(this.tariffRule.deliveryFee*this.deliveryDistanceKm) || 0\r\n        },\r\n        deliveryDistanceKm(){\r\n            return Math.round(this.routePlan.deliveryDistance/100)/10 || 0\r\n        },\r\n        checkoutError(){\r\n            // if( this.routePlan.start_plan_mode=='nocourier' ){\r\n            //     return `К сожалению, нет доступных курьеров`;\r\n            // }\r\n            if( this.errorCode=='no_input' ){\r\n                return \"Выберите адрес забора и доставки посылки\"\r\n            }\r\n            if( this.errorCode=='start_center_toofar' ){\r\n                return \"Адрес получения посылки слишком удален\"\r\n            }\r\n            if( this.errorCode=='finish_center_toofar' ){\r\n                return \"Адрес доставки посылки слишком удален\"\r\n            }\r\n            if( this.errorCode=='start_finish_toofar' ){\r\n                return \"Дальность доставки слишком большая\"\r\n            }\r\n            if( this.termsAccepted==0 ){\r\n                return `К сожалению, мы не можем доставить вам заказ, без согласия с условиями`\r\n            }\r\n            if( this.paymentType=='use_credit_store' && this.tariffRule.storeCreditBalance<this.tariffRule.deliverySum ){\r\n                return `На счету предприятия не достаточно средств`\r\n            }\r\n            return null\r\n        },\r\n        isVPNon(){\r\n            if( !this.iplocation || ['UA','RU','???'].includes(this.iplocation.country_code??'???') ){\r\n                return false\r\n            }\r\n            return true\r\n        },\r\n        bankCardCalc(){\r\n            let card=this.bankCard;\r\n            if( card && card.card_type ){\r\n                card.label=`${card.card_type.toUpperCase()} (**** ${card.card_mask.split('*').pop()})`\r\n            }\r\n            return card;\r\n        }\r\n    },\r\n    methods:{\r\n        async itemLoad(){\r\n            this.itemCheckoutDataGet()\r\n        },\r\n        async itemCheckoutDataGet( with_arrival_range=0 ){\r\n            try{\r\n                const request={\r\n                    order_id:this.order_id,\r\n                    with_arrival_range\r\n                }\r\n                const bulkResponse=await Utils.post(`${this.$heap.state.hostname}Shipment/itemCheckoutDataGet`,request)\r\n                if( !bulkResponse ){\r\n                    return\r\n                }\r\n                if( bulkResponse.order.stage_current!=='customer_confirmed' ){\r\n                    this.$go(`/order/shipment-${this.order_id}`)\r\n                }\r\n                this.order=bulkResponse.order\r\n                this.routePlan=bulkResponse.routePlan\r\n                this.bankCard=bulkResponse?.bankCard;\r\n\r\n\r\n                this.tariffRuleList=bulkResponse.deliveryOptions\r\n                this.tariffRuleSet(this.tariffRuleList?.[0]||{})\r\n                this.deliveryPlanMode=this.routePlan.start_plan_mode\r\n                if( this.routePlan.start_plan_mode=='nocourier' ){\r\n                    this.deliveryPlanMode='awaited'\r\n                }\r\n\r\n                if( bulkResponse.finishPlanSchedule ){\r\n                    this.finishPlanSchedule=bulkResponse.finishPlanSchedule\r\n                    this.deliveryFinishScheduled=bulkResponse.finishPlanSchedule.nearest\r\n                } else {\r\n                    this.finishPlanSchedule=null\r\n                    this.deliveryFinishScheduled=null\r\n                }\r\n                //this.customerIpLocationGet()\r\n            }\r\n            catch(err){\r\n                this.errorCode=err?.responseJSON?.messages?.error\r\n                if( this.errorCode =='notfound' || this.errorCode =='forbidden' ){\r\n                    this.$flash('Заказ не найден')\r\n                    this.$router.go(-1)\r\n                }\r\n            }\r\n            this.is_checkout_data_loaded=1\r\n        },\r\n        tariffRuleSet( tariffRule ){\r\n            this.tariffRule=tariffRule\r\n            this.paymentType='use_card'\r\n            if(this.bankCard?.card_type){\r\n                this.paymentType='use_card_recurrent'\r\n            }\r\n            if( tariffRule.paymentByCreditStore==1 && this.tariffRule.storeCreditBalance>=this.tariffRule.deliverySum ){\r\n                this.paymentType='use_credit_store'\r\n            } else\r\n            if(tariffRule.paymentByCash==1){\r\n                this.paymentType='use_cash'\r\n            } else\r\n            if(tariffRule.paymentByCard==1){\r\n                this.paymentType='use_card'\r\n                if(this.sbpPaymentAllow){\r\n                    this.paymentType='use_card_sbp'\r\n                }\r\n            }\r\n        },\r\n        async datetimePick(){\r\n            if( !this.finishPlanSchedule ){\r\n                await this.itemCheckoutDataGet(1)\r\n            }\r\n            const modal = await modalController.create({\r\n                component: DateRangePicker,\r\n                presentingElement:this.$refs.page.$el,\r\n                initialBreakpoint:'0.6',\r\n                showBackdrop:true,\r\n                componentProps:{dateRange:this.finishPlanSchedule.range,defaultDatetime:this.finishPlanSchedule.nearest},\r\n            });\r\n            modal.present()\r\n            this.deliveryPlanMode='scheduled'\r\n            const data=await modal.onDidDismiss()\r\n            if(data.role==\"confirm\"){\r\n                this.deliveryFinishScheduled=data.data\r\n            } else {\r\n                this.deliveryFinishScheduled=null\r\n                this.deliveryPlanMode=this.routePlan.start_plan_mode\r\n            }\r\n        },\r\n        // async customerIpLocationGet(){\r\n        //     try{\r\n        //         const response = await fetch(\"https://geolocation-db.com/json/\");\r\n        //         this.iplocation = await response.json();\r\n        //     }catch{/** */}\r\n        // },\r\n\r\n        async proceed(){\r\n            const shipData={\r\n                order_id:this.order.order_id,\r\n                tariff_id:this.tariffRule.tariff_id,\r\n                deliveryFinishScheduled:this.deliveryFinishScheduled,\r\n                paymentByCard:['use_card','use_card_sbp'].includes(this.paymentType),\r\n                paymentByCardRecurrent:this.paymentType=='use_card_recurrent'?1:0,\r\n                paymentByCash:this.paymentType=='use_cash'?1:0,\r\n                paymentByCreditStore:this.paymentType=='use_credit_store'?1:0\r\n            }\r\n            try{\r\n                await jQuery.post(`${this.$heap.state.hostname}Shipment/itemCheckoutDataSet`,JSON.stringify(shipData))\r\n            } catch(err){\r\n                const exception_code=err?.responseJSON?.messages?.error;\r\n                if(!exception_code){\r\n                  return false;\r\n                }\r\n                switch(exception_code){\r\n                    case 'payment_already_done':\r\n                        this.$flash(\"Уже оплачен\")\r\n                        this.$go(`/order/shipment-${this.order.order_id}`)\r\n                        return\r\n                    case 'credit_balance_low':\r\n                        this.$flash(\"Не достаточно средств на счету\")\r\n                        return\r\n                }\r\n                this.$flash(\"Не удается оформить заказ, обратитесь на горячую линию\")\r\n                //this.$router.go(-1);\r\n                return false\r\n            }\r\n            if(shipData.paymentByCard==1){\r\n                this.paymentFormOpen({\r\n                    order_id:`${this.order_id}`,\r\n                    payment_type:this.paymentType\r\n                });\r\n                return;\r\n            }\r\n            if(shipData.paymentByCardRecurrent==1){\r\n                const request={\r\n                    order_id:this.order.order_id,\r\n                    card_id:this.bankCard.card_id\r\n                }\r\n                try{\r\n                    this.$flash(\"Оплачиваем привязанной картой...\")\r\n                    await jQuery.post(`${this.$heap.state.hostname}CardAcquirer/paymentDo`,request)\r\n                    this.paymentStatusCheck()\r\n                } catch(err){\r\n                    this.$flash(\"Оплата привязанной картой не удалась\")\r\n                    return false\r\n                }\r\n            }\r\n            if(shipData.paymentByCreditStore==1){\r\n                this.$router.replace('/order/shipment-'+this.order.order_id);\r\n            }\r\n        },\r\n        async heavyLoadInfo(){\r\n            const alert = await alertController.create({\r\n                //header: 'Высокая загруженность',\r\n                message:'Время приблизительное. Готовность заказа, погода, пробки могут задержать доставку.',\r\n                buttons: [\r\n                  {\r\n                    text: 'Ок',\r\n                    role: 'confirm',\r\n                  },\r\n                ],\r\n            });\r\n            await alert.present();\r\n            const { role } = await alert.onDidDismiss();\r\n            if( role=='confirm' ){\r\n                return true\r\n            }\r\n            return false\r\n        },\r\n        async paymentFormOpen( order_data ) {\r\n            const modal = await modalController.create({\r\n                component: OrderPaymentCardModal,\r\n                componentProps:{order_data},\r\n                initialBreakpoint: 0.4,\r\n                breakpoints: [0, 0.4]\r\n            });\r\n            this.$topic.on('dismissModal',()=>{\r\n                modal && modal.dismiss();\r\n            });\r\n            modal.present()\r\n            await modal.onDidDismiss()\r\n            this.paymentStatusCheck()\r\n        },\r\n        async paymentStatusCheck(){\r\n            const request={\r\n                order_id:`${this.order.order_id}`\r\n            };\r\n            try{\r\n                const result= await jQuery.post( this.$heap.state.hostname + \"CardAcquirer/statusGet\", request );\r\n                if(result=='OK'){\r\n                    this.$router.replace('/order/shipment-'+this.order.order_id)\r\n                }\r\n            } catch(err){\r\n                const message=err.responseJSON?.messages?.error;\r\n                if(message=='wrong_status'){\r\n                    this.$flash(\"Данный заказ не может быть оплачен\");\r\n                    this.$router.replace('/order/shipment-'+this.order.order_id);\r\n                } else\r\n                if(message=='not_authorized'){\r\n                    this.$flash(\"Оплата не прошла\");\r\n                    this.$router.replace('/order/shipment-'+this.order.order_id);\r\n                } else\r\n                if(message=='waiting'){\r\n                    this.$flash(\"Ваш платеж на ожидании\");\r\n                    this.$router.replace('/order/shipment-'+this.order.order_id);\r\n                } else {\r\n                    this.$flash(\"Оплата картой не удалась\");\r\n                }\r\n            }\r\n        },\r\n    },\r\n    mounted(){\r\n        this.itemLoad()\r\n    },\r\n    ionViewDidEnter(){\r\n        this.itemLoad()\r\n    },\r\n    created(){\r\n        this.$topic.on('userMainPaymentMethodSet',()=>{\r\n            this.can_load_at=0\r\n            this.itemLoad()\r\n        })        \r\n        this.$topic.on('settingsGet',(settings)=>{\r\n            this.can_load_at=0\r\n            this.recurrentPaymentAllow=settings?.other?.recurrentPaymentAllow\r\n            this.sbpPaymentAllow=settings?.other?.sbpPaymentAllow\r\n        })        \r\n    },\r\n}\r\n</script>","import { render } from \"./ShipmentCheckout.vue?vue&type=template&id=38a24c90&scoped=true\"\nimport script from \"./ShipmentCheckout.vue?vue&type=script&lang=js\"\nexport * from \"./ShipmentCheckout.vue?vue&type=script&lang=js\"\n\nimport \"./ShipmentCheckout.vue?vue&type=style&index=0&id=38a24c90&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-38a24c90\"]])\n\nexport default __exports__"],"names":["style","_createBlock","_component_base_layout","pageTitle","pageDefaultBackLink","$data","order_id","ref","_createVNode","_component_ion_list","lines","_$data$tariffRule$rou","_component_ion_item_divider","_cache","tariffRule","routePlan","start_plan_mode","_component_ion_card","color","_component_ion_card_content","_createElementVNode","src","_imports_0","_component_ion_item","_component_ion_segment","mode","deliveryPlanMode","$event","$options","isAtonceEnabled","_component_ion_segment_button","value","onClick","deliveryFinishScheduled","_component_ion_icon","icon","$setup","rocketOutline","_component_ion_label","timeOutline","datetimePick","alarmOutline","deliveryFinishLocal","_createElementBlock","_hoisted_1","_toDisplayString","_hoisted_2","_component_ion_radio_group","paymentType","_$options$bankCardCal","_$options$bankCardCal2","paymentByCreditStore","button","detail","businessOutline","slot","_component_ion_radio","_hoisted_3","storeCreditName","storeCreditBalance","_ctx","$heap","state","currencySign","paymentByCard","_hoisted_4","sbpPaymentAllow","_component_ion_img","cardOutline","bankCardCalc","card_type","toLowerCase","label","$go","recurrentPaymentAllow","addOutline","_component_ion_accordion_group","_component_ion_accordion","walletOutline","_component_ion_text","deliverySum","deliveryCost","mapOutline","deliveryDistanceKm","deliveryFeeTotal","_component_router_link","to","_component_ion_checkbox","termsAccepted","checkoutError","_component_ion_button","expand","proceed","disabled","components","IonText","IonList","IonItem","IonIcon","IonLabel","IonSegment","IonSegmentButton","IonImg","IonCard","IonCardContent","IonCardHeader","IonCardTitle","IonButton","IonCheckbox","IonItemDivider","IonRadioGroup","IonRadio","IonAccordion","IonAccordionGroup","setup","cubeOutline","locationOutline","flagOutline","chevronDown","checkmark","cashOutline","alertCircleOutline","data","_this$$heap$state$set","_this$$heap$state$set2","_this$$heap$state$set3","_this$$heap$state$set4","this","$route","params","id","order","finishPlanSchedule","bankCard","tariffRuleList","errorCode","shipAutoloadClock","iplocation","settings","other","is_checkout_data_loaded","computed","options","month","day","hour","minute","d","Date","parse","toLocaleDateString","undefined","deliveryFinishRange","finish_plan","start_plan","finish_arrival","delta","finish_plan_from","Math","floor","finish_plan_to","from","getHours","String","getMinutes","padStart","includes","round","deliveryFee","deliveryDistance","isVPNon","country_code","card","toUpperCase","card_mask","split","pop","methods","itemLoad","itemCheckoutDataGet","with_arrival_range","_this$tariffRuleList","request","bulkResponse","Utils","post","hostname","stage_current","deliveryOptions","tariffRuleSet","nearest","err","_err$responseJSON","_err$responseJSON$mes","responseJSON","messages","error","$flash","$router","go","_this$bankCard","paymentByCash","modal","modalController","create","component","DateRangePicker","presentingElement","$refs","page","$el","initialBreakpoint","showBackdrop","componentProps","dateRange","range","defaultDatetime","present","onDidDismiss","role","shipData","tariff_id","paymentByCardRecurrent","jQuery","JSON","stringify","_err$responseJSON2","_err$responseJSON2$me","exception_code","card_id","paymentStatusCheck","replace","paymentFormOpen","payment_type","heavyLoadInfo","alert","alertController","message","buttons","text","order_data","OrderPaymentCardModal","breakpoints","$topic","on","dismiss","result","_err$responseJSON3","_err$responseJSON3$me","mounted","ionViewDidEnter","created","can_load_at","_settings$other","_settings$other2","__exports__","render"],"sourceRoot":""}