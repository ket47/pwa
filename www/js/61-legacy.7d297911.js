"use strict";(self["webpackChunktezkel"]=self["webpackChunktezkel"]||[]).push([[61],{2061:function(t,e,i){i.r(e),i.d(e,{default:function(){return h}});var n=i(6252),a=i(3577);function r(t,e,i,r,s,o){const f=(0,n.up)("ion-icon"),l=(0,n.up)("ion-label"),u=(0,n.up)("ion-item"),d=(0,n.up)("ion-list"),c=(0,n.up)("base-layout");return(0,n.wg)(),(0,n.j4)(c,{pageDefaultBackLink:"/user","page-title":"Список тарифов"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.tariffList,(e=>((0,n.wg)(),(0,n.j4)(u,{key:e.tariff_id,detail:"",button:"",onClick:i=>t.$go(`/user/admin-tariff-edit-${e.tariff_id}`)},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{icon:r.briefcaseOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,n.Wm)(l,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,a.zw)(e.tariff_name),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128)),(0,n.Wm)(u,{detail:"",button:"",onClick:e[0]||(e[0]=t=>o.itemCreate())},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{icon:r.addOutline,slot:"start"},null,8,["icon"]),(0,n.Wm)(l,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Добавить тариф")])),_:1})])),_:1})])),_:1})])),_:1})}var s=i(8534),o=(i(8862),i(8903)),f=i(6964),l=i(9755),u=i.n(l),d={components:{IonItem:f.Ie,IonLabel:f.Q$,IonList:f.q_,IonIcon:f.gu},setup(){return{briefcaseOutline:o.SVL,addOutline:o.s6O}},data(){return{tariffList:[]}},computed:{},methods:{listLoad(){var t=this;return(0,s.Z)((function*(){try{t.tariffList=yield u().post(`${t.$heap.state.hostname}Admin/Tariff/listGet`)}catch(e){}}))()},itemCreate(){var t=this;return(0,s.Z)((function*(){let e={tariff_name:"new tariff"};try{let i=yield u().post(`${t.$heap.state.hostname}Admin/Tariff/itemCreate`,JSON.stringify(e));t.$go(`/user/admin-tariff-edit-${i}`)}catch(i){const e=i.responseJSON,n=e.messages.error;switch(n){case"forbidden":t.$flash("Не достаточно прав");break}return!1}}))()},itemDelete(t){var e=this;return(0,s.Z)((function*(){if(!confirm("Вы уверенны"))return;let i={tariff_id:t};try{yield u().post(`${e.$heap.state.hostname}Admin/Tariff/itemDelete`,JSON.stringify(i)),e.listLoad()}catch(n){const t=n.responseJSON,i=t.messages.error;switch(i){case"forbidden":e.$flash("Не достаточно прав");break}}}))()}},mounted(){this.listLoad()},ionViewDidEnter(){this.tariffList.length||this.listLoad()},ionViewDidLeave(){this.tariffList=[]}},c=i(3744);const m=(0,c.Z)(d,[["render",r]]);var h=m}}]);
//# sourceMappingURL=61-legacy.7d297911.js.map