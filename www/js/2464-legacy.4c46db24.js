"use strict";(self["webpackChunktezkel"]=self["webpackChunktezkel"]||[]).push([[2464],{2464:function(t,e,i){i.r(e),i.d(e,{default:function(){return p}});var n=i(6252),a=i(3577);const r=(0,n.Uk)("Добавить тариф");function s(t,e,i,s,o,f){const l=(0,n.up)("ion-icon"),u=(0,n.up)("ion-label"),d=(0,n.up)("ion-item"),c=(0,n.up)("ion-list"),m=(0,n.up)("base-layout");return(0,n.wg)(),(0,n.j4)(m,{pageDefaultBackLink:"/user","page-title":"Список тарифов"},{default:(0,n.w5)((()=>[(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.tariffList,(e=>((0,n.wg)(),(0,n.j4)(d,{key:e.tariff_id,detail:"",button:"",onClick:i=>t.$router.push(`/user/admin-tariff-edit-${e.tariff_id}`)},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{icon:s.briefcaseOutline,slot:"start",color:"primary"},null,8,["icon"]),(0,n.Wm)(u,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,a.zw)(e.tariff_name),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128)),(0,n.Wm)(d,{detail:"",button:"",onClick:e[0]||(e[0]=t=>f.itemCreate())},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{icon:s.addOutline,slot:"start"},null,8,["icon"]),(0,n.Wm)(u,null,{default:(0,n.w5)((()=>[r])),_:1})])),_:1})])),_:1})])),_:1})}var o=i(8534),f=(i(8862),i(8903)),l=i(8292),u=i(9755),d=i.n(u),c={components:{IonItem:l.Ie,IonLabel:l.Q$,IonList:l.q_,IonIcon:l.gu},setup(){return{briefcaseOutline:f.SVL,addOutline:f.s6O}},data(){return{tariffList:[]}},computed:{},methods:{listLoad(){var t=this;return(0,o.Z)((function*(){try{t.tariffList=yield d().post(`${t.$heap.state.hostname}Admin/Tariff/listGet`)}catch(e){}}))()},itemCreate(){var t=this;return(0,o.Z)((function*(){let e={tariff_name:"new tariff"};try{let i=yield d().post(`${t.$heap.state.hostname}Admin/Tariff/itemCreate`,JSON.stringify(e));t.$router.push(`/user/admin-tariff-edit-${i}`)}catch(i){const e=i.responseJSON,n=e.messages.error;switch(n){case"forbidden":t.$flash("Не достаточно прав");break}return!1}}))()},itemDelete(t){var e=this;return(0,o.Z)((function*(){if(!confirm("Вы уверенны"))return;let i={tariff_id:t};try{yield d().post(`${e.$heap.state.hostname}Admin/Tariff/itemDelete`,JSON.stringify(i)),e.listLoad()}catch(n){const t=n.responseJSON,i=t.messages.error;switch(i){case"forbidden":e.$flash("Не достаточно прав");break}}}))()}},mounted(){this.listLoad()},ionViewDidEnter(){this.tariffList.length||this.listLoad()},ionViewDidLeave(){this.tariffList=[]}},m=i(3744);const h=(0,m.Z)(c,[["render",s]]);var p=h}}]);
//# sourceMappingURL=2464-legacy.4c46db24.js.map