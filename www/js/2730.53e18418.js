"use strict";(self["webpackChunktezkel"]=self["webpackChunktezkel"]||[]).push([[2730],{5069:function(t,e,o){var r=o(2109),i=o(1702),n=o(3157),u=i([].reverse),a=[1,2];r({target:"Array",proto:!0,forced:String(a)===String(a.reverse())},{reverse:function(){return n(this)&&(this.length=this.length),u(this)}})},4242:function(t,e,o){o.d(e,{Z:function(){return _}});var r=o(6252),i=o(3577);const n={class:"blur-image"},u=["src"],a=["src"];function l(t,e,o,l,c,s){const d=(0,r.up)("swiper-slide"),m=(0,r.up)("swiper");return(0,r.wg)(),(0,r.j4)(m,{modules:l.modules,autoplay:{delay:3e3,disableOnInteraction:!1},loop:!0,effect:"fade",style:(0,i.j5)(`height: ${o.imgHeight||"100%"};`)},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.imageList,(e=>((0,r.wg)(),(0,r.j4)(d,{key:e.image_hash},{default:(0,r.w5)((()=>[(0,r._)("div",{class:(0,i.C_)(`${o.mode?o.mode:""} cropper`),style:(0,i.j5)(`height: ${o.imgHeight+"px"||0}`)},[(0,r._)("div",n,[(0,r._)("img",{src:`${t.$heap.state.hostname}image/get.php/${e.image_hash}.${4*o.imgHeight||1200}.${4*o.imgHeight||1200}.webp`},null,8,u)]),(0,r._)("img",{style:(0,i.j5)(`min-height: ${o.imgHeight+"px;"||0};max-height:50vh`),src:`${t.$heap.state.hostname}image/get.php/${e.image_hash}.${4*o.imgHeight||1200}.${4*o.imgHeight||1200}.webp`},null,12,a)],6)])),_:2},1024)))),128))])),_:1},8,["modules","style"])}var c=o(8903),s=o(8292),d=o(702),m=o(3181),p={components:{Swiper:m.t,SwiperSlide:m.o,IonFab:s.IJ,IonFabButton:s.W4,IonIcon:s.gu},props:["imageList","imgHeight","mode"],setup(){return{modules:[d.pt,d.xW],expand:c.jnR,contract:c.LJB}},data(){return{expanded:!1,vh:0,vw:0}},methods:{maximize(){this.expanded=!0,this.vh=document.getElementsByTagName("ion-content")[0].clientHeight,this.vw=document.getElementsByTagName("ion-content")[0].clientWidth},minimize(){this.expanded=!1,this.vh=document.getElementsByTagName("ion-content")[0].clientHeight,this.vw=document.getElementsByTagName("ion-content")[0].clientWidth}}},g=o(3744);const h=(0,g.Z)(p,[["render",l],["__scopeId","data-v-24bd79de"]]);var _=h},2730:function(t,e,o){o.r(e),o.d(e,{default:function(){return O}});o(4916),o(5306);var r=o(6252),i=o(3577);const n={key:0,class:"product-images"},u={key:0},a=(0,r.Uk)(),l={key:1},c=(0,r.Uk)("Поделиться"),s={key:1},d=(0,r.Uk)("Варианты"),m=(0,r.Uk)(" "),p={key:0,style:{color:"var(--ion-color-danger)","font-size":"0.75em"}},g=(0,r.Uk)("   "),h=(0,r.Uk)("Не заказан"),_=(0,r.Uk)("Итог");function w(t,e,o,w,f,I){var k;const v=(0,r.up)("image-slider-comp"),y=(0,r.up)("ion-label"),W=(0,r.up)("ion-icon"),$=(0,r.up)("ion-button"),b=(0,r.up)("ion-list-header"),C=(0,r.up)("ion-text"),z=(0,r.up)("ion-item"),j=(0,r.up)("ion-list"),U=(0,r.up)("ion-accordion"),O=(0,r.up)("ion-accordion-group"),H=(0,r.up)("ion-img"),q=(0,r.up)("ion-avatar"),x=(0,r.up)("ion-chip"),S=(0,r.up)("cart-add-buttons"),D=(0,r.up)("ion-textarea"),L=(0,r.up)("base-layout");return(0,r.wg)(),(0,r.j4)(L,{"page-title":null===(k=f.productItem)||void 0===k?void 0:k.product_name,pageDefaultBackLink:"/catalog",cartComponent:w.CartHeader},{default:(0,r.w5)((()=>[f.productItem?((0,r.wg)(),(0,r.iD)("div",n,[(0,r.Wm)(v,{imageList:f.productItem.images,imgHeight:400,mode:"save-aspect-ratio"},null,8,["imageList"])])):(0,r.kq)("",!0),f.productItem?((0,r.wg)(),(0,r.j4)(j,{key:1},{default:(0,r.w5)((()=>{var o;return[(0,r.Wm)(b,null,{default:(0,r.w5)((()=>[(0,r.Wm)(y,null,{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(f.productItem.product_name),1),f.productItem.product_option?((0,r.wg)(),(0,r.iD)("b",u," ["+(0,i.zw)(f.productItem.product_option)+"]",1)):(0,r.kq)("",!0),a,I.isAvailable?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("span",l,"(Нет в наличии)"))])),_:1}),f.productItem.is_writable?((0,r.wg)(),(0,r.j4)($,{key:0,onClick:e[0]||(e[0]=e=>t.$router.push("/catalog/product-edit-"+f.productId))},{default:(0,r.w5)((()=>[(0,r.Wm)(W,{color:"primary",src:w.settingsOutline},null,8,["src"])])),_:1})):(0,r.kq)("",!0)])),_:1}),f.productItem.product_description?((0,r.wg)(),(0,r.j4)(O,{key:0,style:{width:"100%"}},{default:(0,r.w5)((()=>[(0,r.Wm)(U,null,{default:(0,r.w5)((()=>[(0,r.Wm)(z,{slot:"header",lines:"none"},{default:(0,r.w5)((()=>[(0,r.Wm)(C,{class:"product-description",color:"medium",innerHTML:I.itemDescription},null,8,["innerHTML"])])),_:1}),(0,r.Wm)(j,{slot:"content"},{default:(0,r.w5)((()=>[(0,r.Wm)(z,{lines:"none"})])),_:1})])),_:1})])),_:1})):(0,r.kq)("",!0),(0,r.Wm)(z,{lines:"none",onClick:e[1]||(e[1]=e=>t.$router.push("/store/store-view-"+f.productItem.store_id)),button:""},{default:(0,r.w5)((()=>{var e,o;return[null!==(e=f.productItem)&&void 0!==e&&null!==(o=e.store)&&void 0!==o&&o.avatar?((0,r.wg)(),(0,r.j4)(q,{key:0,slot:"start"},{default:(0,r.w5)((()=>{var e,o;return[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(null===(e=f.productItem)||void 0===e||null===(o=e.store)||void 0===o?void 0:o.avatar,(e=>((0,r.wg)(),(0,r.j4)(H,{src:`${t.$heap.state.hostname}image/get.php/${e.image_hash}.200.200.webp`,key:e.image_id},null,8,["src"])))),128))]})),_:1})):(0,r.kq)("",!0),(0,r.Wm)(y,null,{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(f.productItem.store.store_name),1)])),_:1}),I.categories?((0,r.wg)(),(0,r.j4)(C,{key:1,slot:"end",color:"medium"},{default:(0,r.w5)((()=>[(0,r.Uk)("#"+(0,i.zw)(I.categories[0].group_name),1)])),_:1})):(0,r.kq)("",!0)]})),_:1}),(0,r.Wm)(z,{lines:"none"},{default:(0,r.w5)((()=>[(0,r.Wm)(x,{onClick:e[2]||(e[2]=t=>I.itemShare()),color:"medium"},{default:(0,r.w5)((()=>[(0,r.Wm)(W,{src:w.shareSocialOutline},null,8,["src"]),(0,r.Wm)(y,null,{default:(0,r.w5)((()=>[c])),_:1})])),_:1})])),_:1}),(0,r.Wm)(z,{lines:"none"}),null!==(o=f.productItem)&&void 0!==o&&o.options?((0,r.wg)(),(0,r.iD)("div",s,[(0,r.Wm)(z,{lines:"none"},{default:(0,r.w5)((()=>[(0,r.Wm)(W,{color:"medium",src:w.layersOutline,slot:"start"},null,8,["src"]),(0,r.Wm)(y,{color:"medium"},{default:(0,r.w5)((()=>[d])),_:1})])),_:1}),(0,r.Wm)(z,{lines:"none"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(f.productItem.options,(e=>((0,r.wg)(),(0,r.j4)(x,{outline:!0,onClick:o=>t.$router.replace(`/catalog/product-${e.product_id}`),color:"primary",key:e.product_id},{default:(0,r.w5)((()=>[(0,r.Wm)(y,null,{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(e.product_option),1)])),_:2},1024),m,e.product_final_price>0?((0,r.wg)(),(0,r.j4)(y,{key:0},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(e.product_final_price)+(0,i.zw)(t.$heap.state.currencySign),1)])),_:2},1024)):(0,r.kq)("",!0)])),_:2},1032,["onClick"])))),128))])),_:1})])):(0,r.kq)("",!0),f.productItem.product_price!=f.productItem.product_final_price?((0,r.wg)(),(0,r.j4)(z,{key:2,lines:"none"},{default:(0,r.w5)((()=>[(0,r.Wm)(W,{slot:"start",src:w.giftOutline,color:"medium"},null,8,["src"]),(0,r.Wm)(y,{color:"medium"},{default:(0,r.w5)((()=>[(0,r.Uk)("Акция до "+(0,i.zw)(I.promoFinish),1)])),_:1}),(0,r.Wm)(y,{slot:"end",color:"success",style:{"font-size":"1.2em"}},{default:(0,r.w5)((()=>[(0,r.Uk)("-"+(0,i.zw)(I.promoPercent)+"%",1)])),_:1})])),_:1})):(0,r.kq)("",!0),(0,r.Wm)(z,{lines:"none"},{default:(0,r.w5)((()=>[(0,r.Wm)(W,{slot:"start",src:w.pricetagOutline,color:"medium"},null,8,["src"]),"порция"==f.productItem.product_unit?((0,r.wg)(),(0,r.j4)(y,{key:0,color:"medium"},{default:(0,r.w5)((()=>[(0,r.Uk)("Цена за "+(0,i.zw)(I.weight_in_gramms)+"г",1)])),_:1})):"порция мл"==f.productItem.product_unit?((0,r.wg)(),(0,r.j4)(y,{key:1,color:"medium"},{default:(0,r.w5)((()=>[(0,r.Uk)("Цена за "+(0,i.zw)(I.weight_in_gramms)+"мл",1)])),_:1})):((0,r.wg)(),(0,r.j4)(y,{key:2,color:"medium"},{default:(0,r.w5)((()=>[(0,r.Uk)("Цена за "+(0,i.zw)(f.productItem.product_unit),1)])),_:1})),(0,r.Wm)(y,{slot:"end",color:"primary",style:{"font-size":"1.2em"}},{default:(0,r.w5)((()=>[f.productItem.product_price!=f.productItem.product_final_price?((0,r.wg)(),(0,r.iD)("span",p,[(0,r._)("s",null,(0,i.zw)(f.productItem.product_price)+(0,i.zw)(t.$heap.state.currencySign),1),g])):(0,r.kq)("",!0),(0,r.Uk)(" "+(0,i.zw)(f.productItem.product_final_price)+(0,i.zw)(t.$heap.state.currencySign),1)])),_:1})])),_:1}),(0,r.Wm)(z,{lines:"none"},{default:(0,r.w5)((()=>[(0,r.Wm)(W,{slot:"start",src:w.cartOutline,color:"medium"},null,8,["src"]),I.inCart?((0,r.wg)(),(0,r.j4)(y,{key:0,color:"medium"},{default:(0,r.w5)((()=>[(0,r.Uk)("В корзине ("+(0,i.zw)(f.productItem.product_unit)+")",1)])),_:1})):((0,r.wg)(),(0,r.j4)(y,{key:1,color:"medium"},{default:(0,r.w5)((()=>[h])),_:1})),(0,r.Wm)(S,{slot:"end",buttonLayout:"horizontal",display:"inline",productItem:f.productItem},null,8,["productItem"])])),_:1}),I.inCart?((0,r.wg)(),(0,r.j4)(z,{key:3,lines:"none"},{default:(0,r.w5)((()=>[(0,r.Wm)(W,{slot:"start",src:w.walletOutline,color:"medium"},null,8,["src"]),(0,r.Wm)(y,{color:"medium"},{default:(0,r.w5)((()=>[_])),_:1}),(0,r.Wm)(y,{slot:"end",color:"medium",style:{"font-size":"1.2em"}},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(I.inCart)+(0,i.zw)(t.$heap.state.currencySign),1)])),_:1})])),_:1})):(0,r.kq)("",!0),null!=I.inCartComment?((0,r.wg)(),(0,r.j4)(z,{key:4,lines:"none"},{default:(0,r.w5)((()=>[(0,r.Wm)(W,{slot:"start",src:w.chatboxEllipsesOutline,color:"medium"},null,8,["src"]),(0,r.Wm)(D,{value:I.inCartComment,onChange:e[3]||(e[3]=t=>I.cartCommentUpdate(t.target.value)),placeholder:"заметка для продавца"},null,8,["value"])])),_:1})):(0,r.kq)("",!0)]})),_:1})):(0,r.kq)("",!0)])),_:1},8,["page-title","cartComponent"])}o(5069);var f=o(9755),I=o.n(f),k=o(2008),v=o(8903),y=o(8292),W=o(4242),$=o(3991),b=o(9052),C=o(7782),z={components:{ImageSliderComp:W.Z,CartAddButtons:$.Z,IonTextarea:y.g2,IonListHeader:y.yh,IonText:y.yW,IonIcon:y.gu,IonItem:y.Ie,IonChip:y.hM,IonLabel:y.Q$,IonList:y.q_,IonAccordion:y.We,IonAccordionGroup:y.eh,IonButton:y.YG,IonAvatar:y.BJ,IonImg:y.Xz},setup(){return{CartHeader:b.Z,compassOutline:v.gmD,cartOutline:v.Ox0,pricetagOutline:v.TuG,giftOutline:v._$o,walletOutline:v.S5P,chatboxEllipsesOutline:v._Pt,settingsOutline:v.C$N,layersOutline:v.Y1P,shareSocialOutline:v.Zej,thumbsUpSharp:v._DJ,thumbsDownSharp:v.sbE}},data(){return{productId:this.$route.params.id,productItem:null,is_loading:0}},mounted(){this.getProduct()},computed:{categories(){var t,e,o,r,i,n;if(null===(t=this.productItem)||void 0===t||null===(e=t.member_of_groups)||void 0===e||!e.group_ids)return[];const u=null===(o=this.productItem)||void 0===o||null===(r=o.member_of_groups)||void 0===r?void 0:r.group_ids.split(","),a=null===(i=this.productItem)||void 0===i||null===(n=i.member_of_groups)||void 0===n?void 0:n.group_names.split(",");let l=[];for(let c in u)l.push({group_id:u[c],group_name:a[c]});return l},promoFinish(){try{return this.productItem.product_promo_finish.split(" ")[0].split("-").reverse().join(".")}catch(t){return null}},promoPercent(){return Math.round(100-this.productItem.product_final_price/this.productItem.product_price*100)},inCart(){const t=C.Z.cart.entryGet(this.productId);return t?t.data.entry_quantity*t.data.entry_price:0},inCartComment(){var t;const e=C.Z.cart.entryGet(this.productId);return e?null!==(t=e.data.entry_comment)&&void 0!==t?t:"":null},isAvailable(){return 1!=this.productItem.is_counted||this.productItem.product_quantity-this.productItem.product_quantity_reserved>0},weight_in_gramms(){return 1e3*this.productItem.product_weight},itemDescription(){var t,e;return null===(t=this.productItem)||void 0===t||null===(e=t.product_description)||void 0===e?void 0:e.replace(/<\/?[^>]+(>|$)/g,"").replace(/[\n\r]/g,"<br>")}},methods:{async getProduct(){if(1!=this.is_loading){try{this.is_loading=1,this.productItem=await I().post(k.Z.state.hostname+"Product/itemGet",{product_id:this.productId}),this.productItem.reaction={reaction_id:33}}catch(o){var t,e;const r=null===o||void 0===o||null===(t=o.responseJSON)||void 0===t||null===(e=t.messages)||void 0===e?void 0:e.error;switch(r){case"notfound":this.$flash("Товар не найден"),this.$router.replace("/catalog");break}return!1}this.is_loading=0}},cartCommentUpdate(t){const e={product_id:this.productId,entry_comment:t};C.Z.cart.entryUpdate(e)},async itemShare(){try{const t=location.href;if(navigator.share){const e={title:`${this.$heap.state.settings.app_title} ${this.productItem.product_name}`,text:this.productItem.product_description,url:t};await navigator.share(e)}else await navigator.clipboard.writeText(t),this.$alert("Теперь вы можете поделиться ей с друзьями в социальных сетях или мессенджерах.","Ссылка на страницу скопирована")}catch(t){}},async itemReactionLike(){const t={tagQuery:`product:${this.productId}`,is_like:1};await I().post(`${k.Z.state.hostname}Reaction/itemCreate`,t)},async itemReactionDislike(){}}},j=o(3744);const U=(0,j.Z)(z,[["render",w]]);var O=U}}]);
//# sourceMappingURL=2730.53e18418.js.map