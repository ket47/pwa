"use strict";(self["webpackChunkTezkel"]=self["webpackChunkTezkel"]||[]).push([[643],{4463:function(e,t,o){o.d(t,{Z:function(){return h}});var r=o(6252),i=o(3577);const s={key:0},l=["src"],n=["src"];function u(e,t,o,u,a,d){const c=(0,r.up)("swiper-slide"),p=(0,r.up)("swiper"),m=(0,r.up)("ion-icon"),g=(0,r.up)("ion-fab-button"),_=(0,r.up)("ion-fab");return(0,r.wg)(),(0,r.iD)(r.HY,null,[a.expanded?((0,r.wg)(),(0,r.iD)("div",s,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.imageList,(t=>((0,r.wg)(),(0,r.iD)("div",{key:t.image_hash,style:{border:"2px solid var(--ion-color-primary)"}},[(0,r._)("img",{src:`${e.$heap.state.hostname}image/get.php/${t.image_hash}.1000.1000.webp`},null,8,l)])))),128))])):((0,r.wg)(),(0,r.j4)(p,{key:1,modules:u.modules,autoplay:{delay:3e3,disableOnInteraction:!1},loop:!0,effect:"fade"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.imageList,(t=>((0,r.wg)(),(0,r.j4)(c,{key:t.image_hash},{default:(0,r.w5)((()=>[(0,r._)("div",{class:"crop-to-fit",style:(0,i.j5)(`height: ${o.imgHeight||300}px;`)},[(0,r._)("img",{style:(0,i.j5)(`min-height: ${o.imgHeight||300}px;`),src:`${e.$heap.state.hostname}image/get.php/${t.image_hash}.${4*o.imgHeight||1200}.${4*o.imgHeight||1200}.webp`},null,12,n)],4)])),_:2},1024)))),128))])),_:1},8,["modules"])),(0,r.Wm)(_,{horizontal:"end",vertical:"top",slot:"fixed"},{default:(0,r.w5)((()=>[(0,r.Wm)(g,{color:"light"},{default:(0,r.w5)((()=>[a.expanded?((0,r.wg)(),(0,r.j4)(m,{key:0,src:u.contract,size:"large",onClick:t[0]||(t[0]=e=>d.minimize())},null,8,["src"])):((0,r.wg)(),(0,r.j4)(m,{key:1,src:u.expand,size:"large",onClick:t[1]||(t[1]=e=>d.maximize())},null,8,["src"]))])),_:1})])),_:1})],64)}var a=o(8903),d=o(1716),c=o(702),p=o(3181),m={components:{Swiper:p.t,SwiperSlide:p.o,IonFab:d.IJ,IonFabButton:d.W4,IonIcon:d.gu},props:["imageList","imgHeight"],setup(){return{modules:[c.pt,c.xW],expand:a.jnR,contract:a.LJB}},data(){return{expanded:!1,vh:0,vw:0}},methods:{maximize(){this.expanded=!0,this.vh=document.getElementsByTagName("ion-content")[0].clientHeight,this.vw=document.getElementsByTagName("ion-content")[0].clientWidth},minimize(){this.expanded=!1,this.vh=document.getElementsByTagName("ion-content")[0].clientHeight,this.vw=document.getElementsByTagName("ion-content")[0].clientWidth}}},g=o(3744);const _=(0,g.Z)(m,[["render",u],["__scopeId","data-v-15c820c4"]]);var h=_},3586:function(e,t,o){o.d(t,{Z:function(){return I}});var r=o(6252),i=o(3577);const s=["id"],l={class:"product_list_item_img"},n={style:{position:"relative",top:"-50%"}},u={style:{height:"3.5em",overflow:"hidden"}},a={key:0,style:{color:"var(--ion-color-danger)"}},d=(0,r.Uk)("   "),c={style:{color:"var(--ion-color-primary)"}},p=(0,r.Uk)(" / "),m={style:{color:"var(--ion-color-medium)"}};function g(e,t,o,g,_,h){const w=(0,r.up)("cart-add-buttons"),f=(0,r.up)("ion-img");return(0,r.wg)(),(0,r.iD)("div",{class:(0,i.C_)(h.item_class),id:`product_list_item${o.productItem.product_id}`},[(0,r._)("div",l,[(0,r._)("div",n,[(0,r.Wm)(w,{buttonLayout:"vertical",productItem:o.productItem},null,8,["productItem"])]),(0,r.Wm)(f,{onClick:t[0]||(t[0]=t=>e.$router.push(`product-${o.productItem.product_id}`)),src:`${e.$heap.state.hostname}image/get.php/${o.productItem.image_hash}.200.200.webp`},null,8,["src"])]),(0,r._)("div",u,[o.productItem.product_price!=o.productItem.product_final_price?((0,r.wg)(),(0,r.iD)("span",a,[(0,r._)("s",null,(0,i.zw)(o.productItem.product_price)+(0,i.zw)(e.$heap.state.currencySign),1),d])):(0,r.kq)("",!0),(0,r._)("span",c,(0,i.zw)(o.productItem.product_final_price)+(0,i.zw)(e.$heap.state.currencySign),1),p,(0,r._)("span",m,(0,i.zw)(o.productItem.product_unit),1),(0,r._)("div",{style:{color:"black"},onClick:t[1]||(t[1]=t=>e.$router.push(`product-${o.productItem.product_id}`))},(0,i.zw)(o.productItem.product_name),1)])],10,s)}var _=o(1716),h=o(1111),w={components:{IonImg:_.Xz,CartAddButtons:h.Z},props:["productItem"],computed:{item_class(){return this.productItem.deleted_at?"deleted":1==this.productItem.disabled?"disabled":1==this.productItem.is_counted&&this.productItem.product_quantity<1?"absent":""}}},f=o(3744);const y=(0,f.Z)(w,[["render",g],["__scopeId","data-v-f94cdf7a"]]);var I=y},3643:function(e,t,o){o.r(t),o.d(t,{default:function(){return F}});var r=o(6252),i=o(3577),s=o(9963);const l=e=>((0,r.dD)("data-v-b1ac49a6"),e=e(),(0,r.Cn)(),e),n={style:{"background-color":"var(--ion-background-shade)"}},u={class:"store-info"},a=(0,r.Uk)("Добавить товар"),d=l((()=>(0,r._)("div",{style:{"border-bottom":"1px solid var(--ion-color-primary-tint)"}},null,-1))),c={key:0},p={style:{display:"grid","grid-template-columns":"30px 1fr",gap:"5px"}},m={style:{"grid-row":"1 / 2","align-items":"flex-start"}},g={style:{"grid-column":"2 / span 3",display:"flex","align-items":"center"}},_=(0,r.Uk)(" Доставит "),h={style:{color:"var(--ion-color-primary)"}},w={style:{display:"flex","justify-content":"space-between"}},f={key:0,style:{"text-align":"left"}},y={key:1,style:{"text-align":"right"}},I=(0,r.Uk)("Еще"),k=(0,r.Uk)("ИНН"),v=(0,r.Uk)("Телефон"),b={key:0,class:"group-fixed-block hidden-block"};function S(e,t,o,l,S,W){const x=(0,r.up)("image-slider"),z=(0,r.up)("ion-text"),G=(0,r.up)("ion-col"),$=(0,r.up)("ion-icon"),C=(0,r.up)("router-link"),P=(0,r.up)("ion-row"),q=(0,r.up)("ion-button"),T=(0,r.up)("ion-note"),j=(0,r.up)("ion-chip"),L=(0,r.up)("ion-grid"),D=(0,r.up)("ion-label"),H=(0,r.up)("ion-item"),U=(0,r.up)("ion-list"),Z=(0,r.up)("ion-accordion"),O=(0,r.up)("ion-accordion-group"),B=(0,r.up)("ion-segment-button"),M=(0,r.up)("ion-segment"),Y=(0,r.up)("ion-searchbar"),N=(0,r.up)("group-list"),R=(0,r.up)("product-list"),V=(0,r.up)("swiper-slide"),A=(0,r.up)("swiper"),K=(0,r.up)("base-layout");return(0,r.wg)(),(0,r.j4)(K,{"page-default-back-link":"/home","page-class":"store-page",contentOnScroll:e.onScroll,"page-title":this.storeItem.store_name??"Магазин"},{default:(0,r.w5)((()=>[(0,r._)("div",n,[(0,r._)("div",u,[(0,r.Wm)(x,{imageList:e.storeItem.images,imgHeight:200},null,8,["imageList"]),(0,r.Wm)(L,{style:{margin:"15px 5px 5px 5px"}},{default:(0,r.w5)((()=>[(0,r.Wm)(P,null,{default:(0,r.w5)((()=>[(0,r.Wm)(G,null,{default:(0,r.w5)((()=>[(0,r.Wm)(z,{color:"primary",style:{"font-size":"20px"}},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(e.storeItem.store_name),1)])),_:1})])),_:1}),(0,r.Wm)(G,{style:{"text-align":"right"}},{default:(0,r.w5)((()=>[1==e.storeItem.is_writable?((0,r.wg)(),(0,r.j4)(C,{key:0,to:"/store-edit-"+e.storeItem.store_id},{default:(0,r.w5)((()=>[(0,r.Wm)($,{icon:e.settingsOutline,style:{"font-size":"24px"}},null,8,["icon"])])),_:1},8,["to"])):(0,r.kq)("",!0)])),_:1})])),_:1}),1==e.storeItem.is_writable?((0,r.wg)(),(0,r.j4)(P,{key:0},{default:(0,r.w5)((()=>[(0,r.Wm)(G,null,{default:(0,r.w5)((()=>[(0,r.Wm)(q,{onClick:t[0]||(t[0]=t=>e.productItemCreate()),color:"light",expand:"full"},{default:(0,r.w5)((()=>[a])),_:1})])),_:1})])),_:1})):(0,r.kq)("",!0),(0,r.Wm)(P,{style:{"font-size":"12px"}},{default:(0,r.w5)((()=>[(0,r.Wm)(G,null,{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(e.storeItem.store_group_names),1)])),_:1}),(0,r.wy)((0,r.Wm)(G,{style:{"text-align":"right"}},{default:(0,r.w5)((()=>[(0,r.Uk)(" закроется в "+(0,i.zw)(e.storeItem.willBeClosedAt)+":00 ",1)])),_:1},512),[[s.F8,e.storeItem.willBeClosedAt]])])),_:1}),(0,r.Wm)(P,null,{default:(0,r.w5)((()=>[(0,r.Wm)(G,null,{default:(0,r.w5)((()=>[(0,r.Wm)(T,null,{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(e.storeItem.store_description),1)])),_:1})])),_:1})])),_:1}),(0,r.Wm)(P,null,{default:(0,r.w5)((()=>[(0,r.Wm)(G,null,{default:(0,r.w5)((()=>[d])),_:1})])),_:1}),(0,r.Wm)(P,null,{default:(0,r.w5)((()=>[(0,r.Wm)(G,null,{default:(0,r.w5)((()=>[e.storeItem.deliveryTime?((0,r.wg)(),(0,r.iD)("div",c,[e.storeItem.is_opened?((0,r.wg)(),(0,r.j4)(j,{key:0,color:"success"},{default:(0,r.w5)((()=>[(0,r.Uk)("Открыт до "+(0,i.zw)(e.storeItem.store_time_closes)+":00",1)])),_:1})):((0,r.wg)(),(0,r.j4)(j,{key:1,color:"danger"},{default:(0,r.w5)((()=>[(0,r.Uk)("Закрыт до "+(0,i.zw)(e.storeItem.store_time_opens)+":00",1)])),_:1})),e.storeItem.deliveryTime.timeMin?((0,r.wg)(),(0,r.j4)(j,{key:2,color:"primary"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(e.storeItem.deliveryTime.timeMin)+"-"+(0,i.zw)(e.storeItem.deliveryTime.timeMax)+"мин",1)])),_:1})):(0,r.kq)("",!0)])):(0,r.kq)("",!0)])),_:1})])),_:1}),(0,r.Wm)(P,null,{default:(0,r.w5)((()=>[(0,r.Wm)(G,{style:{"font-size":"12px"}},{default:(0,r.w5)((()=>[(0,r._)("div",p,[(0,r._)("div",m,[(0,r.Wm)($,{src:"./assets/icon/box-delivery.svg",style:{"font-size":"26px",color:"var(--ion-color-primary)"}})]),(0,r._)("div",g,[(0,r._)("span",null,[_,(0,r._)("b",h,(0,i.zw)(e.$heap.state.app_title),1)])])]),(0,r._)("div",w,[e.storeItem.delivery?((0,r.wg)(),(0,r.iD)("div",f,(0,i.zw)(e.storeItem.delivery.timeMin)+"-"+(0,i.zw)(e.storeItem.delivery.timeMax)+" мин ",1)):(0,r.kq)("",!0),(0,r._)("div",null,"доставка "+(0,i.zw)(e.$heap.state.deliverySettings.fee)+"₽",1),e.storeItem.store_minimal_order?((0,r.wg)(),(0,r.iD)("div",y," заказ от "+(0,i.zw)(e.storeItem.store_minimal_order)+"₽ ",1)):(0,r.kq)("",!0)])])),_:1})])),_:1})])),_:1}),(0,r.Wm)(O,{style:{width:"100%"}},{default:(0,r.w5)((()=>[(0,r.Wm)(Z,null,{default:(0,r.w5)((()=>[(0,r.Wm)(H,{slot:"header"},{default:(0,r.w5)((()=>[(0,r.Wm)(D,{slot:"end"},{default:(0,r.w5)((()=>[I])),_:1})])),_:1}),(0,r.Wm)(U,{slot:"content"},{default:(0,r.w5)((()=>[(0,r.Wm)(H,{lines:"none"},{default:(0,r.w5)((()=>[(0,r.Wm)(z,null,{default:(0,r.w5)((()=>[(0,r._)("b",null,(0,i.zw)(e.storeItem.store_company_name),1)])),_:1})])),_:1}),(0,r.Wm)(H,{lines:"none"},{default:(0,r.w5)((()=>[(0,r.Wm)(D,null,{default:(0,r.w5)((()=>[k])),_:1}),(0,r.Wm)(D,null,{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(e.storeItem.store_tax_num),1)])),_:1})])),_:1}),(0,r.Wm)(H,{lines:"none"},{default:(0,r.w5)((()=>[(0,r.Wm)(D,null,{default:(0,r.w5)((()=>[v])),_:1}),(0,r.Wm)(D,null,{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(e.storeItem.store_phone),1)])),_:1})])),_:1}),(0,r.Wm)(H,{lines:"none"},{default:(0,r.w5)((()=>[(0,r.Wm)(z,null,{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(e.storeItem.locations?.[0].location_address),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})]),e.storeGroups?((0,r.wg)(),(0,r.iD)("div",b,[(0,r.Wm)(M,{modelValue:e.groupSelectedParentId,"onUpdate:modelValue":t[1]||(t[1]=t=>e.groupSelectedParentId=t),scrollable:""},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.storeGroups,(t=>((0,r.wg)(),(0,r.j4)(B,{key:t.group_id,value:t.group_id,onClick:o=>e.groupSelectParent(t.group_id),ref_for:!0,ref:"group-tab-"+t.group_id},{default:(0,r.w5)((()=>[(0,r.Wm)(D,null,{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(t.group_name),1)])),_:2},1024)])),_:2},1032,["value","onClick"])))),128))])),_:1},8,["modelValue"]),e.storeGroups[e.groupSelectedParentId]?((0,r.wg)(),(0,r.j4)(P,{key:0,class:"groups-container"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.storeGroups[e.groupSelectedParentId].children,(t=>(0,r.wy)(((0,r.wg)(),(0,r.j4)(j,{color:"primary",key:t.group_id,ref_for:!0,ref:"group-chip-"+t.group_id,onClick:o=>e.scrollTo(t.group_id)},{default:(0,r.w5)((()=>[(0,r.Wm)(D,{color:"primary"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(t.group_name),1)])),_:2},1024)])),_:2},1032,["onClick"])),[[s.F8,e.storeProducts[t.group_id]]]))),128))])),_:1})):(0,r.kq)("",!0)])):(0,r.kq)("",!0),(0,r.Wm)(Y,{class:"search-container",modelValue:e.searchRequest,"onUpdate:modelValue":t[2]||(t[2]=t=>e.searchRequest=t),placeholder:"Поиск в этом предприятии",onInput:t[3]||(t[3]=t=>e.productListGet({name_query:t.target.value,name_query_fields:"product_name,product_code"}))},null,8,["modelValue"]),e.storeGroups?((0,r.wg)(),(0,r.j4)(N,{key:1,groupList:e.storeGroups,onClick:t=>{e.groupSelectParent(t)}},null,8,["groupList","onClick"])):(0,r.kq)("",!0),e.storeGroups?((0,r.wg)(),(0,r.j4)(A,{key:2,pager:"true",options:e.slideOpts,class:"product-list-slider",onSlideChange:t[4]||(t[4]=t=>e.groupSliderChanged(t))},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(e.storeGroups)+" ",1),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.storeGroups,(t=>((0,r.wg)(),(0,r.j4)(V,{key:t.group_id},{default:(0,r.w5)((()=>[(0,r.Wm)(L,{class:"product-list"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.children,(t=>((0,r.wg)(),(0,r.j4)(P,{key:t.group_id,ref_for:!0,ref:"group-"+t.group_id,"data-group_id":t.group_id},{default:(0,r.w5)((()=>[(0,r.Wm)(G,{class:"group-title",size:"12"},{default:(0,r.w5)((()=>[(0,r._)("label",null,[(0,r._)("b",null,(0,i.zw)(t.group_name),1)])])),_:2},1024),(0,r.Wm)(G,{size:"12"},{default:(0,r.w5)((()=>[(0,r.Wm)(R,{productList:e.storeProducts[t.group_id]},null,8,["productList"])])),_:2},1024)])),_:2},1032,["data-group_id"])))),128))])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["options"])):(0,r.kq)("",!0)])])),_:1},8,["contentOnScroll","page-title"])}var W=o(1716),x=o(702),z=o(3181),G=o(8903),$=o(4463);const C={id:"hcat_widget_grid"},P=["onClick"];function q(e,t,o,s,l,n){const u=(0,r.up)("ion-img"),a=(0,r.up)("ion-thumbnail"),d=(0,r.up)("ion-label");return(0,r.wg)(),(0,r.iD)("div",C,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.groupList,(t=>((0,r.wg)(),(0,r.iD)("div",{key:t.group_id,onClick:()=>e.onClick(t.group_id)},[(0,r.Wm)(a,{style:{width:"70px",height:"70px"}},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{style:{"border-radius":"10px",border:"1px solid #ddd"},src:`${e.$heap.state.hostname}image/get.php/${t.image_hash}.150.150.webp`},null,8,["src"])])),_:2},1024),(0,r.Wm)(d,{style:{height:"2em","text-align":"center"}},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(t.group_name),1)])),_:2},1024)],8,P)))),128))])}var T=(0,r.aZ)({components:{IonImg:W.Xz,IonThumbnail:W.Bs,IonLabel:W.Q$},props:["groupList","onClick"]}),j=o(3744);const L=(0,j.Z)(T,[["render",q],["__scopeId","data-v-6c59c918"]]);var D=L;const H={class:"product_list_widget_grid"};function U(e,t,o,i,s,l){const n=(0,r.up)("product-item");return(0,r.wg)(),(0,r.iD)("div",H,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.productList,(e=>((0,r.wg)(),(0,r.iD)("div",{key:e.product_id},[(0,r.Wm)(n,{productItem:e},null,8,["productItem"])])))),128))])}var Z=o(3586),O={props:["productList"],components:{ProductItem:Z.Z}};const B=(0,j.Z)(O,[["render",U],["__scopeId","data-v-0a14f3a0"]]);var M=B,Y=o(9755),N=o.n(Y),R=o(2008),V=o(4405);const A={slidesPerView:1,pagination:!1,centeredSlides:!1,initialSlide:0,speed:400,watchSlidesProgress:!1,grabCursor:!0,touchStartForcePreventDefault:!0};var K=(0,r.aZ)({components:{IonText:W.yW,IonCol:W.wI,IonIcon:W.gu,IonRow:W.Nd,IonNote:W.uN,IonGrid:W.jY,IonLabel:W.Q$,IonSegmentButton:W.GO,IonSegment:W.cJ,IonChip:W.hM,IonSearchbar:W.VI,IonButton:W.YG,IonAccordion:W.We,IonAccordionGroup:W.eh,IonList:W.q_,IonItem:W.Ie,ImageSlider:$.Z,Swiper:z.t,SwiperSlide:z.o,GroupList:D,ProductList:M},setup(){return{search:G.yC4,settingsOutline:G.C$N,slideOpts:A,slideModules:[x.pt]}},data(){return{storeId:this.$route.params.id,query:this.$route.query,searchRequest:"",storeItem:[],storeProducts:{},storeGroups:null,groupSelectedParentId:0,offsetModificator:150,itemGetInProgress:!1}},methods:{async itemGet(){if(!this.itemGetInProgress)try{this.itemGetInProgress=!0;const e=await N().post(`${R.Z.state.hostname}Store/itemGet`,{store_id:this.storeId,distance_include:1});this.storeItem=this.itemPrepare(e),this.storeId=e.store_id,this.groupTreeGet({store_id:this.storeId}),R.Z.commit("setCurrentStore",this.storeItem),this.itemGetInProgress=!1}catch(e){console.log(e)}},itemPrepare(e){e.member_of_groups.group_names&&(e.store_group_names=e.member_of_groups.group_names);try{e.deliveryTime=V.Z.deliveryTimeCalculate(e.locations[0].distance,e.store_time_preparation)}catch{}return e},async productListGet(e={}){if(e.store_id=this.storeId,e.is_active=1,1==this.storeItem.is_writable&&(e.is_disabled=1,e.is_deleted=1),e.name_query&&""==e.name_query)return void this.groupTreeGet({store_id:this.storeId});let t={};try{t=await N().post(R.Z.state.hostname+"Product/listGet",e)}catch(r){}this.productListPrepare(t.product_list),this.groupOtherAdd();let o=this;setTimeout((()=>{o.groupSelect()}))},productListPrepare(e){for(var t of(this.storeProducts={},e))this.storeGroups&&(this.storeProducts[t.group_id??0]||(this.storeProducts[t.group_id??0]=[])),this.storeProducts[t.group_id??0].push(t)},async productItemCreate(){try{const e={store_id:this.storeId,product_name:"Новый товар",product_price:1e3,product_promo_price:1e3},t=await N().post(`${R.Z.state.hostname}Product/itemCreate`,e);this.$router.push(`product-edit-${t}`),this.$flash("Добавлен 'Новый товар' в категорию 'Другое'")}catch{this.$flash("Не удалось создать товар")}},async groupTreeGet(e){try{this.storeGroups=await N().get(`${R.Z.state.hostname}Product/groupTreeGet`,{store_id:e.store_id}),this.productListGet()}catch(t){}},groupOtherAdd(){this.storeProducts[0]&&(this.storeGroups[0]={group_id:"other",group_name:"Другое",image_hash:"",children:{0:{group_id:0,group_name:"другое",group_parent_id:0,group_path:"",image_hash:""}}})},groupSelect(){let e=this.query.parent_group_id,t=this.query.sub_group_id;if(t)e:for(let o in this.storeGroups)for(let r in this.storeGroups[o].children)if(r==t){e=o;break e}e?t=Object.keys(this.storeGroups[e].children)[0]:e=Object.keys(this.storeGroups)[0],this.groupSelectParent(e),t&&this.groupSelectSub(t)},groupSelectParent(e){this.groupSelectedParentId=e;const t=document.querySelector(".product-list-slider").swiper,o=Object.keys(this.storeGroups).indexOf(this.groupSelectedParentId);t.slideTo(o,100,!1)},groupSelectSub(e){document.querySelectorAll(".groups-container ion-chip").forEach((e=>{e.classList.remove("active-chip")}));try{this.$refs["group-chip-"+e][0].classList.add("active-chip")}catch{}this.scrollTo(e)},groupSliderChanged(e){const t=e.activeIndex,o=Object.keys(this.storeGroups)[t],r=Object.keys(this.storeGroups[o].children)[0];this.groupSelectParent(o),this.groupSelectSub(r)},scrollTo(e){if(!this.$refs["group-"+e][0])return;const t=document.querySelector("ion-content").shadowRoot.querySelector("main").scrollTop,o=this.$refs["group-"+e][0].$el.getBoundingClientRect().top;var r=t+o-this.offsetModificator-window.innerHeight/4,i=Object.keys(this.storeGroups[this.groupSelectedParentId].children)[0];i==e&&(r=t+o-this.offsetModificator),document.querySelector("ion-content").shadowRoot.querySelector("main").scrollTo({top:r,behavior:"smooth"})},onScroll(e){const t=document.querySelector(".product-list-slider")?.offsetTop,o=document.querySelector(".group-fixed-block")?.offsetHeight;t-o-100<e.detail.scrollTop?document.querySelector(".group-fixed-block")&&(document.querySelector(".group-fixed-block").className="group-fixed-block"):document.querySelector(".group-fixed-block")&&(document.querySelector(".group-fixed-block").className="group-fixed-block hidden-block");var r=document.querySelectorAll(".swiper-slide-active .product-list ion-row");for(var i of r)if(i.getBoundingClientRect().top-this.offsetModificator<=window.innerHeight-window.innerHeight/4&&i.getBoundingClientRect().bottom+this.offsetModificator>=window.innerHeight-window.innerHeight/4&&i.dataset.group_id)break}},ionViewDidEnter(){this.itemGet()},mounted(){this.itemGet()},watch:{$route(e){this.storeId=e.params.id}}});const E=(0,j.Z)(K,[["render",S],["__scopeId","data-v-b1ac49a6"]]);var F=E},4405:function(e,t,o){var r=o(2008);const i={deliveryCalculate(e){if(!e.locations||!e.locations[0]||!e.locations[0].distance)return null;const t=e.locations[0].distance,o=e.store_time_preparation||0;return i.deliveryTimeCalculate(t,o)},deliveryTimeCalculate(e,t){t=t??r.Z.state.deliverySettings.defaultPreparationTime;const o=r.Z.state.deliverySettings.deliveryTimeDelta,i=5*Math.round(e/r.Z.state.deliverySettings.courierVelocity*60/5)+parseInt(t),s=i>o?i-o:i,l=s+o;return{time:i,timeMin:s,timeMax:l}}};t["Z"]=i}}]);
//# sourceMappingURL=643.b13e68be.js.map