"use strict";(self["webpackChunktezkel"]=self["webpackChunktezkel"]||[]).push([[5264],{5264:function(e,n,t){t.r(n),t.d(n,{default:function(){return v}});var o=t(6252),i=t(3577);const r=(0,o.Uk)(" Подтверждение номера телефона "),u=(0,o.Uk)(" Мы выслали вам смс с кодом подтверждения на номер "),a=(0,o.Uk)(". Поступление СМС на ваш телефон может занять до 2 минут. Введите 4 цифры из смс ниже "),s={novalidate:""},l=(0,o.Uk)("Код подтверждения из смс"),c=(0,o.Uk)("Подтвердить");function d(e,n,t,d,p,h){const f=(0,o.up)("ion-card-title"),_=(0,o.up)("ion-card-header"),m=(0,o.up)("ion-card-content"),w=(0,o.up)("ion-card"),k=(0,o.up)("ion-label"),I=(0,o.up)("ion-input"),v=(0,o.up)("ion-col"),$=(0,o.up)("ion-row"),W=(0,o.up)("ion-item"),b=(0,o.up)("ion-list"),g=(0,o.up)("ion-button"),y=(0,o.up)("base-layout");return(0,o.wg)(),(0,o.j4)(y,{"page-title":"Подтверждение телефона",pageDefaultBackLink:"/user"},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{color:"light"},{default:(0,o.w5)((()=>[(0,o.Wm)(_,null,{default:(0,o.w5)((()=>[(0,o.Wm)(f,{color:"primary"},{default:(0,o.w5)((()=>[r])),_:1})])),_:1}),(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[u,(0,o._)("b",null,(0,i.zw)(p.user_phone),1),a])),_:1})])),_:1}),(0,o._)("form",s,[(0,o.Wm)(b,null,{default:(0,o.w5)((()=>[(0,o.Wm)(W,null,{default:(0,o.w5)((()=>[(0,o.Wm)($,null,{default:(0,o.w5)((()=>[(0,o.Wm)(v,null,{default:(0,o.w5)((()=>[(0,o.Wm)(k,{position:"stacked",color:"primary"},{default:(0,o.w5)((()=>[l])),_:1}),(0,o.Wm)(I,{modelValue:p.verification_code,"onUpdate:modelValue":n[0]||(n[0]=e=>p.verification_code=e),type:"numeric",inputmode:"numeric",placeholder:"- - - -",onIonInput:n[1]||(n[1]=e=>{p.verification_code=e.target.value,h.onSubmit()}),enterkeyhint:"go",required:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,o.Wm)($,{"responsive-sm":""},{default:(0,o.w5)((()=>[(0,o.Wm)(v,null,{default:(0,o.w5)((()=>[(0,o.Wm)(g,{onClick:n[2]||(n[2]=e=>h.onSubmit()),expand:"block"},{default:(0,o.w5)((()=>[c])),_:1})])),_:1})])),_:1})])])),_:1})}var p=t(8534),h=(t(4916),t(5306),t(8292)),f=t(9755),_=t.n(f),m=t(351),w={name:"UserVerifyPhone",components:{IonLabel:h.Q$,IonCol:h.wI,IonInput:h.pK,IonRow:h.Nd,IonButton:h.YG,IonCard:h.PM,IonCardHeader:h.Zi,IonCardTitle:h.Dq,IonCardContent:h.FN,IonItem:h.Ie,IonList:h.q_},data(){return{verification_code:null,user_phone:this.$route.params.user_phone||this.$route.query.user_phone||"",is_sent:!1}},created(){this.smsSend()},ionViewDidEnter(){this.smsSend()},methods:{smsSend(){if(this.is_sent)return;if(this.user_phone=this.$route.params.user_phone||this.$route.query.user_phone||"",!this.user_phone)return;let e={user_phone:this.user_phone};try{this.is_sent=!0,_().post(`${this.$heap.state.hostname}User/phoneVerificationSend`,e)}catch(n){}},onSubmit(){var e=this;return(0,p.Z)((function*(){if(e.verification_code&&4==String(e.verification_code).length)try{yield _().post(`${e.$heap.state.hostname}/User/phoneVerificationCheck`,{user_phone:e.user_phone,verification_code:e.verification_code}),m.Z.autoSignIn(),e.$router.replace("/user/user-edit"),e.$router.push("/home"),e.$flash("Номер телефона верифицирован")}catch(n){const t=n.responseJSON.messages.error;switch(t){case"verification_not_found":e.$flash("Код верификации устарел"),e.$router.push("sign-in");break}e.$flash("Не удалось верифицировать телефон")}}))()}}},k=t(3744);const I=(0,k.Z)(w,[["render",d]]);var v=I}}]);
//# sourceMappingURL=5264-legacy.d29aa1e2.js.map