{"version":3,"file":"js/1214.b9277027.js","mappings":"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","sources":["webpack://Tezkel/./src/views/ShipmentCheckout.vue","webpack://Tezkel/./src/components/DateRangePicker.vue","webpack://Tezkel/./src/components/DateRangePicker.vue?c0e3","webpack://Tezkel/./src/views/ShipmentCheckout.vue?45d4"],"sourcesContent":["<style scoped>\r\n    ion-segment{\r\n        --background: var(--ion-color-light);\r\n    }\r\n    ion-segment ion-segment-button{\r\n        padding: 10px;\r\n        --color: var(--ion-color-medium);\r\n        --color-checked: #fff;\r\n        --indicator-color: var(--ion-color-primary-shade);\r\n    }\r\n    ion-segment ion-segment-button ion-label{\r\n        font-weight: bold;\r\n        --color:#000\r\n    }\r\n    ion-segment ion-segment-button span{\r\n        font-size:0.8em;\r\n    }\r\n</style>\r\n\r\n<template>\r\n    <base-layout pageTitle=\"Оформление вызова курьера\" :pageDefaultBackLink=\"`/order/shipment-draft`\" ref=\"page\">\r\n        <ion-list  lines=\"none\">\r\n            <ion-item-divider style=\"margin-top:0px;box-shadow:none;\">Детали перевозки</ion-item-divider>\r\n            <ion-item>\r\n                Курьер отвезет вашу посылку\r\n            </ion-item>\r\n            <ion-item>\r\n                {{order?.order_description}}\r\n            </ion-item>\r\n\r\n\r\n            <ion-card v-if=\"routePlan.plan_mode=='scheduled'\" color=\"light\">\r\n                <ion-card-header>\r\n                    <ion-card-title>\r\n                        Запланировать заказ\r\n                    </ion-card-title>\r\n                </ion-card-header>\r\n                <ion-card-content>\r\n                    <p>Сегодня доставить уже не сможем</p>\r\n                </ion-card-content>\r\n            </ion-card>\r\n            <ion-item>\r\n                <ion-segment mode=\"ios\" v-model=\"deliveryPlanMode\">\r\n                    <ion-segment-button v-if=\"isAtonceEnabled\" value=\"inited\" @click=\"deliveryFinishScheduled=null\">\r\n                        <ion-label>Отвезти сразу</ion-label>\r\n                        <span>как можно скорее</span>\r\n                    </ion-segment-button>\r\n                    <ion-segment-button v-else value=\"awaited\" @click=\"deliveryFinishScheduled=null\">\r\n                        <ion-label>Подождать</ion-label>\r\n                        <span>заказ в очереди</span>\r\n                    </ion-segment-button>\r\n                    <ion-segment-button value=\"scheduled\" @click=\"datetimePick()\">\r\n                        <ion-label><b>Запланировать</b></ion-label>\r\n                        <span v-if=\"deliveryFinishLocal\">{{deliveryFinishLocal}}</span>\r\n                        <span v-else>выберите день и время</span>\r\n                    </ion-segment-button>\r\n                </ion-segment>\r\n            </ion-item>\r\n            <ion-item-divider>Способы оплаты</ion-item-divider>\r\n            <ion-radio-group v-model=\"paymentType\">\r\n            <ion-item button detail=\"false\" @click=\"paymentType='use_credit_store'\" v-if=\"tariffRule.paymentByCreditStore==1\">\r\n                <ion-icon :icon=\"businessOutline\" slot=\"start\" color=\"medium\"></ion-icon>\r\n                <ion-radio value=\"use_credit_store\">\r\n                    Со счета предприятия\r\n                    <div style=\"font-size:0.7em;color:var(--ion-color-medium)\">{{tariffRule.storeCreditName}} {{tariffRule.storeCreditBalance}}{{$heap.state.currencySign}}</div>                        \r\n                </ion-radio>\r\n            </ion-item>\r\n            <ion-item button detail=\"false\" @click=\"paymentType='use_cash'\" v-if=\"tariffRule.paymentByCash==1\">\r\n                <ion-icon :icon=\"cashOutline\" slot=\"start\" color=\"medium\"></ion-icon>\r\n                <ion-radio value=\"use_cash\">\r\n                    Оплата наличными\r\n                </ion-radio>\r\n            </ion-item>\r\n\r\n            <div v-if=\"tariffRule.paymentByCard==1\">\r\n                <ion-item detail=\"false\" button @click=\"paymentType='use_card'\">\r\n                    <ion-icon :icon=\"cardOutline\" slot=\"start\" color=\"medium\"></ion-icon>\r\n                    <ion-radio value=\"use_card\">\r\n                        Карта без привязки\r\n                    </ion-radio>\r\n                </ion-item>\r\n                <ion-item v-if=\"bankCardCalc?.card_type\" button detail=\"false\" @click=\"paymentType='use_card_recurrent'\">\r\n                    <ion-img v-if=\"bankCardCalc.card_type\" style=\"width:25px;height: auto;\" :src=\"`/img/icons/card-${bankCardCalc.card_type}.svg`\" slot=\"start\"/>\r\n                    <ion-icon v-else :src=\"cardOutline\" slot=\"start\" color=\"medium\"/>\r\n                    <ion-radio value=\"use_card_recurrent\">\r\n                        Привязанная карта {{bankCardCalc.label}}\r\n                    </ion-radio>\r\n                </ion-item>\r\n                <ion-item v-if=\"bankCardCalc?.card_type\" button detail @click=\"$go('/user/user-cards')\">\r\n                    <ion-label color=\"medium\">Выбрать другую карту</ion-label>\r\n                </ion-item>\r\n                <ion-item v-else button detail @click=\"$go('/user/user-cards')\">\r\n                    <ion-icon :icon=\"addOutline\" slot=\"start\" color=\"medium\"></ion-icon>\r\n                    <ion-label>Привязать карту</ion-label>\r\n                </ion-item>\r\n            </div>\r\n            </ion-radio-group>\r\n\r\n            <ion-item-divider>Итог</ion-item-divider>\r\n            <ion-accordion-group value=\"total\">\r\n                <ion-accordion value=\"total\">\r\n                    <ion-item slot=\"header\" >\r\n                        <ion-icon :icon=\"walletOutline\" slot=\"start\" color=\"medium\"></ion-icon>\r\n                        <ion-text color=\"medium\">Итого: </ion-text>\r\n                        <ion-label slot=\"end\" color=\"primary\">{{ tariffRule.deliverySum }}{{$heap.state.currencySign}}</ion-label>\r\n                    </ion-item>\r\n                    <ion-list slot=\"content\">\r\n                        <ion-item lines=\"none\">\r\n                            <ion-icon :icon=\"rocketOutline\" slot=\"start\" color=\"medium\"></ion-icon>\r\n                            <ion-text color=\"medium\">Вызов курьера</ion-text>\r\n                            <ion-label slot=\"end\" color=\"medium\">{{ tariffRule.deliveryCost }}{{$heap.state.currencySign}}</ion-label>\r\n                        </ion-item>\r\n                        <ion-item lines=\"none\">\r\n                            <ion-icon :icon=\"mapOutline\" slot=\"start\" color=\"medium\"></ion-icon>\r\n                            <ion-text color=\"medium\">Расстояние по карте {{ deliveryDistanceKm }}км</ion-text>\r\n                            <ion-label slot=\"end\" color=\"medium\">{{ deliveryFeeTotal }}{{$heap.state.currencySign}}</ion-label>\r\n                        </ion-item>\r\n                    </ion-list>\r\n                </ion-accordion>\r\n            </ion-accordion-group>\r\n\r\n            <ion-item>\r\n                <ion-text style=\"font-size:0.9em\">\r\n                    Я согласен(на) с <router-link to=\"/page/rules-customer\">офертой об оказании услуг доставки</router-link>\r\n                </ion-text>\r\n                <ion-checkbox slot=\"end\" v-model=\"termsAccepted\" aria-label=\"\"></ion-checkbox>\r\n            </ion-item>\r\n\r\n        </ion-list>\r\n\r\n        <ion-card v-if=\"checkoutError\" color=\"warning\">\r\n            <ion-card-content>{{checkoutError}}</ion-card-content>\r\n        </ion-card>\r\n        <ion-card v-else-if=\"deliveryPlanMode=='awaited'\" color=\"light\" @click=\"heavyLoadInfo()\">\r\n            <ion-card-content>\r\n                <p v-if=\"deliveryPlanMode=='awaited'\">Высокая загруженность</p>\r\n                 Планируемое время доставки {{deliveryFinishRange}} <ion-icon :src=\"alertCircleOutline\" color=\"warning\"/>.\r\n            </ion-card-content>\r\n        </ion-card>\r\n        <ion-card v-if=\"isVPNon && (paymentType=='use_card' || paymentType=='use_card_recurrent')\" color=\"light\">\r\n            <ion-card-content>Возможно включен VPN. Банк часто блокирует платежи через VPN.</ion-card-content>\r\n        </ion-card>\r\n        <ion-button v-if=\"paymentType=='use_card' || paymentType=='use_card_recurrent'\" expand=\"block\" @click=\"proceed()\" :disabled=\"checkoutError\">Оплатить картой</ion-button>\r\n        <ion-button v-else expand=\"block\" @click=\"proceed()\" :disabled=\"checkoutError\">Вызвать курьера</ion-button>\r\n    </base-layout>\r\n</template>\r\n<script>\r\nimport {\r\n    alertController,\r\n    modalController,\r\n    IonText,\r\n    IonList,\r\n    IonItem,\r\n    IonIcon,\r\n    IonLabel,\r\n    IonSegment,\r\n    IonSegmentButton,\r\n    IonImg,\r\n    IonCard,\r\n    IonCardContent,\r\n    IonCardHeader,\r\n    IonCardTitle,\r\n    IonButton,\r\n    IonCheckbox,\r\n    IonItemDivider,\r\n    IonRadioGroup,\r\n    IonRadio,\r\n    IonAccordion,\r\n    IonAccordionGroup,\r\n}                               from '@ionic/vue'\r\nimport {\r\n    cubeOutline,\r\n    locationOutline,\r\n    flagOutline,\r\n    chevronDown,\r\n    addOutline,\r\n    checkmark,\r\n    cardOutline,\r\n    cashOutline,\r\n    businessOutline,\r\n    walletOutline,\r\n    alertCircleOutline,\r\n    mapOutline,\r\n    rocketOutline\r\n}                               from 'ionicons/icons';\r\nimport Utils                    from '@/scripts/Utils'\r\nimport jQuery                   from 'jquery'\r\nimport DateRangePicker          from '@/components/DateRangePicker.vue'\r\nimport OrderPaymentCardModal    from '@/components/OrderPaymentCardModal.vue'\r\n\r\nexport default {\r\n    components:{\r\n    // yandexMap,\r\n    // ymapMarker,\r\n    IonText,\r\n    IonList,\r\n    IonItem,\r\n    IonIcon,\r\n    IonLabel,\r\n    IonSegment,\r\n    IonSegmentButton,\r\n    IonImg,\r\n    IonCard,\r\n    IonCardContent,\r\n    IonCardHeader,\r\n    IonCardTitle,\r\n    IonButton,\r\n    IonCheckbox,\r\n    IonItemDivider,\r\n    IonRadioGroup,\r\n    IonRadio,\r\n    IonAccordion,\r\n    IonAccordionGroup,\r\n    },\r\n    setup(){\r\n        return {\r\n            cubeOutline,\r\n            locationOutline,\r\n            flagOutline,\r\n            chevronDown,\r\n            addOutline,\r\n            checkmark,\r\n            cardOutline,\r\n            cashOutline,\r\n            businessOutline,\r\n            walletOutline,\r\n            alertCircleOutline,\r\n            mapOutline,\r\n            rocketOutline,\r\n        };\r\n    },\r\n    data(){\r\n        return {\r\n            order_id:this.$route.params.id,\r\n            order:null,\r\n            finishPlanSchedule:null,\r\n            bankCard:null,\r\n            routePlan:{\r\n                start_plan_mode:'inited'\r\n            },\r\n            tariffRule:{},\r\n            tariffRuleList:[],\r\n            errorCode:null,\r\n            paymentType:'use_card',\r\n\r\n            shipAutoloadClock:null,\r\n            termsAccepted:1,\r\n            iplocation:null,\r\n            recurrentPaymentAllow:0,\r\n\r\n            deliveryFinishScheduled:null,\r\n            deliveryPlanMode:'inited'\r\n        }\r\n    },\r\n    computed:{\r\n        deliveryFinishLocal(){\r\n            if(!this.deliveryFinishScheduled){\r\n                return null\r\n            }\r\n            const options = { month: 'short', day: 'numeric', hour:'numeric', minute:'numeric' };\r\n            const d = new Date(Date.parse(this.deliveryFinishScheduled));\r\n            return d.toLocaleDateString(undefined, options);\r\n        },\r\n        deliveryFinishRange(){\r\n            const finish_plan=this.routePlan.start_plan*1+this.routePlan.finish_arrival*1\r\n            if( !finish_plan ){\r\n                return null\r\n            }\r\n            const finish_plan_from=Math.floor(finish_plan/900)*900//round to 15 minutes\r\n            const finish_plan_to=finish_plan_from+900\r\n            const from = new Date(finish_plan_from*1000);\r\n            const to   = new Date(finish_plan_to*1000);\r\n            try{\r\n                return `${from.getHours()}:${String(from.getMinutes()).padStart(2, '0')}-${to.getHours()}:${String(to.getMinutes()).padStart(2, '0')}`\r\n            } catch{/***/}\r\n            return null\r\n        },\r\n        isAtonceEnabled(){\r\n            return ['inited'].includes(this.routePlan.start_plan_mode)\r\n        },\r\n        deliveryFeeTotal(){\r\n            return Math.round(this.tariffRule.deliveryFee*this.deliveryDistanceKm) || 0\r\n        },\r\n        deliveryDistanceKm(){\r\n            return Math.round(this.routePlan.deliveryDistance/100)/10 || 0\r\n        },\r\n        checkoutError(){\r\n            if( this.routePlan.start_plan_mode=='nocourier' ){\r\n                return `К сожалению, нет доступных курьеров`;\r\n            }\r\n            if( this.errorCode=='no_input' ){\r\n                return \"Выберите адрес забора и доставки посылки\"\r\n            }\r\n            if( this.errorCode=='start_center_toofar' ){\r\n                return \"Адрес получения посылки слишком удален\"\r\n            }\r\n            if( this.errorCode=='finish_center_toofar' ){\r\n                return \"Адрес доставки посылки слишком удален\"\r\n            }\r\n            if( this.errorCode=='start_finish_toofar' ){\r\n                return \"Дальность доставки слишком большая\"\r\n            }\r\n            if( this.termsAccepted==0 ){\r\n                return `К сожалению, мы не можем доставить вам заказ, без согласия с условиями`\r\n            }\r\n            if( this.paymentType=='use_credit_store' && this.tariffRule.storeCreditBalance<this.tariffRule.deliverySum ){\r\n                return `На счету предприятия не достаточно средств`\r\n            }\r\n            return null\r\n        },\r\n        isVPNon(){\r\n            if( !this.iplocation || ['UA','RU','???'].includes(this.iplocation.country_code??'???') ){\r\n                return false\r\n            }\r\n            return true\r\n        },\r\n        bankCardCalc(){\r\n            let card=this.bankCard;\r\n            if( card && card.card_type ){\r\n                card.label=`${card.card_type.toUpperCase()} (**** ${card.card_mask.split('*').pop()})`\r\n            }\r\n            return card;\r\n        }\r\n    },\r\n    methods:{\r\n        async itemLoad(){\r\n            this.itemCheckoutDataGet()\r\n        },\r\n        async itemCheckoutDataGet( with_arrival_range=0 ){\r\n            try{\r\n                const request={\r\n                    order_id:this.order_id,\r\n                    with_arrival_range\r\n                }\r\n                const bulkResponse=await Utils.post(`${this.$heap.state.hostname}Shipment/itemCheckoutDataGet`,request)\r\n                if( !bulkResponse ){\r\n                    return\r\n                }\r\n                if( bulkResponse.order.stage_current!=='customer_confirmed' ){\r\n                    this.$go(`/order/shipment-${this.order.order_id}`)\r\n                }\r\n                this.order=bulkResponse.order\r\n                this.routePlan=bulkResponse.routePlan\r\n                this.bankCard=bulkResponse?.bankCard;\r\n\r\n\r\n                this.tariffRuleList=bulkResponse.deliveryOptions\r\n                this.tariffRuleSet(this.tariffRuleList?.[0]||{})\r\n                this.deliveryPlanMode=this.routePlan.start_plan_mode\r\n\r\n                if( bulkResponse.finishPlanSchedule ){\r\n                    this.finishPlanSchedule=bulkResponse.finishPlanSchedule\r\n                    this.deliveryFinishScheduled=bulkResponse.finishPlanSchedule.nearest\r\n                } else {\r\n                    this.finishPlanSchedule=null\r\n                    this.deliveryFinishScheduled=null\r\n                }\r\n                this.customerIpLocationGet()\r\n            }\r\n            catch(err){\r\n                this.errorCode=err?.responseJSON?.messages?.error\r\n                if( this.errorCode =='notfound' || this.errorCode =='forbidden' ){\r\n                    this.$flash('Заказ не найден')\r\n                    this.$router.go(-1)\r\n                }\r\n                console.log(err)\r\n                return false\r\n            }\r\n        },\r\n        tariffRuleSet( tariffRule ){\r\n            this.tariffRule=tariffRule\r\n            this.paymentType='use_card'\r\n            if(this.bankCard?.card_type){\r\n                this.paymentType='use_card_recurrent'\r\n            }\r\n            if( tariffRule.paymentByCreditStore==1 && this.tariffRule.storeCreditBalance>=this.tariffRule.deliverySum ){\r\n                this.paymentType='use_credit_store'\r\n            } else\r\n            if(tariffRule.paymentByCash==1){\r\n                this.paymentType='use_cash'\r\n            }\r\n        },\r\n        async datetimePick(){\r\n            if( !this.finishPlanSchedule ){\r\n                await this.itemCheckoutDataGet(1)\r\n            }\r\n            const modal = await modalController.create({\r\n                component: DateRangePicker,\r\n                presentingElement:this.$refs.page.$el,\r\n                initialBreakpoint:'0.6',\r\n                showBackdrop:true,\r\n                componentProps:{dateRange:this.finishPlanSchedule.range,defaultDatetime:this.finishPlanSchedule.nearest},\r\n            });\r\n            modal.present()\r\n            this.deliveryPlanMode='scheduled'\r\n            const data=await modal.onDidDismiss()\r\n            if(data.role==\"confirm\"){\r\n                this.deliveryFinishScheduled=data.data\r\n            } else {\r\n                this.deliveryFinishScheduled=null\r\n                this.deliveryPlanMode=this.routePlan.start_plan_mode\r\n            }\r\n        },\r\n        async customerIpLocationGet(){\r\n            try{\r\n                const response = await fetch(\"https://geolocation-db.com/json/\");\r\n                this.iplocation = await response.json();\r\n            }catch{/** */}\r\n        },\r\n\r\n        async proceed(){\r\n            const shipData={\r\n                order_id:this.order.order_id,\r\n                tariff_id:this.tariffRule.tariff_id,\r\n                deliveryFinishScheduled:this.deliveryFinishScheduled,\r\n                paymentByCard:this.paymentType=='use_card'?1:0,\r\n                paymentByCardRecurrent:this.paymentType=='use_card_recurrent'?1:0,\r\n                paymentByCash:this.paymentType=='use_cash'?1:0,\r\n                paymentByCreditStore:this.paymentType=='use_credit_store'?1:0\r\n            }\r\n            try{\r\n                await jQuery.post(`${this.$heap.state.hostname}Shipment/itemCheckoutDataSet`,JSON.stringify(shipData))\r\n            } catch(err){\r\n                const exception_code=err?.responseJSON?.messages?.error;\r\n                if(!exception_code){\r\n                  return false;\r\n                }\r\n                switch(exception_code){\r\n                    case 'payment_already_done':\r\n                        this.$flash(\"Уже оплачен\")\r\n                        this.$go(`/order/shipment-${this.order.order_id}`)\r\n                        return\r\n                    case 'credit_balance_low':\r\n                        this.$flash(\"Не достаточно средств на счету\")\r\n                        return\r\n                }\r\n                this.$flash(\"Не удается оформить заказ, обратитесь на горячую линию\")\r\n                //this.$router.go(-1);\r\n                return false\r\n            }\r\n            if(shipData.paymentByCard==1){\r\n                this.paymentFormOpen({\r\n                    order_id:`${this.order_id}`\r\n                });\r\n                return;\r\n            }\r\n            if(shipData.paymentByCardRecurrent==1){\r\n                const request={\r\n                    order_id:this.order.order_id,\r\n                    card_id:this.bankCard.card_id\r\n                }\r\n                try{\r\n                    this.$flash(\"Оплачиваем привязанной картой...\")\r\n                    await jQuery.post(`${this.$heap.state.hostname}CardAcquirer/paymentDo`,request)\r\n                    this.paymentStatusCheck()\r\n                } catch(err){\r\n                    this.$flash(\"Оплата привязанной картой не удалась\")\r\n                    return false\r\n                }\r\n            }\r\n            if(shipData.paymentByCreditStore==1){\r\n                this.$router.replace('/order/shipment-'+this.order.order_id);\r\n            }\r\n        },\r\n        async heavyLoadInfo(){\r\n            const alert = await alertController.create({\r\n                //header: 'Высокая загруженность',\r\n                message:'Готовность заказа, пробки и другие факторы могут повлиять на планируемое время доставки',\r\n                buttons: [\r\n                  {\r\n                    text: 'Ок',\r\n                    role: 'confirm',\r\n                  },\r\n                ],\r\n            });\r\n            await alert.present();\r\n            const { role } = await alert.onDidDismiss();\r\n            if( role=='confirm' ){\r\n                return true\r\n            }\r\n            return false\r\n        },\r\n        async paymentFormOpen( order_data ) {\r\n            const modal = await modalController.create({\r\n                component: OrderPaymentCardModal,\r\n                componentProps:{order_data},\r\n                initialBreakpoint: 0.85,\r\n                breakpoints: [0, 0.85, 0.95]\r\n            });\r\n            this.$topic.on('dismissModal',()=>{\r\n                modal && modal.dismiss();\r\n            });\r\n            modal.present()\r\n            await modal.onDidDismiss()\r\n            this.paymentStatusCheck()\r\n        },\r\n        async paymentStatusCheck(){\r\n            const request={\r\n                order_id:`${this.order.order_id}`\r\n            };\r\n            try{\r\n                const result= await jQuery.post( this.$heap.state.hostname + \"CardAcquirer/statusGet\", request );\r\n                if(result=='OK'){\r\n                    this.$router.replace('/order/shipment-'+this.order.order_id)\r\n                }\r\n            } catch(err){\r\n                const message=err.responseJSON?.messages?.error;\r\n                if(message=='wrong_status'){\r\n                    this.$flash(\"Данный заказ не может быть оплачен\");\r\n                    this.$router.replace('/order/shipment-'+this.order.order_id);\r\n                } else\r\n                if(message=='not_authorized'){\r\n                    this.$flash(\"Оплата не удалась, возможно не достаточно средств\");\r\n                    this.$router.replace('/order/shipment-'+this.order.order_id);\r\n                } else\r\n                if(message=='waiting'){\r\n                    this.$flash(\"Ваш платеж на ожидании\");\r\n                    this.$router.replace('/order/shipment-'+this.order.order_id);\r\n                } else {\r\n                    this.$flash(\"Оплата картой не удалась\");\r\n                }\r\n            }\r\n        },\r\n    },\r\n    mounted(){\r\n        this.itemLoad()\r\n    },\r\n    ionViewDidEnter(){\r\n        this.itemLoad()\r\n    }\r\n}\r\n</script>","<style scoped>\r\n    ion-datetime {\r\n        --background: #fff;\r\n        --wheel-fade-background-rgb: 255, 255, 255;\r\n    }\r\n</style>\r\n<template>\r\n    <div style=\"height:100%;\">\r\n        <ion-header >\r\n            <ion-toolbar>\r\n                <ion-item lines=\"none\">\r\n                    <ion-title>Выбрать день и время</ion-title>\r\n                    <ion-icon slot=\"end\" @click=\"cancel();\" :icon=\"closeOutline\" size=\"large\"></ion-icon>   \r\n                </ion-item>\r\n            </ion-toolbar>\r\n        </ion-header>\r\n        <ion-content class=\"ion-padding\">\r\n            <!-- <ion-card color=\"light\">\r\n                <ion-card-header>\r\n                    <ion-card-title style=\"font-size:0.9em\">\r\n                        Время доставки может отличаться\r\n                    </ion-card-title>\r\n                </ion-card-header>\r\n                <ion-card-content style=\"font-size:0.7em\">\r\n                    Погода, время приготовления, загруженость дорог и другие факторы могут ускорить или замедлить доставку.\r\n                </ion-card-content>\r\n            </ion-card> -->\r\n            <ion-datetime \r\n                style=\"max-width:100%;border-radius:10px\"\r\n                presentation=\"date-time\" \r\n                v-model=\"datetime\"\r\n                :prefer-wheel=\"true\" \r\n                :first-day-of-week=\"1\" \r\n                :min=\"dateRange?.dayFirst\"\r\n                :max=\"dateRange?.dayLast\"\r\n                :hour-values=\"hourValues\"\r\n                :minute-values=\"minuteValues\"\r\n            />\r\n            <ion-button color=\"primary\" @click=\"confirm()\" expand=\"block\">Ок</ion-button>\r\n            <ion-button color=\"light\" @click=\"cancel()\" expand=\"block\">Закрыть</ion-button>\r\n        </ion-content>\r\n    </div>\r\n</template>\r\n<script>\r\nimport {\r\n        modalController,\r\n        IonTitle,\r\n        IonDatetime,\r\n        IonToolbar,\r\n        IonContent,\r\n        IonHeader,\r\n        IonIcon,\r\n        IonItem,\r\n        IonButton,\r\n}               from '@ionic/vue'\r\nimport {\r\n  closeOutline,\r\n}                         from 'ionicons/icons';\r\nexport default {\r\n    props:['dateRange','defaultDatetime'],\r\n    components:{\r\n        IonTitle,\r\n        IonDatetime,\r\n        IonToolbar,\r\n        IonContent,\r\n        IonHeader,\r\n        IonIcon,\r\n        IonItem,\r\n        IonButton,\r\n    },\r\n    setup(){\r\n        return {closeOutline}\r\n    },\r\n    data(){\r\n        const dtime=this.defaultDatetime?.replace(' ','T')\r\n        return {\r\n            datetime:dtime\r\n        }\r\n    },\r\n    computed:{\r\n        hourValues(){\r\n            if(this.dateRange && this.dateRange.dayHours && this.datetime){\r\n                const [pickedDate]=this.datetime.split('T')\r\n                let dayHour=[]\r\n                for(let h in this.dateRange.dayHours[pickedDate]){\r\n                    const hour=h.split('_')[1]\r\n                    dayHour.push(hour)\r\n                }\r\n                return dayHour\r\n            }\r\n            return null\r\n        },\r\n        minuteValues(){\r\n            const [pickedDate,pickedTime]=this.datetime.split('T')\r\n            const [hour,minute,second]=pickedTime.split(':')\r\n            let minutes=null\r\n            //console.log(pickedDate,hour,minute,second,this.dateRange.dayHours[pickedDate][`h_${hour}`])\r\n            return this.dateRange.dayHours[pickedDate]?.[`h_${hour}`]\r\n        }\r\n    },\r\n    methods:{\r\n        confirm(){\r\n            modalController.dismiss(this.datetime, 'confirm')\r\n        },\r\n        cancel(){\r\n            modalController.dismiss(null, 'cancel')\r\n        },\r\n    }\r\n}\r\n</script>","import { render } from \"./DateRangePicker.vue?vue&type=template&id=31538a22&scoped=true\"\nimport script from \"./DateRangePicker.vue?vue&type=script&lang=js\"\nexport * from \"./DateRangePicker.vue?vue&type=script&lang=js\"\n\nimport \"./DateRangePicker.vue?vue&type=style&index=0&id=31538a22&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-31538a22\"]])\n\nexport default __exports__","import { render } from \"./ShipmentCheckout.vue?vue&type=template&id=af9c6b9e&scoped=true\"\nimport script from \"./ShipmentCheckout.vue?vue&type=script&lang=js\"\nexport * from \"./ShipmentCheckout.vue?vue&type=script&lang=js\"\n\nimport \"./ShipmentCheckout.vue?vue&type=style&index=0&id=af9c6b9e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-af9c6b9e\"]])\n\nexport default __exports__"],"names":["_createElementVNode","style","_createBlock","_component_base_layout","pageTitle","pageDefaultBackLink","ref","_createVNode","_component_ion_list","lines","_component_ion_item_divider","_component_ion_item","_$data$order","$data","order","order_description","routePlan","plan_mode","_component_ion_card","color","_component_ion_card_header","_component_ion_card_title","_component_ion_card_content","_hoisted_1","_component_ion_segment","mode","deliveryPlanMode","$event","$options","isAtonceEnabled","_component_ion_segment_button","value","onClick","_cache","deliveryFinishScheduled","_component_ion_label","_hoisted_2","_hoisted_3","datetimePick","_hoisted_4","deliveryFinishLocal","_createElementBlock","_hoisted_5","_toDisplayString","_hoisted_6","_component_ion_radio_group","paymentType","_$options$bankCardCal","_$options$bankCardCal2","tariffRule","paymentByCreditStore","button","detail","_component_ion_icon","icon","$setup","businessOutline","slot","_component_ion_radio","_hoisted_7","storeCreditName","storeCreditBalance","_ctx","$heap","state","currencySign","paymentByCash","cashOutline","paymentByCard","_hoisted_8","cardOutline","bankCardCalc","card_type","_component_ion_img","src","label","$go","addOutline","_component_ion_accordion_group","_component_ion_accordion","walletOutline","_component_ion_text","deliverySum","rocketOutline","deliveryCost","mapOutline","deliveryDistanceKm","deliveryFeeTotal","_component_router_link","to","_component_ion_checkbox","termsAccepted","checkoutError","heavyLoadInfo","_hoisted_9","deliveryFinishRange","alertCircleOutline","isVPNon","_component_ion_button","expand","proceed","disabled","_component_ion_header","_component_ion_toolbar","_component_ion_title","cancel","closeOutline","size","_component_ion_content","class","_$props$dateRange","_$props$dateRange2","_component_ion_datetime","presentation","datetime","min","$props","dateRange","dayFirst","max","dayLast","hourValues","minuteValues","confirm","props","components","IonTitle","IonDatetime","IonToolbar","IonContent","IonHeader","IonIcon","IonItem","IonButton","setup","data","_this$defaultDatetime","dtime","this","defaultDatetime","replace","computed","dayHours","pickedDate","split","dayHour","h","hour","push","_this$dateRange$dayHo","pickedTime","minute","second","methods","modalController","dismiss","__exports__","IonText","IonList","IonLabel","IonSegment","IonSegmentButton","IonImg","IonCard","IonCardContent","IonCardHeader","IonCardTitle","IonCheckbox","IonItemDivider","IonRadioGroup","IonRadio","IonAccordion","IonAccordionGroup","cubeOutline","locationOutline","flagOutline","chevronDown","checkmark","order_id","$route","params","id","finishPlanSchedule","bankCard","start_plan_mode","tariffRuleList","errorCode","shipAutoloadClock","iplocation","recurrentPaymentAllow","options","month","day","d","Date","parse","toLocaleDateString","undefined","finish_plan","start_plan","finish_arrival","finish_plan_from","Math","floor","finish_plan_to","from","getHours","String","getMinutes","padStart","includes","round","deliveryFee","deliveryDistance","_this$iplocation$coun","country_code","card","toUpperCase","card_mask","pop","itemLoad","itemCheckoutDataGet","with_arrival_range","_this$tariffRuleList","request","bulkResponse","Utils","post","hostname","stage_current","deliveryOptions","tariffRuleSet","nearest","customerIpLocationGet","err","_err$responseJSON","_err$responseJSON$mes","responseJSON","messages","error","$flash","$router","go","console","log","_this$bankCard","modal","create","component","DateRangePicker","presentingElement","$refs","page","$el","initialBreakpoint","showBackdrop","componentProps","range","present","onDidDismiss","role","response","fetch","json","shipData","tariff_id","paymentByCardRecurrent","jQuery","JSON","stringify","_err$responseJSON2","_err$responseJSON2$me","exception_code","card_id","paymentStatusCheck","paymentFormOpen","alert","alertController","message","buttons","text","order_data","OrderPaymentCardModal","breakpoints","$topic","on","result","_err$responseJSON3","_err$responseJSON3$me","mounted","ionViewDidEnter","render"],"sourceRoot":""}